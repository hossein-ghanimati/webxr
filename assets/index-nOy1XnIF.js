(function(){const R=document.createElement("link").relList;if(R&&R.supports&&R.supports("modulepreload"))return;for(const w of document.querySelectorAll('link[rel="modulepreload"]'))U(w);new MutationObserver(w=>{for(const e of w)if(e.type==="childList")for(const me of e.addedNodes)me.tagName==="LINK"&&me.rel==="modulepreload"&&U(me)}).observe(document,{childList:!0,subtree:!0});function O(w){const e={};return w.integrity&&(e.integrity=w.integrity),w.referrerPolicy&&(e.referrerPolicy=w.referrerPolicy),w.crossOrigin==="use-credentials"?e.credentials="include":w.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function U(w){if(w.ep)return;w.ep=!0;const e=O(w);fetch(w.href,e)}})();function getAugmentedNamespace(_){if(_.__esModule)return _;var R=_.default;if(typeof R=="function"){var O=function U(){return this instanceof U?Reflect.construct(R,arguments,this.constructor):R.apply(this,arguments)};O.prototype=R.prototype}else O={};return Object.defineProperty(O,"__esModule",{value:!0}),Object.keys(_).forEach(function(U){var w=Object.getOwnPropertyDescriptor(_,U);Object.defineProperty(O,U,w.get?w:{enumerable:!0,get:function(){return _[U]}})}),O}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var _=Symbol.for("react.element"),R=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),e=Symbol.for("react.provider"),me=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),we=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),S=Symbol.iterator;function z(Te){return Te===null||typeof Te!="object"?null:(Te=S&&Te[S]||Te["@@iterator"],typeof Te=="function"?Te:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,Q={};function V(Te,Ve,st){this.props=Te,this.context=Ve,this.refs=Q,this.updater=st||K}V.prototype.isReactComponent={},V.prototype.setState=function(Te,Ve){if(typeof Te!="object"&&typeof Te!="function"&&Te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Te,Ve,"setState")},V.prototype.forceUpdate=function(Te){this.updater.enqueueForceUpdate(this,Te,"forceUpdate")};function T(){}T.prototype=V.prototype;function F(Te,Ve,st){this.props=Te,this.context=Ve,this.refs=Q,this.updater=st||K}var N=F.prototype=new T;N.constructor=F,D(N,V.prototype),N.isPureReactComponent=!0;var k=Array.isArray,G=Object.prototype.hasOwnProperty,Z={current:null},ne={key:!0,ref:!0,__self:!0,__source:!0};function te(Te,Ve,st){var dt,Mt={},Rt=null,Yt=null;if(Ve!=null)for(dt in Ve.ref!==void 0&&(Yt=Ve.ref),Ve.key!==void 0&&(Rt=""+Ve.key),Ve)G.call(Ve,dt)&&!ne.hasOwnProperty(dt)&&(Mt[dt]=Ve[dt]);var zt=arguments.length-2;if(zt===1)Mt.children=st;else if(1<zt){for(var Ci=Array(zt),ci=0;ci<zt;ci++)Ci[ci]=arguments[ci+2];Mt.children=Ci}if(Te&&Te.defaultProps)for(dt in zt=Te.defaultProps,zt)Mt[dt]===void 0&&(Mt[dt]=zt[dt]);return{$$typeof:_,type:Te,key:Rt,ref:Yt,props:Mt,_owner:Z.current}}function de(Te,Ve){return{$$typeof:_,type:Te.type,key:Ve,ref:Te.ref,props:Te.props,_owner:Te._owner}}function oe(Te){return typeof Te=="object"&&Te!==null&&Te.$$typeof===_}function ye(Te){var Ve={"=":"=0",":":"=2"};return"$"+Te.replace(/[=:]/g,function(st){return Ve[st]})}var Me=/\/+/g;function Ne(Te,Ve){return typeof Te=="object"&&Te!==null&&Te.key!=null?ye(""+Te.key):Ve.toString(36)}function Pe(Te,Ve,st,dt,Mt){var Rt=typeof Te;(Rt==="undefined"||Rt==="boolean")&&(Te=null);var Yt=!1;if(Te===null)Yt=!0;else switch(Rt){case"string":case"number":Yt=!0;break;case"object":switch(Te.$$typeof){case _:case R:Yt=!0}}if(Yt)return Yt=Te,Mt=Mt(Yt),Te=dt===""?"."+Ne(Yt,0):dt,k(Mt)?(st="",Te!=null&&(st=Te.replace(Me,"$&/")+"/"),Pe(Mt,Ve,st,"",function(ci){return ci})):Mt!=null&&(oe(Mt)&&(Mt=de(Mt,st+(!Mt.key||Yt&&Yt.key===Mt.key?"":(""+Mt.key).replace(Me,"$&/")+"/")+Te)),Ve.push(Mt)),1;if(Yt=0,dt=dt===""?".":dt+":",k(Te))for(var zt=0;zt<Te.length;zt++){Rt=Te[zt];var Ci=dt+Ne(Rt,zt);Yt+=Pe(Rt,Ve,st,Ci,Mt)}else if(Ci=z(Te),typeof Ci=="function")for(Te=Ci.call(Te),zt=0;!(Rt=Te.next()).done;)Rt=Rt.value,Ci=dt+Ne(Rt,zt++),Yt+=Pe(Rt,Ve,st,Ci,Mt);else if(Rt==="object")throw Ve=String(Te),Error("Objects are not valid as a React child (found: "+(Ve==="[object Object]"?"object with keys {"+Object.keys(Te).join(", ")+"}":Ve)+"). If you meant to render a collection of children, use an array instead.");return Yt}function Qe(Te,Ve,st){if(Te==null)return Te;var dt=[],Mt=0;return Pe(Te,dt,"","",function(Rt){return Ve.call(st,Rt,Mt++)}),dt}function De(Te){if(Te._status===-1){var Ve=Te._result;Ve=Ve(),Ve.then(function(st){(Te._status===0||Te._status===-1)&&(Te._status=1,Te._result=st)},function(st){(Te._status===0||Te._status===-1)&&(Te._status=2,Te._result=st)}),Te._status===-1&&(Te._status=0,Te._result=Ve)}if(Te._status===1)return Te._result.default;throw Te._result}var ke={current:null},Ce={transition:null},fe={ReactCurrentDispatcher:ke,ReactCurrentBatchConfig:Ce,ReactCurrentOwner:Z};function Oe(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:Qe,forEach:function(Te,Ve,st){Qe(Te,function(){Ve.apply(this,arguments)},st)},count:function(Te){var Ve=0;return Qe(Te,function(){Ve++}),Ve},toArray:function(Te){return Qe(Te,function(Ve){return Ve})||[]},only:function(Te){if(!oe(Te))throw Error("React.Children.only expected to receive a single React element child.");return Te}},react_production_min.Component=V,react_production_min.Fragment=O,react_production_min.Profiler=w,react_production_min.PureComponent=F,react_production_min.StrictMode=U,react_production_min.Suspense=we,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fe,react_production_min.act=Oe,react_production_min.cloneElement=function(Te,Ve,st){if(Te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Te+".");var dt=D({},Te.props),Mt=Te.key,Rt=Te.ref,Yt=Te._owner;if(Ve!=null){if(Ve.ref!==void 0&&(Rt=Ve.ref,Yt=Z.current),Ve.key!==void 0&&(Mt=""+Ve.key),Te.type&&Te.type.defaultProps)var zt=Te.type.defaultProps;for(Ci in Ve)G.call(Ve,Ci)&&!ne.hasOwnProperty(Ci)&&(dt[Ci]=Ve[Ci]===void 0&&zt!==void 0?zt[Ci]:Ve[Ci])}var Ci=arguments.length-2;if(Ci===1)dt.children=st;else if(1<Ci){zt=Array(Ci);for(var ci=0;ci<Ci;ci++)zt[ci]=arguments[ci+2];dt.children=zt}return{$$typeof:_,type:Te.type,key:Mt,ref:Rt,props:dt,_owner:Yt}},react_production_min.createContext=function(Te){return Te={$$typeof:me,_currentValue:Te,_currentValue2:Te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Te.Provider={$$typeof:e,_context:Te},Te.Consumer=Te},react_production_min.createElement=te,react_production_min.createFactory=function(Te){var Ve=te.bind(null,Te);return Ve.type=Te,Ve},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(Te){return{$$typeof:ie,render:Te}},react_production_min.isValidElement=oe,react_production_min.lazy=function(Te){return{$$typeof:p,_payload:{_status:-1,_result:Te},_init:De}},react_production_min.memo=function(Te,Ve){return{$$typeof:P,type:Te,compare:Ve===void 0?null:Ve}},react_production_min.startTransition=function(Te){var Ve=Ce.transition;Ce.transition={};try{Te()}finally{Ce.transition=Ve}},react_production_min.unstable_act=Oe,react_production_min.useCallback=function(Te,Ve){return ke.current.useCallback(Te,Ve)},react_production_min.useContext=function(Te){return ke.current.useContext(Te)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(Te){return ke.current.useDeferredValue(Te)},react_production_min.useEffect=function(Te,Ve){return ke.current.useEffect(Te,Ve)},react_production_min.useId=function(){return ke.current.useId()},react_production_min.useImperativeHandle=function(Te,Ve,st){return ke.current.useImperativeHandle(Te,Ve,st)},react_production_min.useInsertionEffect=function(Te,Ve){return ke.current.useInsertionEffect(Te,Ve)},react_production_min.useLayoutEffect=function(Te,Ve){return ke.current.useLayoutEffect(Te,Ve)},react_production_min.useMemo=function(Te,Ve){return ke.current.useMemo(Te,Ve)},react_production_min.useReducer=function(Te,Ve,st){return ke.current.useReducer(Te,Ve,st)},react_production_min.useRef=function(Te){return ke.current.useRef(Te)},react_production_min.useState=function(Te){return ke.current.useState(Te)},react_production_min.useSyncExternalStore=function(Te,Ve,st){return ke.current.useSyncExternalStore(Te,Ve,st)},react_production_min.useTransition=function(){return ke.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var _=requireReact(),R=Symbol.for("react.element"),O=Symbol.for("react.fragment"),U=Object.prototype.hasOwnProperty,w=_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e={key:!0,ref:!0,__self:!0,__source:!0};function me(ie,we,P){var p,S={},z=null,K=null;P!==void 0&&(z=""+P),we.key!==void 0&&(z=""+we.key),we.ref!==void 0&&(K=we.ref);for(p in we)U.call(we,p)&&!e.hasOwnProperty(p)&&(S[p]=we[p]);if(ie&&ie.defaultProps)for(p in we=ie.defaultProps,we)S[p]===void 0&&(S[p]=we[p]);return{$$typeof:R,type:ie,key:z,ref:K,props:S,_owner:w.current}}return reactJsxRuntime_production_min.Fragment=O,reactJsxRuntime_production_min.jsx=me,reactJsxRuntime_production_min.jsxs=me,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact(),client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,function(_){function R(Ce,fe){var Oe=Ce.length;Ce.push(fe);e:for(;0<Oe;){var Te=Oe-1>>>1,Ve=Ce[Te];if(0<w(Ve,fe))Ce[Te]=fe,Ce[Oe]=Ve,Oe=Te;else break e}}function O(Ce){return Ce.length===0?null:Ce[0]}function U(Ce){if(Ce.length===0)return null;var fe=Ce[0],Oe=Ce.pop();if(Oe!==fe){Ce[0]=Oe;e:for(var Te=0,Ve=Ce.length,st=Ve>>>1;Te<st;){var dt=2*(Te+1)-1,Mt=Ce[dt],Rt=dt+1,Yt=Ce[Rt];if(0>w(Mt,Oe))Rt<Ve&&0>w(Yt,Mt)?(Ce[Te]=Yt,Ce[Rt]=Oe,Te=Rt):(Ce[Te]=Mt,Ce[dt]=Oe,Te=dt);else if(Rt<Ve&&0>w(Yt,Oe))Ce[Te]=Yt,Ce[Rt]=Oe,Te=Rt;else break e}}return fe}function w(Ce,fe){var Oe=Ce.sortIndex-fe.sortIndex;return Oe!==0?Oe:Ce.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var e=performance;_.unstable_now=function(){return e.now()}}else{var me=Date,ie=me.now();_.unstable_now=function(){return me.now()-ie}}var we=[],P=[],p=1,S=null,z=3,K=!1,D=!1,Q=!1,V=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(Ce){for(var fe=O(P);fe!==null;){if(fe.callback===null)U(P);else if(fe.startTime<=Ce)U(P),fe.sortIndex=fe.expirationTime,R(we,fe);else break;fe=O(P)}}function k(Ce){if(Q=!1,N(Ce),!D)if(O(we)!==null)D=!0,De(G);else{var fe=O(P);fe!==null&&ke(k,fe.startTime-Ce)}}function G(Ce,fe){D=!1,Q&&(Q=!1,T(te),te=-1),K=!0;var Oe=z;try{for(N(fe),S=O(we);S!==null&&(!(S.expirationTime>fe)||Ce&&!ye());){var Te=S.callback;if(typeof Te=="function"){S.callback=null,z=S.priorityLevel;var Ve=Te(S.expirationTime<=fe);fe=_.unstable_now(),typeof Ve=="function"?S.callback=Ve:S===O(we)&&U(we),N(fe)}else U(we);S=O(we)}if(S!==null)var st=!0;else{var dt=O(P);dt!==null&&ke(k,dt.startTime-fe),st=!1}return st}finally{S=null,z=Oe,K=!1}}var Z=!1,ne=null,te=-1,de=5,oe=-1;function ye(){return!(_.unstable_now()-oe<de)}function Me(){if(ne!==null){var Ce=_.unstable_now();oe=Ce;var fe=!0;try{fe=ne(!0,Ce)}finally{fe?Ne():(Z=!1,ne=null)}}else Z=!1}var Ne;if(typeof F=="function")Ne=function(){F(Me)};else if(typeof MessageChannel<"u"){var Pe=new MessageChannel,Qe=Pe.port2;Pe.port1.onmessage=Me,Ne=function(){Qe.postMessage(null)}}else Ne=function(){V(Me,0)};function De(Ce){ne=Ce,Z||(Z=!0,Ne())}function ke(Ce,fe){te=V(function(){Ce(_.unstable_now())},fe)}_.unstable_IdlePriority=5,_.unstable_ImmediatePriority=1,_.unstable_LowPriority=4,_.unstable_NormalPriority=3,_.unstable_Profiling=null,_.unstable_UserBlockingPriority=2,_.unstable_cancelCallback=function(Ce){Ce.callback=null},_.unstable_continueExecution=function(){D||K||(D=!0,De(G))},_.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<Ce?Math.floor(1e3/Ce):5},_.unstable_getCurrentPriorityLevel=function(){return z},_.unstable_getFirstCallbackNode=function(){return O(we)},_.unstable_next=function(Ce){switch(z){case 1:case 2:case 3:var fe=3;break;default:fe=z}var Oe=z;z=fe;try{return Ce()}finally{z=Oe}},_.unstable_pauseExecution=function(){},_.unstable_requestPaint=function(){},_.unstable_runWithPriority=function(Ce,fe){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var Oe=z;z=Ce;try{return fe()}finally{z=Oe}},_.unstable_scheduleCallback=function(Ce,fe,Oe){var Te=_.unstable_now();switch(typeof Oe=="object"&&Oe!==null?(Oe=Oe.delay,Oe=typeof Oe=="number"&&0<Oe?Te+Oe:Te):Oe=Te,Ce){case 1:var Ve=-1;break;case 2:Ve=250;break;case 5:Ve=1073741823;break;case 4:Ve=1e4;break;default:Ve=5e3}return Ve=Oe+Ve,Ce={id:p++,callback:fe,priorityLevel:Ce,startTime:Oe,expirationTime:Ve,sortIndex:-1},Oe>Te?(Ce.sortIndex=Oe,R(P,Ce),O(we)===null&&Ce===O(P)&&(Q?(T(te),te=-1):Q=!0,ke(k,Oe-Te))):(Ce.sortIndex=Ve,R(we,Ce),D||K||(D=!0,De(G))),Ce},_.unstable_shouldYield=ye,_.unstable_wrapCallback=function(Ce){var fe=z;return function(){var Oe=z;z=fe;try{return Ce.apply(this,arguments)}finally{z=Oe}}}}(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var _=requireReact(),R=requireScheduler();function O(g){for(var y="https://reactjs.org/docs/error-decoder.html?invariant="+g,I=1;I<arguments.length;I++)y+="&args[]="+encodeURIComponent(arguments[I]);return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U=new Set,w={};function e(g,y){me(g,y),me(g+"Capture",y)}function me(g,y){for(w[g]=y,g=0;g<y.length;g++)U.add(y[g])}var ie=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),we=Object.prototype.hasOwnProperty,P=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},S={};function z(g){return we.call(S,g)?!0:we.call(p,g)?!1:P.test(g)?S[g]=!0:(p[g]=!0,!1)}function K(g,y,I,j){if(I!==null&&I.type===0)return!1;switch(typeof y){case"function":case"symbol":return!0;case"boolean":return j?!1:I!==null?!I.acceptsBooleans:(g=g.toLowerCase().slice(0,5),g!=="data-"&&g!=="aria-");default:return!1}}function D(g,y,I,j){if(y===null||typeof y>"u"||K(g,y,I,j))return!0;if(j)return!1;if(I!==null)switch(I.type){case 3:return!y;case 4:return y===!1;case 5:return isNaN(y);case 6:return isNaN(y)||1>y}return!1}function Q(g,y,I,j,he,be,ze){this.acceptsBooleans=y===2||y===3||y===4,this.attributeName=j,this.attributeNamespace=he,this.mustUseProperty=I,this.propertyName=g,this.type=y,this.sanitizeURL=be,this.removeEmptyString=ze}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(g){V[g]=new Q(g,0,!1,g,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(g){var y=g[0];V[y]=new Q(y,1,!1,g[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(g){V[g]=new Q(g,2,!1,g.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(g){V[g]=new Q(g,2,!1,g,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(g){V[g]=new Q(g,3,!1,g.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(g){V[g]=new Q(g,3,!0,g,null,!1,!1)}),["capture","download"].forEach(function(g){V[g]=new Q(g,4,!1,g,null,!1,!1)}),["cols","rows","size","span"].forEach(function(g){V[g]=new Q(g,6,!1,g,null,!1,!1)}),["rowSpan","start"].forEach(function(g){V[g]=new Q(g,5,!1,g.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function F(g){return g[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(g){var y=g.replace(T,F);V[y]=new Q(y,1,!1,g,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(g){var y=g.replace(T,F);V[y]=new Q(y,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(g){var y=g.replace(T,F);V[y]=new Q(y,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(g){V[g]=new Q(g,1,!1,g.toLowerCase(),null,!1,!1)}),V.xlinkHref=new Q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(g){V[g]=new Q(g,1,!1,g.toLowerCase(),null,!0,!0)});function N(g,y,I,j){var he=V.hasOwnProperty(y)?V[y]:null;(he!==null?he.type!==0:j||!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(D(y,I,he,j)&&(I=null),j||he===null?z(y)&&(I===null?g.removeAttribute(y):g.setAttribute(y,""+I)):he.mustUseProperty?g[he.propertyName]=I===null?he.type===3?!1:"":I:(y=he.attributeName,j=he.attributeNamespace,I===null?g.removeAttribute(y):(he=he.type,I=he===3||he===4&&I===!0?"":""+I,j?g.setAttributeNS(j,y,I):g.setAttribute(y,I))))}var k=_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),Z=Symbol.for("react.portal"),ne=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),oe=Symbol.for("react.provider"),ye=Symbol.for("react.context"),Me=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),Pe=Symbol.for("react.suspense_list"),Qe=Symbol.for("react.memo"),De=Symbol.for("react.lazy"),ke=Symbol.for("react.offscreen"),Ce=Symbol.iterator;function fe(g){return g===null||typeof g!="object"?null:(g=Ce&&g[Ce]||g["@@iterator"],typeof g=="function"?g:null)}var Oe=Object.assign,Te;function Ve(g){if(Te===void 0)try{throw Error()}catch(I){var y=I.stack.trim().match(/\n( *(at )?)/);Te=y&&y[1]||""}return`
`+Te+g}var st=!1;function dt(g,y){if(!g||st)return"";st=!0;var I=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(y)if(y=function(){throw Error()},Object.defineProperty(y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(y,[])}catch(Zt){var j=Zt}Reflect.construct(g,[],y)}else{try{y.call()}catch(Zt){j=Zt}g.call(y.prototype)}else{try{throw Error()}catch(Zt){j=Zt}g()}}catch(Zt){if(Zt&&j&&typeof Zt.stack=="string"){for(var he=Zt.stack.split(`
`),be=j.stack.split(`
`),ze=he.length-1,pt=be.length-1;1<=ze&&0<=pt&&he[ze]!==be[pt];)pt--;for(;1<=ze&&0<=pt;ze--,pt--)if(he[ze]!==be[pt]){if(ze!==1||pt!==1)do if(ze--,pt--,0>pt||he[ze]!==be[pt]){var bt=`
`+he[ze].replace(" at new "," at ");return g.displayName&&bt.includes("<anonymous>")&&(bt=bt.replace("<anonymous>",g.displayName)),bt}while(1<=ze&&0<=pt);break}}}finally{st=!1,Error.prepareStackTrace=I}return(g=g?g.displayName||g.name:"")?Ve(g):""}function Mt(g){switch(g.tag){case 5:return Ve(g.type);case 16:return Ve("Lazy");case 13:return Ve("Suspense");case 19:return Ve("SuspenseList");case 0:case 2:case 15:return g=dt(g.type,!1),g;case 11:return g=dt(g.type.render,!1),g;case 1:return g=dt(g.type,!0),g;default:return""}}function Rt(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case ne:return"Fragment";case Z:return"Portal";case de:return"Profiler";case te:return"StrictMode";case Ne:return"Suspense";case Pe:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case ye:return(g.displayName||"Context")+".Consumer";case oe:return(g._context.displayName||"Context")+".Provider";case Me:var y=g.render;return g=g.displayName,g||(g=y.displayName||y.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case Qe:return y=g.displayName||null,y!==null?y:Rt(g.type)||"Memo";case De:y=g._payload,g=g._init;try{return Rt(g(y))}catch{}}return null}function Yt(g){var y=g.type;switch(g.tag){case 24:return"Cache";case 9:return(y.displayName||"Context")+".Consumer";case 10:return(y._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=y.render,g=g.displayName||g.name||"",y.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return y;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Rt(y);case 8:return y===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y}return null}function zt(g){switch(typeof g){case"boolean":case"number":case"string":case"undefined":return g;case"object":return g;default:return""}}function Ci(g){var y=g.type;return(g=g.nodeName)&&g.toLowerCase()==="input"&&(y==="checkbox"||y==="radio")}function ci(g){var y=Ci(g)?"checked":"value",I=Object.getOwnPropertyDescriptor(g.constructor.prototype,y),j=""+g[y];if(!g.hasOwnProperty(y)&&typeof I<"u"&&typeof I.get=="function"&&typeof I.set=="function"){var he=I.get,be=I.set;return Object.defineProperty(g,y,{configurable:!0,get:function(){return he.call(this)},set:function(ze){j=""+ze,be.call(this,ze)}}),Object.defineProperty(g,y,{enumerable:I.enumerable}),{getValue:function(){return j},setValue:function(ze){j=""+ze},stopTracking:function(){g._valueTracker=null,delete g[y]}}}}function Qi(g){g._valueTracker||(g._valueTracker=ci(g))}function sn(g){if(!g)return!1;var y=g._valueTracker;if(!y)return!0;var I=y.getValue(),j="";return g&&(j=Ci(g)?g.checked?"true":"false":g.value),g=j,g!==I?(y.setValue(g),!0):!1}function In(g){if(g=g||(typeof document<"u"?document:void 0),typeof g>"u")return null;try{return g.activeElement||g.body}catch{return g.body}}function Xn(g,y){var I=y.checked;return Oe({},y,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:I??g._wrapperState.initialChecked})}function tr(g,y){var I=y.defaultValue==null?"":y.defaultValue,j=y.checked!=null?y.checked:y.defaultChecked;I=zt(y.value!=null?y.value:I),g._wrapperState={initialChecked:j,initialValue:I,controlled:y.type==="checkbox"||y.type==="radio"?y.checked!=null:y.value!=null}}function Jn(g,y){y=y.checked,y!=null&&N(g,"checked",y,!1)}function bn(g,y){Jn(g,y);var I=zt(y.value),j=y.type;if(I!=null)j==="number"?(I===0&&g.value===""||g.value!=I)&&(g.value=""+I):g.value!==""+I&&(g.value=""+I);else if(j==="submit"||j==="reset"){g.removeAttribute("value");return}y.hasOwnProperty("value")?Ir(g,y.type,I):y.hasOwnProperty("defaultValue")&&Ir(g,y.type,zt(y.defaultValue)),y.checked==null&&y.defaultChecked!=null&&(g.defaultChecked=!!y.defaultChecked)}function cr(g,y,I){if(y.hasOwnProperty("value")||y.hasOwnProperty("defaultValue")){var j=y.type;if(!(j!=="submit"&&j!=="reset"||y.value!==void 0&&y.value!==null))return;y=""+g._wrapperState.initialValue,I||y===g.value||(g.value=y),g.defaultValue=y}I=g.name,I!==""&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,I!==""&&(g.name=I)}function Ir(g,y,I){(y!=="number"||In(g.ownerDocument)!==g)&&(I==null?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+I&&(g.defaultValue=""+I))}var je=Array.isArray;function xs(g,y,I,j){if(g=g.options,y){y={};for(var he=0;he<I.length;he++)y["$"+I[he]]=!0;for(I=0;I<g.length;I++)he=y.hasOwnProperty("$"+g[I].value),g[I].selected!==he&&(g[I].selected=he),he&&j&&(g[I].defaultSelected=!0)}else{for(I=""+zt(I),y=null,he=0;he<g.length;he++){if(g[he].value===I){g[he].selected=!0,j&&(g[he].defaultSelected=!0);return}y!==null||g[he].disabled||(y=g[he])}y!==null&&(y.selected=!0)}}function mr(g,y){if(y.dangerouslySetInnerHTML!=null)throw Error(O(91));return Oe({},y,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function Wn(g,y){var I=y.value;if(I==null){if(I=y.children,y=y.defaultValue,I!=null){if(y!=null)throw Error(O(92));if(je(I)){if(1<I.length)throw Error(O(93));I=I[0]}y=I}y==null&&(y=""),I=y}g._wrapperState={initialValue:zt(I)}}function Ms(g,y){var I=zt(y.value),j=zt(y.defaultValue);I!=null&&(I=""+I,I!==g.value&&(g.value=I),y.defaultValue==null&&g.defaultValue!==I&&(g.defaultValue=I)),j!=null&&(g.defaultValue=""+j)}function ts(g){var y=g.textContent;y===g._wrapperState.initialValue&&y!==""&&y!==null&&(g.value=y)}function Co(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Us(g,y){return g==null||g==="http://www.w3.org/1999/xhtml"?Co(y):g==="http://www.w3.org/2000/svg"&&y==="foreignObject"?"http://www.w3.org/1999/xhtml":g}var Jr,Ti=function(g){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(y,I,j,he){MSApp.execUnsafeLocalFunction(function(){return g(y,I,j,he)})}:g}(function(g,y){if(g.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in g)g.innerHTML=y;else{for(Jr=Jr||document.createElement("div"),Jr.innerHTML="<svg>"+y.valueOf().toString()+"</svg>",y=Jr.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;y.firstChild;)g.appendChild(y.firstChild)}});function Ye(g,y){if(y){var I=g.firstChild;if(I&&I===g.lastChild&&I.nodeType===3){I.nodeValue=y;return}}g.textContent=y}var Xe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lt=["Webkit","ms","Moz","O"];Object.keys(Xe).forEach(function(g){lt.forEach(function(y){y=y+g.charAt(0).toUpperCase()+g.substring(1),Xe[y]=Xe[g]})});function tt(g,y,I){return y==null||typeof y=="boolean"||y===""?"":I||typeof y!="number"||y===0||Xe.hasOwnProperty(g)&&Xe[g]?(""+y).trim():y+"px"}function ot(g,y){g=g.style;for(var I in y)if(y.hasOwnProperty(I)){var j=I.indexOf("--")===0,he=tt(I,y[I],j);I==="float"&&(I="cssFloat"),j?g.setProperty(I,he):g[I]=he}}var ct=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(g,y){if(y){if(ct[g]&&(y.children!=null||y.dangerouslySetInnerHTML!=null))throw Error(O(137,g));if(y.dangerouslySetInnerHTML!=null){if(y.children!=null)throw Error(O(60));if(typeof y.dangerouslySetInnerHTML!="object"||!("__html"in y.dangerouslySetInnerHTML))throw Error(O(61))}if(y.style!=null&&typeof y.style!="object")throw Error(O(62))}}function ae(g,y){if(g.indexOf("-")===-1)return typeof y.is=="string";switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ge=null;function He(g){return g=g.target||g.srcElement||window,g.correspondingUseElement&&(g=g.correspondingUseElement),g.nodeType===3?g.parentNode:g}var Ze=null,ht=null,St=null;function Di(g){if(g=ko(g)){if(typeof Ze!="function")throw Error(O(280));var y=g.stateNode;y&&(y=jl(y),Ze(g.stateNode,g.type,y))}}function Wi(g){ht?St?St.push(g):St=[g]:ht=g}function Oi(){if(ht){var g=ht,y=St;if(St=ht=null,Di(g),y)for(g=0;g<y.length;g++)Di(y[g])}}function Ui(g,y){return g(y)}function Ji(){}var Ss=!1;function kn(g,y,I){if(Ss)return g(y,I);Ss=!0;try{return Ui(g,y,I)}finally{Ss=!1,(ht!==null||St!==null)&&(Ji(),Oi())}}function Jt(g,y){var I=g.stateNode;if(I===null)return null;var j=jl(I);if(j===null)return null;I=j[y];e:switch(y){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(j=!j.disabled)||(g=g.type,j=!(g==="button"||g==="input"||g==="select"||g==="textarea")),g=!j;break e;default:g=!1}if(g)return null;if(I&&typeof I!="function")throw Error(O(231,y,typeof I));return I}var Dr=!1;if(ie)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){Dr=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{Dr=!1}function Hs(g,y,I,j,he,be,ze,pt,bt){var Zt=Array.prototype.slice.call(arguments,3);try{y.apply(I,Zt)}catch(Bi){this.onError(Bi)}}var os=!1,Vo=null,Ps=!1,Fo=null,W0={onError:function(g){os=!0,Vo=g}};function zo(g,y,I,j,he,be,ze,pt,bt){os=!1,Vo=null,Hs.apply(W0,arguments)}function Rs(g,y,I,j,he,be,ze,pt,bt){if(zo.apply(this,arguments),os){if(os){var Zt=Vo;os=!1,Vo=null}else throw Error(O(198));Ps||(Ps=!0,Fo=Zt)}}function ir(g){var y=g,I=g;if(g.alternate)for(;y.return;)y=y.return;else{g=y;do y=g,y.flags&4098&&(I=y.return),g=y.return;while(g)}return y.tag===3?I:null}function Ys(g){if(g.tag===13){var y=g.memoizedState;if(y===null&&(g=g.alternate,g!==null&&(y=g.memoizedState)),y!==null)return y.dehydrated}return null}function ca(g){if(ir(g)!==g)throw Error(O(188))}function L0(g){var y=g.alternate;if(!y){if(y=ir(g),y===null)throw Error(O(188));return y!==g?null:g}for(var I=g,j=y;;){var he=I.return;if(he===null)break;var be=he.alternate;if(be===null){if(j=he.return,j!==null){I=j;continue}break}if(he.child===be.child){for(be=he.child;be;){if(be===I)return ca(he),g;if(be===j)return ca(he),y;be=be.sibling}throw Error(O(188))}if(I.return!==j.return)I=he,j=be;else{for(var ze=!1,pt=he.child;pt;){if(pt===I){ze=!0,I=he,j=be;break}if(pt===j){ze=!0,j=he,I=be;break}pt=pt.sibling}if(!ze){for(pt=be.child;pt;){if(pt===I){ze=!0,I=be,j=he;break}if(pt===j){ze=!0,j=be,I=he;break}pt=pt.sibling}if(!ze)throw Error(O(189))}}if(I.alternate!==j)throw Error(O(190))}if(I.tag!==3)throw Error(O(188));return I.stateNode.current===I?g:y}function al(g){return g=L0(g),g!==null?ua(g):null}function ua(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var y=ua(g);if(y!==null)return y;g=g.sibling}return null}var $e=R.unstable_scheduleCallback,At=R.unstable_cancelCallback,Pt=R.unstable_shouldYield,si=R.unstable_requestPaint,kt=R.unstable_now,di=R.unstable_getCurrentPriorityLevel,Ii=R.unstable_ImmediatePriority,pn=R.unstable_UserBlockingPriority,nn=R.unstable_NormalPriority,hi=R.unstable_LowPriority,Tn=R.unstable_IdlePriority,Bn=null,Dn=null;function ns(g){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Bn,g,void 0,(g.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:gs,or=Math.log,br=Math.LN2;function gs(g){return g>>>=0,g===0?32:31-(or(g)/br|0)|0}var bs=64,rn=4194304;function $n(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function as(g,y){var I=g.pendingLanes;if(I===0)return 0;var j=0,he=g.suspendedLanes,be=g.pingedLanes,ze=I&268435455;if(ze!==0){var pt=ze&~he;pt!==0?j=$n(pt):(be&=ze,be!==0&&(j=$n(be)))}else ze=I&~he,ze!==0?j=$n(ze):be!==0&&(j=$n(be));if(j===0)return 0;if(y!==0&&y!==j&&!(y&he)&&(he=j&-j,be=y&-y,he>=be||he===16&&(be&4194240)!==0))return y;if(j&4&&(j|=I&16),y=g.entangledLanes,y!==0)for(g=g.entanglements,y&=j;0<y;)I=31-Kn(y),he=1<<I,j|=g[I],y&=~he;return j}function Or(g,y){switch(g){case 1:case 2:case 4:return y+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _e(g,y){for(var I=g.suspendedLanes,j=g.pingedLanes,he=g.expirationTimes,be=g.pendingLanes;0<be;){var ze=31-Kn(be),pt=1<<ze,bt=he[ze];bt===-1?(!(pt&I)||pt&j)&&(he[ze]=Or(pt,y)):bt<=y&&(g.expiredLanes|=pt),be&=~pt}}function Re(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Fe(){var g=bs;return bs<<=1,!(bs&4194240)&&(bs=64),g}function We(g){for(var y=[],I=0;31>I;I++)y.push(g);return y}function it(g,y,I){g.pendingLanes|=y,y!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,y=31-Kn(y),g[y]=I}function _t(g,y){var I=g.pendingLanes&~y;g.pendingLanes=y,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=y,g.mutableReadLanes&=y,g.entangledLanes&=y,y=g.entanglements;var j=g.eventTimes;for(g=g.expirationTimes;0<I;){var he=31-Kn(I),be=1<<he;y[he]=0,j[he]=-1,g[he]=-1,I&=~be}}function Dt(g,y){var I=g.entangledLanes|=y;for(g=g.entanglements;I;){var j=31-Kn(I),he=1<<j;he&y|g[j]&y&&(g[j]|=y),I&=~he}}var ei=0;function pi(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var Ut,ni,Ri,an,mi,On=!1,nr=[],Qn=null,Ln=null,gr=null,Qr=new Map,ls=new Map,Vr=[],qs="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Js(g,y){switch(g){case"focusin":case"focusout":Qn=null;break;case"dragenter":case"dragleave":Ln=null;break;case"mouseover":case"mouseout":gr=null;break;case"pointerover":case"pointerout":Qr.delete(y.pointerId);break;case"gotpointercapture":case"lostpointercapture":ls.delete(y.pointerId)}}function vs(g,y,I,j,he,be){return g===null||g.nativeEvent!==be?(g={blockedOn:y,domEventName:I,eventSystemFlags:j,nativeEvent:be,targetContainers:[he]},y!==null&&(y=ko(y),y!==null&&ni(y)),g):(g.eventSystemFlags|=j,y=g.targetContainers,he!==null&&y.indexOf(he)===-1&&y.push(he),g)}function Zs(g,y,I,j,he){switch(y){case"focusin":return Qn=vs(Qn,g,y,I,j,he),!0;case"dragenter":return Ln=vs(Ln,g,y,I,j,he),!0;case"mouseover":return gr=vs(gr,g,y,I,j,he),!0;case"pointerover":var be=he.pointerId;return Qr.set(be,vs(Qr.get(be)||null,g,y,I,j,he)),!0;case"gotpointercapture":return be=he.pointerId,ls.set(be,vs(ls.get(be)||null,g,y,I,j,he)),!0}return!1}function Os(g){var y=q0(g.target);if(y!==null){var I=ir(y);if(I!==null){if(y=I.tag,y===13){if(y=Ys(I),y!==null){g.blockedOn=y,mi(g.priority,function(){Ri(I)});return}}else if(y===3&&I.stateNode.current.memoizedState.isDehydrated){g.blockedOn=I.tag===3?I.stateNode.containerInfo:null;return}}}g.blockedOn=null}function $s(g){if(g.blockedOn!==null)return!1;for(var y=g.targetContainers;0<y.length;){var I=co(g.domEventName,g.eventSystemFlags,y[0],g.nativeEvent);if(I===null){I=g.nativeEvent;var j=new I.constructor(I.type,I);ge=j,I.target.dispatchEvent(j),ge=null}else return y=ko(I),y!==null&&ni(y),g.blockedOn=I,!1;y.shift()}return!0}function p0(g,y,I){$s(g)&&I.delete(y)}function D0(){On=!1,Qn!==null&&$s(Qn)&&(Qn=null),Ln!==null&&$s(Ln)&&(Ln=null),gr!==null&&$s(gr)&&(gr=null),Qr.forEach(p0),ls.forEach(p0)}function r0(g,y){g.blockedOn===y&&(g.blockedOn=null,On||(On=!0,R.unstable_scheduleCallback(R.unstable_NormalPriority,D0)))}function x0(g){function y(he){return r0(he,g)}if(0<nr.length){r0(nr[0],g);for(var I=1;I<nr.length;I++){var j=nr[I];j.blockedOn===g&&(j.blockedOn=null)}}for(Qn!==null&&r0(Qn,g),Ln!==null&&r0(Ln,g),gr!==null&&r0(gr,g),Qr.forEach(y),ls.forEach(y),I=0;I<Vr.length;I++)j=Vr[I],j.blockedOn===g&&(j.blockedOn=null);for(;0<Vr.length&&(I=Vr[0],I.blockedOn===null);)Os(I),I.blockedOn===null&&Vr.shift()}var A0=k.ReactCurrentBatchConfig,P0=!0;function ha(g,y,I,j){var he=ei,be=A0.transition;A0.transition=null;try{ei=1,_o(g,y,I,j)}finally{ei=he,A0.transition=be}}function da(g,y,I,j){var he=ei,be=A0.transition;A0.transition=null;try{ei=4,_o(g,y,I,j)}finally{ei=he,A0.transition=be}}function _o(g,y,I,j){if(P0){var he=co(g,y,I,j);if(he===null)no(g,y,j,M0,I),Js(g,j);else if(Zs(he,g,y,I,j))j.stopPropagation();else if(Js(g,j),y&4&&-1<qs.indexOf(g)){for(;he!==null;){var be=ko(he);if(be!==null&&Ut(be),be=co(g,y,I,j),be===null&&no(g,y,j,M0,I),be===he)break;he=be}he!==null&&j.stopPropagation()}else no(g,y,j,null,I)}}var M0=null;function co(g,y,I,j){if(M0=null,g=He(j),g=q0(g),g!==null)if(y=ir(g),y===null)g=null;else if(I=y.tag,I===13){if(g=Ys(y),g!==null)return g;g=null}else if(I===3){if(y.stateNode.current.memoizedState.isDehydrated)return y.tag===3?y.stateNode.containerInfo:null;g=null}else y!==g&&(g=null);return M0=g,null}function Fr(g){switch(g){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(di()){case Ii:return 1;case pn:return 4;case nn:case hi:return 16;case Tn:return 536870912;default:return 16}default:return 16}}var xo=null,ll=null,fa=null;function cl(){if(fa)return fa;var g,y=ll,I=y.length,j,he="value"in xo?xo.value:xo.textContent,be=he.length;for(g=0;g<I&&y[g]===he[g];g++);var ze=I-g;for(j=1;j<=ze&&y[I-j]===he[be-j];j++);return fa=he.slice(g,1<j?1-j:void 0)}function $r(g){var y=g.keyCode;return"charCode"in g?(g=g.charCode,g===0&&y===13&&(g=13)):g=y,g===10&&(g=13),32<=g||g===13?g:0}function pa(){return!0}function ul(){return!1}function s0(g){function y(I,j,he,be,ze){this._reactName=I,this._targetInst=he,this.type=j,this.nativeEvent=be,this.target=ze,this.currentTarget=null;for(var pt in g)g.hasOwnProperty(pt)&&(I=g[pt],this[pt]=I?I(be):be[pt]);return this.isDefaultPrevented=(be.defaultPrevented!=null?be.defaultPrevented:be.returnValue===!1)?pa:ul,this.isPropagationStopped=ul,this}return Oe(y.prototype,{preventDefault:function(){this.defaultPrevented=!0;var I=this.nativeEvent;I&&(I.preventDefault?I.preventDefault():typeof I.returnValue!="unknown"&&(I.returnValue=!1),this.isDefaultPrevented=pa)},stopPropagation:function(){var I=this.nativeEvent;I&&(I.stopPropagation?I.stopPropagation():typeof I.cancelBubble!="unknown"&&(I.cancelBubble=!0),this.isPropagationStopped=pa)},persist:function(){},isPersistent:pa}),y}var m0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},E1=s0(m0),Ml=Oe({},m0,{view:0,detail:0}),$c=s0(Ml),y1,w1,Kl,C1=Oe({},Ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(g){return g.relatedTarget===void 0?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==Kl&&(Kl&&g.type==="mousemove"?(y1=g.screenX-Kl.screenX,w1=g.screenY-Kl.screenY):w1=y1=0,Kl=g),y1)},movementY:function(g){return"movementY"in g?g.movementY:w1}}),ec=s0(C1),jc=Oe({},C1,{dataTransfer:0}),eu=s0(jc),tu=Oe({},Ml,{relatedTarget:0}),_1=s0(tu),iu=Oe({},m0,{animationName:0,elapsedTime:0,pseudoElement:0}),x1=s0(iu),tc=Oe({},m0,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),ic=s0(tc),nc=Oe({},m0,{data:0}),Xl=s0(nc),rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ac(g){var y=this.nativeEvent;return y.getModifierState?y.getModifierState(g):(g=oc[g])?!!y[g]:!1}function Ga(){return ac}var nu=Oe({},Ml,{key:function(g){if(g.key){var y=rc[g.key]||g.key;if(y!=="Unidentified")return y}return g.type==="keypress"?(g=$r(g),g===13?"Enter":String.fromCharCode(g)):g.type==="keydown"||g.type==="keyup"?sc[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(g){return g.type==="keypress"?$r(g):0},keyCode:function(g){return g.type==="keydown"||g.type==="keyup"?g.keyCode:0},which:function(g){return g.type==="keypress"?$r(g):g.type==="keydown"||g.type==="keyup"?g.keyCode:0}}),ru=s0(nu),su=Oe({},C1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lc=s0(su),ou=Oe({},Ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),au=s0(ou),lu=Oe({},m0,{propertyName:0,elapsedTime:0,pseudoElement:0}),cu=s0(lu),uu=Oe({},C1,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),M1=s0(uu),O0=[9,13,27,32],Qa=ie&&"CompositionEvent"in window,uo=null;ie&&"documentMode"in document&&(uo=document.documentMode);var Mo=ie&&"TextEvent"in window&&!uo,S1=ie&&(!Qa||uo&&8<uo&&11>=uo),Aa=" ",Va=!1;function Wo(g,y){switch(g){case"keyup":return O0.indexOf(y.keyCode)!==-1;case"keydown":return y.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ts(g){return g=g.detail,typeof g=="object"&&"data"in g?g.data:null}var ma=!1;function hu(g,y){switch(g){case"compositionend":return Ts(y);case"keypress":return y.which!==32?null:(Va=!0,Aa);case"textInput":return g=y.data,g===Aa&&Va?null:g;default:return null}}function du(g,y){if(ma)return g==="compositionend"||!Qa&&Wo(g,y)?(g=cl(),fa=ll=xo=null,ma=!1,g):null;switch(g){case"paste":return null;case"keypress":if(!(y.ctrlKey||y.altKey||y.metaKey)||y.ctrlKey&&y.altKey){if(y.char&&1<y.char.length)return y.char;if(y.which)return String.fromCharCode(y.which)}return null;case"compositionend":return S1&&y.locale!=="ko"?null:y.data;default:return null}}var Sl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cc(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y==="input"?!!Sl[g.type]:y==="textarea"}function uc(g,y,I,j){Wi(j),y=Zn(y,"onChange"),0<y.length&&(I=new E1("onChange","change",null,I,j),g.push({event:I,listeners:y}))}var bl=null,Tl=null;function fu(g){ys(g,0)}function Yl(g){var y=Pl(g);if(sn(y))return g}function pu(g,y){if(g==="change")return y}var hc=!1;if(ie){var ql;if(ie){var b1="oninput"in document;if(!b1){var dc=document.createElement("div");dc.setAttribute("oninput","return;"),b1=typeof dc.oninput=="function"}ql=b1}else ql=!1;hc=ql&&(!document.documentMode||9<document.documentMode)}function fc(){bl&&(bl.detachEvent("onpropertychange",pc),Tl=bl=null)}function pc(g){if(g.propertyName==="value"&&Yl(Tl)){var y=[];uc(y,Tl,g,He(g)),kn(fu,y)}}function Au(g,y,I){g==="focusin"?(fc(),bl=y,Tl=I,bl.attachEvent("onpropertychange",pc)):g==="focusout"&&fc()}function So(g){if(g==="selectionchange"||g==="keyup"||g==="keydown")return Yl(Tl)}function ur(g,y){if(g==="click")return Yl(y)}function mu(g,y){if(g==="input"||g==="change")return Yl(y)}function vi(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var Nn=typeof Object.is=="function"?Object.is:vi;function ga(g,y){if(Nn(g,y))return!0;if(typeof g!="object"||g===null||typeof y!="object"||y===null)return!1;var I=Object.keys(g),j=Object.keys(y);if(I.length!==j.length)return!1;for(j=0;j<I.length;j++){var he=I[j];if(!we.call(y,he)||!Nn(g[he],y[he]))return!1}return!0}function Jl(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function T1(g,y){var I=Jl(g);g=0;for(var j;I;){if(I.nodeType===3){if(j=g+I.textContent.length,g<=y&&j>=y)return{node:I,offset:y-g};g=j}e:{for(;I;){if(I.nextSibling){I=I.nextSibling;break e}I=I.parentNode}I=void 0}I=Jl(I)}}function va(g,y){return g&&y?g===y?!0:g&&g.nodeType===3?!1:y&&y.nodeType===3?va(g,y.parentNode):"contains"in g?g.contains(y):g.compareDocumentPosition?!!(g.compareDocumentPosition(y)&16):!1:!1}function za(){for(var g=window,y=In();y instanceof g.HTMLIFrameElement;){try{var I=typeof y.contentWindow.location.href=="string"}catch{I=!1}if(I)g=y.contentWindow;else break;y=In(g.document)}return y}function Zl(g){var y=g&&g.nodeName&&g.nodeName.toLowerCase();return y&&(y==="input"&&(g.type==="text"||g.type==="search"||g.type==="tel"||g.type==="url"||g.type==="password")||y==="textarea"||g.contentEditable==="true")}function Wa(g){var y=za(),I=g.focusedElem,j=g.selectionRange;if(y!==I&&I&&I.ownerDocument&&va(I.ownerDocument.documentElement,I)){if(j!==null&&Zl(I)){if(y=j.start,g=j.end,g===void 0&&(g=y),"selectionStart"in I)I.selectionStart=y,I.selectionEnd=Math.min(g,I.value.length);else if(g=(y=I.ownerDocument||document)&&y.defaultView||window,g.getSelection){g=g.getSelection();var he=I.textContent.length,be=Math.min(j.start,he);j=j.end===void 0?be:Math.min(j.end,he),!g.extend&&be>j&&(he=j,j=be,be=he),he=T1(I,be);var ze=T1(I,j);he&&ze&&(g.rangeCount!==1||g.anchorNode!==he.node||g.anchorOffset!==he.offset||g.focusNode!==ze.node||g.focusOffset!==ze.offset)&&(y=y.createRange(),y.setStart(he.node,he.offset),g.removeAllRanges(),be>j?(g.addRange(y),g.extend(ze.node,ze.offset)):(y.setEnd(ze.node,ze.offset),g.addRange(y)))}}for(y=[],g=I;g=g.parentNode;)g.nodeType===1&&y.push({element:g,left:g.scrollLeft,top:g.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<y.length;I++)g=y[I],g.element.scrollLeft=g.left,g.element.scrollTop=g.top}}var Gs=ie&&"documentMode"in document&&11>=document.documentMode,Ka=null,$l=null,Ea=null,R1=!1;function jr(g,y,I){var j=I.window===I?I.document:I.nodeType===9?I:I.ownerDocument;R1||Ka==null||Ka!==In(j)||(j=Ka,"selectionStart"in j&&Zl(j)?j={start:j.selectionStart,end:j.selectionEnd}:(j=(j.ownerDocument&&j.ownerDocument.defaultView||window).getSelection(),j={anchorNode:j.anchorNode,anchorOffset:j.anchorOffset,focusNode:j.focusNode,focusOffset:j.focusOffset}),Ea&&ga(Ea,j)||(Ea=j,j=Zn($l,"onSelect"),0<j.length&&(y=new E1("onSelect","select",null,y,I),g.push({event:y,listeners:j}),y.target=Ka)))}function ya(g,y){var I={};return I[g.toLowerCase()]=y.toLowerCase(),I["Webkit"+g]="webkit"+y,I["Moz"+g]="moz"+y,I}var wa={animationend:ya("Animation","AnimationEnd"),animationiteration:ya("Animation","AnimationIteration"),animationstart:ya("Animation","AnimationStart"),transitionend:ya("Transition","TransitionEnd")},K0={},Xa={};ie&&(Xa=document.createElement("div").style,"AnimationEvent"in window||(delete wa.animationend.animation,delete wa.animationiteration.animation,delete wa.animationstart.animation),"TransitionEvent"in window||delete wa.transitionend.transition);function Rl(g){if(K0[g])return K0[g];if(!wa[g])return g;var y=wa[g],I;for(I in y)if(y.hasOwnProperty(I)&&I in Xa)return K0[g]=y[I];return g}var Es=Rl("animationend"),Il=Rl("animationiteration"),I1=Rl("animationstart"),cs=Rl("transitionend"),zr=new Map,Ya="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function js(g,y){zr.set(g,y),e(y,[g])}for(var hl=0;hl<Ya.length;hl++){var fn=Ya[hl],ar=fn.toLowerCase(),kr=fn[0].toUpperCase()+fn.slice(1);js(ar,"on"+kr)}js(Es,"onAnimationEnd"),js(Il,"onAnimationIteration"),js(I1,"onAnimationStart"),js("dblclick","onDoubleClick"),js("focusin","onFocus"),js("focusout","onBlur"),js(cs,"onTransitionEnd"),me("onMouseEnter",["mouseout","mouseover"]),me("onMouseLeave",["mouseout","mouseover"]),me("onPointerEnter",["pointerout","pointerover"]),me("onPointerLeave",["pointerout","pointerover"]),e("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),e("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),e("onBeforeInput",["compositionend","keypress","textInput","paste"]),e("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),e("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),e("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nt=new Set("cancel close invalid load scroll toggle".split(" ").concat(xr));function Ko(g,y,I){var j=g.type||"unknown-event";g.currentTarget=I,Rs(j,y,void 0,g),g.currentTarget=null}function ys(g,y){y=(y&4)!==0;for(var I=0;I<g.length;I++){var j=g[I],he=j.event;j=j.listeners;e:{var be=void 0;if(y)for(var ze=j.length-1;0<=ze;ze--){var pt=j[ze],bt=pt.instance,Zt=pt.currentTarget;if(pt=pt.listener,bt!==be&&he.isPropagationStopped())break e;Ko(he,pt,Zt),be=bt}else for(ze=0;ze<j.length;ze++){if(pt=j[ze],bt=pt.instance,Zt=pt.currentTarget,pt=pt.listener,bt!==be&&he.isPropagationStopped())break e;Ko(he,pt,Zt),be=bt}}}if(Ps)throw g=Fo,Ps=!1,Fo=null,g}function jn(g,y){var I=y[gu];I===void 0&&(I=y[gu]=new Set);var j=g+"__bubble";I.has(j)||(o0(y,g,2,!1),I.add(j))}function _r(g,y,I){var j=0;y&&(j|=4),o0(I,g,j,y)}var ho="_reactListening"+Math.random().toString(36).slice(2);function g0(g){if(!g[ho]){g[ho]=!0,U.forEach(function(I){I!=="selectionchange"&&(nt.has(I)||_r(I,!1,g),_r(I,!0,g))});var y=g.nodeType===9?g:g.ownerDocument;y===null||y[ho]||(y[ho]=!0,_r("selectionchange",!1,y))}}function o0(g,y,I,j){switch(Fr(y)){case 1:var he=ha;break;case 4:he=da;break;default:he=_o}I=he.bind(null,y,I,g),he=void 0,!Dr||y!=="touchstart"&&y!=="touchmove"&&y!=="wheel"||(he=!0),j?he!==void 0?g.addEventListener(y,I,{capture:!0,passive:he}):g.addEventListener(y,I,!0):he!==void 0?g.addEventListener(y,I,{passive:he}):g.addEventListener(y,I,!1)}function no(g,y,I,j,he){var be=j;if(!(y&1)&&!(y&2)&&j!==null)e:for(;;){if(j===null)return;var ze=j.tag;if(ze===3||ze===4){var pt=j.stateNode.containerInfo;if(pt===he||pt.nodeType===8&&pt.parentNode===he)break;if(ze===4)for(ze=j.return;ze!==null;){var bt=ze.tag;if((bt===3||bt===4)&&(bt=ze.stateNode.containerInfo,bt===he||bt.nodeType===8&&bt.parentNode===he))return;ze=ze.return}for(;pt!==null;){if(ze=q0(pt),ze===null)return;if(bt=ze.tag,bt===5||bt===6){j=be=ze;continue e}pt=pt.parentNode}}j=j.return}kn(function(){var Zt=be,Bi=He(I),Fi=[];e:{var _i=zr.get(g);if(_i!==void 0){var cn=E1,mn=g;switch(g){case"keypress":if($r(I)===0)break e;case"keydown":case"keyup":cn=ru;break;case"focusin":mn="focus",cn=_1;break;case"focusout":mn="blur",cn=_1;break;case"beforeblur":case"afterblur":cn=_1;break;case"click":if(I.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":cn=ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":cn=eu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":cn=au;break;case Es:case Il:case I1:cn=x1;break;case cs:cn=cu;break;case"scroll":cn=$c;break;case"wheel":cn=M1;break;case"copy":case"cut":case"paste":cn=ic;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":cn=lc}var Sn=(y&4)!==0,Ws=!Sn&&g==="scroll",Wt=Sn?_i!==null?_i+"Capture":null:_i;Sn=[];for(var Bt=Zt,Xt;Bt!==null;){Xt=Bt;var Pi=Xt.stateNode;if(Xt.tag===5&&Pi!==null&&(Xt=Pi,Wt!==null&&(Pi=Jt(Bt,Wt),Pi!=null&&Sn.push(qn(Bt,Pi,Xt)))),Ws)break;Bt=Bt.return}0<Sn.length&&(_i=new cn(_i,mn,null,I,Bi),Fi.push({event:_i,listeners:Sn}))}}if(!(y&7)){e:{if(_i=g==="mouseover"||g==="pointerover",cn=g==="mouseout"||g==="pointerout",_i&&I!==ge&&(mn=I.relatedTarget||I.fromElement)&&(q0(mn)||mn[Kr]))break e;if((cn||_i)&&(_i=Bi.window===Bi?Bi:(_i=Bi.ownerDocument)?_i.defaultView||_i.parentWindow:window,cn?(mn=I.relatedTarget||I.toElement,cn=Zt,mn=mn?q0(mn):null,mn!==null&&(Ws=ir(mn),mn!==Ws||mn.tag!==5&&mn.tag!==6)&&(mn=null)):(cn=null,mn=Zt),cn!==mn)){if(Sn=ec,Pi="onMouseLeave",Wt="onMouseEnter",Bt="mouse",(g==="pointerout"||g==="pointerover")&&(Sn=lc,Pi="onPointerLeave",Wt="onPointerEnter",Bt="pointer"),Ws=cn==null?_i:Pl(cn),Xt=mn==null?_i:Pl(mn),_i=new Sn(Pi,Bt+"leave",cn,I,Bi),_i.target=Ws,_i.relatedTarget=Xt,Pi=null,q0(Bi)===Zt&&(Sn=new Sn(Wt,Bt+"enter",mn,I,Bi),Sn.target=Xt,Sn.relatedTarget=Ws,Pi=Sn),Ws=Pi,cn&&mn)t:{for(Sn=cn,Wt=mn,Bt=0,Xt=Sn;Xt;Xt=Qs(Xt))Bt++;for(Xt=0,Pi=Wt;Pi;Pi=Qs(Pi))Xt++;for(;0<Bt-Xt;)Sn=Qs(Sn),Bt--;for(;0<Xt-Bt;)Wt=Qs(Wt),Xt--;for(;Bt--;){if(Sn===Wt||Wt!==null&&Sn===Wt.alternate)break t;Sn=Qs(Sn),Wt=Qs(Wt)}Sn=null}else Sn=null;cn!==null&&fo(Fi,_i,cn,Sn,!1),mn!==null&&Ws!==null&&fo(Fi,Ws,mn,Sn,!0)}}e:{if(_i=Zt?Pl(Zt):window,cn=_i.nodeName&&_i.nodeName.toLowerCase(),cn==="select"||cn==="input"&&_i.type==="file")var Mn=pu;else if(cc(_i))if(hc)Mn=mu;else{Mn=So;var r=Au}else(cn=_i.nodeName)&&cn.toLowerCase()==="input"&&(_i.type==="checkbox"||_i.type==="radio")&&(Mn=ur);if(Mn&&(Mn=Mn(g,Zt))){uc(Fi,Mn,I,Bi);break e}r&&r(g,_i,Zt),g==="focusout"&&(r=_i._wrapperState)&&r.controlled&&_i.type==="number"&&Ir(_i,"number",_i.value)}switch(r=Zt?Pl(Zt):window,g){case"focusin":(cc(r)||r.contentEditable==="true")&&(Ka=r,$l=Zt,Ea=null);break;case"focusout":Ea=$l=Ka=null;break;case"mousedown":R1=!0;break;case"contextmenu":case"mouseup":case"dragend":R1=!1,jr(Fi,I,Bi);break;case"selectionchange":if(Gs)break;case"keydown":case"keyup":jr(Fi,I,Bi)}var a;if(Qa)e:{switch(g){case"compositionstart":var c="onCompositionStart";break e;case"compositionend":c="onCompositionEnd";break e;case"compositionupdate":c="onCompositionUpdate";break e}c=void 0}else ma?Wo(g,I)&&(c="onCompositionEnd"):g==="keydown"&&I.keyCode===229&&(c="onCompositionStart");c&&(S1&&I.locale!=="ko"&&(ma||c!=="onCompositionStart"?c==="onCompositionEnd"&&ma&&(a=cl()):(xo=Bi,ll="value"in xo?xo.value:xo.textContent,ma=!0)),r=Zn(Zt,c),0<r.length&&(c=new Xl(c,g,null,I,Bi),Fi.push({event:c,listeners:r}),a?c.data=a:(a=Ts(I),a!==null&&(c.data=a)))),(a=Mo?hu(g,I):du(g,I))&&(Zt=Zn(Zt,"onBeforeInput"),0<Zt.length&&(Bi=new Xl("onBeforeInput","beforeinput",null,I,Bi),Fi.push({event:Bi,listeners:Zt}),Bi.data=a))}ys(Fi,y)})}function qn(g,y,I){return{instance:g,listener:y,currentTarget:I}}function Zn(g,y){for(var I=y+"Capture",j=[];g!==null;){var he=g,be=he.stateNode;he.tag===5&&be!==null&&(he=be,be=Jt(g,I),be!=null&&j.unshift(qn(g,be,he)),be=Jt(g,y),be!=null&&j.push(qn(g,be,he))),g=g.return}return j}function Qs(g){if(g===null)return null;do g=g.return;while(g&&g.tag!==5);return g||null}function fo(g,y,I,j,he){for(var be=y._reactName,ze=[];I!==null&&I!==j;){var pt=I,bt=pt.alternate,Zt=pt.stateNode;if(bt!==null&&bt===j)break;pt.tag===5&&Zt!==null&&(pt=Zt,he?(bt=Jt(I,be),bt!=null&&ze.unshift(qn(I,bt,pt))):he||(bt=Jt(I,be),bt!=null&&ze.push(qn(I,bt,pt)))),I=I.return}ze.length!==0&&g.push({event:y,listeners:ze})}var Wr=/\r\n?/g,vr=/\u0000|\uFFFD/g;function Zi(g){return(typeof g=="string"?g:""+g).replace(Wr,`
`).replace(vr,"")}function fr(g,y,I){if(y=Zi(y),Zi(g)!==y&&I)throw Error(O(425))}function bo(){}var X0=null,Y0=null;function qa(g,y){return g==="textarea"||g==="noscript"||typeof y.children=="string"||typeof y.children=="number"||typeof y.dangerouslySetInnerHTML=="object"&&y.dangerouslySetInnerHTML!==null&&y.dangerouslySetInnerHTML.__html!=null}var Vs=typeof setTimeout=="function"?setTimeout:void 0,F0=typeof clearTimeout=="function"?clearTimeout:void 0,Ca=typeof Promise=="function"?Promise:void 0,Bl=typeof queueMicrotask=="function"?queueMicrotask:typeof Ca<"u"?function(g){return Ca.resolve(null).then(g).catch(_a)}:Vs;function _a(g){setTimeout(function(){throw g})}function Ll(g,y){var I=y,j=0;do{var he=I.nextSibling;if(g.removeChild(I),he&&he.nodeType===8)if(I=he.data,I==="/$"){if(j===0){g.removeChild(he),x0(y);return}j--}else I!=="$"&&I!=="$?"&&I!=="$!"||j++;I=he}while(I);x0(y)}function S0(g){for(;g!=null;g=g.nextSibling){var y=g.nodeType;if(y===1||y===3)break;if(y===8){if(y=g.data,y==="$"||y==="$!"||y==="$?")break;if(y==="/$")return null}}return g}function Dl(g){g=g.previousSibling;for(var y=0;g;){if(g.nodeType===8){var I=g.data;if(I==="$"||I==="$!"||I==="$?"){if(y===0)return g;y--}else I==="/$"&&y++}g=g.previousSibling}return null}var Is=Math.random().toString(36).slice(2),on="__reactFiber$"+Is,Fs="__reactProps$"+Is,Kr="__reactContainer$"+Is,gu="__reactEvents$"+Is,Td="__reactListeners$"+Is,dl="__reactHandles$"+Is;function q0(g){var y=g[on];if(y)return y;for(var I=g.parentNode;I;){if(y=I[Kr]||I[on]){if(I=y.alternate,y.child!==null||I!==null&&I.child!==null)for(g=Dl(g);g!==null;){if(I=g[on])return I;g=Dl(g)}return y}g=I,I=g.parentNode}return null}function ko(g){return g=g[on]||g[Kr],!g||g.tag!==5&&g.tag!==6&&g.tag!==13&&g.tag!==3?null:g}function Pl(g){if(g.tag===5||g.tag===6)return g.stateNode;throw Error(O(33))}function jl(g){return g[Fs]||null}var a0=[],xa=-1;function b0(g){return{current:g}}function ws(g){0>xa||(g.current=a0[xa],a0[xa]=null,xa--)}function Yr(g,y){xa++,a0[xa]=g.current,g.current=y}var No={},eo=b0(No),To=b0(!1),Ja=No;function Za(g,y){var I=g.type.contextTypes;if(!I)return No;var j=g.stateNode;if(j&&j.__reactInternalMemoizedUnmaskedChildContext===y)return j.__reactInternalMemoizedMaskedChildContext;var he={},be;for(be in I)he[be]=y[be];return j&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=y,g.__reactInternalMemoizedMaskedChildContext=he),he}function l0(g){return g=g.childContextTypes,g!=null}function Ol(){ws(To),ws(eo)}function Ac(g,y,I){if(eo.current!==No)throw Error(O(168));Yr(eo,y),Yr(To,I)}function vu(g,y,I){var j=g.stateNode;if(y=y.childContextTypes,typeof j.getChildContext!="function")return I;j=j.getChildContext();for(var he in j)if(!(he in y))throw Error(O(108,Yt(g)||"Unknown",he));return Oe({},I,j)}function B1(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||No,Ja=eo.current,Yr(eo,g),Yr(To,To.current),!0}function ps(g,y,I){var j=g.stateNode;if(!j)throw Error(O(169));I?(g=vu(g,y,Ja),j.__reactInternalMemoizedMergedChildContext=g,ws(To),ws(eo),Yr(eo,g)):ws(To),Yr(To,I)}var J0=null,Nr=!1,Ro=!1;function Ma(g){J0===null?J0=[g]:J0.push(g)}function Eu(g){Nr=!0,Ma(g)}function Xo(){if(!Ro&&J0!==null){Ro=!0;var g=0,y=ei;try{var I=J0;for(ei=1;g<I.length;g++){var j=I[g];do j=j(!0);while(j!==null)}J0=null,Nr=!1}catch(he){throw J0!==null&&(J0=J0.slice(g+1)),$e(Ii,Xo),he}finally{ei=y,Ro=!1}}return null}var k0=[],Z0=0,L1=null,e1=0,Io=[],v0=0,po=null,Sa=1,ro="";function $0(g,y){k0[Z0++]=e1,k0[Z0++]=L1,L1=g,e1=y}function mc(g,y,I){Io[v0++]=Sa,Io[v0++]=ro,Io[v0++]=po,po=g;var j=Sa;g=ro;var he=32-Kn(j)-1;j&=~(1<<he),I+=1;var be=32-Kn(y)+he;if(30<be){var ze=he-he%5;be=(j&(1<<ze)-1).toString(32),j>>=ze,he-=ze,Sa=1<<32-Kn(y)+he|I<<he|j,ro=be+g}else Sa=1<<be|I<<he|j,ro=g}function un(g){g.return!==null&&($0(g,1),mc(g,1,0))}function Ao(g){for(;g===L1;)L1=k0[--Z0],k0[Z0]=null,e1=k0[--Z0],k0[Z0]=null;for(;g===po;)po=Io[--v0],Io[v0]=null,ro=Io[--v0],Io[v0]=null,Sa=Io[--v0],Io[v0]=null}var mo=null,us=null,es=!1,go=null;function gh(g,y){var I=t0(5,null,null,0);I.elementType="DELETED",I.stateNode=y,I.return=g,y=g.deletions,y===null?(g.deletions=[I],g.flags|=16):y.push(I)}function Yo(g,y){switch(g.tag){case 5:var I=g.type;return y=y.nodeType!==1||I.toLowerCase()!==y.nodeName.toLowerCase()?null:y,y!==null?(g.stateNode=y,mo=g,us=S0(y.firstChild),!0):!1;case 6:return y=g.pendingProps===""||y.nodeType!==3?null:y,y!==null?(g.stateNode=y,mo=g,us=null,!0):!1;case 13:return y=y.nodeType!==8?null:y,y!==null?(I=po!==null?{id:Sa,overflow:ro}:null,g.memoizedState={dehydrated:y,treeContext:I,retryLane:1073741824},I=t0(18,null,null,0),I.stateNode=y,I.return=g,g.child=I,mo=g,us=null,!0):!1;default:return!1}}function fl(g){return(g.mode&1)!==0&&(g.flags&128)===0}function yu(g){if(es){var y=us;if(y){var I=y;if(!Yo(g,y)){if(fl(g))throw Error(O(418));y=S0(I.nextSibling);var j=mo;y&&Yo(g,y)?gh(j,I):(g.flags=g.flags&-4097|2,es=!1,mo=g)}}else{if(fl(g))throw Error(O(418));g.flags=g.flags&-4097|2,es=!1,mo=g}}}function to(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;mo=g}function $a(g){if(g!==mo)return!1;if(!es)return to(g),es=!0,!1;var y;if((y=g.tag!==3)&&!(y=g.tag!==5)&&(y=g.type,y=y!=="head"&&y!=="body"&&!qa(g.type,g.memoizedProps)),y&&(y=us)){if(fl(g))throw Zr(),Error(O(418));for(;y;)gh(g,y),y=S0(y.nextSibling)}if(to(g),g.tag===13){if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(O(317));e:{for(g=g.nextSibling,y=0;g;){if(g.nodeType===8){var I=g.data;if(I==="/$"){if(y===0){us=S0(g.nextSibling);break e}y--}else I!=="$"&&I!=="$!"&&I!=="$?"||y++}g=g.nextSibling}us=null}}else us=mo?S0(g.stateNode.nextSibling):null;return!0}function Zr(){for(var g=us;g;)g=S0(g.nextSibling)}function t1(){us=mo=null,es=!1}function D1(g){go===null?go=[g]:go.push(g)}var gc=k.ReactCurrentBatchConfig;function i1(g,y,I){if(g=I.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(I._owner){if(I=I._owner,I){if(I.tag!==1)throw Error(O(309));var j=I.stateNode}if(!j)throw Error(O(147,g));var he=j,be=""+g;return y!==null&&y.ref!==null&&typeof y.ref=="function"&&y.ref._stringRef===be?y.ref:(y=function(ze){var pt=he.refs;ze===null?delete pt[be]:pt[be]=ze},y._stringRef=be,y)}if(typeof g!="string")throw Error(O(284));if(!I._owner)throw Error(O(290,g))}return g}function n1(g,y){throw g=Object.prototype.toString.call(y),Error(O(31,g==="[object Object]"?"object with keys {"+Object.keys(y).join(", ")+"}":g))}function wu(g){var y=g._init;return y(g._payload)}function ja(g){function y(Wt,Bt){if(g){var Xt=Wt.deletions;Xt===null?(Wt.deletions=[Bt],Wt.flags|=16):Xt.push(Bt)}}function I(Wt,Bt){if(!g)return null;for(;Bt!==null;)y(Wt,Bt),Bt=Bt.sibling;return null}function j(Wt,Bt){for(Wt=new Map;Bt!==null;)Bt.key!==null?Wt.set(Bt.key,Bt):Wt.set(Bt.index,Bt),Bt=Bt.sibling;return Wt}function he(Wt,Bt){return Wt=oa(Wt,Bt),Wt.index=0,Wt.sibling=null,Wt}function be(Wt,Bt,Xt){return Wt.index=Xt,g?(Xt=Wt.alternate,Xt!==null?(Xt=Xt.index,Xt<Bt?(Wt.flags|=2,Bt):Xt):(Wt.flags|=2,Bt)):(Wt.flags|=1048576,Bt)}function ze(Wt){return g&&Wt.alternate===null&&(Wt.flags|=2),Wt}function pt(Wt,Bt,Xt,Pi){return Bt===null||Bt.tag!==6?(Bt=Ju(Xt,Wt.mode,Pi),Bt.return=Wt,Bt):(Bt=he(Bt,Xt),Bt.return=Wt,Bt)}function bt(Wt,Bt,Xt,Pi){var Mn=Xt.type;return Mn===ne?Bi(Wt,Bt,Xt.props.children,Pi,Xt.key):Bt!==null&&(Bt.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===De&&wu(Mn)===Bt.type)?(Pi=he(Bt,Xt.props),Pi.ref=i1(Wt,Bt,Xt),Pi.return=Wt,Pi):(Pi=kc(Xt.type,Xt.key,Xt.props,null,Wt.mode,Pi),Pi.ref=i1(Wt,Bt,Xt),Pi.return=Wt,Pi)}function Zt(Wt,Bt,Xt,Pi){return Bt===null||Bt.tag!==4||Bt.stateNode.containerInfo!==Xt.containerInfo||Bt.stateNode.implementation!==Xt.implementation?(Bt=Zu(Xt,Wt.mode,Pi),Bt.return=Wt,Bt):(Bt=he(Bt,Xt.children||[]),Bt.return=Wt,Bt)}function Bi(Wt,Bt,Xt,Pi,Mn){return Bt===null||Bt.tag!==7?(Bt=Vl(Xt,Wt.mode,Pi,Mn),Bt.return=Wt,Bt):(Bt=he(Bt,Xt),Bt.return=Wt,Bt)}function Fi(Wt,Bt,Xt){if(typeof Bt=="string"&&Bt!==""||typeof Bt=="number")return Bt=Ju(""+Bt,Wt.mode,Xt),Bt.return=Wt,Bt;if(typeof Bt=="object"&&Bt!==null){switch(Bt.$$typeof){case G:return Xt=kc(Bt.type,Bt.key,Bt.props,null,Wt.mode,Xt),Xt.ref=i1(Wt,null,Bt),Xt.return=Wt,Xt;case Z:return Bt=Zu(Bt,Wt.mode,Xt),Bt.return=Wt,Bt;case De:var Pi=Bt._init;return Fi(Wt,Pi(Bt._payload),Xt)}if(je(Bt)||fe(Bt))return Bt=Vl(Bt,Wt.mode,Xt,null),Bt.return=Wt,Bt;n1(Wt,Bt)}return null}function _i(Wt,Bt,Xt,Pi){var Mn=Bt!==null?Bt.key:null;if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return Mn!==null?null:pt(Wt,Bt,""+Xt,Pi);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case G:return Xt.key===Mn?bt(Wt,Bt,Xt,Pi):null;case Z:return Xt.key===Mn?Zt(Wt,Bt,Xt,Pi):null;case De:return Mn=Xt._init,_i(Wt,Bt,Mn(Xt._payload),Pi)}if(je(Xt)||fe(Xt))return Mn!==null?null:Bi(Wt,Bt,Xt,Pi,null);n1(Wt,Xt)}return null}function cn(Wt,Bt,Xt,Pi,Mn){if(typeof Pi=="string"&&Pi!==""||typeof Pi=="number")return Wt=Wt.get(Xt)||null,pt(Bt,Wt,""+Pi,Mn);if(typeof Pi=="object"&&Pi!==null){switch(Pi.$$typeof){case G:return Wt=Wt.get(Pi.key===null?Xt:Pi.key)||null,bt(Bt,Wt,Pi,Mn);case Z:return Wt=Wt.get(Pi.key===null?Xt:Pi.key)||null,Zt(Bt,Wt,Pi,Mn);case De:var r=Pi._init;return cn(Wt,Bt,Xt,r(Pi._payload),Mn)}if(je(Pi)||fe(Pi))return Wt=Wt.get(Xt)||null,Bi(Bt,Wt,Pi,Mn,null);n1(Bt,Pi)}return null}function mn(Wt,Bt,Xt,Pi){for(var Mn=null,r=null,a=Bt,c=Bt=0,s=null;a!==null&&c<Xt.length;c++){a.index>c?(s=a,a=null):s=a.sibling;var n=_i(Wt,a,Xt[c],Pi);if(n===null){a===null&&(a=s);break}g&&a&&n.alternate===null&&y(Wt,a),Bt=be(n,Bt,c),r===null?Mn=n:r.sibling=n,r=n,a=s}if(c===Xt.length)return I(Wt,a),es&&$0(Wt,c),Mn;if(a===null){for(;c<Xt.length;c++)a=Fi(Wt,Xt[c],Pi),a!==null&&(Bt=be(a,Bt,c),r===null?Mn=a:r.sibling=a,r=a);return es&&$0(Wt,c),Mn}for(a=j(Wt,a);c<Xt.length;c++)s=cn(a,Wt,c,Xt[c],Pi),s!==null&&(g&&s.alternate!==null&&a.delete(s.key===null?c:s.key),Bt=be(s,Bt,c),r===null?Mn=s:r.sibling=s,r=s);return g&&a.forEach(function(t){return y(Wt,t)}),es&&$0(Wt,c),Mn}function Sn(Wt,Bt,Xt,Pi){var Mn=fe(Xt);if(typeof Mn!="function")throw Error(O(150));if(Xt=Mn.call(Xt),Xt==null)throw Error(O(151));for(var r=Mn=null,a=Bt,c=Bt=0,s=null,n=Xt.next();a!==null&&!n.done;c++,n=Xt.next()){a.index>c?(s=a,a=null):s=a.sibling;var t=_i(Wt,a,n.value,Pi);if(t===null){a===null&&(a=s);break}g&&a&&t.alternate===null&&y(Wt,a),Bt=be(t,Bt,c),r===null?Mn=t:r.sibling=t,r=t,a=s}if(n.done)return I(Wt,a),es&&$0(Wt,c),Mn;if(a===null){for(;!n.done;c++,n=Xt.next())n=Fi(Wt,n.value,Pi),n!==null&&(Bt=be(n,Bt,c),r===null?Mn=n:r.sibling=n,r=n);return es&&$0(Wt,c),Mn}for(a=j(Wt,a);!n.done;c++,n=Xt.next())n=cn(a,Wt,c,n.value,Pi),n!==null&&(g&&n.alternate!==null&&a.delete(n.key===null?c:n.key),Bt=be(n,Bt,c),r===null?Mn=n:r.sibling=n,r=n);return g&&a.forEach(function(u){return y(Wt,u)}),es&&$0(Wt,c),Mn}function Ws(Wt,Bt,Xt,Pi){if(typeof Xt=="object"&&Xt!==null&&Xt.type===ne&&Xt.key===null&&(Xt=Xt.props.children),typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case G:e:{for(var Mn=Xt.key,r=Bt;r!==null;){if(r.key===Mn){if(Mn=Xt.type,Mn===ne){if(r.tag===7){I(Wt,r.sibling),Bt=he(r,Xt.props.children),Bt.return=Wt,Wt=Bt;break e}}else if(r.elementType===Mn||typeof Mn=="object"&&Mn!==null&&Mn.$$typeof===De&&wu(Mn)===r.type){I(Wt,r.sibling),Bt=he(r,Xt.props),Bt.ref=i1(Wt,r,Xt),Bt.return=Wt,Wt=Bt;break e}I(Wt,r);break}else y(Wt,r);r=r.sibling}Xt.type===ne?(Bt=Vl(Xt.props.children,Wt.mode,Pi,Xt.key),Bt.return=Wt,Wt=Bt):(Pi=kc(Xt.type,Xt.key,Xt.props,null,Wt.mode,Pi),Pi.ref=i1(Wt,Bt,Xt),Pi.return=Wt,Wt=Pi)}return ze(Wt);case Z:e:{for(r=Xt.key;Bt!==null;){if(Bt.key===r)if(Bt.tag===4&&Bt.stateNode.containerInfo===Xt.containerInfo&&Bt.stateNode.implementation===Xt.implementation){I(Wt,Bt.sibling),Bt=he(Bt,Xt.children||[]),Bt.return=Wt,Wt=Bt;break e}else{I(Wt,Bt);break}else y(Wt,Bt);Bt=Bt.sibling}Bt=Zu(Xt,Wt.mode,Pi),Bt.return=Wt,Wt=Bt}return ze(Wt);case De:return r=Xt._init,Ws(Wt,Bt,r(Xt._payload),Pi)}if(je(Xt))return mn(Wt,Bt,Xt,Pi);if(fe(Xt))return Sn(Wt,Bt,Xt,Pi);n1(Wt,Xt)}return typeof Xt=="string"&&Xt!==""||typeof Xt=="number"?(Xt=""+Xt,Bt!==null&&Bt.tag===6?(I(Wt,Bt.sibling),Bt=he(Bt,Xt),Bt.return=Wt,Wt=Bt):(I(Wt,Bt),Bt=Ju(Xt,Wt.mode,Pi),Bt.return=Wt,Wt=Bt),ze(Wt)):I(Wt,Bt)}return Ws}var ks=ja(!0),Ai=ja(!1),Xi=b0(null),qo=null,ba=null,pl=null;function Jo(){pl=ba=qo=null}function Ta(g){var y=Xi.current;ws(Xi),g._currentValue=y}function so(g,y,I){for(;g!==null;){var j=g.alternate;if((g.childLanes&y)!==y?(g.childLanes|=y,j!==null&&(j.childLanes|=y)):j!==null&&(j.childLanes&y)!==y&&(j.childLanes|=y),g===I)break;g=g.return}}function rr(g,y){qo=g,pl=ba=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&y&&(C0=!0),g.firstContext=null)}function T0(g){var y=g._currentValue;if(pl!==g)if(g={context:g,memoizedValue:y,next:null},ba===null){if(qo===null)throw Error(O(308));ba=g,qo.dependencies={lanes:0,firstContext:g}}else ba=ba.next=g;return y}var E0=null;function r1(g){E0===null?E0=[g]:E0.push(g)}function vc(g,y,I,j){var he=y.interleaved;return he===null?(I.next=I,r1(y)):(I.next=he.next,he.next=I),y.interleaved=I,y0(g,j)}function y0(g,y){g.lanes|=y;var I=g.alternate;for(I!==null&&(I.lanes|=y),I=g,g=g.return;g!==null;)g.childLanes|=y,I=g.alternate,I!==null&&(I.childLanes|=y),I=g,g=g.return;return I.tag===3?I.stateNode:null}var Ot=!1;function Ra(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ec(g,y){g=g.updateQueue,y.updateQueue===g&&(y.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function N0(g,y){return{eventTime:g,lane:y,tag:0,payload:null,callback:null,next:null}}function j0(g,y,I){var j=g.updateQueue;if(j===null)return null;if(j=j.shared,qr&2){var he=j.pending;return he===null?y.next=y:(y.next=he.next,he.next=y),j.pending=y,y0(g,I)}return he=j.interleaved,he===null?(y.next=y,r1(j)):(y.next=he.next,he.next=y),j.interleaved=y,y0(g,I)}function Bo(g,y,I){if(y=y.updateQueue,y!==null&&(y=y.shared,(I&4194240)!==0)){var j=y.lanes;j&=g.pendingLanes,I|=j,y.lanes=I,Dt(g,I)}}function P1(g,y){var I=g.updateQueue,j=g.alternate;if(j!==null&&(j=j.updateQueue,I===j)){var he=null,be=null;if(I=I.firstBaseUpdate,I!==null){do{var ze={eventTime:I.eventTime,lane:I.lane,tag:I.tag,payload:I.payload,callback:I.callback,next:null};be===null?he=be=ze:be=be.next=ze,I=I.next}while(I!==null);be===null?he=be=y:be=be.next=y}else he=be=y;I={baseState:j.baseState,firstBaseUpdate:he,lastBaseUpdate:be,shared:j.shared,effects:j.effects},g.updateQueue=I;return}g=I.lastBaseUpdate,g===null?I.firstBaseUpdate=y:g.next=y,I.lastBaseUpdate=y}function el(g,y,I,j){var he=g.updateQueue;Ot=!1;var be=he.firstBaseUpdate,ze=he.lastBaseUpdate,pt=he.shared.pending;if(pt!==null){he.shared.pending=null;var bt=pt,Zt=bt.next;bt.next=null,ze===null?be=Zt:ze.next=Zt,ze=bt;var Bi=g.alternate;Bi!==null&&(Bi=Bi.updateQueue,pt=Bi.lastBaseUpdate,pt!==ze&&(pt===null?Bi.firstBaseUpdate=Zt:pt.next=Zt,Bi.lastBaseUpdate=bt))}if(be!==null){var Fi=he.baseState;ze=0,Bi=Zt=bt=null,pt=be;do{var _i=pt.lane,cn=pt.eventTime;if((j&_i)===_i){Bi!==null&&(Bi=Bi.next={eventTime:cn,lane:0,tag:pt.tag,payload:pt.payload,callback:pt.callback,next:null});e:{var mn=g,Sn=pt;switch(_i=y,cn=I,Sn.tag){case 1:if(mn=Sn.payload,typeof mn=="function"){Fi=mn.call(cn,Fi,_i);break e}Fi=mn;break e;case 3:mn.flags=mn.flags&-65537|128;case 0:if(mn=Sn.payload,_i=typeof mn=="function"?mn.call(cn,Fi,_i):mn,_i==null)break e;Fi=Oe({},Fi,_i);break e;case 2:Ot=!0}}pt.callback!==null&&pt.lane!==0&&(g.flags|=64,_i=he.effects,_i===null?he.effects=[pt]:_i.push(pt))}else cn={eventTime:cn,lane:_i,tag:pt.tag,payload:pt.payload,callback:pt.callback,next:null},Bi===null?(Zt=Bi=cn,bt=Fi):Bi=Bi.next=cn,ze|=_i;if(pt=pt.next,pt===null){if(pt=he.shared.pending,pt===null)break;_i=pt,pt=_i.next,_i.next=null,he.lastBaseUpdate=_i,he.shared.pending=null}}while(!0);if(Bi===null&&(bt=Fi),he.baseState=bt,he.firstBaseUpdate=Zt,he.lastBaseUpdate=Bi,y=he.shared.interleaved,y!==null){he=y;do ze|=he.lane,he=he.next;while(he!==y)}else be===null&&(he.shared.lanes=0);p1|=ze,g.lanes=ze,g.memoizedState=Fi}}function yc(g,y,I){if(g=y.effects,y.effects=null,g!==null)for(y=0;y<g.length;y++){var j=g[y],he=j.callback;if(he!==null){if(j.callback=null,j=I,typeof he!="function")throw Error(O(191,he));he.call(j)}}}var s1={},vn=b0(s1),Ia=b0(s1),Bs=b0(s1);function Fl(g){if(g===s1)throw Error(O(174));return g}function tl(g,y){switch(Yr(Bs,y),Yr(Ia,g),Yr(vn,s1),g=y.nodeType,g){case 9:case 11:y=(y=y.documentElement)?y.namespaceURI:Us(null,"");break;default:g=g===8?y.parentNode:y,y=g.namespaceURI||null,g=g.tagName,y=Us(y,g)}ws(vn),Yr(vn,y)}function U0(){ws(vn),ws(Ia),ws(Bs)}function kl(g){Fl(Bs.current);var y=Fl(vn.current),I=Us(y,g.type);y!==I&&(Yr(Ia,g),Yr(vn,I))}function Uo(g){Ia.current===g&&(ws(vn),ws(Ia))}var Ns=b0(0);function O1(g){for(var y=g;y!==null;){if(y.tag===13){var I=y.memoizedState;if(I!==null&&(I=I.dehydrated,I===null||I.data==="$?"||I.data==="$!"))return y}else if(y.tag===19&&y.memoizedProps.revealOrder!==void 0){if(y.flags&128)return y}else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return null;y=y.return}y.sibling.return=y.return,y=y.sibling}return null}var wc=[];function Cc(){for(var g=0;g<wc.length;g++)wc[g]._workInProgressVersionPrimary=null;wc.length=0}var Al=k.ReactCurrentDispatcher,w0=k.ReactCurrentBatchConfig,Ba=0,is=null,Er=null,oo=null,Ls=!1,c0=!1,La=0,_c=0;function ao(){throw Error(O(321))}function F1(g,y){if(y===null)return!1;for(var I=0;I<y.length&&I<g.length;I++)if(!Nn(g[I],y[I]))return!1;return!0}function o1(g,y,I,j,he,be){if(Ba=be,is=y,y.memoizedState=null,y.updateQueue=null,y.lanes=0,Al.current=g===null||g.memoizedState===null?Ld:Dd,g=I(j,he),c0){be=0;do{if(c0=!1,La=0,25<=be)throw Error(O(301));be+=1,oo=Er=null,y.updateQueue=null,Al.current=Pd,g=I(j,he)}while(c0)}if(Al.current=Sc,y=Er!==null&&Er.next!==null,Ba=0,oo=Er=is=null,Ls=!1,y)throw Error(O(300));return g}function xc(){var g=La!==0;return La=0,g}function ea(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oo===null?is.memoizedState=oo=g:oo=oo.next=g,oo}function vo(){if(Er===null){var g=is.alternate;g=g!==null?g.memoizedState:null}else g=Er.next;var y=oo===null?is.memoizedState:oo.next;if(y!==null)oo=y,Er=g;else{if(g===null)throw Error(O(310));Er=g,g={memoizedState:Er.memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},oo===null?is.memoizedState=oo=g:oo=oo.next=g}return oo}function ta(g,y){return typeof y=="function"?y(g):y}function R0(g){var y=vo(),I=y.queue;if(I===null)throw Error(O(311));I.lastRenderedReducer=g;var j=Er,he=j.baseQueue,be=I.pending;if(be!==null){if(he!==null){var ze=he.next;he.next=be.next,be.next=ze}j.baseQueue=he=be,I.pending=null}if(he!==null){be=he.next,j=j.baseState;var pt=ze=null,bt=null,Zt=be;do{var Bi=Zt.lane;if((Ba&Bi)===Bi)bt!==null&&(bt=bt.next={lane:0,action:Zt.action,hasEagerState:Zt.hasEagerState,eagerState:Zt.eagerState,next:null}),j=Zt.hasEagerState?Zt.eagerState:g(j,Zt.action);else{var Fi={lane:Bi,action:Zt.action,hasEagerState:Zt.hasEagerState,eagerState:Zt.eagerState,next:null};bt===null?(pt=bt=Fi,ze=j):bt=bt.next=Fi,is.lanes|=Bi,p1|=Bi}Zt=Zt.next}while(Zt!==null&&Zt!==be);bt===null?ze=j:bt.next=pt,Nn(j,y.memoizedState)||(C0=!0),y.memoizedState=j,y.baseState=ze,y.baseQueue=bt,I.lastRenderedState=j}if(g=I.interleaved,g!==null){he=g;do be=he.lane,is.lanes|=be,p1|=be,he=he.next;while(he!==g)}else he===null&&(I.lanes=0);return[y.memoizedState,I.dispatch]}function il(g){var y=vo(),I=y.queue;if(I===null)throw Error(O(311));I.lastRenderedReducer=g;var j=I.dispatch,he=I.pending,be=y.memoizedState;if(he!==null){I.pending=null;var ze=he=he.next;do be=g(be,ze.action),ze=ze.next;while(ze!==he);Nn(be,y.memoizedState)||(C0=!0),y.memoizedState=be,y.baseQueue===null&&(y.baseState=be),I.lastRenderedState=be}return[be,j]}function a1(){}function vh(g,y){var I=is,j=vo(),he=y(),be=!Nn(j.memoizedState,he);if(be&&(j.memoizedState=he,C0=!0),j=j.queue,Cu(yh.bind(null,I,j,g),[g]),j.getSnapshot!==y||be||oo!==null&&oo.memoizedState.tag&1){if(I.flags|=2048,l1(9,Eh.bind(null,I,j,he,y),void 0,null),Lo===null)throw Error(O(349));Ba&30||Da(I,y,he)}return he}function Da(g,y,I){g.flags|=16384,g={getSnapshot:y,value:I},y=is.updateQueue,y===null?(y={lastEffect:null,stores:null},is.updateQueue=y,y.stores=[g]):(I=y.stores,I===null?y.stores=[g]:I.push(g))}function Eh(g,y,I,j){y.value=I,y.getSnapshot=j,wh(y)&&Ch(g)}function yh(g,y,I){return I(function(){wh(y)&&Ch(g)})}function wh(g){var y=g.getSnapshot;g=g.value;try{var I=y();return!Nn(g,I)}catch{return!0}}function Ch(g){var y=y0(g,1);y!==null&&sa(y,g,1,-1)}function _h(g){var y=ea();return typeof g=="function"&&(g=g()),y.memoizedState=y.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ta,lastRenderedState:g},y.queue=g,g=g.dispatch=Bd.bind(null,is,g),[y.memoizedState,g]}function l1(g,y,I,j){return g={tag:g,create:y,destroy:I,deps:j,next:null},y=is.updateQueue,y===null?(y={lastEffect:null,stores:null},is.updateQueue=y,y.lastEffect=g.next=g):(I=y.lastEffect,I===null?y.lastEffect=g.next=g:(j=I.next,I.next=g,g.next=j,y.lastEffect=g)),g}function xh(){return vo().memoizedState}function ml(g,y,I,j){var he=ea();is.flags|=g,he.memoizedState=l1(1|y,I,void 0,j===void 0?null:j)}function Mc(g,y,I,j){var he=vo();j=j===void 0?null:j;var be=void 0;if(Er!==null){var ze=Er.memoizedState;if(be=ze.destroy,j!==null&&F1(j,ze.deps)){he.memoizedState=l1(y,I,be,j);return}}is.flags|=g,he.memoizedState=l1(1|y,I,be,j)}function Mh(g,y){return ml(8390656,8,g,y)}function Cu(g,y){return Mc(2048,8,g,y)}function _u(g,y){return Mc(4,2,g,y)}function Sh(g,y){return Mc(4,4,g,y)}function bh(g,y){if(typeof y=="function")return g=g(),y(g),function(){y(null)};if(y!=null)return g=g(),y.current=g,function(){y.current=null}}function Th(g,y,I){return I=I!=null?I.concat([g]):null,Mc(4,4,bh.bind(null,y,g),I)}function xu(){}function Rh(g,y){var I=vo();y=y===void 0?null:y;var j=I.memoizedState;return j!==null&&y!==null&&F1(y,j[1])?j[0]:(I.memoizedState=[g,y],g)}function Ih(g,y){var I=vo();y=y===void 0?null:y;var j=I.memoizedState;return j!==null&&y!==null&&F1(y,j[1])?j[0]:(g=g(),I.memoizedState=[g,y],g)}function Bh(g,y,I){return Ba&21?(Nn(I,y)||(I=Fe(),is.lanes|=I,p1|=I,g.baseState=!0),y):(g.baseState&&(g.baseState=!1,C0=!0),g.memoizedState=I)}function Rd(g,y){var I=ei;ei=I!==0&&4>I?I:4,g(!0);var j=w0.transition;w0.transition={};try{g(!1),y()}finally{ei=I,w0.transition=j}}function Lh(){return vo().memoizedState}function Id(g,y,I){var j=Po(g);if(I={lane:j,action:I,hasEagerState:!1,eagerState:null,next:null},Dh(g))Ph(y,I);else if(I=vc(g,y,I,j),I!==null){var he=e0();sa(I,g,j,he),Oh(I,y,j)}}function Bd(g,y,I){var j=Po(g),he={lane:j,action:I,hasEagerState:!1,eagerState:null,next:null};if(Dh(g))Ph(y,he);else{var be=g.alternate;if(g.lanes===0&&(be===null||be.lanes===0)&&(be=y.lastRenderedReducer,be!==null))try{var ze=y.lastRenderedState,pt=be(ze,I);if(he.hasEagerState=!0,he.eagerState=pt,Nn(pt,ze)){var bt=y.interleaved;bt===null?(he.next=he,r1(y)):(he.next=bt.next,bt.next=he),y.interleaved=he;return}}catch{}finally{}I=vc(g,y,he,j),I!==null&&(he=e0(),sa(I,g,j,he),Oh(I,y,j))}}function Dh(g){var y=g.alternate;return g===is||y!==null&&y===is}function Ph(g,y){c0=Ls=!0;var I=g.pending;I===null?y.next=y:(y.next=I.next,I.next=y),g.pending=y}function Oh(g,y,I){if(I&4194240){var j=y.lanes;j&=g.pendingLanes,I|=j,y.lanes=I,Dt(g,I)}}var Sc={readContext:T0,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useInsertionEffect:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useSyncExternalStore:ao,useId:ao,unstable_isNewReconciler:!1},Ld={readContext:T0,useCallback:function(g,y){return ea().memoizedState=[g,y===void 0?null:y],g},useContext:T0,useEffect:Mh,useImperativeHandle:function(g,y,I){return I=I!=null?I.concat([g]):null,ml(4194308,4,bh.bind(null,y,g),I)},useLayoutEffect:function(g,y){return ml(4194308,4,g,y)},useInsertionEffect:function(g,y){return ml(4,2,g,y)},useMemo:function(g,y){var I=ea();return y=y===void 0?null:y,g=g(),I.memoizedState=[g,y],g},useReducer:function(g,y,I){var j=ea();return y=I!==void 0?I(y):y,j.memoizedState=j.baseState=y,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:y},j.queue=g,g=g.dispatch=Id.bind(null,is,g),[j.memoizedState,g]},useRef:function(g){var y=ea();return g={current:g},y.memoizedState=g},useState:_h,useDebugValue:xu,useDeferredValue:function(g){return ea().memoizedState=g},useTransition:function(){var g=_h(!1),y=g[0];return g=Rd.bind(null,g[1]),ea().memoizedState=g,[y,g]},useMutableSource:function(){},useSyncExternalStore:function(g,y,I){var j=is,he=ea();if(es){if(I===void 0)throw Error(O(407));I=I()}else{if(I=y(),Lo===null)throw Error(O(349));Ba&30||Da(j,y,I)}he.memoizedState=I;var be={value:I,getSnapshot:y};return he.queue=be,Mh(yh.bind(null,j,be,g),[g]),j.flags|=2048,l1(9,Eh.bind(null,j,be,I,y),void 0,null),I},useId:function(){var g=ea(),y=Lo.identifierPrefix;if(es){var I=ro,j=Sa;I=(j&~(1<<32-Kn(j)-1)).toString(32)+I,y=":"+y+"R"+I,I=La++,0<I&&(y+="H"+I.toString(32)),y+=":"}else I=_c++,y=":"+y+"r"+I.toString(32)+":";return g.memoizedState=y},unstable_isNewReconciler:!1},Dd={readContext:T0,useCallback:Rh,useContext:T0,useEffect:Cu,useImperativeHandle:Th,useInsertionEffect:_u,useLayoutEffect:Sh,useMemo:Ih,useReducer:R0,useRef:xh,useState:function(){return R0(ta)},useDebugValue:xu,useDeferredValue:function(g){var y=vo();return Bh(y,Er.memoizedState,g)},useTransition:function(){var g=R0(ta)[0],y=vo().memoizedState;return[g,y]},useMutableSource:a1,useSyncExternalStore:vh,useId:Lh,unstable_isNewReconciler:!1},Pd={readContext:T0,useCallback:Rh,useContext:T0,useEffect:Cu,useImperativeHandle:Th,useInsertionEffect:_u,useLayoutEffect:Sh,useMemo:Ih,useReducer:il,useRef:xh,useState:function(){return il(ta)},useDebugValue:xu,useDeferredValue:function(g){var y=vo();return Er===null?y.memoizedState=g:Bh(y,Er.memoizedState,g)},useTransition:function(){var g=il(ta)[0],y=vo().memoizedState;return[g,y]},useMutableSource:a1,useSyncExternalStore:vh,useId:Lh,unstable_isNewReconciler:!1};function ia(g,y){if(g&&g.defaultProps){y=Oe({},y),g=g.defaultProps;for(var I in g)y[I]===void 0&&(y[I]=g[I]);return y}return y}function Mu(g,y,I,j){y=g.memoizedState,I=I(j,y),I=I==null?y:Oe({},y,I),g.memoizedState=I,g.lanes===0&&(g.updateQueue.baseState=I)}var bc={isMounted:function(g){return(g=g._reactInternals)?ir(g)===g:!1},enqueueSetState:function(g,y,I){g=g._reactInternals;var j=e0(),he=Po(g),be=N0(j,he);be.payload=y,I!=null&&(be.callback=I),y=j0(g,be,he),y!==null&&(sa(y,g,he,j),Bo(y,g,he))},enqueueReplaceState:function(g,y,I){g=g._reactInternals;var j=e0(),he=Po(g),be=N0(j,he);be.tag=1,be.payload=y,I!=null&&(be.callback=I),y=j0(g,be,he),y!==null&&(sa(y,g,he,j),Bo(y,g,he))},enqueueForceUpdate:function(g,y){g=g._reactInternals;var I=e0(),j=Po(g),he=N0(I,j);he.tag=2,y!=null&&(he.callback=y),y=j0(g,he,j),y!==null&&(sa(y,g,j,I),Bo(y,g,j))}};function Fh(g,y,I,j,he,be,ze){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(j,be,ze):y.prototype&&y.prototype.isPureReactComponent?!ga(I,j)||!ga(he,be):!0}function kh(g,y,I){var j=!1,he=No,be=y.contextType;return typeof be=="object"&&be!==null?be=T0(be):(he=l0(y)?Ja:eo.current,j=y.contextTypes,be=(j=j!=null)?Za(g,he):No),y=new y(I,be),g.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=bc,g.stateNode=y,y._reactInternals=g,j&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=he,g.__reactInternalMemoizedMaskedChildContext=be),y}function Nh(g,y,I,j){g=y.state,typeof y.componentWillReceiveProps=="function"&&y.componentWillReceiveProps(I,j),typeof y.UNSAFE_componentWillReceiveProps=="function"&&y.UNSAFE_componentWillReceiveProps(I,j),y.state!==g&&bc.enqueueReplaceState(y,y.state,null)}function Su(g,y,I,j){var he=g.stateNode;he.props=I,he.state=g.memoizedState,he.refs={},Ra(g);var be=y.contextType;typeof be=="object"&&be!==null?he.context=T0(be):(be=l0(y)?Ja:eo.current,he.context=Za(g,be)),he.state=g.memoizedState,be=y.getDerivedStateFromProps,typeof be=="function"&&(Mu(g,y,be,I),he.state=g.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof he.getSnapshotBeforeUpdate=="function"||typeof he.UNSAFE_componentWillMount!="function"&&typeof he.componentWillMount!="function"||(y=he.state,typeof he.componentWillMount=="function"&&he.componentWillMount(),typeof he.UNSAFE_componentWillMount=="function"&&he.UNSAFE_componentWillMount(),y!==he.state&&bc.enqueueReplaceState(he,he.state,null),el(g,I,he,j),he.state=g.memoizedState),typeof he.componentDidMount=="function"&&(g.flags|=4194308)}function c1(g,y){try{var I="",j=y;do I+=Mt(j),j=j.return;while(j);var he=I}catch(be){he=`
Error generating stack: `+be.message+`
`+be.stack}return{value:g,source:y,stack:he,digest:null}}function bu(g,y,I){return{value:g,source:null,stack:I??null,digest:y??null}}function Tu(g,y){try{console.error(y.value)}catch(I){setTimeout(function(){throw I})}}var Ru=typeof WeakMap=="function"?WeakMap:Map;function Uh(g,y,I){I=N0(-1,I),I.tag=3,I.payload={element:null};var j=y.value;return I.callback=function(){Qu||(Qu=!0,hd=j),Tu(g,y)},I}function Hh(g,y,I){I=N0(-1,I),I.tag=3;var j=g.type.getDerivedStateFromError;if(typeof j=="function"){var he=y.value;I.payload=function(){return j(he)},I.callback=function(){Tu(g,y)}}var be=g.stateNode;return be!==null&&typeof be.componentDidCatch=="function"&&(I.callback=function(){Tu(g,y),typeof j!="function"&&(El===null?El=new Set([this]):El.add(this));var ze=y.stack;this.componentDidCatch(y.value,{componentStack:ze!==null?ze:""})}),I}function Gh(g,y,I){var j=g.pingCache;if(j===null){j=g.pingCache=new Ru;var he=new Set;j.set(y,he)}else he=j.get(y),he===void 0&&(he=new Set,j.set(y,he));he.has(I)||(he.add(I),g=Na.bind(null,g,y,I),y.then(g,g))}function Qh(g){do{var y;if((y=g.tag===13)&&(y=g.memoizedState,y=y!==null?y.dehydrated!==null:!0),y)return g;g=g.return}while(g!==null);return null}function Vh(g,y,I,j,he){return g.mode&1?(g.flags|=65536,g.lanes=he,g):(g===y?g.flags|=65536:(g.flags|=128,I.flags|=131072,I.flags&=-52805,I.tag===1&&(I.alternate===null?I.tag=17:(y=N0(-1,1),y.tag=2,j0(I,y,1))),I.lanes|=1),g)}var Od=k.ReactCurrentOwner,C0=!1;function u0(g,y,I,j){y.child=g===null?Ai(y,null,I,j):ks(y,g.child,I,j)}function zh(g,y,I,j,he){I=I.render;var be=y.ref;return rr(y,he),j=o1(g,y,I,j,be,he),I=xc(),g!==null&&!C0?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~he,_0(g,y,he)):(es&&I&&un(y),y.flags|=1,u0(g,y,j,he),y.child)}function Wh(g,y,I,j,he){if(g===null){var be=I.type;return typeof be=="function"&&!wl(be)&&be.defaultProps===void 0&&I.compare===null&&I.defaultProps===void 0?(y.tag=15,y.type=be,Kh(g,y,be,j,he)):(g=kc(I.type,null,j,y,y.mode,he),g.ref=y.ref,g.return=y,y.child=g)}if(be=g.child,!(g.lanes&he)){var ze=be.memoizedProps;if(I=I.compare,I=I!==null?I:ga,I(ze,j)&&g.ref===y.ref)return _0(g,y,he)}return y.flags|=1,g=oa(be,j),g.ref=y.ref,g.return=y,y.child=g}function Kh(g,y,I,j,he){if(g!==null){var be=g.memoizedProps;if(ga(be,j)&&g.ref===y.ref)if(C0=!1,y.pendingProps=j=be,(g.lanes&he)!==0)g.flags&131072&&(C0=!0);else return y.lanes=g.lanes,_0(g,y,he)}return wr(g,y,I,j,he)}function Xh(g,y,I){var j=y.pendingProps,he=j.children,be=g!==null?g.memoizedState:null;if(j.mode==="hidden")if(!(y.mode&1))y.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yr(N1,G0),G0|=I;else{if(!(I&1073741824))return g=be!==null?be.baseLanes|I:I,y.lanes=y.childLanes=1073741824,y.memoizedState={baseLanes:g,cachePool:null,transitions:null},y.updateQueue=null,Yr(N1,G0),G0|=g,null;y.memoizedState={baseLanes:0,cachePool:null,transitions:null},j=be!==null?be.baseLanes:I,Yr(N1,G0),G0|=j}else be!==null?(j=be.baseLanes|I,y.memoizedState=null):j=I,Yr(N1,G0),G0|=j;return u0(g,y,he,I),y.child}function yr(g,y){var I=y.ref;(g===null&&I!==null||g!==null&&g.ref!==I)&&(y.flags|=512,y.flags|=2097152)}function wr(g,y,I,j,he){var be=l0(I)?Ja:eo.current;return be=Za(y,be),rr(y,he),I=o1(g,y,I,j,be,he),j=xc(),g!==null&&!C0?(y.updateQueue=g.updateQueue,y.flags&=-2053,g.lanes&=~he,_0(g,y,he)):(es&&j&&un(y),y.flags|=1,u0(g,y,I,he),y.child)}function Yh(g,y,I,j,he){if(l0(I)){var be=!0;B1(y)}else be=!1;if(rr(y,he),y.stateNode===null)h1(g,y),kh(y,I,j),Su(y,I,j,he),j=!0;else if(g===null){var ze=y.stateNode,pt=y.memoizedProps;ze.props=pt;var bt=ze.context,Zt=I.contextType;typeof Zt=="object"&&Zt!==null?Zt=T0(Zt):(Zt=l0(I)?Ja:eo.current,Zt=Za(y,Zt));var Bi=I.getDerivedStateFromProps,Fi=typeof Bi=="function"||typeof ze.getSnapshotBeforeUpdate=="function";Fi||typeof ze.UNSAFE_componentWillReceiveProps!="function"&&typeof ze.componentWillReceiveProps!="function"||(pt!==j||bt!==Zt)&&Nh(y,ze,j,Zt),Ot=!1;var _i=y.memoizedState;ze.state=_i,el(y,j,ze,he),bt=y.memoizedState,pt!==j||_i!==bt||To.current||Ot?(typeof Bi=="function"&&(Mu(y,I,Bi,j),bt=y.memoizedState),(pt=Ot||Fh(y,I,pt,j,_i,bt,Zt))?(Fi||typeof ze.UNSAFE_componentWillMount!="function"&&typeof ze.componentWillMount!="function"||(typeof ze.componentWillMount=="function"&&ze.componentWillMount(),typeof ze.UNSAFE_componentWillMount=="function"&&ze.UNSAFE_componentWillMount()),typeof ze.componentDidMount=="function"&&(y.flags|=4194308)):(typeof ze.componentDidMount=="function"&&(y.flags|=4194308),y.memoizedProps=j,y.memoizedState=bt),ze.props=j,ze.state=bt,ze.context=Zt,j=pt):(typeof ze.componentDidMount=="function"&&(y.flags|=4194308),j=!1)}else{ze=y.stateNode,Ec(g,y),pt=y.memoizedProps,Zt=y.type===y.elementType?pt:ia(y.type,pt),ze.props=Zt,Fi=y.pendingProps,_i=ze.context,bt=I.contextType,typeof bt=="object"&&bt!==null?bt=T0(bt):(bt=l0(I)?Ja:eo.current,bt=Za(y,bt));var cn=I.getDerivedStateFromProps;(Bi=typeof cn=="function"||typeof ze.getSnapshotBeforeUpdate=="function")||typeof ze.UNSAFE_componentWillReceiveProps!="function"&&typeof ze.componentWillReceiveProps!="function"||(pt!==Fi||_i!==bt)&&Nh(y,ze,j,bt),Ot=!1,_i=y.memoizedState,ze.state=_i,el(y,j,ze,he);var mn=y.memoizedState;pt!==Fi||_i!==mn||To.current||Ot?(typeof cn=="function"&&(Mu(y,I,cn,j),mn=y.memoizedState),(Zt=Ot||Fh(y,I,Zt,j,_i,mn,bt)||!1)?(Bi||typeof ze.UNSAFE_componentWillUpdate!="function"&&typeof ze.componentWillUpdate!="function"||(typeof ze.componentWillUpdate=="function"&&ze.componentWillUpdate(j,mn,bt),typeof ze.UNSAFE_componentWillUpdate=="function"&&ze.UNSAFE_componentWillUpdate(j,mn,bt)),typeof ze.componentDidUpdate=="function"&&(y.flags|=4),typeof ze.getSnapshotBeforeUpdate=="function"&&(y.flags|=1024)):(typeof ze.componentDidUpdate!="function"||pt===g.memoizedProps&&_i===g.memoizedState||(y.flags|=4),typeof ze.getSnapshotBeforeUpdate!="function"||pt===g.memoizedProps&&_i===g.memoizedState||(y.flags|=1024),y.memoizedProps=j,y.memoizedState=mn),ze.props=j,ze.state=mn,ze.context=bt,j=Zt):(typeof ze.componentDidUpdate!="function"||pt===g.memoizedProps&&_i===g.memoizedState||(y.flags|=4),typeof ze.getSnapshotBeforeUpdate!="function"||pt===g.memoizedProps&&_i===g.memoizedState||(y.flags|=1024),j=!1)}return u1(g,y,I,j,be,he)}function u1(g,y,I,j,he,be){yr(g,y);var ze=(y.flags&128)!==0;if(!j&&!ze)return he&&ps(y,I,!1),_0(g,y,be);j=y.stateNode,Od.current=y;var pt=ze&&typeof I.getDerivedStateFromError!="function"?null:j.render();return y.flags|=1,g!==null&&ze?(y.child=ks(y,g.child,null,be),y.child=ks(y,null,pt,be)):u0(g,y,pt,be),y.memoizedState=j.state,he&&ps(y,I,!0),y.child}function Iu(g){var y=g.stateNode;y.pendingContext?Ac(g,y.pendingContext,y.pendingContext!==y.context):y.context&&Ac(g,y.context,!1),tl(g,y.containerInfo)}function Bu(g,y,I,j,he){return t1(),D1(he),y.flags|=256,u0(g,y,I,j),y.child}var Lu={dehydrated:null,treeContext:null,retryLane:0};function Nl(g){return{baseLanes:g,cachePool:null,transitions:null}}function I0(g,y,I){var j=y.pendingProps,he=Ns.current,be=!1,ze=(y.flags&128)!==0,pt;if((pt=ze)||(pt=g!==null&&g.memoizedState===null?!1:(he&2)!==0),pt?(be=!0,y.flags&=-129):(g===null||g.memoizedState!==null)&&(he|=1),Yr(Ns,he&1),g===null)return yu(y),g=y.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(y.mode&1?g.data==="$!"?y.lanes=8:y.lanes=1073741824:y.lanes=1,null):(ze=j.children,g=j.fallback,be?(j=y.mode,be=y.child,ze={mode:"hidden",children:ze},!(j&1)&&be!==null?(be.childLanes=0,be.pendingProps=ze):be=Nc(ze,j,0,null),g=Vl(g,j,I,null),be.return=y,g.return=y,be.sibling=g,y.child=be,y.child.memoizedState=Nl(I),y.memoizedState=Lu,g):Tc(y,ze));if(he=g.memoizedState,he!==null&&(pt=he.dehydrated,pt!==null))return Fd(g,y,ze,j,pt,he,I);if(be){be=j.fallback,ze=y.mode,he=g.child,pt=he.sibling;var bt={mode:"hidden",children:j.children};return!(ze&1)&&y.child!==he?(j=y.child,j.childLanes=0,j.pendingProps=bt,y.deletions=null):(j=oa(he,bt),j.subtreeFlags=he.subtreeFlags&14680064),pt!==null?be=oa(pt,be):(be=Vl(be,ze,I,null),be.flags|=2),be.return=y,j.return=y,j.sibling=be,y.child=j,j=be,be=y.child,ze=g.child.memoizedState,ze=ze===null?Nl(I):{baseLanes:ze.baseLanes|I,cachePool:null,transitions:ze.transitions},be.memoizedState=ze,be.childLanes=g.childLanes&~I,y.memoizedState=Lu,j}return be=g.child,g=be.sibling,j=oa(be,{mode:"visible",children:j.children}),!(y.mode&1)&&(j.lanes=I),j.return=y,j.sibling=null,g!==null&&(I=y.deletions,I===null?(y.deletions=[g],y.flags|=16):I.push(g)),y.child=j,y.memoizedState=null,j}function Tc(g,y){return y=Nc({mode:"visible",children:y},g.mode,0,null),y.return=g,g.child=y}function nl(g,y,I,j){return j!==null&&D1(j),ks(y,g.child,null,I),g=Tc(y,y.pendingProps.children),g.flags|=2,y.memoizedState=null,g}function Fd(g,y,I,j,he,be,ze){if(I)return y.flags&256?(y.flags&=-257,j=bu(Error(O(422))),nl(g,y,ze,j)):y.memoizedState!==null?(y.child=g.child,y.flags|=128,null):(be=j.fallback,he=y.mode,j=Nc({mode:"visible",children:j.children},he,0,null),be=Vl(be,he,ze,null),be.flags|=2,j.return=y,be.return=y,j.sibling=be,y.child=j,y.mode&1&&ks(y,g.child,null,ze),y.child.memoizedState=Nl(ze),y.memoizedState=Lu,be);if(!(y.mode&1))return nl(g,y,ze,null);if(he.data==="$!"){if(j=he.nextSibling&&he.nextSibling.dataset,j)var pt=j.dgst;return j=pt,be=Error(O(419)),j=bu(be,j,void 0),nl(g,y,ze,j)}if(pt=(ze&g.childLanes)!==0,C0||pt){if(j=Lo,j!==null){switch(ze&-ze){case 4:he=2;break;case 16:he=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:he=32;break;case 536870912:he=268435456;break;default:he=0}he=he&(j.suspendedLanes|ze)?0:he,he!==0&&he!==be.retryLane&&(be.retryLane=he,y0(g,he),sa(j,g,he,-1))}return Fa(),j=bu(Error(O(421))),nl(g,y,ze,j)}return he.data==="$?"?(y.flags|=128,y.child=g.child,y=vf.bind(null,g),he._reactRetry=y,null):(g=be.treeContext,us=S0(he.nextSibling),mo=y,es=!0,go=null,g!==null&&(Io[v0++]=Sa,Io[v0++]=ro,Io[v0++]=po,Sa=g.id,ro=g.overflow,po=y),y=Tc(y,j.children),y.flags|=4096,y)}function qh(g,y,I){g.lanes|=y;var j=g.alternate;j!==null&&(j.lanes|=y),so(g.return,y,I)}function Du(g,y,I,j,he){var be=g.memoizedState;be===null?g.memoizedState={isBackwards:y,rendering:null,renderingStartTime:0,last:j,tail:I,tailMode:he}:(be.isBackwards=y,be.rendering=null,be.renderingStartTime=0,be.last=j,be.tail=I,be.tailMode=he)}function Pu(g,y,I){var j=y.pendingProps,he=j.revealOrder,be=j.tail;if(u0(g,y,j.children,I),j=Ns.current,j&2)j=j&1|2,y.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=y.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&qh(g,I,y);else if(g.tag===19)qh(g,I,y);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===y)break e;for(;g.sibling===null;){if(g.return===null||g.return===y)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}j&=1}if(Yr(Ns,j),!(y.mode&1))y.memoizedState=null;else switch(he){case"forwards":for(I=y.child,he=null;I!==null;)g=I.alternate,g!==null&&O1(g)===null&&(he=I),I=I.sibling;I=he,I===null?(he=y.child,y.child=null):(he=I.sibling,I.sibling=null),Du(y,!1,he,I,be);break;case"backwards":for(I=null,he=y.child,y.child=null;he!==null;){if(g=he.alternate,g!==null&&O1(g)===null){y.child=he;break}g=he.sibling,he.sibling=I,I=he,he=g}Du(y,!0,I,null,be);break;case"together":Du(y,!1,null,null,void 0);break;default:y.memoizedState=null}return y.child}function h1(g,y){!(y.mode&1)&&g!==null&&(g.alternate=null,y.alternate=null,y.flags|=2)}function _0(g,y,I){if(g!==null&&(y.dependencies=g.dependencies),p1|=y.lanes,!(I&y.childLanes))return null;if(g!==null&&y.child!==g.child)throw Error(O(153));if(y.child!==null){for(g=y.child,I=oa(g,g.pendingProps),y.child=I,I.return=y;g.sibling!==null;)g=g.sibling,I=I.sibling=oa(g,g.pendingProps),I.return=y;I.sibling=null}return y.child}function kd(g,y,I){switch(y.tag){case 3:Iu(y),t1();break;case 5:kl(y);break;case 1:l0(y.type)&&B1(y);break;case 4:tl(y,y.stateNode.containerInfo);break;case 10:var j=y.type._context,he=y.memoizedProps.value;Yr(Xi,j._currentValue),j._currentValue=he;break;case 13:if(j=y.memoizedState,j!==null)return j.dehydrated!==null?(Yr(Ns,Ns.current&1),y.flags|=128,null):I&y.child.childLanes?I0(g,y,I):(Yr(Ns,Ns.current&1),g=_0(g,y,I),g!==null?g.sibling:null);Yr(Ns,Ns.current&1);break;case 19:if(j=(I&y.childLanes)!==0,g.flags&128){if(j)return Pu(g,y,I);y.flags|=128}if(he=y.memoizedState,he!==null&&(he.rendering=null,he.tail=null,he.lastEffect=null),Yr(Ns,Ns.current),j)break;return null;case 22:case 23:return y.lanes=0,Xh(g,y,I)}return _0(g,y,I)}var Rc,Ou,Jh,Zh;Rc=function(g,y){for(var I=y.child;I!==null;){if(I.tag===5||I.tag===6)g.appendChild(I.stateNode);else if(I.tag!==4&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===y)break;for(;I.sibling===null;){if(I.return===null||I.return===y)return;I=I.return}I.sibling.return=I.return,I=I.sibling}},Ou=function(){},Jh=function(g,y,I,j){var he=g.memoizedProps;if(he!==j){g=y.stateNode,Fl(vn.current);var be=null;switch(I){case"input":he=Xn(g,he),j=Xn(g,j),be=[];break;case"select":he=Oe({},he,{value:void 0}),j=Oe({},j,{value:void 0}),be=[];break;case"textarea":he=mr(g,he),j=mr(g,j),be=[];break;default:typeof he.onClick!="function"&&typeof j.onClick=="function"&&(g.onclick=bo)}Ie(I,j);var ze;I=null;for(Zt in he)if(!j.hasOwnProperty(Zt)&&he.hasOwnProperty(Zt)&&he[Zt]!=null)if(Zt==="style"){var pt=he[Zt];for(ze in pt)pt.hasOwnProperty(ze)&&(I||(I={}),I[ze]="")}else Zt!=="dangerouslySetInnerHTML"&&Zt!=="children"&&Zt!=="suppressContentEditableWarning"&&Zt!=="suppressHydrationWarning"&&Zt!=="autoFocus"&&(w.hasOwnProperty(Zt)?be||(be=[]):(be=be||[]).push(Zt,null));for(Zt in j){var bt=j[Zt];if(pt=he!=null?he[Zt]:void 0,j.hasOwnProperty(Zt)&&bt!==pt&&(bt!=null||pt!=null))if(Zt==="style")if(pt){for(ze in pt)!pt.hasOwnProperty(ze)||bt&&bt.hasOwnProperty(ze)||(I||(I={}),I[ze]="");for(ze in bt)bt.hasOwnProperty(ze)&&pt[ze]!==bt[ze]&&(I||(I={}),I[ze]=bt[ze])}else I||(be||(be=[]),be.push(Zt,I)),I=bt;else Zt==="dangerouslySetInnerHTML"?(bt=bt?bt.__html:void 0,pt=pt?pt.__html:void 0,bt!=null&&pt!==bt&&(be=be||[]).push(Zt,bt)):Zt==="children"?typeof bt!="string"&&typeof bt!="number"||(be=be||[]).push(Zt,""+bt):Zt!=="suppressContentEditableWarning"&&Zt!=="suppressHydrationWarning"&&(w.hasOwnProperty(Zt)?(bt!=null&&Zt==="onScroll"&&jn("scroll",g),be||pt===bt||(be=[])):(be=be||[]).push(Zt,bt))}I&&(be=be||[]).push("style",I);var Zt=be;(y.updateQueue=Zt)&&(y.flags|=4)}},Zh=function(g,y,I,j){I!==j&&(y.flags|=4)};function k1(g,y){if(!es)switch(g.tailMode){case"hidden":y=g.tail;for(var I=null;y!==null;)y.alternate!==null&&(I=y),y=y.sibling;I===null?g.tail=null:I.sibling=null;break;case"collapsed":I=g.tail;for(var j=null;I!==null;)I.alternate!==null&&(j=I),I=I.sibling;j===null?y||g.tail===null?g.tail=null:g.tail.sibling=null:j.sibling=null}}function Zo(g){var y=g.alternate!==null&&g.alternate.child===g.child,I=0,j=0;if(y)for(var he=g.child;he!==null;)I|=he.lanes|he.childLanes,j|=he.subtreeFlags&14680064,j|=he.flags&14680064,he.return=g,he=he.sibling;else for(he=g.child;he!==null;)I|=he.lanes|he.childLanes,j|=he.subtreeFlags,j|=he.flags,he.return=g,he=he.sibling;return g.subtreeFlags|=j,g.childLanes=I,y}function Nd(g,y,I){var j=y.pendingProps;switch(Ao(y),y.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zo(y),null;case 1:return l0(y.type)&&Ol(),Zo(y),null;case 3:return j=y.stateNode,U0(),ws(To),ws(eo),Cc(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(g===null||g.child===null)&&($a(y)?y.flags|=4:g===null||g.memoizedState.isDehydrated&&!(y.flags&256)||(y.flags|=1024,go!==null&&(A1(go),go=null))),Ou(g,y),Zo(y),null;case 5:Uo(y);var he=Fl(Bs.current);if(I=y.type,g!==null&&y.stateNode!=null)Jh(g,y,I,j,he),g.ref!==y.ref&&(y.flags|=512,y.flags|=2097152);else{if(!j){if(y.stateNode===null)throw Error(O(166));return Zo(y),null}if(g=Fl(vn.current),$a(y)){j=y.stateNode,I=y.type;var be=y.memoizedProps;switch(j[on]=y,j[Fs]=be,g=(y.mode&1)!==0,I){case"dialog":jn("cancel",j),jn("close",j);break;case"iframe":case"object":case"embed":jn("load",j);break;case"video":case"audio":for(he=0;he<xr.length;he++)jn(xr[he],j);break;case"source":jn("error",j);break;case"img":case"image":case"link":jn("error",j),jn("load",j);break;case"details":jn("toggle",j);break;case"input":tr(j,be),jn("invalid",j);break;case"select":j._wrapperState={wasMultiple:!!be.multiple},jn("invalid",j);break;case"textarea":Wn(j,be),jn("invalid",j)}Ie(I,be),he=null;for(var ze in be)if(be.hasOwnProperty(ze)){var pt=be[ze];ze==="children"?typeof pt=="string"?j.textContent!==pt&&(be.suppressHydrationWarning!==!0&&fr(j.textContent,pt,g),he=["children",pt]):typeof pt=="number"&&j.textContent!==""+pt&&(be.suppressHydrationWarning!==!0&&fr(j.textContent,pt,g),he=["children",""+pt]):w.hasOwnProperty(ze)&&pt!=null&&ze==="onScroll"&&jn("scroll",j)}switch(I){case"input":Qi(j),cr(j,be,!0);break;case"textarea":Qi(j),ts(j);break;case"select":case"option":break;default:typeof be.onClick=="function"&&(j.onclick=bo)}j=he,y.updateQueue=j,j!==null&&(y.flags|=4)}else{ze=he.nodeType===9?he:he.ownerDocument,g==="http://www.w3.org/1999/xhtml"&&(g=Co(I)),g==="http://www.w3.org/1999/xhtml"?I==="script"?(g=ze.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):typeof j.is=="string"?g=ze.createElement(I,{is:j.is}):(g=ze.createElement(I),I==="select"&&(ze=g,j.multiple?ze.multiple=!0:j.size&&(ze.size=j.size))):g=ze.createElementNS(g,I),g[on]=y,g[Fs]=j,Rc(g,y,!1,!1),y.stateNode=g;e:{switch(ze=ae(I,j),I){case"dialog":jn("cancel",g),jn("close",g),he=j;break;case"iframe":case"object":case"embed":jn("load",g),he=j;break;case"video":case"audio":for(he=0;he<xr.length;he++)jn(xr[he],g);he=j;break;case"source":jn("error",g),he=j;break;case"img":case"image":case"link":jn("error",g),jn("load",g),he=j;break;case"details":jn("toggle",g),he=j;break;case"input":tr(g,j),he=Xn(g,j),jn("invalid",g);break;case"option":he=j;break;case"select":g._wrapperState={wasMultiple:!!j.multiple},he=Oe({},j,{value:void 0}),jn("invalid",g);break;case"textarea":Wn(g,j),he=mr(g,j),jn("invalid",g);break;default:he=j}Ie(I,he),pt=he;for(be in pt)if(pt.hasOwnProperty(be)){var bt=pt[be];be==="style"?ot(g,bt):be==="dangerouslySetInnerHTML"?(bt=bt?bt.__html:void 0,bt!=null&&Ti(g,bt)):be==="children"?typeof bt=="string"?(I!=="textarea"||bt!=="")&&Ye(g,bt):typeof bt=="number"&&Ye(g,""+bt):be!=="suppressContentEditableWarning"&&be!=="suppressHydrationWarning"&&be!=="autoFocus"&&(w.hasOwnProperty(be)?bt!=null&&be==="onScroll"&&jn("scroll",g):bt!=null&&N(g,be,bt,ze))}switch(I){case"input":Qi(g),cr(g,j,!1);break;case"textarea":Qi(g),ts(g);break;case"option":j.value!=null&&g.setAttribute("value",""+zt(j.value));break;case"select":g.multiple=!!j.multiple,be=j.value,be!=null?xs(g,!!j.multiple,be,!1):j.defaultValue!=null&&xs(g,!!j.multiple,j.defaultValue,!0);break;default:typeof he.onClick=="function"&&(g.onclick=bo)}switch(I){case"button":case"input":case"select":case"textarea":j=!!j.autoFocus;break e;case"img":j=!0;break e;default:j=!1}}j&&(y.flags|=4)}y.ref!==null&&(y.flags|=512,y.flags|=2097152)}return Zo(y),null;case 6:if(g&&y.stateNode!=null)Zh(g,y,g.memoizedProps,j);else{if(typeof j!="string"&&y.stateNode===null)throw Error(O(166));if(I=Fl(Bs.current),Fl(vn.current),$a(y)){if(j=y.stateNode,I=y.memoizedProps,j[on]=y,(be=j.nodeValue!==I)&&(g=mo,g!==null))switch(g.tag){case 3:fr(j.nodeValue,I,(g.mode&1)!==0);break;case 5:g.memoizedProps.suppressHydrationWarning!==!0&&fr(j.nodeValue,I,(g.mode&1)!==0)}be&&(y.flags|=4)}else j=(I.nodeType===9?I:I.ownerDocument).createTextNode(j),j[on]=y,y.stateNode=j}return Zo(y),null;case 13:if(ws(Ns),j=y.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(es&&us!==null&&y.mode&1&&!(y.flags&128))Zr(),t1(),y.flags|=98560,be=!1;else if(be=$a(y),j!==null&&j.dehydrated!==null){if(g===null){if(!be)throw Error(O(318));if(be=y.memoizedState,be=be!==null?be.dehydrated:null,!be)throw Error(O(317));be[on]=y}else t1(),!(y.flags&128)&&(y.memoizedState=null),y.flags|=4;Zo(y),be=!1}else go!==null&&(A1(go),go=null),be=!0;if(!be)return y.flags&65536?y:null}return y.flags&128?(y.lanes=I,y):(j=j!==null,j!==(g!==null&&g.memoizedState!==null)&&j&&(y.child.flags|=8192,y.mode&1&&(g===null||Ns.current&1?Do===0&&(Do=3):Fa())),y.updateQueue!==null&&(y.flags|=4),Zo(y),null);case 4:return U0(),Ou(g,y),g===null&&g0(y.stateNode.containerInfo),Zo(y),null;case 10:return Ta(y.type._context),Zo(y),null;case 17:return l0(y.type)&&Ol(),Zo(y),null;case 19:if(ws(Ns),be=y.memoizedState,be===null)return Zo(y),null;if(j=(y.flags&128)!==0,ze=be.rendering,ze===null)if(j)k1(be,!1);else{if(Do!==0||g!==null&&g.flags&128)for(g=y.child;g!==null;){if(ze=O1(g),ze!==null){for(y.flags|=128,k1(be,!1),j=ze.updateQueue,j!==null&&(y.updateQueue=j,y.flags|=4),y.subtreeFlags=0,j=I,I=y.child;I!==null;)be=I,g=j,be.flags&=14680066,ze=be.alternate,ze===null?(be.childLanes=0,be.lanes=g,be.child=null,be.subtreeFlags=0,be.memoizedProps=null,be.memoizedState=null,be.updateQueue=null,be.dependencies=null,be.stateNode=null):(be.childLanes=ze.childLanes,be.lanes=ze.lanes,be.child=ze.child,be.subtreeFlags=0,be.deletions=null,be.memoizedProps=ze.memoizedProps,be.memoizedState=ze.memoizedState,be.updateQueue=ze.updateQueue,be.type=ze.type,g=ze.dependencies,be.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext}),I=I.sibling;return Yr(Ns,Ns.current&1|2),y.child}g=g.sibling}be.tail!==null&&kt()>U1&&(y.flags|=128,j=!0,k1(be,!1),y.lanes=4194304)}else{if(!j)if(g=O1(ze),g!==null){if(y.flags|=128,j=!0,I=g.updateQueue,I!==null&&(y.updateQueue=I,y.flags|=4),k1(be,!0),be.tail===null&&be.tailMode==="hidden"&&!ze.alternate&&!es)return Zo(y),null}else 2*kt()-be.renderingStartTime>U1&&I!==1073741824&&(y.flags|=128,j=!0,k1(be,!1),y.lanes=4194304);be.isBackwards?(ze.sibling=y.child,y.child=ze):(I=be.last,I!==null?I.sibling=ze:y.child=ze,be.last=ze)}return be.tail!==null?(y=be.tail,be.rendering=y,be.tail=y.sibling,be.renderingStartTime=kt(),y.sibling=null,I=Ns.current,Yr(Ns,j?I&1|2:I&1),y):(Zo(y),null);case 22:case 23:return Ku(),j=y.memoizedState!==null,g!==null&&g.memoizedState!==null!==j&&(y.flags|=8192),j&&y.mode&1?G0&1073741824&&(Zo(y),y.subtreeFlags&6&&(y.flags|=8192)):Zo(y),null;case 24:return null;case 25:return null}throw Error(O(156,y.tag))}function Ud(g,y){switch(Ao(y),y.tag){case 1:return l0(y.type)&&Ol(),g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 3:return U0(),ws(To),ws(eo),Cc(),g=y.flags,g&65536&&!(g&128)?(y.flags=g&-65537|128,y):null;case 5:return Uo(y),null;case 13:if(ws(Ns),g=y.memoizedState,g!==null&&g.dehydrated!==null){if(y.alternate===null)throw Error(O(340));t1()}return g=y.flags,g&65536?(y.flags=g&-65537|128,y):null;case 19:return ws(Ns),null;case 4:return U0(),null;case 10:return Ta(y.type._context),null;case 22:case 23:return Ku(),null;case 24:return null;default:return null}}var Ic=!1,$o=!1,Hd=typeof WeakSet=="function"?WeakSet:Set,En=null;function d1(g,y){var I=g.ref;if(I!==null)if(typeof I=="function")try{I(null)}catch(j){er(g,y,j)}else I.current=null}function Fu(g,y,I){try{I()}catch(j){er(g,y,j)}}var $h=!1;function Gd(g,y){if(X0=P0,g=za(),Zl(g)){if("selectionStart"in g)var I={start:g.selectionStart,end:g.selectionEnd};else e:{I=(I=g.ownerDocument)&&I.defaultView||window;var j=I.getSelection&&I.getSelection();if(j&&j.rangeCount!==0){I=j.anchorNode;var he=j.anchorOffset,be=j.focusNode;j=j.focusOffset;try{I.nodeType,be.nodeType}catch{I=null;break e}var ze=0,pt=-1,bt=-1,Zt=0,Bi=0,Fi=g,_i=null;t:for(;;){for(var cn;Fi!==I||he!==0&&Fi.nodeType!==3||(pt=ze+he),Fi!==be||j!==0&&Fi.nodeType!==3||(bt=ze+j),Fi.nodeType===3&&(ze+=Fi.nodeValue.length),(cn=Fi.firstChild)!==null;)_i=Fi,Fi=cn;for(;;){if(Fi===g)break t;if(_i===I&&++Zt===he&&(pt=ze),_i===be&&++Bi===j&&(bt=ze),(cn=Fi.nextSibling)!==null)break;Fi=_i,_i=Fi.parentNode}Fi=cn}I=pt===-1||bt===-1?null:{start:pt,end:bt}}else I=null}I=I||{start:0,end:0}}else I=null;for(Y0={focusedElem:g,selectionRange:I},P0=!1,En=y;En!==null;)if(y=En,g=y.child,(y.subtreeFlags&1028)!==0&&g!==null)g.return=y,En=g;else for(;En!==null;){y=En;try{var mn=y.alternate;if(y.flags&1024)switch(y.tag){case 0:case 11:case 15:break;case 1:if(mn!==null){var Sn=mn.memoizedProps,Ws=mn.memoizedState,Wt=y.stateNode,Bt=Wt.getSnapshotBeforeUpdate(y.elementType===y.type?Sn:ia(y.type,Sn),Ws);Wt.__reactInternalSnapshotBeforeUpdate=Bt}break;case 3:var Xt=y.stateNode.containerInfo;Xt.nodeType===1?Xt.textContent="":Xt.nodeType===9&&Xt.documentElement&&Xt.removeChild(Xt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(Pi){er(y,y.return,Pi)}if(g=y.sibling,g!==null){g.return=y.return,En=g;break}En=y.return}return mn=$h,$h=!1,mn}function f1(g,y,I){var j=y.updateQueue;if(j=j!==null?j.lastEffect:null,j!==null){var he=j=j.next;do{if((he.tag&g)===g){var be=he.destroy;he.destroy=void 0,be!==void 0&&Fu(y,I,be)}he=he.next}while(he!==j)}}function Bc(g,y){if(y=y.updateQueue,y=y!==null?y.lastEffect:null,y!==null){var I=y=y.next;do{if((I.tag&g)===g){var j=I.create;I.destroy=j()}I=I.next}while(I!==y)}}function ku(g){var y=g.ref;if(y!==null){var I=g.stateNode;switch(g.tag){case 5:g=I;break;default:g=I}typeof y=="function"?y(g):y.current=g}}function jh(g){var y=g.alternate;y!==null&&(g.alternate=null,jh(y)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(y=g.stateNode,y!==null&&(delete y[on],delete y[Fs],delete y[gu],delete y[Td],delete y[dl])),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function ed(g){return g.tag===5||g.tag===3||g.tag===4}function td(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||ed(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function Nu(g,y,I){var j=g.tag;if(j===5||j===6)g=g.stateNode,y?I.nodeType===8?I.parentNode.insertBefore(g,y):I.insertBefore(g,y):(I.nodeType===8?(y=I.parentNode,y.insertBefore(g,I)):(y=I,y.appendChild(g)),I=I._reactRootContainer,I!=null||y.onclick!==null||(y.onclick=bo));else if(j!==4&&(g=g.child,g!==null))for(Nu(g,y,I),g=g.sibling;g!==null;)Nu(g,y,I),g=g.sibling}function Uu(g,y,I){var j=g.tag;if(j===5||j===6)g=g.stateNode,y?I.insertBefore(g,y):I.appendChild(g);else if(j!==4&&(g=g.child,g!==null))for(Uu(g,y,I),g=g.sibling;g!==null;)Uu(g,y,I),g=g.sibling}var Ho=null,na=!1;function gl(g,y,I){for(I=I.child;I!==null;)id(g,y,I),I=I.sibling}function id(g,y,I){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Bn,I)}catch{}switch(I.tag){case 5:$o||d1(I,y);case 6:var j=Ho,he=na;Ho=null,gl(g,y,I),Ho=j,na=he,Ho!==null&&(na?(g=Ho,I=I.stateNode,g.nodeType===8?g.parentNode.removeChild(I):g.removeChild(I)):Ho.removeChild(I.stateNode));break;case 18:Ho!==null&&(na?(g=Ho,I=I.stateNode,g.nodeType===8?Ll(g.parentNode,I):g.nodeType===1&&Ll(g,I),x0(g)):Ll(Ho,I.stateNode));break;case 4:j=Ho,he=na,Ho=I.stateNode.containerInfo,na=!0,gl(g,y,I),Ho=j,na=he;break;case 0:case 11:case 14:case 15:if(!$o&&(j=I.updateQueue,j!==null&&(j=j.lastEffect,j!==null))){he=j=j.next;do{var be=he,ze=be.destroy;be=be.tag,ze!==void 0&&(be&2||be&4)&&Fu(I,y,ze),he=he.next}while(he!==j)}gl(g,y,I);break;case 1:if(!$o&&(d1(I,y),j=I.stateNode,typeof j.componentWillUnmount=="function"))try{j.props=I.memoizedProps,j.state=I.memoizedState,j.componentWillUnmount()}catch(pt){er(I,y,pt)}gl(g,y,I);break;case 21:gl(g,y,I);break;case 22:I.mode&1?($o=(j=$o)||I.memoizedState!==null,gl(g,y,I),$o=j):gl(g,y,I);break;default:gl(g,y,I)}}function nd(g){var y=g.updateQueue;if(y!==null){g.updateQueue=null;var I=g.stateNode;I===null&&(I=g.stateNode=new Hd),y.forEach(function(j){var he=Yu.bind(null,g,j);I.has(j)||(I.add(j),j.then(he,he))})}}function ra(g,y){var I=y.deletions;if(I!==null)for(var j=0;j<I.length;j++){var he=I[j];try{var be=g,ze=y,pt=ze;e:for(;pt!==null;){switch(pt.tag){case 5:Ho=pt.stateNode,na=!1;break e;case 3:Ho=pt.stateNode.containerInfo,na=!0;break e;case 4:Ho=pt.stateNode.containerInfo,na=!0;break e}pt=pt.return}if(Ho===null)throw Error(O(160));id(be,ze,he),Ho=null,na=!1;var bt=he.alternate;bt!==null&&(bt.return=null),he.return=null}catch(Zt){er(he,y,Zt)}}if(y.subtreeFlags&12854)for(y=y.child;y!==null;)rd(y,g),y=y.sibling}function rd(g,y){var I=g.alternate,j=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(ra(y,g),Pa(g),j&4){try{f1(3,g,g.return),Bc(3,g)}catch(Sn){er(g,g.return,Sn)}try{f1(5,g,g.return)}catch(Sn){er(g,g.return,Sn)}}break;case 1:ra(y,g),Pa(g),j&512&&I!==null&&d1(I,I.return);break;case 5:if(ra(y,g),Pa(g),j&512&&I!==null&&d1(I,I.return),g.flags&32){var he=g.stateNode;try{Ye(he,"")}catch(Sn){er(g,g.return,Sn)}}if(j&4&&(he=g.stateNode,he!=null)){var be=g.memoizedProps,ze=I!==null?I.memoizedProps:be,pt=g.type,bt=g.updateQueue;if(g.updateQueue=null,bt!==null)try{pt==="input"&&be.type==="radio"&&be.name!=null&&Jn(he,be),ae(pt,ze);var Zt=ae(pt,be);for(ze=0;ze<bt.length;ze+=2){var Bi=bt[ze],Fi=bt[ze+1];Bi==="style"?ot(he,Fi):Bi==="dangerouslySetInnerHTML"?Ti(he,Fi):Bi==="children"?Ye(he,Fi):N(he,Bi,Fi,Zt)}switch(pt){case"input":bn(he,be);break;case"textarea":Ms(he,be);break;case"select":var _i=he._wrapperState.wasMultiple;he._wrapperState.wasMultiple=!!be.multiple;var cn=be.value;cn!=null?xs(he,!!be.multiple,cn,!1):_i!==!!be.multiple&&(be.defaultValue!=null?xs(he,!!be.multiple,be.defaultValue,!0):xs(he,!!be.multiple,be.multiple?[]:"",!1))}he[Fs]=be}catch(Sn){er(g,g.return,Sn)}}break;case 6:if(ra(y,g),Pa(g),j&4){if(g.stateNode===null)throw Error(O(162));he=g.stateNode,be=g.memoizedProps;try{he.nodeValue=be}catch(Sn){er(g,g.return,Sn)}}break;case 3:if(ra(y,g),Pa(g),j&4&&I!==null&&I.memoizedState.isDehydrated)try{x0(y.containerInfo)}catch(Sn){er(g,g.return,Sn)}break;case 4:ra(y,g),Pa(g);break;case 13:ra(y,g),Pa(g),he=g.child,he.flags&8192&&(be=he.memoizedState!==null,he.stateNode.isHidden=be,!be||he.alternate!==null&&he.alternate.memoizedState!==null||(ud=kt())),j&4&&nd(g);break;case 22:if(Bi=I!==null&&I.memoizedState!==null,g.mode&1?($o=(Zt=$o)||Bi,ra(y,g),$o=Zt):ra(y,g),Pa(g),j&8192){if(Zt=g.memoizedState!==null,(g.stateNode.isHidden=Zt)&&!Bi&&g.mode&1)for(En=g,Bi=g.child;Bi!==null;){for(Fi=En=Bi;En!==null;){switch(_i=En,cn=_i.child,_i.tag){case 0:case 11:case 14:case 15:f1(4,_i,_i.return);break;case 1:d1(_i,_i.return);var mn=_i.stateNode;if(typeof mn.componentWillUnmount=="function"){j=_i,I=_i.return;try{y=j,mn.props=y.memoizedProps,mn.state=y.memoizedState,mn.componentWillUnmount()}catch(Sn){er(j,I,Sn)}}break;case 5:d1(_i,_i.return);break;case 22:if(_i.memoizedState!==null){ad(Fi);continue}}cn!==null?(cn.return=_i,En=cn):ad(Fi)}Bi=Bi.sibling}e:for(Bi=null,Fi=g;;){if(Fi.tag===5){if(Bi===null){Bi=Fi;try{he=Fi.stateNode,Zt?(be=he.style,typeof be.setProperty=="function"?be.setProperty("display","none","important"):be.display="none"):(pt=Fi.stateNode,bt=Fi.memoizedProps.style,ze=bt!=null&&bt.hasOwnProperty("display")?bt.display:null,pt.style.display=tt("display",ze))}catch(Sn){er(g,g.return,Sn)}}}else if(Fi.tag===6){if(Bi===null)try{Fi.stateNode.nodeValue=Zt?"":Fi.memoizedProps}catch(Sn){er(g,g.return,Sn)}}else if((Fi.tag!==22&&Fi.tag!==23||Fi.memoizedState===null||Fi===g)&&Fi.child!==null){Fi.child.return=Fi,Fi=Fi.child;continue}if(Fi===g)break e;for(;Fi.sibling===null;){if(Fi.return===null||Fi.return===g)break e;Bi===Fi&&(Bi=null),Fi=Fi.return}Bi===Fi&&(Bi=null),Fi.sibling.return=Fi.return,Fi=Fi.sibling}}break;case 19:ra(y,g),Pa(g),j&4&&nd(g);break;case 21:break;default:ra(y,g),Pa(g)}}function Pa(g){var y=g.flags;if(y&2){try{e:{for(var I=g.return;I!==null;){if(ed(I)){var j=I;break e}I=I.return}throw Error(O(160))}switch(j.tag){case 5:var he=j.stateNode;j.flags&32&&(Ye(he,""),j.flags&=-33);var be=td(g);Uu(g,be,he);break;case 3:case 4:var ze=j.stateNode.containerInfo,pt=td(g);Nu(g,pt,ze);break;default:throw Error(O(161))}}catch(bt){er(g,g.return,bt)}g.flags&=-3}y&4096&&(g.flags&=-4097)}function Qd(g,y,I){En=g,sd(g)}function sd(g,y,I){for(var j=(g.mode&1)!==0;En!==null;){var he=En,be=he.child;if(he.tag===22&&j){var ze=he.memoizedState!==null||Ic;if(!ze){var pt=he.alternate,bt=pt!==null&&pt.memoizedState!==null||$o;pt=Ic;var Zt=$o;if(Ic=ze,($o=bt)&&!Zt)for(En=he;En!==null;)ze=En,bt=ze.child,ze.tag===22&&ze.memoizedState!==null?Vd(he):bt!==null?(bt.return=ze,En=bt):Vd(he);for(;be!==null;)En=be,sd(be),be=be.sibling;En=he,Ic=pt,$o=Zt}od(g)}else he.subtreeFlags&8772&&be!==null?(be.return=he,En=be):od(g)}}function od(g){for(;En!==null;){var y=En;if(y.flags&8772){var I=y.alternate;try{if(y.flags&8772)switch(y.tag){case 0:case 11:case 15:$o||Bc(5,y);break;case 1:var j=y.stateNode;if(y.flags&4&&!$o)if(I===null)j.componentDidMount();else{var he=y.elementType===y.type?I.memoizedProps:ia(y.type,I.memoizedProps);j.componentDidUpdate(he,I.memoizedState,j.__reactInternalSnapshotBeforeUpdate)}var be=y.updateQueue;be!==null&&yc(y,be,j);break;case 3:var ze=y.updateQueue;if(ze!==null){if(I=null,y.child!==null)switch(y.child.tag){case 5:I=y.child.stateNode;break;case 1:I=y.child.stateNode}yc(y,ze,I)}break;case 5:var pt=y.stateNode;if(I===null&&y.flags&4){I=pt;var bt=y.memoizedProps;switch(y.type){case"button":case"input":case"select":case"textarea":bt.autoFocus&&I.focus();break;case"img":bt.src&&(I.src=bt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(y.memoizedState===null){var Zt=y.alternate;if(Zt!==null){var Bi=Zt.memoizedState;if(Bi!==null){var Fi=Bi.dehydrated;Fi!==null&&x0(Fi)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}$o||y.flags&512&&ku(y)}catch(_i){er(y,y.return,_i)}}if(y===g){En=null;break}if(I=y.sibling,I!==null){I.return=y.return,En=I;break}En=y.return}}function ad(g){for(;En!==null;){var y=En;if(y===g){En=null;break}var I=y.sibling;if(I!==null){I.return=y.return,En=I;break}En=y.return}}function Vd(g){for(;En!==null;){var y=En;try{switch(y.tag){case 0:case 11:case 15:var I=y.return;try{Bc(4,y)}catch(bt){er(y,I,bt)}break;case 1:var j=y.stateNode;if(typeof j.componentDidMount=="function"){var he=y.return;try{j.componentDidMount()}catch(bt){er(y,he,bt)}}var be=y.return;try{ku(y)}catch(bt){er(y,be,bt)}break;case 5:var ze=y.return;try{ku(y)}catch(bt){er(y,ze,bt)}}}catch(bt){er(y,y.return,bt)}if(y===g){En=null;break}var pt=y.sibling;if(pt!==null){pt.return=y.return,En=pt;break}En=y.return}}var gf=Math.ceil,Hu=k.ReactCurrentDispatcher,ld=k.ReactCurrentOwner,H0=k.ReactCurrentBatchConfig,qr=0,Lo=null,Eo=null,jo=0,G0=0,N1=b0(0),Do=0,Lc=null,p1=0,Gu=0,cd=0,Ul=null,B0=null,ud=0,U1=1/0,vl=null,Qu=!1,hd=null,El=null,Dc=!1,Hl=null,Oa=0,Pc=0,Vu=null,Oc=-1,zu=0;function e0(){return qr&6?kt():Oc!==-1?Oc:Oc=kt()}function Po(g){return g.mode&1?qr&2&&jo!==0?jo&-jo:gc.transition!==null?(zu===0&&(zu=Fe()),zu):(g=ei,g!==0||(g=window.event,g=g===void 0?16:Fr(g.type)),g):1}function sa(g,y,I,j){if(50<Pc)throw Pc=0,Vu=null,Error(O(185));it(g,I,j),(!(qr&2)||g!==Lo)&&(g===Lo&&(!(qr&2)&&(Gu|=I),Do===4&&yl(g,jo)),Un(g,j),I===1&&qr===0&&!(y.mode&1)&&(U1=kt()+500,Nr&&Xo()))}function Un(g,y){var I=g.callbackNode;_e(g,y);var j=as(g,g===Lo?jo:0);if(j===0)I!==null&&At(I),g.callbackNode=null,g.callbackPriority=0;else if(y=j&-j,g.callbackPriority!==y){if(I!=null&&At(I),y===1)g.tag===0?Eu(dd.bind(null,g)):Ma(dd.bind(null,g)),Bl(function(){!(qr&6)&&Xo()}),I=null;else{switch(pi(j)){case 1:I=Ii;break;case 4:I=pn;break;case 16:I=nn;break;case 536870912:I=Tn;break;default:I=nn}I=zd(I,tn.bind(null,g))}g.callbackPriority=y,g.callbackNode=I}}function tn(g,y){if(Oc=-1,zu=0,qr&6)throw Error(O(327));var I=g.callbackNode;if(Ht()&&g.callbackNode!==I)return null;var j=as(g,g===Lo?jo:0);if(j===0)return null;if(j&30||j&g.expiredLanes||y)y=G1(g,j);else{y=j;var he=qr;qr|=2;var be=H1();(Lo!==g||jo!==y)&&(vl=null,U1=kt()+500,Ql(g,y));do try{Fc();break}catch(pt){fd(g,pt)}while(!0);Jo(),Hu.current=be,qr=he,Eo!==null?y=0:(Lo=null,jo=0,y=Do)}if(y!==0){if(y===2&&(he=Re(g),he!==0&&(j=he,y=h0(g,he))),y===1)throw I=Lc,Ql(g,0),yl(g,j),Un(g,kt()),I;if(y===6)yl(g,j);else{if(he=g.current.alternate,!(j&30)&&!Gl(he)&&(y=G1(g,j),y===2&&(be=Re(g),be!==0&&(j=be,y=h0(g,be))),y===1))throw I=Lc,Ql(g,0),yl(g,j),Un(g,kt()),I;switch(g.finishedWork=he,g.finishedLanes=j,y){case 0:case 1:throw Error(O(345));case 2:sl(g,B0,vl);break;case 3:if(yl(g,j),(j&130023424)===j&&(y=ud+500-kt(),10<y)){if(as(g,0)!==0)break;if(he=g.suspendedLanes,(he&j)!==j){e0(),g.pingedLanes|=g.suspendedLanes&he;break}g.timeoutHandle=Vs(sl.bind(null,g,B0,vl),y);break}sl(g,B0,vl);break;case 4:if(yl(g,j),(j&4194240)===j)break;for(y=g.eventTimes,he=-1;0<j;){var ze=31-Kn(j);be=1<<ze,ze=y[ze],ze>he&&(he=ze),j&=~be}if(j=he,j=kt()-j,j=(120>j?120:480>j?480:1080>j?1080:1920>j?1920:3e3>j?3e3:4320>j?4320:1960*gf(j/1960))-j,10<j){g.timeoutHandle=Vs(sl.bind(null,g,B0,vl),j);break}sl(g,B0,vl);break;case 5:sl(g,B0,vl);break;default:throw Error(O(329))}}}return Un(g,kt()),g.callbackNode===I?tn.bind(null,g):null}function h0(g,y){var I=Ul;return g.current.memoizedState.isDehydrated&&(Ql(g,y).flags|=256),g=G1(g,y),g!==2&&(y=B0,B0=I,y!==null&&A1(y)),g}function A1(g){B0===null?B0=g:B0.push.apply(B0,g)}function Gl(g){for(var y=g;;){if(y.flags&16384){var I=y.updateQueue;if(I!==null&&(I=I.stores,I!==null))for(var j=0;j<I.length;j++){var he=I[j],be=he.getSnapshot;he=he.value;try{if(!Nn(be(),he))return!1}catch{return!1}}}if(I=y.child,y.subtreeFlags&16384&&I!==null)I.return=y,y=I;else{if(y===g)break;for(;y.sibling===null;){if(y.return===null||y.return===g)return!0;y=y.return}y.sibling.return=y.return,y=y.sibling}}return!0}function yl(g,y){for(y&=~cd,y&=~Gu,g.suspendedLanes|=y,g.pingedLanes&=~y,g=g.expirationTimes;0<y;){var I=31-Kn(y),j=1<<I;g[I]=-1,y&=~j}}function dd(g){if(qr&6)throw Error(O(327));Ht();var y=as(g,0);if(!(y&1))return Un(g,kt()),null;var I=G1(g,y);if(g.tag!==0&&I===2){var j=Re(g);j!==0&&(y=j,I=h0(g,j))}if(I===1)throw I=Lc,Ql(g,0),yl(g,y),Un(g,kt()),I;if(I===6)throw Error(O(345));return g.finishedWork=g.current.alternate,g.finishedLanes=y,sl(g,B0,vl),Un(g,kt()),null}function Wu(g,y){var I=qr;qr|=1;try{return g(y)}finally{qr=I,qr===0&&(U1=kt()+500,Nr&&Xo())}}function rl(g){Hl!==null&&Hl.tag===0&&!(qr&6)&&Ht();var y=qr;qr|=1;var I=H0.transition,j=ei;try{if(H0.transition=null,ei=1,g)return g()}finally{ei=j,H0.transition=I,qr=y,!(qr&6)&&Xo()}}function Ku(){G0=N1.current,ws(N1)}function Ql(g,y){g.finishedWork=null,g.finishedLanes=0;var I=g.timeoutHandle;if(I!==-1&&(g.timeoutHandle=-1,F0(I)),Eo!==null)for(I=Eo.return;I!==null;){var j=I;switch(Ao(j),j.tag){case 1:j=j.type.childContextTypes,j!=null&&Ol();break;case 3:U0(),ws(To),ws(eo),Cc();break;case 5:Uo(j);break;case 4:U0();break;case 13:ws(Ns);break;case 19:ws(Ns);break;case 10:Ta(j.type._context);break;case 22:case 23:Ku()}I=I.return}if(Lo=g,Eo=g=oa(g.current,null),jo=G0=y,Do=0,Lc=null,cd=Gu=p1=0,B0=Ul=null,E0!==null){for(y=0;y<E0.length;y++)if(I=E0[y],j=I.interleaved,j!==null){I.interleaved=null;var he=j.next,be=I.pending;if(be!==null){var ze=be.next;be.next=he,j.next=ze}I.pending=j}E0=null}return g}function fd(g,y){do{var I=Eo;try{if(Jo(),Al.current=Sc,Ls){for(var j=is.memoizedState;j!==null;){var he=j.queue;he!==null&&(he.pending=null),j=j.next}Ls=!1}if(Ba=0,oo=Er=is=null,c0=!1,La=0,ld.current=null,I===null||I.return===null){Do=1,Lc=y,Eo=null;break}e:{var be=g,ze=I.return,pt=I,bt=y;if(y=jo,pt.flags|=32768,bt!==null&&typeof bt=="object"&&typeof bt.then=="function"){var Zt=bt,Bi=pt,Fi=Bi.tag;if(!(Bi.mode&1)&&(Fi===0||Fi===11||Fi===15)){var _i=Bi.alternate;_i?(Bi.updateQueue=_i.updateQueue,Bi.memoizedState=_i.memoizedState,Bi.lanes=_i.lanes):(Bi.updateQueue=null,Bi.memoizedState=null)}var cn=Qh(ze);if(cn!==null){cn.flags&=-257,Vh(cn,ze,pt,be,y),cn.mode&1&&Gh(be,Zt,y),y=cn,bt=Zt;var mn=y.updateQueue;if(mn===null){var Sn=new Set;Sn.add(bt),y.updateQueue=Sn}else mn.add(bt);break e}else{if(!(y&1)){Gh(be,Zt,y),Fa();break e}bt=Error(O(426))}}else if(es&&pt.mode&1){var Ws=Qh(ze);if(Ws!==null){!(Ws.flags&65536)&&(Ws.flags|=256),Vh(Ws,ze,pt,be,y),D1(c1(bt,pt));break e}}be=bt=c1(bt,pt),Do!==4&&(Do=2),Ul===null?Ul=[be]:Ul.push(be),be=ze;do{switch(be.tag){case 3:be.flags|=65536,y&=-y,be.lanes|=y;var Wt=Uh(be,bt,y);P1(be,Wt);break e;case 1:pt=bt;var Bt=be.type,Xt=be.stateNode;if(!(be.flags&128)&&(typeof Bt.getDerivedStateFromError=="function"||Xt!==null&&typeof Xt.componentDidCatch=="function"&&(El===null||!El.has(Xt)))){be.flags|=65536,y&=-y,be.lanes|=y;var Pi=Hh(be,pt,y);P1(be,Pi);break e}}be=be.return}while(be!==null)}Q1(I)}catch(Mn){y=Mn,Eo===I&&I!==null&&(Eo=I=I.return);continue}break}while(!0)}function H1(){var g=Hu.current;return Hu.current=Sc,g===null?Sc:g}function Fa(){(Do===0||Do===3||Do===2)&&(Do=4),Lo===null||!(p1&268435455)&&!(Gu&268435455)||yl(Lo,jo)}function G1(g,y){var I=qr;qr|=2;var j=H1();(Lo!==g||jo!==y)&&(vl=null,Ql(g,y));do try{ka();break}catch(he){fd(g,he)}while(!0);if(Jo(),qr=I,Hu.current=j,Eo!==null)throw Error(O(261));return Lo=null,jo=0,Do}function ka(){for(;Eo!==null;)Xu(Eo)}function Fc(){for(;Eo!==null&&!Pt();)Xu(Eo)}function Xu(g){var y=V1(g.alternate,g,G0);g.memoizedProps=g.pendingProps,y===null?Q1(g):Eo=y,ld.current=null}function Q1(g){var y=g;do{var I=y.alternate;if(g=y.return,y.flags&32768){if(I=Ud(I,y),I!==null){I.flags&=32767,Eo=I;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{Do=6,Eo=null;return}}else if(I=Nd(I,y,G0),I!==null){Eo=I;return}if(y=y.sibling,y!==null){Eo=y;return}Eo=y=g}while(y!==null);Do===0&&(Do=5)}function sl(g,y,I){var j=ei,he=H0.transition;try{H0.transition=null,ei=1,Go(g,y,I,j)}finally{H0.transition=he,ei=j}return null}function Go(g,y,I,j){do Ht();while(Hl!==null);if(qr&6)throw Error(O(327));I=g.finishedWork;var he=g.finishedLanes;if(I===null)return null;if(g.finishedWork=null,g.finishedLanes=0,I===g.current)throw Error(O(177));g.callbackNode=null,g.callbackPriority=0;var be=I.lanes|I.childLanes;if(_t(g,be),g===Lo&&(Eo=Lo=null,jo=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||Dc||(Dc=!0,zd(nn,function(){return Ht(),null})),be=(I.flags&15990)!==0,I.subtreeFlags&15990||be){be=H0.transition,H0.transition=null;var ze=ei;ei=1;var pt=qr;qr|=4,ld.current=null,Gd(g,I),rd(I,g),Wa(Y0),P0=!!X0,Y0=X0=null,g.current=I,Qd(I),si(),qr=pt,ei=ze,H0.transition=be}else g.current=I;if(Dc&&(Dc=!1,Hl=g,Oa=he),be=g.pendingLanes,be===0&&(El=null),ns(I.stateNode),Un(g,kt()),y!==null)for(j=g.onRecoverableError,I=0;I<y.length;I++)he=y[I],j(he.value,{componentStack:he.stack,digest:he.digest});if(Qu)throw Qu=!1,g=hd,hd=null,g;return Oa&1&&g.tag!==0&&Ht(),be=g.pendingLanes,be&1?g===Vu?Pc++:(Pc=0,Vu=g):Pc=0,Xo(),null}function Ht(){if(Hl!==null){var g=pi(Oa),y=H0.transition,I=ei;try{if(H0.transition=null,ei=16>g?16:g,Hl===null)var j=!1;else{if(g=Hl,Hl=null,Oa=0,qr&6)throw Error(O(331));var he=qr;for(qr|=4,En=g.current;En!==null;){var be=En,ze=be.child;if(En.flags&16){var pt=be.deletions;if(pt!==null){for(var bt=0;bt<pt.length;bt++){var Zt=pt[bt];for(En=Zt;En!==null;){var Bi=En;switch(Bi.tag){case 0:case 11:case 15:f1(8,Bi,be)}var Fi=Bi.child;if(Fi!==null)Fi.return=Bi,En=Fi;else for(;En!==null;){Bi=En;var _i=Bi.sibling,cn=Bi.return;if(jh(Bi),Bi===Zt){En=null;break}if(_i!==null){_i.return=cn,En=_i;break}En=cn}}}var mn=be.alternate;if(mn!==null){var Sn=mn.child;if(Sn!==null){mn.child=null;do{var Ws=Sn.sibling;Sn.sibling=null,Sn=Ws}while(Sn!==null)}}En=be}}if(be.subtreeFlags&2064&&ze!==null)ze.return=be,En=ze;else e:for(;En!==null;){if(be=En,be.flags&2048)switch(be.tag){case 0:case 11:case 15:f1(9,be,be.return)}var Wt=be.sibling;if(Wt!==null){Wt.return=be.return,En=Wt;break e}En=be.return}}var Bt=g.current;for(En=Bt;En!==null;){ze=En;var Xt=ze.child;if(ze.subtreeFlags&2064&&Xt!==null)Xt.return=ze,En=Xt;else e:for(ze=Bt;En!==null;){if(pt=En,pt.flags&2048)try{switch(pt.tag){case 0:case 11:case 15:Bc(9,pt)}}catch(Mn){er(pt,pt.return,Mn)}if(pt===ze){En=null;break e}var Pi=pt.sibling;if(Pi!==null){Pi.return=pt.return,En=Pi;break e}En=pt.return}}if(qr=he,Xo(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Bn,g)}catch{}j=!0}return j}finally{ei=I,H0.transition=y}}return!1}function rs(g,y,I){y=c1(I,y),y=Uh(g,y,1),g=j0(g,y,1),y=e0(),g!==null&&(it(g,1,y),Un(g,y))}function er(g,y,I){if(g.tag===3)rs(g,g,I);else for(;y!==null;){if(y.tag===3){rs(y,g,I);break}else if(y.tag===1){var j=y.stateNode;if(typeof y.type.getDerivedStateFromError=="function"||typeof j.componentDidCatch=="function"&&(El===null||!El.has(j))){g=c1(I,g),g=Hh(y,g,1),y=j0(y,g,1),g=e0(),y!==null&&(it(y,1,g),Un(y,g));break}}y=y.return}}function Na(g,y,I){var j=g.pingCache;j!==null&&j.delete(y),y=e0(),g.pingedLanes|=g.suspendedLanes&I,Lo===g&&(jo&I)===I&&(Do===4||Do===3&&(jo&130023424)===jo&&500>kt()-ud?Ql(g,0):cd|=I),Un(g,y)}function Cs(g,y){y===0&&(g.mode&1?(y=rn,rn<<=1,!(rn&130023424)&&(rn=4194304)):y=1);var I=e0();g=y0(g,y),g!==null&&(it(g,y,I),Un(g,I))}function vf(g){var y=g.memoizedState,I=0;y!==null&&(I=y.retryLane),Cs(g,I)}function Yu(g,y){var I=0;switch(g.tag){case 13:var j=g.stateNode,he=g.memoizedState;he!==null&&(I=he.retryLane);break;case 19:j=g.stateNode;break;default:throw Error(O(314))}j!==null&&j.delete(y),Cs(g,I)}var V1;V1=function(g,y,I){if(g!==null)if(g.memoizedProps!==y.pendingProps||To.current)C0=!0;else{if(!(g.lanes&I)&&!(y.flags&128))return C0=!1,kd(g,y,I);C0=!!(g.flags&131072)}else C0=!1,es&&y.flags&1048576&&mc(y,e1,y.index);switch(y.lanes=0,y.tag){case 2:var j=y.type;h1(g,y),g=y.pendingProps;var he=Za(y,eo.current);rr(y,I),he=o1(null,y,j,g,he,I);var be=xc();return y.flags|=1,typeof he=="object"&&he!==null&&typeof he.render=="function"&&he.$$typeof===void 0?(y.tag=1,y.memoizedState=null,y.updateQueue=null,l0(j)?(be=!0,B1(y)):be=!1,y.memoizedState=he.state!==null&&he.state!==void 0?he.state:null,Ra(y),he.updater=bc,y.stateNode=he,he._reactInternals=y,Su(y,j,g,I),y=u1(null,y,j,!0,be,I)):(y.tag=0,es&&be&&un(y),u0(null,y,he,I),y=y.child),y;case 16:j=y.elementType;e:{switch(h1(g,y),g=y.pendingProps,he=j._init,j=he(j._payload),y.type=j,he=y.tag=qu(j),g=ia(j,g),he){case 0:y=wr(null,y,j,g,I);break e;case 1:y=Yh(null,y,j,g,I);break e;case 11:y=zh(null,y,j,g,I);break e;case 14:y=Wh(null,y,j,ia(j.type,g),I);break e}throw Error(O(306,j,""))}return y;case 0:return j=y.type,he=y.pendingProps,he=y.elementType===j?he:ia(j,he),wr(g,y,j,he,I);case 1:return j=y.type,he=y.pendingProps,he=y.elementType===j?he:ia(j,he),Yh(g,y,j,he,I);case 3:e:{if(Iu(y),g===null)throw Error(O(387));j=y.pendingProps,be=y.memoizedState,he=be.element,Ec(g,y),el(y,j,null,I);var ze=y.memoizedState;if(j=ze.element,be.isDehydrated)if(be={element:j,isDehydrated:!1,cache:ze.cache,pendingSuspenseBoundaries:ze.pendingSuspenseBoundaries,transitions:ze.transitions},y.updateQueue.baseState=be,y.memoizedState=be,y.flags&256){he=c1(Error(O(423)),y),y=Bu(g,y,j,I,he);break e}else if(j!==he){he=c1(Error(O(424)),y),y=Bu(g,y,j,I,he);break e}else for(us=S0(y.stateNode.containerInfo.firstChild),mo=y,es=!0,go=null,I=Ai(y,null,j,I),y.child=I;I;)I.flags=I.flags&-3|4096,I=I.sibling;else{if(t1(),j===he){y=_0(g,y,I);break e}u0(g,y,j,I)}y=y.child}return y;case 5:return kl(y),g===null&&yu(y),j=y.type,he=y.pendingProps,be=g!==null?g.memoizedProps:null,ze=he.children,qa(j,he)?ze=null:be!==null&&qa(j,be)&&(y.flags|=32),yr(g,y),u0(g,y,ze,I),y.child;case 6:return g===null&&yu(y),null;case 13:return I0(g,y,I);case 4:return tl(y,y.stateNode.containerInfo),j=y.pendingProps,g===null?y.child=ks(y,null,j,I):u0(g,y,j,I),y.child;case 11:return j=y.type,he=y.pendingProps,he=y.elementType===j?he:ia(j,he),zh(g,y,j,he,I);case 7:return u0(g,y,y.pendingProps,I),y.child;case 8:return u0(g,y,y.pendingProps.children,I),y.child;case 12:return u0(g,y,y.pendingProps.children,I),y.child;case 10:e:{if(j=y.type._context,he=y.pendingProps,be=y.memoizedProps,ze=he.value,Yr(Xi,j._currentValue),j._currentValue=ze,be!==null)if(Nn(be.value,ze)){if(be.children===he.children&&!To.current){y=_0(g,y,I);break e}}else for(be=y.child,be!==null&&(be.return=y);be!==null;){var pt=be.dependencies;if(pt!==null){ze=be.child;for(var bt=pt.firstContext;bt!==null;){if(bt.context===j){if(be.tag===1){bt=N0(-1,I&-I),bt.tag=2;var Zt=be.updateQueue;if(Zt!==null){Zt=Zt.shared;var Bi=Zt.pending;Bi===null?bt.next=bt:(bt.next=Bi.next,Bi.next=bt),Zt.pending=bt}}be.lanes|=I,bt=be.alternate,bt!==null&&(bt.lanes|=I),so(be.return,I,y),pt.lanes|=I;break}bt=bt.next}}else if(be.tag===10)ze=be.type===y.type?null:be.child;else if(be.tag===18){if(ze=be.return,ze===null)throw Error(O(341));ze.lanes|=I,pt=ze.alternate,pt!==null&&(pt.lanes|=I),so(ze,I,y),ze=be.sibling}else ze=be.child;if(ze!==null)ze.return=be;else for(ze=be;ze!==null;){if(ze===y){ze=null;break}if(be=ze.sibling,be!==null){be.return=ze.return,ze=be;break}ze=ze.return}be=ze}u0(g,y,he.children,I),y=y.child}return y;case 9:return he=y.type,j=y.pendingProps.children,rr(y,I),he=T0(he),j=j(he),y.flags|=1,u0(g,y,j,I),y.child;case 14:return j=y.type,he=ia(j,y.pendingProps),he=ia(j.type,he),Wh(g,y,j,he,I);case 15:return Kh(g,y,y.type,y.pendingProps,I);case 17:return j=y.type,he=y.pendingProps,he=y.elementType===j?he:ia(j,he),h1(g,y),y.tag=1,l0(j)?(g=!0,B1(y)):g=!1,rr(y,I),kh(y,j,he),Su(y,j,he,I),u1(null,y,j,!0,g,I);case 19:return Pu(g,y,I);case 22:return Xh(g,y,I)}throw Error(O(156,y.tag))};function zd(g,y){return $e(g,y)}function Wd(g,y,I,j){this.tag=g,this.key=I,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=y,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=j,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function t0(g,y,I,j){return new Wd(g,y,I,j)}function wl(g){return g=g.prototype,!(!g||!g.isReactComponent)}function qu(g){if(typeof g=="function")return wl(g)?1:0;if(g!=null){if(g=g.$$typeof,g===Me)return 11;if(g===Qe)return 14}return 2}function oa(g,y){var I=g.alternate;return I===null?(I=t0(g.tag,y,g.key,g.mode),I.elementType=g.elementType,I.type=g.type,I.stateNode=g.stateNode,I.alternate=g,g.alternate=I):(I.pendingProps=y,I.type=g.type,I.flags=0,I.subtreeFlags=0,I.deletions=null),I.flags=g.flags&14680064,I.childLanes=g.childLanes,I.lanes=g.lanes,I.child=g.child,I.memoizedProps=g.memoizedProps,I.memoizedState=g.memoizedState,I.updateQueue=g.updateQueue,y=g.dependencies,I.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext},I.sibling=g.sibling,I.index=g.index,I.ref=g.ref,I}function kc(g,y,I,j,he,be){var ze=2;if(j=g,typeof g=="function")wl(g)&&(ze=1);else if(typeof g=="string")ze=5;else e:switch(g){case ne:return Vl(I.children,he,be,y);case te:ze=8,he|=8;break;case de:return g=t0(12,I,y,he|2),g.elementType=de,g.lanes=be,g;case Ne:return g=t0(13,I,y,he),g.elementType=Ne,g.lanes=be,g;case Pe:return g=t0(19,I,y,he),g.elementType=Pe,g.lanes=be,g;case ke:return Nc(I,he,be,y);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case oe:ze=10;break e;case ye:ze=9;break e;case Me:ze=11;break e;case Qe:ze=14;break e;case De:ze=16,j=null;break e}throw Error(O(130,g==null?g:typeof g,""))}return y=t0(ze,I,y,he),y.elementType=g,y.type=j,y.lanes=be,y}function Vl(g,y,I,j){return g=t0(7,g,j,y),g.lanes=I,g}function Nc(g,y,I,j){return g=t0(22,g,j,y),g.elementType=ke,g.lanes=I,g.stateNode={isHidden:!1},g}function Ju(g,y,I){return g=t0(6,g,null,y),g.lanes=I,g}function Zu(g,y,I){return y=t0(4,g.children!==null?g.children:[],g.key,y),y.lanes=I,y.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},y}function Kd(g,y,I,j,he){this.tag=y,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=We(0),this.expirationTimes=We(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=We(0),this.identifierPrefix=j,this.onRecoverableError=he,this.mutableSourceEagerHydrationData=null}function z1(g,y,I,j,he,be,ze,pt,bt){return g=new Kd(g,y,I,pt,bt),y===1?(y=1,be===!0&&(y|=8)):y=0,be=t0(3,null,null,y),g.current=be,be.stateNode=g,be.memoizedState={element:j,isDehydrated:I,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(be),g}function pd(g,y,I){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:j==null?null:""+j,children:g,containerInfo:y,implementation:I}}function $u(g){if(!g)return No;g=g._reactInternals;e:{if(ir(g)!==g||g.tag!==1)throw Error(O(170));var y=g;do{switch(y.tag){case 3:y=y.stateNode.context;break e;case 1:if(l0(y.type)){y=y.stateNode.__reactInternalMemoizedMergedChildContext;break e}}y=y.return}while(y!==null);throw Error(O(171))}if(g.tag===1){var I=g.type;if(l0(I))return vu(g,I,y)}return y}function ju(g,y,I,j,he,be,ze,pt,bt){return g=z1(I,j,!0,g,he,be,ze,pt,bt),g.context=$u(null),I=g.current,j=e0(),he=Po(I),be=N0(j,he),be.callback=y??null,j0(I,be,he),g.current.lanes=he,it(g,he,j),Un(g,j),g}function W1(g,y,I,j){var he=y.current,be=e0(),ze=Po(he);return I=$u(I),y.context===null?y.context=I:y.pendingContext=I,y=N0(be,ze),y.payload={element:g},j=j===void 0?null:j,j!==null&&(y.callback=j),g=j0(he,y,ze),g!==null&&(sa(g,he,ze,be),Bo(g,he,ze)),ze}function K1(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return g.child.stateNode;default:return g.child.stateNode}}function eh(g,y){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var I=g.retryLane;g.retryLane=I!==0&&I<y?I:y}}function Uc(g,y){eh(g,y),(g=g.alternate)&&eh(g,y)}var th=typeof reportError=="function"?reportError:function(g){console.error(g)};function Hc(g){this._internalRoot=g}X1.prototype.render=Hc.prototype.render=function(g){var y=this._internalRoot;if(y===null)throw Error(O(409));W1(g,y,null,null)},X1.prototype.unmount=Hc.prototype.unmount=function(){var g=this._internalRoot;if(g!==null){this._internalRoot=null;var y=g.containerInfo;rl(function(){W1(null,g,null,null)}),y[Kr]=null}};function X1(g){this._internalRoot=g}X1.prototype.unstable_scheduleHydration=function(g){if(g){var y=an();g={blockedOn:null,target:g,priority:y};for(var I=0;I<Vr.length&&y!==0&&y<Vr[I].priority;I++);Vr.splice(I,0,g),I===0&&Os(g)}};function Cl(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)}function zs(g){return!(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11&&(g.nodeType!==8||g.nodeValue!==" react-mount-point-unstable "))}function lo(){}function Gc(g,y,I,j,he){if(he){if(typeof j=="function"){var be=j;j=function(){var Zt=K1(ze);be.call(Zt)}}var ze=ju(y,j,g,0,null,!1,!1,"",lo);return g._reactRootContainer=ze,g[Kr]=ze.current,g0(g.nodeType===8?g.parentNode:g),rl(),ze}for(;he=g.lastChild;)g.removeChild(he);if(typeof j=="function"){var pt=j;j=function(){var Zt=K1(bt);pt.call(Zt)}}var bt=z1(g,0,!1,null,null,!1,!1,"",lo);return g._reactRootContainer=bt,g[Kr]=bt.current,g0(g.nodeType===8?g.parentNode:g),rl(function(){W1(y,bt,I,j)}),bt}function Qc(g,y,I,j,he){var be=I._reactRootContainer;if(be){var ze=be;if(typeof he=="function"){var pt=he;he=function(){var bt=K1(ze);pt.call(bt)}}W1(y,ze,g,he)}else ze=Gc(I,y,g,he,j);return K1(ze)}Ut=function(g){switch(g.tag){case 3:var y=g.stateNode;if(y.current.memoizedState.isDehydrated){var I=$n(y.pendingLanes);I!==0&&(Dt(y,I|1),Un(y,kt()),!(qr&6)&&(U1=kt()+500,Xo()))}break;case 13:rl(function(){var j=y0(g,1);if(j!==null){var he=e0();sa(j,g,1,he)}}),Uc(g,1)}},ni=function(g){if(g.tag===13){var y=y0(g,134217728);if(y!==null){var I=e0();sa(y,g,134217728,I)}Uc(g,134217728)}},Ri=function(g){if(g.tag===13){var y=Po(g),I=y0(g,y);if(I!==null){var j=e0();sa(I,g,y,j)}Uc(g,y)}},an=function(){return ei},mi=function(g,y){var I=ei;try{return ei=g,y()}finally{ei=I}},Ze=function(g,y,I){switch(y){case"input":if(bn(g,I),y=I.name,I.type==="radio"&&y!=null){for(I=g;I.parentNode;)I=I.parentNode;for(I=I.querySelectorAll("input[name="+JSON.stringify(""+y)+'][type="radio"]'),y=0;y<I.length;y++){var j=I[y];if(j!==g&&j.form===g.form){var he=jl(j);if(!he)throw Error(O(90));sn(j),bn(j,he)}}}break;case"textarea":Ms(g,I);break;case"select":y=I.value,y!=null&&xs(g,!!I.multiple,y,!1)}},Ui=Wu,Ji=rl;var Ad={usingClientEntryPoint:!1,Events:[ko,Pl,jl,Wi,Oi,Wu]},Y1={findFiberByHostInstance:q0,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i0={bundleType:Y1.bundleType,version:Y1.version,rendererPackageName:Y1.rendererPackageName,rendererConfig:Y1.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return g=al(g),g===null?null:g.stateNode},findFiberByHostInstance:Y1.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{Bn=Vc.inject(i0),Dn=Vc}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ad,reactDom_production_min.createPortal=function(g,y){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cl(y))throw Error(O(200));return pd(g,y,null,I)},reactDom_production_min.createRoot=function(g,y){if(!Cl(g))throw Error(O(299));var I=!1,j="",he=th;return y!=null&&(y.unstable_strictMode===!0&&(I=!0),y.identifierPrefix!==void 0&&(j=y.identifierPrefix),y.onRecoverableError!==void 0&&(he=y.onRecoverableError)),y=z1(g,1,!1,null,null,I,!1,j,he),g[Kr]=y.current,g0(g.nodeType===8?g.parentNode:g),new Hc(y)},reactDom_production_min.findDOMNode=function(g){if(g==null)return null;if(g.nodeType===1)return g;var y=g._reactInternals;if(y===void 0)throw typeof g.render=="function"?Error(O(188)):(g=Object.keys(g).join(","),Error(O(268,g)));return g=al(y),g=g===null?null:g.stateNode,g},reactDom_production_min.flushSync=function(g){return rl(g)},reactDom_production_min.hydrate=function(g,y,I){if(!zs(y))throw Error(O(200));return Qc(null,g,y,!0,I)},reactDom_production_min.hydrateRoot=function(g,y,I){if(!Cl(g))throw Error(O(405));var j=I!=null&&I.hydratedSources||null,he=!1,be="",ze=th;if(I!=null&&(I.unstable_strictMode===!0&&(he=!0),I.identifierPrefix!==void 0&&(be=I.identifierPrefix),I.onRecoverableError!==void 0&&(ze=I.onRecoverableError)),y=ju(y,null,g,1,I??null,he,!1,be,ze),g[Kr]=y.current,g0(g),j)for(g=0;g<j.length;g++)I=j[g],he=I._getVersion,he=he(I._source),y.mutableSourceEagerHydrationData==null?y.mutableSourceEagerHydrationData=[I,he]:y.mutableSourceEagerHydrationData.push(I,he);return new X1(y)},reactDom_production_min.render=function(g,y,I){if(!zs(y))throw Error(O(200));return Qc(null,g,y,!1,I)},reactDom_production_min.unmountComponentAtNode=function(g){if(!zs(g))throw Error(O(40));return g._reactRootContainer?(rl(function(){Qc(null,null,g,!1,function(){g._reactRootContainer=null,g[Kr]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=Wu,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(g,y,I,j){if(!zs(I))throw Error(O(200));if(g==null||g._reactInternals===void 0)throw Error(O(38));return Qc(g,y,I,!1,j)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function _(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(_)}catch(R){console.error(R)}}return _(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var _=requireReactDom();return client.createRoot=_.createRoot,client.hydrateRoot=_.hydrateRoot,client}var clientExports=requireClient(),aframeMaster={exports:{}},hasRequiredAframeMaster;function requireAframeMaster(){return hasRequiredAframeMaster||(hasRequiredAframeMaster=1,function(_,R){var O={};(function(w,e){_.exports=e()})(self,()=>(()=>{var U={"./node_modules/an-array/index.js":ie=>{var we=Object.prototype.toString;ie.exports=P;function P(p){return p.BYTES_PER_ELEMENT&&we.call(p.buffer)==="[object ArrayBuffer]"||Array.isArray(p)}},"./node_modules/as-number/index.js":ie=>{ie.exports=function(P,p){return typeof P=="number"?P:typeof p=="number"?p:0}},"./node_modules/base64-js/index.js":(ie,we)=>{we.byteLength=V,we.toByteArray=F,we.fromByteArray=G;for(var P=[],p=[],S=typeof Uint8Array<"u"?Uint8Array:Array,z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",K=0,D=z.length;K<D;++K)P[K]=z[K],p[z.charCodeAt(K)]=K;p[45]=62,p[95]=63;function Q(Z){var ne=Z.length;if(ne%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var te=Z.indexOf("=");te===-1&&(te=ne);var de=te===ne?0:4-te%4;return[te,de]}function V(Z){var ne=Q(Z),te=ne[0],de=ne[1];return(te+de)*3/4-de}function T(Z,ne,te){return(ne+te)*3/4-te}function F(Z){var ne,te=Q(Z),de=te[0],oe=te[1],ye=new S(T(Z,de,oe)),Me=0,Ne=oe>0?de-4:de,Pe;for(Pe=0;Pe<Ne;Pe+=4)ne=p[Z.charCodeAt(Pe)]<<18|p[Z.charCodeAt(Pe+1)]<<12|p[Z.charCodeAt(Pe+2)]<<6|p[Z.charCodeAt(Pe+3)],ye[Me++]=ne>>16&255,ye[Me++]=ne>>8&255,ye[Me++]=ne&255;return oe===2&&(ne=p[Z.charCodeAt(Pe)]<<2|p[Z.charCodeAt(Pe+1)]>>4,ye[Me++]=ne&255),oe===1&&(ne=p[Z.charCodeAt(Pe)]<<10|p[Z.charCodeAt(Pe+1)]<<4|p[Z.charCodeAt(Pe+2)]>>2,ye[Me++]=ne>>8&255,ye[Me++]=ne&255),ye}function N(Z){return P[Z>>18&63]+P[Z>>12&63]+P[Z>>6&63]+P[Z&63]}function k(Z,ne,te){for(var de,oe=[],ye=ne;ye<te;ye+=3)de=(Z[ye]<<16&16711680)+(Z[ye+1]<<8&65280)+(Z[ye+2]&255),oe.push(N(de));return oe.join("")}function G(Z){for(var ne,te=Z.length,de=te%3,oe=[],ye=16383,Me=0,Ne=te-de;Me<Ne;Me+=ye)oe.push(k(Z,Me,Me+ye>Ne?Ne:Me+ye));return de===1?(ne=Z[te-1],oe.push(P[ne>>2]+P[ne<<4&63]+"==")):de===2&&(ne=(Z[te-2]<<8)+Z[te-1],oe.push(P[ne>>10]+P[ne>>4&63]+P[ne<<2&63]+"=")),oe.join("")}},"./node_modules/buffer-equal/index.js":(ie,we,P)=>{var p=P("./node_modules/buffer/index.js").Buffer;ie.exports=function(S,z){if(p.isBuffer(S)&&p.isBuffer(z)){if(typeof S.equals=="function")return S.equals(z);if(S.length!==z.length)return!1;for(var K=0;K<S.length;K++)if(S[K]!==z[K])return!1;return!0}}},"./node_modules/buffer/index.js":(ie,we,P)=>{/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */const p=P("./node_modules/base64-js/index.js"),S=P("./node_modules/ieee754/index.js"),z=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;we.Buffer=V,we.SlowBuffer=ye,we.INSPECT_MAX_BYTES=50;const K=2147483647;we.kMaxLength=K,V.TYPED_ARRAY_SUPPORT=D(),!V.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function D(){try{const Ie=new Uint8Array(1),ae={foo:function(){return 42}};return Object.setPrototypeOf(ae,Uint8Array.prototype),Object.setPrototypeOf(Ie,ae),Ie.foo()===42}catch{return!1}}Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}}),Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}});function Q(Ie){if(Ie>K)throw new RangeError('The value "'+Ie+'" is invalid for option "size"');const ae=new Uint8Array(Ie);return Object.setPrototypeOf(ae,V.prototype),ae}function V(Ie,ae,ge){if(typeof Ie=="number"){if(typeof ae=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k(Ie)}return T(Ie,ae,ge)}V.poolSize=8192;function T(Ie,ae,ge){if(typeof Ie=="string")return G(Ie,ae);if(ArrayBuffer.isView(Ie))return ne(Ie);if(Ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie);if(Xe(Ie,ArrayBuffer)||Ie&&Xe(Ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xe(Ie,SharedArrayBuffer)||Ie&&Xe(Ie.buffer,SharedArrayBuffer)))return te(Ie,ae,ge);if(typeof Ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const He=Ie.valueOf&&Ie.valueOf();if(He!=null&&He!==Ie)return V.from(He,ae,ge);const Ze=de(Ie);if(Ze)return Ze;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ie[Symbol.toPrimitive]=="function")return V.from(Ie[Symbol.toPrimitive]("string"),ae,ge);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ie)}V.from=function(Ie,ae,ge){return T(Ie,ae,ge)},Object.setPrototypeOf(V.prototype,Uint8Array.prototype),Object.setPrototypeOf(V,Uint8Array);function F(Ie){if(typeof Ie!="number")throw new TypeError('"size" argument must be of type number');if(Ie<0)throw new RangeError('The value "'+Ie+'" is invalid for option "size"')}function N(Ie,ae,ge){return F(Ie),Ie<=0?Q(Ie):ae!==void 0?typeof ge=="string"?Q(Ie).fill(ae,ge):Q(Ie).fill(ae):Q(Ie)}V.alloc=function(Ie,ae,ge){return N(Ie,ae,ge)};function k(Ie){return F(Ie),Q(Ie<0?0:oe(Ie)|0)}V.allocUnsafe=function(Ie){return k(Ie)},V.allocUnsafeSlow=function(Ie){return k(Ie)};function G(Ie,ae){if((typeof ae!="string"||ae==="")&&(ae="utf8"),!V.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);const ge=Me(Ie,ae)|0;let He=Q(ge);const Ze=He.write(Ie,ae);return Ze!==ge&&(He=He.slice(0,Ze)),He}function Z(Ie){const ae=Ie.length<0?0:oe(Ie.length)|0,ge=Q(ae);for(let He=0;He<ae;He+=1)ge[He]=Ie[He]&255;return ge}function ne(Ie){if(Xe(Ie,Uint8Array)){const ae=new Uint8Array(Ie);return te(ae.buffer,ae.byteOffset,ae.byteLength)}return Z(Ie)}function te(Ie,ae,ge){if(ae<0||Ie.byteLength<ae)throw new RangeError('"offset" is outside of buffer bounds');if(Ie.byteLength<ae+(ge||0))throw new RangeError('"length" is outside of buffer bounds');let He;return ae===void 0&&ge===void 0?He=new Uint8Array(Ie):ge===void 0?He=new Uint8Array(Ie,ae):He=new Uint8Array(Ie,ae,ge),Object.setPrototypeOf(He,V.prototype),He}function de(Ie){if(V.isBuffer(Ie)){const ae=oe(Ie.length)|0,ge=Q(ae);return ge.length===0||Ie.copy(ge,0,0,ae),ge}if(Ie.length!==void 0)return typeof Ie.length!="number"||lt(Ie.length)?Q(0):Z(Ie);if(Ie.type==="Buffer"&&Array.isArray(Ie.data))return Z(Ie.data)}function oe(Ie){if(Ie>=K)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+K.toString(16)+" bytes");return Ie|0}function ye(Ie){return+Ie!=Ie&&(Ie=0),V.alloc(+Ie)}V.isBuffer=function(ae){return ae!=null&&ae._isBuffer===!0&&ae!==V.prototype},V.compare=function(ae,ge){if(Xe(ae,Uint8Array)&&(ae=V.from(ae,ae.offset,ae.byteLength)),Xe(ge,Uint8Array)&&(ge=V.from(ge,ge.offset,ge.byteLength)),!V.isBuffer(ae)||!V.isBuffer(ge))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ae===ge)return 0;let He=ae.length,Ze=ge.length;for(let ht=0,St=Math.min(He,Ze);ht<St;++ht)if(ae[ht]!==ge[ht]){He=ae[ht],Ze=ge[ht];break}return He<Ze?-1:Ze<He?1:0},V.isEncoding=function(ae){switch(String(ae).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},V.concat=function(ae,ge){if(!Array.isArray(ae))throw new TypeError('"list" argument must be an Array of Buffers');if(ae.length===0)return V.alloc(0);let He;if(ge===void 0)for(ge=0,He=0;He<ae.length;++He)ge+=ae[He].length;const Ze=V.allocUnsafe(ge);let ht=0;for(He=0;He<ae.length;++He){let St=ae[He];if(Xe(St,Uint8Array))ht+St.length>Ze.length?(V.isBuffer(St)||(St=V.from(St)),St.copy(Ze,ht)):Uint8Array.prototype.set.call(Ze,St,ht);else if(V.isBuffer(St))St.copy(Ze,ht);else throw new TypeError('"list" argument must be an Array of Buffers');ht+=St.length}return Ze};function Me(Ie,ae){if(V.isBuffer(Ie))return Ie.length;if(ArrayBuffer.isView(Ie)||Xe(Ie,ArrayBuffer))return Ie.byteLength;if(typeof Ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ie);const ge=Ie.length,He=arguments.length>2&&arguments[2]===!0;if(!He&&ge===0)return 0;let Ze=!1;for(;;)switch(ae){case"ascii":case"latin1":case"binary":return ge;case"utf8":case"utf-8":return Co(Ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ge*2;case"hex":return ge>>>1;case"base64":return Ti(Ie).length;default:if(Ze)return He?-1:Co(Ie).length;ae=(""+ae).toLowerCase(),Ze=!0}}V.byteLength=Me;function Ne(Ie,ae,ge){let He=!1;if((ae===void 0||ae<0)&&(ae=0),ae>this.length||((ge===void 0||ge>this.length)&&(ge=this.length),ge<=0)||(ge>>>=0,ae>>>=0,ge<=ae))return"";for(Ie||(Ie="utf8");;)switch(Ie){case"hex":return zt(this,ae,ge);case"utf8":case"utf-8":return st(this,ae,ge);case"ascii":return Rt(this,ae,ge);case"latin1":case"binary":return Yt(this,ae,ge);case"base64":return Ve(this,ae,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ci(this,ae,ge);default:if(He)throw new TypeError("Unknown encoding: "+Ie);Ie=(Ie+"").toLowerCase(),He=!0}}V.prototype._isBuffer=!0;function Pe(Ie,ae,ge){const He=Ie[ae];Ie[ae]=Ie[ge],Ie[ge]=He}V.prototype.swap16=function(){const ae=this.length;if(ae%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ge=0;ge<ae;ge+=2)Pe(this,ge,ge+1);return this},V.prototype.swap32=function(){const ae=this.length;if(ae%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ge=0;ge<ae;ge+=4)Pe(this,ge,ge+3),Pe(this,ge+1,ge+2);return this},V.prototype.swap64=function(){const ae=this.length;if(ae%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ge=0;ge<ae;ge+=8)Pe(this,ge,ge+7),Pe(this,ge+1,ge+6),Pe(this,ge+2,ge+5),Pe(this,ge+3,ge+4);return this},V.prototype.toString=function(){const ae=this.length;return ae===0?"":arguments.length===0?st(this,0,ae):Ne.apply(this,arguments)},V.prototype.toLocaleString=V.prototype.toString,V.prototype.equals=function(ae){if(!V.isBuffer(ae))throw new TypeError("Argument must be a Buffer");return this===ae?!0:V.compare(this,ae)===0},V.prototype.inspect=function(){let ae="";const ge=we.INSPECT_MAX_BYTES;return ae=this.toString("hex",0,ge).replace(/(.{2})/g,"$1 ").trim(),this.length>ge&&(ae+=" ... "),"<Buffer "+ae+">"},z&&(V.prototype[z]=V.prototype.inspect),V.prototype.compare=function(ae,ge,He,Ze,ht){if(Xe(ae,Uint8Array)&&(ae=V.from(ae,ae.offset,ae.byteLength)),!V.isBuffer(ae))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ae);if(ge===void 0&&(ge=0),He===void 0&&(He=ae?ae.length:0),Ze===void 0&&(Ze=0),ht===void 0&&(ht=this.length),ge<0||He>ae.length||Ze<0||ht>this.length)throw new RangeError("out of range index");if(Ze>=ht&&ge>=He)return 0;if(Ze>=ht)return-1;if(ge>=He)return 1;if(ge>>>=0,He>>>=0,Ze>>>=0,ht>>>=0,this===ae)return 0;let St=ht-Ze,Di=He-ge;const Wi=Math.min(St,Di),Oi=this.slice(Ze,ht),Ui=ae.slice(ge,He);for(let Ji=0;Ji<Wi;++Ji)if(Oi[Ji]!==Ui[Ji]){St=Oi[Ji],Di=Ui[Ji];break}return St<Di?-1:Di<St?1:0};function Qe(Ie,ae,ge,He,Ze){if(Ie.length===0)return-1;if(typeof ge=="string"?(He=ge,ge=0):ge>2147483647?ge=2147483647:ge<-2147483648&&(ge=-2147483648),ge=+ge,lt(ge)&&(ge=Ze?0:Ie.length-1),ge<0&&(ge=Ie.length+ge),ge>=Ie.length){if(Ze)return-1;ge=Ie.length-1}else if(ge<0)if(Ze)ge=0;else return-1;if(typeof ae=="string"&&(ae=V.from(ae,He)),V.isBuffer(ae))return ae.length===0?-1:De(Ie,ae,ge,He,Ze);if(typeof ae=="number")return ae=ae&255,typeof Uint8Array.prototype.indexOf=="function"?Ze?Uint8Array.prototype.indexOf.call(Ie,ae,ge):Uint8Array.prototype.lastIndexOf.call(Ie,ae,ge):De(Ie,[ae],ge,He,Ze);throw new TypeError("val must be string, number or Buffer")}function De(Ie,ae,ge,He,Ze){let ht=1,St=Ie.length,Di=ae.length;if(He!==void 0&&(He=String(He).toLowerCase(),He==="ucs2"||He==="ucs-2"||He==="utf16le"||He==="utf-16le")){if(Ie.length<2||ae.length<2)return-1;ht=2,St/=2,Di/=2,ge/=2}function Wi(Ui,Ji){return ht===1?Ui[Ji]:Ui.readUInt16BE(Ji*ht)}let Oi;if(Ze){let Ui=-1;for(Oi=ge;Oi<St;Oi++)if(Wi(Ie,Oi)===Wi(ae,Ui===-1?0:Oi-Ui)){if(Ui===-1&&(Ui=Oi),Oi-Ui+1===Di)return Ui*ht}else Ui!==-1&&(Oi-=Oi-Ui),Ui=-1}else for(ge+Di>St&&(ge=St-Di),Oi=ge;Oi>=0;Oi--){let Ui=!0;for(let Ji=0;Ji<Di;Ji++)if(Wi(Ie,Oi+Ji)!==Wi(ae,Ji)){Ui=!1;break}if(Ui)return Oi}return-1}V.prototype.includes=function(ae,ge,He){return this.indexOf(ae,ge,He)!==-1},V.prototype.indexOf=function(ae,ge,He){return Qe(this,ae,ge,He,!0)},V.prototype.lastIndexOf=function(ae,ge,He){return Qe(this,ae,ge,He,!1)};function ke(Ie,ae,ge,He){ge=Number(ge)||0;const Ze=Ie.length-ge;He?(He=Number(He),He>Ze&&(He=Ze)):He=Ze;const ht=ae.length;He>ht/2&&(He=ht/2);let St;for(St=0;St<He;++St){const Di=parseInt(ae.substr(St*2,2),16);if(lt(Di))return St;Ie[ge+St]=Di}return St}function Ce(Ie,ae,ge,He){return Ye(Co(ae,Ie.length-ge),Ie,ge,He)}function fe(Ie,ae,ge,He){return Ye(Us(ae),Ie,ge,He)}function Oe(Ie,ae,ge,He){return Ye(Ti(ae),Ie,ge,He)}function Te(Ie,ae,ge,He){return Ye(Jr(ae,Ie.length-ge),Ie,ge,He)}V.prototype.write=function(ae,ge,He,Ze){if(ge===void 0)Ze="utf8",He=this.length,ge=0;else if(He===void 0&&typeof ge=="string")Ze=ge,He=this.length,ge=0;else if(isFinite(ge))ge=ge>>>0,isFinite(He)?(He=He>>>0,Ze===void 0&&(Ze="utf8")):(Ze=He,He=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ht=this.length-ge;if((He===void 0||He>ht)&&(He=ht),ae.length>0&&(He<0||ge<0)||ge>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ze||(Ze="utf8");let St=!1;for(;;)switch(Ze){case"hex":return ke(this,ae,ge,He);case"utf8":case"utf-8":return Ce(this,ae,ge,He);case"ascii":case"latin1":case"binary":return fe(this,ae,ge,He);case"base64":return Oe(this,ae,ge,He);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Te(this,ae,ge,He);default:if(St)throw new TypeError("Unknown encoding: "+Ze);Ze=(""+Ze).toLowerCase(),St=!0}},V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ve(Ie,ae,ge){return ae===0&&ge===Ie.length?p.fromByteArray(Ie):p.fromByteArray(Ie.slice(ae,ge))}function st(Ie,ae,ge){ge=Math.min(Ie.length,ge);const He=[];let Ze=ae;for(;Ze<ge;){const ht=Ie[Ze];let St=null,Di=ht>239?4:ht>223?3:ht>191?2:1;if(Ze+Di<=ge){let Wi,Oi,Ui,Ji;switch(Di){case 1:ht<128&&(St=ht);break;case 2:Wi=Ie[Ze+1],(Wi&192)===128&&(Ji=(ht&31)<<6|Wi&63,Ji>127&&(St=Ji));break;case 3:Wi=Ie[Ze+1],Oi=Ie[Ze+2],(Wi&192)===128&&(Oi&192)===128&&(Ji=(ht&15)<<12|(Wi&63)<<6|Oi&63,Ji>2047&&(Ji<55296||Ji>57343)&&(St=Ji));break;case 4:Wi=Ie[Ze+1],Oi=Ie[Ze+2],Ui=Ie[Ze+3],(Wi&192)===128&&(Oi&192)===128&&(Ui&192)===128&&(Ji=(ht&15)<<18|(Wi&63)<<12|(Oi&63)<<6|Ui&63,Ji>65535&&Ji<1114112&&(St=Ji))}}St===null?(St=65533,Di=1):St>65535&&(St-=65536,He.push(St>>>10&1023|55296),St=56320|St&1023),He.push(St),Ze+=Di}return Mt(He)}const dt=4096;function Mt(Ie){const ae=Ie.length;if(ae<=dt)return String.fromCharCode.apply(String,Ie);let ge="",He=0;for(;He<ae;)ge+=String.fromCharCode.apply(String,Ie.slice(He,He+=dt));return ge}function Rt(Ie,ae,ge){let He="";ge=Math.min(Ie.length,ge);for(let Ze=ae;Ze<ge;++Ze)He+=String.fromCharCode(Ie[Ze]&127);return He}function Yt(Ie,ae,ge){let He="";ge=Math.min(Ie.length,ge);for(let Ze=ae;Ze<ge;++Ze)He+=String.fromCharCode(Ie[Ze]);return He}function zt(Ie,ae,ge){const He=Ie.length;(!ae||ae<0)&&(ae=0),(!ge||ge<0||ge>He)&&(ge=He);let Ze="";for(let ht=ae;ht<ge;++ht)Ze+=tt[Ie[ht]];return Ze}function Ci(Ie,ae,ge){const He=Ie.slice(ae,ge);let Ze="";for(let ht=0;ht<He.length-1;ht+=2)Ze+=String.fromCharCode(He[ht]+He[ht+1]*256);return Ze}V.prototype.slice=function(ae,ge){const He=this.length;ae=~~ae,ge=ge===void 0?He:~~ge,ae<0?(ae+=He,ae<0&&(ae=0)):ae>He&&(ae=He),ge<0?(ge+=He,ge<0&&(ge=0)):ge>He&&(ge=He),ge<ae&&(ge=ae);const Ze=this.subarray(ae,ge);return Object.setPrototypeOf(Ze,V.prototype),Ze};function ci(Ie,ae,ge){if(Ie%1!==0||Ie<0)throw new RangeError("offset is not uint");if(Ie+ae>ge)throw new RangeError("Trying to access beyond buffer length")}V.prototype.readUintLE=V.prototype.readUIntLE=function(ae,ge,He){ae=ae>>>0,ge=ge>>>0,He||ci(ae,ge,this.length);let Ze=this[ae],ht=1,St=0;for(;++St<ge&&(ht*=256);)Ze+=this[ae+St]*ht;return Ze},V.prototype.readUintBE=V.prototype.readUIntBE=function(ae,ge,He){ae=ae>>>0,ge=ge>>>0,He||ci(ae,ge,this.length);let Ze=this[ae+--ge],ht=1;for(;ge>0&&(ht*=256);)Ze+=this[ae+--ge]*ht;return Ze},V.prototype.readUint8=V.prototype.readUInt8=function(ae,ge){return ae=ae>>>0,ge||ci(ae,1,this.length),this[ae]},V.prototype.readUint16LE=V.prototype.readUInt16LE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,2,this.length),this[ae]|this[ae+1]<<8},V.prototype.readUint16BE=V.prototype.readUInt16BE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,2,this.length),this[ae]<<8|this[ae+1]},V.prototype.readUint32LE=V.prototype.readUInt32LE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,4,this.length),(this[ae]|this[ae+1]<<8|this[ae+2]<<16)+this[ae+3]*16777216},V.prototype.readUint32BE=V.prototype.readUInt32BE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,4,this.length),this[ae]*16777216+(this[ae+1]<<16|this[ae+2]<<8|this[ae+3])},V.prototype.readBigUInt64LE=ot(function(ae){ae=ae>>>0,mr(ae,"offset");const ge=this[ae],He=this[ae+7];(ge===void 0||He===void 0)&&Wn(ae,this.length-8);const Ze=ge+this[++ae]*2**8+this[++ae]*2**16+this[++ae]*2**24,ht=this[++ae]+this[++ae]*2**8+this[++ae]*2**16+He*2**24;return BigInt(Ze)+(BigInt(ht)<<BigInt(32))}),V.prototype.readBigUInt64BE=ot(function(ae){ae=ae>>>0,mr(ae,"offset");const ge=this[ae],He=this[ae+7];(ge===void 0||He===void 0)&&Wn(ae,this.length-8);const Ze=ge*2**24+this[++ae]*2**16+this[++ae]*2**8+this[++ae],ht=this[++ae]*2**24+this[++ae]*2**16+this[++ae]*2**8+He;return(BigInt(Ze)<<BigInt(32))+BigInt(ht)}),V.prototype.readIntLE=function(ae,ge,He){ae=ae>>>0,ge=ge>>>0,He||ci(ae,ge,this.length);let Ze=this[ae],ht=1,St=0;for(;++St<ge&&(ht*=256);)Ze+=this[ae+St]*ht;return ht*=128,Ze>=ht&&(Ze-=Math.pow(2,8*ge)),Ze},V.prototype.readIntBE=function(ae,ge,He){ae=ae>>>0,ge=ge>>>0,He||ci(ae,ge,this.length);let Ze=ge,ht=1,St=this[ae+--Ze];for(;Ze>0&&(ht*=256);)St+=this[ae+--Ze]*ht;return ht*=128,St>=ht&&(St-=Math.pow(2,8*ge)),St},V.prototype.readInt8=function(ae,ge){return ae=ae>>>0,ge||ci(ae,1,this.length),this[ae]&128?(255-this[ae]+1)*-1:this[ae]},V.prototype.readInt16LE=function(ae,ge){ae=ae>>>0,ge||ci(ae,2,this.length);const He=this[ae]|this[ae+1]<<8;return He&32768?He|4294901760:He},V.prototype.readInt16BE=function(ae,ge){ae=ae>>>0,ge||ci(ae,2,this.length);const He=this[ae+1]|this[ae]<<8;return He&32768?He|4294901760:He},V.prototype.readInt32LE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,4,this.length),this[ae]|this[ae+1]<<8|this[ae+2]<<16|this[ae+3]<<24},V.prototype.readInt32BE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,4,this.length),this[ae]<<24|this[ae+1]<<16|this[ae+2]<<8|this[ae+3]},V.prototype.readBigInt64LE=ot(function(ae){ae=ae>>>0,mr(ae,"offset");const ge=this[ae],He=this[ae+7];(ge===void 0||He===void 0)&&Wn(ae,this.length-8);const Ze=this[ae+4]+this[ae+5]*2**8+this[ae+6]*2**16+(He<<24);return(BigInt(Ze)<<BigInt(32))+BigInt(ge+this[++ae]*256+this[++ae]*65536+this[++ae]*16777216)}),V.prototype.readBigInt64BE=ot(function(ae){ae=ae>>>0,mr(ae,"offset");const ge=this[ae],He=this[ae+7];(ge===void 0||He===void 0)&&Wn(ae,this.length-8);const Ze=(ge<<24)+this[++ae]*2**16+this[++ae]*2**8+this[++ae];return(BigInt(Ze)<<BigInt(32))+BigInt(this[++ae]*16777216+this[++ae]*65536+this[++ae]*256+He)}),V.prototype.readFloatLE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,4,this.length),S.read(this,ae,!0,23,4)},V.prototype.readFloatBE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,4,this.length),S.read(this,ae,!1,23,4)},V.prototype.readDoubleLE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,8,this.length),S.read(this,ae,!0,52,8)},V.prototype.readDoubleBE=function(ae,ge){return ae=ae>>>0,ge||ci(ae,8,this.length),S.read(this,ae,!1,52,8)};function Qi(Ie,ae,ge,He,Ze,ht){if(!V.isBuffer(Ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae>Ze||ae<ht)throw new RangeError('"value" argument is out of bounds');if(ge+He>Ie.length)throw new RangeError("Index out of range")}V.prototype.writeUintLE=V.prototype.writeUIntLE=function(ae,ge,He,Ze){if(ae=+ae,ge=ge>>>0,He=He>>>0,!Ze){const Di=Math.pow(2,8*He)-1;Qi(this,ae,ge,He,Di,0)}let ht=1,St=0;for(this[ge]=ae&255;++St<He&&(ht*=256);)this[ge+St]=ae/ht&255;return ge+He},V.prototype.writeUintBE=V.prototype.writeUIntBE=function(ae,ge,He,Ze){if(ae=+ae,ge=ge>>>0,He=He>>>0,!Ze){const Di=Math.pow(2,8*He)-1;Qi(this,ae,ge,He,Di,0)}let ht=He-1,St=1;for(this[ge+ht]=ae&255;--ht>=0&&(St*=256);)this[ge+ht]=ae/St&255;return ge+He},V.prototype.writeUint8=V.prototype.writeUInt8=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,1,255,0),this[ge]=ae&255,ge+1},V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,2,65535,0),this[ge]=ae&255,this[ge+1]=ae>>>8,ge+2},V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,2,65535,0),this[ge]=ae>>>8,this[ge+1]=ae&255,ge+2},V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,4,4294967295,0),this[ge+3]=ae>>>24,this[ge+2]=ae>>>16,this[ge+1]=ae>>>8,this[ge]=ae&255,ge+4},V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,4,4294967295,0),this[ge]=ae>>>24,this[ge+1]=ae>>>16,this[ge+2]=ae>>>8,this[ge+3]=ae&255,ge+4};function sn(Ie,ae,ge,He,Ze){xs(ae,He,Ze,Ie,ge,7);let ht=Number(ae&BigInt(4294967295));Ie[ge++]=ht,ht=ht>>8,Ie[ge++]=ht,ht=ht>>8,Ie[ge++]=ht,ht=ht>>8,Ie[ge++]=ht;let St=Number(ae>>BigInt(32)&BigInt(4294967295));return Ie[ge++]=St,St=St>>8,Ie[ge++]=St,St=St>>8,Ie[ge++]=St,St=St>>8,Ie[ge++]=St,ge}function In(Ie,ae,ge,He,Ze){xs(ae,He,Ze,Ie,ge,7);let ht=Number(ae&BigInt(4294967295));Ie[ge+7]=ht,ht=ht>>8,Ie[ge+6]=ht,ht=ht>>8,Ie[ge+5]=ht,ht=ht>>8,Ie[ge+4]=ht;let St=Number(ae>>BigInt(32)&BigInt(4294967295));return Ie[ge+3]=St,St=St>>8,Ie[ge+2]=St,St=St>>8,Ie[ge+1]=St,St=St>>8,Ie[ge]=St,ge+8}V.prototype.writeBigUInt64LE=ot(function(ae,ge=0){return sn(this,ae,ge,BigInt(0),BigInt("0xffffffffffffffff"))}),V.prototype.writeBigUInt64BE=ot(function(ae,ge=0){return In(this,ae,ge,BigInt(0),BigInt("0xffffffffffffffff"))}),V.prototype.writeIntLE=function(ae,ge,He,Ze){if(ae=+ae,ge=ge>>>0,!Ze){const Wi=Math.pow(2,8*He-1);Qi(this,ae,ge,He,Wi-1,-Wi)}let ht=0,St=1,Di=0;for(this[ge]=ae&255;++ht<He&&(St*=256);)ae<0&&Di===0&&this[ge+ht-1]!==0&&(Di=1),this[ge+ht]=(ae/St>>0)-Di&255;return ge+He},V.prototype.writeIntBE=function(ae,ge,He,Ze){if(ae=+ae,ge=ge>>>0,!Ze){const Wi=Math.pow(2,8*He-1);Qi(this,ae,ge,He,Wi-1,-Wi)}let ht=He-1,St=1,Di=0;for(this[ge+ht]=ae&255;--ht>=0&&(St*=256);)ae<0&&Di===0&&this[ge+ht+1]!==0&&(Di=1),this[ge+ht]=(ae/St>>0)-Di&255;return ge+He},V.prototype.writeInt8=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,1,127,-128),ae<0&&(ae=255+ae+1),this[ge]=ae&255,ge+1},V.prototype.writeInt16LE=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,2,32767,-32768),this[ge]=ae&255,this[ge+1]=ae>>>8,ge+2},V.prototype.writeInt16BE=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,2,32767,-32768),this[ge]=ae>>>8,this[ge+1]=ae&255,ge+2},V.prototype.writeInt32LE=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,4,2147483647,-2147483648),this[ge]=ae&255,this[ge+1]=ae>>>8,this[ge+2]=ae>>>16,this[ge+3]=ae>>>24,ge+4},V.prototype.writeInt32BE=function(ae,ge,He){return ae=+ae,ge=ge>>>0,He||Qi(this,ae,ge,4,2147483647,-2147483648),ae<0&&(ae=4294967295+ae+1),this[ge]=ae>>>24,this[ge+1]=ae>>>16,this[ge+2]=ae>>>8,this[ge+3]=ae&255,ge+4},V.prototype.writeBigInt64LE=ot(function(ae,ge=0){return sn(this,ae,ge,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),V.prototype.writeBigInt64BE=ot(function(ae,ge=0){return In(this,ae,ge,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Xn(Ie,ae,ge,He,Ze,ht){if(ge+He>Ie.length)throw new RangeError("Index out of range");if(ge<0)throw new RangeError("Index out of range")}function tr(Ie,ae,ge,He,Ze){return ae=+ae,ge=ge>>>0,Ze||Xn(Ie,ae,ge,4),S.write(Ie,ae,ge,He,23,4),ge+4}V.prototype.writeFloatLE=function(ae,ge,He){return tr(this,ae,ge,!0,He)},V.prototype.writeFloatBE=function(ae,ge,He){return tr(this,ae,ge,!1,He)};function Jn(Ie,ae,ge,He,Ze){return ae=+ae,ge=ge>>>0,Ze||Xn(Ie,ae,ge,8),S.write(Ie,ae,ge,He,52,8),ge+8}V.prototype.writeDoubleLE=function(ae,ge,He){return Jn(this,ae,ge,!0,He)},V.prototype.writeDoubleBE=function(ae,ge,He){return Jn(this,ae,ge,!1,He)},V.prototype.copy=function(ae,ge,He,Ze){if(!V.isBuffer(ae))throw new TypeError("argument should be a Buffer");if(He||(He=0),!Ze&&Ze!==0&&(Ze=this.length),ge>=ae.length&&(ge=ae.length),ge||(ge=0),Ze>0&&Ze<He&&(Ze=He),Ze===He||ae.length===0||this.length===0)return 0;if(ge<0)throw new RangeError("targetStart out of bounds");if(He<0||He>=this.length)throw new RangeError("Index out of range");if(Ze<0)throw new RangeError("sourceEnd out of bounds");Ze>this.length&&(Ze=this.length),ae.length-ge<Ze-He&&(Ze=ae.length-ge+He);const ht=Ze-He;return this===ae&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ge,He,Ze):Uint8Array.prototype.set.call(ae,this.subarray(He,Ze),ge),ht},V.prototype.fill=function(ae,ge,He,Ze){if(typeof ae=="string"){if(typeof ge=="string"?(Ze=ge,ge=0,He=this.length):typeof He=="string"&&(Ze=He,He=this.length),Ze!==void 0&&typeof Ze!="string")throw new TypeError("encoding must be a string");if(typeof Ze=="string"&&!V.isEncoding(Ze))throw new TypeError("Unknown encoding: "+Ze);if(ae.length===1){const St=ae.charCodeAt(0);(Ze==="utf8"&&St<128||Ze==="latin1")&&(ae=St)}}else typeof ae=="number"?ae=ae&255:typeof ae=="boolean"&&(ae=Number(ae));if(ge<0||this.length<ge||this.length<He)throw new RangeError("Out of range index");if(He<=ge)return this;ge=ge>>>0,He=He===void 0?this.length:He>>>0,ae||(ae=0);let ht;if(typeof ae=="number")for(ht=ge;ht<He;++ht)this[ht]=ae;else{const St=V.isBuffer(ae)?ae:V.from(ae,Ze),Di=St.length;if(Di===0)throw new TypeError('The value "'+ae+'" is invalid for argument "value"');for(ht=0;ht<He-ge;++ht)this[ht+ge]=St[ht%Di]}return this};const bn={};function cr(Ie,ae,ge){bn[Ie]=class extends ge{constructor(){super(),Object.defineProperty(this,"message",{value:ae.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ie}]`,this.stack,delete this.name}get code(){return Ie}set code(Ze){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ze,writable:!0})}toString(){return`${this.name} [${Ie}]: ${this.message}`}}}cr("ERR_BUFFER_OUT_OF_BOUNDS",function(Ie){return Ie?`${Ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),cr("ERR_INVALID_ARG_TYPE",function(Ie,ae){return`The "${Ie}" argument must be of type number. Received type ${typeof ae}`},TypeError),cr("ERR_OUT_OF_RANGE",function(Ie,ae,ge){let He=`The value of "${Ie}" is out of range.`,Ze=ge;return Number.isInteger(ge)&&Math.abs(ge)>4294967296?Ze=Ir(String(ge)):typeof ge=="bigint"&&(Ze=String(ge),(ge>BigInt(2)**BigInt(32)||ge<-(BigInt(2)**BigInt(32)))&&(Ze=Ir(Ze)),Ze+="n"),He+=` It must be ${ae}. Received ${Ze}`,He},RangeError);function Ir(Ie){let ae="",ge=Ie.length;const He=Ie[0]==="-"?1:0;for(;ge>=He+4;ge-=3)ae=`_${Ie.slice(ge-3,ge)}${ae}`;return`${Ie.slice(0,ge)}${ae}`}function je(Ie,ae,ge){mr(ae,"offset"),(Ie[ae]===void 0||Ie[ae+ge]===void 0)&&Wn(ae,Ie.length-(ge+1))}function xs(Ie,ae,ge,He,Ze,ht){if(Ie>ge||Ie<ae){const St=typeof ae=="bigint"?"n":"";let Di;throw ae===0||ae===BigInt(0)?Di=`>= 0${St} and < 2${St} ** ${(ht+1)*8}${St}`:Di=`>= -(2${St} ** ${(ht+1)*8-1}${St}) and < 2 ** ${(ht+1)*8-1}${St}`,new bn.ERR_OUT_OF_RANGE("value",Di,Ie)}je(He,Ze,ht)}function mr(Ie,ae){if(typeof Ie!="number")throw new bn.ERR_INVALID_ARG_TYPE(ae,"number",Ie)}function Wn(Ie,ae,ge){throw Math.floor(Ie)!==Ie?(mr(Ie,ge),new bn.ERR_OUT_OF_RANGE("offset","an integer",Ie)):ae<0?new bn.ERR_BUFFER_OUT_OF_BOUNDS:new bn.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${ae}`,Ie)}const Ms=/[^+/0-9A-Za-z-_]/g;function ts(Ie){if(Ie=Ie.split("=")[0],Ie=Ie.trim().replace(Ms,""),Ie.length<2)return"";for(;Ie.length%4!==0;)Ie=Ie+"=";return Ie}function Co(Ie,ae){ae=ae||1/0;let ge;const He=Ie.length;let Ze=null;const ht=[];for(let St=0;St<He;++St){if(ge=Ie.charCodeAt(St),ge>55295&&ge<57344){if(!Ze){if(ge>56319){(ae-=3)>-1&&ht.push(239,191,189);continue}else if(St+1===He){(ae-=3)>-1&&ht.push(239,191,189);continue}Ze=ge;continue}if(ge<56320){(ae-=3)>-1&&ht.push(239,191,189),Ze=ge;continue}ge=(Ze-55296<<10|ge-56320)+65536}else Ze&&(ae-=3)>-1&&ht.push(239,191,189);if(Ze=null,ge<128){if((ae-=1)<0)break;ht.push(ge)}else if(ge<2048){if((ae-=2)<0)break;ht.push(ge>>6|192,ge&63|128)}else if(ge<65536){if((ae-=3)<0)break;ht.push(ge>>12|224,ge>>6&63|128,ge&63|128)}else if(ge<1114112){if((ae-=4)<0)break;ht.push(ge>>18|240,ge>>12&63|128,ge>>6&63|128,ge&63|128)}else throw new Error("Invalid code point")}return ht}function Us(Ie){const ae=[];for(let ge=0;ge<Ie.length;++ge)ae.push(Ie.charCodeAt(ge)&255);return ae}function Jr(Ie,ae){let ge,He,Ze;const ht=[];for(let St=0;St<Ie.length&&!((ae-=2)<0);++St)ge=Ie.charCodeAt(St),He=ge>>8,Ze=ge%256,ht.push(Ze),ht.push(He);return ht}function Ti(Ie){return p.toByteArray(ts(Ie))}function Ye(Ie,ae,ge,He){let Ze;for(Ze=0;Ze<He&&!(Ze+ge>=ae.length||Ze>=Ie.length);++Ze)ae[Ze+ge]=Ie[Ze];return Ze}function Xe(Ie,ae){return Ie instanceof ae||Ie!=null&&Ie.constructor!=null&&Ie.constructor.name!=null&&Ie.constructor.name===ae.name}function lt(Ie){return Ie!==Ie}const tt=function(){const Ie="0123456789abcdef",ae=new Array(256);for(let ge=0;ge<16;++ge){const He=ge*16;for(let Ze=0;Ze<16;++Ze)ae[He+Ze]=Ie[ge]+Ie[Ze]}return ae}();function ot(Ie){return typeof BigInt>"u"?ct:Ie}function ct(){throw new Error("BigInt not supported")}},"./node_modules/css-loader/dist/runtime/api.js":ie=>{ie.exports=function(we){var P=[];return P.toString=function(){return this.map(function(S){var z="",K=typeof S[5]<"u";return S[4]&&(z+="@supports (".concat(S[4],") {")),S[2]&&(z+="@media ".concat(S[2]," {")),K&&(z+="@layer".concat(S[5].length>0?" ".concat(S[5]):""," {")),z+=we(S),K&&(z+="}"),S[2]&&(z+="}"),S[4]&&(z+="}"),z}).join("")},P.i=function(S,z,K,D,Q){typeof S=="string"&&(S=[[null,S,void 0]]);var V={};if(K)for(var T=0;T<this.length;T++){var F=this[T][0];F!=null&&(V[F]=!0)}for(var N=0;N<S.length;N++){var k=[].concat(S[N]);K&&V[k[0]]||(typeof Q<"u"&&(typeof k[5]>"u"||(k[1]="@layer".concat(k[5].length>0?" ".concat(k[5]):""," {").concat(k[1],"}")),k[5]=Q),z&&(k[2]&&(k[1]="@media ".concat(k[2]," {").concat(k[1],"}")),k[2]=z),D&&(k[4]?(k[1]="@supports (".concat(k[4],") {").concat(k[1],"}"),k[4]=D):k[4]="".concat(D)),P.push(k))}},P}},"./node_modules/css-loader/dist/runtime/getUrl.js":ie=>{ie.exports=function(we,P){return P||(P={}),we&&(we=String(we.__esModule?we.default:we),/^['"].*['"]$/.test(we)&&(we=we.slice(1,-1)),P.hash&&(we+=P.hash),/["'() \t\n]|(%20)/.test(we)||P.needQuotes?'"'.concat(we.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):we)}},"./node_modules/css-loader/dist/runtime/sourceMaps.js":ie=>{ie.exports=function(we){var P=we[1],p=we[3];if(!p)return P;if(typeof btoa=="function"){var S=btoa(unescape(encodeURIComponent(JSON.stringify(p)))),z="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(S),K="/*# ".concat(z," */");return[P].concat([K]).join(`
`)}return[P].join(`
`)}},"./node_modules/debug/src/browser.js":(ie,we,P)=>{we.formatArgs=S,we.save=z,we.load=K,we.useColors=p,we.storage=D(),we.destroy=(()=>{let V=!1;return()=>{V||(V=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),we.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function p(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function S(V){if(V[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+V[0]+(this.useColors?"%c ":" ")+"+"+ie.exports.humanize(this.diff),!this.useColors)return;const T="color: "+this.color;V.splice(1,0,T,"color: inherit");let F=0,N=0;V[0].replace(/%[a-zA-Z%]/g,k=>{k!=="%%"&&(F++,k==="%c"&&(N=F))}),V.splice(N,0,T)}we.log=console.debug||console.log||(()=>{});function z(V){try{V?we.storage.setItem("debug",V):we.storage.removeItem("debug")}catch{}}function K(){let V;try{V=we.storage.getItem("debug")}catch{}return!V&&typeof process<"u"&&"env"in process&&(V=O.DEBUG),V}function D(){try{return localStorage}catch{}}ie.exports=P("./node_modules/debug/src/common.js")(we);const{formatters:Q}=ie.exports;Q.j=function(V){try{return JSON.stringify(V)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}}},"./node_modules/debug/src/common.js":(ie,we,P)=>{function p(S){K.debug=K,K.default=K,K.coerce=N,K.disable=V,K.enable=Q,K.enabled=T,K.humanize=P("./node_modules/ms/index.js"),K.destroy=k,Object.keys(S).forEach(G=>{K[G]=S[G]}),K.names=[],K.skips=[],K.formatters={};function z(G){let Z=0;for(let ne=0;ne<G.length;ne++)Z=(Z<<5)-Z+G.charCodeAt(ne),Z|=0;return K.colors[Math.abs(Z)%K.colors.length]}K.selectColor=z;function K(G){let Z,ne=null,te,de;function oe(...ye){if(!oe.enabled)return;const Me=oe,Ne=Number(new Date),Pe=Ne-(Z||Ne);Me.diff=Pe,Me.prev=Z,Me.curr=Ne,Z=Ne,ye[0]=K.coerce(ye[0]),typeof ye[0]!="string"&&ye.unshift("%O");let Qe=0;ye[0]=ye[0].replace(/%([a-zA-Z%])/g,(ke,Ce)=>{if(ke==="%%")return"%";Qe++;const fe=K.formatters[Ce];if(typeof fe=="function"){const Oe=ye[Qe];ke=fe.call(Me,Oe),ye.splice(Qe,1),Qe--}return ke}),K.formatArgs.call(Me,ye),(Me.log||K.log).apply(Me,ye)}return oe.namespace=G,oe.useColors=K.useColors(),oe.color=K.selectColor(G),oe.extend=D,oe.destroy=K.destroy,Object.defineProperty(oe,"enabled",{enumerable:!0,configurable:!1,get:()=>ne!==null?ne:(te!==K.namespaces&&(te=K.namespaces,de=K.enabled(G)),de),set:ye=>{ne=ye}}),typeof K.init=="function"&&K.init(oe),oe}function D(G,Z){const ne=K(this.namespace+(typeof Z>"u"?":":Z)+G);return ne.log=this.log,ne}function Q(G){K.save(G),K.namespaces=G,K.names=[],K.skips=[];let Z;const ne=(typeof G=="string"?G:"").split(/[\s,]+/),te=ne.length;for(Z=0;Z<te;Z++)ne[Z]&&(G=ne[Z].replace(/\*/g,".*?"),G[0]==="-"?K.skips.push(new RegExp("^"+G.slice(1)+"$")):K.names.push(new RegExp("^"+G+"$")))}function V(){const G=[...K.names.map(F),...K.skips.map(F).map(Z=>"-"+Z)].join(",");return K.enable(""),G}function T(G){if(G[G.length-1]==="*")return!0;let Z,ne;for(Z=0,ne=K.skips.length;Z<ne;Z++)if(K.skips[Z].test(G))return!1;for(Z=0,ne=K.names.length;Z<ne;Z++)if(K.names[Z].test(G))return!0;return!1}function F(G){return G.toString().substring(2,G.toString().length-2).replace(/\.\*\?$/,"*")}function N(G){return G instanceof Error?G.stack||G.message:G}function k(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return K.enable(K.load()),K}ie.exports=p},"./node_modules/deep-assign/index.js":(ie,we,P)=>{var p=P("./node_modules/is-obj/index.js"),S=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;function K(V){if(V==null)throw new TypeError("Sources cannot be null or undefined");return Object(V)}function D(V,T,F){var N=T[F];if(N!=null){if(S.call(V,F)&&(V[F]===void 0||V[F]===null))throw new TypeError("Cannot convert undefined or null to object ("+F+")");!S.call(V,F)||!p(N)?V[F]=N:V[F]=Q(Object(V[F]),T[F])}}function Q(V,T){if(V===T)return V;T=Object(T);for(var F in T)S.call(T,F)&&D(V,T,F);if(Object.getOwnPropertySymbols)for(var N=Object.getOwnPropertySymbols(T),k=0;k<N.length;k++)z.call(T,N[k])&&D(V,T,N[k]);return V}ie.exports=function(T){T=K(T);for(var F=1;F<arguments.length;F++)Q(T,arguments[F]);return T}},"./node_modules/dtype/index.js":ie=>{ie.exports=function(we){switch(we){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},"./node_modules/global/window.js":(ie,we,P)=>{var p;typeof window<"u"?p=window:typeof P.g<"u"?p=P.g:typeof self<"u"?p=self:p={},ie.exports=p},"./node_modules/ieee754/index.js":(ie,we)=>{/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */we.read=function(P,p,S,z,K){var D,Q,V=K*8-z-1,T=(1<<V)-1,F=T>>1,N=-7,k=S?K-1:0,G=S?-1:1,Z=P[p+k];for(k+=G,D=Z&(1<<-N)-1,Z>>=-N,N+=V;N>0;D=D*256+P[p+k],k+=G,N-=8);for(Q=D&(1<<-N)-1,D>>=-N,N+=z;N>0;Q=Q*256+P[p+k],k+=G,N-=8);if(D===0)D=1-F;else{if(D===T)return Q?NaN:(Z?-1:1)*(1/0);Q=Q+Math.pow(2,z),D=D-F}return(Z?-1:1)*Q*Math.pow(2,D-z)},we.write=function(P,p,S,z,K,D){var Q,V,T,F=D*8-K-1,N=(1<<F)-1,k=N>>1,G=K===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=z?0:D-1,ne=z?1:-1,te=p<0||p===0&&1/p<0?1:0;for(p=Math.abs(p),isNaN(p)||p===1/0?(V=isNaN(p)?1:0,Q=N):(Q=Math.floor(Math.log(p)/Math.LN2),p*(T=Math.pow(2,-Q))<1&&(Q--,T*=2),Q+k>=1?p+=G/T:p+=G*Math.pow(2,1-k),p*T>=2&&(Q++,T/=2),Q+k>=N?(V=0,Q=N):Q+k>=1?(V=(p*T-1)*Math.pow(2,K),Q=Q+k):(V=p*Math.pow(2,k-1)*Math.pow(2,K),Q=0));K>=8;P[S+Z]=V&255,Z+=ne,V/=256,K-=8);for(Q=Q<<K|V,F+=K;F>0;P[S+Z]=Q&255,Z+=ne,Q/=256,F-=8);P[S+Z-ne]|=te*128}},"./node_modules/is-buffer/index.js":ie=>{/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */ie.exports=function(p){return p!=null&&(we(p)||P(p)||!!p._isBuffer)};function we(p){return!!p.constructor&&typeof p.constructor.isBuffer=="function"&&p.constructor.isBuffer(p)}function P(p){return typeof p.readFloatLE=="function"&&typeof p.slice=="function"&&we(p.slice(0,0))}},"./node_modules/is-function/index.js":ie=>{ie.exports=P;var we=Object.prototype.toString;function P(p){if(!p)return!1;var S=we.call(p);return S==="[object Function]"||typeof p=="function"&&S!=="[object RegExp]"||typeof window<"u"&&(p===window.setTimeout||p===window.alert||p===window.confirm||p===window.prompt)}},"./node_modules/is-obj/index.js":ie=>{ie.exports=function(we){var P=typeof we;return we!==null&&(P==="object"||P==="function")}},"./node_modules/layout-bmfont-text/index.js":(ie,we,P)=>{var p=P("./node_modules/word-wrapper/index.js"),S=P("./node_modules/xtend/immutable.js"),z=P("./node_modules/as-number/index.js"),K=["x","e","a","o","n","s","r","c","u","m","v","w","z"],D=["m","w"],Q=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],V=9,T=32,F=0,N=1,k=2;ie.exports=function(De){return new G(De)};function G(Qe){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(Qe)}G.prototype.update=function(Qe){if(Qe=S({measure:this._measure},Qe),this._opt=Qe,this._opt.tabSize=z(this._opt.tabSize,4),!Qe.font)throw new Error("must provide a valid bitmap font");var De=this.glyphs,ke=Qe.text||"",Ce=Qe.font;this._setupSpaceGlyphs(Ce);var fe=p.lines(ke,Qe),Oe=Qe.width||0;De.length=0;var Te=fe.reduce(function(Qi,sn){return Math.max(Qi,sn.width,Oe)},0),Ve=0,st=0,dt=z(Qe.lineHeight,Ce.common.lineHeight),Mt=Ce.common.base,Rt=dt-Mt,Yt=Qe.letterSpacing||0,zt=dt*fe.length-Rt,Ci=Ne(this._opt.align);st-=zt,this._width=Te,this._height=zt,this._descender=dt-Mt,this._baseline=Mt,this._xHeight=de(Ce),this._capHeight=ye(Ce),this._lineHeight=dt,this._ascender=dt-Rt-this._xHeight;var ci=this;fe.forEach(function(Qi,sn){for(var In=Qi.start,Xn=Qi.end,tr=Qi.width,Jn,bn=In;bn<Xn;bn++){var cr=ke.charCodeAt(bn),Ir=ci.getGlyph(Ce,cr);if(Ir){Jn&&(Ve+=Me(Ce,Jn.id,Ir.id));var je=Ve;Ci===N?je+=(Te-tr)/2:Ci===k&&(je+=Te-tr),De.push({position:[je,st],data:Ir,index:bn,line:sn}),Ve+=Ir.xadvance+Yt,Jn=Ir}}st+=dt,Ve=0}),this._linesTotal=fe.length},G.prototype._setupSpaceGlyphs=function(Qe){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,!(!Qe.chars||Qe.chars.length===0)){var De=te(Qe,T)||oe(Qe)||Qe.chars[0],ke=this._opt.tabSize*De.xadvance;this._fallbackSpaceGlyph=De,this._fallbackTabGlyph=S(De,{x:0,y:0,xadvance:ke,id:V,xoffset:0,yoffset:0,width:0,height:0})}},G.prototype.getGlyph=function(Qe,De){var ke=te(Qe,De);return ke||(De===V?this._fallbackTabGlyph:De===T?this._fallbackSpaceGlyph:null)},G.prototype.computeMetrics=function(Qe,De,ke,Ce){var fe=this._opt.letterSpacing||0,Oe=this._opt.font,Te=0,Ve=0,st=0,dt,Mt;if(!Oe.chars||Oe.chars.length===0)return{start:De,end:De,width:0};ke=Math.min(Qe.length,ke);for(var Rt=De;Rt<ke;Rt++){var Yt=Qe.charCodeAt(Rt),dt=this.getGlyph(Oe,Yt);if(dt){dt.xoffset;var zt=Mt?Me(Oe,Mt.id,dt.id):0;Te+=zt;var Ci=Te+dt.xadvance+fe,ci=Te+dt.width;if(ci>=Ce||Ci>=Ce)break;Te=Ci,Ve=ci,Mt=dt}st++}return Mt&&(Ve+=Mt.xoffset),{start:De,end:De+st,width:Ve}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(Z);function Z(Qe){Object.defineProperty(G.prototype,Qe,{get:ne(Qe),configurable:!0})}function ne(Qe){return new Function(["return function "+Qe+"() {","  return this._"+Qe,"}"].join(`
`))()}function te(Qe,De){if(!Qe.chars||Qe.chars.length===0)return null;var ke=Pe(Qe.chars,De);return ke>=0?Qe.chars[ke]:null}function de(Qe){for(var De=0;De<K.length;De++){var ke=K[De].charCodeAt(0),Ce=Pe(Qe.chars,ke);if(Ce>=0)return Qe.chars[Ce].height}return 0}function oe(Qe){for(var De=0;De<D.length;De++){var ke=D[De].charCodeAt(0),Ce=Pe(Qe.chars,ke);if(Ce>=0)return Qe.chars[Ce]}return 0}function ye(Qe){for(var De=0;De<Q.length;De++){var ke=Q[De].charCodeAt(0),Ce=Pe(Qe.chars,ke);if(Ce>=0)return Qe.chars[Ce].height}return 0}function Me(Qe,De,ke){if(!Qe.kernings||Qe.kernings.length===0)return 0;for(var Ce=Qe.kernings,fe=0;fe<Ce.length;fe++){var Oe=Ce[fe];if(Oe.first===De&&Oe.second===ke)return Oe.amount}return 0}function Ne(Qe){return Qe==="center"?N:Qe==="right"?k:F}function Pe(Qe,De,ke){ke=ke||0;for(var Ce=ke;Ce<Qe.length;Ce++)if(Qe[Ce].id===De)return Ce;return-1}},"./node_modules/load-bmfont/browser.js":(ie,we,P)=>{var p=P("./node_modules/buffer/index.js").Buffer,S=P("./node_modules/xhr/index.js"),z=function(){},K=P("./node_modules/parse-bmfont-ascii/index.js"),D=P("./node_modules/parse-bmfont-xml/lib/browser.js"),Q=P("./node_modules/parse-bmfont-binary/index.js"),V=P("./node_modules/load-bmfont/lib/is-binary.js"),T=P("./node_modules/xtend/immutable.js"),F=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();ie.exports=function(G,Z){Z=typeof Z=="function"?Z:z,typeof G=="string"?G={uri:G}:G||(G={});var ne=G.binary;ne&&(G=k(G)),S(G,function(te,de,oe){if(te)return Z(te);if(!/^2/.test(de.statusCode))return Z(new Error("http status code: "+de.statusCode));if(!oe)return Z(new Error("no body result"));var ye=!1;if(N(oe)){var Me=new Uint8Array(oe);oe=p.from(Me,"binary")}V(oe)&&(ye=!0,typeof oe=="string"&&(oe=p.from(oe,"binary"))),ye||(p.isBuffer(oe)&&(oe=oe.toString(G.encoding)),oe=oe.trim());var Ne;try{var Pe=de.headers["content-type"];ye?Ne=Q(oe):/json/.test(Pe)||oe.charAt(0)==="{"?Ne=JSON.parse(oe):/xml/.test(Pe)||oe.charAt(0)==="<"?Ne=D(oe):Ne=K(oe)}catch(Qe){Z(new Error("error parsing font "+Qe.message)),Z=z}Z(null,Ne)})};function N(G){var Z=Object.prototype.toString;return Z.call(G)==="[object ArrayBuffer]"}function k(G){if(F)return T(G,{responseType:"arraybuffer"});if(typeof self.XMLHttpRequest>"u")throw new Error("your browser does not support XHR loading");var Z=new self.XMLHttpRequest;return Z.overrideMimeType("text/plain; charset=x-user-defined"),T({xhr:Z},G)}},"./node_modules/load-bmfont/lib/is-binary.js":(ie,we,P)=>{var p=P("./node_modules/buffer/index.js").Buffer,S=P("./node_modules/buffer-equal/index.js"),z=p.from([66,77,70,3]);ie.exports=function(K){return typeof K=="string"?K.substring(0,3)==="BMF":K.length>4&&S(K.slice(0,4),z)}},"./node_modules/ms/index.js":ie=>{var we=1e3,P=we*60,p=P*60,S=p*24,z=S*7,K=S*365.25;ie.exports=function(F,N){N=N||{};var k=typeof F;if(k==="string"&&F.length>0)return D(F);if(k==="number"&&isFinite(F))return N.long?V(F):Q(F);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(F))};function D(F){if(F=String(F),!(F.length>100)){var N=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(F);if(N){var k=parseFloat(N[1]),G=(N[2]||"ms").toLowerCase();switch(G){case"years":case"year":case"yrs":case"yr":case"y":return k*K;case"weeks":case"week":case"w":return k*z;case"days":case"day":case"d":return k*S;case"hours":case"hour":case"hrs":case"hr":case"h":return k*p;case"minutes":case"minute":case"mins":case"min":case"m":return k*P;case"seconds":case"second":case"secs":case"sec":case"s":return k*we;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return k;default:return}}}}function Q(F){var N=Math.abs(F);return N>=S?Math.round(F/S)+"d":N>=p?Math.round(F/p)+"h":N>=P?Math.round(F/P)+"m":N>=we?Math.round(F/we)+"s":F+"ms"}function V(F){var N=Math.abs(F);return N>=S?T(F,N,S,"day"):N>=p?T(F,N,p,"hour"):N>=P?T(F,N,P,"minute"):N>=we?T(F,N,we,"second"):F+" ms"}function T(F,N,k,G){var Z=N>=k*1.5;return Math.round(F/k)+" "+G+(Z?"s":"")}},"./node_modules/parse-bmfont-ascii/index.js":ie=>{ie.exports=function(z){if(!z)throw new Error("no data provided");z=z.toString().trim();var K={pages:[],chars:[],kernings:[]},D=z.split(/\r\n?|\n/g);if(D.length===0)throw new Error("no data in BMFont file");for(var Q=0;Q<D.length;Q++){var V=we(D[Q],Q);if(V)if(V.key==="page"){if(typeof V.data.id!="number")throw new Error("malformed file at line "+Q+" -- needs page id=N");if(typeof V.data.file!="string")throw new Error("malformed file at line "+Q+' -- needs page file="path"');K.pages[V.data.id]=V.data.file}else V.key==="chars"||V.key==="kernings"||(V.key==="char"?K.chars.push(V.data):V.key==="kerning"?K.kernings.push(V.data):K[V.key]=V.data)}return K};function we(S,z){if(S=S.replace(/\t+/g," ").trim(),!S)return null;var K=S.indexOf(" ");if(K===-1)throw new Error("no named row at line "+z);var D=S.substring(0,K);S=S.substring(K+1),S=S.replace(/letter=[\'\"]\S+[\'\"]/gi,""),S=S.split("="),S=S.map(function(N){return N.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var Q=[],V=0;V<S.length;V++){var T=S[V];V===0?Q.push({key:T[0],data:""}):V===S.length-1?Q[Q.length-1].data=P(T[0]):(Q[Q.length-1].data=P(T[0]),Q.push({key:T[1],data:""}))}var F={key:D,data:{}};return Q.forEach(function(N){F.data[N.key]=N.data}),F}function P(S){return!S||S.length===0?"":S.indexOf('"')===0||S.indexOf("'")===0?S.substring(1,S.length-1):S.indexOf(",")!==-1?p(S):parseInt(S,10)}function p(S){return S.split(",").map(function(z){return parseInt(z,10)})}},"./node_modules/parse-bmfont-binary/index.js":ie=>{var we=[66,77,70];ie.exports=function(F){if(F.length<6)throw new Error("invalid buffer length for BMFont");var N=we.every(function(te,de){return F.readUInt8(de)===te});if(!N)throw new Error("BMFont missing BMF byte header");var k=3,G=F.readUInt8(k++);if(G>3)throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var Z={kernings:[],chars:[]},ne=0;ne<5;ne++)k+=P(Z,F,k);return Z};function P(T,F,N){if(N>F.length-1)return 0;var k=F.readUInt8(N++),G=F.readInt32LE(N);switch(N+=4,k){case 1:T.info=p(F,N);break;case 2:T.common=S(F,N);break;case 3:T.pages=z(F,N,G);break;case 4:T.chars=K(F,N,G);break;case 5:T.kernings=D(F,N,G);break}return 5+G}function p(T,F){var N={};N.size=T.readInt16LE(F);var k=T.readUInt8(F+2);return N.smooth=k>>7&1,N.unicode=k>>6&1,N.italic=k>>5&1,N.bold=k>>4&1,k>>3&1&&(N.fixedHeight=1),N.charset=T.readUInt8(F+3)||"",N.stretchH=T.readUInt16LE(F+4),N.aa=T.readUInt8(F+6),N.padding=[T.readInt8(F+7),T.readInt8(F+8),T.readInt8(F+9),T.readInt8(F+10)],N.spacing=[T.readInt8(F+11),T.readInt8(F+12)],N.outline=T.readUInt8(F+13),N.face=V(T,F+14),N}function S(T,F){var N={};return N.lineHeight=T.readUInt16LE(F),N.base=T.readUInt16LE(F+2),N.scaleW=T.readUInt16LE(F+4),N.scaleH=T.readUInt16LE(F+6),N.pages=T.readUInt16LE(F+8),T.readUInt8(F+10),N.packed=0,N.alphaChnl=T.readUInt8(F+11),N.redChnl=T.readUInt8(F+12),N.greenChnl=T.readUInt8(F+13),N.blueChnl=T.readUInt8(F+14),N}function z(T,F,N){for(var k=[],G=Q(T,F),Z=G.length+1,ne=N/Z,te=0;te<ne;te++)k[te]=T.slice(F,F+G.length).toString("utf8"),F+=Z;return k}function K(T,F,N){for(var k=[],G=N/20,Z=0;Z<G;Z++){var ne={},te=Z*20;ne.id=T.readUInt32LE(F+0+te),ne.x=T.readUInt16LE(F+4+te),ne.y=T.readUInt16LE(F+6+te),ne.width=T.readUInt16LE(F+8+te),ne.height=T.readUInt16LE(F+10+te),ne.xoffset=T.readInt16LE(F+12+te),ne.yoffset=T.readInt16LE(F+14+te),ne.xadvance=T.readInt16LE(F+16+te),ne.page=T.readUInt8(F+18+te),ne.chnl=T.readUInt8(F+19+te),k[Z]=ne}return k}function D(T,F,N){for(var k=[],G=N/10,Z=0;Z<G;Z++){var ne={},te=Z*10;ne.first=T.readUInt32LE(F+0+te),ne.second=T.readUInt32LE(F+4+te),ne.amount=T.readInt16LE(F+8+te),k[Z]=ne}return k}function Q(T,F){for(var N=F;N<T.length&&T[N]!==0;N++);return T.slice(F,N)}function V(T,F){return Q(T,F).toString("utf8")}},"./node_modules/parse-bmfont-xml/lib/browser.js":(ie,we,P)=>{var p=P("./node_modules/parse-bmfont-xml/lib/parse-attribs.js"),S=P("./node_modules/xml-parse-from-string/index.js"),z={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};ie.exports=function(T){T=T.toString();var F=S(T),N={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(oe){var ye=F.getElementsByTagName(oe)[0];ye&&(N[oe]=p(K(ye)))});var k=F.getElementsByTagName("pages")[0];if(!k)throw new Error("malformed file -- no <pages> element");for(var G=k.getElementsByTagName("page"),Z=0;Z<G.length;Z++){var ne=G[Z],te=parseInt(ne.getAttribute("id"),10),de=ne.getAttribute("file");if(isNaN(te))throw new Error('malformed file -- page "id" attribute is NaN');if(!de)throw new Error('malformed file -- needs page "file" attribute');N.pages[parseInt(te,10)]=de}return["chars","kernings"].forEach(function(oe){var ye=F.getElementsByTagName(oe)[0];if(ye)for(var Me=oe.substring(0,oe.length-1),Ne=ye.getElementsByTagName(Me),Pe=0;Pe<Ne.length;Pe++){var Qe=Ne[Pe];N[oe].push(p(K(Qe)))}}),N};function K(V){var T=D(V);return T.reduce(function(F,N){var k=Q(N.nodeName);return F[k]=N.nodeValue,F},{})}function D(V){for(var T=[],F=0;F<V.attributes.length;F++)T.push(V.attributes[F]);return T}function Q(V){return z[V.toLowerCase()]||V}},"./node_modules/parse-bmfont-xml/lib/parse-attribs.js":ie=>{var we="chasrset";ie.exports=function(S){we in S&&(S.charset=S[we],delete S[we]);for(var z in S)z==="face"||z==="charset"||(z==="padding"||z==="spacing"?S[z]=P(S[z]):S[z]=parseInt(S[z],10));return S};function P(p){return p.split(",").map(function(S){return parseInt(S,10)})}},"./node_modules/parse-headers/parse-headers.js":ie=>{var we=function(p){return p.replace(/^\s+|\s+$/g,"")},P=function(p){return Object.prototype.toString.call(p)==="[object Array]"};ie.exports=function(p){if(!p)return{};for(var S={},z=we(p).split(`
`),K=0;K<z.length;K++){var D=z[K],Q=D.indexOf(":"),V=we(D.slice(0,Q)).toLowerCase(),T=we(D.slice(Q+1));typeof S[V]>"u"?S[V]=T:P(S[V])?S[V].push(T):S[V]=[S[V],T]}return S}},"./node_modules/quad-indices/index.js":(ie,we,P)=>{var p=P("./node_modules/dtype/index.js"),S=P("./node_modules/an-array/index.js"),z=P("./node_modules/is-buffer/index.js"),K=[0,2,3],D=[2,1,3];ie.exports=function(V,T){(!V||!(S(V)||z(V)))&&(T=V||{},V=null),typeof T=="number"?T={count:T}:T=T||{};for(var F=typeof T.type=="string"?T.type:"uint16",N=typeof T.count=="number"?T.count:1,k=T.start||0,G=T.clockwise!==!1?K:D,Z=G[0],ne=G[1],te=G[2],de=N*6,oe=V||new(p(F))(de),ye=0,Me=0;ye<de;ye+=6,Me+=4){var Ne=ye+k;oe[Ne+0]=Me+0,oe[Ne+1]=Me+1,oe[Ne+2]=Me+2,oe[Ne+3]=Me+Z,oe[Ne+4]=Me+ne,oe[Ne+5]=Me+te}return oe}},"./node_modules/super-animejs/lib/anime.es.js":(ie,we,P)=>{P.r(we),P.d(we,{default:()=>ua});var p={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},S={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},z=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective"],K={CSS:{},springs:{}};function D($e,At,Pt){return Math.min(Math.max($e,At),Pt)}function Q($e,At){return $e.indexOf(At)>-1}function V($e,At){return $e.apply(null,At)}var T=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,F=/^rgb/,N=/^hsl/,k={arr:function($e){return Array.isArray($e)},obj:function($e){return Q(Object.prototype.toString.call($e),"Object")},pth:function($e){return k.obj($e)&&$e.hasOwnProperty("totalLength")},svg:function($e){return $e instanceof SVGElement},inp:function($e){return $e instanceof HTMLInputElement},dom:function($e){return $e.nodeType||k.svg($e)},str:function($e){return typeof $e=="string"},fnc:function($e){return typeof $e=="function"},und:function($e){return typeof $e>"u"},hex:function($e){return T.test($e)},rgb:function($e){return F.test($e)},hsl:function($e){return N.test($e)},col:function($e){return k.hex($e)||k.rgb($e)||k.hsl($e)},key:function($e){return!p.hasOwnProperty($e)&&!S.hasOwnProperty($e)&&$e!=="targets"&&$e!=="keyframes"}},G=/\(([^)]+)\)/;function Z($e){var At=G.exec($e);return At?At[1].split(",").map(function(Pt){return parseFloat(Pt)}):[]}function ne($e,At){var Pt=Z($e),si=D(k.und(Pt[0])?1:Pt[0],.1,100),kt=D(k.und(Pt[1])?100:Pt[1],.1,100),di=D(k.und(Pt[2])?10:Pt[2],.1,100),Ii=D(k.und(Pt[3])?0:Pt[3],.1,100),pn=Math.sqrt(kt/si),nn=di/(2*Math.sqrt(kt*si)),hi=nn<1?pn*Math.sqrt(1-nn*nn):0,Tn=1,Bn=nn<1?(nn*pn+-Ii)/hi:-Ii+pn;function Dn(Kn){var or=At?At*Kn/1e3:Kn;return nn<1?or=Math.exp(-or*nn*pn)*(Tn*Math.cos(hi*or)+Bn*Math.sin(hi*or)):or=(Tn+Bn*or)*Math.exp(-or*pn),Kn===0||Kn===1?Kn:1-or}function ns(){var Kn=K.springs[$e];if(Kn)return Kn;for(var or=1/6,br=0,gs=0;;)if(br+=or,Dn(br)===1){if(gs++,gs>=16)break}else gs=0;var bs=br*or*1e3;return K.springs[$e]=bs,bs}return At?Dn:ns}function te($e,At){$e===void 0&&($e=1),At===void 0&&(At=.5);var Pt=D($e,1,10),si=D(At,.1,2);return function(kt){return kt===0||kt===1?kt:-Pt*Math.pow(2,10*(kt-1))*Math.sin((kt-1-si/(Math.PI*2)*Math.asin(1/Pt))*(Math.PI*2)/si)}}function de($e){return $e===void 0&&($e=10),function(At){return Math.round(At*$e)*(1/$e)}}var oe=function(){var $e=11,At=1/($e-1);function Pt(Tn,Bn){return 1-3*Bn+3*Tn}function si(Tn,Bn){return 3*Bn-6*Tn}function kt(Tn){return 3*Tn}function di(Tn,Bn,Dn){return((Pt(Bn,Dn)*Tn+si(Bn,Dn))*Tn+kt(Bn))*Tn}function Ii(Tn,Bn,Dn){return 3*Pt(Bn,Dn)*Tn*Tn+2*si(Bn,Dn)*Tn+kt(Bn)}function pn(Tn,Bn,Dn,ns,Kn){var or,br,gs=0;do br=Bn+(Dn-Bn)/2,or=di(br,ns,Kn)-Tn,or>0?Dn=br:Bn=br;while(Math.abs(or)>1e-7&&++gs<10);return br}function nn(Tn,Bn,Dn,ns){for(var Kn=0;Kn<4;++Kn){var or=Ii(Bn,Dn,ns);if(or===0)return Bn;var br=di(Bn,Dn,ns)-Tn;Bn-=br/or}return Bn}function hi(Tn,Bn,Dn,ns){if(!(0<=Tn&&Tn<=1&&0<=Dn&&Dn<=1))return;var Kn=new Float32Array($e);if(Tn!==Bn||Dn!==ns)for(var or=0;or<$e;++or)Kn[or]=di(or*At,Tn,Dn);function br(gs){for(var bs=0,rn=1,$n=$e-1;rn!==$n&&Kn[rn]<=gs;++rn)bs+=At;--rn;var as=(gs-Kn[rn])/(Kn[rn+1]-Kn[rn]),Or=bs+as*At,_e=Ii(Or,Tn,Dn);return _e>=.001?nn(gs,Or,Tn,Dn):_e===0?Or:pn(gs,bs,bs+At,Tn,Dn)}return function(gs){return Tn===Bn&&Dn===ns||gs===0||gs===1?gs:di(br(gs),Bn,ns)}}return hi}(),ye=function(){var $e=["Quad","Cubic","Quart","Quint","Sine","Expo","Circ","Back","Elastic"],At={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],te],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(Ii,pn){return function(nn){return 1-te(Ii,pn)(1-nn)}}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(Ii,pn){return function(nn){return nn<.5?te(Ii,pn)(nn*2)/2:1-te(Ii,pn)(nn*-2+2)/2}}]},Pt={linear:[.25,.25,.75,.75]};for(var si in At)for(var kt=0,di=At[si].length;kt<di;kt++)Pt["ease"+si+$e[kt]]=At[si][kt];return Pt}();function Me($e,At){if(k.fnc($e))return $e;var Pt=$e.split("(")[0],si=ye[Pt],kt=Z($e);switch(Pt){case"spring":return ne($e,At);case"cubicBezier":return V(oe,kt);case"steps":return V(de,kt);default:return k.fnc(si)?V(si,kt):V(oe,si)}}function Ne($e){try{var At=document.querySelectorAll($e);return At}catch{return}}var Pe=[];function Qe($e,At){for(var Pt=Pe,si=$e.length,kt=arguments.length>=2?arguments[1]:void 0,di=0;di<si;di++)if(di in $e){var Ii=$e[di];At.call(kt,Ii,di,$e)&&Pt.push(Ii)}return Pe=$e,Pe.length=0,Pt}function De($e,At){At||(At=[]);for(var Pt=0,si=$e.length;Pt<si;Pt++){var kt=$e[Pt];Array.isArray(kt)?De(kt,At):At.push(kt)}return At}function ke($e){return k.arr($e)?$e:(k.str($e)&&($e=Ne($e)||$e),$e instanceof NodeList||$e instanceof HTMLCollection?[].slice.call($e):[$e])}function Ce($e,At){return $e.some(function(Pt){return Pt===At})}function fe($e){var At={};for(var Pt in $e)At[Pt]=$e[Pt];return At}function Oe($e,At){var Pt=fe($e);for(var si in $e)Pt[si]=At.hasOwnProperty(si)?At[si]:$e[si];return Pt}function Te($e,At){var Pt=fe($e);for(var si in At)Pt[si]=k.und($e[si])?At[si]:$e[si];return Pt}var Ve=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g;function st($e){var At=Ve.exec($e);return At?"rgba("+At[1]+",1)":$e}var dt=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Mt=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;function Rt($e){var At=$e.replace(dt,function(Ii,pn,nn,hi){return pn+pn+nn+nn+hi+hi}),Pt=Mt.exec(At),si=parseInt(Pt[1],16),kt=parseInt(Pt[2],16),di=parseInt(Pt[3],16);return"rgba("+si+","+kt+","+di+",1)"}var Yt=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g,zt=/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g;function Ci($e){var At=Yt.exec($e)||zt.exec($e),Pt=parseInt(At[1],10)/360,si=parseInt(At[2],10)/100,kt=parseInt(At[3],10)/100,di=At[4]||1;function Ii(Dn,ns,Kn){return Kn<0&&(Kn+=1),Kn>1&&(Kn-=1),Kn<.16666666666666666?Dn+(ns-Dn)*6*Kn:Kn<.5?ns:Kn<.6666666666666666?Dn+(ns-Dn)*(.6666666666666666-Kn)*6:Dn}var pn,nn,hi;if(si==0)pn=nn=hi=kt;else{var Tn=kt<.5?kt*(1+si):kt+si-kt*si,Bn=2*kt-Tn;pn=Ii(Bn,Tn,Pt+.3333333333333333),nn=Ii(Bn,Tn,Pt),hi=Ii(Bn,Tn,Pt-.3333333333333333)}return"rgba("+pn*255+","+nn*255+","+hi*255+","+di+")"}function ci($e){if(k.rgb($e))return st($e);if(k.hex($e))return Rt($e);if(k.hsl($e))return Ci($e)}var Qi=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/;function sn($e){var At=Qi.exec($e);if(At)return At[2]}function In($e){if(Q($e,"translate")||$e==="perspective")return"px";if(Q($e,"rotate")||Q($e,"skew"))return"deg"}function Xn($e,At){return k.fnc($e)?$e(At.target,At.id,At.total):$e}function tr($e,At){return $e.getAttribute(At)}function Jn($e,At,Pt){var si=sn(At);if(Ce([Pt,"deg","rad","turn"],si))return At;var kt=K.CSS[At+Pt];if(!k.und(kt))return kt;var di=100,Ii=document.createElement($e.tagName),pn=$e.parentNode&&$e.parentNode!==document?$e.parentNode:document.body;pn.appendChild(Ii),Ii.style.position="absolute",Ii.style.width=di+Pt;var nn=di/Ii.offsetWidth;pn.removeChild(Ii);var hi=nn*parseFloat(At);return K.CSS[At+Pt]=hi,hi}function bn($e,At,Pt){if(At in $e.style){var si=At.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),kt=$e.style[At]||getComputedStyle($e).getPropertyValue(si)||"0";return Pt?Jn($e,kt,Pt):kt}}function cr($e,At){if(k.dom($e)&&!k.inp($e)&&(tr($e,At)||k.svg($e)&&$e[At]))return"attribute";if(k.dom($e)&&Ce(z,At))return"transform";if(k.dom($e)&&At!=="transform"&&bn($e,At))return"css";if($e[At]!=null)return"object"}var Ir=/(\w+)\(([^)]*)\)/g;function je($e){if(k.dom($e)){for(var At=$e.style.transform||"",Pt=new Map,si;si=Ir.exec(At);)Pt.set(si[1],si[2]);return Pt}}function xs($e,At,Pt,si){var kt=Q(At,"scale")?1:0+In(At),di=je($e).get(At)||kt;return Pt&&(Pt.transforms.list.set(At,di),Pt.transforms.last=At),si?Jn($e,di,si):di}function mr($e,At,Pt,si){switch(cr($e,At)){case"transform":return xs($e,At,si,Pt);case"css":return bn($e,At,Pt);case"attribute":return tr($e,At);default:return $e[At]||0}}var Wn=/^(\*=|\+=|-=)/;function Ms($e,At){var Pt=Wn.exec($e);if(!Pt)return $e;var si=sn($e)||0,kt=parseFloat(At),di=parseFloat($e.replace(Pt[0],""));switch(Pt[0][0]){case"+":return kt+di+si;case"-":return kt-di+si;case"*":return kt*di+si}}var ts=/\s/g;function Co($e,At){if(k.col($e))return ci($e);var Pt=sn($e),si=Pt?$e.substr(0,$e.length-Pt.length):$e;return At&&!ts.test($e)?si+At:si}function Us($e,At){return Math.sqrt(Math.pow(At.x-$e.x,2)+Math.pow(At.y-$e.y,2))}function Jr($e){return Math.PI*2*tr($e,"r")}function Ti($e){return tr($e,"width")*2+tr($e,"height")*2}function Ye($e){return Us({x:tr($e,"x1"),y:tr($e,"y1")},{x:tr($e,"x2"),y:tr($e,"y2")})}function Xe($e){for(var At=$e.points,Pt=0,si,kt=0;kt<At.numberOfItems;kt++){var di=At.getItem(kt);kt>0&&(Pt+=Us(si,di)),si=di}return Pt}function lt($e){var At=$e.points;return Xe($e)+Us(At.getItem(At.numberOfItems-1),At.getItem(0))}function tt($e){if($e.getTotalLength)return $e.getTotalLength();switch($e.tagName.toLowerCase()){case"circle":return Jr($e);case"rect":return Ti($e);case"line":return Ye($e);case"polyline":return Xe($e);case"polygon":return lt($e)}}function ot($e){var At=tt($e);return $e.setAttribute("stroke-dasharray",At),At}function ct($e){for(var At=$e.parentNode;k.svg(At)&&(At=At.parentNode,!!k.svg(At.parentNode)););return At}function Ie($e,At){var Pt=At||{},si=Pt.el||ct($e),kt=si.getBoundingClientRect(),di=tr(si,"viewBox"),Ii=kt.width,pn=kt.height,nn=Pt.viewBox||(di?di.split(" "):[0,0,Ii,pn]);return{el:si,viewBox:nn,x:nn[0]/1,y:nn[1]/1,w:Ii/nn[2],h:pn/nn[3]}}function ae($e,At){var Pt=k.str($e)?Ne($e)[0]:$e,si=At||100;return function(kt){return{property:kt,el:Pt,svg:Ie(Pt),totalLength:tt(Pt)*(si/100)}}}function ge($e,At){function Pt(pn){pn===void 0&&(pn=0);var nn=At+pn>=1?At+pn:0;return $e.el.getPointAtLength(nn)}var si=Ie($e.el,$e.svg),kt=Pt(),di=Pt(-1),Ii=Pt(1);switch($e.property){case"x":return(kt.x-si.x)*si.w;case"y":return(kt.y-si.y)*si.h;case"angle":return Math.atan2(Ii.y-di.y,Ii.x-di.x)*180/Math.PI}}var He=/-?\d*\.?\d+/g;function Ze($e,At){var Pt=Co(k.pth($e)?$e.totalLength:$e,At)+"";return{original:Pt,numbers:Pt.match(He)?Pt.match(He).map(Number):[0],strings:k.str($e)||At?Pt.split(He):[]}}function ht($e){var At=$e?De(k.arr($e)?$e.map(ke):ke($e)):[];return Qe(At,function(Pt,si,kt){return kt.indexOf(Pt)===si})}function St($e){var At=ht($e);return At.map(function(Pt,si){return{target:Pt,id:si,total:At.length,transforms:{list:je(Pt)}}})}var Di=/^spring/;function Wi($e,At){var Pt=fe(At);if(Di.test(Pt.easing)&&(Pt.duration=ne(Pt.easing)),k.arr($e)){var si=$e.length,kt=si===2&&!k.obj($e[0]);kt?$e={value:$e}:k.fnc(At.duration)||(Pt.duration=At.duration/si)}var di=k.arr($e)?$e:[$e];return di.map(function(Ii,pn){var nn=k.obj(Ii)&&!k.pth(Ii)?Ii:{value:Ii};return k.und(nn.delay)&&(nn.delay=pn?0:At.delay),k.und(nn.endDelay)&&(nn.endDelay=pn===di.length-1?At.endDelay:0),nn}).map(function(Ii){return Te(Ii,Pt)})}function Oi($e){for(var At=Qe(De($e.map(function(di){return Object.keys(di)})),function(di){return k.key(di)}).reduce(function(di,Ii){return di.indexOf(Ii)<0&&di.push(Ii),di},[]),Pt={},si=function(di){var Ii=At[di];Pt[Ii]=$e.map(function(pn){var nn={};for(var hi in pn)k.key(hi)?hi==Ii&&(nn.value=pn[hi]):nn[hi]=pn[hi];return nn})},kt=0;kt<At.length;kt++)si(kt);return Pt}function Ui($e,At){var Pt=[],si=At.keyframes;si&&(At=Te(Oi(si),At));for(var kt in At)k.key(kt)&&Pt.push({name:kt,tweens:Wi(At[kt],$e)});return Pt}function Ji($e,At){var Pt={};for(var si in $e){var kt=Xn($e[si],At);k.arr(kt)&&(kt=kt.map(function(di){return Xn(di,At)}),kt.length===1&&(kt=kt[0])),Pt[si]=kt}return Pt.duration=parseFloat(Pt.duration),Pt.delay=parseFloat(Pt.delay),Pt}function Ss($e,At){var Pt;return $e.tweens.map(function(si){var kt=Ji(si,At),di=kt.value,Ii=k.arr(di)?di[1]:di,pn=sn(Ii),nn=mr(At.target,$e.name,pn,At),hi=Pt?Pt.to.original:nn,Tn=k.arr(di)?di[0]:hi,Bn=sn(Tn)||sn(nn),Dn=pn||Bn;return k.und(Ii)&&(Ii=hi),kt.from=Ze(Tn,Dn),kt.to=Ze(Ms(Ii,Tn),Dn),kt.start=Pt?Pt.end:0,kt.end=kt.start+kt.delay+kt.duration+kt.endDelay,kt.easing=Me(kt.easing,kt.duration),kt.isPath=k.pth(di),kt.isColor=k.col(kt.from.original),kt.isColor&&(kt.round=1),Pt=kt,kt})}var kn={css:function($e,At,Pt){return $e.style[At]=Pt},attribute:function($e,At,Pt){return $e.setAttribute(At,Pt)},object:function($e,At,Pt){return $e[At]=Pt},transform:function($e,At,Pt,si,kt){if(si.list.set(At,Pt),At===si.last||kt){var di="";si.list.forEach(function(Ii,pn){di+=pn+"("+Ii+") "}),$e.style.transform=di}}};function Jt($e,At){for(var Pt=St($e),si=0,kt=Pt.length;si<kt;si++){var di=Pt[si];for(var Ii in At){var pn=Xn(At[Ii],di),nn=di.target,hi=sn(pn),Tn=mr(nn,Ii,hi,di),Bn=hi||sn(Tn),Dn=Ms(Co(pn,Bn),Tn),ns=cr(nn,Ii);kn[ns](nn,Ii,Dn,di.transforms,!0)}}}function Dr($e,At){var Pt=cr($e.target,At.name);if(Pt){var si=Ss(At,$e),kt=si[si.length-1];return{type:Pt,property:At.name,animatable:$e,tweens:si,duration:kt.end,delay:si[0].delay,endDelay:kt.endDelay}}}function Pr($e,At){return Qe(De($e.map(function(Pt){return At.map(function(si){return Dr(Pt,si)})})),function(Pt){return!k.und(Pt)})}function Hs($e,At){var Pt=$e.length,si=function(di){return di.timelineOffset?di.timelineOffset:0},kt={};return kt.duration=Pt?Math.max.apply(Math,$e.map(function(di){return si(di)+di.duration})):At.duration,kt.delay=Pt?Math.min.apply(Math,$e.map(function(di){return si(di)+di.delay})):At.delay,kt.endDelay=Pt?kt.duration-Math.max.apply(Math,$e.map(function(di){return si(di)+di.duration-di.endDelay})):At.endDelay,kt}var os=0;function Vo($e){var At=Oe(p,$e),Pt=Oe(S,$e),si=Ui(Pt,$e),kt=St($e.targets),di=Pr(kt,si),Ii=Hs(di,Pt),pn=os;return os++,Te(At,{id:pn,children:[],animatables:kt,animations:di,duration:Ii.duration,delay:Ii.delay,endDelay:Ii.endDelay})}var Ps=[],Fo=[],W0,zo=function(){function $e(){W0=requestAnimationFrame(At)}function At(Pt){var si=Ps.length;if(si){for(var kt=0;kt<si;){var di=Ps[kt];if(!di.paused)di.tick(Pt);else{var Ii=Ps.indexOf(di);Ii>-1&&(Ps.splice(Ii,1),si=Ps.length)}kt++}$e()}else W0=cancelAnimationFrame(W0)}return $e}();function Rs(){if(document.hidden){for(var $e=0,At=Ps.length;$e<At;$e++)activeInstance[$e].pause();Fo=Ps.slice(0),Ps=[]}else for(var Pt=0,si=Fo.length;Pt<si;Pt++)Fo[Pt].play()}document.addEventListener("visibilitychange",Rs);function ir($e){$e===void 0&&($e={});var At=0,Pt=0,si=0,kt,di=0,Ii=null;function pn(){return window.Promise&&new Promise(function(rn){return Ii=rn})}var nn=pn(),hi=Vo($e);function Tn(){hi.reversed=!hi.reversed;for(var rn=0,$n=kt.length;rn<$n;rn++)kt[rn].reversed=hi.reversed}function Bn(rn){return hi.reversed?hi.duration-rn:rn}function Dn(){At=0,Pt=Bn(hi.currentTime)*(1/ir.speed)}function ns(rn,$n){$n&&$n.seek(rn-$n.timelineOffset)}function Kn(rn){if(hi.reversePlayback)for(var as=di;as--;)ns(rn,kt[as]);else for(var $n=0;$n<di;$n++)ns(rn,kt[$n])}function or(rn){for(var $n=0,as=hi.animations,Or=as.length;$n<Or;){var _e=as[$n],Re=_e.animatable,Fe=_e.tweens,We=Fe.length-1,it=Fe[We];We&&(it=Qe(Fe,function(ls){return rn<ls.end})[0]||it);for(var _t=D(rn-it.start-it.delay,0,it.duration)/it.duration,Dt=isNaN(_t)?1:it.easing(_t),ei=it.to.strings,pi=it.round,Ut=[],ni=it.to.numbers.length,Ri=void 0,an=0;an<ni;an++){var mi=void 0,On=it.to.numbers[an],nr=it.from.numbers[an]||0;it.isPath?mi=ge(it.value,Dt*On):mi=nr+Dt*(On-nr),pi&&(it.isColor&&an>2||(mi=Math.round(mi*pi)/pi)),Ut.push(mi)}var Qn=ei.length;if(!Qn)Ri=Ut[0];else{Ri=ei[0];for(var Ln=0;Ln<Qn;Ln++){ei[Ln];var gr=ei[Ln+1],Qr=Ut[Ln];isNaN(Qr)||(gr?Ri+=Qr+gr:Ri+=Qr+" ")}}kn[_e.type](Re.target,_e.property,Ri,Re.transforms),_e.currentValue=Ri,$n++}}function br(rn){hi[rn]&&!hi.passThrough&&hi[rn](hi)}function gs(){hi.remaining&&hi.remaining!==!0&&hi.remaining--}function bs(rn){var $n=hi.duration,as=hi.delay,Or=$n-hi.endDelay,_e=Bn(rn);hi.progress=D(_e/$n*100,0,100),hi.reversePlayback=_e<hi.currentTime,kt&&Kn(_e),!hi.began&&hi.currentTime>0&&(hi.began=!0,br("begin"),br("loopBegin")),_e<=as&&hi.currentTime!==0&&or(0),(_e>=Or&&hi.currentTime!==$n||!$n)&&or($n),_e>as&&_e<Or?(hi.changeBegan||(hi.changeBegan=!0,hi.changeCompleted=!1,br("changeBegin")),br("change"),or(_e)):hi.changeBegan&&(hi.changeCompleted=!0,hi.changeBegan=!1,br("changeComplete")),hi.currentTime=D(_e,0,$n),hi.began&&br("update"),rn>=$n&&(Pt=0,gs(),hi.remaining?(At=si,br("loopComplete"),br("loopBegin"),hi.direction==="alternate"&&Tn()):(hi.paused=!0,hi.completed||(hi.completed=!0,br("loopComplete"),br("complete"),"Promise"in window&&(Ii(),nn=pn()))))}return hi.reset=function(){var rn=hi.direction;hi.passThrough=!1,hi.currentTime=0,hi.progress=0,hi.paused=!0,hi.began=!1,hi.changeBegan=!1,hi.completed=!1,hi.changeCompleted=!1,hi.reversePlayback=!1,hi.reversed=rn==="reverse",hi.remaining=hi.loop,kt=hi.children,di=kt.length;for(var $n=di;$n--;)hi.children[$n].reset();(hi.reversed&&hi.loop!==!0||rn==="alternate"&&hi.loop===1)&&hi.remaining++,or(0)},hi.set=function(rn,$n){return Jt(rn,$n),hi},hi.tick=function(rn){si=rn,At||(At=si),bs((si+(Pt-At))*ir.speed)},hi.seek=function(rn){bs(Bn(rn))},hi.pause=function(){hi.paused=!0,Dn()},hi.play=function(){hi.paused&&(hi.paused=!1,Ps.push(hi),Dn(),W0||zo())},hi.reverse=function(){Tn(),Dn()},hi.restart=function(){hi.reset(),hi.play()},hi.finished=nn,hi.reset(),hi.autoplay&&hi.play(),hi}function Ys($e,At){for(var Pt=At.length;Pt--;)Ce($e,At[Pt].animatable.target)&&At.splice(Pt,1)}function ca($e){for(var At=ht($e),Pt=Ps.length;Pt--;){var si=Ps[Pt],kt=si.animations,di=si.children;Ys(At,kt);for(var Ii=di.length;Ii--;){var pn=di[Ii],nn=pn.animations;Ys(At,nn),!nn.length&&!pn.children.length&&di.splice(Ii,1)}!kt.length&&!di.length&&si.pause()}}function L0($e,At){At===void 0&&(At={});var Pt=At.direction||"normal",si=At.easing?Me(At.easing):null,kt=At.grid,di=At.axis,Ii=At.from||0,pn=Ii==="first",nn=Ii==="center",hi=Ii==="last",Tn=k.arr($e),Bn=parseFloat(Tn?$e[0]:$e),Dn=Tn?parseFloat($e[1]):0,ns=sn(Tn?$e[1]:$e)||0,Kn=At.start||0+(Tn?Bn:0),or=[],br=0;return function(gs,bs,rn){if(pn&&(Ii=0),nn&&(Ii=(rn-1)/2),hi&&(Ii=rn-1),!or.length){for(var $n=0;$n<rn;$n++){if(!kt)or.push(Math.abs(Ii-$n));else{var as=nn?(kt[0]-1)/2:Ii%kt[0],Or=nn?(kt[1]-1)/2:Math.floor(Ii/kt[0]),_e=$n%kt[0],Re=Math.floor($n/kt[0]),Fe=as-_e,We=Or-Re,it=Math.sqrt(Fe*Fe+We*We);di==="x"&&(it=-Fe),di==="y"&&(it=-We),or.push(it)}br=Math.max.apply(Math,or)}si&&(or=or.map(function(Dt){return si(Dt/br)*br})),Pt==="reverse"&&(or=or.map(function(Dt){return di?Dt<0?Dt*-1:-Dt:Math.abs(br-Dt)}))}var _t=Tn?(Dn-Bn)/br:Bn;return Kn+_t*(Math.round(or[bs]*100)/100)+ns}}function al($e){$e===void 0&&($e={});var At=ir($e);return At.duration=0,At.add=function(Pt,si){var kt=Ps.indexOf(At),di=At.children;kt>-1&&Ps.splice(kt,1);function Ii(Dn){Dn.passThrough=!0}for(var pn=0;pn<di.length;pn++)Ii(di[pn]);var nn=Te(Pt,Oe(S,$e));nn.targets=nn.targets||$e.targets;var hi=At.duration;nn.autoplay=!1,nn.direction=At.direction,nn.timelineOffset=k.und(si)?hi:Ms(si,hi),Ii(At),At.seek(nn.timelineOffset);var Tn=ir(nn);Ii(Tn),di.push(Tn);var Bn=Hs(di,$e);return At.delay=Bn.delay,At.endDelay=Bn.endDelay,At.duration=Bn.duration,At.seek(0),At.reset(),At.autoplay&&At.play(),At},At}ir.version="3.0.0",ir.speed=1,ir.running=Ps,ir.remove=ca,ir.get=mr,ir.set=Jt,ir.convertPx=Jn,ir.path=ae,ir.setDashoffset=ot,ir.stagger=L0,ir.timeline=al,ir.easing=Me,ir.penner=ye,ir.random=function($e,At){return Math.floor(Math.random()*(At-$e+1))+$e};const ua=ir},"./node_modules/three-bmfont-text/index.js":(ie,we,P)=>{var p=P("./node_modules/layout-bmfont-text/index.js"),S=P("./node_modules/quad-indices/index.js"),z=P("./node_modules/three-bmfont-text/lib/vertices.js"),K=P("./node_modules/three-bmfont-text/lib/utils.js");ie.exports=function(V){return new D(V)};class D extends THREE.BufferGeometry{constructor(V){super(),typeof V=="string"&&(V={text:V}),this._opt=Object.assign({},V),V&&this.update(V)}update(V){if(typeof V=="string"&&(V={text:V}),V=Object.assign({},this._opt,V),!V.font)throw new TypeError("must specify a { font } in options");this.layout=p(V);var T=V.flipY!==!1,F=V.font,N=F.common.scaleW,k=F.common.scaleH,G=this.layout.glyphs.filter(function(oe){var ye=oe.data;return ye.width*ye.height>0});this.visibleGlyphs=G;var Z=z.positions(G),ne=z.uvs(G,N,k,T),te=S([],{clockwise:!0,type:"uint16",count:G.length});if(this.setIndex(te),this.setAttribute("position",new THREE.BufferAttribute(Z,2)),this.setAttribute("uv",new THREE.BufferAttribute(ne,2)),!V.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(V.multipage){var de=z.pages(G);this.setAttribute("page",new THREE.BufferAttribute(de,1))}this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere()}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new THREE.Sphere);var V=this.attributes.position.array,T=this.attributes.position.itemSize;if(!V||!T||V.length<2){this.boundingSphere.radius=0,this.boundingSphere.center.set(0,0,0);return}K.computeSphere(V,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new THREE.Box3);var V=this.boundingBox,T=this.attributes.position.array,F=this.attributes.position.itemSize;if(!T||!F||T.length<2){V.makeEmpty();return}K.computeBox(T,V)}}},"./node_modules/three-bmfont-text/lib/utils.js":ie=>{var we=2,P={min:[0,0],max:[0,0]};function p(S){var z=S.length/we;P.min[0]=S[0],P.min[1]=S[1],P.max[0]=S[0],P.max[1]=S[1];for(var K=0;K<z;K++){var D=S[K*we+0],Q=S[K*we+1];P.min[0]=Math.min(D,P.min[0]),P.min[1]=Math.min(Q,P.min[1]),P.max[0]=Math.max(D,P.max[0]),P.max[1]=Math.max(Q,P.max[1])}}ie.exports.computeBox=function(S,z){p(S),z.min.set(P.min[0],P.min[1],0),z.max.set(P.max[0],P.max[1],0)},ie.exports.computeSphere=function(S,z){p(S);var K=P.min[0],D=P.min[1],Q=P.max[0],V=P.max[1],T=Q-K,F=V-D,N=Math.sqrt(T*T+F*F);z.center.set(K+T/2,D+F/2,0),z.radius=N/2}},"./node_modules/three-bmfont-text/lib/vertices.js":ie=>{ie.exports.pages=function(P){var p=new Float32Array(P.length*4*1),S=0;return P.forEach(function(z){var K=z.data.page||0;p[S++]=K,p[S++]=K,p[S++]=K,p[S++]=K}),p},ie.exports.uvs=function(P,p,S,z){var K=new Float32Array(P.length*4*2),D=0;return P.forEach(function(Q){var V=Q.data,T=V.x+V.width,F=V.y+V.height,N=V.x/p,k=V.y/S,G=T/p,Z=F/S;z&&(k=(S-V.y)/S,Z=(S-F)/S),K[D++]=N,K[D++]=k,K[D++]=N,K[D++]=Z,K[D++]=G,K[D++]=Z,K[D++]=G,K[D++]=k}),K},ie.exports.positions=function(P){var p=new Float32Array(P.length*4*2),S=0;return P.forEach(function(z){var K=z.data,D=z.position[0]+K.xoffset,Q=z.position[1]+K.yoffset,V=K.width,T=K.height;p[S++]=D,p[S++]=Q,p[S++]=D,p[S++]=Q+T,p[S++]=D+V,p[S++]=Q+T,p[S++]=D+V,p[S++]=Q}),p}},"./node_modules/webvr-polyfill/build/webvr-polyfill.js":function(ie,we,P){/**
 * @license
 * webvr-polyfill
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * webvr-polyfill-dpdb 
 * Copyright (c) 2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * wglu-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(p,S){ie.exports=S()})(this,function(){var p=typeof window<"u"?window:typeof P.g<"u"?P.g:typeof self<"u"?self:{};function S(te){return te&&te.__esModule&&Object.prototype.hasOwnProperty.call(te,"default")?te.default:te}function z(te,de){return de={exports:{}},te(de,de.exports),de.exports}var K=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},D=function(de,oe){for(var ye=0,Me=de.length;ye<Me;ye++)oe[ye]=de[ye]},Q=function(de,oe){for(var ye in oe)oe.hasOwnProperty(ye)&&(de[ye]=oe[ye]);return de},V=z(function(te,de){/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(oe,ye){te.exports=ye()})(p,function(){var oe=function(_e,Re){if(!(_e instanceof Re))throw new TypeError("Cannot call a class as a function")},ye=function(){function _e(Re,Fe){for(var We=0;We<Fe.length;We++){var it=Fe[We];it.enumerable=it.enumerable||!1,it.configurable=!0,"value"in it&&(it.writable=!0),Object.defineProperty(Re,it.key,it)}}return function(Re,Fe,We){return Fe&&_e(Re.prototype,Fe),We&&_e(Re,We),Re}}(),Me=function(){function _e(Re,Fe){var We=[],it=!0,_t=!1,Dt=void 0;try{for(var ei=Re[Symbol.iterator](),pi;!(it=(pi=ei.next()).done)&&(We.push(pi.value),!(Fe&&We.length===Fe));it=!0);}catch(Ut){_t=!0,Dt=Ut}finally{try{!it&&ei.return&&ei.return()}finally{if(_t)throw Dt}}return We}return function(Re,Fe){if(Array.isArray(Re))return Re;if(Symbol.iterator in Object(Re))return _e(Re,Fe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ne=.001,Pe=1,Qe=function(Re,Fe){return"data:"+Re+","+encodeURIComponent(Fe)},De=function(Re,Fe,We){return Re+(Fe-Re)*We},ke=function(){var _e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return _e}}(),Ce=function(){var _e=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return _e}}(),fe=function(){var _e=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return _e}}(),Oe=function(){var _e=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return _e}}(),Te=function(){var _e=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),Re=_e?parseInt(_e[1],10):null;return function(){return Re}}(),Ve=function(){var _e=!1;return _e=ke()&&fe()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return _e}}(),st=function(){var _e=!1;if(Te()===65){var Re=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(Re){var Fe=Re[1].split("."),We=Me(Fe,4);We[0],We[1];var it=We[2],_t=We[3];_e=parseInt(it,10)===3325&&parseInt(_t,10)<148}}return function(){return _e}}(),dt=function(){var _e=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return _e}}(),Mt=function(){var Re=window.orientation==90||window.orientation==-90;return dt()?!Re:Re},Rt=function(Re){return!(isNaN(Re)||Re<=Ne||Re>Pe)},Yt=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},zt=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},Ci=function(Re){if(Ce())return!1;if(Re.requestFullscreen)Re.requestFullscreen();else if(Re.webkitRequestFullscreen)Re.webkitRequestFullscreen();else if(Re.mozRequestFullScreen)Re.mozRequestFullScreen();else if(Re.msRequestFullscreen)Re.msRequestFullscreen();else return!1;return!0},ci=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},Qi=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},sn=function(Re,Fe,We,it){var _t=Re.createShader(Re.VERTEX_SHADER);Re.shaderSource(_t,Fe),Re.compileShader(_t);var Dt=Re.createShader(Re.FRAGMENT_SHADER);Re.shaderSource(Dt,We),Re.compileShader(Dt);var ei=Re.createProgram();Re.attachShader(ei,_t),Re.attachShader(ei,Dt);for(var pi in it)Re.bindAttribLocation(ei,it[pi],pi);return Re.linkProgram(ei),Re.deleteShader(_t),Re.deleteShader(Dt),ei},In=function(Re,Fe){for(var We={},it=Re.getProgramParameter(Fe,Re.ACTIVE_UNIFORMS),_t="",Dt=0;Dt<it;Dt++){var ei=Re.getActiveUniform(Fe,Dt);_t=ei.name.replace("[0]",""),We[_t]=Re.getUniformLocation(Fe,_t)}return We},Xn=function(Re,Fe,We,it,_t,Dt,ei){var pi=1/(Fe-We),Ut=1/(it-_t),ni=1/(Dt-ei);return Re[0]=-2*pi,Re[1]=0,Re[2]=0,Re[3]=0,Re[4]=0,Re[5]=-2*Ut,Re[6]=0,Re[7]=0,Re[8]=0,Re[9]=0,Re[10]=2*ni,Re[11]=0,Re[12]=(Fe+We)*pi,Re[13]=(_t+it)*Ut,Re[14]=(ei+Dt)*ni,Re[15]=1,Re},tr=function(){var Re=!1;return function(Fe){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Fe)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Fe.substr(0,4)))&&(Re=!0)}(navigator.userAgent||navigator.vendor||window.opera),Re},Jn=function(Re,Fe){for(var We in Fe)Fe.hasOwnProperty(We)&&(Re[We]=Fe[We]);return Re},bn=function(Re){if(ke()){var Fe=Re.style.width,We=Re.style.height;Re.style.width=parseInt(Fe)+1+"px",Re.style.height=parseInt(We)+"px",setTimeout(function(){Re.style.width=Fe,Re.style.height=We},100)}window.canvas=Re},cr=function(){var _e=Math.PI/180,Re=Math.PI*.25;function Fe(Ut,ni,Ri,an){var mi=Math.tan(ni?ni.upDegrees*_e:Re),On=Math.tan(ni?ni.downDegrees*_e:Re),nr=Math.tan(ni?ni.leftDegrees*_e:Re),Qn=Math.tan(ni?ni.rightDegrees*_e:Re),Ln=2/(nr+Qn),gr=2/(mi+On);return Ut[0]=Ln,Ut[1]=0,Ut[2]=0,Ut[3]=0,Ut[4]=0,Ut[5]=gr,Ut[6]=0,Ut[7]=0,Ut[8]=-((nr-Qn)*Ln*.5),Ut[9]=(mi-On)*gr*.5,Ut[10]=an/(Ri-an),Ut[11]=-1,Ut[12]=0,Ut[13]=0,Ut[14]=an*Ri/(Ri-an),Ut[15]=0,Ut}function We(Ut,ni,Ri){var an=ni[0],mi=ni[1],On=ni[2],nr=ni[3],Qn=an+an,Ln=mi+mi,gr=On+On,Qr=an*Qn,ls=an*Ln,Vr=an*gr,qs=mi*Ln,Js=mi*gr,vs=On*gr,Zs=nr*Qn,Os=nr*Ln,$s=nr*gr;return Ut[0]=1-(qs+vs),Ut[1]=ls+$s,Ut[2]=Vr-Os,Ut[3]=0,Ut[4]=ls-$s,Ut[5]=1-(Qr+vs),Ut[6]=Js+Zs,Ut[7]=0,Ut[8]=Vr+Os,Ut[9]=Js-Zs,Ut[10]=1-(Qr+qs),Ut[11]=0,Ut[12]=Ri[0],Ut[13]=Ri[1],Ut[14]=Ri[2],Ut[15]=1,Ut}function it(Ut,ni,Ri){var an=Ri[0],mi=Ri[1],On=Ri[2],nr,Qn,Ln,gr,Qr,ls,Vr,qs,Js,vs,Zs,Os;return ni===Ut?(Ut[12]=ni[0]*an+ni[4]*mi+ni[8]*On+ni[12],Ut[13]=ni[1]*an+ni[5]*mi+ni[9]*On+ni[13],Ut[14]=ni[2]*an+ni[6]*mi+ni[10]*On+ni[14],Ut[15]=ni[3]*an+ni[7]*mi+ni[11]*On+ni[15]):(nr=ni[0],Qn=ni[1],Ln=ni[2],gr=ni[3],Qr=ni[4],ls=ni[5],Vr=ni[6],qs=ni[7],Js=ni[8],vs=ni[9],Zs=ni[10],Os=ni[11],Ut[0]=nr,Ut[1]=Qn,Ut[2]=Ln,Ut[3]=gr,Ut[4]=Qr,Ut[5]=ls,Ut[6]=Vr,Ut[7]=qs,Ut[8]=Js,Ut[9]=vs,Ut[10]=Zs,Ut[11]=Os,Ut[12]=nr*an+Qr*mi+Js*On+ni[12],Ut[13]=Qn*an+ls*mi+vs*On+ni[13],Ut[14]=Ln*an+Vr*mi+Zs*On+ni[14],Ut[15]=gr*an+qs*mi+Os*On+ni[15]),Ut}function _t(Ut,ni){var Ri=ni[0],an=ni[1],mi=ni[2],On=ni[3],nr=ni[4],Qn=ni[5],Ln=ni[6],gr=ni[7],Qr=ni[8],ls=ni[9],Vr=ni[10],qs=ni[11],Js=ni[12],vs=ni[13],Zs=ni[14],Os=ni[15],$s=Ri*Qn-an*nr,p0=Ri*Ln-mi*nr,D0=Ri*gr-On*nr,r0=an*Ln-mi*Qn,x0=an*gr-On*Qn,A0=mi*gr-On*Ln,P0=Qr*vs-ls*Js,ha=Qr*Zs-Vr*Js,da=Qr*Os-qs*Js,_o=ls*Zs-Vr*vs,M0=ls*Os-qs*vs,co=Vr*Os-qs*Zs,Fr=$s*co-p0*M0+D0*_o+r0*da-x0*ha+A0*P0;return Fr?(Fr=1/Fr,Ut[0]=(Qn*co-Ln*M0+gr*_o)*Fr,Ut[1]=(mi*M0-an*co-On*_o)*Fr,Ut[2]=(vs*A0-Zs*x0+Os*r0)*Fr,Ut[3]=(Vr*x0-ls*A0-qs*r0)*Fr,Ut[4]=(Ln*da-nr*co-gr*ha)*Fr,Ut[5]=(Ri*co-mi*da+On*ha)*Fr,Ut[6]=(Zs*D0-Js*A0-Os*p0)*Fr,Ut[7]=(Qr*A0-Vr*D0+qs*p0)*Fr,Ut[8]=(nr*M0-Qn*da+gr*P0)*Fr,Ut[9]=(an*da-Ri*M0-On*P0)*Fr,Ut[10]=(Js*x0-vs*D0+Os*$s)*Fr,Ut[11]=(ls*D0-Qr*x0-qs*$s)*Fr,Ut[12]=(Qn*ha-nr*_o-Ln*P0)*Fr,Ut[13]=(Ri*_o-an*ha+mi*P0)*Fr,Ut[14]=(vs*p0-Js*r0-Zs*$s)*Fr,Ut[15]=(Qr*r0-ls*p0+Vr*$s)*Fr,Ut):null}var Dt=new Float32Array([0,0,0,1]),ei=new Float32Array([0,0,0]);function pi(Ut,ni,Ri,an,mi,On){Fe(Ut,an||null,On.depthNear,On.depthFar);var nr=Ri.orientation||Dt,Qn=Ri.position||ei;We(ni,nr,Qn),mi&&it(ni,ni,mi),_t(ni,ni)}return function(Ut,ni,Ri){return!Ut||!ni?!1:(Ut.pose=ni,Ut.timestamp=ni.timestamp,pi(Ut.leftProjectionMatrix,Ut.leftViewMatrix,ni,Ri._getFieldOfView("left"),Ri._getEyeOffset("left"),Ri),pi(Ut.rightProjectionMatrix,Ut.rightViewMatrix,ni,Ri._getFieldOfView("right"),Ri._getEyeOffset("right"),Ri),!0)}}(),Ir=function(){var Re=window.self!==window.top,Fe=je(document.referrer),We=je(window.location.href);return Re&&Fe!==We},je=function(Re){var Fe,We=Re.indexOf("://");We!==-1?Fe=We+3:Fe=0;var it=Re.indexOf("/",Fe);return it===-1&&(it=Re.length),Re.substring(0,it)},xs=function(Re){if(Re.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var Fe=2*Math.acos(Re.w);return Fe},mr=function(){var _e={};return function(Re,Fe){_e[Re]===void 0&&(console.warn("webvr-polyfill: "+Fe),_e[Re]=!0)}}(),Wn=function(Re,Fe){var We=Fe?"Please use "+Fe+" instead.":"";mr(Re,Re+" has been deprecated. This may not work on native WebVR displays. "+We)};function Ms(_e,Re,Fe){if(!Re){Fe(_e);return}for(var We=[],it=null,_t=0;_t<Re.length;++_t){var Dt=Re[_t];switch(Dt){case _e.TEXTURE_BINDING_2D:case _e.TEXTURE_BINDING_CUBE_MAP:var ei=Re[++_t];if(ei<_e.TEXTURE0||ei>_e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),We.push(null,null);break}it||(it=_e.getParameter(_e.ACTIVE_TEXTURE)),_e.activeTexture(ei),We.push(_e.getParameter(Dt),null);break;case _e.ACTIVE_TEXTURE:it=_e.getParameter(_e.ACTIVE_TEXTURE),We.push(null);break;default:We.push(_e.getParameter(Dt));break}}Fe(_e);for(var _t=0;_t<Re.length;++_t){var Dt=Re[_t],pi=We[_t];switch(Dt){case _e.ACTIVE_TEXTURE:break;case _e.ARRAY_BUFFER_BINDING:_e.bindBuffer(_e.ARRAY_BUFFER,pi);break;case _e.COLOR_CLEAR_VALUE:_e.clearColor(pi[0],pi[1],pi[2],pi[3]);break;case _e.COLOR_WRITEMASK:_e.colorMask(pi[0],pi[1],pi[2],pi[3]);break;case _e.CURRENT_PROGRAM:_e.useProgram(pi);break;case _e.ELEMENT_ARRAY_BUFFER_BINDING:_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,pi);break;case _e.FRAMEBUFFER_BINDING:_e.bindFramebuffer(_e.FRAMEBUFFER,pi);break;case _e.RENDERBUFFER_BINDING:_e.bindRenderbuffer(_e.RENDERBUFFER,pi);break;case _e.TEXTURE_BINDING_2D:var ei=Re[++_t];if(ei<_e.TEXTURE0||ei>_e.TEXTURE31)break;_e.activeTexture(ei),_e.bindTexture(_e.TEXTURE_2D,pi);break;case _e.TEXTURE_BINDING_CUBE_MAP:var ei=Re[++_t];if(ei<_e.TEXTURE0||ei>_e.TEXTURE31)break;_e.activeTexture(ei),_e.bindTexture(_e.TEXTURE_CUBE_MAP,pi);break;case _e.VIEWPORT:_e.viewport(pi[0],pi[1],pi[2],pi[3]);break;case _e.BLEND:case _e.CULL_FACE:case _e.DEPTH_TEST:case _e.SCISSOR_TEST:case _e.STENCIL_TEST:pi?_e.enable(Dt):_e.disable(Dt);break;default:console.log("No GL restore behavior for 0x"+Dt.toString(16));break}it&&_e.activeTexture(it)}}var ts=Ms,Co=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),Us=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function Jr(_e,Re,Fe,We){this.gl=_e,this.cardboardUI=Re,this.bufferScale=Fe,this.dirtySubmitFrameBindings=We,this.ctxAttribs=_e.getContextAttributes(),this.instanceExt=_e.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=_e.drawingBufferWidth,this.bufferHeight=_e.drawingBufferHeight,this.realBindFramebuffer=_e.bindFramebuffer,this.realEnable=_e.enable,this.realDisable=_e.disable,this.realColorMask=_e.colorMask,this.realClearColor=_e.clearColor,this.realViewport=_e.viewport,ke()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(_e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(_e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=sn(_e,Co,Us,this.attribs),this.uniforms=In(_e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=_e.createBuffer(),this.indexBuffer=_e.createBuffer(),this.indexCount=0,this.renderTarget=_e.createTexture(),this.framebuffer=_e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=_e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=_e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=_e.createRenderbuffer()),this.patch(),this.onResize()}Jr.prototype.destroy=function(){var _e=this.gl;this.unpatch(),_e.deleteProgram(this.program),_e.deleteBuffer(this.vertexBuffer),_e.deleteBuffer(this.indexBuffer),_e.deleteTexture(this.renderTarget),_e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&_e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&_e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&_e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},Jr.prototype.onResize=function(){var _e=this.gl,Re=this,Fe=[_e.RENDERBUFFER_BINDING,_e.TEXTURE_BINDING_2D,_e.TEXTURE0];ts(_e,Fe,function(We){Re.realBindFramebuffer.call(We,We.FRAMEBUFFER,null),Re.scissorTest&&Re.realDisable.call(We,We.SCISSOR_TEST),Re.realColorMask.call(We,!0,!0,!0,!0),Re.realViewport.call(We,0,0,We.drawingBufferWidth,We.drawingBufferHeight),Re.realClearColor.call(We,0,0,0,1),We.clear(We.COLOR_BUFFER_BIT),Re.realBindFramebuffer.call(We,We.FRAMEBUFFER,Re.framebuffer),We.bindTexture(We.TEXTURE_2D,Re.renderTarget),We.texImage2D(We.TEXTURE_2D,0,Re.ctxAttribs.alpha?We.RGBA:We.RGB,Re.bufferWidth,Re.bufferHeight,0,Re.ctxAttribs.alpha?We.RGBA:We.RGB,We.UNSIGNED_BYTE,null),We.texParameteri(We.TEXTURE_2D,We.TEXTURE_MAG_FILTER,We.LINEAR),We.texParameteri(We.TEXTURE_2D,We.TEXTURE_MIN_FILTER,We.LINEAR),We.texParameteri(We.TEXTURE_2D,We.TEXTURE_WRAP_S,We.CLAMP_TO_EDGE),We.texParameteri(We.TEXTURE_2D,We.TEXTURE_WRAP_T,We.CLAMP_TO_EDGE),We.framebufferTexture2D(We.FRAMEBUFFER,We.COLOR_ATTACHMENT0,We.TEXTURE_2D,Re.renderTarget,0),Re.ctxAttribs.depth&&Re.ctxAttribs.stencil?(We.bindRenderbuffer(We.RENDERBUFFER,Re.depthStencilBuffer),We.renderbufferStorage(We.RENDERBUFFER,We.DEPTH_STENCIL,Re.bufferWidth,Re.bufferHeight),We.framebufferRenderbuffer(We.FRAMEBUFFER,We.DEPTH_STENCIL_ATTACHMENT,We.RENDERBUFFER,Re.depthStencilBuffer)):Re.ctxAttribs.depth?(We.bindRenderbuffer(We.RENDERBUFFER,Re.depthBuffer),We.renderbufferStorage(We.RENDERBUFFER,We.DEPTH_COMPONENT16,Re.bufferWidth,Re.bufferHeight),We.framebufferRenderbuffer(We.FRAMEBUFFER,We.DEPTH_ATTACHMENT,We.RENDERBUFFER,Re.depthBuffer)):Re.ctxAttribs.stencil&&(We.bindRenderbuffer(We.RENDERBUFFER,Re.stencilBuffer),We.renderbufferStorage(We.RENDERBUFFER,We.STENCIL_INDEX8,Re.bufferWidth,Re.bufferHeight),We.framebufferRenderbuffer(We.FRAMEBUFFER,We.STENCIL_ATTACHMENT,We.RENDERBUFFER,Re.stencilBuffer)),!We.checkFramebufferStatus(We.FRAMEBUFFER)===We.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),Re.realBindFramebuffer.call(We,We.FRAMEBUFFER,Re.lastBoundFramebuffer),Re.scissorTest&&Re.realEnable.call(We,We.SCISSOR_TEST),Re.realColorMask.apply(We,Re.colorMask),Re.realViewport.apply(We,Re.viewport),Re.realClearColor.apply(We,Re.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},Jr.prototype.patch=function(){if(!this.isPatched){var _e=this,Re=this.gl.canvas,Fe=this.gl;ke()||(Re.width=Yt()*this.bufferScale,Re.height=zt()*this.bufferScale,Object.defineProperty(Re,"width",{configurable:!0,enumerable:!0,get:function(){return _e.bufferWidth},set:function(it){_e.bufferWidth=it,_e.realCanvasWidth.set.call(Re,it),_e.onResize()}}),Object.defineProperty(Re,"height",{configurable:!0,enumerable:!0,get:function(){return _e.bufferHeight},set:function(it){_e.bufferHeight=it,_e.realCanvasHeight.set.call(Re,it),_e.onResize()}})),this.lastBoundFramebuffer=Fe.getParameter(Fe.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(Fe.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(We,it){_e.lastBoundFramebuffer=it||_e.framebuffer,_e.realBindFramebuffer.call(Fe,We,_e.lastBoundFramebuffer)},this.cullFace=Fe.getParameter(Fe.CULL_FACE),this.depthTest=Fe.getParameter(Fe.DEPTH_TEST),this.blend=Fe.getParameter(Fe.BLEND),this.scissorTest=Fe.getParameter(Fe.SCISSOR_TEST),this.stencilTest=Fe.getParameter(Fe.STENCIL_TEST),Fe.enable=function(We){switch(We){case Fe.CULL_FACE:_e.cullFace=!0;break;case Fe.DEPTH_TEST:_e.depthTest=!0;break;case Fe.BLEND:_e.blend=!0;break;case Fe.SCISSOR_TEST:_e.scissorTest=!0;break;case Fe.STENCIL_TEST:_e.stencilTest=!0;break}_e.realEnable.call(Fe,We)},Fe.disable=function(We){switch(We){case Fe.CULL_FACE:_e.cullFace=!1;break;case Fe.DEPTH_TEST:_e.depthTest=!1;break;case Fe.BLEND:_e.blend=!1;break;case Fe.SCISSOR_TEST:_e.scissorTest=!1;break;case Fe.STENCIL_TEST:_e.stencilTest=!1;break}_e.realDisable.call(Fe,We)},this.colorMask=Fe.getParameter(Fe.COLOR_WRITEMASK),Fe.colorMask=function(We,it,_t,Dt){_e.colorMask[0]=We,_e.colorMask[1]=it,_e.colorMask[2]=_t,_e.colorMask[3]=Dt,_e.realColorMask.call(Fe,We,it,_t,Dt)},this.clearColor=Fe.getParameter(Fe.COLOR_CLEAR_VALUE),Fe.clearColor=function(We,it,_t,Dt){_e.clearColor[0]=We,_e.clearColor[1]=it,_e.clearColor[2]=_t,_e.clearColor[3]=Dt,_e.realClearColor.call(Fe,We,it,_t,Dt)},this.viewport=Fe.getParameter(Fe.VIEWPORT),Fe.viewport=function(We,it,_t,Dt){_e.viewport[0]=We,_e.viewport[1]=it,_e.viewport[2]=_t,_e.viewport[3]=Dt,_e.realViewport.call(Fe,We,it,_t,Dt)},this.isPatched=!0,bn(Re)}},Jr.prototype.unpatch=function(){if(this.isPatched){var _e=this.gl,Re=this.gl.canvas;ke()||(Object.defineProperty(Re,"width",this.realCanvasWidth),Object.defineProperty(Re,"height",this.realCanvasHeight)),Re.width=this.bufferWidth,Re.height=this.bufferHeight,_e.bindFramebuffer=this.realBindFramebuffer,_e.enable=this.realEnable,_e.disable=this.realDisable,_e.colorMask=this.realColorMask,_e.clearColor=this.realClearColor,_e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&_e.bindFramebuffer(_e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){bn(Re)},1)}},Jr.prototype.setTextureBounds=function(_e,Re){_e||(_e=[0,0,.5,1]),Re||(Re=[.5,0,.5,1]),this.viewportOffsetScale[0]=_e[0],this.viewportOffsetScale[1]=_e[1],this.viewportOffsetScale[2]=_e[2],this.viewportOffsetScale[3]=_e[3],this.viewportOffsetScale[4]=Re[0],this.viewportOffsetScale[5]=Re[1],this.viewportOffsetScale[6]=Re[2],this.viewportOffsetScale[7]=Re[3]},Jr.prototype.submitFrame=function(){var _e=this.gl,Re=this,Fe=[];if(this.dirtySubmitFrameBindings||Fe.push(_e.CURRENT_PROGRAM,_e.ARRAY_BUFFER_BINDING,_e.ELEMENT_ARRAY_BUFFER_BINDING,_e.TEXTURE_BINDING_2D,_e.TEXTURE0),ts(_e,Fe,function(it){Re.realBindFramebuffer.call(it,it.FRAMEBUFFER,null);var _t=0,Dt=0;Re.instanceExt&&(_t=it.getVertexAttrib(Re.attribs.position,Re.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),Dt=it.getVertexAttrib(Re.attribs.texCoord,Re.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),Re.cullFace&&Re.realDisable.call(it,it.CULL_FACE),Re.depthTest&&Re.realDisable.call(it,it.DEPTH_TEST),Re.blend&&Re.realDisable.call(it,it.BLEND),Re.scissorTest&&Re.realDisable.call(it,it.SCISSOR_TEST),Re.stencilTest&&Re.realDisable.call(it,it.STENCIL_TEST),Re.realColorMask.call(it,!0,!0,!0,!0),Re.realViewport.call(it,0,0,it.drawingBufferWidth,it.drawingBufferHeight),(Re.ctxAttribs.alpha||ke())&&(Re.realClearColor.call(it,0,0,0,1),it.clear(it.COLOR_BUFFER_BIT)),it.useProgram(Re.program),it.bindBuffer(it.ELEMENT_ARRAY_BUFFER,Re.indexBuffer),it.bindBuffer(it.ARRAY_BUFFER,Re.vertexBuffer),it.enableVertexAttribArray(Re.attribs.position),it.enableVertexAttribArray(Re.attribs.texCoord),it.vertexAttribPointer(Re.attribs.position,2,it.FLOAT,!1,20,0),it.vertexAttribPointer(Re.attribs.texCoord,3,it.FLOAT,!1,20,8),Re.instanceExt&&(_t!=0&&Re.instanceExt.vertexAttribDivisorANGLE(Re.attribs.position,0),Dt!=0&&Re.instanceExt.vertexAttribDivisorANGLE(Re.attribs.texCoord,0)),it.activeTexture(it.TEXTURE0),it.uniform1i(Re.uniforms.diffuse,0),it.bindTexture(it.TEXTURE_2D,Re.renderTarget),it.uniform4fv(Re.uniforms.viewportOffsetScale,Re.viewportOffsetScale),it.drawElements(it.TRIANGLES,Re.indexCount,it.UNSIGNED_SHORT,0),Re.cardboardUI&&Re.cardboardUI.renderNoState(),Re.realBindFramebuffer.call(Re.gl,it.FRAMEBUFFER,Re.framebuffer),Re.ctxAttribs.preserveDrawingBuffer||(Re.realClearColor.call(it,0,0,0,0),it.clear(it.COLOR_BUFFER_BIT)),Re.dirtySubmitFrameBindings||Re.realBindFramebuffer.call(it,it.FRAMEBUFFER,Re.lastBoundFramebuffer),Re.cullFace&&Re.realEnable.call(it,it.CULL_FACE),Re.depthTest&&Re.realEnable.call(it,it.DEPTH_TEST),Re.blend&&Re.realEnable.call(it,it.BLEND),Re.scissorTest&&Re.realEnable.call(it,it.SCISSOR_TEST),Re.stencilTest&&Re.realEnable.call(it,it.STENCIL_TEST),Re.realColorMask.apply(it,Re.colorMask),Re.realViewport.apply(it,Re.viewport),(Re.ctxAttribs.alpha||!Re.ctxAttribs.preserveDrawingBuffer)&&Re.realClearColor.apply(it,Re.clearColor),Re.instanceExt&&(_t!=0&&Re.instanceExt.vertexAttribDivisorANGLE(Re.attribs.position,_t),Dt!=0&&Re.instanceExt.vertexAttribDivisorANGLE(Re.attribs.texCoord,Dt))}),ke()){var We=_e.canvas;(We.width!=Re.bufferWidth||We.height!=Re.bufferHeight)&&(Re.bufferWidth=We.width,Re.bufferHeight=We.height,Re.onResize())}},Jr.prototype.updateDeviceInfo=function(_e){var Re=this.gl,Fe=this,We=[Re.ARRAY_BUFFER_BINDING,Re.ELEMENT_ARRAY_BUFFER_BINDING];ts(Re,We,function(it){var _t=Fe.computeMeshVertices_(Fe.meshWidth,Fe.meshHeight,_e);if(it.bindBuffer(it.ARRAY_BUFFER,Fe.vertexBuffer),it.bufferData(it.ARRAY_BUFFER,_t,it.STATIC_DRAW),!Fe.indexCount){var Dt=Fe.computeMeshIndices_(Fe.meshWidth,Fe.meshHeight);it.bindBuffer(it.ELEMENT_ARRAY_BUFFER,Fe.indexBuffer),it.bufferData(it.ELEMENT_ARRAY_BUFFER,Dt,it.STATIC_DRAW),Fe.indexCount=Dt.length}})},Jr.prototype.computeMeshVertices_=function(_e,Re,Fe){for(var We=new Float32Array(2*_e*Re*5),it=Fe.getLeftEyeVisibleTanAngles(),_t=Fe.getLeftEyeNoLensTanAngles(),Dt=Fe.getLeftEyeVisibleScreenRect(_t),ei=0,pi=0;pi<2;pi++){for(var Ut=0;Ut<Re;Ut++)for(var ni=0;ni<_e;ni++,ei++){var Ri=ni/(_e-1),an=Ut/(Re-1),mi=Ri,On=an,nr=De(it[0],it[2],Ri),Qn=De(it[3],it[1],an),Ln=Math.sqrt(nr*nr+Qn*Qn),gr=Fe.distortion.distortInverse(Ln),Qr=nr*gr/Ln,ls=Qn*gr/Ln;Ri=(Qr-_t[0])/(_t[2]-_t[0]),an=(ls-_t[3])/(_t[1]-_t[3]),Ri=(Dt.x+Ri*Dt.width-.5)*2,an=(Dt.y+an*Dt.height-.5)*2,We[ei*5+0]=Ri,We[ei*5+1]=an,We[ei*5+2]=mi,We[ei*5+3]=On,We[ei*5+4]=pi}var Vr=it[2]-it[0];it[0]=-(Vr+it[0]),it[2]=Vr-it[2],Vr=_t[2]-_t[0],_t[0]=-(Vr+_t[0]),_t[2]=Vr-_t[2],Dt.x=1-(Dt.x+Dt.width)}return We},Jr.prototype.computeMeshIndices_=function(_e,Re){for(var Fe=new Uint16Array(2*(_e-1)*(Re-1)*6),We=_e/2,it=Re/2,_t=0,Dt=0,ei=0;ei<2;ei++)for(var pi=0;pi<Re;pi++)for(var Ut=0;Ut<_e;Ut++,_t++)Ut==0||pi==0||(Ut<=We==pi<=it?(Fe[Dt++]=_t,Fe[Dt++]=_t-_e-1,Fe[Dt++]=_t-_e,Fe[Dt++]=_t-_e-1,Fe[Dt++]=_t,Fe[Dt++]=_t-1):(Fe[Dt++]=_t-1,Fe[Dt++]=_t-_e,Fe[Dt++]=_t,Fe[Dt++]=_t-_e,Fe[Dt++]=_t-1,Fe[Dt++]=_t-_e-1));return Fe},Jr.prototype.getOwnPropertyDescriptor_=function(_e,Re){var Fe=Object.getOwnPropertyDescriptor(_e,Re);return(Fe.get===void 0||Fe.set===void 0)&&(Fe.configurable=!0,Fe.enumerable=!0,Fe.get=function(){return this.getAttribute(Re)},Fe.set=function(We){this.setAttribute(Re,We)}),Fe};var Ti=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),Ye=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),Xe=Math.PI/180,lt=60,tt=12,ot=20,ct=1,Ie=.75,ae=.3125,ge=4,He=28,Ze=1.5;function ht(_e){this.gl=_e,this.attribs={position:0},this.program=sn(_e,Ti,Ye,this.attribs),this.uniforms=In(_e,this.program),this.vertexBuffer=_e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}ht.prototype.destroy=function(){var _e=this.gl;this.listener&&_e.canvas.removeEventListener("click",this.listener,!1),_e.deleteProgram(this.program),_e.deleteBuffer(this.vertexBuffer)},ht.prototype.listen=function(_e,Re){var Fe=this.gl.canvas;this.listener=function(We){var it=Fe.clientWidth/2,_t=He*Ze;We.clientX>it-_t&&We.clientX<it+_t&&We.clientY>Fe.clientHeight-_t?_e(We):We.clientX<_t&&We.clientY<_t&&Re(We)},Fe.addEventListener("click",this.listener,!1)},ht.prototype.onResize=function(){var _e=this.gl,Re=this,Fe=[_e.ARRAY_BUFFER_BINDING];ts(_e,Fe,function(We){var it=[],_t=We.drawingBufferWidth/2,Dt=Math.max(screen.width,screen.height)*window.devicePixelRatio,ei=We.drawingBufferWidth/Dt,pi=ei*window.devicePixelRatio,Ut=ge*pi/2,ni=He*Ze*pi,Ri=He*pi/2,an=(He*Ze-He)*pi;it.push(_t-Ut,ni),it.push(_t-Ut,We.drawingBufferHeight),it.push(_t+Ut,ni),it.push(_t+Ut,We.drawingBufferHeight),Re.gearOffset=it.length/2;function mi(gr,Qr){var ls=(90-gr)*Xe,Vr=Math.cos(ls),qs=Math.sin(ls);it.push(ae*Vr*Ri+_t,ae*qs*Ri+Ri),it.push(Qr*Vr*Ri+_t,Qr*qs*Ri+Ri)}for(var On=0;On<=6;On++){var nr=On*lt;mi(nr,ct),mi(nr+tt,ct),mi(nr+ot,Ie),mi(nr+(lt-ot),Ie),mi(nr+(lt-tt),ct)}Re.gearVertexCount=it.length/2-Re.gearOffset,Re.arrowOffset=it.length/2;function Qn(gr,Qr){it.push(an+gr,We.drawingBufferHeight-an-Qr)}var Ln=Ut/Math.sin(45*Xe);Qn(0,Ri),Qn(Ri,0),Qn(Ri+Ln,Ln),Qn(Ln,Ri+Ln),Qn(Ln,Ri-Ln),Qn(0,Ri),Qn(Ri,Ri*2),Qn(Ri+Ln,Ri*2-Ln),Qn(Ln,Ri-Ln),Qn(0,Ri),Qn(Ln,Ri-Ut),Qn(He*pi,Ri-Ut),Qn(Ln,Ri+Ut),Qn(He*pi,Ri+Ut),Re.arrowVertexCount=it.length/2-Re.arrowOffset,We.bindBuffer(We.ARRAY_BUFFER,Re.vertexBuffer),We.bufferData(We.ARRAY_BUFFER,new Float32Array(it),We.STATIC_DRAW)})},ht.prototype.render=function(){var _e=this.gl,Re=this,Fe=[_e.CULL_FACE,_e.DEPTH_TEST,_e.BLEND,_e.SCISSOR_TEST,_e.STENCIL_TEST,_e.COLOR_WRITEMASK,_e.VIEWPORT,_e.CURRENT_PROGRAM,_e.ARRAY_BUFFER_BINDING];ts(_e,Fe,function(We){We.disable(We.CULL_FACE),We.disable(We.DEPTH_TEST),We.disable(We.BLEND),We.disable(We.SCISSOR_TEST),We.disable(We.STENCIL_TEST),We.colorMask(!0,!0,!0,!0),We.viewport(0,0,We.drawingBufferWidth,We.drawingBufferHeight),Re.renderNoState()})},ht.prototype.renderNoState=function(){var _e=this.gl;_e.useProgram(this.program),_e.bindBuffer(_e.ARRAY_BUFFER,this.vertexBuffer),_e.enableVertexAttribArray(this.attribs.position),_e.vertexAttribPointer(this.attribs.position,2,_e.FLOAT,!1,8,0),_e.uniform4f(this.uniforms.color,1,1,1,1),Xn(this.projMat,0,_e.drawingBufferWidth,0,_e.drawingBufferHeight,.1,1024),_e.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),_e.drawArrays(_e.TRIANGLE_STRIP,0,4),_e.drawArrays(_e.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),_e.drawArrays(_e.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function St(_e){this.coefficients=_e}St.prototype.distortInverse=function(_e){for(var Re=0,Fe=1,We=_e-this.distort(Re);Math.abs(Fe-Re)>1e-4;){var it=_e-this.distort(Fe),_t=Fe-it*((Fe-Re)/(it-We));Re=Fe,Fe=_t,We=it}return Fe},St.prototype.distort=function(_e){for(var Re=_e*_e,Fe=0,We=0;We<this.coefficients.length;We++)Fe=Re*(Fe+this.coefficients[We]);return(Fe+1)*_e};var Di=Math.PI/180,Wi=180/Math.PI,Oi=function(Re,Fe,We){this.x=Re||0,this.y=Fe||0,this.z=We||0};Oi.prototype={constructor:Oi,set:function(Re,Fe,We){return this.x=Re,this.y=Fe,this.z=We,this},copy:function(Re){return this.x=Re.x,this.y=Re.y,this.z=Re.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var Re=this.length();if(Re!==0){var Fe=1/Re;this.multiplyScalar(Fe)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(Re){this.x*=Re,this.y*=Re,this.z*=Re},applyQuaternion:function(Re){var Fe=this.x,We=this.y,it=this.z,_t=Re.x,Dt=Re.y,ei=Re.z,pi=Re.w,Ut=pi*Fe+Dt*it-ei*We,ni=pi*We+ei*Fe-_t*it,Ri=pi*it+_t*We-Dt*Fe,an=-_t*Fe-Dt*We-ei*it;return this.x=Ut*pi+an*-_t+ni*-ei-Ri*-Dt,this.y=ni*pi+an*-Dt+Ri*-_t-Ut*-ei,this.z=Ri*pi+an*-ei+Ut*-Dt-ni*-_t,this},dot:function(Re){return this.x*Re.x+this.y*Re.y+this.z*Re.z},crossVectors:function(Re,Fe){var We=Re.x,it=Re.y,_t=Re.z,Dt=Fe.x,ei=Fe.y,pi=Fe.z;return this.x=it*pi-_t*ei,this.y=_t*Dt-We*pi,this.z=We*ei-it*Dt,this}};var Ui=function(Re,Fe,We,it){this.x=Re||0,this.y=Fe||0,this.z=We||0,this.w=it!==void 0?it:1};Ui.prototype={constructor:Ui,set:function(Re,Fe,We,it){return this.x=Re,this.y=Fe,this.z=We,this.w=it,this},copy:function(Re){return this.x=Re.x,this.y=Re.y,this.z=Re.z,this.w=Re.w,this},setFromEulerXYZ:function(Re,Fe,We){var it=Math.cos(Re/2),_t=Math.cos(Fe/2),Dt=Math.cos(We/2),ei=Math.sin(Re/2),pi=Math.sin(Fe/2),Ut=Math.sin(We/2);return this.x=ei*_t*Dt+it*pi*Ut,this.y=it*pi*Dt-ei*_t*Ut,this.z=it*_t*Ut+ei*pi*Dt,this.w=it*_t*Dt-ei*pi*Ut,this},setFromEulerYXZ:function(Re,Fe,We){var it=Math.cos(Re/2),_t=Math.cos(Fe/2),Dt=Math.cos(We/2),ei=Math.sin(Re/2),pi=Math.sin(Fe/2),Ut=Math.sin(We/2);return this.x=ei*_t*Dt+it*pi*Ut,this.y=it*pi*Dt-ei*_t*Ut,this.z=it*_t*Ut-ei*pi*Dt,this.w=it*_t*Dt+ei*pi*Ut,this},setFromAxisAngle:function(Re,Fe){var We=Fe/2,it=Math.sin(We);return this.x=Re.x*it,this.y=Re.y*it,this.z=Re.z*it,this.w=Math.cos(We),this},multiply:function(Re){return this.multiplyQuaternions(this,Re)},multiplyQuaternions:function(Re,Fe){var We=Re.x,it=Re.y,_t=Re.z,Dt=Re.w,ei=Fe.x,pi=Fe.y,Ut=Fe.z,ni=Fe.w;return this.x=We*ni+Dt*ei+it*Ut-_t*pi,this.y=it*ni+Dt*pi+_t*ei-We*Ut,this.z=_t*ni+Dt*Ut+We*pi-it*ei,this.w=Dt*ni-We*ei-it*pi-_t*Ut,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var Re=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return Re===0?(this.x=0,this.y=0,this.z=0,this.w=1):(Re=1/Re,this.x=this.x*Re,this.y=this.y*Re,this.z=this.z*Re,this.w=this.w*Re),this},slerp:function(Re,Fe){if(Fe===0)return this;if(Fe===1)return this.copy(Re);var We=this.x,it=this.y,_t=this.z,Dt=this.w,ei=Dt*Re.w+We*Re.x+it*Re.y+_t*Re.z;if(ei<0?(this.w=-Re.w,this.x=-Re.x,this.y=-Re.y,this.z=-Re.z,ei=-ei):this.copy(Re),ei>=1)return this.w=Dt,this.x=We,this.y=it,this.z=_t,this;var pi=Math.acos(ei),Ut=Math.sqrt(1-ei*ei);if(Math.abs(Ut)<.001)return this.w=.5*(Dt+this.w),this.x=.5*(We+this.x),this.y=.5*(it+this.y),this.z=.5*(_t+this.z),this;var ni=Math.sin((1-Fe)*pi)/Ut,Ri=Math.sin(Fe*pi)/Ut;return this.w=Dt*ni+this.w*Ri,this.x=We*ni+this.x*Ri,this.y=it*ni+this.y*Ri,this.z=_t*ni+this.z*Ri,this},setFromUnitVectors:function(){var _e,Re,Fe=1e-6;return function(We,it){return _e===void 0&&(_e=new Oi),Re=We.dot(it)+1,Re<Fe?(Re=0,Math.abs(We.x)>Math.abs(We.z)?_e.set(-We.y,We.x,0):_e.set(0,-We.z,We.y)):_e.crossVectors(We,it),this.x=_e.x,this.y=_e.y,this.z=_e.z,this.w=Re,this.normalize(),this}}()};function Ji(_e){this.width=_e.width||Yt(),this.height=_e.height||zt(),this.widthMeters=_e.widthMeters,this.heightMeters=_e.heightMeters,this.bevelMeters=_e.bevelMeters}var Ss=new Ji({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),kn=new Ji({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),Jt={CardboardV1:new Pr({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new Pr({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Dr(_e,Re){this.viewer=Jt.CardboardV2,this.updateDeviceParams(_e),this.distortion=new St(this.viewer.distortionCoefficients);for(var Fe=0;Fe<Re.length;Fe++){var We=Re[Fe];Jt[We.id]=new Pr(We)}}Dr.prototype.updateDeviceParams=function(_e){this.device=this.determineDevice_(_e)||this.device},Dr.prototype.getDevice=function(){return this.device},Dr.prototype.setViewer=function(_e){this.viewer=_e,this.distortion=new St(this.viewer.distortionCoefficients)},Dr.prototype.determineDevice_=function(_e){if(!_e)return ke()?(console.warn("Using fallback iOS device measurements."),kn):(console.warn("Using fallback Android device measurements."),Ss);var Re=.0254,Fe=Re/_e.xdpi,We=Re/_e.ydpi,it=Yt(),_t=zt();return new Ji({widthMeters:Fe*it,heightMeters:We*_t,bevelMeters:_e.bevelMm*.001})},Dr.prototype.getDistortedFieldOfViewLeftEye=function(){var _e=this.viewer,Re=this.device,Fe=this.distortion,We=_e.screenLensDistance,it=(Re.widthMeters-_e.interLensDistance)/2,_t=_e.interLensDistance/2,Dt=_e.baselineLensDistance-Re.bevelMeters,ei=Re.heightMeters-Dt,pi=Wi*Math.atan(Fe.distort(it/We)),Ut=Wi*Math.atan(Fe.distort(_t/We)),ni=Wi*Math.atan(Fe.distort(Dt/We)),Ri=Wi*Math.atan(Fe.distort(ei/We));return{leftDegrees:Math.min(pi,_e.fov),rightDegrees:Math.min(Ut,_e.fov),downDegrees:Math.min(ni,_e.fov),upDegrees:Math.min(Ri,_e.fov)}},Dr.prototype.getLeftEyeVisibleTanAngles=function(){var _e=this.viewer,Re=this.device,Fe=this.distortion,We=Math.tan(-Di*_e.fov),it=Math.tan(Di*_e.fov),_t=Math.tan(Di*_e.fov),Dt=Math.tan(-Di*_e.fov),ei=Re.widthMeters/4,pi=Re.heightMeters/2,Ut=_e.baselineLensDistance-Re.bevelMeters-pi,ni=_e.interLensDistance/2-ei,Ri=-Ut,an=_e.screenLensDistance,mi=Fe.distort((ni-ei)/an),On=Fe.distort((Ri+pi)/an),nr=Fe.distort((ni+ei)/an),Qn=Fe.distort((Ri-pi)/an),Ln=new Float32Array(4);return Ln[0]=Math.max(We,mi),Ln[1]=Math.min(it,On),Ln[2]=Math.min(_t,nr),Ln[3]=Math.max(Dt,Qn),Ln},Dr.prototype.getLeftEyeNoLensTanAngles=function(){var _e=this.viewer,Re=this.device,Fe=this.distortion,We=new Float32Array(4),it=Fe.distortInverse(Math.tan(-Di*_e.fov)),_t=Fe.distortInverse(Math.tan(Di*_e.fov)),Dt=Fe.distortInverse(Math.tan(Di*_e.fov)),ei=Fe.distortInverse(Math.tan(-Di*_e.fov)),pi=Re.widthMeters/4,Ut=Re.heightMeters/2,ni=_e.baselineLensDistance-Re.bevelMeters-Ut,Ri=_e.interLensDistance/2-pi,an=-ni,mi=_e.screenLensDistance,On=(Ri-pi)/mi,nr=(an+Ut)/mi,Qn=(Ri+pi)/mi,Ln=(an-Ut)/mi;return We[0]=Math.max(it,On),We[1]=Math.min(_t,nr),We[2]=Math.min(Dt,Qn),We[3]=Math.max(ei,Ln),We},Dr.prototype.getLeftEyeVisibleScreenRect=function(_e){var Re=this.viewer,Fe=this.device,We=Re.screenLensDistance,it=(Fe.widthMeters-Re.interLensDistance)/2,_t=Re.baselineLensDistance-Fe.bevelMeters,Dt=(_e[0]*We+it)/Fe.widthMeters,ei=(_e[1]*We+_t)/Fe.heightMeters,pi=(_e[2]*We+it)/Fe.widthMeters,Ut=(_e[3]*We+_t)/Fe.heightMeters;return{x:Dt,y:Ut,width:pi-Dt,height:ei-Ut}},Dr.prototype.getFieldOfViewLeftEye=function(_e){return _e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Dr.prototype.getFieldOfViewRightEye=function(_e){var Re=this.getFieldOfViewLeftEye(_e);return{leftDegrees:Re.rightDegrees,rightDegrees:Re.leftDegrees,upDegrees:Re.upDegrees,downDegrees:Re.downDegrees}},Dr.prototype.getUndistortedFieldOfViewLeftEye=function(){var _e=this.getUndistortedParams_();return{leftDegrees:Wi*Math.atan(_e.outerDist),rightDegrees:Wi*Math.atan(_e.innerDist),downDegrees:Wi*Math.atan(_e.bottomDist),upDegrees:Wi*Math.atan(_e.topDist)}},Dr.prototype.getUndistortedViewportLeftEye=function(){var _e=this.getUndistortedParams_(),Re=this.viewer,Fe=this.device,We=Re.screenLensDistance,it=Fe.widthMeters/We,_t=Fe.heightMeters/We,Dt=Fe.width/it,ei=Fe.height/_t,pi=Math.round((_e.eyePosX-_e.outerDist)*Dt),Ut=Math.round((_e.eyePosY-_e.bottomDist)*ei);return{x:pi,y:Ut,width:Math.round((_e.eyePosX+_e.innerDist)*Dt)-pi,height:Math.round((_e.eyePosY+_e.topDist)*ei)-Ut}},Dr.prototype.getUndistortedParams_=function(){var _e=this.viewer,Re=this.device,Fe=this.distortion,We=_e.screenLensDistance,it=_e.interLensDistance/2/We,_t=Re.widthMeters/We,Dt=Re.heightMeters/We,ei=_t/2-it,pi=(_e.baselineLensDistance-Re.bevelMeters)/We,Ut=_e.fov,ni=Fe.distortInverse(Math.tan(Di*Ut)),Ri=Math.min(ei,ni),an=Math.min(it,ni),mi=Math.min(pi,ni),On=Math.min(Dt-pi,ni);return{outerDist:Ri,innerDist:an,topDist:On,bottomDist:mi,eyePosX:ei,eyePosY:pi}};function Pr(_e){this.id=_e.id,this.label=_e.label,this.fov=_e.fov,this.interLensDistance=_e.interLensDistance,this.baselineLensDistance=_e.baselineLensDistance,this.screenLensDistance=_e.screenLensDistance,this.distortionCoefficients=_e.distortionCoefficients,this.inverseCoefficients=_e.inverseCoefficients}Dr.Viewers=Jt;var Hs=1,os="2019-11-09T17:36:14Z",Vo=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],Ps={format:Hs,last_updated:os,devices:Vo};function Fo(_e,Re){if(this.dpdb=Ps,this.recalculateDeviceParams_(),_e){this.onDeviceParamsUpdated=Re;var Fe=new XMLHttpRequest,We=this;Fe.open("GET",_e,!0),Fe.addEventListener("load",function(){We.loading=!1,Fe.status>=200&&Fe.status<=299?(We.dpdb=JSON.parse(Fe.response),We.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),Fe.send()}}Fo.prototype.getDeviceParams=function(){return this.deviceParams},Fo.prototype.recalculateDeviceParams_=function(){var _e=this.calcDeviceParams_();_e?(this.deviceParams=_e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Fo.prototype.calcDeviceParams_=function(){var _e=this.dpdb;if(!_e)return console.error("DPDB not available."),null;if(_e.format!=1)return console.error("DPDB has unexpected format version."),null;if(!_e.devices||!_e.devices.length)return console.error("DPDB does not have a devices section."),null;var Re=navigator.userAgent||navigator.vendor||window.opera,Fe=Yt(),We=zt();if(!_e.devices)return console.error("DPDB has no devices section."),null;for(var it=0;it<_e.devices.length;it++){var _t=_e.devices[it];if(!_t.rules){console.warn("Device["+it+"] has no rules section.");continue}if(_t.type!="ios"&&_t.type!="android"){console.warn("Device["+it+"] has invalid type.");continue}if(ke()==(_t.type=="ios")){for(var Dt=!1,ei=0;ei<_t.rules.length;ei++){var pi=_t.rules[ei];if(this.ruleMatches_(pi,Re,Fe,We)){Dt=!0;break}}if(Dt){var Ut=_t.dpi[0]||_t.dpi,ni=_t.dpi[1]||_t.dpi;return new W0({xdpi:Ut,ydpi:ni,bevelMm:_t.bw})}}}return console.warn("No DPDB device match."),null},Fo.prototype.ruleMatches_=function(_e,Re,Fe,We){if(!_e.ua&&!_e.res||(_e.ua&&_e.ua.substring(0,2)==="SM"&&(_e.ua=_e.ua.substring(0,7)),_e.ua&&Re.indexOf(_e.ua)<0))return!1;if(_e.res){if(!_e.res[0]||!_e.res[1])return!1;var it=_e.res[0],_t=_e.res[1];if(Math.min(Fe,We)!=Math.min(it,_t)||Math.max(Fe,We)!=Math.max(it,_t))return!1}return!0};function W0(_e){this.xdpi=_e.xdpi,this.ydpi=_e.ydpi,this.bevelMm=_e.bevelMm}function zo(_e,Re){this.set(_e,Re)}zo.prototype.set=function(_e,Re){this.sample=_e,this.timestampS=Re},zo.prototype.copy=function(_e){this.set(_e.sample,_e.timestampS)};function Rs(_e,Re){this.kFilter=_e,this.isDebug=Re,this.currentAccelMeasurement=new zo,this.currentGyroMeasurement=new zo,this.previousGyroMeasurement=new zo,ke()?this.filterQ=new Ui(-1,0,0,1):this.filterQ=new Ui(1,0,0,1),this.previousFilterQ=new Ui,this.previousFilterQ.copy(this.filterQ),this.accelQ=new Ui,this.isOrientationInitialized=!1,this.estimatedGravity=new Oi,this.measuredGravity=new Oi,this.gyroIntegralQ=new Ui}Rs.prototype.addAccelMeasurement=function(_e,Re){this.currentAccelMeasurement.set(_e,Re)},Rs.prototype.addGyroMeasurement=function(_e,Re){this.currentGyroMeasurement.set(_e,Re);var Fe=Re-this.previousGyroMeasurement.timestampS;Rt(Fe)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},Rs.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var _e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,Re=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,_e);this.gyroIntegralQ.multiply(Re),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(Re);var Fe=new Ui;Fe.copy(this.filterQ),Fe.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(Fe),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var We=new Ui;We.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),We.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Wi*xs(We),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var it=new Ui;it.copy(this.filterQ),it.multiply(We),this.filterQ.slerp(it,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},Rs.prototype.getOrientation=function(){return this.filterQ},Rs.prototype.accelToQuaternion_=function(_e){var Re=new Oi;Re.copy(_e),Re.normalize();var Fe=new Ui;return Fe.setFromUnitVectors(new Oi(0,0,-1),Re),Fe.inverse(),Fe},Rs.prototype.gyroToQuaternionDelta_=function(_e,Re){var Fe=new Ui,We=new Oi;return We.copy(_e),We.normalize(),Fe.setFromAxisAngle(We,_e.length()*Re),Fe};function ir(_e,Re){this.predictionTimeS=_e,this.isDebug=Re,this.previousQ=new Ui,this.previousTimestampS=null,this.deltaQ=new Ui,this.outQ=new Ui}ir.prototype.getPrediction=function(_e,Re,Fe){if(!this.previousTimestampS)return this.previousQ.copy(_e),this.previousTimestampS=Fe,_e;var We=new Oi;We.copy(Re),We.normalize();var it=Re.length();if(it<Di*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Wi*it).toFixed(1)),this.outQ.copy(_e),this.previousQ.copy(_e),this.outQ;var _t=it*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(We,_t),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(_e),this.previousTimestampS=Fe,this.outQ};function Ys(_e,Re,Fe,We){this.yawOnly=Fe,this.accelerometer=new Oi,this.gyroscope=new Oi,this.filter=new Rs(_e,We),this.posePredictor=new ir(Re,We),this.isFirefoxAndroid=Oe(),this.isIOS=ke();var it=Te();this.isDeviceMotionInRadians=!this.isIOS&&it&&it<66,this.isWithoutDeviceMotion=st()||Ve(),this.filterToWorldQ=new Ui,ke()?this.filterToWorldQ.setFromAxisAngle(new Oi(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new Oi(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new Ui,this.worldToScreenQ=new Ui,this.originalPoseAdjustQ=new Ui,this.originalPoseAdjustQ.setFromAxisAngle(new Oi(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),Mt()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new Ui,this.orientationOut_=new Float32Array(4),this.start()}Ys.prototype.getPosition=function(){return null},Ys.prototype.getOrientation=function(){var _e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var it=new Ui().setFromAxisAngle(new Oi(0,0,-1),0),_t=new Ui;return window.orientation===-90?_t.setFromAxisAngle(new Oi(0,1,0),Math.PI/-2):_t.setFromAxisAngle(new Oi(0,1,0),Math.PI/2),it.multiply(_t)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var it=new Ui;return it.setFromAxisAngle(new Oi(1,0,0),-Math.PI/2),it}(),_e=this._deviceOrientationQ;var Fe=new Ui;return Fe.copy(_e),Fe.multiply(this.deviceOrientationFilterToWorldQ),Fe.multiply(this.resetQ),Fe.multiply(this.worldToScreenQ),Fe.multiplyQuaternions(this.deviceOrientationFixQ,Fe),this.yawOnly&&(Fe.x=0,Fe.z=0,Fe.normalize()),this.orientationOut_[0]=Fe.x,this.orientationOut_[1]=Fe.y,this.orientationOut_[2]=Fe.z,this.orientationOut_[3]=Fe.w,this.orientationOut_}else{var Re=this.filter.getOrientation();_e=this.posePredictor.getPrediction(Re,this.gyroscope,this.previousTimestampS)}var Fe=new Ui;return Fe.copy(this.filterToWorldQ),Fe.multiply(this.resetQ),Fe.multiply(_e),Fe.multiply(this.worldToScreenQ),this.yawOnly&&(Fe.x=0,Fe.z=0,Fe.normalize()),this.orientationOut_[0]=Fe.x,this.orientationOut_[1]=Fe.y,this.orientationOut_[2]=Fe.z,this.orientationOut_[3]=Fe.w,this.orientationOut_},Ys.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),Mt()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},Ys.prototype.onDeviceOrientation_=function(_e){this._deviceOrientationQ=this._deviceOrientationQ||new Ui;var Re=_e.alpha,Fe=_e.beta,We=_e.gamma;Re=(Re||0)*Math.PI/180,Fe=(Fe||0)*Math.PI/180,We=(We||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(Fe,Re,-We)},Ys.prototype.onDeviceMotion_=function(_e){this.updateDeviceMotion_(_e)},Ys.prototype.updateDeviceMotion_=function(_e){var Re=_e.accelerationIncludingGravity,Fe=_e.rotationRate,We=_e.timeStamp/1e3,it=We-this.previousTimestampS;if(it<0){mr("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=We;return}else if(it<=Ne||it>Pe){mr("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=We;return}this.accelerometer.set(-Re.x,-Re.y,-Re.z),Fe&&(dt()?this.gyroscope.set(-Fe.beta,Fe.alpha,Fe.gamma):this.gyroscope.set(Fe.alpha,Fe.beta,Fe.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,We)),this.filter.addAccelMeasurement(this.accelerometer,We),this.previousTimestampS=We},Ys.prototype.onOrientationChange_=function(_e){this.setScreenTransform_()},Ys.prototype.onMessage_=function(_e){var Re=_e.data;if(!(!Re||!Re.type)){var Fe=Re.type.toLowerCase();Fe==="devicemotion"&&this.updateDeviceMotion_(Re.deviceMotionEvent)}},Ys.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Oi(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Oi(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},Ys.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),ke()&&Ir()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},Ys.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var ca=60,L0=new Oi(1,0,0),al=new Oi(0,0,1),ua=new Ui;ua.setFromAxisAngle(L0,-Math.PI/2),ua.multiply(new Ui().setFromAxisAngle(al,Math.PI/2));var $e=function(){function _e(Re){oe(this,_e),this.config=Re,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new Ui,this._outQ=new Ui,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return ye(_e,[{key:"init",value:function(){var Fe=null;try{Fe=new RelativeOrientationSensor({frequency:ca,referenceFrame:"screen"}),Fe.addEventListener("error",this._onSensorError)}catch(We){this.errors.push(We),We.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):We.name==="ReferenceError"?this.useDeviceMotion():console.error(We)}Fe&&(this.api="sensor",this.sensor=Fe,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new Ys(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var Fe=this.sensor.quaternion;this._sensorQ.set(Fe[0],Fe[1],Fe[2],Fe[3]);var We=this._outQ;return We.copy(ua),We.multiply(this._sensorQ),this.config.YAW_ONLY&&(We.x=We.z=0,We.normalize()),this._out[0]=We.x,this._out[1]=We.y,this._out[2]=We.z,this._out[3]=We.w,this._out}},{key:"_onSensorError",value:function(Fe){this.errors.push(Fe.error),Fe.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):Fe.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(Fe.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),_e}(),At="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function Pt(){this.loadIcon_();var _e=document.createElement("div"),Dt=_e.style;Dt.position="fixed",Dt.top=0,Dt.right=0,Dt.bottom=0,Dt.left=0,Dt.backgroundColor="gray",Dt.fontFamily="sans-serif",Dt.zIndex=1e6;var Re=document.createElement("img");Re.src=this.icon;var Dt=Re.style;Dt.marginLeft="25%",Dt.marginTop="25%",Dt.width="50%",_e.appendChild(Re);var Fe=document.createElement("div"),Dt=Fe.style;Dt.textAlign="center",Dt.fontSize="16px",Dt.lineHeight="24px",Dt.margin="24px 25%",Dt.width="50%",Fe.innerHTML="Place your phone into your Cardboard viewer.",_e.appendChild(Fe);var We=document.createElement("div"),Dt=We.style;Dt.backgroundColor="#CFD8DC",Dt.position="fixed",Dt.bottom=0,Dt.width="100%",Dt.height="48px",Dt.padding="14px 24px",Dt.boxSizing="border-box",Dt.color="#656A6B",_e.appendChild(We);var it=document.createElement("div");it.style.float="left",it.innerHTML="No Cardboard viewer?";var _t=document.createElement("a");_t.href="https://www.google.com/get/cardboard/get-cardboard/",_t.innerHTML="get one",_t.target="_blank";var Dt=_t.style;Dt.float="right",Dt.fontWeight=600,Dt.textTransform="uppercase",Dt.borderLeft="1px solid gray",Dt.paddingLeft="24px",Dt.textDecoration="none",Dt.color="#656A6B",We.appendChild(it),We.appendChild(_t),this.overlay=_e,this.text=Fe,this.hide()}Pt.prototype.show=function(_e){!_e&&!this.overlay.parentElement?document.body.appendChild(this.overlay):_e&&(this.overlay.parentElement&&this.overlay.parentElement!=_e&&this.overlay.parentElement.removeChild(this.overlay),_e.appendChild(this.overlay)),this.overlay.style.display="block";var Re=this.overlay.querySelector("img"),Fe=Re.style;Mt()?(Fe.width="20%",Fe.marginLeft="40%",Fe.marginTop="3%"):(Fe.width="50%",Fe.marginLeft="25%",Fe.marginTop="25%")},Pt.prototype.hide=function(){this.overlay.style.display="none"},Pt.prototype.showTemporarily=function(_e,Re){this.show(Re),this.timer=setTimeout(this.hide.bind(this),_e)},Pt.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},Pt.prototype.update=function(){this.disableShowTemporarily(),!Mt()&&tr()?this.show():this.hide()},Pt.prototype.loadIcon_=function(){this.icon=Qe("image/svg+xml",At)};var si="CardboardV1",kt="WEBVR_CARDBOARD_VIEWER",di="webvr-polyfill-viewer-selector";function Ii(_e){try{this.selectedKey=localStorage.getItem(kt)}catch(Re){console.error("Failed to load viewer profile: %s",Re)}this.selectedKey||(this.selectedKey=_e||si),this.dialog=this.createDialog_(Dr.Viewers),this.root=null,this.onChangeCallbacks_=[]}Ii.prototype.show=function(_e){this.root=_e,_e.appendChild(this.dialog);var Re=this.dialog.querySelector("#"+this.selectedKey);Re.checked=!0,this.dialog.style.display="block"},Ii.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},Ii.prototype.getCurrentViewer=function(){return Dr.Viewers[this.selectedKey]},Ii.prototype.getSelectedKey_=function(){var _e=this.dialog.querySelector("input[name=field]:checked");return _e?_e.id:null},Ii.prototype.onChange=function(_e){this.onChangeCallbacks_.push(_e)},Ii.prototype.fireOnChange_=function(_e){for(var Re=0;Re<this.onChangeCallbacks_.length;Re++)this.onChangeCallbacks_[Re](_e)},Ii.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!Dr.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(Dr.Viewers[this.selectedKey]);try{localStorage.setItem(kt,this.selectedKey)}catch(_e){console.error("Failed to save viewer profile: %s",_e)}this.hide()},Ii.prototype.createDialog_=function(_e){var Re=document.createElement("div");Re.classList.add(di),Re.style.display="none";var Fe=document.createElement("div"),_t=Fe.style;_t.position="fixed",_t.left=0,_t.top=0,_t.width="100%",_t.height="100%",_t.background="rgba(0, 0, 0, 0.3)",Fe.addEventListener("click",this.hide.bind(this));var We=280,it=document.createElement("div"),_t=it.style;_t.boxSizing="border-box",_t.position="fixed",_t.top="24px",_t.left="50%",_t.marginLeft=-280/2+"px",_t.width=We+"px",_t.padding="24px",_t.overflow="hidden",_t.background="#fafafa",_t.fontFamily="'Roboto', sans-serif",_t.boxShadow="0px 5px 20px #666",it.appendChild(this.createH1_("Select your viewer"));for(var Dt in _e)it.appendChild(this.createChoice_(Dt,_e[Dt].label));return it.appendChild(this.createButton_("Save",this.onSave_.bind(this))),Re.appendChild(Fe),Re.appendChild(it),Re},Ii.prototype.createH1_=function(_e){var Re=document.createElement("h1"),Fe=Re.style;return Fe.color="black",Fe.fontSize="20px",Fe.fontWeight="bold",Fe.marginTop=0,Fe.marginBottom="24px",Re.innerHTML=_e,Re},Ii.prototype.createChoice_=function(_e,Re){var Fe=document.createElement("div");Fe.style.marginTop="8px",Fe.style.color="black";var We=document.createElement("input");We.style.fontSize="30px",We.setAttribute("id",_e),We.setAttribute("type","radio"),We.setAttribute("value",_e),We.setAttribute("name","field");var it=document.createElement("label");return it.style.marginLeft="4px",it.setAttribute("for",_e),it.innerHTML=Re,Fe.appendChild(We),Fe.appendChild(it),Fe},Ii.prototype.createButton_=function(_e,Re){var Fe=document.createElement("button");Fe.innerHTML=_e;var We=Fe.style;return We.float="right",We.textTransform="uppercase",We.color="#1094f7",We.fontSize="14px",We.letterSpacing=0,We.border=0,We.background="none",We.marginTop="16px",Fe.addEventListener("click",Re),Fe};var pn=typeof window<"u"?window:typeof p<"u"?p:typeof self<"u"?self:{};function nn(_e){return _e&&_e.__esModule&&Object.prototype.hasOwnProperty.call(_e,"default")?_e.default:_e}function hi(_e,Re){return Re={exports:{}},_e(Re,Re.exports),Re.exports}var Tn=hi(function(_e,Re){(function(We,it){_e.exports=it()})(pn,function(){return function(Fe){var We={};function it(_t){if(We[_t])return We[_t].exports;var Dt=We[_t]={i:_t,l:!1,exports:{}};return Fe[_t].call(Dt.exports,Dt,Dt.exports,it),Dt.l=!0,Dt.exports}return it.m=Fe,it.c=We,it.d=function(_t,Dt,ei){it.o(_t,Dt)||Object.defineProperty(_t,Dt,{configurable:!1,enumerable:!0,get:ei})},it.n=function(_t){var Dt=_t&&_t.__esModule?function(){return _t.default}:function(){return _t};return it.d(Dt,"a",Dt),Dt},it.o=function(_t,Dt){return Object.prototype.hasOwnProperty.call(_t,Dt)},it.p="",it(it.s=0)}([function(Fe,We,it){var _t=function(){function ni(Ri,an){for(var mi=0;mi<an.length;mi++){var On=an[mi];On.enumerable=On.enumerable||!1,On.configurable=!0,"value"in On&&(On.writable=!0),Object.defineProperty(Ri,On.key,On)}}return function(Ri,an,mi){return an&&ni(Ri.prototype,an),mi&&ni(Ri,mi),Ri}}();function Dt(ni,Ri){if(!(ni instanceof Ri))throw new TypeError("Cannot call a class as a function")}var ei=it(1),pi=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,Ut=function(){function ni(){Dt(this,ni),pi?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",ei),this.noSleepVideo.addEventListener("timeupdate",(function(Ri){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}).bind(this)))}return _t(ni,[{key:"enable",value:function(){pi?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){pi?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),ni}();Fe.exports=Ut},function(Fe,We,it){Fe.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Bn=nn(Tn),Dn=1e3,ns=[0,0,.5,1],Kn=[.5,0,.5,1],or=window.requestAnimationFrame,br=window.cancelAnimationFrame;function gs(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function bs(_e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:_e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:_e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:_e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:_e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return Wn("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),_e.hasOrientation}}})}function rn(_e){_e=_e||{};var Re="wakelock"in _e?_e.wakelock:!0;this.isPolyfilled=!0,this.displayId=Dn++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return Wn("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new bs({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,Re&&tr()&&(this.wakelock_=new Bn)}rn.prototype.getFrameData=function(_e){return cr(_e,this._getPose(),this)},rn.prototype.getPose=function(){return Wn("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},rn.prototype.resetPose=function(){return Wn("VRDisplay.prototype.resetPose"),this._resetPose()},rn.prototype.getImmediatePose=function(){return Wn("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},rn.prototype.requestAnimationFrame=function(_e){return or(_e)},rn.prototype.cancelAnimationFrame=function(_e){return br(_e)},rn.prototype.wrapForFullscreen=function(_e){if(ke())return _e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var Re=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",Re.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==_e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=_e,this.originalParent_=_e.parentElement,this.originalParent_||document.body.appendChild(_e),!this.fullscreenWrapper_.parentElement){var Fe=this.fullscreenElement_.parentElement;Fe.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),Fe.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var We=this;function it(){if(We.fullscreenElement_){var _t=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];We.fullscreenElement_.setAttribute("style",_t.join("; ")+";")}}return it(),this.fullscreenWrapper_},rn.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var _e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?_e.setAttribute("style",this.fullscreenElementCachedStyle_):_e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var Re=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(_e),this.originalParent_===Re?Re.insertBefore(_e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(_e),Re.removeChild(this.fullscreenWrapper_),_e}},rn.prototype.requestPresent=function(_e){var Re=this.isPresenting,Fe=this;return _e instanceof Array||(Wn("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),_e=[_e]),new Promise(function(We,it){if(!Fe.capabilities.canPresent){it(new Error("VRDisplay is not capable of presenting."));return}if(_e.length==0||_e.length>Fe.capabilities.maxLayers){it(new Error("Invalid number of layers."));return}var _t=_e[0];if(!_t.source){We();return}var Dt=_t.leftBounds||ns,ei=_t.rightBounds||Kn;if(Re){var pi=Fe.layer_;pi.source!==_t.source&&(pi.source=_t.source);for(var Ut=0;Ut<4;Ut++)pi.leftBounds[Ut]=Dt[Ut],pi.rightBounds[Ut]=ei[Ut];Fe.wrapForFullscreen(Fe.layer_.source),Fe.updatePresent_(),We();return}if(Fe.layer_={predistorted:_t.predistorted,source:_t.source,leftBounds:Dt.slice(0),rightBounds:ei.slice(0)},Fe.waitingForPresent_=!1,Fe.layer_&&Fe.layer_.source){var ni=Fe.wrapForFullscreen(Fe.layer_.source),Ri=function(){var On=Qi();Fe.isPresenting=ni===On,Fe.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(nr){console.error("screen.orientation.lock() failed due to",nr.message)}),Fe.waitingForPresent_=!1,Fe.beginPresent_(),We()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),Fe.removeFullscreenWrapper(),Fe.disableWakeLock(),Fe.endPresent_(),Fe.removeFullscreenListeners_()),Fe.fireVRDisplayPresentChange_()},an=function(){Fe.waitingForPresent_&&(Fe.removeFullscreenWrapper(),Fe.removeFullscreenListeners_(),Fe.disableWakeLock(),Fe.waitingForPresent_=!1,Fe.isPresenting=!1,it(new Error("Unable to present.")))};Fe.addFullscreenListeners_(ni,Ri,an),Ci(ni)?(Fe.enableWakeLock(),Fe.waitingForPresent_=!0):(ke()||Ce())&&(Fe.enableWakeLock(),Fe.isPresenting=!0,Fe.beginPresent_(),Fe.fireVRDisplayPresentChange_(),We())}!Fe.waitingForPresent_&&!ke()&&(ci(),it(new Error("Unable to present.")))})},rn.prototype.exitPresent=function(){var _e=this.isPresenting,Re=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(Fe,We){_e?(!ci()&&ke()&&(Re.endPresent_(),Re.fireVRDisplayPresentChange_()),Ce()&&(Re.removeFullscreenWrapper(),Re.removeFullscreenListeners_(),Re.endPresent_(),Re.fireVRDisplayPresentChange_()),Fe()):We(new Error("Was not presenting to VRDisplay."))})},rn.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},rn.prototype.fireVRDisplayPresentChange_=function(){var _e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(_e)},rn.prototype.fireVRDisplayConnect_=function(){var _e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(_e)},rn.prototype.addFullscreenListeners_=function(_e,Re,Fe){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=_e,this.fullscreenChangeHandler_=Re,this.fullscreenErrorHandler_=Fe,Re&&(document.fullscreenEnabled?_e.addEventListener("fullscreenchange",Re,!1):document.webkitFullscreenEnabled?_e.addEventListener("webkitfullscreenchange",Re,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",Re,!1):document.msFullscreenEnabled&&_e.addEventListener("msfullscreenchange",Re,!1)),Fe&&(document.fullscreenEnabled?_e.addEventListener("fullscreenerror",Fe,!1):document.webkitFullscreenEnabled?_e.addEventListener("webkitfullscreenerror",Fe,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",Fe,!1):document.msFullscreenEnabled&&_e.addEventListener("msfullscreenerror",Fe,!1))},rn.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var _e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var Re=this.fullscreenChangeHandler_;_e.removeEventListener("fullscreenchange",Re,!1),_e.removeEventListener("webkitfullscreenchange",Re,!1),document.removeEventListener("mozfullscreenchange",Re,!1),_e.removeEventListener("msfullscreenchange",Re,!1)}if(this.fullscreenErrorHandler_){var Fe=this.fullscreenErrorHandler_;_e.removeEventListener("fullscreenerror",Fe,!1),_e.removeEventListener("webkitfullscreenerror",Fe,!1),document.removeEventListener("mozfullscreenerror",Fe,!1),_e.removeEventListener("msfullscreenerror",Fe,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},rn.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},rn.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},rn.prototype.beginPresent_=function(){},rn.prototype.endPresent_=function(){},rn.prototype.submitFrame=function(_e){},rn.prototype.getEyeParameters=function(_e){return null};var $n={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},as={LEFT:"left",RIGHT:"right"};function Or(_e){var Re=Jn({},$n);_e=Jn(Re,_e||{}),rn.call(this,{wakelock:_e.MOBILE_WAKE_LOCK}),this.config=_e,this.displayName="Cardboard VRDisplay",this.capabilities=new bs({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new $e(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Fo(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Dr(this.dpdb_.getDeviceParams(),_e.ADDITIONAL_VIEWERS),this.viewerSelector_=new Ii(_e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new Pt),ke()&&window.addEventListener("resize",this.onResize_.bind(this))}return Or.prototype=Object.create(rn.prototype),Or.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},Or.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},Or.prototype._getFieldOfView=function(_e){var Re;if(_e==as.LEFT)Re=this.deviceInfo_.getFieldOfViewLeftEye();else if(_e==as.RIGHT)Re=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",_e),null;return Re},Or.prototype._getEyeOffset=function(_e){var Re;if(_e==as.LEFT)Re=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(_e==as.RIGHT)Re=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",_e),null;return Re},Or.prototype.getEyeParameters=function(_e){var Re=this._getEyeOffset(_e),Fe=this._getFieldOfView(_e),We={offset:Re,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(We,"fieldOfView",{enumerable:!0,get:function(){return Wn("VRFieldOfView","VRFrameData's projection matrices"),Fe}}),We},Or.prototype.onDeviceParamsUpdated_=function(_e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(_e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},Or.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},Or.prototype.beginPresent_=function(){var _e=this.layer_.source.getContext("webgl");_e||(_e=this.layer_.source.getContext("experimental-webgl")),_e||(_e=this.layer_.source.getContext("webgl2")),_e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(_e.canvas.width=Yt()*this.bufferScale_,_e.canvas.height=zt()*this.bufferScale_,this.cardboardUI_=new ht(_e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new ht(_e)),this.distorter_=new Jr(_e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen((function(Re){this.viewerSelector_.show(this.layer_.source.parentElement),Re.stopPropagation(),Re.preventDefault()}).bind(this),(function(Re){this.exitPresent(),Re.stopPropagation(),Re.preventDefault()}).bind(this)),this.rotateInstructions_&&(Mt()&&tr()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},Or.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},Or.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},Or.prototype.submitFrame=function(_e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var Re=this.layer_.source.getContext("webgl");Re||(Re=this.layer_.source.getContext("experimental-webgl")),Re||(Re=this.layer_.source.getContext("webgl2"));var Fe=Re.canvas;(Fe.width!=this.lastWidth||Fe.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=Fe.width,this.lastHeight=Fe.height,this.cardboardUI_.render()}},Or.prototype.onOrientationChange_=function(_e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},Or.prototype.onResize_=function(_e){if(this.layer_){var Re=this.layer_.source.getContext("webgl");Re||(Re=this.layer_.source.getContext("experimental-webgl")),Re||(Re=this.layer_.source.getContext("webgl2"));var Fe=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];Re.canvas.setAttribute("style",Fe.join("; ")+";"),bn(Re.canvas)}},Or.prototype.onViewerChanged_=function(_e){this.deviceInfo_.setViewer(_e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},Or.prototype.fireVRDisplayDeviceParamsChange_=function(){var _e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(_e)},Or.VRFrameData=gs,Or.VRDisplay=rn,Or})}),T=S(V),F="0.10.12",N={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function k(te){this.config=Q(Q({},N),te),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&K())&&(this.enable(),this.getVRDisplays().then(function(de){de&&de[0]&&de[0].fireVRDisplayConnect_&&de[0].fireVRDisplayConnect_()}))}k.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(K()){var te=new T({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(te)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},k.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var te=this.native.VRFrameData,de=new this.native.VRFrameData,oe=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(ye){if(ye instanceof te){oe.call(this,ye);return}oe.call(this,de),ye.pose=de.pose,D(de.leftProjectionMatrix,ye.leftProjectionMatrix),D(de.rightProjectionMatrix,ye.rightProjectionMatrix),D(de.leftViewMatrix,ye.leftViewMatrix),D(de.rightViewMatrix,ye.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=T.VRDisplay,window.VRFrameData=T.VRFrameData},k.prototype.getVRDisplays=function(){var te=this;return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(function(de){return de.length>0?de:te.getPolyfillDisplays()}):Promise.resolve(this.getPolyfillDisplays())},k.version=F,k.VRFrameData=T.VRFrameData,k.VRDisplay=T.VRDisplay;var G=Object.freeze({default:k}),Z=G&&k||G;typeof p<"u"&&p.window&&(p.document||(p.document=p.window.document),p.navigator||(p.navigator=p.window.navigator));var ne=Z;return ne})},"./node_modules/word-wrapper/index.js":ie=>{var we=/\n/,P=`
`,p=/\s/;ie.exports=function(V,T){var F=ie.exports.lines(V,T);return F.map(function(N){return V.substring(N.start,N.end)}).join(`
`)},ie.exports.lines=function(T,F){if(F=F||{},F.width===0&&F.mode!=="nowrap")return[];T=T||"";var N=typeof F.width=="number"?F.width:Number.MAX_VALUE,k=Math.max(0,F.start||0),G=typeof F.end=="number"?F.end:T.length,Z=F.mode,ne=F.measure||Q;return Z==="pre"?K(ne,T,k,G,N):D(ne,T,k,G,N,Z)};function S(V,T,F,N){var k=V.indexOf(T,F);return k===-1||k>N?N:k}function z(V){return p.test(V)}function K(V,T,F,N,k){for(var G=[],Z=F,ne=F;ne<N&&ne<T.length;ne++){var te=T.charAt(ne),de=we.test(te);if(de||ne===N-1){var oe=de?ne:ne+1,ye=V(T,Z,oe,k);G.push(ye),Z=ne+1}}return G}function D(V,T,F,N,k,G){var Z=[],ne=k;for(G==="nowrap"&&(ne=Number.MAX_VALUE);F<N&&F<T.length;){for(var te=S(T,P,F,N);F<te&&z(T.charAt(F));)F++;var de=V(T,F,te,ne),oe=F+(de.end-de.start),ye=oe+P.length;if(oe<te){for(;oe>F&&!z(T.charAt(oe));)oe--;if(oe===F)ye>F+P.length&&ye--,oe=ye;else for(ye=oe;oe>F&&z(T.charAt(oe-P.length));)oe--}if(oe>=F){var Me=V(T,F,oe,ne);Z.push(Me)}F=ye}return Z}function Q(V,T,F,N){var k=Math.min(N,F-T);return{start:T,end:T+k}}},"./node_modules/xhr/index.js":(ie,we,P)=>{var p=P("./node_modules/global/window.js"),S=P("./node_modules/is-function/index.js"),z=P("./node_modules/parse-headers/parse-headers.js"),K=P("./node_modules/xtend/immutable.js");ie.exports=T,ie.exports.default=T,T.XMLHttpRequest=p.XMLHttpRequest||k,T.XDomainRequest="withCredentials"in new T.XMLHttpRequest?T.XMLHttpRequest:p.XDomainRequest,D(["get","put","post","patch","head","delete"],function(G){T[G==="delete"?"del":G]=function(Z,ne,te){return ne=V(Z,ne,te),ne.method=G.toUpperCase(),F(ne)}});function D(G,Z){for(var ne=0;ne<G.length;ne++)Z(G[ne])}function Q(G){for(var Z in G)if(G.hasOwnProperty(Z))return!1;return!0}function V(G,Z,ne){var te=G;return S(Z)?(ne=Z,typeof G=="string"&&(te={uri:G})):te=K(Z,{uri:G}),te.callback=ne,te}function T(G,Z,ne){return Z=V(G,Z,ne),F(Z)}function F(G){if(typeof G.callback>"u")throw new Error("callback argument missing");var Z=!1,ne=function(dt,Mt,Rt){Z||(Z=!0,G.callback(dt,Mt,Rt))};function te(){Me.readyState===4&&setTimeout(ye,0)}function de(){var st=void 0;if(Me.response?st=Me.response:st=Me.responseText||N(Me),Oe)try{st=JSON.parse(st)}catch{}return st}function oe(st){return clearTimeout(Te),st instanceof Error||(st=new Error(""+(st||"Unknown XMLHttpRequest Error"))),st.statusCode=0,ne(st,Ve)}function ye(){if(!Pe){var st;clearTimeout(Te),G.useXDR&&Me.status===void 0?st=200:st=Me.status===1223?204:Me.status;var dt=Ve,Mt=null;return st!==0?(dt={body:de(),statusCode:st,method:De,headers:{},url:Qe,rawRequest:Me},Me.getAllResponseHeaders&&(dt.headers=z(Me.getAllResponseHeaders()))):Mt=new Error("Internal XMLHttpRequest Error"),ne(Mt,dt,dt.body)}}var Me=G.xhr||null;Me||(G.cors||G.useXDR?Me=new T.XDomainRequest:Me=new T.XMLHttpRequest);var Ne,Pe,Qe=Me.url=G.uri||G.url,De=Me.method=G.method||"GET",ke=G.body||G.data,Ce=Me.headers=G.headers||{},fe=!!G.sync,Oe=!1,Te,Ve={body:void 0,headers:{},statusCode:0,method:De,url:Qe,rawRequest:Me};if("json"in G&&G.json!==!1&&(Oe=!0,Ce.accept||Ce.Accept||(Ce.Accept="application/json"),De!=="GET"&&De!=="HEAD"&&(Ce["content-type"]||Ce["Content-Type"]||(Ce["Content-Type"]="application/json"),ke=JSON.stringify(G.json===!0?ke:G.json))),Me.onreadystatechange=te,Me.onload=ye,Me.onerror=oe,Me.onprogress=function(){},Me.onabort=function(){Pe=!0},Me.ontimeout=oe,Me.open(De,Qe,!fe,G.username,G.password),fe||(Me.withCredentials=!!G.withCredentials),!fe&&G.timeout>0&&(Te=setTimeout(function(){if(!Pe){Pe=!0,Me.abort("timeout");var st=new Error("XMLHttpRequest timeout");st.code="ETIMEDOUT",oe(st)}},G.timeout)),Me.setRequestHeader)for(Ne in Ce)Ce.hasOwnProperty(Ne)&&Me.setRequestHeader(Ne,Ce[Ne]);else if(G.headers&&!Q(G.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in G&&(Me.responseType=G.responseType),"beforeSend"in G&&typeof G.beforeSend=="function"&&G.beforeSend(Me),Me.send(ke||null),Me}function N(G){try{if(G.responseType==="document")return G.responseXML;var Z=G.responseXML&&G.responseXML.documentElement.nodeName==="parsererror";if(G.responseType===""&&!Z)return G.responseXML}catch{}return null}function k(){}},"./node_modules/xml-parse-from-string/index.js":ie=>{ie.exports=function(){return typeof self.DOMParser<"u"?function(P){var p=new self.DOMParser;return p.parseFromString(P,"application/xml")}:typeof self.ActiveXObject<"u"&&new self.ActiveXObject("Microsoft.XMLDOM")?function(P){var p=new self.ActiveXObject("Microsoft.XMLDOM");return p.async="false",p.loadXML(P),p}:function(P){var p=document.createElement("div");return p.innerHTML=P,p}}()},"./node_modules/xtend/immutable.js":ie=>{ie.exports=P;var we=Object.prototype.hasOwnProperty;function P(){for(var p={},S=0;S<arguments.length;S++){var z=arguments[S];for(var K in z)we.call(z,K)&&(p[K]=z[K])}return p}},"./src/components/anchored.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/index.js"),z=S.debug("components:anchored:warn");ie.exports.Component=p("anchored",{schema:{persistent:{default:!1}},init:function(){var D=this.el.sceneEl,Q=D.getAttribute("webxr"),V=Q.optionalFeatures;V.indexOf("anchors")===-1&&(V.push("anchors"),this.el.sceneEl.setAttribute("webxr",Q)),this.auxQuaternion=new THREE.Quaternion,this.onEnterVR=this.onEnterVR.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR)},onEnterVR:function(){this.anchor=void 0,this.requestPersistentAnchorPending=this.data.persistent,this.requestAnchorPending=!this.data.persistent},tick:function(){var D=this.el.sceneEl,Q=D.renderer.xr,V,T,F,N=this.el.object3D;!D.is("ar-mode")&&!D.is("vr-mode")||(!this.anchor&&this.requestPersistentAnchorPending&&this.restorePersistentAnchor(),!this.anchor&&this.requestAnchorPending&&this.createAnchor(),this.anchor&&(V=D.frame,T=Q.getReferenceSpace(),F=V.getPose(this.anchor.anchorSpace,T),N.matrix.elements=F.transform.matrix,N.matrix.decompose(N.position,N.rotation,N.scale)))},createAnchor:async function(Q,V){var T=this.el.sceneEl,F=T.renderer.xr,N,k,G,Z,ne=this.el.object3D;if(Q=Q||ne.position,V=V||this.auxQuaternion.setFromEuler(ne.rotation),!K(T)){z("This browser doesn't support the WebXR anchors module");return}this.anchor&&this.deleteAnchor(),N=T.frame,k=F.getReferenceSpace(),G=new XRRigidTransform({x:Q.x,y:Q.y,z:Q.z},{x:V.x,y:V.y,z:V.z,w:V.w}),this.requestAnchorPending=!1,Z=await N.createAnchor(G,k),this.data.persistent&&(this.el.id?(this.persistentHandle=await Z.requestPersistentHandle(),localStorage.setItem(this.el.id,this.persistentHandle)):z("The anchor won't be persisted because the entity has no assigned id.")),T.object3D.attach(this.el.object3D),this.anchor=Z},restorePersistentAnchor:async function(){var Q=this.el.sceneEl.renderer.xr,V=Q.getSession(),T=V.persistentAnchors,F;if(this.requestPersistentAnchorPending=!1,!this.el.id){z("The entity associated to the persistent anchor cannot be retrieved because it doesn't have an assigned id."),this.requestAnchorPending=!0;return}if(T){F=localStorage.getItem(this.el.id);for(var N=0;N<T.length;++N)if(F===T[N]){this.anchor=await V.restorePersistentAnchor(T[N]),this.anchor&&(this.persistentHandle=T[N]);break}this.anchor||(this.requestAnchorPending=!0)}else this.requestPersistentAnchorPending=!0},deleteAnchor:function(){var D,Q,V=this.anchor;V&&(D=this.el.sceneEl.renderer.xr,Q=D.getSession(),V.delete(),this.el.sceneEl.object3D.add(this.el.object3D),this.persistentHandle&&Q.deletePersistentAnchor(this.persistentHandle),this.anchor=void 0)}});function K(D){var Q=D.renderer.xr,V=Q.getSession();return V&&V.restorePersistentAnchor}},"./src/components/animation.js":(ie,we,P)=>{var p=P("./node_modules/super-animejs/lib/anime.es.js").default,S=P("./src/core/component.js").components,z=P("./src/core/component.js").registerComponent,K=P("./src/lib/three.js"),D=P("./src/utils/index.js"),Q=new K.Color,V=new K.Color,T=D.entity.getComponentProperty,F=D.entity.setComponentProperty,N={},k="color",G="position",Z="rotation",ne="scale",te="components",de="object3D";ie.exports.Component=z("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(Ce){return Ce===!0||Ce==="true"?!0:Ce===!1||Ce==="false"?!1:parseInt(Ce,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var Ce=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){Ce.animationIsPlaying=!1,Ce.el.emit("animationcomplete",Ce.eventDetail,!1),Ce.id&&Ce.el.emit("animationcomplete__"+Ce.id,Ce.eventDetail,!1)}}},update:function(Ce){var fe=this.config,Oe=this.data;this.animationIsPlaying=!1,this.data.enabled&&Oe.property&&(fe.autoplay=!1,fe.direction=Oe.dir,fe.duration=Oe.dur,fe.easing=Oe.easing,fe.elasticity=Oe.elasticity,fe.loop=Oe.loop,fe.round=Oe.round,this.createAndStartAnimation())},tick:function(Ce,fe){this.animationIsPlaying&&(this.time+=fe,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var Ce=this.data;if(this.updateConfig(),this.animationIsPlaying=!1,this.animation=p(this.config),this.animation.began=!0,this.removeEventListeners(),this.addEventListeners(),!(!Ce.autoplay||Ce.startEvents&&Ce.startEvents.length)){if(Ce.delay){setTimeout(this.beginAnimation,Ce.delay);return}this.beginAnimation()}},beginAnimation:function(){this.updateConfig(),this.animation.began=!0,this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){if(this.data.enabled){if(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=p(this.config),this.data.delay){setTimeout(this.beginAnimation,this.data.delay);return}this.beginAnimation()}},updateConfigForRawColor:function(){var Ce=this.config,fe=this.data,Oe=this.el,Te,Ve,st;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){Te=fe.from===""?Pe(Oe,fe.property):fe.from,st=fe.to,this.setColorConfig(Te,st),Te=this.fromColor,st=this.toColor,this.targetsArray.length=0,this.targetsArray.push(Te),Ce.targets=this.targetsArray;for(Ve in st)Ce[Ve]=st[Ve];Ce.update=function(){var dt={};return function(Mt){var Rt;Rt=Mt.animatables[0].target,!(Rt.r===dt.r&&Rt.g===dt.g&&Rt.b===dt.b)&&Qe(Oe,fe.property,Rt,fe.type)}}()}},updateConfigForDefault:function(){var Ce=this.config,fe=this.data,Oe=this.el,Te,Ve,st,dt;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(fe.from===""?Te=ke(fe)?Pe(Oe,fe.property):T(Oe,fe.property):Te=fe.from,dt=fe.to,st=!isNaN(Te||dt),st?(Te=parseFloat(Te),dt=parseFloat(dt)):(Te=Te&&Te.toString(),dt=dt&&dt.toString()),Ve=fe.to==="true"||fe.to==="false"||fe.to===!0||fe.to===!1,Ve&&(Te=fe.from==="true"||fe.from===!0?1:0,dt=fe.to==="true"||fe.to===!0?1:0),this.targets.aframeProperty=Te,Ce.targets=this.targets,Ce.aframeProperty=dt,Ce.update=function(){var Mt;return function(Rt){var Yt;Yt=Rt.animatables[0].target.aframeProperty,Yt!==Mt&&(Mt=Yt,Ve&&(Yt=Yt>=1),ke(fe)?Qe(Oe,fe.property,Yt,fe.type):F(Oe,fe.property,Yt))}}())},updateConfigForVector:function(){var Ce=this.config,fe=this.data,Oe=this.el,Te,Ve,st;Ve=fe.from!==""?D.coordinates.parse(fe.from):T(Oe,fe.property),st=D.coordinates.parse(fe.to),fe.property===Z&&(ye(Ve),ye(st)),this.targetsArray.length=0,this.targetsArray.push(Ve),Ce.targets=this.targetsArray;for(Te in st)Ce[Te]=st[Te];if(fe.property===G||fe.property===Z||fe.property===ne){Ce.update=function(){var dt={};return function(Mt){var Rt=Mt.animatables[0].target;Rt.x===dt.x&&Rt.y===dt.y&&Rt.z===dt.z||(dt.x=Rt.x,dt.y=Rt.y,dt.z=Rt.z,Oe.object3D[fe.property].set(Rt.x,Rt.y,Rt.z))}}();return}Ce.update=function(){var dt={};return function(Mt){var Rt=Mt.animatables[0].target;Rt.x===dt.x&&Rt.y===dt.y&&Rt.z===dt.z||(dt.x=Rt.x,dt.y=Rt.y,dt.z=Rt.z,F(Oe,fe.property,Rt))}}()},updateConfig:function(){var Ce;Ce=oe(this.el,this.data.property),ke(this.data)&&this.data.type===k?this.updateConfigForRawColor():Ce==="vec2"||Ce==="vec3"||Ce==="vec4"?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(Ce){var fe,Oe=this.data,Te=this.el,Ve=this;return Oe.from!==""||!Oe.property.startsWith(te)||(fe=De(Oe.property)[1],Te.components[fe])?!1:(Te.addEventListener("componentinitialized",function st(dt){dt.detail.name===fe&&(Ce(),Ve.animation=p(Ve.config),Te.removeEventListener("componentinitialized",st))}),!0)},stopRelatedAnimations:function(){var Ce,fe;for(fe in this.el.components)Ce=this.el.components[fe],fe!==this.attrName&&Ce.name==="animation"&&Ce.animationIsPlaying&&Ce.data.property===this.data.property&&(Ce.animationIsPlaying=!1)},addEventListeners:function(){var Ce=this.data,fe=this.el;Me(fe,Ce.startEvents,this.onStartEvent),Me(fe,Ce.pauseEvents,this.pauseAnimation),Me(fe,Ce.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var Ce=this.data,fe=this.el;Ne(fe,Ce.startEvents,this.onStartEvent),Ne(fe,Ce.pauseEvents,this.pauseAnimation),Ne(fe,Ce.resumeEvents,this.resumeAnimation)},setColorConfig:function(Ce,fe){Q.set(Ce),V.set(fe),Ce=this.fromColor,fe=this.toColor,Ce.r=Q.r,Ce.g=Q.g,Ce.b=Q.b,fe.r=V.r,fe.g=V.g,fe.b=V.b}});function oe(Ce,fe){var Oe,Te,Ve,st;return Ve=fe.split("."),Te=Ve[0],st=Ve[1],Oe=Ce.components[Te]||S[Te],!Oe||st&&!Oe.schema[st]?null:st?Oe.schema[st].type:Oe.schema.type}function ye(Ce){Ce.x=K.MathUtils.degToRad(Ce.x),Ce.y=K.MathUtils.degToRad(Ce.y),Ce.z=K.MathUtils.degToRad(Ce.z)}function Me(Ce,fe,Oe){var Te;for(Te=0;Te<fe.length;Te++)Ce.addEventListener(fe[Te],Oe)}function Ne(Ce,fe,Oe){var Te;for(Te=0;Te<fe.length;Te++)Ce.removeEventListener(fe[Te],Oe)}function Pe(Ce,fe){var Oe,Te,Ve;for(Te=De(fe),Ve=Ce,Oe=0;Oe<Te.length;Oe++)Ve=Ve[Te[Oe]];if(Ve===void 0)throw console.log(Ce),new Error("[animation] property ("+fe+") could not be found");return Ve}function Qe(Ce,fe,Oe,Te){var Ve,st,dt,Mt;for(fe.startsWith("object3D.rotation")&&(Oe=K.MathUtils.degToRad(Oe)),st=De(fe),Mt=Ce,Ve=0;Ve<st.length-1;Ve++)Mt=Mt[st[Ve]];if(dt=st[st.length-1],Te===k){"r"in Mt[dt]?(Mt[dt].r=Oe.r,Mt[dt].g=Oe.g,Mt[dt].b=Oe.b):(Mt[dt].x=Oe.r,Mt[dt].y=Oe.g,Mt[dt].z=Oe.b);return}Mt[dt]=Oe}function De(Ce){return Ce in N||(N[Ce]=Ce.split(".")),N[Ce]}function ke(Ce){return Ce.isRawProperty||Ce.property.startsWith(te)||Ce.property.startsWith(de)}},"./src/components/camera.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js");ie.exports.Component=p("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var z,K=this.el;z=this.camera=new S.PerspectiveCamera,K.setObject3D("camera",z)},update:function(z){var K=this.data,D=this.camera;D.aspect=K.aspect||window.innerWidth/window.innerHeight,D.far=K.far,D.fov=K.fov,D.near=K.near,D.zoom=K.zoom,D.updateProjectionMatrix(),this.updateActiveCamera(z),this.updateSpectatorCamera(z)},updateActiveCamera:function(z){var K=this.data,D=this.el,Q=this.system;z&&z.active===K.active||K.spectator||(K.active&&Q.activeCameraEl!==D?Q.setActiveCamera(D):!K.active&&Q.activeCameraEl===D&&Q.disableActiveCamera())},updateSpectatorCamera:function(z){var K=this.data,D=this.el,Q=this.system;z&&z.spectator===K.spectator||(K.spectator&&Q.spectatorCameraEl!==D?Q.setSpectatorCamera(D):!K.spectator&&Q.spectatorCameraEl===D&&Q.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},"./src/components/cursor.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/index.js"),z={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},K={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},D={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]},Q={DOWN:["selectstart"],UP:["selectend"]},V="a-mouse-cursor-hover";ie.exports.Component=p("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:S.device.isMobile()},fuseTimeout:{default:1500,min:0},mouseCursorStylesEnabled:{default:!0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity","xrselect"]}},after:["tracked-controls"],multiple:!0,init:function(){var T=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.isCursorDown=!1,this.activeXRInput=null,this.updateCanvasBounds=S.debounce(function(){T.canvasBounds=T.el.sceneEl.canvas.getBoundingClientRect()},500),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=this.onCursorDown.bind(this),this.onCursorUp=this.onCursorUp.bind(this),this.onIntersection=this.onIntersection.bind(this),this.onIntersectionCleared=this.onIntersectionCleared.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},update:function(T){this.data.rayOrigin!==T.rayOrigin&&this.updateMouseEventListeners()},tick:function(){var T=this.el.sceneEl.frame,F=this.activeXRInput;this.data.rayOrigin==="xrselect"&&T&&F&&this.onMouseMove({frame:T,inputSource:F,type:"fakeselectevent"})},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var T=this.el;T.removeState(K.HOVERING),T.removeState(K.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(K.HOVERED),this.removeEventListeners()},addEventListeners:function(){var T,F=this.data,N=this.el,k=this;function G(){T=N.sceneEl.canvas,!(F.downEvents.length||F.upEvents.length)&&(D.DOWN.forEach(function(Z){T.addEventListener(Z,k.onCursorDown,{passive:!1})}),D.UP.forEach(function(Z){T.addEventListener(Z,k.onCursorUp,{passive:!1})}))}T=N.sceneEl.canvas,T?G():N.sceneEl.addEventListener("render-target-loaded",G),F.downEvents.forEach(function(Z){N.addEventListener(Z,k.onCursorDown)}),F.upEvents.forEach(function(Z){N.addEventListener(Z,k.onCursorUp)}),N.addEventListener("raycaster-intersection",this.onIntersection),N.addEventListener("raycaster-closest-entity-changed",this.onIntersection),N.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),N.sceneEl.addEventListener("rendererresize",this.updateCanvasBounds),N.sceneEl.addEventListener("enter-vr",this.onEnterVR),window.addEventListener("resize",this.updateCanvasBounds),window.addEventListener("scroll",this.updateCanvasBounds),this.updateMouseEventListeners()},removeEventListeners:function(){var T,F=this.data,N=this.el,k=this;T=N.sceneEl.canvas,T&&!F.downEvents.length&&!F.upEvents.length&&(D.DOWN.forEach(function(G){T.removeEventListener(G,k.onCursorDown)}),D.UP.forEach(function(G){T.removeEventListener(G,k.onCursorUp)})),F.downEvents.forEach(function(G){N.removeEventListener(G,k.onCursorDown)}),F.upEvents.forEach(function(G){N.removeEventListener(G,k.onCursorUp)}),N.removeEventListener("raycaster-intersection",this.onIntersection),N.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),T.removeEventListener("mousemove",this.onMouseMove),T.removeEventListener("touchstart",this.onMouseMove),T.removeEventListener("touchmove",this.onMouseMove),N.sceneEl.removeEventListener("rendererresize",this.updateCanvasBounds),N.sceneEl.removeEventListener("enter-vr",this.onEnterVR),window.removeEventListener("resize",this.updateCanvasBounds),window.removeEventListener("scroll",this.updateCanvasBounds)},updateMouseEventListeners:function(){var T,F=this.el;T=F.sceneEl.canvas,T.removeEventListener("mousemove",this.onMouseMove),T.removeEventListener("touchmove",this.onMouseMove),F.setAttribute("raycaster","useWorldCoordinates",!1),this.data.rayOrigin==="mouse"&&(T.addEventListener("mousemove",this.onMouseMove),T.addEventListener("touchmove",this.onMouseMove,{passive:!1}),F.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var T=new THREE.Vector3,F=new THREE.Vector2,N=new THREE.Vector3,k={origin:N,direction:T};return function(G){var Z=this.canvasBounds,ne=this.el.sceneEl.camera,te,de,oe,ye,Me,Ne,Pe,Qe;ne.parent.updateMatrixWorld(),G.type==="touchmove"||G.type==="touchstart"?de=G.touches.item(0):de=G,te=de.clientX-Z.left,oe=de.clientY-Z.top,F.x=te/Z.width*2-1,F.y=-(oe/Z.height)*2+1,this.data.rayOrigin==="xrselect"&&(G.type==="selectstart"||G.type==="fakeselectevent")?(ye=G.frame,Me=G.inputSource,Ne=this.el.renderer.xr.getReferenceSpace(),Pe=ye.getPose(Me.targetRaySpace,Ne),Qe=Pe.transform,T.set(0,0,-1),T.applyQuaternion(Qe.orientation),N.copy(Qe.position)):G.type==="fakeselectout"?(T.set(0,1,0),N.set(0,9999,0)):ne&&ne.isPerspectiveCamera?(N.setFromMatrixPosition(ne.matrixWorld),T.set(F.x,F.y,.5).unproject(ne).sub(N).normalize()):ne&&ne.isOrthographicCamera?(N.set(F.x,F.y,(ne.near+ne.far)/(ne.near-ne.far)).unproject(ne),T.set(0,0,-1).transformDirection(ne.matrixWorld)):console.error("AFRAME.Raycaster: Unsupported camera type: "+ne.type),this.el.setAttribute("raycaster",k),G.type==="touchmove"&&G.preventDefault()}}(),onCursorDown:function(T){this.isCursorDown=!0,this.data.rayOrigin==="mouse"&&T.type==="touchstart"&&(this.onMouseMove(T),this.el.components.raycaster.checkIntersections(),T.preventDefault()),this.data.rayOrigin==="xrselect"&&T.type==="selectstart"&&(this.activeXRInput=T.inputSource,this.onMouseMove(T),this.el.components.raycaster.checkIntersections(),this.el.components.raycaster.intersectedEls.length&&this.el.sceneEl.components["ar-hit-test"]!==void 0&&this.el.sceneEl.getAttribute("ar-hit-test").enabled&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!1),this.reenableARHitTest=!0)),this.twoWayEmit(z.MOUSEDOWN,T),this.cursorDownEl=this.intersectedEl},onCursorUp:function(T){if(this.isCursorDown){this.isCursorDown=!1;var F=this.data;this.twoWayEmit(z.MOUSEUP,T),this.reenableARHitTest===!0&&(this.el.sceneEl.setAttribute("ar-hit-test","enabled",!0),this.reenableARHitTest=void 0),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(z.MOUSEUP,this.intersectedEventDetail)),(!F.fuse||F.rayOrigin==="mouse"||F.rayOrigin==="xrselect")&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(z.CLICK,T),F.rayOrigin==="xrselect"&&this.activeXRInput===T.inputSource&&this.onMouseMove({type:"fakeselectout"}),this.activeXRInput=null,this.cursorDownEl=null,T.type==="touchend"&&T.preventDefault()}},onIntersection:function(T){var F,N=this.el,k,G,Z;k=T.detail.els[0]===N?1:0,Z=T.detail.intersections[k],G=T.detail.els[k],G&&this.intersectedEl!==G&&(this.intersectedEl&&(F=this.el.components.raycaster.getIntersection(this.intersectedEl),F&&F.distance<=Z.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(G,Z)))},onIntersectionCleared:function(T){var F=T.detail.clearedEls;F.indexOf(this.intersectedEl)!==-1&&this.clearCurrentIntersection()},onEnterVR:function(){this.clearCurrentIntersection(!0);var T=this.el.sceneEl.xrSession,F=this;T&&this.data.rayOrigin!=="mouse"&&(Q.DOWN.forEach(function(N){T.addEventListener(N,F.onCursorDown)}),Q.UP.forEach(function(N){T.addEventListener(N,F.onCursorUp)}))},setIntersection:function(T,F){var N=this.el,k=this.data,G=this;this.intersectedEl!==T&&(this.intersectedEl=T,N.addState(K.HOVERING),T.addState(K.HOVERED),this.twoWayEmit(z.MOUSEENTER),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.add(V),!(k.fuseTimeout===0||!k.fuse||k.rayOrigin==="xrselect"||k.rayOrigin==="mouse")&&(N.addState(K.FUSING),this.twoWayEmit(z.FUSING),this.fuseTimeout=setTimeout(function(){N.removeState(K.FUSING),G.twoWayEmit(z.CLICK)},k.fuseTimeout)))},clearCurrentIntersection:function(T){var F,N,k,G=this.el;this.intersectedEl&&(this.intersectedEl.removeState(K.HOVERED),G.removeState(K.HOVERING),G.removeState(K.FUSING),this.twoWayEmit(z.MOUSELEAVE),this.data.mouseCursorStylesEnabled&&this.data.rayOrigin==="mouse"&&this.el.sceneEl.canvas.classList.remove(V),this.intersectedEl=null,clearTimeout(this.fuseTimeout),T!==!0&&(k=this.el.components.raycaster.intersections,k.length!==0&&(F=k[0].object.el===G?1:0,N=k[F],N&&this.setIntersection(N.object.el,N))))},twoWayEmit:function(T,F){var N=this.el,k=this.intersectedEl,G;function Z(ne,te){F instanceof MouseEvent?ne.mouseEvent=F:typeof TouchEvent<"u"&&F instanceof TouchEvent&&(ne.touchEvent=F)}G=this.el.components.raycaster.getIntersection(k),this.eventDetail.intersectedEl=k,this.eventDetail.intersection=G,Z(this.eventDetail),N.emit(T,this.eventDetail),k&&(this.intersectedEventDetail.intersection=G,Z(this.intersectedEventDetail),k.emit(T,this.intersectedEventDetail))}})},"./src/components/generic-tracked-controller-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/tracked-controls.js"),z=S.checkControllerPresentAndSetup,K=S.emitIfAxesChanged,D=S.onButtonEvent,Q="generic",V={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick"]};ie.exports.Component=p("generic-tracked-controller-controls",{schema:{hand:{default:""},defaultModel:{default:!0},defaultModelColor:{default:"gray"},orientationOffset:{type:"vec3"},disabled:{default:!1}},after:["tracked-controls"],mapping:V,bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var T=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(F){D(F.detail.id,"down",T)},this.onButtonUp=function(F){D(F.detail.id,"up",T)},this.onButtonTouchStart=function(F){D(F.detail.id,"touchstart",T)},this.onButtonTouchEnd=function(F){D(F.detail.id,"touchend",T)},this.controllerPresent=!1,this.wasControllerConnected=!1,this.lastControllerCheck=0,this.bindMethods(),this.el.addEventListener("controllerconnected",function(F){F.detail.name!==T.name&&(T.wasControllerConnected=!0,T.removeEventListeners(),T.removeControllersUpdateListener())})},addEventListeners:function(){var T=this.el;T.addEventListener("buttonchanged",this.onButtonChanged),T.addEventListener("buttondown",this.onButtonDown),T.addEventListener("buttonup",this.onButtonUp),T.addEventListener("touchstart",this.onButtonTouchStart),T.addEventListener("touchend",this.onButtonTouchEnd),T.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var T=this.el;T.removeEventListener("buttonchanged",this.onButtonChanged),T.removeEventListener("buttondown",this.onButtonDown),T.removeEventListener("buttonup",this.onButtonUp),T.removeEventListener("touchstart",this.onButtonTouchStart),T.removeEventListener("touchend",this.onButtonTouchEnd),T.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var T=this.data,F=T.hand?T.hand:void 0;z(this,Q,{hand:F,iterateControllerProfiles:!0})},play:function(){this.wasControllerConnected||(this.checkIfControllerPresent(),this.addControllersUpdateListener())},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var T=this.el,F=this.data;if(this.el.components["tracked-controls"]){this.removeEventListeners();return}T.setAttribute("tracked-controls",{hand:F.hand,idPrefix:Q,orientationOffset:F.orientationOffset,iterateControllerProfiles:!0}),this.data.defaultModel&&this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.wasControllerConnected&&this.checkIfControllerPresent()},onButtonChanged:function(T){var F=this.mapping.buttons[T.detail.id];F&&this.el.emit(F+"changed",T.detail.state)},onAxisMoved:function(T){K(this,this.mapping.axes,T)},initDefaultModel:function(){var T=this.modelEl=document.createElement("a-entity");T.setAttribute("geometry",{primitive:"sphere",radius:.03}),T.setAttribute("material",{color:this.data.color}),this.el.appendChild(T),this.el.emit("controllermodelready",{name:"generic-tracked-controller-controls",model:this.modelEl,rayOrigin:{origin:{x:0,y:0,z:-.01},direction:{x:0,y:0,z:-1}}})}})},"./src/components/geometry.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").geometries,S=P("./src/core/geometry.js").geometryNames,z=P("./src/core/component.js").registerComponent,K=P("./src/lib/three.js"),D=new K.BufferGeometry;ie.exports.Component=z("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:S,schemaChange:!0},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(Q){var V=this.data,T=this.el,F,N=this.system;this.geometry&&(N.unuseGeometry(Q),this.geometry=null),this.geometry=N.getOrCreateGeometry(V),F=T.getObject3D("mesh"),F?F.geometry=this.geometry:(F=new K.Mesh,F.geometry=this.geometry,this.el.getAttribute("material")||(F.material=new K.MeshStandardMaterial({color:Math.random()*16777215,metalness:0,roughness:.5})),T.setObject3D("mesh",F))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=D,this.geometry=null},updateSchema:function(Q){var V=this.oldData&&this.oldData.primitive,T=Q.primitive,F=p[T]&&p[T].schema;if(!F)throw new Error("Unknown geometry schema `"+T+"`");V&&V===T||this.extendSchema(F)}})},"./src/components/gltf-model.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=P("./src/utils/index.js"),K=z.debug("components:gltf-model:warn");ie.exports.Component=p("gltf-model",{schema:{type:"model"},init:function(){var D=this,Q=this.system.getDRACOLoader(),V=this.system.getMeshoptDecoder(),T=this.system.getKTX2Loader();this.model=null,this.loader=new S.GLTFLoader,Q&&this.loader.setDRACOLoader(Q),V?this.ready=V.then(function(F){D.loader.setMeshoptDecoder(F)}):this.ready=Promise.resolve(),T&&this.loader.setKTX2Loader(T)},update:function(){var D=this,Q=this.el,V=this.data;V&&(this.remove(),this.ready.then(function(){D.loader.load(V,function(F){D.model=F.scene||F.scenes[0],D.model.animations=F.animations,Q.setObject3D("mesh",D.model),Q.emit("model-loaded",{format:"gltf",model:D.model})},void 0,function(F){var N=F&&F.message?F.message:"Failed to load glTF model";K(N),Q.emit("model-error",{format:"gltf",src:V})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},"./src/components/grabbable.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;p("grabbable",{init:function(){this.el.setAttribute("obb-collider","centerModel: true")}})},"./src/components/hand-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/constants/index.js").AFRAME_CDN_ROOT,z={toonLeft:S+"controllers/hands/leftHand.glb",toonRight:S+"controllers/hands/rightHand.glb",lowPolyLeft:S+"controllers/hands/leftHandLow.glb",lowPolyRight:S+"controllers/hands/rightHandLow.glb",highPolyLeft:S+"controllers/hands/leftHandHigh.glb",highPolyRight:S+"controllers/hands/rightHandHigh.glb"},K={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},D={};D[K.fist]="grip",D[K.thumbUp]="pistol",D[K.point]="pointing",ie.exports.Component=p("hand-controls",{schema:{color:{default:"white",type:"color"},hand:{default:"left"},handModelStyle:{default:"lowPoly",oneOf:["lowPoly","highPoly","toon"]}},after:["tracked-controls"],init:function(){var T=this,F=this.el;this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){T.handleButton("grip","down")},this.onGripUp=function(){T.handleButton("grip","up")},this.onTrackpadDown=function(){T.handleButton("trackpad","down")},this.onTrackpadUp=function(){T.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){T.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){T.handleButton("trackpad","touchend")},this.onTriggerDown=function(){T.handleButton("trigger","down")},this.onTriggerUp=function(){T.handleButton("trigger","up")},this.onTriggerTouchStart=function(){T.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){T.handleButton("trigger","touchend")},this.onGripTouchStart=function(){T.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){T.handleButton("grip","touchend")},this.onThumbstickDown=function(){T.handleButton("thumbstick","down")},this.onThumbstickUp=function(){T.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){T.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){T.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){T.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){T.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){T.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){T.handleButton("surface","touchend")},this.onControllerConnected=this.onControllerConnected.bind(this),this.onControllerDisconnected=this.onControllerDisconnected.bind(this),F.addEventListener("controllerconnected",this.onControllerConnected),F.addEventListener("controllerdisconnected",this.onControllerDisconnected),F.object3D.visible=!1},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(T,F){var N=this.el.getObject3D("mesh");!N||!N.mixer||N.mixer.update(F/1e3)},onControllerConnected:function(){this.el.object3D.visible=!0},onControllerDisconnected:function(){this.el.object3D.visible=!1},addEventListeners:function(){var T=this.el;T.addEventListener("gripdown",this.onGripDown),T.addEventListener("gripup",this.onGripUp),T.addEventListener("trackpaddown",this.onTrackpadDown),T.addEventListener("trackpadup",this.onTrackpadUp),T.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),T.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),T.addEventListener("triggerdown",this.onTriggerDown),T.addEventListener("triggerup",this.onTriggerUp),T.addEventListener("triggertouchstart",this.onTriggerTouchStart),T.addEventListener("triggertouchend",this.onTriggerTouchEnd),T.addEventListener("griptouchstart",this.onGripTouchStart),T.addEventListener("griptouchend",this.onGripTouchEnd),T.addEventListener("thumbstickdown",this.onThumbstickDown),T.addEventListener("thumbstickup",this.onThumbstickUp),T.addEventListener("abuttontouchstart",this.onAorXTouchStart),T.addEventListener("abuttontouchend",this.onAorXTouchEnd),T.addEventListener("bbuttontouchstart",this.onBorYTouchStart),T.addEventListener("bbuttontouchend",this.onBorYTouchEnd),T.addEventListener("xbuttontouchstart",this.onAorXTouchStart),T.addEventListener("xbuttontouchend",this.onAorXTouchEnd),T.addEventListener("ybuttontouchstart",this.onBorYTouchStart),T.addEventListener("ybuttontouchend",this.onBorYTouchEnd),T.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),T.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var T=this.el;T.removeEventListener("gripdown",this.onGripDown),T.removeEventListener("gripup",this.onGripUp),T.removeEventListener("trackpaddown",this.onTrackpadDown),T.removeEventListener("trackpadup",this.onTrackpadUp),T.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),T.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),T.removeEventListener("triggerdown",this.onTriggerDown),T.removeEventListener("triggerup",this.onTriggerUp),T.removeEventListener("triggertouchstart",this.onTriggerTouchStart),T.removeEventListener("triggertouchend",this.onTriggerTouchEnd),T.removeEventListener("griptouchstart",this.onGripTouchStart),T.removeEventListener("griptouchend",this.onGripTouchEnd),T.removeEventListener("thumbstickdown",this.onThumbstickDown),T.removeEventListener("thumbstickup",this.onThumbstickUp),T.removeEventListener("abuttontouchstart",this.onAorXTouchStart),T.removeEventListener("abuttontouchend",this.onAorXTouchEnd),T.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),T.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),T.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),T.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),T.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),T.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),T.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),T.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(T){var F,N=this.el,k=this.data.hand,G=this.data.handModelStyle,Z=this.data.color,ne=this;if(F={hand:k,model:!1},k!==T){var te=z[G+k.charAt(0).toUpperCase()+k.slice(1)];this.loader.load(te,function(de){var oe=de.scene.children[0],ye=k==="left"?Math.PI/2:-Math.PI/2,Me=N.sceneEl.hasWebXR?-Math.PI/2:0;oe.mixer=new THREE.AnimationMixer(oe),ne.clips=de.animations,N.setObject3D("mesh",oe),oe.traverse(function(Ne){Ne.isMesh&&(Ne.material.color=new THREE.Color(Z))}),oe.position.set(0,0,0),oe.rotation.set(Me,0,ye),N.setAttribute("magicleap-controls",F),N.setAttribute("vive-controls",F),N.setAttribute("oculus-touch-controls",F),N.setAttribute("pico-controls",F),N.setAttribute("windows-motion-controls",F),N.setAttribute("hp-mixed-reality-controls",F)})}},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(T,F){var N,k=F==="down",G=F==="touchstart";if(F.indexOf("touch")===0){if(G===this.touchedButtons[T])return;this.touchedButtons[T]=G}else{if(k===this.pressedButtons[T])return;this.pressedButtons[T]=k}N=this.gesture,this.gesture=this.determineGesture(),this.gesture!==N&&(this.animateGesture(this.gesture,N),this.emitGestureEvents(this.gesture,N))},determineGesture:function(){var T,F=this.pressedButtons.grip,N=this.pressedButtons.surface||this.touchedButtons.surface,k=this.pressedButtons.trackpad||this.touchedButtons.trackpad,G=this.pressedButtons.trigger||this.touchedButtons.trigger,Z=this.touchedButtons.AorX||this.touchedButtons.BorY,ne=V(this.el.components["tracked-controls"]);return ne?F||G?T=K.fist:k&&(T=K.point):F?N||Z||k?T=G?K.fist:K.point:T=G?K.thumbUp:K.pointThumb:G&&(T=K.hold),T},getClip:function(T){var F,N;for(N=0;N<this.clips.length;N++)if(F=this.clips[N],F.name===T)return F},animateGesture:function(T,F){if(T){this.playAnimation(T||K.open,F,!1);return}this.playAnimation(F,F,!0)},emitGestureEvents:function(T,F){var N=this.el,k;F!==T&&(k=Q(F,!1),k&&N.emit(k),k=Q(T,!0),k&&N.emit(k))},playAnimation:function(T,F,N){var k,G,Z=this.el.getObject3D("mesh"),ne;if(Z){if(k=this.getClip(T),ne=Z.mixer.clipAction(k),N){ne.paused=!1,ne.timeScale=-1;return}if(ne.clampWhenFinished=!0,ne.loop=THREE.LoopOnce,ne.repetitions=0,ne.timeScale=1,ne.time=0,ne.weight=1,!F){Z.mixer.stopAllAction(),ne.play();return}k=this.getClip(F),ne.reset(),ne.play(),G=Z.mixer.clipAction(k),G.crossFadeTo(ne,.15,!0)}}});function Q(T,F){var N;if(T){if(N=D[T],N==="grip")return N+(F?"close":"open");if(N==="point")return N+(F?"up":"down");if(N==="pointing"||N==="pistol")return N+(F?"start":"end")}}function V(T){var F=T&&T.controller,N=F&&(F.id&&F.id.indexOf("OpenVR ")===0||F.profiles&&F.profiles[0]&&F.profiles[0]==="htc-vive");return N}},"./src/components/hand-tracking-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/core/a-entity.js").AEntity,z=P("./src/utils/tracked-controls.js"),K=z.checkControllerPresentAndSetup,D=P("./src/constants/index.js").AFRAME_CDN_ROOT,Q=D+"controllers/oculus-hands/v4/left.glb",V=D+"controllers/oculus-hands/v4/right.glb",T=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],F=0,N=4,k=9,G=.015,Z=.1;ie.exports.Component=p("hand-tracking-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},modelStyle:{default:"mesh",oneOf:["dots","mesh"]},modelColor:{default:"white"},modelOpacity:{default:1}},after:["tracked-controls"],bindMethods:function(){this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this)},addEventListeners:function(){this.el.addEventListener("model-loaded",this.onModelLoaded);for(var ne=0;ne<this.jointEls.length;++ne)this.jointEls[ne].object3D.visible=!0},removeEventListeners:function(){this.el.removeEventListener("model-loaded",this.onModelLoaded);for(var ne=0;ne<this.jointEls.length;++ne)this.jointEls[ne].object3D.visible=!1},init:function(){var ne=this.el.sceneEl,te=ne.getAttribute("webxr"),de=te.optionalFeatures;de.indexOf("hand-tracking")===-1&&(de.push("hand-tracking"),ne.setAttribute("webxr",te)),this.wristObject3D=new THREE.Object3D,this.el.sceneEl.object3D.add(this.wristObject3D),this.onModelLoaded=this.onModelLoaded.bind(this),this.onChildAttached=this.onChildAttached.bind(this),this.jointEls=[],this.controllerPresent=!1,this.isPinched=!1,this.pinchEventDetail={position:new THREE.Vector3,wristRotation:new THREE.Quaternion},this.indexTipPosition=new THREE.Vector3,this.hasPoses=!1,this.jointPoses=new Float32Array(16*T.length),this.jointRadii=new Float32Array(T.length),this.bindMethods(),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.sceneEl.addEventListener("enter-vr",this.updateReferenceSpace),this.el.sceneEl.addEventListener("exit-vr",this.updateReferenceSpace),this.el.addEventListener("child-attached",this.onChildAttached),this.el.object3D.visible=!1,this.wristObject3D.visible=!1},onChildAttached:function(ne){this.addChildEntity(ne.detail.el)},update:function(){this.updateModelMaterial()},updateModelMaterial:function(){var ne=this.jointEls,te=this.skinnedMesh,de=this.data.modelOpacity!==1;te&&(this.skinnedMesh.material.color.set(this.data.modelColor),this.skinnedMesh.material.transparent=de,this.skinnedMesh.material.opacity=this.data.modelOpacity);for(var oe=0;oe<ne.length;oe++)ne[oe].setAttribute("material",{color:this.data.modelColor,transparent:de,opacity:this.data.modelOpacity})},updateReferenceSpace:function(){var ne=this,te=this.el.sceneEl.xrSession;if(this.referenceSpace=void 0,!!te){var de=ne.el.sceneEl.systems.webxr.sessionReferenceSpaceType;te.requestReferenceSpace(de).then(function(oe){ne.referenceSpace=oe}).catch(function(oe){throw ne.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(de,"tracked-controls-webxr uses reference space "+de),oe})}},checkIfControllerPresent:function(){var ne=this.data,te=ne.hand?ne.hand:void 0;K(this,"",{hand:te,iterateControllerProfiles:!0,handTracking:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},tick:function(){var ne=this.el.sceneEl,te=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,de=ne.frame,oe=this.el.components["tracked-controls-webxr"],ye=this.referenceSpace;!te||!de||!ye||!oe||(this.hasPoses=!1,te.hand&&(this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),this.hasPoses=de.fillPoses(te.hand.values(),ye,this.jointPoses)&&de.fillJointRadii(te.hand.values(),this.jointRadii),this.updateHandModel(),this.detectGesture(),this.updateWristObject()))},updateWristObject:function(){var ne=new THREE.Matrix4;return function(){var te=this.wristObject3D;!te||!this.hasPoses||(ne.fromArray(this.jointPoses,F*16),te.position.setFromMatrixPosition(ne),te.quaternion.setFromRotationMatrix(ne))}}(),updateHandModel:function(){this.data.modelStyle==="dots"&&this.updateHandDotsModel(),this.data.modelStyle==="mesh"&&this.updateHandMeshModel()},getBone:function(ne){for(var te=this.bones,de=0;de<te.length;de++)if(te[de].name===ne)return te[de];return null},updateHandMeshModel:function(){var ne=new THREE.Matrix4;return function(){var te=0,de=this.jointPoses,oe=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller;if(!(!oe||!this.mesh)&&(this.mesh.visible=!1,!!this.hasPoses))for(var ye of oe.hand.values()){var Me=this.getBone(ye.jointName);Me!=null&&(this.mesh.visible=!0,ne.fromArray(de,te*16),Me.position.setFromMatrixPosition(ne),Me.quaternion.setFromRotationMatrix(ne)),te++}}}(),updateHandDotsModel:function(){for(var ne=this.jointPoses,te=this.jointRadii,de=this.el.components["tracked-controls"]&&this.el.components["tracked-controls"].controller,oe,ye,Me=0;Me<de.hand.size;Me++)oe=this.jointEls[Me],ye=oe.object3D,oe.object3D.visible=this.hasPoses,this.hasPoses&&(ye.matrix.fromArray(ne,Me*16),ye.matrix.decompose(ye.position,ye.rotation,ye.scale),oe.setAttribute("scale",{x:te[Me],y:te[Me],z:te[Me]}))},detectGesture:function(){this.detectPinch()},detectPinch:function(){var ne=new THREE.Vector3,te=new THREE.Matrix4;return function(){var de=this.indexTipPosition,oe=this.pinchEventDetail;if(this.hasPoses){ne.setFromMatrixPosition(te.fromArray(this.jointPoses,N*16)),de.setFromMatrixPosition(te.fromArray(this.jointPoses,k*16)),oe.wristRotation.setFromRotationMatrix(te.fromArray(this.jointPoses,F*16));var ye=de.distanceTo(ne);ye<G&&this.isPinched===!1&&(this.isPinched=!0,this.pinchDistance=ye,oe.position.copy(de).add(ne).multiplyScalar(.5),this.el.emit("pinchstarted",oe)),ye>this.pinchDistance+this.pinchDistance*Z&&this.isPinched===!0&&(this.isPinched=!1,oe.position.copy(de).add(ne).multiplyScalar(.5),this.el.emit("pinchended",oe)),this.isPinched&&(oe.position.copy(de).add(ne).multiplyScalar(.5),this.el.emit("pinchmoved",oe))}}}(),pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var ne=this.el,te=this.data;if(ne.setAttribute("tracked-controls",{id:"",hand:te.hand,iterateControllerProfiles:!0,handTrackingEnabled:!0}),this.mesh){this.mesh!==ne.getObject3D("mesh")&&ne.setObject3D("mesh",this.mesh);return}this.initDefaultModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){var ne=this.el,te;this.checkIfControllerPresent(),te=ne.components["tracked-controls"]&&ne.components["tracked-controls"].controller,this.mesh&&te&&te.hand&&te.hand instanceof XRHand&&ne.setObject3D("mesh",this.mesh)},initDefaultModel:function(){var ne=this.data;ne.modelStyle==="dots"&&this.initDotsModel(),ne.modelStyle==="mesh"&&this.initMeshHandModel(),this.el.object3D.visible=!0,this.wristObject3D.visible=!0},initDotsModel:function(){if(this.jointEls.length===0){for(var ne=0;ne<T.length;++ne){var te=this.jointEl=document.createElement("a-entity");te.setAttribute("geometry",{primitive:"sphere",radius:1}),te.object3D.visible=!1,this.el.appendChild(te),this.jointEls.push(te)}this.updateModelMaterial()}},initMeshHandModel:function(){var ne=this.data.hand==="left"?Q:V;this.el.setAttribute("gltf-model",ne)},onModelLoaded:function(){var ne=this.mesh=this.el.getObject3D("mesh").children[0],te=this.skinnedMesh=ne.getObjectByProperty("type","SkinnedMesh");this.skinnedMesh&&(this.bones=te.skeleton.bones,this.el.removeObject3D("mesh"),ne.position.set(0,0,0),ne.rotation.set(0,0,0),te.frustumCulled=!1,te.material=new THREE.MeshStandardMaterial,this.updateModelMaterial(),this.setupChildrenEntities(),this.el.setObject3D("mesh",ne))},setupChildrenEntities:function(){for(var ne=this.el.children,te=0;te<ne.length;++te)ne[te]instanceof S&&this.addChildEntity(ne[te])},addChildEntity:function(ne){ne instanceof S&&this.wristObject3D.add(ne.object3D)}})},"./src/components/hand-tracking-grab-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js");p("hand-tracking-grab-controls",{schema:{hand:{default:"right",oneOf:["left","right"]},color:{type:"color",default:"white"},hoverColor:{type:"color",default:"#538df1"},hoverEnabled:{default:!1}},init:function(){var z=this.el,K=this.data,D;K.hand==="right"?D="components.hand-tracking-controls.bones.3":D="components.hand-tracking-controls.bones.21",z.setAttribute("hand-tracking-controls",{hand:K.hand}),z.setAttribute("obb-collider",{trackedObject3D:D,size:.04}),this.auxMatrix=new S.Matrix4,this.auxQuaternion=new S.Quaternion,this.auxQuaternion2=new S.Quaternion,this.auxVector=new S.Vector3,this.auxVector2=new S.Vector3,this.grabbingObjectPosition=new S.Vector3,this.grabbedObjectPosition=new S.Vector3,this.grabbedObjectPositionDelta=new S.Vector3,this.grabDeltaPosition=new S.Vector3,this.grabInitialRotation=new S.Quaternion,this.onCollisionStarted=this.onCollisionStarted.bind(this),this.el.addEventListener("obbcollisionstarted",this.onCollisionStarted),this.onCollisionEnded=this.onCollisionEnded.bind(this),this.el.addEventListener("obbcollisionended",this.onCollisionEnded),this.onPinchStarted=this.onPinchStarted.bind(this),this.el.addEventListener("pinchstarted",this.onPinchStarted),this.onPinchEnded=this.onPinchEnded.bind(this),this.el.addEventListener("pinchended",this.onPinchEnded),this.onPinchMoved=this.onPinchMoved.bind(this),this.el.addEventListener("pinchmoved",this.onPinchMoved)},transferEntityOwnership:function(){for(var z,K=this.el.sceneEl.querySelectorAll("[hand-tracking-grab-controls]"),D=0;D<K.length;++D)z=K[D].components["hand-tracking-grab-controls"],z!==this&&this.grabbedEl&&this.grabbedEl===z.grabbedEl&&z.releaseGrabbedEntity();return!1},onCollisionStarted:function(z){var K=z.detail.withEl;this.collidedEl||K.getAttribute("grabbable")&&(this.collidedEl=K,this.grabbingObject3D=z.detail.trackedObject3D,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.hoverColor))},onCollisionEnded:function(){this.collidedEl=void 0,!this.grabbedEl&&(this.grabbingObject3D=void 0,this.data.hoverEnabled&&this.el.setAttribute("hand-tracking-controls","modelColor",this.data.color))},onPinchStarted:function(z){this.collidedEl&&(this.pinchPosition=z.detail.position,this.wristRotation=z.detail.wristRotation,this.grabbedEl=this.collidedEl,this.transferEntityOwnership(),this.grab())},onPinchEnded:function(){this.releaseGrabbedEntity()},onPinchMoved:function(z){this.wristRotation=z.detail.wristRotation},releaseGrabbedEntity:function(){var z=this.grabbedEl;z&&(z.object3D.updateMatrixWorld=this.originalUpdateMatrixWorld,z.object3D.matrixAutoUpdate=!0,z.object3D.matrixWorldAutoUpdate=!0,z.object3D.matrixWorld.decompose(this.auxVector,this.auxQuaternion,this.auxVector2),z.object3D.position.copy(this.auxVector),z.object3D.quaternion.copy(this.auxQuaternion),this.el.emit("grabended",{grabbedEl:z}),this.grabbedEl=void 0)},grab:function(){var z=this.grabbedEl,K;K=z.object3D.getWorldPosition(this.grabbedObjectPosition),this.grabDeltaPosition.copy(K).sub(this.pinchPosition),this.grabInitialRotation.copy(this.auxQuaternion.copy(this.wristRotation).invert()),this.originalUpdateMatrixWorld=z.object3D.updateMatrixWorld,z.object3D.updateMatrixWorld=function(){},z.object3D.updateMatrixWorldChildren=function(D){for(var Q=this.children,V=0,T=Q.length;V<T;V++){var F=Q[V];(F.matrixWorldAutoUpdate===!0||D===!0)&&F.updateMatrixWorld(!0)}},z.object3D.matrixAutoUpdate=!1,z.object3D.matrixWorldAutoUpdate=!1,this.el.emit("grabstarted",{grabbedEl:z})},tock:function(){var z=this.auxMatrix,K=this.auxQuaternion,D=this.auxQuaternion2,Q,V=this.grabbedEl;V&&(Q=V.object3D,Q.getWorldQuaternion(D),Q.matrixWorld.identity(),z.identity(),z.makeTranslation(this.pinchPosition),Q.matrixWorld.multiply(z),z.identity(),z.makeRotationFromQuaternion(K.copy(this.wristRotation).multiply(this.grabInitialRotation)),Q.matrixWorld.multiply(z),z.identity(),z.makeTranslation(this.grabDeltaPosition),Q.matrixWorld.multiply(z),z.identity(),z.makeRotationFromQuaternion(D),Q.matrixWorld.multiply(z),z.makeScale(V.object3D.scale.x,V.object3D.scale.y,V.object3D.scale.z),Q.matrixWorld.multiply(z),Q.updateMatrixWorldChildren())}})},"./src/components/hide-on-enter-ar.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("hide-on-enter-ar",{init:function(){var S=this;this.el.sceneEl.addEventListener("enter-vr",function(){S.el.sceneEl.is("ar-mode")&&(S.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){S.el.object3D.visible=!0})}})},"./src/components/hide-on-enter-vr.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("hide-on-enter-vr",{init:function(){var S=this;this.el.sceneEl.addEventListener("enter-vr",function(){S.el.sceneEl.is("vr-mode")&&(S.el.object3D.visible=!1)}),this.el.sceneEl.addEventListener("exit-vr",function(){S.el.object3D.visible=!0})}})},"./src/components/hp-mixed-reality-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=P("./src/utils/tracked-controls.js"),K=z.checkControllerPresentAndSetup,D=z.emitIfAxesChanged,Q=z.onButtonEvent,V="hp-mixed-reality",T=P("./src/constants/index.js").AFRAME_CDN_ROOT,F=T+"controllers/hp/mixed-reality/",N={x:0,y:0,z:.06},k={_x:Math.PI/4,_y:0,_z:0,_order:"XYZ"},G={left:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton"]}};ie.exports.Component=p("hp-mixed-reality-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:G,init:function(){var Z=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(ne){Q(ne.detail.id,"down",Z,Z.data.hand)},this.onButtonUp=function(ne){Q(ne.detail.id,"up",Z,Z.data.hand)},this.onButtonTouchEnd=function(ne){Q(ne.detail.id,"touchend",Z,Z.data.hand)},this.onButtonTouchStart=function(ne){Q(ne.detail.id,"touchstart",Z,Z.data.hand)},this.previousButtonValues={},this.bindMethods()},update:function(){var Z=this.data;this.controllerIndex=Z.hand==="right"?0:Z.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var Z=this.el;Z.addEventListener("buttonchanged",this.onButtonChanged),Z.addEventListener("buttondown",this.onButtonDown),Z.addEventListener("buttonup",this.onButtonUp),Z.addEventListener("touchstart",this.onButtonTouchStart),Z.addEventListener("touchend",this.onButtonTouchEnd),Z.addEventListener("axismove",this.onAxisMoved),Z.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var Z=this.el;Z.removeEventListener("buttonchanged",this.onButtonChanged),Z.removeEventListener("buttondown",this.onButtonDown),Z.removeEventListener("buttonup",this.onButtonUp),Z.removeEventListener("touchstart",this.onButtonTouchStart),Z.removeEventListener("touchend",this.onButtonTouchEnd),Z.removeEventListener("axismove",this.onAxisMoved),Z.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var Z=this.data;K(this,V,{index:this.controllerIndex,hand:Z.hand})},injectTrackedControls:function(){var Z=this.el,ne=this.data;Z.setAttribute("tracked-controls",{idPrefix:V,hand:ne.hand,controller:this.controllerIndex,orientationOffset:ne.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",F+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(Z){var ne=this.mapping[this.data.hand].buttons[Z.detail.id],te;ne&&(ne==="trigger"&&(te=Z.detail.state.value,console.log("analog value of trigger press: "+te)),this.el.emit(ne+"changed",Z.detail.state))},onModelLoaded:function(Z){var ne=Z.detail.model;this.data.model&&(ne.position.copy(N),ne.rotation.copy(k),this.el.emit("controllermodelready",{name:"hp-mixed-reality-controls",model:this.data.model,rayOrigin:new S.Vector3(0,0,0)}))},onAxisMoved:function(Z){D(this,this.mapping.axes,Z)}})},"./src/components/index.js":(ie,we,P)=>{P("./src/components/animation.js"),P("./src/components/anchored.js"),P("./src/components/camera.js"),P("./src/components/cursor.js"),P("./src/components/geometry.js"),P("./src/components/generic-tracked-controller-controls.js"),P("./src/components/gltf-model.js"),P("./src/components/grabbable.js"),P("./src/components/hand-tracking-controls.js"),P("./src/components/hand-tracking-grab-controls.js"),P("./src/components/hand-controls.js"),P("./src/components/hide-on-enter-ar.js"),P("./src/components/hide-on-enter-vr.js"),P("./src/components/hp-mixed-reality-controls.js"),P("./src/components/layer.js"),P("./src/components/laser-controls.js"),P("./src/components/light.js"),P("./src/components/line.js"),P("./src/components/link.js"),P("./src/components/look-controls.js"),P("./src/components/magicleap-controls.js"),P("./src/components/material.js"),P("./src/components/obb-collider.js"),P("./src/components/obj-model.js"),P("./src/components/oculus-go-controls.js"),P("./src/components/oculus-touch-controls.js"),P("./src/components/pico-controls.js"),P("./src/components/position.js"),P("./src/components/raycaster.js"),P("./src/components/rotation.js"),P("./src/components/scale.js"),P("./src/components/shadow.js"),P("./src/components/sound.js"),P("./src/components/text.js"),P("./src/components/tracked-controls.js"),P("./src/components/tracked-controls-webvr.js"),P("./src/components/tracked-controls-webxr.js"),P("./src/components/visible.js"),P("./src/components/valve-index-controls.js"),P("./src/components/vive-controls.js"),P("./src/components/vive-focus-controls.js"),P("./src/components/wasd-controls.js"),P("./src/components/windows-motion-controls.js"),P("./src/components/scene/ar-hit-test.js"),P("./src/components/scene/background.js"),P("./src/components/scene/debug.js"),P("./src/components/scene/device-orientation-permission-ui.js"),P("./src/components/scene/embedded.js"),P("./src/components/scene/inspector.js"),P("./src/components/scene/fog.js"),P("./src/components/scene/keyboard-shortcuts.js"),P("./src/components/scene/pool.js"),P("./src/components/scene/real-world-meshing.js"),P("./src/components/scene/reflection.js"),P("./src/components/scene/screenshot.js"),P("./src/components/scene/stats.js"),P("./src/components/scene/xr-mode-ui.js")},"./src/components/laser-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/index.js");p("laser-controls",{schema:{hand:{default:"right"},model:{default:!0},defaultModelColor:{type:"color",default:"grey"}},init:function(){var z=this.config,K=this.data,D=this.el,Q=this,V={hand:K.hand,model:K.model};D.setAttribute("hp-mixed-reality-controls",V),D.setAttribute("magicleap-controls",V),D.setAttribute("oculus-go-controls",V),D.setAttribute("oculus-touch-controls",V),D.setAttribute("pico-controls",V),D.setAttribute("valve-index-controls",V),D.setAttribute("vive-controls",V),D.setAttribute("vive-focus-controls",V),D.setAttribute("windows-motion-controls",V),D.setAttribute("generic-tracked-controller-controls",{hand:V.hand}),D.addEventListener("controllerconnected",T),D.addEventListener("controllerdisconnected",F),D.addEventListener("controllermodelready",function(N){T(N),Q.modelReady=!0});function T(N){var k=z[N.detail.name];if(k){var G=S.extend({showLine:!0},k.raycaster||{});N.detail.rayOrigin&&(G.origin=N.detail.rayOrigin.origin,G.direction=N.detail.rayOrigin.direction,G.showLine=!0),N.detail.rayOrigin||!Q.modelReady?D.setAttribute("raycaster",G):D.setAttribute("raycaster","showLine",!0),D.setAttribute("cursor",S.extend({fuse:!1},k.cursor))}}function F(N){var k=z[N.detail.name];k&&D.setAttribute("raycaster","showLine",!1)}},config:{"generic-tracked-controller-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"hp-mixed-reality-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"magicleap-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"oculus-go-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"pico-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"valve-index-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"vive-focus-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},"./src/components/layer.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/index.js"),z=S.debug("components:layer:warn");ie.exports.Component=p("layer",{schema:{type:{default:"quad",oneOf:["quad","monocubemap","stereocubemap"]},src:{type:"map"},rotateCubemap:{default:!1},width:{default:0},height:{default:0}},init:function(){var D=this.el.sceneEl.renderer.getContext();this.quaternion=new THREE.Quaternion,this.position=new THREE.Vector3,this.bindMethods(),this.needsRedraw=!1,this.frameBuffer=D.createFramebuffer();var Q=this.el.sceneEl.getAttribute("webxr"),V=Q.requiredFeatures;V.indexOf("layers")===-1&&(V.push("layers"),this.el.sceneEl.setAttribute("webxr",Q)),this.el.sceneEl.addEventListener("enter-vr",this.onEnterVR),this.el.sceneEl.addEventListener("exit-vr",this.onExitVR)},bindMethods:function(){this.onRequestedReferenceSpace=this.onRequestedReferenceSpace.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this)},update:function(D){this.data.src!==D.src&&this.updateSrc()},updateSrc:function(){var D=this.data.type;if(this.texture=void 0,D==="quad"){this.loadQuadImage();return}if(D==="monocubemap"||D==="stereocubemap"){this.loadCubeMapImages();return}},loadCubeMapImages:function(){var D,Q=this.xrGLFactory,V=this.el.sceneEl.frame,T=this.data.src,F=this.data.type;this.visibilityChanged=!1,this.layer&&(F!=="monocubemap"&&F!=="stereocubemap"||(T.complete?this.pendingCubeMapUpdate=!1:this.pendingCubeMapUpdate=!0,this.loadingScreen?this.loadingScreen=!1:this.loadingScreen=!0,F==="monocubemap"?(D=Q.getSubImage(this.layer,V),this.loadCubeMapImage(D.colorTexture,T,0)):(D=Q.getSubImage(this.layer,V,"left"),this.loadCubeMapImage(D.colorTexture,T,0),D=Q.getSubImage(this.layer,V,"right"),this.loadCubeMapImage(D.colorTexture,T,6))))},loadQuadImage:function(){var D=this.data.src,Q=this;this.el.sceneEl.systems.material.loadTexture(D,{src:D},function(T){Q.el.sceneEl.renderer.initTexture(T),Q.texture=T,D.tagName==="VIDEO"&&setTimeout(function(){Q.textureIsVideo=!0},1e3),Q.layer&&(Q.layer.height=Q.data.height/2||Q.texture.image.height/1e3,Q.layer.width=Q.data.width/2||Q.texture.image.width/1e3,Q.needsRedraw=!0),Q.updateQuadPanel()})},preGenerateCubeMapTextures:function(D,Q){this.data.type==="monocubemap"?this.generateCubeMapTextures(D,0,Q):(this.generateCubeMapTextures(D,0,Q),this.generateCubeMapTextures(D,6,Q))},generateCubeMapTextures:function(D,Q,V){for(var T=this.data,F=this.cubeFaceSize,N=Math.min(D.width,D.height),k=[],G,Z,ne=0;ne<6;ne++){var te=document.createElement("CANVAS");te.width=te.height=F;var de=te.getContext("2d");T.rotateCubemap&&(ne===2||ne===3)&&(de.save(),de.translate(F,F),de.rotate(Math.PI)),de.drawImage(D,(ne+Q)*N,0,N,N,0,0,F,F),de.restore(),V&&V(),k.push(te)}return T.rotateCubemap&&(G=k[0],Z=k[1],k[0]=Z,k[1]=G,G=k[4],Z=k[5],k[4]=Z,k[5]=G),V&&V(),k},loadCubeMapImage:function(D,Q,V){var T=this.el.sceneEl.renderer.getContext(),F;T.pixelStorei(T.UNPACK_FLIP_Y_WEBGL,!1),T.bindTexture(T.TEXTURE_CUBE_MAP,D),!Q.complete||this.loadingScreen?F=this.loadingScreenImages:F=this.generateCubeMapTextures(Q,V);var N=0;F.forEach(function(k,G){T.texSubImage2D(T.TEXTURE_CUBE_MAP_POSITIVE_X+G,0,0,0,T.RGBA,T.UNSIGNED_BYTE,k),N=T.getError()}),N!==0&&console.log("renderingError, WebGL Error Code: "+N),T.bindTexture(T.TEXTURE_CUBE_MAP,null)},tick:function(){this.el.sceneEl.xrSession&&(!this.layer&&(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.initLayer(),this.updateTransform(),this.data.src.complete&&(this.pendingCubeMapUpdate||this.loadingScreen||this.visibilityChanged)&&this.loadCubeMapImages(),!(!this.needsRedraw&&!this.layer.needsRedraw&&!this.textureIsVideo)&&(this.data.type==="quad"&&this.draw(),this.needsRedraw=!1))},initLayer:function(){var D=this,Q=this.data.type;if(this.el.sceneEl.xrSession.onvisibilitychange=function(V){D.visibilityChanged=V.session.visibilityState!=="hidden"},Q==="quad"){this.initQuadLayer();return}if(Q==="monocubemap"||Q==="stereocubemap"){this.initCubeMapLayer();return}},initQuadLayer:function(){var D=this.el.sceneEl,Q=D.renderer.getContext(),V=this.xrGLFactory=new XRWebGLBinding(D.xrSession,Q);this.texture&&(this.layer=V.createQuadLayer({space:this.referenceSpace,viewPixelHeight:2048,viewPixelWidth:2048,height:this.data.height/2||this.texture.image.height/1e3,width:this.data.width/2||this.texture.image.width/1e3}),this.initLoadingScreenImages(),D.renderer.xr.addLayer(this.layer))},initCubeMapLayer:function(){var D=this.data.src,Q=this.el.sceneEl,V=Q.renderer.getContext(),T=V.getParameter(V.MAX_CUBE_MAP_TEXTURE_SIZE),F=this.cubeFaceSize=Math.min(T,Math.min(D.width,D.height)),N=this.xrGLFactory=new XRWebGLBinding(Q.xrSession,V);this.layer=N.createCubeLayer({space:this.referenceSpace,viewPixelWidth:F,viewPixelHeight:F,layout:this.data.type==="monocubemap"?"mono":"stereo",isStatic:!1}),this.initLoadingScreenImages(),this.loadCubeMapImages(),Q.renderer.xr.addLayer(this.layer)},initLoadingScreenImages:function(){for(var D=this.cubeFaceSize,Q=this.loadingScreenImages=[],V=0;V<6;V++){var T=document.createElement("CANVAS");T.width=T.height=D;var F=T.getContext("2d");T.width=T.height=D,F.fillStyle="black",F.fillRect(0,0,D,D),V!==2&&V!==3&&(F.translate(D,0),F.scale(-1,1),F.fillStyle="white",F.font="30px Arial",F.fillText("Loading",D/2,D/2)),Q.push(T)}},destroyLayer:function(){this.layer&&(this.el.sceneEl.renderer.xr.removeLayer(this.layer),this.layer.destroy(),this.layer=void 0)},toggleCompositorLayer:function(){this.enableCompositorLayer(!this.layerEnabled)},enableCompositorLayer:function(D){this.layerEnabled=D,this.quadPanelEl.object3D.visible=!this.layerEnabled},updateQuadPanel:function(){var D=this.quadPanelEl;this.quadPanelEl||(D=this.quadPanelEl=document.createElement("a-entity"),this.el.appendChild(D)),D.setAttribute("material",{shader:"flat",src:this.data.src,transparent:!0}),D.setAttribute("geometry",{primitive:"plane",height:this.data.height||this.texture.image.height/1e3,width:this.data.width||this.texture.image.height/1e3})},draw:function(){var D=this.el.sceneEl,Q=this.el.sceneEl.renderer.getContext(),V=this.xrGLFactory.getSubImage(this.layer,D.frame),T=D.renderer.properties.get(this.texture).__webglTexture,F=Q.getParameter(Q.FRAMEBUFFER_BINDING);Q.viewport(V.viewport.x,V.viewport.y,V.viewport.width,V.viewport.height),Q.bindFramebuffer(Q.FRAMEBUFFER,this.frameBuffer),Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_2D,V.colorTexture,0),K(Q,T,V,this.data.src),Q.bindFramebuffer(Q.FRAMEBUFFER,F)},updateTransform:function(){var D=this.el,Q=this.position,V=this.quaternion;D.object3D.updateMatrixWorld(),Q.setFromMatrixPosition(D.object3D.matrixWorld),V.setFromRotationMatrix(D.object3D.matrixWorld),this.layerEnabled||Q.set(0,0,1e8),this.layer.transform=new XRRigidTransform(Q,V)},onEnterVR:function(){var D=this.el.sceneEl,Q=D.xrSession;if(!D.hasWebXR||!XRWebGLBinding||!Q){z("The layer component requires WebXR and the layers API enabled");return}Q.requestReferenceSpace("local-floor").then(this.onRequestedReferenceSpace),this.layerEnabled=!0,this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!1),this.data.src.play&&this.data.src.play()},onExitVR:function(){this.quadPanelEl&&(this.quadPanelEl.object3D.visible=!0),this.destroyLayer()},onRequestedReferenceSpace:function(D){this.referenceSpace=D}});function K(D,Q,V,T){var F=D.createFramebuffer(),N=V.viewport.x,k=V.viewport.y,G=V.viewport.x+V.viewport.width,Z=V.viewport.y+V.viewport.height;T.tagName==="VIDEO"&&(D.bindTexture(D.TEXTURE_2D,Q),D.texSubImage2D(D.TEXTURE_2D,0,0,0,T.width,T.height,D.RGB,D.UNSIGNED_BYTE,T)),D.bindFramebuffer(D.READ_FRAMEBUFFER,F),D.framebufferTexture2D(D.READ_FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,Q,0),D.readBuffer(D.COLOR_ATTACHMENT0),D.blitFramebuffer(0,0,T.width,T.height,N,k,G,Z,D.COLOR_BUFFER_BIT,D.NEAREST),D.bindFramebuffer(D.READ_FRAMEBUFFER,null),D.deleteFramebuffer(F)}},"./src/components/light.js":(ie,we,P)=>{var p=P("./src/utils/index.js"),S=p.diff,z=P("./src/utils/debug.js"),K=P("./src/core/component.js").registerComponent,D=P("./src/lib/three.js"),Q=P("./src/utils/math.js"),V=D.MathUtils.degToRad,T=z("components:light:warn"),F=new D.CubeTextureLoader,N={};ie.exports.Component=K("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color",if:{type:["ambient","directional","hemisphere","point","spot"]}},envMap:{default:"",if:{type:["probe"]}},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot","probe"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot","probe"],schemaChange:!0},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowCameraAutomatic:{default:"",if:{type:["directional"]}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}},shadowRadius:{default:1,if:{castShadow:!0}}},init:function(){var k=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(k)},update:function(k){var G=this.data,Z=S(G,k),ne=this.light,te=this;if(ne&&!("type"in Z)){var de=!1;Object.keys(Z).forEach(function(oe){var ye=G[oe];switch(oe){case"color":{ne.color.set(ye);break}case"groundColor":{ne.groundColor.set(ye);break}case"angle":{ne.angle=V(ye);break}case"target":{ye===null?(G.type==="spot"||G.type==="directional")&&(ne.target=te.defaultTarget):ye.hasLoaded?te.onSetTarget(ye,ne):ye.addEventListener("loaded",te.onSetTarget.bind(te,ye,ne));break}case"envMap":te.updateProbeMap(G,ne);break;case"castShadow":case"shadowBias":case"shadowCameraFar":case"shadowCameraFov":case"shadowCameraNear":case"shadowCameraTop":case"shadowCameraRight":case"shadowCameraBottom":case"shadowCameraLeft":case"shadowCameraVisible":case"shadowMapHeight":case"shadowMapWidth":case"shadowRadius":de||(te.updateShadow(),de=!0);break;case"shadowCameraAutomatic":G.shadowCameraAutomatic?te.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(G.shadowCameraAutomatic)):te.shadowCameraAutomaticEls=[];break;default:ne[oe]=ye}});return}this.setLight(this.data),this.updateShadow()},tick:function(){var k=new D.Box3,G=new D.Vector3,Z=new D.Vector3,ne=new D.Matrix4,te=new D.Sphere,de=new D.Vector3;return function(){if(this.data.type==="directional"&&this.light.shadow&&this.light.shadow.camera instanceof D.OrthographicCamera&&this.shadowCameraAutomaticEls.length){var oe=this.light.shadow.camera;oe.getWorldDirection(G),oe.getWorldPosition(Z),ne.copy(oe.matrixWorld),ne.invert(),oe.near=1,oe.left=1e5,oe.right=-1e5,oe.top=-1e5,oe.bottom=1e5,this.shadowCameraAutomaticEls.forEach(function(ye){k.setFromObject(ye.object3D),k.getBoundingSphere(te);var Me=Q.distanceOfPointFromPlane(Z,G,te.center),Ne=Q.nearestPointInPlane(Z,G,te.center,de),Pe=Ne.applyMatrix4(ne);oe.near=Math.min(-Me-te.radius-1,oe.near),oe.left=Math.min(-te.radius+Pe.x,oe.left),oe.right=Math.max(te.radius+Pe.x,oe.right),oe.top=Math.max(te.radius+Pe.y,oe.top),oe.bottom=Math.min(-te.radius+Pe.y,oe.bottom)}),oe.updateProjectionMatrix()}}}(),setLight:function(k){var G=this.el,Z=this.getLight(k);Z&&(this.light&&G.removeObject3D("light"),this.light=Z,this.light.el=G,G.setObject3D("light",this.light),(k.type==="spot"||k.type==="directional"||k.type==="hemisphere")&&G.getObject3D("light").translateY(-1),k.type==="spot"&&(G.setObject3D("light-target",this.defaultTarget),G.getObject3D("light-target").position.set(0,0,-1)),k.shadowCameraAutomatic?this.shadowCameraAutomaticEls=Array.from(document.querySelectorAll(k.shadowCameraAutomatic)):this.shadowCameraAutomaticEls=[])},updateShadow:function(){var k=this.el,G=this.data,Z=this.light;Z.castShadow=G.castShadow;var ne=k.getObject3D("cameraHelper");if(G.shadowCameraVisible&&!ne?k.setObject3D("cameraHelper",new D.CameraHelper(Z.shadow.camera)):!G.shadowCameraVisible&&ne&&k.removeObject3D("cameraHelper"),!G.castShadow)return Z;Z.shadow.bias=G.shadowBias,Z.shadow.radius=G.shadowRadius,Z.shadow.mapSize.height=G.shadowMapHeight,Z.shadow.mapSize.width=G.shadowMapWidth,Z.shadow.camera.near=G.shadowCameraNear,Z.shadow.camera.far=G.shadowCameraFar,Z.shadow.camera instanceof D.OrthographicCamera?(Z.shadow.camera.top=G.shadowCameraTop,Z.shadow.camera.right=G.shadowCameraRight,Z.shadow.camera.bottom=G.shadowCameraBottom,Z.shadow.camera.left=G.shadowCameraLeft):Z.shadow.camera.fov=G.shadowCameraFov,Z.shadow.camera.updateProjectionMatrix(),ne&&ne.update()},getLight:function(k){var G=k.angle,Z=new D.Color(k.color);Z=Z.getHex();var ne=k.decay,te=k.distance,de=new D.Color(k.groundColor);de=de.getHex();var oe=k.intensity,ye=k.type,Me=k.target,Ne=null;switch(ye.toLowerCase()){case"ambient":return new D.AmbientLight(Z,oe);case"directional":return Ne=new D.DirectionalLight(Z,oe),this.defaultTarget=Ne.target,Me&&(Me.hasLoaded?this.onSetTarget(Me,Ne):Me.addEventListener("loaded",this.onSetTarget.bind(this,Me,Ne))),Ne;case"hemisphere":return new D.HemisphereLight(Z,de,oe);case"point":return new D.PointLight(Z,oe,te,ne);case"spot":return Ne=new D.SpotLight(Z,oe,te,V(G),k.penumbra,ne),this.defaultTarget=Ne.target,Me&&(Me.hasLoaded?this.onSetTarget(Me,Ne):Me.addEventListener("loaded",this.onSetTarget.bind(this,Me,Ne))),Ne;case"probe":return Ne=new D.LightProbe,this.updateProbeMap(k,Ne),Ne;default:T("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",ye)}},updateProbeMap:function(k,G){k.envMap||G.copy(new D.LightProbe),N[k.envMap]instanceof window.Promise&&N[k.envMap].then(function(Z){G.copy(Z)}),N[k.envMap]instanceof D.LightProbe&&G.copy(N[k.envMap]),N[k.envMap]=new window.Promise(function(Z){p.srcLoader.validateCubemapSrc(k.envMap,function(te){F.load(te,function(de){var oe=D.LightProbeGenerator.fromCubeTexture(de);N[k.envMap]=oe,G.copy(oe)})})})},onSetTarget:function(k,G){G.target=k.object3D},remove:function(){var k=this.el;k.removeObject3D("light"),k.getObject3D("cameraHelper")&&k.removeObject3D("cameraHelper")}})},"./src/components/line.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var z=this.data,K,D;D=this.material=new THREE.LineBasicMaterial({color:z.color,opacity:z.opacity,transparent:z.opacity<1,visible:z.visible}),K=this.geometry=new THREE.BufferGeometry,K.setAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(K,D),this.el.setObject3D(this.attrName,this.line)},update:function(z){var K=this.data,D=this.geometry,Q=!1,V=this.material,T=D.attributes.position.array;S(K.start,z.start)||(T[0]=K.start.x,T[1]=K.start.y,T[2]=K.start.z,Q=!0),S(K.end,z.end)||(T[3]=K.end.x,T[4]=K.end.y,T[5]=K.end.z,Q=!0),Q&&(D.attributes.position.needsUpdate=!0,D.computeBoundingSphere()),V.color.setStyle(K.color),V.opacity=K.opacity,V.transparent=K.opacity<1,V.visible=K.visible},remove:function(){this.el.removeObject3D(this.attrName,this.line)}});function S(z,K){return!z||!K?!1:z.x===K.x&&z.y===K.y&&z.z===K.z}},"./src/components/link.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/core/shader.js").registerShader,z=P("./src/lib/three.js");ie.exports.Component=p("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!1}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new z.Quaternion,this.hiddenEls=[]},update:function(K){var D=this.data,Q=this.el,V,T;D.visualAspectEnabled&&(this.initVisualAspect(),V=D.highlighted?D.highlightedColor:D.backgroundColor,T=D.highlighted?D.highlightedColor:D.borderColor,Q.setAttribute("material","backgroundColor",V),Q.setAttribute("material","strokeColor",T),D.on!==K.on&&this.updateEventListener(),K.peekMode!==void 0&&D.peekMode!==K.peekMode&&this.updatePeekMode(),!(!D.image||K.image===D.image)&&Q.setAttribute("material","pano",typeof D.image=="string"?D.image:D.image.src))},updatePeekMode:function(){var K=this.el,D=this.sphereEl;this.data.peekMode?(this.hideAll(),K.getObject3D("mesh").visible=!1,D.setAttribute("visible",!0)):(this.showAll(),K.getObject3D("mesh").visible=!0,D.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var K=this.el;K.isPlaying&&(this.removeEventListener(),K.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var K=this.data.on;K&&this.el.removeEventListener(K,this.navigate)},initVisualAspect:function(){var K=this.el,D,Q,V;!this.data.visualAspectEnabled||this.visualAspectInitialized||(V=this.textEl=this.textEl||document.createElement("a-entity"),Q=this.sphereEl=this.sphereEl||document.createElement("a-entity"),D=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),K.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),K.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),V.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),V.setAttribute("position","0 1.5 0"),K.appendChild(V),D.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),D.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),D.setAttribute("rotation","0 180 0"),D.setAttribute("position","0 0 0"),D.setAttribute("visible",!1),K.appendChild(D),Q.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),Q.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),Q.setAttribute("visible",!1),K.appendChild(Q),this.visualAspectInitialized=!0)},navigate:function(){window.location=this.data.href},tick:function(){var K=new z.Vector3,D=new z.Vector3,Q=new z.Quaternion,V=new z.Vector3;return function(){var T=this.el,F=T.object3D,N=T.sceneEl.camera,k,G,Z=this.textEl;if(this.data.visualAspectEnabled)if(F.updateMatrixWorld(),N.parent.updateMatrixWorld(),N.updateMatrixWorld(),F.matrix.decompose(D,Q,V),D.setFromMatrixPosition(F.matrixWorld),K.setFromMatrixPosition(N.matrixWorld),G=D.distanceTo(K),G>20)this.previousQuaternion||(this.quaternionClone.copy(Q),this.previousQuaternion=this.quaternionClone),F.lookAt(K);else{if(k=this.calculateCameraPortalOrientation(),G<.5){if(this.semiSphereEl.getAttribute("visible")===!0)return;Z.setAttribute("text","width",1.5),k<=0?(Z.setAttribute("position","0 0 0.75"),Z.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(Z.setAttribute("position","0 0 -0.75"),Z.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),T.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=k}else k<=0?Z.setAttribute("rotation","0 180 0"):Z.setAttribute("rotation","0 0 0"),Z.setAttribute("text","width",5),Z.setAttribute("position","0 1.5 0"),T.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(F.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var K=this.el,D=this.hiddenEls,Q=this;D.length>0||K.sceneEl.object3D.traverse(function(V){V&&V.el&&V.el.hasAttribute("link-controls")||!V.el||V===K.sceneEl.object3D||V.el===K||V.el===Q.sphereEl||V.el===K.sceneEl.cameraEl||V.el.getAttribute("visible")===!1||V.el===Q.textEl||V.el===Q.semiSphereEl||(V.el.setAttribute("visible",!1),D.push(V.el))})},showAll:function(){this.hiddenEls.forEach(function(K){K.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var K=new z.Matrix4,D=new z.Vector3,Q=new z.Vector3(0,0,1),V=new z.Vector3(0,0,0);return function(){var T=this.el,F=T.sceneEl.camera;return D.set(0,0,0),Q.set(0,0,1),V.set(0,0,0),T.object3D.matrixWorld.extractRotation(K),Q.applyMatrix4(K),T.object3D.updateMatrixWorld(),T.object3D.localToWorld(V),F.parent.parent.updateMatrixWorld(),F.parent.updateMatrixWorld(),F.updateMatrixWorld(),F.localToWorld(D),D.sub(V).normalize(),Q.normalize(),Math.sign(Q.dot(D))}}(),remove:function(){this.removeEventListener()}}),S("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:["vec3 portalPosition;","varying vec3 vWorldPosition;","varying float vDistanceToCenter;","varying float vDistance;","void main() {","vDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);","portalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;","vDistance = length(portalPosition - cameraPosition);","vWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;","gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);","}"].join(`
`),fragmentShader:["#define RECIPROCAL_PI2 0.15915494","uniform sampler2D pano;","uniform vec3 strokeColor;","uniform vec3 backgroundColor;","uniform float borderEnabled;","varying float vDistanceToCenter;","varying float vDistance;","varying vec3 vWorldPosition;","void main() {","vec3 direction = normalize(vWorldPosition - cameraPosition);","vec2 sampleUV;","float borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);","sampleUV.y = clamp(direction.y * 0.5  + 0.5, 0.0, 1.0);","sampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;","if (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {","gl_FragColor = vec4(strokeColor, 1.0);","} else {","gl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));","}","}"].join(`
`)})},"./src/components/look-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=P("./src/utils/index.js"),K=Math.PI/2;ie.exports.Component=p("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},magicWindowTrackingEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},reverseTouchDrag:{default:!1},touchEnabled:{default:!0},mouseEnabled:{default:!0}},init:function(){this.deltaYaw=0,this.previousHMDPosition=new S.Vector3,this.hmdQuaternion=new S.Quaternion,this.magicWindowAbsoluteEuler=new S.Euler,this.magicWindowDeltaEuler=new S.Euler,this.position=new S.Vector3,this.magicWindowObject=new S.Object3D,this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.previousMouseEvent={},this.setupMagicWindowControls(),this.savedPose={position:new S.Vector3,rotation:new S.Euler},(this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode"))&&this.onEnterVR()},setupMagicWindowControls:function(){var D,Q=this.data;(z.device.isMobile()||z.device.isMobileDeviceRequestingDesktopSite())&&(D=this.magicWindowControls=new S.DeviceOrientationControls(this.magicWindowObject),typeof DeviceOrientationEvent<"u"&&DeviceOrientationEvent.requestPermission&&(D.enabled=!1,this.el.sceneEl.components["device-orientation-permission-ui"].permissionGranted?D.enabled=Q.magicWindowTrackingEnabled:this.el.sceneEl.addEventListener("deviceorientationpermissiongranted",function(){D.enabled=Q.magicWindowTrackingEnabled})))},update:function(D){var Q=this.data;Q.enabled!==D.enabled&&this.updateGrabCursor(Q.enabled),D&&!Q.magicWindowTrackingEnabled&&D.magicWindowTrackingEnabled&&(this.magicWindowAbsoluteEuler.set(0,0,0),this.magicWindowDeltaEuler.set(0,0,0)),this.magicWindowControls&&(this.magicWindowControls.enabled=Q.magicWindowTrackingEnabled),D&&!Q.pointerLockEnabled!==D.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&this.exitPointerLock())},tick:function(D){var Q=this.data;Q.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},remove:function(){this.removeEventListeners(),this.pointerLocked&&this.exitPointerLock()},bindMethods:function(){this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this),this.onExitVR=this.onExitVR.bind(this),this.onPointerLockChange=this.onPointerLockChange.bind(this),this.onPointerLockError=this.onPointerLockError.bind(this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new S.Object3D,this.yawObject=new S.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var D=this.el.sceneEl,Q=D.canvas;if(!Q){D.addEventListener("render-target-loaded",this.addEventListeners.bind(this));return}Q.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),Q.addEventListener("touchstart",this.onTouchStart,{passive:!0}),window.addEventListener("touchmove",this.onTouchMove,{passive:!0}),window.addEventListener("touchend",this.onTouchEnd,{passive:!0}),D.addEventListener("enter-vr",this.onEnterVR),D.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))},removeEventListeners:function(){var D=this.el.sceneEl,Q=D&&D.canvas;Q&&(Q.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),Q.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),D.removeEventListener("enter-vr",this.onEnterVR),D.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var D=this.el.object3D,Q=this.pitchObject,V=this.yawObject,T=this.el.sceneEl;(T.is("vr-mode")||T.is("ar-mode"))&&T.checkHeadsetConnected()||(this.updateMagicWindowOrientation(),D.rotation.x=this.magicWindowDeltaEuler.x+Q.rotation.x,D.rotation.y=this.magicWindowDeltaEuler.y+V.rotation.y,D.rotation.z=this.magicWindowDeltaEuler.z)},updateMagicWindowOrientation:function(){var D=this.magicWindowAbsoluteEuler,Q=this.magicWindowDeltaEuler;this.magicWindowControls&&this.magicWindowControls.enabled&&(this.magicWindowControls.update(),D.setFromQuaternion(this.magicWindowObject.quaternion,"YXZ"),!this.previousMagicWindowYaw&&D.y!==0&&(this.previousMagicWindowYaw=D.y),this.previousMagicWindowYaw&&(Q.x=D.x,Q.y+=D.y-this.previousMagicWindowYaw,Q.z=D.z,this.previousMagicWindowYaw=D.y))},onMouseMove:function(D){var Q,V,T,F=this.pitchObject,N=this.previousMouseEvent,k=this.yawObject;!this.data.enabled||!this.mouseDown&&!this.pointerLocked||(this.pointerLocked?(V=D.movementX||D.mozMovementX||0,T=D.movementY||D.mozMovementY||0):(V=D.screenX-N.screenX,T=D.screenY-N.screenY),this.previousMouseEvent.screenX=D.screenX,this.previousMouseEvent.screenY=D.screenY,Q=this.data.reverseMouseDrag?1:-1,k.rotation.y+=V*.002*Q,F.rotation.x+=T*.002*Q,F.rotation.x=Math.max(-K,Math.min(K,F.rotation.x)))},onMouseDown:function(D){var Q=this.el.sceneEl;if(!(!this.data.enabled||!this.data.mouseEnabled||(Q.is("vr-mode")||Q.is("ar-mode"))&&Q.checkHeadsetConnected())&&D.button===0){var V=Q&&Q.canvas;this.mouseDown=!0,this.previousMouseEvent.screenX=D.screenX,this.previousMouseEvent.screenY=D.screenY,this.showGrabbingCursor(),this.data.pointerLockEnabled&&!this.pointerLocked&&(V.requestPointerLock?V.requestPointerLock():V.mozRequestPointerLock&&V.mozRequestPointerLock())}},showGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor="grabbing"},hideGrabbingCursor:function(){this.el.sceneEl.canvas.style.cursor=""},onMouseUp:function(){this.mouseDown=!1,this.hideGrabbingCursor()},onTouchStart:function(D){D.touches.length!==1||!this.data.touchEnabled||this.el.sceneEl.is("vr-mode")||this.el.sceneEl.is("ar-mode")||(this.touchStart={x:D.touches[0].pageX,y:D.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(D){var Q,V=this.el.sceneEl.canvas,T,F=this.yawObject;!this.touchStarted||!this.data.touchEnabled||(T=2*Math.PI*(D.touches[0].pageX-this.touchStart.x)/V.clientWidth,Q=this.data.reverseTouchDrag?1:-1,F.rotation.y-=T*.5*Q,this.touchStart={x:D.touches[0].pageX,y:D.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){var D=this.el.sceneEl;D.checkHeadsetConnected()&&(this.saveCameraPose(),this.el.object3D.position.set(0,0,0),this.el.object3D.rotation.set(0,0,0),D.hasWebXR&&(this.el.object3D.matrixAutoUpdate=!1,this.el.object3D.updateMatrix()))},onExitVR:function(){this.el.sceneEl.checkHeadsetConnected()&&(this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0),this.el.object3D.matrixAutoUpdate=!0)},onPointerLockChange:function(){this.pointerLocked=!!(document.pointerLockElement||document.mozPointerLockElement)},onPointerLockError:function(){this.pointerLocked=!1},exitPointerLock:function(){document.exitPointerLock(),this.pointerLocked=!1},updateGrabCursor:function(D){var Q=this.el.sceneEl;function V(){Q.canvas.classList.add("a-grab-cursor")}function T(){Q.canvas.classList.remove("a-grab-cursor")}if(!Q.canvas){D?Q.addEventListener("render-target-loaded",V):Q.addEventListener("render-target-loaded",T);return}if(D){V();return}T()},saveCameraPose:function(){var D=this.el;this.savedPose.position.copy(D.object3D.position),this.savedPose.rotation.copy(D.object3D.rotation),this.hasSavedPose=!0},restoreCameraPose:function(){var D=this.el,Q=this.savedPose;this.hasSavedPose&&(D.object3D.position.copy(Q.position),D.object3D.rotation.copy(Q.rotation),this.hasSavedPose=!1)}})},"./src/components/magicleap-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/tracked-controls.js"),z=S.checkControllerPresentAndSetup,K=S.emitIfAxesChanged,D=S.onButtonEvent,Q="magicleap",V="-one",T=Q+V,F=P("./src/constants/index.js").AFRAME_CDN_ROOT,N=F+"controllers/magicleap/magicleap-one-controller.glb",k={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","menu"]};ie.exports.Component=p("magicleap-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:k,init:function(){var G=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(Z){D(Z.detail.id,"down",G)},this.onButtonUp=function(Z){D(Z.detail.id,"up",G)},this.onButtonTouchEnd=function(Z){D(Z.detail.id,"touchend",G)},this.onButtonTouchStart=function(Z){D(Z.detail.id,"touchstart",G)},this.previousButtonValues={},this.bindMethods()},update:function(){var G=this.data;this.controllerIndex=G.hand==="right"?0:G.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var G=this.el;G.addEventListener("buttonchanged",this.onButtonChanged),G.addEventListener("buttondown",this.onButtonDown),G.addEventListener("buttonup",this.onButtonUp),G.addEventListener("touchstart",this.onButtonTouchStart),G.addEventListener("touchend",this.onButtonTouchEnd),G.addEventListener("axismove",this.onAxisMoved),G.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var G=this.el;G.removeEventListener("buttonchanged",this.onButtonChanged),G.removeEventListener("buttondown",this.onButtonDown),G.removeEventListener("buttonup",this.onButtonUp),G.removeEventListener("touchstart",this.onButtonTouchStart),G.removeEventListener("touchend",this.onButtonTouchEnd),G.removeEventListener("axismove",this.onAxisMoved),G.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var G=this.data;z(this,T,{index:this.controllerIndex,hand:G.hand})},injectTrackedControls:function(){var G=this.el,Z=this.data;G.setAttribute("tracked-controls",{idPrefix:T,hand:Z.hand,controller:this.controllerIndex,orientationOffset:Z.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",N)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(G){var Z=this.mapping.buttons[G.detail.id],ne;Z&&(Z==="trigger"&&(ne=G.detail.state.value,console.log("analog value of trigger press: "+ne)),this.el.emit(Z+"changed",G.detail.state))},onModelLoaded:function(G){var Z=G.detail.model;Z.scale.set(.01,.01,.01)},onAxisMoved:function(G){K(this,this.mapping.axes,G)},updateModel:function(G,Z){},setButtonColor:function(G,Z){}})},"./src/components/material.js":(ie,we,P)=>{var p=P("./src/utils/index.js"),S=P("./src/core/component.js"),z=P("./src/lib/three.js"),K=P("./src/core/shader.js"),D=p.debug("components:material:error"),Q=S.registerComponent,V=K.shaders,T=K.shaderNames;ie.exports.Component=Q("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:T,schemaChange:!0},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColorsEnabled:{default:!1},visible:{default:!0},blending:{default:"normal",oneOf:["none","normal","additive","subtractive","multiply"]},dithering:{default:!0},anisotropy:{default:0,min:0}},init:function(){this.material=null},update:function(G){var Z=this.data;(!this.shader||Z.shader!==G.shader)&&this.updateShader(Z.shader),this.shader.update(this.data),this.updateMaterial(G)},updateSchema:function(G){var Z,ne,te,de;ne=G&&G.shader,Z=this.oldData&&this.oldData.shader,de=ne||Z,te=V[de]&&V[de].schema,te||D("Unknown shader schema "+de),!(Z&&ne===Z)&&(this.extendSchema(te),this.updateBehavior())},updateBehavior:function(){var G,Z=this.el.sceneEl,ne=this.schema,te=this,de;function oe(ye,Me){var Ne;for(Ne in de)de[Ne]=ye;te.shader.update(de)}this.tick=void 0,de={};for(G in ne)ne[G].type==="time"&&(this.tick=oe,de[G]=!0);Z&&(this.tick?Z.addBehavior(this):Z.removeBehavior(this))},updateShader:function(G){var Z=this.data,ne=V[G]&&V[G].Shader,te;if(!ne)throw new Error("Unknown shader "+G);te=this.shader=new ne,te.el=this.el,te.init(Z),this.setMaterial(te.material),this.updateSchema(Z)},updateMaterial:function(G){var Z=this.data,ne=this.material,te;ne.alphaTest=Z.alphaTest,ne.depthTest=Z.depthTest!==!1,ne.depthWrite=Z.depthWrite!==!1,ne.opacity=Z.opacity,ne.flatShading=Z.flatShading,ne.side=F(Z.side),ne.transparent=Z.transparent!==!1||Z.opacity<1,ne.vertexColors=Z.vertexColorsEnabled,ne.visible=Z.visible,ne.blending=N(Z.blending),ne.dithering=Z.dithering;for(te in G)break;te&&(G.alphaTest!==Z.alphaTest||G.side!==Z.side||G.vertexColorsEnabled!==Z.vertexColorsEnabled)&&(ne.needsUpdate=!0)},remove:function(){var G=new z.MeshBasicMaterial,Z=this.material,ne=this.el.getObject3D("mesh");ne&&(ne.material=G),k(Z,this.system)},setMaterial:function(G){var Z=this.el,ne,te=this.system;this.material&&k(this.material,te),this.material=G,te.registerMaterial(G),ne=Z.getObject3D("mesh"),ne?ne.material=G:Z.addEventListener("object3dset",function de(oe){oe.detail.type!=="mesh"||oe.target!==Z||(Z.getObject3D("mesh").material=G,Z.removeEventListener("object3dset",de))})}});function F(G){switch(G){case"back":return z.BackSide;case"double":return z.DoubleSide;default:return z.FrontSide}}function N(G){switch(G){case"none":return z.NoBlending;case"additive":return z.AdditiveBlending;case"subtractive":return z.SubtractiveBlending;case"multiply":return z.MultiplyBlending;default:return z.NormalBlending}}function k(G,Z){G.dispose(),Z.unregisterMaterial(G),Object.keys(G).filter(function(ne){return G[ne]&&G[ne].isTexture}).forEach(function(ne){G[ne].dispose()})}},"./src/components/obb-collider.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js");p("obb-collider",{schema:{size:{default:0},trackedObject3D:{default:""},minimumColliderDimension:{default:.02},centerModel:{default:!1}},init:function(){this.previousScale=new S.Vector3().copy(this.el.object3D.scale),this.auxEuler=new S.Euler,this.boundingBox=new S.Box3,this.boundingBoxSize=new S.Vector3,this.updateCollider=this.updateCollider.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.updateBoundingBox=this.updateBoundingBox.bind(this),this.el.addEventListener("model-loaded",this.onModelLoaded),this.updateCollider(),this.system.addCollider(this.el)},remove:function(){this.system.removeCollider(this.el)},update:function(){this.data.trackedObject3D&&(this.trackedObject3DPath=this.data.trackedObject3D.split("."))},onModelLoaded:function(){this.data.centerModel&&this.centerModel(),this.updateCollider()},centerModel:function(){var z=this.el,K=z.components["gltf-model"]&&z.components["gltf-model"].model,D,Q;K&&(this.el.removeObject3D("mesh"),D=new S.Box3().setFromObject(K),Q=D.getCenter(new S.Vector3),K.position.x+=K.position.x-Q.x,K.position.y+=K.position.y-Q.y,K.position.z+=K.position.z-Q.z,this.el.setObject3D("mesh",K))},updateCollider:function(){var z=this.el,K=this.boundingBoxSize,D=this.aabb=this.aabb||new S.OBB;if(this.obb=this.obb||new S.OBB,!z.hasLoaded){z.addEventListener("loaded",this.updateCollider);return}this.updateBoundingBox(),D.halfSize.copy(K).multiplyScalar(.5),this.el.sceneEl.systems["obb-collider"].data.showColliders&&this.showCollider()},showCollider:function(){this.updateColliderMesh(),this.renderColliderMesh.visible=!0},updateColliderMesh:function(){var z=this.renderColliderMesh,K=this.boundingBoxSize;if(!z){this.initColliderMesh();return}z.geometry.dispose(),z.geometry=new S.BoxGeometry(K.x,K.y,K.z)},hideCollider:function(){this.renderColliderMesh&&(this.renderColliderMesh.visible=!1)},initColliderMesh:function(){var z,K,D;z=this.boundingBoxSize,K=this.renderColliderGeometry=new S.BoxGeometry(z.x,z.y,z.z),D=this.renderColliderMesh=new S.Mesh(K,new S.MeshLambertMaterial({color:65280,side:S.DoubleSide})),D.matrixAutoUpdate=!1,D.matrixWorldAutoUpdate=!1,D.updateMatrixWorld=function(){},this.el.sceneEl.object3D.add(D)},updateBoundingBox:function(){var z=new S.Vector3,K=new S.Vector3,D=new S.Quaternion,Q=new S.Quaternion,V=new S.Matrix4;return function(){var T=this.auxEuler,F=this.boundingBox,N=this.data.size,k=this.trackedObject3D||this.el.object3D,G=this.boundingBoxSize,Z=this.data.minimumColliderDimension;if(N){this.boundingBoxSize.x=N,this.boundingBoxSize.y=N,this.boundingBoxSize.z=N;return}T.copy(k.rotation),k.rotation.set(0,0,0),k.parent.matrixWorld.decompose(z,D,K),V.compose(z,Q,K),k.parent.matrixWorld.copy(V),F.setFromObject(k,!0),F.getSize(G),G.x=G.x<Z?Z:G.x,G.y=G.y<Z?Z:G.y,G.z=G.z<Z?Z:G.z,k.parent.matrixWorld.compose(z,D,K),this.el.object3D.rotation.copy(T)}}(),checkTrackedObject:function(){var z=this.trackedObject3DPath,K;if(z&&z.length&&!this.trackedObject3D){K=this.el;for(var D=0;D<z.length&&(K=K[z[D]],!!K);D++);K&&(this.trackedObject3D=K,this.updateCollider())}return this.trackedObject3D},tick:function(){var z=new S.Vector3,K=new S.Vector3,D=new S.Quaternion,Q=new S.Matrix4;return function(){var V=this.obb,T=this.renderColliderMesh,F=this.checkTrackedObject()||this.el.object3D;F&&(F.updateMatrix(),F.updateMatrixWorld(!0),F.matrixWorld.decompose(z,D,K),(Math.abs(K.x-this.previousScale.x)>1e-4||Math.abs(K.y-this.previousScale.y)>1e-4||Math.abs(K.z-this.previousScale.z)>1e-4)&&this.updateCollider(),this.previousScale.copy(K),K.set(1,1,1),Q.compose(z,D,K),T&&T.matrixWorld.copy(Q),V.copy(this.aabb),V.applyMatrix4(Q))}}()})},"./src/components/obj-model.js":(ie,we,P)=>{var p=P("./src/utils/debug.js"),S=P("./src/core/component.js").registerComponent,z=P("./src/lib/three.js"),K=p("components:obj-model:warn");ie.exports.Component=S("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){var D=this;this.model=null,this.objLoader=new z.OBJLoader,this.mtlLoader=new z.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin="",this.el.addEventListener("componentinitialized",function(Q){D.model&&Q.detail.name==="material"&&D.applyMaterial()})},update:function(){var D=this.data;D.obj&&(this.resetMesh(),this.loadObj(D.obj,D.mtl))},remove:function(){this.resetMesh()},resetMesh:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(D,Q){var V=this,T=this.el,F=this.mtlLoader,N=this.objLoader,k=this.el.sceneEl.systems.renderer,G=Q.substr(0,Q.lastIndexOf("/")+1);if(Q){T.hasAttribute("material")&&K("Material component properties are ignored when a .MTL is provided"),F.setResourcePath(G),F.load(Q,function(Z){Z.preload(),N.setMaterials(Z),N.load(D,function(ne){V.model=ne,V.model.traverse(function(te){if(te.isMesh){var de=te.material;de.map&&k.applyColorCorrection(de.map),de.emissiveMap&&k.applyColorCorrection(de.emissiveMap)}}),T.setObject3D("mesh",ne),T.emit("model-loaded",{format:"obj",model:ne})})});return}N.load(D,function(ne){V.model=ne,V.applyMaterial(),T.setObject3D("mesh",ne),T.emit("model-loaded",{format:"obj",model:ne})})},applyMaterial:function(){var D=this.el.components.material;D&&this.model.traverse(function(Q){Q instanceof z.Mesh&&(Q.material=D.material)})}})},"./src/components/oculus-go-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/tracked-controls.js"),z=S.checkControllerPresentAndSetup,K=S.emitIfAxesChanged,D=S.onButtonEvent,Q=P("./src/utils/index.js").device.isWebXRAvailable,V="oculus-go",T="Oculus Go",F=P("./src/constants/index.js").AFRAME_CDN_ROOT,N=F+"controllers/oculus/go/oculus-go-controller.gltf",k=Q?V:T,G={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},Z={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad"]},ne=Q?Z:G;ie.exports.Component=p("oculus-go-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#FFFFFF"},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:ne,bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var te=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(de){D(de.detail.id,"down",te)},this.onButtonUp=function(de){D(de.detail.id,"up",te)},this.onButtonTouchStart=function(de){D(de.detail.id,"touchstart",te)},this.onButtonTouchEnd=function(de){D(de.detail.id,"touchend",te)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var te=this.el;te.addEventListener("buttonchanged",this.onButtonChanged),te.addEventListener("buttondown",this.onButtonDown),te.addEventListener("buttonup",this.onButtonUp),te.addEventListener("touchstart",this.onButtonTouchStart),te.addEventListener("touchend",this.onButtonTouchEnd),te.addEventListener("model-loaded",this.onModelLoaded),te.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var te=this.el;te.removeEventListener("buttonchanged",this.onButtonChanged),te.removeEventListener("buttondown",this.onButtonDown),te.removeEventListener("buttonup",this.onButtonUp),te.removeEventListener("touchstart",this.onButtonTouchStart),te.removeEventListener("touchend",this.onButtonTouchEnd),te.removeEventListener("model-loaded",this.onModelLoaded),te.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){z(this,k,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var te=this.el,de=this.data;te.setAttribute("tracked-controls",{armModel:de.armModel,hand:de.hand,idPrefix:k,orientationOffset:de.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",N)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(te){var de=te.detail.model,oe;te.target!==this.el||!this.data.model||(oe=this.buttonMeshes={},oe.trigger=de.getObjectByName("oculus_go_button_trigger"),oe.trackpad=de.getObjectByName("oculus_go_touchpad"),oe.touchpad=de.getObjectByName("oculus_go_touchpad"))},onButtonChanged:function(te){var de=this.mapping.buttons[te.detail.id];de&&this.el.emit(de+"changed",te.detail.state)},onAxisMoved:function(te){K(this,this.mapping.axes,te)},updateModel:function(te,de){this.data.model&&this.updateButtonModel(te,de)},updateButtonModel:function(te,de){var oe=this.buttonMeshes;if(!(!oe||!oe[te])){var ye,Me;switch(de){case"down":ye=this.data.buttonHighlightColor;break;case"touchstart":ye=this.data.buttonTouchedColor;break;default:ye=this.data.buttonColor}Me=oe[te],Me.material.color.set(ye)}}})},"./src/components/oculus-touch-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=P("./src/utils/tracked-controls.js"),K=z.checkControllerPresentAndSetup,D=z.emitIfAxesChanged,Q=z.onButtonEvent,V=P("./src/utils/index.js").device.isWebXRAvailable,T="oculus-touch",F="Oculus Touch",N=V?T:F,k=P("./src/constants/index.js").AFRAME_CDN_ROOT,G=k+"controllers/oculus/oculus-touch-controller-",Z=k+"controllers/meta/",ne={left:{modelUrl:G+"left.gltf",rayOrigin:{origin:{x:.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new S.Vector3(-.005,.003,-.055),modelPivotRotation:new S.Euler(0,0,0)},right:{modelUrl:G+"right.gltf",rayOrigin:{origin:{x:-.008,y:-.01,z:0},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new S.Vector3(.005,.003,-.055),modelPivotRotation:new S.Euler(0,0,0)}},te={left:{modelUrl:G+"left.gltf",rayOrigin:{origin:{x:.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new S.Vector3(-.005,.036,-.037),modelPivotRotation:new S.Euler(Math.PI/4.5,0,0)},right:{modelUrl:G+"right.gltf",rayOrigin:{origin:{x:-.002,y:-.005,z:-.03},direction:{x:0,y:-.8,z:-1}},modelPivotOffset:new S.Vector3(.005,.036,-.037),modelPivotRotation:new S.Euler(Math.PI/4.5,0,0)}},de=V?te:ne,oe="oculus-touch",ye={"oculus-touch":de,"oculus-touch-v2":{left:{modelUrl:G+"gen2-left.gltf",rayOrigin:{origin:{x:-.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new S.Vector3(0,-.007,-.021),modelPivotRotation:new S.Euler(-Math.PI/4,0,0)},right:{modelUrl:G+"gen2-right.gltf",rayOrigin:{origin:{x:.006,y:-.03,z:-.04},direction:{x:0,y:-.9,z:-1}},modelPivotOffset:new S.Vector3(0,-.007,-.021),modelPivotRotation:new S.Euler(-Math.PI/4,0,0)}},"oculus-touch-v3":{left:{modelUrl:G+"v3-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new S.Vector3(0,0,0),modelPivotRotation:new S.Euler(0,0,0)},right:{modelUrl:G+"v3-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new S.Vector3(0,0,0),modelPivotRotation:new S.Euler(0,0,0)}},"meta-quest-touch-pro":{left:{modelUrl:Z+"quest-touch-pro-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new S.Vector3(0,0,0),modelPivotRotation:new S.Euler(0,0,0)},right:{modelUrl:Z+"quest-touch-pro-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new S.Vector3(0,0,0),modelPivotRotation:new S.Euler(0,0,0)}},"meta-quest-touch-plus":{left:{modelUrl:Z+"quest-touch-plus-left.glb",rayOrigin:{origin:{x:.0065,y:-.0186,z:-.05},direction:{x:.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new S.Vector3(0,0,0),modelPivotRotation:new S.Euler(0,0,0)},right:{modelUrl:Z+"quest-touch-plus-right.glb",rayOrigin:{origin:{x:-.0065,y:-.0186,z:-.05},direction:{x:-.12394785839500175,y:-.5944043672340157,z:-.7945567170519814}},modelPivotOffset:new S.Vector3(0,0,0),modelPivotRotation:new S.Euler(0,0,0)}}},Me={left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},Ne={left:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[2,3]},buttons:["trigger","grip","none","thumbstick","abutton","bbutton","surface"]}},Pe=V?Ne:Me;ie.exports.Component=p("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},controllerType:{default:"auto",oneOf:["auto","oculus-touch","oculus-touch-v2","oculus-touch-v3"]},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},after:["tracked-controls"],mapping:Pe,bindMethods:function(){this.onButtonChanged=this.onButtonChanged.bind(this),this.onThumbstickMoved=this.onThumbstickMoved.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var De=this;this.onButtonDown=function(ke){Q(ke.detail.id,"down",De,De.data.hand)},this.onButtonUp=function(ke){Q(ke.detail.id,"up",De,De.data.hand)},this.onButtonTouchStart=function(ke){Q(ke.detail.id,"touchstart",De,De.data.hand)},this.onButtonTouchEnd=function(ke){Q(ke.detail.id,"touchend",De,De.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.triggerEuler=new S.Euler},addEventListeners:function(){var De=this.el;De.addEventListener("buttonchanged",this.onButtonChanged),De.addEventListener("buttondown",this.onButtonDown),De.addEventListener("buttonup",this.onButtonUp),De.addEventListener("touchstart",this.onButtonTouchStart),De.addEventListener("touchend",this.onButtonTouchEnd),De.addEventListener("axismove",this.onAxisMoved),De.addEventListener("model-loaded",this.onModelLoaded),De.addEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var De=this.el;De.removeEventListener("buttonchanged",this.onButtonChanged),De.removeEventListener("buttondown",this.onButtonDown),De.removeEventListener("buttonup",this.onButtonUp),De.removeEventListener("touchstart",this.onButtonTouchStart),De.removeEventListener("touchend",this.onButtonTouchEnd),De.removeEventListener("axismove",this.onAxisMoved),De.removeEventListener("model-loaded",this.onModelLoaded),De.removeEventListener("thumbstickmoved",this.onThumbstickMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){K(this,N,{hand:this.data.hand,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},loadModel:function(De){var ke=this.data,Ce;if(ke.model){if(this.controllerObject3D){this.el.setObject3D("mesh",this.controllerObject3D);return}if(this.displayModel=ye[ke.controllerType]||ye[oe],ke.controllerType==="auto"){var fe=this.el.sceneEl.systems["tracked-controls-webvr"];if(fe&&fe.vrDisplay){var Oe=fe.vrDisplay.displayName;/^Oculus Quest$/.test(Oe)&&(this.displayModel=ye["oculus-touch-v2"])}else{Ce=oe;for(var Te=Object.keys(ye),Ve=0;Ve<De.profiles.length;Ve++)if(Te.indexOf(De.profiles[Ve])!==-1){Ce=De.profiles[Ve];break}this.displayModel=ye[Ce]}}var st=this.displayModel[ke.hand].modelUrl;this.isTouchV3orPROorPlus=this.displayModel===ye["oculus-touch-v3"]||this.displayModel===ye["meta-quest-touch-pro"]||this.displayModel===ye["meta-quest-touch-plus"],this.el.setAttribute("gltf-model",st)}},injectTrackedControls:function(De){var ke=this.data,Ce=T,fe=ke.hand==="right"?"Oculus Touch (Right)":"Oculus Touch (Left)",Oe=V?Ce:fe;this.el.setAttribute("tracked-controls",{id:Oe,hand:ke.hand,orientationOffset:ke.orientationOffset,handTrackingEnabled:!1,iterateControllerProfiles:!0,space:"gripSpace"}),this.loadModel(De)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(De){var ke=this.mapping[this.data.hand].buttons[De.detail.id];if(ke){if(this.isTouchV3orPROorPlus)this.onButtonChangedV3orPROorPlus(De);else{var Ce=this.buttonMeshes,fe;(ke==="trigger"||ke==="grip")&&(fe=De.detail.state.value),Ce&&(ke==="trigger"&&Ce.trigger&&(Ce.trigger.rotation.x=this.originalXRotationTrigger-fe*(Math.PI/26)),ke==="grip"&&Ce.grip&&(fe*=this.data.hand==="left"?-1:1,Ce.grip.position.x=this.originalXPositionGrip+fe*.004))}this.el.emit(ke+"changed",De.detail.state)}},onButtonChangedV3orPROorPlus:function(De){var ke=this.mapping[this.data.hand].buttons[De.detail.id],Ce=this.buttonObjects,fe;!Ce||!Ce[ke]||(fe=De.detail.state.value,Ce[ke].quaternion.slerpQuaternions(this.buttonRanges[ke].min.quaternion,this.buttonRanges[ke].max.quaternion,fe),Ce[ke].position.lerpVectors(this.buttonRanges[ke].min.position,this.buttonRanges[ke].max.position,fe))},onModelLoaded:function(De){if(!(De.target!==this.el||!this.data.model)){if(this.isTouchV3orPROorPlus)this.onTouchV3orPROorPlusModelLoaded(De);else{var ke=this.controllerObject3D=De.detail.model,Ce;Ce=this.buttonMeshes={},Ce.grip=ke.getObjectByName("buttonHand"),this.originalXPositionGrip=Ce.grip&&Ce.grip.position.x,Ce.trigger=ke.getObjectByName("buttonTrigger"),this.originalXRotationTrigger=Ce.trigger&&Ce.trigger.rotation.x,Ce.thumbstick=ke.getObjectByName("stick"),Ce.xbutton=ke.getObjectByName("buttonX"),Ce.abutton=ke.getObjectByName("buttonA"),Ce.ybutton=ke.getObjectByName("buttonY"),Ce.bbutton=ke.getObjectByName("buttonB")}for(var fe in this.buttonMeshes)this.buttonMeshes[fe]&&Qe(this.buttonMeshes[fe]);this.applyOffset(De.detail.model),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:this.displayModel[this.data.hand].rayOrigin})}},applyOffset:function(De){De.position.copy(this.displayModel[this.data.hand].modelPivotOffset),De.rotation.copy(this.displayModel[this.data.hand].modelPivotRotation)},onTouchV3orPROorPlusModelLoaded:function(De){var ke=this.controllerObject3D=De.detail.model,Ce=this.buttonObjects={},fe=this.buttonMeshes={},Oe=this.buttonRanges={};fe.grip=ke.getObjectByName("squeeze"),Ce.grip=ke.getObjectByName("xr_standard_squeeze_pressed_value"),Oe.grip={min:ke.getObjectByName("xr_standard_squeeze_pressed_min"),max:ke.getObjectByName("xr_standard_squeeze_pressed_max")},Ce.grip.minX=Ce.grip.position.x,fe.thumbstick=ke.getObjectByName("thumbstick"),Ce.thumbstick=ke.getObjectByName("xr_standard_thumbstick_pressed_value"),Oe.thumbstick={min:ke.getObjectByName("xr_standard_thumbstick_pressed_min"),max:ke.getObjectByName("xr_standard_thumbstick_pressed_max")},Ce.thumbstickXAxis=ke.getObjectByName("xr_standard_thumbstick_xaxis_pressed_value"),Oe.thumbstickXAxis={min:ke.getObjectByName("xr_standard_thumbstick_xaxis_pressed_min"),max:ke.getObjectByName("xr_standard_thumbstick_xaxis_pressed_max")},Ce.thumbstickYAxis=ke.getObjectByName("xr_standard_thumbstick_yaxis_pressed_value"),Oe.thumbstickYAxis={min:ke.getObjectByName("xr_standard_thumbstick_yaxis_pressed_min"),max:ke.getObjectByName("xr_standard_thumbstick_yaxis_pressed_max")},fe.trigger=ke.getObjectByName("trigger"),Ce.trigger=ke.getObjectByName("xr_standard_trigger_pressed_value"),Oe.trigger={min:ke.getObjectByName("xr_standard_trigger_pressed_min"),max:ke.getObjectByName("xr_standard_trigger_pressed_max")},Oe.trigger.diff={x:Math.abs(Oe.trigger.max.rotation.x)-Math.abs(Oe.trigger.min.rotation.x),y:Math.abs(Oe.trigger.max.rotation.y)-Math.abs(Oe.trigger.min.rotation.y),z:Math.abs(Oe.trigger.max.rotation.z)-Math.abs(Oe.trigger.min.rotation.z)};var Te=this.data.hand==="left"?"x":"a",Ve=this.data.hand==="left"?"y":"b",st=Te+"button",dt=Ve+"button";fe[st]=ke.getObjectByName(Te+"_button"),Ce[st]=ke.getObjectByName(Te+"_button_pressed_value"),Oe[st]={min:ke.getObjectByName(Te+"_button_pressed_min"),max:ke.getObjectByName(Te+"_button_pressed_max")},fe[dt]=ke.getObjectByName(Ve+"_button"),Ce[dt]=ke.getObjectByName(Ve+"_button_pressed_value"),Oe[dt]={min:ke.getObjectByName(Ve+"_button_pressed_min"),max:ke.getObjectByName(Ve+"_button_pressed_max")}},onAxisMoved:function(De){D(this,this.mapping[this.data.hand].axes,De)},onThumbstickMoved:function(De){if(!(!this.buttonMeshes||!this.buttonMeshes.thumbstick)){if(this.isTouchV3orPROorPlus){this.updateThumbstickTouchV3orPROorPlus(De);return}for(var ke in De.detail)this.buttonObjects.thumbstick.rotation[this.axisMap[ke]]=this.buttonRanges.thumbstick.originalRotation[this.axisMap[ke]]-Math.PI/8*De.detail[ke]*(ke==="y"||this.data.hand==="right"?-1:1)}},axisMap:{y:"x",x:"z"},updateThumbstickTouchV3orPROorPlus:function(De){var ke=(De.detail.x+1)/2;this.buttonObjects.thumbstickXAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickXAxis.min.quaternion,this.buttonRanges.thumbstickXAxis.max.quaternion,ke);var Ce=(De.detail.y+1)/2;this.buttonObjects.thumbstickYAxis.quaternion.slerpQuaternions(this.buttonRanges.thumbstickYAxis.min.quaternion,this.buttonRanges.thumbstickYAxis.max.quaternion,Ce)},updateModel:function(De,ke){this.data.model&&this.updateButtonModel(De,ke)},updateButtonModel:function(De,ke){var Ce=this.buttonMeshes,fe,Oe;Ce&&Ce[De]&&(Oe=ke==="up"||ke==="touchend"?Ce[De].originalColor||this.data.buttonColor:ke==="touchstart"?this.data.buttonTouchColor:this.data.buttonHighlightColor,fe=Ce[De],fe.material.color.set(Oe))}});function Qe(De){De.traverse(function(ke){var Ce;ke.type==="Mesh"&&(Ce=ke.material.clone(),De.originalColor=ke.material.color,ke.material.dispose(),ke.material=Ce)})}},"./src/components/pico-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=P("./src/utils/tracked-controls.js"),K=z.checkControllerPresentAndSetup,D=z.emitIfAxesChanged,Q=z.onButtonEvent,V="pico-4",T=P("./src/constants/index.js").AFRAME_CDN_ROOT,F=T+"controllers/pico/pico4/",N={left:{axes:{touchpad:[2,3]},buttons:["trigger","squeeze","none","thumbstick","xbutton","ybutton"]},right:{axes:{touchpad:[2,3]},buttons:["trigger","squeeze","none","thumbstick","abutton","bbutton"]}};ie.exports.Component=p("pico-controls",{schema:{hand:{default:"none"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:N,init:function(){var k=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(G){Q(G.detail.id,"down",k,k.data.hand)},this.onButtonUp=function(G){Q(G.detail.id,"up",k,k.data.hand)},this.onButtonTouchEnd=function(G){Q(G.detail.id,"touchend",k,k.data.hand)},this.onButtonTouchStart=function(G){Q(G.detail.id,"touchstart",k,k.data.hand)},this.bindMethods()},update:function(){var k=this.data;this.controllerIndex=k.hand==="right"?0:k.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var k=this.el;k.addEventListener("buttonchanged",this.onButtonChanged),k.addEventListener("buttondown",this.onButtonDown),k.addEventListener("buttonup",this.onButtonUp),k.addEventListener("touchstart",this.onButtonTouchStart),k.addEventListener("touchend",this.onButtonTouchEnd),k.addEventListener("axismove",this.onAxisMoved),k.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var k=this.el;k.removeEventListener("buttonchanged",this.onButtonChanged),k.removeEventListener("buttondown",this.onButtonDown),k.removeEventListener("buttonup",this.onButtonUp),k.removeEventListener("touchstart",this.onButtonTouchStart),k.removeEventListener("touchend",this.onButtonTouchEnd),k.removeEventListener("axismove",this.onAxisMoved),k.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var k=this.data;K(this,V,{index:this.controllerIndex,hand:k.hand})},injectTrackedControls:function(){var k=this.el,G=this.data;k.setAttribute("tracked-controls",{idPrefix:V,hand:G.hand,controller:this.controllerIndex,orientationOffset:G.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",F+this.data.hand+".glb")},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(k){var G=this.mapping[this.data.hand].buttons[k.detail.id],Z;G&&(G==="trigger"&&(Z=k.detail.state.value,console.log("analog value of trigger press: "+Z)),this.el.emit(G+"changed",k.detail.state))},onModelLoaded:function(k){k.target!==this.el||!this.data.model||this.el.emit("controllermodelready",{name:"pico-controls",model:this.data.model,rayOrigin:new S.Vector3(0,0,0)})},onAxisMoved:function(k){D(this,this.mapping.axes,k)}})},"./src/components/position.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("position",{schema:{type:"vec3"},update:function(){var S=this.el.object3D,z=this.data;S.position.set(z.x,z.y,z.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},"./src/components/raycaster.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=P("./src/utils/index.js"),K=z.debug("components:raycaster:warn"),D=/^[\w\s-.,[\]#]*$/,Q={childList:!0,attributes:!0,subtree:!0},V={INTERSECT:"raycaster-intersected",INTERSECTION:"raycaster-intersection",INTERSECT_CLEAR:"raycaster-intersected-cleared",INTERSECTION_CLEAR:"raycaster-intersection-cleared",INTERSECTION_CLOSEST_ENTITY_CHANGED:"raycaster-closest-entity-changed"};ie.exports.Component=p("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},showLine:{default:!1},lineColor:{default:"white"},lineOpacity:{default:1},useWorldCoordinates:{default:!1}},multiple:!0,init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new S.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new S.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.updateLine=this.updateLine.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new S.Vector3,this.otherLineEndVec3=new S.Vector3,this.lineData={end:this.lineEndVec3},this.getIntersection=this.getIntersection.bind(this),this.intersectedDetail={el:this.el,getIntersection:this.getIntersection},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(F){var N=this.data,k=this.el,G=this.raycaster;G.far=N.far,G.near=N.near,N.showLine&&(N.far!==F.far||N.origin!==F.origin||N.direction!==F.direction||!F.showLine)&&(this.unitLineEndVec3.copy(N.direction).normalize(),this.drawLine()),!N.showLine&&F.showLine&&k.removeAttribute("line"),N.objects!==F.objects&&!D.test(N.objects)&&K('[raycaster] Selector "'+N.objects+'" may not update automatically with DOM changes.'),N.objects||K('[raycaster] For performance, please define raycaster.objects when using raycaster or cursor components to whitelist which entities to intersect with. e.g., raycaster="objects: [data-raycastable]".'),N.autoRefresh!==F.autoRefresh&&k.isPlaying&&(N.autoRefresh?this.addEventListeners():this.removeEventListeners()),F.enabled&&!N.enabled&&this.clearAllIntersections(),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line"),this.clearAllIntersections()},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,Q),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var F=this.data,N;N=F.objects?this.el.sceneEl.querySelectorAll(F.objects):this.el.sceneEl.querySelectorAll("*"),this.objects=this.flattenObject3DMaps(N),this.dirty=!1},tock:function(F){var N=this.data,k=this.prevCheckTime;N.enabled&&(k&&F-k<N.interval||(this.prevCheckTime=F,this.checkIntersections()))},checkIntersections:function(){var F=this.clearedIntersectedEls,N=this.el,k=this.data,G,Z=this.intersectedEls,ne,te=this.intersections,de=this.newIntersectedEls,oe=this.newIntersections,ye=this.prevIntersectedEls,Me=this.rawIntersections;for(this.dirty&&this.refreshObjects(),T(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),Me.length=0,this.raycaster.intersectObjects(this.objects,!0,Me),te.length=0,Z.length=0,G=0;G<Me.length;G++)ne=Me[G],!(k.showLine&&ne.object===N.getObject3D("line"))&&ne.object.el&&(te.push(ne),Z.push(ne.object.el));for(oe.length=0,de.length=0,G=0;G<te.length;G++)ye.indexOf(te[G].object.el)===-1&&(oe.push(te[G]),de.push(te[G].object.el));for(F.length=0,G=0;G<ye.length;G++)Z.indexOf(ye[G])===-1&&(ye[G].emit(V.INTERSECT_CLEAR,this.intersectedClearedDetail),F.push(ye[G]));for(F.length&&N.emit(V.INTERSECTION_CLEAR,this.intersectionClearedDetail),G=0;G<de.length;G++)de[G].emit(V.INTERSECT,this.intersectedDetail);oe.length&&(this.intersectionDetail.els=de,this.intersectionDetail.intersections=oe,N.emit(V.INTERSECTION,this.intersectionDetail)),(ye.length===0&&te.length>0||ye.length>0&&te.length===0||ye.length&&te.length&&ye[0]!==te[0].object.el)&&(this.intersectionDetail.els=this.intersectedEls,this.intersectionDetail.intersections=te,N.emit(V.INTERSECTION_CLOSEST_ENTITY_CHANGED,this.intersectionDetail)),k.showLine&&setTimeout(this.updateLine)},updateLine:function(){var F=this.el,N=this.intersections,k;N.length&&(N[0].object.el===F&&N[1]?k=N[1].distance:k=N[0].distance),this.drawLine(k)},getIntersection:function(F){var N,k;for(N=0;N<this.intersections.length;N++)if(k=this.intersections[N],k.object.el===F)return k;return null},updateOriginDirection:function(){var F=new S.Vector3,N=new S.Vector3;return function(){var G=this.el,Z=this.data;if(Z.useWorldCoordinates){this.raycaster.set(Z.origin,Z.direction);return}G.object3D.updateMatrixWorld(),N.setFromMatrixPosition(G.object3D.matrixWorld),(Z.origin.x!==0||Z.origin.y!==0||Z.origin.z!==0)&&(N=G.object3D.localToWorld(N.copy(Z.origin))),F.copy(Z.direction).transformDirection(G.object3D.matrixWorld).normalize(),this.raycaster.set(N,F)}}(),drawLine:function(F){var N=this.data,k=this.el,G;G=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,F===void 0&&(F=N.far===1/0?1e3:N.far),this.lineData.start=N.origin,this.lineData.end=G.copy(this.unitLineEndVec3).multiplyScalar(F).add(N.origin),this.lineData.color=N.lineColor,this.lineData.opacity=N.lineOpacity,k.setAttribute("line",this.lineData)},flattenObject3DMaps:function(F){var N,k,G=this.objects,Z=this.el.sceneEl.object3D;function ne(de){return de.parent?ne(de.parent):de===Z}for(G.length=0,k=0;k<F.length;k++){var te=F[k];if(te.isEntity&&te.object3D&&ne(te.object3D))for(N in te.object3DMap)G.push(te.getObject3D(N))}return G},clearAllIntersections:function(){var F;for(F=0;F<this.intersectedEls.length;F++)this.intersectedEls[F].emit(V.INTERSECT_CLEAR,this.intersectedClearedDetail);T(this.clearedIntersectedEls,this.intersectedEls),this.intersectedEls.length=0,this.intersections.length=0,this.el.emit(V.INTERSECTION_CLEAR,this.intersectionClearedDetail)}});function T(F,N){var k;for(F.length=N.length,k=0;k<N.length;k++)F[k]=N[k]}},"./src/components/rotation.js":(ie,we,P)=>{var p=P("./src/lib/three.js").MathUtils.degToRad,S=P("./src/core/component.js").registerComponent;ie.exports.Component=S("rotation",{schema:{type:"vec3"},update:function(){var z=this.data,K=this.el.object3D;K.rotation.set(p(z.x),p(z.y),p(z.z),"YXZ")},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},"./src/components/scale.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var S=this.data,z=this.el.object3D;z.scale.set(S.x,S.y,S.z)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},"./src/components/scene/ar-hit-test.js":(ie,we,P)=>{var p="data:image/webp;base64,UklGRkQHAABXRUJQVlA4WAoAAAAQAAAA/wEA/wEAQUxQSL0DAAARDzD/ERGCjrY9sYYFfgo6aa1kJ7K0w9Lo3AadLSVeFxevQwj5kuM8RfR/Atw/C0+ozB/oUBrloFZs6ElSW88j1KA4yExNWQaqRZquIDF0JYmlq0hAuUDTFu66tng3teW7pa3cQf1V1edvur54M/Slm6Wv3Gx9zw0MXlQLntcsBN6wkHjTQuYtC4W3LTw8mGRVG57TbAROtxHfZNhInGkjc5aNwtk2Hg6Mvki14k+NkZzCwQgCxalcAv3kddRTPI1DcUrXId1FLf1uHpzaQz4tquhZVLlKesbVpqKeTj0n0F5PpXDlFN9UqmhalL/ImuZFo6KmToWLoKlddMprqlS8cKovBvHo2kTiFV2LN4msaxKZl3QNiair8xYRdDWivIvXVXmbcMqJ51UebZuFXxZt6xd4laxtciqRtA3Cv0nU1t+kEUFbI8JvCa+tvkm3FDlO/W+OR99+kWEp/YYo+tYfTVnf/K8cE/F///3vv//993eeL+a+uvjawLcX3xjYvJotBFY3kVjTRGFtE+BU2AiMbiQyhpHMWEYeBozAH5qNBYRDB5KBCaTDBKKBAZTDBoKBDjwHAN5ABeCJBsAZcAAC0YHHxAYSMYBiYgGZWEA2MYFCbCCZGAAIANFEB+AnYgMQTDQAYSJ2AN5EBZAm4gDgTDgAeSIu4DGygTIRN1CMLOCZiACykQlg4jsAycgA8AO+BxCNdJyDkcbwRirDGXGnx8w+FDPrkM3MQ9JQZMYhiiwV/RDMtIM3U1/DmXHUo+IR2kSR2ToWkQ1NIn2qf2J8LCqJKiDUiSADHY3whirhdHgZ94HKaR97PhE+twEUJUFoAcgyTct8hfSxSkShASDKdMJ/ritKHwgyQ0sD4D/miCxU5SbhOOUDTnZpccCjYP/i0bZ/8bAgtVGEoGapWIQXyzKVKLwgNJFk2rtMIgoNRJlOZF7SNSSyUEeQmbxBFKEmtYjEe8S8zOZ1AkJVCmS88FJOtF40Ksg4oUaFiygk3C8qlTVNyl8UTevCUdAE2t14PfVqU1FPp57TopKeQZWromddTQp6QOfTOEQt/ZDuipZ11w/wOiqO8dRORcc6BQEkDQMClaHcn5wV9yLbxsNZNgpn2sicYSNxuo34Js1G4FQbnuNsOPa28PCWhcKbFjJvWEi8ZiHwqgXPcxbc5db33Cx95WboSzddX7yp+vyN0+eul7ZyN7Xlu64t3jVt4c5pc4JLV5EYupJE0xUknC4nOjVlmaYpyLit53HCQ0+ScnqceNcS5dzUkd0/CwMAVlA4IGADAAAQXwCdASoAAgACP8ne6Wy/tjCpqJ/IA/A5CWlu4XYBG/Pz8AfwD8APz//f3v8E1fuHZnxKYACtfuHZnxKYACrYTb5mOslhxu843ecbvON3nG7zjd3a0VCn7G1MABVxwH/Xd25gAK1+4dmfEpe2+PHhQaj75++riG6FuYACtfuHZnxKYACRrK3q9xO8Ss3uWKnMhs/rDF1hi6wxdYYusMXWGI5QRcCFDZog5OgqNlse1NDuz/UoFa/cOzPiUwAEsAOK4/nu5eZHK2tlXxJfNYlMABWv3Dsz4bvNJ5YA/LtxJ38SmAArX7h2Z8Sk5vdZUYv7mZPiUwAFa/cOzPh21s5OgZxf1mfEpemRyFr/rM+JS9noA/LtxJ38SmAAlUJIotzAASn6TjdhK+D3Dsz4dyvB7h2Z8O2tnJ0DOL+sz4lL2nKLT4lL/+iSLOocxq639w7M34MNZdm55uJ8v8ra2cpVZnxKTq2F3PN/cNksAfl24k7+JTAASqrD37h2Z7b1W+VtbOUqsz4lJ1bC7nm/uGyWAPy7cSd/EpgAJVVh79w7M9t6rfK2tnKVWZ8Sk6thdzzf3DZLAH5duJO/iUwAEqqw9+4dme29VvlbWzlKrM+JSdWwu55v7hslgD8u3EnfxKYACVVYe/cOzPbeq3ytrZylVme0kYJ8557FLerqFrzIbPrrf3DZLAH5duJO/iUvaVMS9BoaF4p7pSDFTP1XMyfElelrM0DOL+sz4eBJ13nV1OppBGPuKb4YzXQgq9uH19uS/0+JS9t9fr6ZUlQBelDG6GMgq97otb5QMPJwtKyBTbFp8Sl7b6/X0ykkawEOsgdiE6Fi0vb/Eve6xkwsmug0Z4nGNHQO8839bpTsjpz7SWIJxKagvd1QWMa6FYT1KEw3j4XDT6vJ9Xk+nyfT5Pq8n1eEmk5dinMM/9Fcfz4Z3Dsz3KD2dw7LxBRxKrqUUGQPH/7zxr1KIfNpLEJ0MZB2ITM/0Z2EFoh12NlXnEcpYcbvON3nG7zjd5xu84vfcNIAAP7+y8ceyzbVxkakPYY4lcr72fqOnDwipv+yxC71wAADBrjKnAAAAAAAAAAAAAAw7oNGHttqWONcoFN/2WIDc2pa6WVFtFYROlsaMaTXdcOjXHz93+YxAglKa4AAAAA=",S=P("./src/core/component.js").registerComponent,z=P("./src/lib/three.js"),K=21,D=function(){var F=new z.Quaternion,N=new z.Vector3;function k(G,Z,ne){Z.position.copy(G.transform.position),Z.quaternion.copy(G.transform.orientation),N.copy(ne),F.copy(G.transform.orientation),N.applyQuaternion(F),Z.position.sub(N)}return k}();D.tempFakePose={transform:{orientation:new z.Quaternion,position:new z.Vector3}};function Q(F,N){this.renderer=F,this.xrHitTestSource=null,F.xr.addEventListener("sessionend",(function(){this.xrHitTestSource=null}).bind(this)),F.xr.addEventListener("sessionstart",(function(){this.sessionStart(N)}).bind(this)),this.renderer.xr.isPresenting&&this.sessionStart(N)}Q.prototype.previousFrameAnchors=new Set,Q.prototype.anchorToObject3D=new Map;function V(F){console.warn(F.message),console.warn('Cannot requestHitTestSource Are you missing: webxr="optionalFeatures: hit-test;" from <a-scene>?')}Q.prototype.sessionStart=function(N){if(this.session=this.renderer.xr.getSession(),!("requestHitTestSource"in this.session)){V({message:"No requestHitTestSource on the session."});return}N.space?this.session.requestHitTestSource(N).then((function(k){this.xrHitTestSource=k}).bind(this)).catch(V):N.profile&&this.session.requestHitTestSourceForTransientInput(N).then((function(k){this.xrHitTestSource=k,this.transient=!0}).bind(this)).catch(V)},Q.prototype.anchorFromLastHitTestResult=function(F,N){var k=this.lastHitTest;if(k){var G={object3D:F,offset:N};Array.from(this.anchorToObject3D.entries()).forEach((function(Z){var ne=Z[1].object3D,te=Z[0];ne===F&&(this.anchorToObject3D.delete(te),te.delete())}).bind(this)),k.createAnchor&&k.createAnchor().then((function(Z){this.anchorToObject3D.set(Z,G)}).bind(this)).catch(function(Z){console.warn(Z.message),console.warn('Cannot create anchor, are you missing: webxr="optionalFeatures: anchors;" from <a-scene>?')})}},Q.prototype.doHit=function(N){if(this.renderer.xr.isPresenting){var k=this.renderer.xr.getReferenceSpace(),G=N.getViewerPose(k),Z,ne;if(this.xrHitTestSource&&G)return this.transient?(Z=N.getHitTestResultsForTransientInput(this.xrHitTestSource),Z.length>0?(ne=Z[0].results,ne.length>0?(this.lastHitTest=ne[0],ne[0].getPose(k)):!1):!1):(Z=N.getHitTestResults(this.xrHitTestSource),Z.length>0?(this.lastHitTest=Z[0],Z[0].getPose(k)):!1)}},Q.updateAnchorPoses=function(F,N){var k=F.trackedAnchors||Q.prototype.previousFrameAnchors;Q.prototype.previousFrameAnchors.forEach(function(G){k.has(G)||Q.prototype.anchorToObject3D.delete(G)}),k.forEach(function(G){var Z,ne,te,de;try{Z=F.getPose(G.anchorSpace,N)}catch{}if(Z){if(ne=Q.prototype.anchorToObject3D.get(G),!ne)return;te=ne.offset,de=ne.object3D,D(Z,de,te)}})};var T;ie.exports.Component=S("ar-hit-test",{schema:{target:{type:"selector"},enabled:{default:!0},src:{default:p,type:"map"},type:{default:"footprint",oneOf:["footprint","map"]},footprintDepth:{default:.1},mapSize:{type:"vec2",default:{x:.5,y:.5}}},sceneOnly:!0,init:function(){this.hitTest=null,this.imageDataArray=new Uint8ClampedArray(1048576),this.imageData=new ImageData(this.imageDataArray,512,512),this.textureCache=new Map,this.orthoCam=new z.OrthographicCamera,this.orthoCam.layers.set(K),this.textureTarget=new z.WebGLRenderTarget(512,512,{}),this.basicMaterial=new z.MeshBasicMaterial({color:0,side:z.DoubleSide}),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.canvas.width=512,this.canvas.height=512,this.canvasTexture=new z.CanvasTexture(this.canvas,{alpha:!0}),this.canvasTexture.flipY=!1;var F=this.el.getAttribute("webxr"),N=F.optionalFeatures;(!N.includes("hit-test")||!N.includes("anchors"))&&(N.push("hit-test"),N.push("anchors"),this.el.setAttribute("webxr",F)),this.el.sceneEl.renderer.xr.addEventListener("sessionend",(function(){this.hitTest=null}).bind(this)),this.el.sceneEl.renderer.xr.addEventListener("sessionstart",(function(){if(this.el.is("ar-mode")){var k=this.el.sceneEl.renderer,G=this.session=k.xr.getSession();this.hasPosedOnce=!1,this.bboxMesh.visible=!1,T||(T=new Map),G.requestReferenceSpace("viewer").then((function(te){this.hitTest=new Q(k,{space:te}),T.set(te,this.hitTest),this.el.emit("ar-hit-test-start")}).bind(this));var Z="generic-touchscreen",ne=new Q(k,{profile:Z});G.addEventListener("selectstart",(function(te){if(this.data.enabled===!0){var de=te.inputSource;this.bboxMesh.visible=!0,this.hasPosedOnce===!0&&(this.el.emit("ar-hit-test-select-start",{inputSource:de,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion}),de.profiles[0]===Z?this.hitTest=ne:(this.hitTest=T.get(de)||new Q(k,{space:de.targetRaySpace}),T.set(de,this.hitTest)))}}).bind(this)),G.addEventListener("selectend",(function(te){if(!this.hitTest||this.data.enabled!==!0){this.hitTest=null;return}var de=te.inputSource,oe;this.hasPosedOnce===!0&&(this.bboxMesh.visible=!1,this.data.target&&(oe=this.data.target.object3D,oe&&(D.tempFakePose.transform.position.copy(this.bboxMesh.position),D.tempFakePose.transform.orientation.copy(this.bboxMesh.quaternion),D(D.tempFakePose,oe,this.bboxOffset),oe.visible=!0,this.hitTest.anchorFromLastHitTestResult(oe,this.bboxOffset))),this.el.emit("ar-hit-test-select",{inputSource:de,position:this.bboxMesh.position,orientation:this.bboxMesh.quaternion})),this.hitTest=null}).bind(this))}}).bind(this)),this.bboxOffset=new z.Vector3,this.update=this.update.bind(this),this.makeBBox()},update:function(){this.data.enabled===!1&&(this.hitTest=null,this.bboxMesh.visible=!1),this.data.target&&(this.data.target.object3D?(this.data.target.addEventListener("model-loaded",this.update),this.data.target.object3D.layers.enable(K),this.data.target.object3D.traverse(function(F){F.layers.enable(K)})):this.data.target.addEventListener("loaded",this.update,{once:!0})),this.bboxNeedsUpdate=!0},makeBBox:function(){var F=new z.PlaneGeometry(1,1),N=new z.MeshBasicMaterial({transparent:!0,color:16777215});F.rotateX(-Math.PI/2),F.rotateY(-Math.PI/2),this.bbox=new z.Box3,this.bboxMesh=new z.Mesh(F,N),this.el.setObject3D("ar-hit-test",this.bboxMesh),this.bboxMesh.visible=!1},updateFootprint:function(){var F,N=this.el.sceneEl.renderer,k,G,Z=N.xr.enabled;this.bboxMesh.material.map=this.canvasTexture,this.bboxMesh.material.needsUpdate=!0,this.orthoCam.rotation.set(-Math.PI/2,0,-Math.PI/2),this.orthoCam.position.copy(this.bboxMesh.position),this.orthoCam.position.y-=this.bboxMesh.scale.y/2,this.orthoCam.near=.1,this.orthoCam.far=this.orthoCam.near+this.data.footprintDepth*this.bboxMesh.scale.y,this.orthoCam.position.y+=this.orthoCam.far,this.orthoCam.right=this.bboxMesh.scale.z/2,this.orthoCam.left=-this.bboxMesh.scale.z/2,this.orthoCam.top=this.bboxMesh.scale.x/2,this.orthoCam.bottom=-this.bboxMesh.scale.x/2,this.orthoCam.updateProjectionMatrix(),k=N.getRenderTarget(),N.setRenderTarget(this.textureTarget),N.xr.enabled=!1,G=this.el.object3D.background,this.el.object3D.overrideMaterial=this.basicMaterial,this.el.object3D.background=null,N.render(this.el.object3D,this.orthoCam),this.el.object3D.background=G,this.el.object3D.overrideMaterial=null,N.xr.enabled=Z,N.setRenderTarget(k),N.readRenderTargetPixels(this.textureTarget,0,0,512,512,this.imageDataArray),this.context.putImageData(this.imageData,0,0),this.context.shadowColor="white",this.context.shadowBlur=10,this.context.drawImage(this.canvas,0,0),F=this.context.getImageData(0,0,512,512);for(var ne=0;ne<262144;ne++)F.data[ne*4+3]!==0&&F.data[ne*4+3]!==255&&(F.data[ne*4+3]=128);this.context.putImageData(F,0,0),this.canvasTexture.needsUpdate=!0},tick:function(){var F,N=this.el.sceneEl.frame,k=this.el.sceneEl.renderer;if(N&&Q.updateAnchorPoses(N,k.xr.getReferenceSpace()),this.bboxNeedsUpdate){if(this.bboxNeedsUpdate=!1,!this.data.target||this.data.type==="map"){var G;this.textureCache.has(this.data.src)?G=this.textureCache.get(this.data.src):(G=new z.TextureLoader().load(this.data.src),this.textureCache.set(this.data.src,G)),this.bboxMesh.material.map=G,this.bboxMesh.material.needsUpdate=!0}this.data.target&&this.data.target.object3D?(this.bbox.setFromObject(this.data.target.object3D),this.bbox.getCenter(this.bboxMesh.position),this.bbox.getSize(this.bboxMesh.scale),this.data.type==="footprint"&&(this.bboxMesh.scale.x*=1.04,this.bboxMesh.scale.z*=1.04,this.updateFootprint()),this.bboxMesh.position.y-=this.bboxMesh.scale.y/2,this.bboxOffset.copy(this.bboxMesh.position),this.bboxOffset.sub(this.data.target.object3D.position)):this.bboxMesh.scale.set(this.data.mapSize.x,1,this.data.mapSize.y)}this.hitTest&&(F=this.hitTest.doHit(N),F&&(this.hasPosedOnce!==!0&&(this.hasPosedOnce=!0,this.el.emit("ar-hit-test-achieved")),this.bboxMesh.visible=!0,this.bboxMesh.position.copy(F.transform.position),this.bboxMesh.quaternion.copy(F.transform.orientation)))}})},"./src/components/scene/background.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},sceneOnly:!0,update:function(){var S=this.data,z=this.el.object3D;S.transparent?z.background=null:z.background=new THREE.Color(S.color)},remove:function(){var S=this.el.object3D;S.background=null}})},"./src/components/scene/debug.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("debug",{schema:{default:!0},sceneOnly:!0})},"./src/components/scene/device-orientation-permission-ui.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/constants/index.js"),z="a-modal",K="a-dialog",D="a-dialog-text",Q="a-dialog-text-container",V="a-dialog-buttons-container",T="a-dialog-button",F="a-dialog-allow-button",N="a-dialog-deny-button",k="a-dialog-ok-button";ie.exports.Component=p("device-orientation-permission-ui",{schema:{enabled:{default:!0},deviceMotionMessage:{default:"This immersive website requires access to your device motion sensors."},httpsMessage:{default:"Access this site over HTTPS to enter VR mode and grant access to the device sensors."},denyButtonText:{default:"Deny"},allowButtonText:{default:"Allow"},cancelButtonText:{default:"Cancel"}},sceneOnly:!0,init:function(){var te=this;if(this.data.enabled){if(window.isSecureContext||this.showHTTPAlert(),typeof DeviceOrientationEvent>"u"||!DeviceOrientationEvent.requestPermission){this.permissionGranted=!0;return}this.onDeviceMotionDialogAllowClicked=this.onDeviceMotionDialogAllowClicked.bind(this),this.onDeviceMotionDialogDenyClicked=this.onDeviceMotionDialogDenyClicked.bind(this),DeviceOrientationEvent.requestPermission().then(function(){te.el.emit("deviceorientationpermissiongranted"),te.permissionGranted=!0}).catch(function(){te.devicePermissionDialogEl=G(te.data.denyButtonText,te.data.allowButtonText,te.data.deviceMotionMessage,te.onDeviceMotionDialogAllowClicked,te.onDeviceMotionDialogDenyClicked),te.el.appendChild(te.devicePermissionDialogEl)})}},remove:function(){this.devicePermissionDialogEl&&this.el.removeChild(this.devicePermissionDialogEl)},onDeviceMotionDialogDenyClicked:function(){this.remove()},showHTTPAlert:function(){var te=this,de=Z(te.data.cancelButtonText,te.data.httpsMessage,function(){te.el.removeChild(de)});this.el.appendChild(de)},onDeviceMotionDialogAllowClicked:function(){var te=this;this.el.emit("deviceorientationpermissionrequested"),DeviceOrientationEvent.requestPermission().then(function(de){de==="granted"?(te.el.emit("deviceorientationpermissiongranted"),te.permissionGranted=!0):te.el.emit("deviceorientationpermissionrejected"),te.remove()}).catch(console.error)}});function G(te,de,oe,ye,Me){var Ne,Pe,Qe;return Ne=document.createElement("div"),Ne.classList.add(V),Pe=document.createElement("button"),Pe.classList.add(T,N),Pe.setAttribute(S.AFRAME_INJECTED,""),Pe.innerHTML=te,Ne.appendChild(Pe),Qe=document.createElement("button"),Qe.classList.add(T,F),Qe.setAttribute(S.AFRAME_INJECTED,""),Qe.innerHTML=de,Ne.appendChild(Qe),Qe.addEventListener("click",function(De){De.stopPropagation(),ye()}),Pe.addEventListener("click",function(De){De.stopPropagation(),Me()}),ne(oe,Ne)}function Z(te,de,oe){var ye,Me;return ye=document.createElement("div"),ye.classList.add(V),Me=document.createElement("button"),Me.classList.add(T,k),Me.setAttribute(S.AFRAME_INJECTED,""),Me.innerHTML=te,ye.appendChild(Me),Me.addEventListener("click",function(Ne){Ne.stopPropagation(),oe()}),ne(de,ye)}function ne(te,de){var oe,ye,Me,Ne;return oe=document.createElement("div"),oe.classList.add(z),oe.setAttribute(S.AFRAME_INJECTED,""),ye=document.createElement("div"),ye.className=K,ye.setAttribute(S.AFRAME_INJECTED,""),oe.appendChild(ye),Me=document.createElement("div"),Me.classList.add(Q),ye.appendChild(Me),Ne=document.createElement("div"),Ne.classList.add(D),Ne.innerHTML=te,Me.appendChild(Ne),ye.appendChild(de),oe}},"./src/components/scene/embedded.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("embedded",{dependencies:["xr-mode-ui"],schema:{default:!0},sceneOnly:!0,update:function(){var S=this.el,z=S.querySelector(".a-enter-vr");this.data===!0?(z&&z.classList.add("embedded"),S.removeFullScreenStyles()):(z&&z.classList.remove("embedded"),S.addFullScreenStyles())}})},"./src/components/scene/fog.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=P("./src/utils/debug.js");z("components:fog:warn"),ie.exports.Component=p("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},sceneOnly:!0,update:function(){var D=this.data,Q=this.el,V=this.el.object3D.fog;if(!V||D.type!==V.name){Q.object3D.fog=K(D);return}Object.keys(this.schema).forEach(function(T){var F=D[T];T==="color"&&(F=new S.Color(F)),V[T]=F})},remove:function(){var D=this.el,Q=this.el.object3D.fog;Q&&(D.object3D.fog=null)}});function K(D){var Q;return D.type==="exponential"?Q=new S.FogExp2(D.color,D.density):Q=new S.Fog(D.color,D.near,D.far),Q.name=D.type,Q}},"./src/components/scene/inspector.js":(ie,we,P)=>{var p=P("./src/constants/index.js").AFRAME_INJECTED,S=P("./package.json"),z=P("./src/core/component.js").registerComponent,K=P("./src/utils/index.js");function D(N){var k=N.split(".");return k[2]="x",k.join(".")}var Q="https://unpkg.com/aframe-inspector@"+D(S.version)+"/dist/aframe-inspector.min.js",V=Q,T="Loading Inspector",F="Error loading Inspector";ie.exports.Component=z("inspector",{schema:{url:{default:V}},sceneOnly:!0,init:function(){this.firstPlay=!0,this.onKeydown=this.onKeydown.bind(this),this.onMessage=this.onMessage.bind(this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},play:function(){var N;this.firstPlay&&(N=K.getUrlParameter("inspector"),N!=="false"&&N&&(this.openInspector(),this.firstPlay=!1))},initOverlay:function(){var N='<span class="dots"><span>.</span><span>.</span><span>.</span></span>';this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML=T+N},remove:function(){this.removeEventListeners()},onKeydown:function(N){var k=N.keyCode===73&&(N.ctrlKey&&N.altKey||N.getModifierState("AltGraph"));k&&this.openInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(N){N.data==="INJECT_AFRAME_INSPECTOR"&&this.openInspector()},openInspector:function(N){var k=this,G;if(AFRAME.INSPECTOR||AFRAME.inspectorInjected){AFRAME.INSPECTOR.open(N);return}this.showLoader(),G=document.createElement("script"),G.src=this.data.url,G.setAttribute("data-name","aframe-inspector"),G.setAttribute(p,""),G.onload=function(){AFRAME.INSPECTOR.open(N),k.hideLoader(),k.removeEventListeners()},G.onerror=function(){k.loadingMessageEl.innerHTML=F},document.head.appendChild(G),AFRAME.inspectorInjected=!0},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})},"./src/components/scene/keyboard-shortcuts.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/index.js").shouldCaptureKeyEvent;ie.exports.Component=p("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},sceneOnly:!0,init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(z){var K=this.data;this.enterVREnabled=K.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(z){var K=this.el;S(z)&&(this.enterVREnabled&&z.keyCode===70&&K.enterVR(),this.enterVREnabled&&z.keyCode===27&&K.exitVR())}})},"./src/components/scene/pool.js":(ie,we,P)=>{var p=P("./src/utils/debug.js"),S=P("./src/core/component.js").registerComponent,z=p("components:pool:warn");ie.exports.Component=S("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},sceneOnly:!0,multiple:!0,initPool:function(){var K;for(this.availableEls=[],this.usedEls=[],this.data.mixin||z("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||z("Container "+this.data.container+" not found.")),this.container=this.container||this.el,K=0;K<this.data.size;++K)this.createEntity()},update:function(K){var D=this.data;(K.mixin!==D.mixin||K.size!==D.size)&&this.initPool()},createEntity:function(){var K;K=document.createElement("a-entity"),K.play=this.wrapPlay(K.play),K.setAttribute("mixin",this.data.mixin),K.object3D.visible=!1,K.pause(),this.container.appendChild(K),this.availableEls.push(K);var D=this.usedEls;K.addEventListener("loaded",function(){D.indexOf(K)===-1&&(K.object3DParent=K.object3D.parent,K.object3D.parent.remove(K.object3D))})},wrapPlay:function(K){var D=this.usedEls;return function(){D.indexOf(this)!==-1&&K.call(this)}},requestEntity:function(){var K;if(this.availableEls.length===0){if(this.data.dynamic===!1){z("Requested entity from empty pool: "+this.attrName);return}else z("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.attrName);this.createEntity()}return K=this.availableEls.shift(),this.usedEls.push(K),K.object3DParent&&(K.object3DParent.add(K.object3D),this.updateRaycasters()),K.object3D.visible=!0,K},returnEntity:function(K){var D=this.usedEls.indexOf(K);if(D===-1){z("The returned entity was not previously pooled from "+this.attrName);return}return this.usedEls.splice(D,1),this.availableEls.push(K),K.object3DParent=K.object3D.parent,K.object3D.parent.remove(K.object3D),this.updateRaycasters(),K.object3D.visible=!1,K.pause(),K},updateRaycasters:function(){var K=document.querySelectorAll("[raycaster]");K.forEach(function(D){D.components.raycaster.setDirty()})}})},"./src/components/scene/real-world-meshing.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js");ie.exports.Component=p("real-world-meshing",{schema:{filterLabels:{type:"array"},meshesEnabled:{default:!0},meshMixin:{default:!0},planesEnabled:{default:!0},planeMixin:{default:""}},sceneOnly:!0,init:function(){var z=this.el.getAttribute("webxr"),K=z.requiredFeatures;K.indexOf("mesh-detection")===-1&&(K.push("mesh-detection"),this.el.setAttribute("webxr",z)),K.indexOf("plane-detection")===-1&&(K.push("plane-detection"),this.el.setAttribute("webxr",z)),this.meshEntities=[],this.initWorldMeshEntity=this.initWorldMeshEntity.bind(this)},tick:function(){this.el.is("ar-mode")&&(this.detectMeshes(),this.updateMeshes())},detectMeshes:function(){var z=this.data,K,D,Q=this.el;Q.renderer.xr;var V,T=this.meshEntities,F=!1,N=[],k=this.data.filterLabels;V=Q.frame,K=V.detectedMeshes,D=V.detectedPlanes;for(var G=0;G<T.length;G++)T[G].present=!1;if(z.meshesEnabled){for(var Z of K.values())if(!(k.length&&k.indexOf(Z.semanticLabel)===-1)){for(G=0;G<T.length;G++)if(Z===T[G].mesh){F=!0,T[G].present=!0,T[G].lastChangedTime<Z.lastChangedTime&&this.updateMeshGeometry(T[G].el,Z),T[G].lastChangedTime=Z.lastChangedTime;break}F||N.push(Z),F=!1}}if(z.planesEnabled){for(Z of D.values())if(!(k.length&&k.indexOf(Z.semanticLabel)===-1)){for(G=0;G<T.length;G++)if(Z===T[G].mesh){F=!0,T[G].present=!0,T[G].lastChangedTime<Z.lastChangedTime&&this.updateMeshGeometry(T[G].el,Z),T[G].lastChangedTime=Z.lastChangedTime;break}F||N.push(Z),F=!1}}this.deleteMeshes(),this.createNewMeshes(N)},updateMeshes:function(){var z=new S.Matrix4;return function(){for(var K,D=this.el,Q,V=D.frame,T=this.meshEntities,F=D.renderer.xr.getReferenceSpace(),N,k=0;k<T.length;k++)N=T[k].mesh.meshSpace||T[k].mesh.planeSpace,K=V.getPose(N,F),Q=T[k].el,Q.hasLoaded&&(z.fromArray(K.transform.matrix),z.decompose(Q.object3D.position,Q.object3D.quaternion,Q.object3D.scale))}}(),deleteMeshes:function(){for(var z=this.meshEntities,K=[],D=0;D<z.length;D++)z[D].present?K.push(z[D]):this.el.removeChild(z[D]);this.meshEntities=K},createNewMeshes:function(z){for(var K,D=0;D<z.length;D++)K=document.createElement("a-entity"),this.meshEntities.push({mesh:z[D],el:K}),K.addEventListener("loaded",this.initWorldMeshEntity),this.el.appendChild(K)},initMeshGeometry:function(z){var K,D,Q;if(z instanceof XRPlane){D=new S.Shape,Q=z.polygon;for(var V=0;V<Q.length;++V)V===0?D.moveTo(Q[V].x,Q[V].z):D.lineTo(Q[V].x,Q[V].z);return K=new S.ShapeGeometry(D),K.rotateX(Math.PI/2),K}return K=new S.BufferGeometry,K.setAttribute("position",new S.BufferAttribute(z.vertices,3)),K.setIndex(new S.BufferAttribute(z.indices,1)),K},initWorldMeshEntity:function(z){for(var K=z.target,D,Q,V,T=this.meshEntities,F=0;F<T.length;F++)if(T[F].el===K){V=T[F];break}D=this.initMeshGeometry(V.mesh),Q=new S.Mesh(D,new S.MeshBasicMaterial({color:Math.random()*16777215,side:S.DoubleSide})),K.setObject3D("mesh",Q),V.mesh instanceof XRPlane&&this.data.planeMixin?K.setAttribute("mixin",this.data.planeMixin):this.data.meshMixin&&K.setAttribute("mixin",this.data.meshMixin),K.setAttribute("data-world-mesh",V.mesh.semanticLabel)},updateMeshGeometry:function(z,K){var D=z.getObject3D("mesh");D.geometry.dispose(),D.geometry=this.initMeshGeometry(K)}})},"./src/components/scene/reflection.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;function S(z,K,D,Q){var V=Math.max(z.primaryLightIntensity.x,Math.max(z.primaryLightIntensity.y,z.primaryLightIntensity.z));K.sh.fromArray(z.sphericalHarmonicsCoefficients),K.intensity=1,D&&(D.color.setRGB(z.primaryLightIntensity.x/V,z.primaryLightIntensity.y/V,z.primaryLightIntensity.z/V),D.intensity=V,Q.copy(z.primaryLightDirection))}ie.exports.Component=p("reflection",{schema:{directionalLight:{type:"selector"}},sceneOnly:!0,init:function(){var z=this;this.cubeRenderTarget=new THREE.WebGLCubeRenderTarget(16),this.cubeCamera=new THREE.CubeCamera(.1,1e3,this.cubeRenderTarget),this.lightingEstimationTexture=new THREE.WebGLCubeRenderTarget(16).texture,this.needsVREnvironmentUpdate=!0;var K=this.el.getAttribute("webxr"),D=K.optionalFeatures;D.includes("light-estimation")||(D.push("light-estimation"),this.el.setAttribute("webxr",K)),this.el.addEventListener("enter-vr",function(){if(z.el.is("ar-mode")){var Q=z.el.renderer,V=Q.xr.getSession();V.requestLightProbe&&z.startLightProbe()}}),this.el.addEventListener("exit-vr",function(){z.xrLightProbe&&z.stopLightProbe()}),this.el.object3D.environment=this.cubeRenderTarget.texture},stopLightProbe:function(){this.xrLightProbe=null,this.probeLight&&(this.probeLight.components.light.light.intensity=0),this.needsVREnvironmentUpdate=!0,this.el.object3D.environment=this.cubeRenderTarget.texture},startLightProbe:function(){this.needsLightProbeUpdate=!0},setupLightProbe:function(){var z=this.el.renderer,K=z.xr.getSession(),D=this,Q=z.getContext();if(!this.probeLight){var V=document.createElement("a-light");V.setAttribute("type","probe"),V.setAttribute("intensity",0),this.el.appendChild(V),this.probeLight=V}switch(K.preferredReflectionFormat){case"srgba8":Q.getExtension("EXT_sRGB");break;case"rgba16f":Q.getExtension("OES_texture_half_float");break}this.glBinding=new XRWebGLBinding(K,Q),Q.getExtension("EXT_sRGB"),Q.getExtension("OES_texture_half_float"),K.requestLightProbe().then(function(T){D.xrLightProbe=T,T.addEventListener("reflectionchange",D.updateXRCubeMap.bind(D))}).catch(function(T){console.warn("Lighting estimation not supported: "+T.message),console.warn('Are you missing: webxr="optionalFeatures: light-estimation;" from <a-scene>?')})},updateXRCubeMap:function(){var z=this.el.renderer,K=this.glBinding.getReflectionCubeMap(this.xrLightProbe);if(K){var D=z.properties.get(this.lightingEstimationTexture);D.__webglTexture=K,this.lightingEstimationTexture.needsPMREMUpdate=!0,this.el.object3D.environment=this.lightingEstimationTexture}},tick:function(){var z=this.el.object3D,K=this.el.renderer,D=this.el.frame;if(D&&this.xrLightProbe){var Q=D.getLightEstimate(this.xrLightProbe);Q&&S(Q,this.probeLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.components.light.light,this.data.directionalLight&&this.data.directionalLight.object3D.position)}this.needsVREnvironmentUpdate&&(z.environment=null,this.needsVREnvironmentUpdate=!1,this.cubeCamera.position.set(0,1.6,0),this.cubeCamera.update(K,z),z.environment=this.cubeRenderTarget.texture),this.needsLightProbeUpdate&&D&&(this.setupLightProbe(),this.needsLightProbeUpdate=!1)},remove:function(){this.el.object3D.environment=null,this.probeLight&&this.el.removeChild(this.probeLight)}})},"./src/components/scene/screenshot.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=["attribute vec3 position;","attribute vec2 uv;","uniform mat4 projectionMatrix;","uniform mat4 modelViewMatrix;","varying vec2 vUv;","void main()  {","  vUv = vec2( 1.- uv.x, uv.y );","  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),K=["precision mediump float;","uniform samplerCube map;","varying vec2 vUv;","#define M_PI 3.141592653589793238462643383279","void main() {","  vec2 uv = vUv;","  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;","  float latitude = uv.y * M_PI;","  vec3 dir = vec3(","    - sin( longitude ) * sin( latitude ),","    cos( latitude ),","    - cos( longitude ) * sin( latitude )","  );","  normalize( dir );","  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );","}"].join(`
`);ie.exports.Component=p("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},sceneOnly:!0,setup:function(){var D=this.el;if(!this.canvas){var Q=D.renderer.getContext();Q&&(this.cubeMapSize=Q.getParameter(Q.MAX_CUBE_MAP_TEXTURE_SIZE),this.material=new S.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:z,fragmentShader:K,side:S.DoubleSide}),this.quad=new S.Mesh(new S.PlaneGeometry(1,1),this.material),this.quad.visible=!1,this.camera=new S.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),D.object3D.add(this.quad),this.onKeyDown=this.onKeyDown.bind(this))}},getRenderTarget:function(D,Q){return new S.WebGLRenderTarget(D,Q,{colorSpace:this.el.sceneEl.renderer.outputColorSpace,minFilter:S.LinearFilter,magFilter:S.LinearFilter,wrapS:S.ClampToEdgeWrapping,wrapT:S.ClampToEdgeWrapping,format:S.RGBAFormat,type:S.UnsignedByteType})},resize:function(D,Q){this.quad.scale.set(D,Q,1),this.camera.left=-1*D/2,this.camera.right=D/2,this.camera.top=Q/2,this.camera.bottom=-1*Q/2,this.camera.updateProjectionMatrix(),this.canvas.width=D,this.canvas.height=Q},play:function(){window.addEventListener("keydown",this.onKeyDown)},onKeyDown:function(D){var Q=D.keyCode===83&&D.ctrlKey&&D.altKey;if(!(!this.data||!Q)){var V=D.shiftKey?"equirectangular":"perspective";this.capture(V)}},setCapture:function(D){var Q=this.el,V,T,F,N;return D==="perspective"?(this.quad.visible=!1,T=this.data.camera&&this.data.camera.components.camera.camera||Q.camera,V={width:this.data.width,height:this.data.height}):(T=this.camera,N=new S.WebGLCubeRenderTarget(Math.min(this.cubeMapSize,2048),{format:S.RGBFormat,generateMipmaps:!0,minFilter:S.LinearMipmapLinearFilter,colorSpace:S.SRGBColorSpace}),F=new S.CubeCamera(Q.camera.near,Q.camera.far,N),Q.camera.getWorldPosition(F.position),Q.camera.getWorldQuaternion(F.quaternion),F.update(Q.renderer,Q.object3D),this.quad.material.uniforms.map.value=F.renderTarget.texture,V={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:T,size:V,projection:D}},capture:function(D){var Q=this.el.renderer.xr.enabled,V=this.el.renderer,T;this.setup(),V.xr.enabled=!1,T=this.setCapture(D),this.renderCapture(T.camera,T.size,T.projection),this.saveCapture(),V.xr.enabled=Q},getCanvas:function(D){var Q=this.el.renderer.xr.enabled,V=this.el.renderer;this.setup();var T=this.setCapture(D);return V.xr.enabled=!1,this.renderCapture(T.camera,T.size,T.projection),V.xr.enabled=Q,this.canvas},renderCapture:function(D,Q,V){var T=this.el.renderer.autoClear,F=this.el,N,k,G,Z=F.renderer;k=this.getRenderTarget(Q.width,Q.height),G=new Uint8Array(4*Q.width*Q.height),this.resize(Q.width,Q.height),Z.autoClear=!0,Z.clear(),Z.setRenderTarget(k),Z.render(F.object3D,D),Z.autoClear=T,Z.readRenderTargetPixels(k,0,0,Q.width,Q.height,G),Z.setRenderTarget(null),V==="perspective"&&(G=this.flipPixelsVertically(G,Q.width,Q.height)),N=new ImageData(new Uint8ClampedArray(G),Q.width,Q.height),this.quad.visible=!1,this.ctx.putImageData(N,0,0)},flipPixelsVertically:function(D,Q,V){for(var T=D.slice(0),F=0;F<Q;++F)for(var N=0;N<V;++N)T[F*4+N*Q*4]=D[F*4+(V-N)*Q*4],T[F*4+1+N*Q*4]=D[F*4+1+(V-N)*Q*4],T[F*4+2+N*Q*4]=D[F*4+2+(V-N)*Q*4],T[F*4+3+N*Q*4]=D[F*4+3+(V-N)*Q*4];return T},saveCapture:function(){this.canvas.toBlob(function(D){var Q="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",V=document.createElement("a"),T=URL.createObjectURL(D);V.href=T,V.setAttribute("download",Q),V.innerHTML="downloading...",V.style.display="none",document.body.appendChild(V),setTimeout(function(){V.click(),document.body.removeChild(V)},1)},"image/png")}})},"./src/components/scene/stats.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./vendor/rStats.js"),z=P("./src/utils/index.js");P("./vendor/rStats.extras.js"),P("./src/lib/rStatsAframe.js");var K=window.aframeStats,D="a-hidden",Q=window.threeStats;ie.exports.Component=p("stats",{schema:{default:!0},sceneOnly:!0,init:function(){var T=this.el;z.getUrlParameter("stats")!=="false"&&(this.stats=V(T),this.statsEl=document.querySelector(".rs-base"),this.hideBound=this.hide.bind(this),this.showBound=this.show.bind(this),T.addEventListener("enter-vr",this.hideBound),T.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var T=this.stats;T&&(T("rAF").tick(),T("FPS").frame(),T().update())},hide:function(){this.statsEl.classList.add(D)},show:function(){this.statsEl.classList.remove(D)}});function V(T){var F=new Q(T.renderer),N=new K(T),k=T.isMobile?[]:[F,N];return new S({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:k})}},"./src/components/scene/xr-mode-ui.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/constants/index.js"),z=P("./src/utils/index.js"),K="a-enter-vr",D="a-enter-ar",Q="a-enter-vr-button",V="a-enter-ar-button",T="a-hidden",F="a-orientation-modal";ie.exports.Component=p("xr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0},cardboardModeEnabled:{default:!1},enterVRButton:{default:""},enterVREnabled:{default:!0},enterARButton:{default:""},enterAREnabled:{default:!0},XRMode:{default:"vr",oneOf:["vr","ar","xr"]}},sceneOnly:!0,init:function(){var ne=this,te=this.el;z.getUrlParameter("ui")!=="false"&&(this.insideLoader=!1,this.enterVREl=null,this.enterAREl=null,this.orientationModalEl=null,this.bindMethods(),te.addEventListener("enter-vr",this.updateEnterInterfaces),te.addEventListener("exit-vr",this.updateEnterInterfaces),te.addEventListener("update-vr-devices",this.updateEnterInterfaces),window.addEventListener("message",function(de){de.data.type==="loaderReady"&&(ne.insideLoader=!0,ne.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=this.onEnterVRButtonClick.bind(this),this.onEnterARButtonClick=this.onEnterARButtonClick.bind(this),this.onModalClick=this.onModalClick.bind(this),this.toggleOrientationModalIfNeeded=this.toggleOrientationModalIfNeeded.bind(this),this.updateEnterInterfaces=this.updateEnterInterfaces.bind(this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},onEnterARButtonClick:function(){this.el.enterAR()},update:function(){var ne=this.data,te=this.el;if(!ne.enabled||this.insideLoader||z.getUrlParameter("ui")==="false")return this.remove();this.enterVREl||this.enterAREl||this.orientationModalEl||(!this.enterVREl&&ne.enterVREnabled&&(ne.XRMode==="xr"||ne.XRMode==="vr")&&(ne.enterVRButton?(this.enterVREl=document.querySelector(ne.enterVRButton),this.enterVREl.addEventListener("click",this.onEnterVRButtonClick)):(this.enterVREl=N(this.onEnterVRButtonClick),te.appendChild(this.enterVREl))),!this.enterAREl&&ne.enterAREnabled&&(ne.XRMode==="xr"||ne.XRMode==="ar")&&(ne.enterARButton?(this.enterAREl=document.querySelector(ne.enterARButton),this.enterAREl.addEventListener("click",this.onEnterARButtonClick)):(this.enterAREl=k(this.onEnterARButtonClick,ne.XRMode==="xr"),te.appendChild(this.enterAREl))),this.orientationModalEl=G(this.onModalClick),te.appendChild(this.orientationModalEl),this.updateEnterInterfaces())},remove:function(){[this.enterVREl,this.enterAREl,this.orientationModalEl].forEach(function(ne){ne&&ne.parentNode&&ne.parentNode.removeChild(ne)}),this.enterVREl=void 0,this.enterAREl=void 0,this.orientationModalEl=void 0},updateEnterInterfaces:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleEnterARButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var ne=this.el;this.enterVREl&&(ne.is("vr-mode")||(ne.isMobile||z.device.isMobileDeviceRequestingDesktopSite())&&!this.data.cardboardModeEnabled&&!z.device.checkVRSupport()?this.enterVREl.classList.add(T):(z.device.checkVRSupport()||this.enterVREl.classList.add("fullscreen"),this.enterVREl.classList.remove(T),ne.enterVR(!1,!0)))},toggleEnterARButtonIfNeeded:function(){var ne=this.el;this.enterAREl&&(ne.is("vr-mode")||!z.device.checkARSupport()?this.enterAREl.classList.add(T):(this.enterAREl.classList.remove(T),ne.enterVR(!0,!0)))},toggleOrientationModalIfNeeded:function(){var ne=this.el,te=this.orientationModalEl;!te||!ne.isMobile||(!z.device.isLandscape()&&ne.is("vr-mode")?te.classList.remove(T):te.classList.add(T))}});function N(ne){var te,de;return de=document.createElement("div"),de.classList.add(K),de.setAttribute(S.AFRAME_INJECTED,""),te=document.createElement("button"),te.className=Q,te.setAttribute("title","Enter VR mode with a headset or fullscreen without"),te.setAttribute(S.AFRAME_INJECTED,""),z.device.isMobile()&&Z(te),de.appendChild(te),te.addEventListener("click",function(oe){ne(),oe.stopPropagation()}),de}function k(ne,te){var de,oe;return oe=document.createElement("div"),oe.classList.add(D),te&&oe.classList.add("xr"),oe.setAttribute(S.AFRAME_INJECTED,""),de=document.createElement("button"),de.className=V,de.setAttribute("title","Enter AR mode with a headset or handheld device."),de.setAttribute(S.AFRAME_INJECTED,""),z.device.isMobile()&&Z(de),oe.appendChild(de),de.addEventListener("click",function(ye){ne(),ye.stopPropagation()}),oe}function G(ne){var te=document.createElement("div");te.className=F,te.classList.add(T),te.setAttribute(S.AFRAME_INJECTED,"");var de=document.createElement("button");return de.setAttribute(S.AFRAME_INJECTED,""),de.innerHTML="Exit VR",de.addEventListener("click",ne),te.appendChild(de),te}function Z(ne){ne.addEventListener("touchstart",function(){ne.classList.remove("resethover")},{passive:!0}),ne.addEventListener("touchend",function(){ne.classList.add("resethover")},{passive:!0})}},"./src/components/shadow.js":(ie,we,P)=>{var p=P("./src/core/component.js"),S=P("./src/lib/three.js"),z=p.registerComponent;ie.exports.Component=z("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=this.update.bind(this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var K=this.data;this.updateDescendants(K.cast,K.receive)},remove:function(){var K=this.el;K.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(K,D){var Q=this.el.sceneEl;this.el.object3D.traverse(function(V){if(V instanceof S.Mesh&&(V.castShadow=K,V.receiveShadow=D,Q.hasLoaded&&V.material))for(var T=Array.isArray(V.material)?V.material:[V.material],F=0;F<T.length;F++)T[F].needsUpdate=!0})}})},"./src/components/sound.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/debug.js"),z=P("./src/lib/three.js"),K=S("components:sound:warn");ie.exports.Component=p("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},loopStart:{default:0},loopEnd:{default:0},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){var D=this;this.listener=null,this.audioLoader=new z.AudioLoader,this.pool=new z.Group,this.loaded=!1,this.mustPlay=!1,this.playSoundBound=function(){D.playSound()}},update:function(D){var Q=this.data,V,T,F=Q.src!==D.src;if(F){if(!Q.src)return;this.setupSound()}for(V=0;V<this.pool.children.length;V++)T=this.pool.children[V],Q.positional&&(T.setDistanceModel(Q.distanceModel),T.setMaxDistance(Q.maxDistance),T.setRefDistance(Q.refDistance),T.setRolloffFactor(Q.rolloffFactor)),T.setLoop(Q.loop),T.setLoopStart(Q.loopStart),Q.loopStart!==0&&Q.loopEnd===0?T.setLoopEnd(T.buffer.duration):T.setLoopEnd(Q.loopEnd),T.setVolume(Q.volume),T.isPaused=!1;if(Q.on!==D.on&&this.updateEventListener(D.on),F){var N=this;this.loaded=!1,this.audioLoader.load(Q.src,function(k){for(V=0;V<N.pool.children.length;V++)T=N.pool.children[V],T.setBuffer(k);N.loaded=!0,z.Cache.remove(Q.src),(N.data.autoplay||N.mustPlay)&&N.playSound(N.processSound),N.el.emit("sound-loaded",N.evtDetail,!1)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){var D,Q;this.removeEventListener(),this.el.getObject3D(this.attrName)&&this.el.removeObject3D(this.attrName);try{for(D=0;D<this.pool.children.length;D++)Q=this.pool.children[D],Q.disconnect()}catch{K("Audio source not properly disconnected")}},updateEventListener:function(D){var Q=this.el;D&&Q.removeEventListener(D,this.playSoundBound),Q.addEventListener(this.data.on,this.playSoundBound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSoundBound)},setupSound:function(){var D=this.el,Q,V=D.sceneEl,T=this,F;this.pool.children.length>0&&(this.stopSound(),D.removeObject3D("sound"));var N=this.listener=V.audioListener||new z.AudioListener;for(V.audioListener=N,V.camera&&V.camera.add(N),V.addEventListener("camera-set-active",function(k){k.detail.cameraEl.getObject3D("camera").add(N)}),this.pool=new z.Group,Q=0;Q<this.data.poolSize;Q++)F=this.data.positional?new z.PositionalAudio(N):new z.Audio(N),this.pool.add(F);for(D.setObject3D(this.attrName,this.pool),Q=0;Q<this.pool.children.length;Q++)F=this.pool.children[Q],F.onEnded=function(){this.isPlaying=!1,T.el.emit("sound-ended",T.evtDetail,!1)}},pauseSound:function(){var D,Q;for(this.isPlaying=!1,D=0;D<this.pool.children.length;D++)Q=this.pool.children[D],!(!Q.source||!Q.source.buffer||!Q.isPlaying||Q.isPaused)&&(Q.isPaused=!0,Q.pause())},playSound:function(D){var Q,V,T;if(!this.loaded){K("Sound not loaded yet. It will be played once it finished loading"),this.mustPlay=!0,this.processSound=D;return}for(Q=!1,this.isPlaying=!0,V=0;V<this.pool.children.length;V++)if(T=this.pool.children[V],!T.isPlaying&&T.buffer&&!Q){D&&D(T),T.play(),T.isPaused=!1,Q=!0;continue}if(!Q){K("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el);return}this.mustPlay=!1,this.processSound=void 0},stopSound:function(){var D,Q;for(this.isPlaying=!1,D=0;D<this.pool.children.length;D++){if(Q=this.pool.children[D],!Q.source||!Q.source.buffer)return;Q.stop()}}})},"./src/components/text.js":(ie,we,P)=>{var p=P("./node_modules/three-bmfont-text/index.js"),S=P("./node_modules/load-bmfont/browser.js"),z=P("./src/core/component.js").registerComponent,K=P("./src/core/shader.js"),D=P("./src/lib/three.js"),Q=P("./src/utils/index.js"),V=Q.debug("components:text:error"),T=K.shaders,F=Q.debug("components:text:warn"),N=1,k=16,G=P("./src/constants/index.js").AFRAME_CDN_ROOT,Z=G+"fonts/",ne={aileronsemibold:Z+"Aileron-Semibold.fnt",dejavu:Z+"DejaVu-sdf.fnt",exo2bold:Z+"Exo2Bold.fnt",exo2semibold:Z+"Exo2SemiBold.fnt",kelsonsans:Z+"KelsonSans.fnt",monoid:Z+"Monoid.fnt",mozillavr:Z+"mozillavr.fnt",roboto:Z+"Roboto-msdf.json",sourcecodepro:Z+"SourceCodePro.fnt"},te=["roboto"],de="roboto";ie.exports.FONTS=ne;var oe=new Oe,ye={},Me={},Ne=/^\w+:/;ie.exports.Component=z("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:de},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:T},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=p(),this.createOrUpdateMaterial(),this.explicitGeoDimensionsChecked=!1},update:function(Te){var Ve=this.data,st=this.currentFont;if(Me[Ve.font]?this.texture=Me[Ve.font]:(this.texture=Me[Ve.font]=new D.Texture,this.texture.anisotropy=k),this.createOrUpdateMaterial(),Te.font!==Ve.font){this.updateFont();return}st&&(this.updateGeometry(this.geometry,st),this.updateLayout())},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var Te=this.data,Ve,st=this.material,dt,Mt=this.shaderData,Rt;if(Rt=Te.shader,te.indexOf(Te.font)!==-1||Te.font.indexOf("-msdf.")>=0?Rt="msdf":Te.font in ne&&te.indexOf(Te.font)===-1&&(Rt="sdf"),Ve=(this.shaderObject&&this.shaderObject.name)!==Rt,Mt.alphaTest=Te.alphaTest,Mt.color=Te.color,Mt.map=this.texture,Mt.opacity=Te.opacity,Mt.side=Pe(Te.side),Mt.transparent=Te.transparent,Mt.negate=Te.negate,!Ve){this.shaderObject.update(Mt),st.transparent=Mt.transparent,st.side=Mt.side;return}dt=ke(this.el,Rt,Mt),this.material=dt.material,this.shaderObject=dt.shader,this.material.side=Mt.side,this.mesh&&(this.mesh.material=this.material)},updateFont:function(){var Te=this.data,Ve=this.el,st,dt=this.geometry,Mt=this;Te.font||F("No font specified. Using the default font."),this.mesh&&(this.mesh.visible=!1),st=this.lookupFont(Te.font||de)||Te.font,oe.get(st,function(){return Qe(st,Te.yOffset)}).then(function(Yt){var zt;if(Yt.pages.length!==1)throw new Error("Currently only single-page bitmap fonts are supported.");ye[st]||(Yt.widthFactor=ye[Yt]=fe(Yt)),Mt.currentFont=Yt,zt=Mt.getFontImageSrc(),oe.get(zt,function(){return De(zt)}).then(function(Ci){var ci=Mt.texture;ci&&(ci.image=Ci,ci.needsUpdate=!0,Me[Te.font]=ci,Mt.texture=ci,Mt.initMesh(),Mt.currentFont=Yt,Mt.updateGeometry(dt,Yt),Mt.updateLayout(),Mt.mesh.visible=!0,Ve.emit("textfontset",{font:Te.font,fontObj:Yt}))}).catch(function(Ci){V(Ci.message),V(Ci.stack)})}).catch(function(Rt){V(Rt.message),V(Rt.stack)})},initMesh:function(){this.mesh||(this.mesh=new D.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh))},getFontImageSrc:function(){if(this.data.fontImage)return this.data.fontImage;var Te=this.lookupFont(this.data.font||de)||this.data.font,Ve=this.currentFont.pages[0];return Ve.match(Ne)&&Ve.indexOf("http")!==0?Te.replace(/(\.fnt)|(\.json)/,".png"):D.LoaderUtils.extractUrlBase(Te)+Ve},updateLayout:function(){var Te,Ve,st=this.el,dt=this.data,Mt=this.geometry,Rt,Yt,zt,Ci=this.mesh,ci,Qi,sn,In,Xn;if(!(!Ci||!Mt.layout)){if(Rt=st.getAttribute("geometry"),sn=dt.width||Rt&&Rt.width||N,ci=Ce(dt.wrapPixels,dt.wrapCount,this.currentFont.widthFactor),Qi=sn/ci,zt=Mt.layout,Yt=Qi*(zt.height+zt.descender),Rt&&Rt.primitive==="plane"&&(this.explicitGeoDimensionsChecked||(this.explicitGeoDimensionsChecked=!0,this.hasExplicitGeoWidth=!!Rt.width,this.hasExplicitGeoHeight=!!Rt.height),this.hasExplicitGeoWidth||st.setAttribute("geometry","width",sn),this.hasExplicitGeoHeight||st.setAttribute("geometry","height",Yt)),Te=dt.anchor==="align"?dt.align:dt.anchor,Te==="left")In=0;else if(Te==="right")In=-1*zt.width;else if(Te==="center")In=-1*zt.width/2;else throw new TypeError("Invalid text.anchor property value",Te);if(Ve=dt.baseline,Ve==="bottom")Xn=0;else if(Ve==="top")Xn=-1*zt.height+zt.ascender;else if(Ve==="center")Xn=-1*zt.height/2;else throw new TypeError("Invalid text.baseline property value",Ve);Ci.position.x=In*Qi+dt.xOffset,Ci.position.y=Xn*Qi,Ci.position.z=dt.zOffset,Ci.scale.set(Qi,-1*Qi,Qi)}},lookupFont:function(Te){return ne[Te]},updateGeometry:function(){var Te={},Ve={},st=/\\n/g,dt=/\\t/g;return function(Mt,Rt){var Yt=this.data;Ve.font=Rt,Ve.lineHeight=Yt.lineHeight&&isFinite(Yt.lineHeight)?Yt.lineHeight:Rt.common.lineHeight,Ve.text=Yt.value.toString().replace(st,`
`).replace(dt,"	"),Ve.width=Ce(Yt.wrapPixels,Yt.wrapCount,Rt.widthFactor),Mt.update(Q.extend(Te,Yt,Ve))}}()});function Pe(Te){switch(Te){case"back":return D.FrontSide;case"double":return D.DoubleSide;default:return D.BackSide}}function Qe(Te,Ve){return new Promise(function(st,dt){S(Te,function(Mt,Rt){if(Mt){V("Error loading font",Te),dt(Mt);return}Te.indexOf("/Roboto-msdf.json")>=0&&(Ve=30),Ve&&Rt.chars.map(function(zt){zt.yoffset+=Ve}),st(Rt)})})}function De(Te){return new Promise(function(Ve,st){new D.ImageLoader().load(Te,function(dt){Ve(dt)},void 0,function(){V("Error loading font image",Te),st(null)})})}function ke(Te,Ve,st){var dt,Mt;return Mt=new T[Ve].Shader,Mt.el=Te,Mt.init(st),Mt.update(st),dt=Mt.material,dt.transparent=st.transparent,{material:dt,shader:Mt}}function Ce(Te,Ve,st){return Te||(.5+Ve)*st}function fe(Te){var Ve=0,st=0,dt=0;return Te.chars.map(function(Mt){Ve+=Mt.xadvance,Mt.id>=48&&Mt.id<=57&&(dt++,st+=Mt.xadvance)}),dt?st/dt:Ve/Te.chars.length}function Oe(){var Te=this.cache={};this.get=function(Ve,st){return Ve in Te||(Te[Ve]=st()),Te[Ve]}}},"./src/components/tracked-controls-webvr.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/tracked-controls.js"),z=P("./src/constants/index.js").DEFAULT_CAMERA_HEIGHT,K=P("./src/lib/three.js"),D=P("./src/constants/index.js").DEFAULT_HANDEDNESS,Q={x:.175,y:-.3,z:-.03},V={x:0,y:0,z:-.175},T={touches:[]},F={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};ie.exports.Component=p("tracked-controls-webvr",{schema:{autoHide:{default:!0},controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"}},init:function(){this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new K.Vector3,this.controllerQuaternion=new K.Quaternion,this.controllerEuler=new K.Euler,this.updateGamepad(),this.buttonEventDetails={}},tick:function(N,k){var G=this.el.getObject3D("mesh");G&&G.update&&G.update(k/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return z},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var N=this.data,k=S.findMatchingControllerWebVR(this.system.controllers,N.id,N.idPrefix,N.hand,N.controller);this.controller=k,this.el.components["tracked-controls"].controller=k,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},applyArmModel:function(N){var k=this.controller,G=this.controllerEuler,Z=this.controllerQuaternion,ne=this.deltaControllerPosition,te,de,oe,ye,Me;de=this.getHeadElement(),oe=de.object3D,Me=this.defaultUserHeight(),ye=k.pose,te=(k?k.hand:void 0)||D,N.copy(oe.position),ne.set(Q.x*(te==="left"?-1:te==="right"?1:0),Q.y,Q.z),ne.multiplyScalar(Me),ne.applyAxisAngle(oe.up,oe.rotation.y),N.add(ne),ne.set(V.x,V.y,V.z),ne.multiplyScalar(Me),ye.orientation?Z.fromArray(ye.orientation):Z.copy(oe.quaternion),G.setFromQuaternion(Z),G.set(G.x,G.y,0),ne.applyEuler(G),N.add(ne)},updatePose:function(){var N=this.controller,k=this.data,G=this.el.object3D,Z,ne=this.system.vrDisplay,te;N&&(Z=N.pose,Z.position?G.position.fromArray(Z.position):k.armModel&&this.applyArmModel(G.position),Z.orientation&&G.quaternion.fromArray(Z.orientation),ne&&Z.position&&(te=this.el.sceneEl.renderer.xr.getStandingMatrix(),G.matrix.compose(G.position,G.quaternion,G.scale),G.matrix.multiplyMatrices(te,G.matrix),G.matrix.decompose(G.position,G.quaternion,G.scale)),G.rotateX(this.data.orientationOffset.x*K.MathUtils.DEG2RAD),G.rotateY(this.data.orientationOffset.y*K.MathUtils.DEG2RAD),G.rotateZ(this.data.orientationOffset.z*K.MathUtils.DEG2RAD))},updateButtons:function(){var N,k=this.controller,G;if(k){for(G=0;G<k.buttons.length;++G)this.buttonStates[G]||(this.buttonStates[G]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[G]||(this.buttonEventDetails[G]={id:G,state:this.buttonStates[G]}),N=k.buttons[G],this.handleButton(G,N);this.handleAxes()}},handleButton:function(N,k){var G;return G=this.handlePress(N,k)|this.handleTouch(N,k)|this.handleValue(N,k),G?(this.el.emit(F.BUTTONCHANGED,this.buttonEventDetails[N],!1),!0):!1},handleAxes:function(){var N=!1,k=this.controller.axes,G,Z=this.axis,ne=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),G=0;G<k.length;++G)ne.push(Z[G]!==k[G]),ne[G]&&(N=!0);if(!N)return!1;for(this.axis.splice(0,this.axis.length),G=0;G<k.length;G++)this.axis.push(k[G]);return this.el.emit(F.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(N,k){var G,Z=this.buttonStates[N];return k.pressed===Z.pressed?!1:(G=k.pressed?F.BUTTONDOWN:F.BUTTONUP,this.el.emit(G,this.buttonEventDetails[N],!1),Z.pressed=k.pressed,!0)},handleTouch:function(N,k){var G,Z=this.buttonStates[N];return k.touched===Z.touched?!1:(G=k.touched?F.TOUCHSTART:F.TOUCHEND,this.el.emit(G,this.buttonEventDetails[N],!1,T),Z.touched=k.touched,!0)},handleValue:function(N,k){var G=this.buttonStates[N];return k.value===G.value?!1:(G.value=k.value,!0)}})},"./src/components/tracked-controls-webxr.js":(ie,we,P)=>{var p=P("./src/utils/tracked-controls.js"),S=P("./src/core/component.js").registerComponent,z={AXISMOVE:"axismove",BUTTONCHANGED:"buttonchanged",BUTTONDOWN:"buttondown",BUTTONUP:"buttonup",TOUCHSTART:"touchstart",TOUCHEND:"touchend"};ie.exports.Component=S("tracked-controls-webxr",{schema:{id:{type:"string",default:""},hand:{type:"string",default:""},handTrackingEnabled:{default:!1},index:{type:"int",default:-1},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"gripSpace"}},init:function(){this.updateController=this.updateController.bind(this),this.buttonEventDetails={},this.buttonStates=this.el.components["tracked-controls"].buttonStates={},this.axis=this.el.components["tracked-controls"].axis=[0,0,0],this.changedAxes=[],this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes}},update:function(){this.updateController()},play:function(){var K=this.el.sceneEl;this.updateController(),K.addEventListener("controllersupdated",this.updateController)},pause:function(){var K=this.el.sceneEl;K.removeEventListener("controllersupdated",this.updateController)},isControllerPresent:function(K){return!(!this.controller||this.controller.gamepad||K.inputSource.handedness!=="none"&&K.inputSource.handedness!==this.data.hand)},updateController:function(){this.controller=p.findMatchingControllerWebXR(this.system.controllers,this.data.id,this.data.hand,this.data.index,this.data.iterateControllerProfiles,this.data.handTrackingEnabled),this.el.components["tracked-controls"].controller=this.controller,this.data.autoHide&&(this.el.object3D.visible=!!this.controller)},tick:function(){var K=this.el.sceneEl,D=this.controller,Q=K.frame;!D||!K.frame||!this.system.referenceSpace||D.hand||(this.pose=Q.getPose(D[this.data.space],this.system.referenceSpace),this.updatePose(),this.updateButtons())},updatePose:function(){var K=this.el.object3D,D=this.pose;D&&(K.matrix.elements=D.transform.matrix,K.matrix.decompose(K.position,K.rotation,K.scale))},updateButtons:function(){var K,D,Q=this.controller,V;if(!(!Q||!Q.gamepad)){for(V=Q.gamepad,D=0;D<V.buttons.length;++D)this.buttonStates[D]||(this.buttonStates[D]={pressed:!1,touched:!1,value:0}),this.buttonEventDetails[D]||(this.buttonEventDetails[D]={id:D,state:this.buttonStates[D]}),K=V.buttons[D],this.handleButton(D,K);this.handleAxes()}},handleButton:function(K,D){var Q;return Q=this.handlePress(K,D)|this.handleTouch(K,D)|this.handleValue(K,D),Q?(this.el.emit(z.BUTTONCHANGED,this.buttonEventDetails[K],!1),!0):!1},handleAxes:function(){var K=!1,D=this.controller.gamepad.axes,Q,V=this.axis,T=this.changedAxes;for(this.changedAxes.splice(0,this.changedAxes.length),Q=0;Q<D.length;++Q)T.push(V[Q]!==D[Q]),T[Q]&&(K=!0);if(!K)return!1;for(this.axis.splice(0,this.axis.length),Q=0;Q<D.length;Q++)this.axis.push(D[Q]);return this.el.emit(z.AXISMOVE,this.axisMoveEventDetail,!1),!0},handlePress:function(K,D){var Q,V=this.buttonStates[K];return D.pressed===V.pressed?!1:(Q=D.pressed?z.BUTTONDOWN:z.BUTTONUP,this.el.emit(Q,this.buttonEventDetails[K],!1),V.pressed=D.pressed,!0)},handleTouch:function(K,D){var Q,V=this.buttonStates[K];return D.touched===V.touched?!1:(Q=D.touched?z.TOUCHSTART:z.TOUCHEND,this.el.emit(Q,this.buttonEventDetails[K],!1),V.touched=D.touched,!0)},handleValue:function(K,D){var Q=this.buttonStates[K];return D.value===Q.value?!1:(Q.value=D.value,!0)}})},"./src/components/tracked-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("tracked-controls",{schema:{autoHide:{default:!0},controller:{default:-1},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},handTrackingEnabled:{default:!1},orientationOffset:{type:"vec3"},armModel:{default:!1},headElement:{type:"selector"},iterateControllerProfiles:{default:!1},space:{type:"string",oneOf:["targetRaySpace","gripSpace"],default:"targetRaySpace"}},after:["tracked-controls-webvr","tracked-controls-webxr"],update:function(){var S=this.data,z=this.el;z.sceneEl.hasWebXR?z.setAttribute("tracked-controls-webxr",{id:S.id,hand:S.hand,index:S.controller,iterateControllerProfiles:S.iterateControllerProfiles,handTrackingEnabled:S.handTrackingEnabled,space:S.space}):z.setAttribute("tracked-controls-webvr",S)}})},"./src/components/valve-index-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=P("./src/utils/tracked-controls.js"),K=z.checkControllerPresentAndSetup,D=z.emitIfAxesChanged,Q=z.onButtonEvent,V=P("./src/constants/index.js").AFRAME_CDN_ROOT,T=V+"controllers/valve/index/valve-index-",F={left:T+"left.glb",right:T+"right.glb"},N="valve",k=P("./src/utils/index.js").device.isWebXRAvailable,G={left:{x:-.00023692678902063457,y:.04724540367838371,z:-.061959880395271096},right:{x:.002471558599671131,y:.055765208987076195,z:-.061068168708348844}},Z={left:{x:0,y:-.05,z:.06},right:{x:0,y:-.05,z:.06}},ne={left:{_x:.692295102620542,_y:-.0627618864318427,_z:-.06265893149611756,_order:"XYZ"},right:{_x:.6484021229942998,_y:-.032563619881892894,_z:-.1327973171917482,_order:"XYZ"}},te={left:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"},right:{_x:Math.PI/3,_y:0,_z:0,_order:"XYZ"}},de=k?te:ne,oe=k?Z:G;ie.exports.Component=p("valve-index-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},after:["tracked-controls"],mapping:{axes:{trackpad:[0,1],thumbstick:[2,3]},buttons:["trigger","grip","trackpad","thumbstick","abutton"]},init:function(){var ye=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(Me){Q(Me.detail.id,"down",ye)},this.onButtonUp=function(Me){Q(Me.detail.id,"up",ye)},this.onButtonTouchEnd=function(Me){Q(Me.detail.id,"touchend",ye)},this.onButtonTouchStart=function(Me){Q(Me.detail.id,"touchstart",ye)},this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var ye=this.el;ye.addEventListener("buttonchanged",this.onButtonChanged),ye.addEventListener("buttondown",this.onButtonDown),ye.addEventListener("buttonup",this.onButtonUp),ye.addEventListener("touchend",this.onButtonTouchEnd),ye.addEventListener("touchstart",this.onButtonTouchStart),ye.addEventListener("model-loaded",this.onModelLoaded),ye.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var ye=this.el;ye.removeEventListener("buttonchanged",this.onButtonChanged),ye.removeEventListener("buttondown",this.onButtonDown),ye.removeEventListener("buttonup",this.onButtonUp),ye.removeEventListener("touchend",this.onButtonTouchEnd),ye.removeEventListener("touchstart",this.onButtonTouchStart),ye.removeEventListener("model-loaded",this.onModelLoaded),ye.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var ye=this.data,Me=ye.hand==="right"?0:ye.hand==="left"?1:2;K(this,N,{index:Me,iterateControllerProfiles:!0,hand:ye.hand})},injectTrackedControls:function(){var ye=this.el,Me=this.data;ye.setAttribute("tracked-controls",{idPrefix:N,controller:Me.hand==="right"?1:Me.hand==="left"?0:2,hand:Me.hand,orientationOffset:Me.orientationOffset}),this.loadModel()},loadModel:function(){var ye=this.data;ye.model&&this.el.setAttribute("gltf-model",""+F[ye.hand])},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(ye){var Me=this.mapping.buttons[ye.detail.id],Ne=this.buttonMeshes,Pe;Me&&(Me==="trigger"&&(Pe=ye.detail.state.value,Ne&&Ne.trigger&&(Ne.trigger.rotation.x=this.triggerOriginalRotationX-Pe*(Math.PI/40))),this.el.emit(Me+"changed",ye.detail.state))},onModelLoaded:function(ye){var Me,Ne=ye.detail.model,Pe=this;ye.target!==this.el||!this.data.model||(Me=this.buttonMeshes={},Me.grip={left:Ne.getObjectByName("leftgrip"),right:Ne.getObjectByName("rightgrip")},Me.menu=Ne.getObjectByName("menubutton"),Me.system=Ne.getObjectByName("systembutton"),Me.trackpad=Ne.getObjectByName("touchpad"),Me.trigger=Ne.getObjectByName("trigger"),this.triggerOriginalRotationX=Me.trigger.rotation.x,Object.keys(Me).forEach(function(Qe){Pe.setButtonColor(Qe,Pe.data.buttonColor)}),Ne.position.copy(oe[this.data.hand]),Ne.rotation.copy(de[this.data.hand]),this.el.emit("controllermodelready",{name:"valve-index-controls",model:this.data.model,rayOrigin:new S.Vector3(0,0,0)}))},onAxisMoved:function(ye){D(this,this.mapping.axes,ye)},updateModel:function(ye,Me){var Ne,Pe;this.data.model&&(Pe=Me.indexOf("touch")!==-1,!Pe&&(Ne=Me==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(ye,Ne)))},setButtonColor:function(ye,Me){}})},"./src/components/visible.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent;ie.exports.Component=p("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},"./src/components/vive-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/tracked-controls.js"),z=S.checkControllerPresentAndSetup,K=S.emitIfAxesChanged,D=S.onButtonEvent,Q=P("./src/constants/index.js").AFRAME_CDN_ROOT,V=Q+"controllers/vive/vr_controller_vive.obj",T=Q+"controllers/vive/vr_controller_vive.mtl",F=P("./src/utils/index.js").device.isWebXRAvailable,N="htc-vive",k="OpenVR ",G=F?N:k,Z={axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},ne={axes:{touchpad:[0,1]},buttons:["trigger","grip","touchpad","none"]},te=F?ne:Z;ie.exports.Component=p("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},after:["tracked-controls"],mapping:te,init:function(){var de=this;this.controllerPresent=!1,this.lastControllerCheck=0,this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(oe){D(oe.detail.id,"down",de)},this.onButtonUp=function(oe){D(oe.detail.id,"up",de)},this.onButtonTouchEnd=function(oe){D(oe.detail.id,"touchend",de)},this.onButtonTouchStart=function(oe){D(oe.detail.id,"touchstart",de)},this.previousButtonValues={},this.bindMethods()},update:function(){var de=this.data;this.controllerIndex=de.hand==="right"?0:de.hand==="left"?1:2},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},addEventListeners:function(){var de=this.el;de.addEventListener("buttonchanged",this.onButtonChanged),de.addEventListener("buttondown",this.onButtonDown),de.addEventListener("buttonup",this.onButtonUp),de.addEventListener("touchend",this.onButtonTouchEnd),de.addEventListener("touchstart",this.onButtonTouchStart),de.addEventListener("model-loaded",this.onModelLoaded),de.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var de=this.el;de.removeEventListener("buttonchanged",this.onButtonChanged),de.removeEventListener("buttondown",this.onButtonDown),de.removeEventListener("buttonup",this.onButtonUp),de.removeEventListener("touchend",this.onButtonTouchEnd),de.removeEventListener("touchstart",this.onButtonTouchStart),de.removeEventListener("model-loaded",this.onModelLoaded),de.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var de=this.data;z(this,G,{index:this.controllerIndex,hand:de.hand})},injectTrackedControls:function(){var de=this.el,oe=this.data;de.setAttribute("tracked-controls",{idPrefix:G,hand:oe.hand,controller:this.controllerIndex,orientationOffset:oe.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:V,mtl:T})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(de){var oe=this.mapping.buttons[de.detail.id],ye=this.buttonMeshes,Me;oe&&(oe==="trigger"&&(Me=de.detail.state.value,ye&&ye.trigger&&(ye.trigger.rotation.x=-Me*(Math.PI/12))),this.el.emit(oe+"changed",de.detail.state))},onModelLoaded:function(de){var oe,ye=de.detail.model,Me=this;de.target!==this.el||!this.data.model||(oe=this.buttonMeshes={},oe.grip={left:ye.getObjectByName("leftgrip"),right:ye.getObjectByName("rightgrip")},oe.menu=ye.getObjectByName("menubutton"),oe.system=ye.getObjectByName("systembutton"),oe.trackpad=ye.getObjectByName("touchpad"),oe.touchpad=ye.getObjectByName("touchpad"),oe.trigger=ye.getObjectByName("trigger"),Object.keys(oe).forEach(function(Ne){Me.setButtonColor(Ne,Me.data.buttonColor)}),ye.position.set(0,-.015,.04))},onAxisMoved:function(de){K(this,this.mapping.axes,de)},updateModel:function(de,oe){var ye,Me;this.data.model&&(Me=oe.indexOf("touch")!==-1,!Me&&(ye=oe==="up"?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(de,ye)))},setButtonColor:function(de,oe){var ye=this.buttonMeshes;if(ye){if(de==="grip"){ye.grip.left.material.color.set(oe),ye.grip.right.material.color.set(oe);return}ye[de].material.color.set(oe)}}})},"./src/components/vive-focus-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/tracked-controls.js"),z=S.checkControllerPresentAndSetup,K=S.emitIfAxesChanged,D=S.onButtonEvent,Q=P("./src/constants/index.js").AFRAME_CDN_ROOT,V=Q+"controllers/vive/focus-controller/focus-controller.gltf",T=P("./src/utils/index.js").device.isWebXRAvailable,F="htc-vive-focus",N="HTC Vive Focus ",k=T?F:N,G={axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},Z={axes:{touchpad:[0,1]},buttons:["trigger","none","touchpad","none","menu"]},ne=T?Z:G;ie.exports.Component=p("vive-focus-controls",{schema:{hand:{default:""},buttonTouchedColor:{type:"color",default:"#BBBBBB"},buttonHighlightColor:{type:"color",default:"#7A7A7A"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},after:["tracked-controls"],mapping:ne,bindMethods:function(){this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.removeControllersUpdateListener=this.removeControllersUpdateListener.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var te=this;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(de){D(de.detail.id,"down",te)},this.onButtonUp=function(de){D(de.detail.id,"up",te)},this.onButtonTouchStart=function(de){D(de.detail.id,"touchstart",te)},this.onButtonTouchEnd=function(de){D(de.detail.id,"touchend",te)},this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods()},addEventListeners:function(){var te=this.el;te.addEventListener("buttonchanged",this.onButtonChanged),te.addEventListener("buttondown",this.onButtonDown),te.addEventListener("buttonup",this.onButtonUp),te.addEventListener("touchstart",this.onButtonTouchStart),te.addEventListener("touchend",this.onButtonTouchEnd),te.addEventListener("model-loaded",this.onModelLoaded),te.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var te=this.el;te.removeEventListener("buttonchanged",this.onButtonChanged),te.removeEventListener("buttondown",this.onButtonDown),te.removeEventListener("buttonup",this.onButtonUp),te.removeEventListener("touchstart",this.onButtonTouchStart),te.removeEventListener("touchend",this.onButtonTouchEnd),te.removeEventListener("model-loaded",this.onModelLoaded),te.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){z(this,k,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var te=this.el,de=this.data;te.setAttribute("tracked-controls",{armModel:de.armModel,idPrefix:k,orientationOffset:de.orientationOffset}),this.data.model&&this.el.setAttribute("gltf-model",V)},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(te){var de=te.detail.model,oe;te.target!==this.el||!this.data.model||(oe=this.buttonMeshes={},oe.trigger=de.getObjectByName("BumperKey"),oe.triggerPressed=de.getObjectByName("BumperKey_Press"),oe.triggerPressed&&(oe.triggerPressed.visible=!1),oe.trackpad=de.getObjectByName("TouchPad"),oe.trackpadPressed=de.getObjectByName("TouchPad_Press"),oe.trackpadPressed&&(oe.trackpadPressed.visible=!1))},onButtonChanged:function(te){var de=this.mapping.buttons[te.detail.id];de&&this.el.emit(de+"changed",te.detail.state)},onAxisMoved:function(te){K(this,this.mapping.axes,te)},updateModel:function(te,de){this.data.model&&this.updateButtonModel(te,de)},updateButtonModel:function(te,de){var oe=this.buttonMeshes,ye=te+"Pressed";if(!(!oe||!oe[te]||!oe[ye])){var Me;switch(de){case"down":Me=this.data.buttonHighlightColor;break;case"touchstart":Me=this.data.buttonTouchedColor;break}Me&&oe[ye].material.color.set(Me),oe[ye].visible=!!Me,oe[te].visible=!Me}}})},"./src/components/wasd-controls.js":(ie,we,P)=>{var p=P("./src/constants/index.js").keyboardevent.KEYCODE_TO_CODE,S=P("./src/core/component.js").registerComponent,z=P("./src/lib/three.js"),K=P("./src/utils/index.js"),D=K.shouldCaptureKeyEvent,Q=1e-5,V=.2,T=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];ie.exports.Component=S("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},after:["look-controls"],init:function(){this.keys={},this.easing=1.1,this.velocity=new z.Vector3,this.onBlur=this.onBlur.bind(this),this.onContextMenu=this.onContextMenu.bind(this),this.onFocus=this.onFocus.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onVisibilityChange=this.onVisibilityChange.bind(this),this.attachVisibilityEventListeners()},tick:function(N,k){var G=this.data,Z=this.el,ne=this.velocity;!ne[G.adAxis]&&!ne[G.wsAxis]&&F(this.keys)||(k=k/1e3,this.updateVelocity(k),!(!ne[G.adAxis]&&!ne[G.wsAxis])&&Z.object3D.position.add(this.getMovementVector(k)))},update:function(N){N.adAxis!==this.data.adAxis&&(this.velocity[N.adAxis]=0),N.wsAxis!==this.data.wsAxis&&(this.velocity[N.wsAxis]=0)},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(N){var k,G,Z,ne=this.data,te=this.keys,de=this.velocity,oe,ye;if(G=ne.adAxis,oe=ne.wsAxis,N>V){de[G]=0,de[oe]=0;return}var Me=Math.pow(1/this.easing,N*60);de[G]!==0&&(de[G]=de[G]*Me),de[oe]!==0&&(de[oe]=de[oe]*Me),Math.abs(de[G])<Q&&(de[G]=0),Math.abs(de[oe])<Q&&(de[oe]=0),ne.enabled&&(k=ne.acceleration,ne.adEnabled&&(Z=ne.adInverted?-1:1,(te.KeyA||te.ArrowLeft)&&(de[G]-=Z*k*N),(te.KeyD||te.ArrowRight)&&(de[G]+=Z*k*N)),ne.wsEnabled&&(ye=ne.wsInverted?-1:1,(te.KeyW||te.ArrowUp)&&(de[oe]-=ye*k*N),(te.KeyS||te.ArrowDown)&&(de[oe]+=ye*k*N)))},getMovementVector:function(){var N=new z.Vector3(0,0,0),k=new z.Euler(0,0,0,"YXZ");return function(G){var Z=this.el.getAttribute("rotation"),ne=this.velocity,te;return N.copy(ne),N.multiplyScalar(G),Z&&(te=this.data.fly?Z.x:0,k.set(z.MathUtils.degToRad(te),z.MathUtils.degToRad(Z.y),0),N.applyEuler(k)),N}}(),attachVisibilityEventListeners:function(){window.oncontextmenu=this.onContextMenu,window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onContextMenu:function(){for(var N=Object.keys(this.keys),k=0;k<N.length;k++)delete this.keys[N[k]]},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(N){var k;D(N)&&(k=N.code||p[N.keyCode],T.indexOf(k)!==-1&&(this.keys[k]=!0))},onKeyUp:function(N){var k;k=N.code||p[N.keyCode],delete this.keys[k]}});function F(N){var k;for(k in N)return!1;return!0}},"./src/components/windows-motion-controls.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/utils/tracked-controls.js"),z=S.checkControllerPresentAndSetup,K=S.emitIfAxesChanged,D=S.onButtonEvent,Q=P("./src/utils/index.js"),V=Q.debug("components:windows-motion-controls:debug"),T=Q.debug("components:windows-motion-controls:warn"),F=P("./src/constants/index.js").DEFAULT_HANDEDNESS,N=P("./src/constants/index.js").AFRAME_CDN_ROOT,k=N+"controllers/microsoft/",G={left:"left.glb",right:"right.glb",default:"universal.glb"},Z=P("./src/utils/index.js").device.isWebXRAvailable,ne="windows-mixed-reality",te="Spatial Controller (Spatial Interaction Source) ",de=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/,oe=Z?ne:te,ye={axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},Me={axes:{touchpad:[0,1],thumbstick:[2,3]},buttons:["trigger","squeeze","touchpad","thumbstick","menu"],axisMeshNames:["TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_X","THUMBSTICK_X","THUMBSTICK_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",squeeze:"GRASP",thumbstick:"THUMBSTICK_PRESS",touchpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},Ne=Z?Me:ye;ie.exports.Component=p("windows-motion-controls",{schema:{hand:{default:F},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},after:["tracked-controls"],mapping:Ne,bindMethods:function(){this.onModelError=this.onModelError.bind(this),this.onModelLoaded=this.onModelLoaded.bind(this),this.onControllersUpdate=this.onControllersUpdate.bind(this),this.checkIfControllerPresent=this.checkIfControllerPresent.bind(this),this.onAxisMoved=this.onAxisMoved.bind(this)},init:function(){var Pe=this,Qe=this.el;this.onButtonChanged=this.onButtonChanged.bind(this),this.onButtonDown=function(De){D(De.detail.id,"down",Pe)},this.onButtonUp=function(De){D(De.detail.id,"up",Pe)},this.onButtonTouchStart=function(De){D(De.detail.id,"touchstart",Pe)},this.onButtonTouchEnd=function(De){D(De.detail.id,"touchend",Pe)},this.onControllerConnected=function(){Pe.setModelVisibility(!0)},this.onControllerDisconnected=function(){Pe.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},Qe.addEventListener("controllerconnected",this.onControllerConnected),Qe.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var Pe=this.el;Pe.addEventListener("buttonchanged",this.onButtonChanged),Pe.addEventListener("buttondown",this.onButtonDown),Pe.addEventListener("buttonup",this.onButtonUp),Pe.addEventListener("touchstart",this.onButtonTouchStart),Pe.addEventListener("touchend",this.onButtonTouchEnd),Pe.addEventListener("axismove",this.onAxisMoved),Pe.addEventListener("model-error",this.onModelError),Pe.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var Pe=this.el;Pe.removeEventListener("buttonchanged",this.onButtonChanged),Pe.removeEventListener("buttondown",this.onButtonDown),Pe.removeEventListener("buttonup",this.onButtonUp),Pe.removeEventListener("touchstart",this.onButtonTouchStart),Pe.removeEventListener("touchend",this.onButtonTouchEnd),Pe.removeEventListener("axismove",this.onAxisMoved),Pe.removeEventListener("model-error",this.onModelError),Pe.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){z(this,oe,{hand:this.data.hand,index:this.data.pair,iterateControllerProfiles:!0})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh){this.modelReady();return}var Pe=this.createControllerModelUrl();this.loadModel(Pe)},createControllerModelUrl:function(Pe){var Qe=this.el.components["tracked-controls"],De=Qe?Qe.controller:null,ke="default",Ce=this.data.hand,fe;if(De&&!window.hasNativeWebXRImplementation&&(Ce=De.hand,!Pe)){var Oe=De.id.match(de);ke=Oe&&Oe[0]||ke}return fe=G[Ce]||G.default,k+ke+"/"+fe},injectTrackedControls:function(){var Pe=this.data;this.el.setAttribute("tracked-controls",{idPrefix:oe,controller:Pe.pair,hand:Pe.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(Pe){var Qe=this.createControllerModelUrl(!0);Pe.detail.src!==Qe?(T("Failed to load controller model for device, attempting to load default."),this.loadModel(Qe)):T("Failed to load default controller model.")},loadModel:function(Pe){this.el.setAttribute("gltf-model","url("+Pe+")")},onModelLoaded:function(Pe){var Qe=this.controllerModel=Pe.detail.model,De=this.loadedMeshInfo,ke,Ce,fe,Oe;if(Pe.target!==this.el)return;if(V("Processing model"),De.buttonMeshes={},De.axisMeshes={},Qe){for(ke=0;ke<this.mapping.buttons.length;ke++){if(Ce=this.mapping.buttonMeshNames[this.mapping.buttons[ke]],!Ce){V("Skipping unknown button at index: "+ke+" with mapped name: "+this.mapping.buttons[ke]);continue}if(fe=Qe.getObjectByName(Ce),!fe){T("Missing button mesh with name: "+Ce);continue}Oe={index:ke,value:Te(fe,"VALUE"),pressed:Te(fe,"PRESSED"),unpressed:Te(fe,"UNPRESSED")},Oe.value&&Oe.pressed&&Oe.unpressed?De.buttonMeshes[this.mapping.buttons[ke]]=Oe:T("Missing button submesh under mesh with name: "+Ce+"(VALUE: "+!!Oe.value+", PRESSED: "+!!Oe.pressed+", UNPRESSED:"+!!Oe.unpressed+")")}for(ke=0;ke<this.mapping.axisMeshNames.length;ke++){if(Ce=this.mapping.axisMeshNames[ke],!Ce){V("Skipping unknown axis at index: "+ke);continue}if(fe=Qe.getObjectByName(Ce),!fe){T("Missing axis mesh with name: "+Ce);continue}Oe={index:ke,value:Te(fe,"VALUE"),min:Te(fe,"MIN"),max:Te(fe,"MAX")},Oe.value&&Oe.min&&Oe.max?De.axisMeshes[ke]=Oe:T("Missing axis submesh under mesh with name: "+Ce+"(VALUE: "+!!Oe.value+", MIN: "+!!Oe.min+", MAX:"+!!Oe.max+")")}this.calculateRayOriginFromMesh(Qe),this.setModelVisibility()}V("Model load complete.");function Te(Ve,st){for(var dt=0,Mt=Ve.children.length;dt<Mt;dt++){var Rt=Ve.children[dt];if(Rt&&Rt.name===st)return Rt}}},calculateRayOriginFromMesh:function(){var Pe=new THREE.Quaternion;return function(Qe){var De;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,De=Qe.getObjectByName(this.mapping.pointingPoseMeshName),De){var ke=Qe.parent;ke&&(Qe.parent=null,Qe.updateMatrixWorld(!0),Qe.parent=ke),De.getWorldPosition(this.rayOrigin.origin),De.getWorldQuaternion(Pe),this.rayOrigin.direction.applyQuaternion(Pe),ke&&Qe.updateMatrixWorld(!0)}else V("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var Pe=new THREE.Quaternion;return function(Qe,De){var ke=this.loadedMeshInfo.axisMeshes[Qe];if(ke){var Ce=ke.min,fe=ke.max,Oe=ke.value,Te=De*.5+.5;Oe.setRotationFromQuaternion(Pe.copy(Ce.quaternion).slerp(fe.quaternion,Te)),Oe.position.lerpVectors(Ce.position,fe.position,Te)}}}(),lerpButtonTransform:function(){var Pe=new THREE.Quaternion;return function(Qe,De){var ke=this.loadedMeshInfo.buttonMeshes[Qe];if(ke){var Ce=ke.unpressed,fe=ke.pressed,Oe=ke.value;Oe.setRotationFromQuaternion(Pe.copy(Ce.quaternion).slerp(fe.quaternion,De)),Oe.position.lerpVectors(Ce.position,fe.position,De)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(Pe){var Qe=this.mapping.buttons[Pe.detail.id];Qe&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(Qe,Pe.detail.state.value),this.el.emit(Qe+"changed",Pe.detail.state))},onAxisMoved:function(Pe){var Qe=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var De=0;De<Qe;De++)this.lerpAxisTransform(De,Pe.detail.axis[De]||0);K(this,this.mapping.axes,Pe)},setModelVisibility:function(Pe){var Qe=this.el.getObject3D("mesh");this.controllerPresent&&(Pe=Pe!==void 0?Pe:this.modelVisible,this.modelVisible=Pe,Qe&&(Qe.visible=Pe))}})},"./src/constants/index.js":(ie,we,P)=>{ie.exports={AFRAME_CDN_ROOT:window.AFRAME_CDN_ROOT||"https://cdn.aframe.io/",AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",keyboardevent:P("./src/constants/keyboardevent.js")}},"./src/constants/keyboardevent.js":ie=>{ie.exports={KEYCODE_TO_CODE:{38:"ArrowUp",37:"ArrowLeft",40:"ArrowDown",39:"ArrowRight",87:"KeyW",65:"KeyA",83:"KeyS",68:"KeyD"}}},"./src/core/a-assets.js":(ie,we,P)=>{var p=P("./src/core/a-node.js").ANode,S=P("./src/utils/debug.js"),z=P("./src/lib/three.js"),K=new z.FileLoader,D=S("core:a-assets:warn");class Q extends p{constructor(){super(),this.isAssets=!0,this.fileLoader=K,this.timeout=null}doConnectedCallback(){var te=this,de,oe=[],ye,Me,Ne,Pe,Qe,De;if(super.doConnectedCallback(),!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(Pe=this.querySelectorAll("img"),de=0;de<Pe.length;de++)Ne=F(Pe[de]),oe.push(new Promise(function(ke,Ce){if(z.Cache.add(Pe[de].getAttribute("src"),Ne),Ne.complete){ke();return}Ne.onload=ke,Ne.onerror=Ce}));for(Me=this.querySelectorAll("audio, video"),de=0;de<Me.length;de++)ye=F(Me[de]),!ye.src&&!ye.srcObject&&D("Audio/video asset has neither `src` nor `srcObject` attributes."),oe.push(T(ye));De=this.getChildren(),De.forEach(function(ke){!ke.isAssetItem||!ke.hasAttribute("src")||oe.push(new Promise(function(fe,Oe){if(ke.hasLoaded)return fe();ke.addEventListener("loaded",fe),ke.addEventListener("error",Oe)}))}),Promise.allSettled(oe).then(function(){te.timeout!==null&&te.load()}),Qe=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){te.hasLoaded||(D("Asset loading timed out in",Qe,"ms"),te.timeout=null,te.emit("timeout"),te.load())},Qe)}disconnectedCallback(){super.disconnectedCallback(),this.timeout&&clearTimeout(this.timeout)}load(){super.load.call(this,null,function(){return!1})}}customElements.define("a-assets",Q);class V extends p{constructor(){super(),this.data=null,this.isAssetItem=!0}connectedCallback(){var te=this,de=this.getAttribute("src");K.setResponseType(this.getAttribute("response-type")||G(de)),K.load(de,function(ye){te.data=ye,p.prototype.load.call(te)},function(ye){te.emit("progress",{loadedBytes:ye.loaded,totalBytes:ye.total,xhr:ye})},function(ye){te.emit("error",{xhr:ye})})}}customElements.define("a-asset-item",V);function T(ne){if(!(!ne.hasAttribute("autoplay")&&ne.getAttribute("preload")!=="auto"))return new Promise(function(te,de){if(ne.readyState===4)return te();if(ne.error)return de();ne.addEventListener("loadeddata",oe,!1),ne.addEventListener("progress",oe,!1),ne.addEventListener("error",de,!1);function oe(){for(var ye=0,Me=0;Me<ne.buffered.length;Me++)ye+=ne.buffered.end(Me)-ne.buffered.start(Me);ye>=ne.duration&&(ne.tagName==="VIDEO"&&z.Cache.add(ne.getAttribute("src"),ne),te())}})}function F(ne){var te=N(ne);return te.tagName&&te.tagName.toLowerCase()==="video"&&(te.setAttribute("playsinline",""),te.setAttribute("webkit-playsinline","")),te!==ne&&(ne.parentNode.appendChild(te),ne.parentNode.removeChild(ne)),te}function N(ne){var te,de;return ne.hasAttribute("crossorigin")||(de=ne.getAttribute("src"),de!==null&&(de.indexOf("://")===-1||k(de)===window.location.host))?ne:(D('Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin="anonymous">)',de),ne.crossOrigin="anonymous",te=ne.cloneNode(!0),te)}function k(ne){var te=ne.indexOf("://")>-1?ne.split("/")[2]:ne.split("/")[0];return te.substring(0,te.indexOf(":"))}function G(ne){var te=Z(ne),de=te.lastIndexOf(".");if(de>=0){var oe=te.slice(de,ne.search(/\?|#|$/));if(oe===".glb")return"arraybuffer"}return"text"}ie.exports.inferResponseType=G;function Z(ne){var te=document.createElement("a");te.href=ne;var de=te.search.replace(/^\?/,""),oe=ne.replace(de,"").replace("?","");return oe.substring(oe.lastIndexOf("/")+1)}ie.exports.getFileNameFromURL=Z},"./src/core/a-cubemap.js":(ie,we,P)=>{var p=P("./src/utils/debug.js"),S=p("core:cubemap:warn");class z extends HTMLElement{constructor(D){return D=super(D),D}onReadyStateChange(){document.readyState==="complete"&&this.doConnectedCallback()}connectedCallback(){if(document.readyState!=="complete"){document.addEventListener("readystatechange",this.onReadyStateChange.bind(this));return}z.prototype.doConnectedCallback.call(this)}doConnectedCallback(){this.srcs=this.validate()}validate(){var D=this.querySelectorAll("[src]"),Q,V=[];if(D.length===6){for(Q=0;Q<D.length;Q++)D[Q].tagName==="IMG"?V.push(D[Q]):V.push(D[Q].getAttribute("src"));return V}S("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")}}customElements.define("a-cubemap",z)},"./src/core/a-entity.js":(ie,we,P)=>{var p=P("./src/core/a-node.js").ANode,S=P("./src/core/component.js").components,z=P("./src/lib/three.js"),K=P("./src/utils/index.js"),D=K.debug("core:a-entity:debug"),Q=K.debug("core:a-entity:warn"),V="__",T=["position","rotation","scale","visible"],F={once:!0};class N extends p{constructor(){super(),this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new z.Group,this.object3D.rotation.order="YXZ",this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}attributeChangedCallback(oe,ye,Me){var Ne=this.components[oe];if(super.attributeChangedCallback(),Ne&&Ne.justInitialized&&Me===""){delete Ne.justInitialized;return}!Ne&&Me===null||this.setEntityAttribute(oe,ye,Me)}doConnectedCallback(){var oe=this,ye,Me;if(super.doConnectedCallback(),Me=this.sceneEl,this.addToParent(),!this.isScene){if(!Me){this.load();return}if(ye=Me.querySelector("a-assets"),ye&&!ye.hasLoaded){ye.addEventListener("loaded",function(){oe.load()});return}this.load()}}disconnectedCallback(){var oe;if(this.parentEl){for(oe in this.components)this.removeComponent(oe,!1);this.isScene||(this.removeFromParent(),super.disconnectedCallback(),this.object3D.el=null)}}getObject3D(oe){return this.object3DMap[oe]}setObject3D(oe,ye){var Me,Ne=this;if(!(ye instanceof z.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");Me=this.getObject3D(oe),Me&&this.object3D.remove(Me),ye.el=this,ye.children.length&&ye.traverse(function(Qe){Qe.el=Ne}),this.object3D.add(ye),this.object3DMap[oe]=ye,this.emit("object3dset",{object:ye,type:oe})}removeObject3D(oe){var ye=this.getObject3D(oe);if(!ye){Q("Tried to remove `Object3D` of type:",oe,"which was not defined.");return}this.object3D.remove(ye),delete this.object3DMap[oe],this.emit("object3dremove",{type:oe})}getOrCreateObject3D(oe,ye){var Me=this.getObject3D(oe);return!Me&&ye&&(Me=new ye,this.setObject3D(oe,Me)),Q("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),Me}add(oe){if(!oe.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(oe.object3D),this.emit("child-attached",{el:oe})}addToParent(){var oe=this.parentEl=this.parentNode;!oe||!oe.add||this.attachedToParent||(oe.add(this),this.attachedToParent=!0)}removeFromParent(){var oe=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=null,oe.emit("child-detached",{el:this})}load(){var oe=this;this.hasLoaded||!this.parentEl||super.load.call(this,function(){oe.parentEl&&(oe.updateComponents(),(oe.isScene||oe.parentEl.isPlaying)&&oe.play())})}remove(oe){oe?this.object3D.remove(oe.object3D):this.parentNode.removeChild(this)}getChildEntities(){for(var oe=this.children,ye=[],Me=0;Me<oe.length;Me++){var Ne=oe[Me];Ne instanceof N&&ye.push(Ne)}return ye}initComponent(oe,ye,Me){var Ne,Pe,Qe,De,ke;Qe=K.split(oe,V),De=Qe[0],Pe=Qe.length>2?Qe.slice(1).join("__"):Qe[1],S[De]&&(ke=k(this,oe)||ye!==void 0,!(!ke&&!Me)&&(oe in this.components||(this.initComponentDependencies(De),Ne=new S[De].Component(this,ye,Pe),this.isPlaying&&Ne.play(),this.hasAttribute(oe)||(Ne.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,oe,"")),D("Component initialized: %s",oe))))}initComponentDependencies(oe){var ye=this,Me=S[oe],Ne,Pe;if(Me&&(Ne=S[oe].dependencies,!!Ne))for(Pe=0;Pe<Ne.length;Pe++)ye.initComponent(Ne[Pe],window.HTMLElement.prototype.getAttribute.call(ye,Ne[Pe])||void 0,!0)}removeComponent(oe,ye){var Me;if(Me=this.components[oe],!!Me){if(!Me.initialized){this.addEventListener("componentinitialized",function Ne(Pe){Pe.detail.name===oe&&(this.removeComponent(oe,ye),this.removeEventListener("componentinitialized",Ne))});return}Me.pause(),Me.remove(),ye&&(Me.destroy(),delete this.components[oe],this.hasAttribute(oe)&&window.HTMLElement.prototype.removeAttribute.call(this,oe)),this.emit("componentremoved",Me.evtDetail,!1)}}updateComponents(){var oe,ye,Me,Ne,Pe=this.componentsToUpdate;if(!(!this.hasLoaded&&!this.isLoading)){for(Me=0;Me<this.mixinEls.length;Me++)for(Ne in this.mixinEls[Me].componentCache)ne(Ne)&&(Pe[Ne]=!0);if(this.getExtraComponents){ye=this.getExtraComponents();for(Ne in ye)ne(Ne)&&(Pe[Ne]=!0)}for(Me=0;Me<this.attributes.length;++Me)Ne=this.attributes[Me].name,T.indexOf(Ne)===-1&&ne(Ne)&&(Pe[Ne]=!0);for(Me=0;Me<T.length;Me++)Ne=T[Me],this.hasAttribute(Ne)&&this.updateComponent(Ne,this.getDOMAttribute(Ne));for(Ne in Pe)oe=Z(this.getDOMAttribute(Ne),ye&&ye[Ne]),this.updateComponent(Ne,oe),delete Pe[Ne]}}updateComponent(oe,ye,Me){var Ne=this.components[oe];if(Ne){if(ye===null&&!k(this,oe)){this.removeComponent(oe,!0);return}Ne.updateProperties(ye,Me);return}this.initComponent(oe,ye,!1)}removeAttribute(oe,ye){var Me=this.components[oe];if(Me&&ye===void 0&&this.removeComponent(oe,!0),Me&&ye!==void 0){Me.resetProperty(ye);return}oe==="mixin"&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,oe)}play(){var oe,ye,Me;if(!(this.isPlaying||!this.hasLoaded&&!this.isLoading)){this.isPlaying=!0;for(Me in this.components)this.components[Me].play();for(oe=this.getChildEntities(),ye=0;ye<oe.length;ye++)oe[ye].play();this.emit("play")}}pause(){var oe,ye,Me;if(this.isPlaying){this.isPlaying=!1;for(Me in this.components)this.components[Me].pause();for(oe=this.getChildEntities(),ye=0;ye<oe.length;ye++)oe[ye].pause();this.emit("pause")}}setEntityAttribute(oe,ye,Me){if(S[oe]||this.components[oe]){this.updateComponent(oe,Me);return}if(oe==="mixin"){if(Me===this.computedMixinStr)return;this.mixinUpdate(Me,ye)}}mixinUpdate(oe,ye,Me){var Ne=N.componentsUpdated,Pe,Qe,De,ke,Ce=this;if(Me||(ye=ye||this.getAttribute("mixin")),!this.hasLoaded){this.addEventListener("loaded-private",function(){Ce.mixinUpdate(oe,ye,!0)},F);return}for(De=this.updateMixins(oe,ye),Ne.length=0,ke=0;ke<this.mixinEls.length;ke++)for(Pe in this.mixinEls[ke].componentCache)Ne.indexOf(Pe)===-1&&(this.components[Pe]?this.components[Pe].handleMixinUpdate():this.initComponent(Pe,null),Ne.push(Pe));for(ke=0;ke<De.oldMixinIds.length;ke++)if(Qe=document.getElementById(De.oldMixinIds[ke]),!!Qe)for(Pe in Qe.componentCache)Ne.indexOf(Pe)===-1&&this.components[Pe]&&(this.getDOMAttribute(Pe)?this.components[Pe].handleMixinUpdate():this.removeComponent(Pe,!0))}setAttribute(oe,ye,Me){var Ne=N.singlePropUpdate,Pe,Qe,De,ke,Ce,fe;if(ke=oe.indexOf(V),De=ke>0?oe.substring(0,ke):oe,!S[De]){oe==="mixin"&&this.mixinUpdate(ye),super.setAttribute.call(this,oe,ye);return}if(!this.components[oe]&&this.hasAttribute(oe)&&this.updateComponent(oe,window.HTMLElement.prototype.getAttribute.call(this,oe)),typeof Me<"u"&&typeof ye=="string"&&ye.length>0&&typeof K.styleParser.parse(ye)=="string"){for(fe in Ne)delete Ne[fe];Pe=Ne,Pe[ye]=Me,Qe=!1}else Pe=ye,Qe=Me===!0;this.updateComponent(oe,Pe,Qe),Ce=this.sceneEl&&this.sceneEl.getAttribute("debug"),Ce&&this.components[oe].flushToDOM()}flushToDOM(oe){var ye=this.components,Me,Ne=this.children,Pe,Qe;for(Qe in ye)ye[Qe].flushToDOM();if(oe)for(Pe=0;Pe<Ne.length;++Pe)Me=Ne[Pe],Me.flushToDOM&&Me.flushToDOM(oe)}getAttribute(oe){var ye;return oe==="position"?this.object3D.position:oe==="rotation"?te(this):oe==="scale"?this.object3D.scale:oe==="visible"?this.object3D.visible:(ye=this.components[oe],ye?ye.data:window.HTMLElement.prototype.getAttribute.call(this,oe))}getDOMAttribute(oe){var ye=this.components[oe];return ye?ye.attrValue:window.HTMLElement.prototype.getAttribute.call(this,oe)}addState(oe){this.is(oe)||(this.states.push(oe),this.emit("stateadded",oe))}removeState(oe){var ye=this.states.indexOf(oe);ye!==-1&&(this.states.splice(ye,1),this.emit("stateremoved",oe))}is(oe){return this.states.indexOf(oe)!==-1}inspect(){this.sceneEl.components.inspector.openInspector(this)}destroy(){var oe;if(this.parentNode){Q("Entity can only be destroyed if detached from scenegraph.");return}for(oe in this.components)this.components[oe].destroy()}}function k(de,oe){return de.components[oe]&&de.components[oe].attrValue?!0:G(oe,de.mixinEls)}function G(de,oe){var ye,Me=!1;for(ye=0;ye<oe.length&&(Me=oe[ye].hasAttribute(de),!Me);++ye);return Me}function Z(de,oe){return oe?oe.constructor===Object?K.extend(oe,K.styleParser.parse(de||{})):de||oe:de}function ne(de){return de.indexOf(V)!==-1&&(de=K.split(de,V)[0]),!!S[de]}function te(de){var oe=z.MathUtils.radToDeg,ye=de.object3D.rotation,Me=de.rotationObj;return Me.x=oe(ye.x),Me.y=oe(ye.y),Me.z=oe(ye.z),Me}N.componentsUpdated=[],N.singlePropUpdate={},customElements.define("a-entity",N),ie.exports.AEntity=N},"./src/core/a-mixin.js":(ie,we,P)=>{var p=P("./src/core/a-node.js").ANode,S=P("./src/core/component.js").components,z=P("./src/utils/index.js"),K=z.styleParser,D="__";class Q extends p{constructor(){super(),this.componentCache={},this.rawAttributeCache={},this.isMixin=!0}doConnectedCallback(){super.doConnectedCallback(),this.sceneEl=this.closestScene(),this.id=this.getAttribute("id"),this.cacheAttributes(),this.updateEntities(),this.load()}attributeChangedCallback(T,F,N){super.attributeChangedCallback(),this.cacheAttribute(T,N),this.updateEntities()}setAttribute(T,F){window.HTMLElement.prototype.setAttribute.call(this,T,F),this.cacheAttribute(T,F)}cacheAttribute(T,F){var N,k;k=z.split(T,D)[0],N=S[k],F===void 0&&(F=window.HTMLElement.prototype.getAttribute.call(this,T)),this.rawAttributeCache[T]=F,N&&(this.componentCache[T]=this.parseComponentAttrValue(N,F))}parseComponentAttrValue(T,F){var N;return typeof F!="string"?F:(T.isSingleProperty?(N=T.schema.parse(F),typeof N=="string"&&(N=F)):N=K.parse(F),N)}getAttribute(T){return this.componentCache[T]||window.HTMLElement.prototype.getAttribute.call(this,T)}cacheAttributes(){var T=this.attributes,F,N;for(N=0;N<T.length;N++)F=T[N].name,this.cacheAttribute(F)}updateEntities(){var T,F,N;if(this.sceneEl)for(F=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),N=0;N<F.length;N++)T=F[N],!(!T.hasLoaded||T.isMixin)&&T.mixinUpdate(this.id)}}customElements.define("a-mixin",Q)},"./src/core/a-node.js":(ie,we,P)=>{var p=P("./src/utils/index.js"),S=P("./src/core/readyState.js"),z=p.debug("core:a-node:warn"),K={"a-scene":!0,"a-assets":!0,"a-assets-items":!0,"a-cubemap":!0,"a-mixin":!0,"a-node":!0,"a-entity":!0};function D(V){return V.tagName.toLowerCase()in K||V.isNode}class Q extends HTMLElement{constructor(){super(),this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[]}connectedCallback(){if(!S.canInitializeElements){document.addEventListener("aframeready",this.connectedCallback.bind(this));return}this.doConnectedCallback()}doConnectedCallback(){var T;this.sceneEl=this.closestScene(),this.sceneEl||z("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(T=this.getAttribute("mixin"),T&&this.updateMixins(T))}attributeChangedCallback(T,F,N){N!==this.computedMixinStr&&T==="mixin"&&!this.isMixin&&this.updateMixins(N,F)}closestScene(){for(var T=this;T&&!T.isScene;)T=T.parentElement;return T}closest(T){for(var F=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,N=this;N&&!F.call(N,T);)N=N.parentElement;return N}disconnectedCallback(){this.hasLoaded=!1}load(T,F){var N,k,G=this;this.hasLoaded||(F=F||D,N=this.getChildren(),k=N.filter(F).map(function(Z){return new Promise(function(te,de){if(Z.hasLoaded)return te();Z.addEventListener("loaded",te),Z.addEventListener("error",de)})}),Promise.allSettled(k).then(function(ne){ne.forEach(function(de){de.status==="rejected"&&z("Rendering scene with errors on node: ",de.reason.target)}),G.isLoading=!0,G.setupMutationObserver(),T&&T(),G.isLoading=!1,G.hasLoaded=!0,G.emit("loaded-private",void 0,!1),G.emit("loaded",void 0,!1)}))}setupMutationObserver(){var T=this,F={attributes:!0,attributeOldValue:!0},N=new MutationObserver(function(G){var Z;for(Z=0;Z<G.length;Z++)if(G[Z].type==="attributes"){var ne=G[Z].attributeName,te=window.HTMLElement.prototype.getAttribute.call(T,ne),de=G[Z].oldValue;T.attributeChangedCallback(ne,de,te)}});N.observe(this,F)}getChildren(){return Array.prototype.slice.call(this.children,0)}updateMixins(T,F){var N=Q.newMixinIdArray,k=Q.oldMixinIdArray,G=Q.mixinIds,Z,ne,te;for(N.length=0,k.length=0,ne=T?p.split(T.trim(),/\s+/):N,te=F?p.split(F.trim(),/\s+/):k,G.newMixinIds=ne,G.oldMixinIds=te,Z=0;Z<te.length;Z++)ne.indexOf(te[Z])===-1&&this.unregisterMixin(te[Z]);for(this.computedMixinStr="",this.mixinEls.length=0,Z=0;Z<ne.length;Z++)this.registerMixin(ne[Z]);return this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr)),ne.length===0&&window.HTMLElement.prototype.removeAttribute.call(this,"mixin"),G}registerMixin(T){var F,N,k,G=document.getElementById(T);if(!G){z("No mixin was found with id `%s`",T);return}if(k=G.getAttribute("mixin"),k)for(F=p.split(k.trim(),/\s+/),N=0;N<F.length;N++)this.registerMixin(F[N]);this.computedMixinStr=this.computedMixinStr+" "+G.id,this.mixinEls.push(G)}setAttribute(T,F){T==="mixin"&&this.updateMixins(F),window.HTMLElement.prototype.setAttribute.call(this,T,F)}unregisterMixin(T){var F,N=this.mixinEls,k;for(F=0;F<N.length;++F)if(k=N[F],T===k.id){N.splice(F,1);break}}emit(T,F,N,k){var G=Q.evtData;N===void 0&&(N=!0),G.bubbles=!!N,G.detail=F,k&&(G=p.extend({},k,G)),this.dispatchEvent(new CustomEvent(T,G))}}Q.evtData={},Q.newMixinIdArray=[],Q.oldMixinIdArray=[],Q.mixinIds={},customElements.define("a-node",Q),ie.exports.ANode=Q,ie.exports.knownTags=K},"./src/core/component.js":(ie,we,P)=>{var p=P("./src/core/schema.js"),S=P("./src/core/scene/scenes.js"),z=P("./src/core/system.js"),K=P("./src/utils/index.js"),D=ie.exports.components={},Q=p.parseProperty,V=p.process,T=p.isSingleProperty,F=p.stringifyProperties,N=p.stringifyProperty,k=K.styleParser,G=K.debug("core:component:warn"),Z=document.currentScript,ne=new RegExp("[A-Z]+"),te={},de=Object.freeze({}),oe=[],ye={get:function(fe,Oe){return fe.getComputedPropertyValue(Oe)},set:function(fe,Oe,Te){return Oe in fe.schema?fe.recomputeProperty(Oe,Te):Te!==void 0&&fe.handleUnknownProperty(Oe,Te),!0}},Me=ie.exports.Component=function(fe,Oe,Te){var Ve=this;if(this.sceneOnly&&!fe.isScene)throw new Error("Component `"+this.name+"` can only be applied to <a-scene>");if(Te&&!this.multiple)throw new Error("Trying to initialize multiple components of type `"+this.name+"`. There can only be one component of this type per entity.");this.el=fe,this.id=Te,this.attrName=this.name+(Te?"__"+Te:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.objectPool=te[this.name];var st=this.events;this.events={},Ne(this,st),this.attrValue=void 0,this.isObjectBased?(this.data=this.objectPool.use(),K.objectPool.removeUnusedKeys(this.data,this.schema),this.oldData=this.objectPool.use(),K.objectPool.removeUnusedKeys(this.oldData,this.schema),this.attrValueProxy=new Proxy(this,ye)):(this.data=void 0,this.oldData=void 0,this.attrValueProxy=void 0),this.deferUnknownPropertyWarnings=!!this.updateSchema,this.silenceUnknownPropertyWarnings=!1,this.throttledEmitComponentChanged=K.throttleLeadingAndTrailing(function(){fe.emit("componentchanged",Ve.evtDetail,!1)},200),this.updateProperties(Oe,!0)};Me.prototype={schema:{},init:function(){},events:{},update:function(fe){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},stringify:function(fe){var Oe=this.schema;return typeof fe=="string"?fe:this.isSingleProperty?N(fe,Oe):(fe=F(fe,Oe),k.stringify(fe))},flushToDOM:function(fe){var Oe=fe?this.data:this.attrValue;Oe!=null&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(Oe))},updateProperties:function(fe,Oe){var Te=this.el;this.updateData(fe,Oe),!(!Te.hasLoaded&&!Te.isLoading)&&(this.initialized?this.callUpdateHandler():this.initComponent())},initComponent:function(){var fe=this.el,Oe;fe.initializingComponents[this.name]||(fe.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete fe.initializingComponents[this.name],Oe=this.isObjectBased?de:void 0,this.dataChanged=!1,this.storeOldData(),this.update(Oe),fe.isPlaying&&this.play(),fe.emit("componentinitialized",this.evtDetail,!1))},updateData:function(fe,Oe){if(this.isSingleProperty){this.recomputeProperty(void 0,fe);return}Oe?(K.objectPool.clearObject(this.attrValue),this.recomputeData(fe),this.schemaChangeRequired=!!this.updateSchema):typeof fe=="string"?k.parse(fe,this.attrValueProxy):K.extend(this.attrValueProxy,fe),this.updateSchemaIfNeeded(fe)},updateSchemaIfNeeded:function(fe){if(!this.schemaChangeRequired||!this.updateSchema){for(var Oe=0;Oe<oe.length;Oe++)G("Unknown property `"+oe[Oe]+"` for component `"+this.name+"`.");oe.length=0;return}oe.length=0,this.updateSchema(this.data),K.objectPool.removeUnusedKeys(this.data,this.schema),this.silenceUnknownPropertyWarnings=!0,this.recomputeData(fe),this.silenceUnknownPropertyWarnings=!1,this.schemaChangeRequired=!1},callUpdateHandler:function(){if(!(!this.isPositionRotationScale&&!this.dataChanged)){this.dataChanged=!1;var fe=this.oldData;this.oldDataInUse=!0,this.update(fe),fe!==this.oldData&&this.objectPool.recycle(fe),this.oldDataInUse=!1,this.storeOldData(),this.throttledEmitComponentChanged()}},handleMixinUpdate:function(){this.recomputeData(),this.updateSchemaIfNeeded(),this.callUpdateHandler()},resetProperty:function(fe){!this.isSingleProperty&&!(fe in this.schema)||(fe?this.attrValue[fe]=void 0:(this.isObjectBased&&this.objectPool.recycle(this.attrValue),this.attrValue=void 0),this.recomputeProperty(fe,void 0),this.updateSchemaIfNeeded(),this.callUpdateHandler())},extendSchema:function(fe){var Oe;Oe=K.extend({},D[this.name].schema),K.extend(Oe,fe),this.schema=V(Oe),this.el.emit("schemachanged",this.evtDetail)},getComputedPropertyValue:function(fe){var Oe=this.el.mixinEls,Te=this.attrValue&&fe?this.attrValue[fe]:this.attrValue;if(Te!==void 0)return Te;for(var Ve=Oe.length-1;Ve>=0;Ve--){var st=Oe[Ve].getAttribute(this.attrName);if(!(st===null||fe&&!(fe in st)))return fe?st[fe]:st}var dt=fe?this.schema[fe].default:this.schema.default;return dt},recomputeProperty:function(fe,Oe){var Te=fe?this.schema[fe]:this.schema;if(Oe!=null){this.attrValue===void 0&&this.isObjectBased&&(this.attrValue=this.objectPool.use());var Ve=fe?this.attrValue[fe]:this.attrValue;Ve=Te.isCacheable?Q(Oe,Te,Ve):Oe,typeof Ve=="string"&&(Ve=Oe===""?void 0:Oe),fe?this.attrValue[fe]=Ve:this.attrValue=Ve}this.oldDataInUse&&(this.oldData=this.objectPool.use(),K.objectPool.removeUnusedKeys(this.oldData,this.schema),this.storeOldData(),this.oldDataInUse=!1);var st=fe?this.oldData[fe]:this.oldData,dt=fe?this.data[fe]:this.data,Mt=Q(this.getComputedPropertyValue(fe),Te,dt);return Te.type==="array"&&!fe&&(Mt=K.clone(Mt)),Te.equals(Mt,st)||(this.dataChanged=!0,Te.schemaChange&&(this.schemaChangeRequired=!0)),fe?this.data[fe]=Mt:this.data=Mt,Mt},handleUnknownProperty:function(fe,Oe){this.attrValue===void 0&&(this.attrValue=this.objectPool.use()),this.attrValue[fe]=Oe,this.silenceUnknownPropertyWarnings||(this.deferUnknownPropertyWarnings?oe.push(fe):this.silenceUnknownPropertyWarnings||G("Unknown property `"+fe+"` for component `"+this.name+"`."))},storeOldData:function(){if(!this.isObjectBased){this.oldData=this.data;return}if(this.isSingleProperty){this.oldData=Q(this.data,this.schema,this.oldData);return}var fe;for(fe in this.schema)this.data[fe]!==void 0&&(this.data[fe]&&typeof this.data[fe]=="object"?this.oldData[fe]=Q(this.data[fe],this.schema[fe],this.oldData[fe]):this.oldData[fe]=this.data[fe])},recomputeData:function(fe){var Oe;if(this.isSingleProperty){this.recomputeProperty(void 0,fe);return}if(fe&&typeof fe=="object")for(Oe in this.schema)this.attrValueProxy[Oe]=fe[Oe];else for(Oe in this.schema)this.attrValueProxy[Oe]=void 0;typeof fe=="string"&&k.parse(fe,this.attrValueProxy);for(Oe in this.attrValue)this.attrValue[Oe]!==void 0&&oe.indexOf(Oe)!==-1&&(Oe in this.schema||G("Unknown property `"+Oe+"` for component `"+this.name+"`."))},eventsAttach:function(){var fe;this.eventsDetach();for(fe in this.events)this.el.addEventListener(fe,this.events[fe])},eventsDetach:function(){var fe;for(fe in this.events)this.el.removeEventListener(fe,this.events[fe])},destroy:function(){this.objectPool.recycle(this.attrValue),this.objectPool.recycle(this.data),this.objectPool.recycle(this.oldData),this.attrValue=this.data=this.oldData=this.attrValueProxy=void 0}};function Ne(fe,Oe){var Te;for(Te in Oe)fe.events[Te]=Oe[Te].bind(fe)}if(window.debug)var Pe=ie.exports.registrationOrderWarnings={};ie.exports.registerComponent=function(fe,Oe){var Te,Ve={},st,dt;if(document.currentScript&&document.currentScript!==Z&&S.forEach(function(Yt){Yt.hasLoaded||document.currentScript.compareDocumentPosition(Yt)!==Node.DOCUMENT_POSITION_FOLLOWING&&(G("The component `"+fe+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(Pe[fe]=!0))}),ne.test(fe)===!0&&G("The component name `"+fe+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+fe.toLowerCase()+"`"),fe.indexOf("__")!==-1)throw new Error("The component name `"+fe+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(Oe).forEach(function(Rt){Ve[Rt]={value:Oe[Rt],writable:!0}}),D[fe])throw new Error("The component `"+fe+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");Te=function(Rt,Yt,zt){Me.call(this,Rt,Yt,zt)},Te.prototype=Object.create(Me.prototype,Ve),Te.prototype.name=fe,Te.prototype.isPositionRotationScale=fe==="position"||fe==="rotation"||fe==="scale",Te.prototype.constructor=Te,Te.prototype.system=z&&z.systems[fe],Te.prototype.play=ke(Te.prototype.play),Te.prototype.pause=De(Te.prototype.pause),st=K.extend(V(Te.prototype.schema,Te.prototype.name)),Te.prototype.isSingleProperty=dt=T(Te.prototype.schema),Te.prototype.isObjectBased=!dt||dt&&(Ce(st.default)||Ce(Q(void 0,st))),te[fe]=K.objectPool.createPool(),D[fe]={Component:Te,dependencies:Te.prototype.dependencies,before:Te.prototype.before,after:Te.prototype.after,isSingleProperty:Te.prototype.isSingleProperty,isObjectBased:Te.prototype.isObjectBased,multiple:Te.prototype.multiple,sceneOnly:Te.prototype.sceneOnly,name:fe,schema:st,stringify:Te.prototype.stringify};for(var Mt=0;Mt<S.length;Mt++)S[Mt].emit("componentregistered",{name:fe},!1);return Te};function Qe(fe){return fe.tick||fe.tock}function De(fe){return function(){var Te=this.el.sceneEl;this.isPlaying&&(fe.call(this),this.isPlaying=!1,this.eventsDetach(),Qe(this)&&Te.removeBehavior(this))}}function ke(fe){return function(){var Te=this.el.sceneEl,Ve=this.el.isPlaying&&!this.isPlaying;!this.initialized||!Ve||(fe.call(this),this.isPlaying=!0,this.eventsAttach(),Qe(this)&&Te.addBehavior(this))}}function Ce(fe){return fe&&fe.constructor===Object&&!(fe instanceof window.HTMLElement)}},"./src/core/geometry.js":(ie,we,P)=>{var p=P("./src/core/schema.js"),S=p.process,z=ie.exports.geometries={},K=ie.exports.geometryNames=[],D=P("./src/lib/three.js"),Q=ie.exports.Geometry=function(){};Q.prototype={schema:{},init:function(V){return this.geometry=new D.BufferGeometry,this.geometry},update:function(V){}},ie.exports.registerGeometry=function(V,T){var F,N={};if(Object.keys(T).forEach(function(G){N[G]={value:T[G],writable:!0}}),z[V])throw new Error("The geometry `"+V+"` has been already registered");return F=function(){Q.call(this)},F.prototype=Object.create(Q.prototype,N),F.prototype.name=V,F.prototype.constructor=F,z[V]={Geometry:F,schema:S(F.prototype.schema)},K.push(V),F}},"./src/core/propertyTypes.js":(ie,we,P)=>{var p=P("./src/utils/coordinates.js"),S=P("./node_modules/debug/src/browser.js"),z=S("core:propertyTypes:warn"),K=ie.exports.propertyTypes={},D=/[,> .[\]:]/,Q=/url\((.+)\)/;V("audio","",k),V("array",[],T,F,N),V("asset","",k),V("boolean",!1,te),V("color","#FFF"),V("int",0,de),V("number",0,oe),V("map","",k),V("model","",k),V("selector",null,ye,Ne,ne,!1),V("selectorAll",null,Me,Pe,N,!1),V("src","",Qe),V("string",""),V("time",0,de),V("vec2",{x:0,y:0},De,p.stringify,p.equals),V("vec3",{x:0,y:0,z:0},De,p.stringify,p.equals),V("vec4",{x:0,y:0,z:0,w:1},De,p.stringify,p.equals);function V(fe,Oe,Te,Ve,st,dt){if(fe in K)throw new Error("Property type "+fe+" is already registered.");K[fe]={default:Oe,parse:Te||G,stringify:Ve||Z,equals:st||ne,isCacheable:dt!==!1}}ie.exports.registerPropertyType=V;function T(fe){if(Array.isArray(fe))return fe;if(!fe||typeof fe!="string")return[];return fe.split(",").map(Oe);function Oe(Te){return Te.trim()}}function F(fe){return fe.join(", ")}function N(fe,Oe){if(!Array.isArray(fe)||!Array.isArray(Oe))return fe===Oe;if(fe.length!==Oe.length)return!1;for(var Te=0;Te<fe.length;Te++)if(fe[Te]!==Oe[Te])return!1;return!0}function k(fe){var Oe,Te;if(typeof fe!="string")return fe;if(Te=fe.match(Q),Te)return Te[1];if(fe.charAt(0)==="#"){if(Oe=document.getElementById(fe.substring(1)),Oe)return Oe.tagName==="CANVAS"||Oe.tagName==="VIDEO"||Oe.tagName==="IMG"?Oe:Oe.getAttribute("src");z('"'+fe+'" asset not found.');return}return fe}function G(fe){return fe}function Z(fe){return fe===null?"null":fe.toString()}function ne(fe,Oe){return fe===Oe}function te(fe){return fe!=="false"&&fe!==!1}function de(fe){return parseInt(fe,10)}function oe(fe){return parseFloat(fe,10)}function ye(fe){return fe?typeof fe!="string"?fe:fe[0]==="#"&&!D.test(fe)?document.getElementById(fe.substring(1)):document.querySelector(fe):null}function Me(fe){return fe?typeof fe!="string"?fe:Array.prototype.slice.call(document.querySelectorAll(fe),0):null}function Ne(fe){return fe.getAttribute?"#"+fe.getAttribute("id"):Z(fe)}function Pe(fe){return fe instanceof Array?fe.map(function(Oe){return"#"+Oe.getAttribute("id")}).join(", "):Z(fe)}function Qe(fe){return z("`src` property type is deprecated. Use `asset` instead."),k(fe)}function De(fe,Oe,Te){return p.parse(fe,Oe,Te)}function ke(fe,Oe){return fe==="audio"&&typeof Oe!="string"||fe==="array"&&!Array.isArray(Oe)||fe==="asset"&&typeof Oe!="string"||fe==="boolean"&&typeof Oe!="boolean"||fe==="color"&&typeof Oe!="string"||fe==="int"&&typeof Oe!="number"||fe==="number"&&typeof Oe!="number"||fe==="map"&&typeof Oe!="string"||fe==="model"&&typeof Oe!="string"||fe==="selector"&&typeof Oe!="string"&&Oe!==null||fe==="selectorAll"&&typeof Oe!="string"&&Oe!==null||fe==="src"&&typeof Oe!="string"||fe==="string"&&typeof Oe!="string"||fe==="time"&&typeof Oe!="number"?!1:fe==="vec2"?Ce(Oe,2):fe==="vec3"?Ce(Oe,3):fe==="vec4"?Ce(Oe,4):!0}ie.exports.isValidDefaultValue=ke;function Ce(fe,Oe){if(fe===null)return!0;if(typeof fe!="object"||Object.keys(fe).length!==Oe)return!1;var Te=fe.x,Ve=fe.y,st=fe.z,dt=fe.w;return!(typeof Te!="number"||typeof Ve!="number"||Oe>2&&typeof st!="number"||Oe>3&&typeof dt!="number")}ie.exports.isValidDefaultCoordinate=Ce},"./src/core/readyState.js":ie=>{ie.exports.canInitializeElements=!1;function we(){if(document.readyState==="complete"){P();return}document.addEventListener("readystatechange",function p(){document.readyState==="complete"&&(document.removeEventListener("readystatechange",p),P())})}ie.exports.waitForDocumentReadyState=we;function P(){ie.exports.canInitializeElements||(ie.exports.canInitializeElements=!0,setTimeout(function(){document.dispatchEvent(new CustomEvent("aframeready"))}))}ie.exports.emitReady=P},"./src/core/scene/a-scene.js":(ie,we,P)=>{var p=P("./src/core/scene/metaTags.js").inject,S=P("./src/core/scene/wakelock.js"),z=P("./src/core/scene/loadingScreen.js"),K=P("./src/core/scene/scenes.js"),D=P("./src/core/system.js").systems,Q=P("./src/core/component.js").components,V=P("./src/lib/three.js"),T=P("./src/utils/index.js"),F=T.debug("core:a-scene:warn"),N=P("./src/core/a-entity.js").AEntity,k=P("./src/core/a-node.js").ANode,G=P("./src/core/scene/postMessage.js"),Z=T.device.isIOS(),ne=T.device.isMobile(),te=T.device.isWebXRAvailable;Z&&P("./src/utils/ios-orientationchange-blank-bug.js");class de extends N{constructor(){var Ce;super(),Ce=this,Ce.clock=new V.Clock,Ce.isIOS=Z,Ce.isMobile=ne,Ce.hasWebXR=te,Ce.isAR=!1,Ce.isScene=!0,Ce.object3D=new V.Scene,Ce.object3D.onAfterRender=function(fe,Oe,Te){Ce.isPlaying&&Ce.tock(Ce.time,Ce.delta,Te)},Ce.resize=Ce.resize.bind(Ce),Ce.render=Ce.render.bind(Ce),Ce.systems={},Ce.systemNames=[],Ce.time=Ce.delta=0,Ce.usedOfferSession=!1,Ce.componentOrder=[],Ce.behaviors={},Ce.hasLoaded=!1,Ce.isPlaying=!1,Ce.originalHTML=Ce.innerHTML}addFullScreenStyles(){document.documentElement.classList.add("a-fullscreen")}removeFullScreenStyles(){document.documentElement.classList.remove("a-fullscreen")}doConnectedCallback(){var Ce=this,fe=this.hasAttribute("embedded");this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("xr-mode-ui",""),this.setAttribute("device-orientation-permission-ui",""),super.doConnectedCallback(),De(this),this.setupRenderer(),z.setup(this,Me),this.resize(),fe||this.addFullScreenStyles(),G(this),p(this),S(this),this.onVRPresentChangeBound=this.onVRPresentChange.bind(this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){Ce.enterVR()},this.exitVRBound=function(){Ce.exitVR()},this.exitVRTrueBound=function(){Ce.exitVR(!0)},this.pointerRestrictedBound=function(){Ce.pointerRestricted()},this.pointerUnrestrictedBound=function(){Ce.pointerUnrestricted()},Ce.hasWebXR||(window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)),window.addEventListener("sessionend",this.resize),this.addEventListener("cameraready",function(){Ce.attachedCallbackPostCamera()}),this.initSystems(),this.componentOrder=oe(Q,this.componentOrder),this.addEventListener("componentregistered",function(){Ce.componentOrder=oe(Q,Ce.componentOrder)}),this.hasWebXR&&navigator.xr&&navigator.xr.addEventListener&&navigator.xr.addEventListener("sessiongranted",function(){Ce.enterVR()})}attachedCallbackPostCamera(){var Ce,fe=this;window.addEventListener("load",Ce),window.addEventListener("resize",function(){fe.isIOS?setTimeout(fe.resize,100):fe.resize()}),this.play(),K.push(this)}initSystems(){var Ce;this.initSystem("camera");for(Ce in D)Ce!=="camera"&&this.initSystem(Ce)}initSystem(Ce){this.systems[Ce]||(this.systems[Ce]=new D[Ce](this),this.systemNames.push(Ce))}disconnectedCallback(){var Ce=K.indexOf(this);super.disconnectedCallback(),K.splice(Ce,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound),window.removeEventListener("sessionend",this.resize),this.renderer.dispose()}addBehavior(Ce){var fe,Oe=this.behaviors[Ce.name],Te;Oe||(Oe=this.behaviors[Ce.name]={tick:{inUse:!1,array:[],markedForRemoval:[]},tock:{inUse:!1,array:[],markedForRemoval:[]}});for(Te in Oe)if(Ce[Te]){if(fe=Oe[Te],fe.inUse){var Ve=fe.markedForRemoval.indexOf(Ce);Ve!==-1&&fe.markedForRemoval.splice(Ve,1)}fe.array.indexOf(Ce)===-1&&fe.array.push(Ce)}}getPointerLockElement(){return document.pointerLockElement}checkHeadsetConnected(){return T.device.checkHeadsetConnected()}enterAR(){var Ce;if(!this.hasWebXR)throw Ce="Failed to enter AR mode, WebXR not supported.",new Error(Ce);if(!T.device.checkARSupport())throw Ce="Failed to enter AR, WebXR immersive-ar mode not supported in your browser or device.",new Error(Ce);return this.enterVR(!0)}enterVR(Ce,fe){var Oe=this,Te,Ve=Oe.renderer.xr,st;if(fe&&(!navigator.xr||!navigator.xr.offerSession))return Promise.resolve("OfferSession is not supported.");if(Oe.usedOfferSession&&fe)return Promise.resolve("OfferSession was already called.");if(this.is("vr-mode"))return Promise.resolve("Already in VR.");if(this.checkHeadsetConnected()||this.isMobile){var dt=Oe.getAttribute("renderer");if(Ve.enabled=!0,this.hasWebXR){this.xrSession&&this.xrSession.removeEventListener("end",this.exitVRBound);var Mt=this.sceneEl.systems.webxr.sessionReferenceSpaceType;Ve.setReferenceSpaceType(Mt);var Rt=Ce?"immersive-ar":"immersive-vr";return st=this.sceneEl.systems.webxr.sessionConfiguration,new Promise(function(ci,Qi){var sn=fe?navigator.xr.offerSession.bind(navigator.xr):navigator.xr.requestSession.bind(navigator.xr);Oe.usedOfferSession|=fe,sn(Rt,st).then(function(Xn){fe&&(Oe.usedOfferSession=!1),Ve.layersEnabled=st.requiredFeatures.indexOf("layers")!==-1,Ve.setSession(Xn).then(function(){Ve.setFoveation(dt.foveationLevel),Oe.xrSession=Xn,Oe.systems.renderer.setWebXRFrameRate(Xn),Xn.addEventListener("end",Oe.exitVRBound),zt(ci)})},function(Xn){var tr=Rt==="immersive-ar",Jn=tr?"AR":"VR";Qi(new Error("Failed to enter "+Jn+" mode (`requestSession`)",{cause:Xn}))})})}else{if(Te=T.device.getVRDisplay(),Ve.setDevice(Te),Te.isPresenting&&!window.hasNativeWebVRImplementation)return zt(),Promise.resolve();var Yt={highRefreshRate:dt.highRefreshRate};return Te.requestPresent([{source:this.canvas,attributes:Yt}]).then(zt,Ci)}}return zt(),Promise.resolve();function zt(ci){var Qi;window.hasNativeWebVRImplementation&&!window.hasNativeWebXRImplementation&&(Qi=new CustomEvent("vrdisplaypresentchange",{detail:{display:T.device.getVRDisplay()}}),window.dispatchEvent(Qi)),Ce?Oe.addState("ar-mode"):Oe.addState("vr-mode"),Oe.emit("enter-vr",{target:Oe}),!Oe.hasWebXR&&Oe.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),Oe.addFullScreenStyles(),!Oe.isMobile&&!Oe.checkHeadsetConnected()&&Pe(Oe.canvas),Oe.resize(),ci&&ci()}function Ci(ci){throw Oe.removeState("vr-mode"),ci&&ci.message?new Error("Failed to enter VR mode (`requestPresent`): "+ci.message):new Error("Failed to enter VR mode (`requestPresent`).")}}exitVR(){var Ce=this,fe,Oe=this.renderer.xr;if(!this.is("vr-mode")&&!this.is("ar-mode"))return Promise.resolve("Not in immersive mode.");if(this.checkHeadsetConnected()||this.isMobile){if(Oe.enabled=!1,fe=T.device.getVRDisplay(),this.hasWebXR)this.xrSession.removeEventListener("end",this.exitVRBound),this.xrSession.end().then(function(){},function(){}),this.xrSession=void 0;else if(fe.isPresenting)return fe.exitPresent().then(Te,Ve)}else Qe();return Te(),Promise.resolve();function Te(){Ce.removeState("vr-mode"),Ce.removeState("ar-mode"),Ce.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),Ce.hasAttribute("embedded")&&Ce.removeFullScreenStyles(),Ce.resize(),Ce.isIOS&&T.forceCanvasResizeSafariMobile(Ce.canvas),Ce.renderer.setPixelRatio(window.devicePixelRatio),Ce.emit("exit-vr",{target:Ce})}function Ve(st){throw st&&st.message?new Error("Failed to exit VR mode (`exitPresent`): "+st.message):new Error("Failed to exit VR mode (`exitPresent`).")}}pointerRestricted(){if(this.canvas){var Ce=this.getPointerLockElement();Ce&&Ce!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}pointerUnrestricted(){var Ce=this.getPointerLockElement();Ce&&Ce===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}onVRPresentChange(Ce){var fe=Ce.display||Ce.detail.display;if(fe&&fe.isPresenting){this.enterVR();return}this.exitVR()}getAttribute(Ce){var fe=this.systems[Ce];return fe?fe.data:N.prototype.getAttribute.call(this,Ce)}getDOMAttribute(Ce){var fe=this.systems[Ce];return fe?fe.data:N.prototype.getDOMAttribute.call(this,Ce)}setAttribute(Ce,fe,Oe){if(D[Ce]){k.prototype.setAttribute.call(this,Ce,fe);var Te=this.systems[Ce];Te&&Te.updateProperties(fe);return}N.prototype.setAttribute.call(this,Ce,fe,Oe)}removeBehavior(Ce){var fe,Oe,Te=this.behaviors[Ce.name],Ve;for(Oe in Te)Ce[Oe]&&(fe=Te[Oe],Ve=fe.array.indexOf(Ce),Ve!==-1&&(fe.inUse?fe.markedForRemoval.indexOf(Ce)===-1&&fe.markedForRemoval.push(Ce):(fe.array[Ve]=fe.array[fe.array.length-1],fe.array.pop())))}resize(){var Ce=this.camera,fe=this.canvas,Oe,Te,Ve,st=this.renderer.xr.isPresenting;Te=this.renderer.xr.enabled&&st,!(!Ce||!fe||this.is("vr-mode")&&(this.isMobile||Te))&&(Oe=this.getAttribute("embedded")&&!this.is("vr-mode"),Ve=Me(fe,Oe,this.maxCanvasSize,this.is("vr-mode")),Ce.aspect=Ve.width/Ve.height,Ce.updateProjectionMatrix(),this.renderer.setSize(Ve.width,Ve.height,!1),this.emit("rendererresize",null,!1))}setupRenderer(){var Ce=this,fe,Oe,Te,Ve;Ve={alpha:!0,antialias:!ne,canvas:this.canvas,logarithmicDepthBuffer:!1,powerPreference:"high-performance"},this.maxCanvasSize={height:-1,width:-1},this.hasAttribute("renderer")&&(Te=this.getAttribute("renderer"),Oe=T.styleParser.parse(Te),Oe.precision&&(Ve.precision=Oe.precision+"p"),Oe.antialias&&Oe.antialias!=="auto"&&(Ve.antialias=Oe.antialias==="true"),Oe.logarithmicDepthBuffer&&Oe.logarithmicDepthBuffer!=="auto"&&(Ve.logarithmicDepthBuffer=Oe.logarithmicDepthBuffer==="true"),Oe.alpha&&(Ve.alpha=Oe.alpha==="true"),Oe.stencil&&(Ve.stencil=Oe.stencil==="true"),Oe.multiviewStereo&&(Ve.multiviewStereo=Oe.multiviewStereo==="true"),this.maxCanvasSize={width:Oe.maxCanvasWidth?parseInt(Oe.maxCanvasWidth):this.maxCanvasSize.width,height:Oe.maxCanvasHeight?parseInt(Oe.maxCanvasHeight):this.maxCanvasSize.height}),fe=this.renderer=new V.WebGLRenderer(Ve),fe.setPixelRatio(window.devicePixelRatio),this.camera&&fe.xr.setPoseTarget(this.camera.el.object3D),this.addEventListener("camera-set-active",function(){fe.xr.setPoseTarget(Ce.camera.el.object3D)})}play(){var Ce=this,fe=this;if(this.renderStarted){N.prototype.play.call(this);return}this.addEventListener("loaded",function(){var Oe=this.renderer,Te,Ve=this.renderer.xr;N.prototype.play.call(this),!fe.renderStarted&&(fe.resize(),fe.renderer&&(window.performance&&window.performance.mark("render-started"),z.remove(),Te=T.device.getVRDisplay(),Te&&Te.isPresenting&&(Ve.setDevice(Te),Ve.enabled=!0,fe.enterVR()),Oe.setAnimationLoop(this.render),fe.renderStarted=!0,fe.emit("renderstart")))}),setTimeout(function(){N.prototype.load.call(Ce)})}updateComponent(Ce){Ce in D||N.prototype.updateComponent.apply(this,arguments)}tick(Ce,fe){var Oe,Te=this.systems;for(this.callComponentBehaviors("tick",Ce,fe),Oe=0;Oe<this.systemNames.length;Oe++)Te[this.systemNames[Oe]].tick&&Te[this.systemNames[Oe]].tick(Ce,fe)}tock(Ce,fe,Oe){var Te,Ve=this.systems;for(this.callComponentBehaviors("tock",Ce,fe),Te=0;Te<this.systemNames.length;Te++)Ve[this.systemNames[Te]].tock&&Ve[this.systemNames[Te]].tock(Ce,fe,Oe)}render(Ce,fe){var Oe=this.renderer;this.frame=fe,this.delta=this.clock.getDelta()*1e3,this.time=this.clock.elapsedTime*1e3,this.isPlaying&&this.tick(this.time,this.delta);var Te=null;this.is("ar-mode")&&(Te=this.object3D.background,this.object3D.background=null),Oe.render(this.object3D,this.camera),Te&&(this.object3D.background=Te)}callComponentBehaviors(Ce,fe,Oe){for(var Te,Ve=0;Ve<this.componentOrder.length;Ve++){var st=this.behaviors[this.componentOrder[Ve]];if(st){var dt=st[Ce];for(dt.inUse=!0,Te=0;Te<dt.array.length;Te++)dt.array[Te].isPlaying&&dt.array[Te][Ce](fe,Oe);for(dt.inUse=!1,Te=0;Te<dt.markedForRemoval.length;Te++)this.removeBehavior(dt.markedForRemoval[Te]);dt.markedForRemoval.length=0}}}}function oe(ke,Ce){var fe={},Oe,Te,Ve=Ce||[];Ve.length=0;for(Te in ke){var st=ke[Te];if(st!==void 0){var dt=st.before?st.before.slice(0):[],Mt=st.after?st.after.slice(0):[];fe[Te]={before:dt,after:Mt,visited:!1,done:!1}}}for(Te in fe)for(Oe=0;Oe<fe[Te].before.length;Oe++){var Rt=fe[Te].before[Oe];if(!(Rt in fe)){F("Invalid ordering constraint, no component named `"+Rt+"` referenced by `"+Te+"`");continue}fe[Rt].after.push(Te)}function Yt(zt){if(!(!(zt in fe)||fe[zt].done)){if(fe[zt].visited){F("Cycle detected, ignoring one or more before/after constraints. The resulting order might be incorrect");return}fe[zt].visited=!0;for(var Ci=0;Ci<fe[zt].after.length;Ci++){var ci=fe[zt].after[Ci];ci in fe||F("Invalid before/after constraint, no component named `"+ci+"` referenced in `"+zt+"`"),Yt(ci)}fe[zt].done=!0,Ve.push(zt)}}for(Te in fe)fe[Te].done||Yt(Te);return Ve}ie.exports.determineComponentBehaviorOrder=oe;function ye(ke,Ce){var fe,Oe=window.devicePixelRatio;return!Ce||Ce.width===-1&&Ce.height===-1||ke.width*Oe<Ce.width&&ke.height*Oe<Ce.height||(fe=ke.width/ke.height,ke.width*Oe>Ce.width&&Ce.width!==-1&&(ke.width=Math.round(Ce.width/Oe),ke.height=Math.round(Ce.width/fe/Oe)),ke.height*Oe>Ce.height&&Ce.height!==-1&&(ke.height=Math.round(Ce.height/Oe),ke.width=Math.round(Ce.height*fe/Oe))),ke}customElements.define("a-scene",de);function Me(ke,Ce,fe,Oe){if(!ke.parentElement)return{height:0,width:0};if(Ce){var Te;return Te={height:ke.parentElement.offsetHeight,width:ke.parentElement.offsetWidth},ye(Te,fe)}return Ne(fe,Oe)}function Ne(ke,Ce){var fe;return fe={height:document.body.offsetHeight,width:document.body.offsetWidth},Ce?fe:ye(fe,ke)}function Pe(ke){var Ce=ke.requestFullscreen||ke.webkitRequestFullscreen||ke.mozRequestFullScreen||ke.msRequestFullscreen;Ce.apply(ke,[{navigationUI:"hide"}])}function Qe(){var ke=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement;ke&&(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen())}function De(ke){var Ce;Ce=document.createElement("canvas"),Ce.classList.add("a-canvas"),Ce.dataset.aframeCanvas=!0,ke.appendChild(Ce),document.addEventListener("fullscreenchange",fe),document.addEventListener("mozfullscreenchange",fe),document.addEventListener("webkitfullscreenchange",fe),document.addEventListener("MSFullscreenChange",fe),Ce.addEventListener("touchmove",function(Oe){Oe.preventDefault()},{passive:!1}),ke.canvas=Ce,ke.emit("render-target-loaded",{target:Ce}),setTimeout(ke.resize.bind(ke),0);function fe(){var Oe=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement;Oe||ke.exitVR(),document.activeElement.blur(),document.body.focus()}}ie.exports.setupCanvas=De,ie.exports.AScene=de},"./src/core/scene/loadingScreen.js":(ie,we,P)=>{var p=P("./src/utils/index.js"),S=p.styleParser,z,K,D,Q="loading-screen",V="a-loader-title";ie.exports.setup=function(k,G){z=k,D=G;var Z=z.hasAttribute(Q)?S.parse(z.getAttribute(Q)):void 0,ne=Z&&Z.dotsColor||"white",te=Z&&Z.backgroundColor||"#24CAFF",de=Z===void 0||Z.enabled==="true"||Z.enabled===void 0,oe,ye,Me,Ne,Pe,Qe,De,ke,Ce,fe;de&&(oe=new THREE.Scene,ye=new THREE.SphereGeometry(.2,36,18,0,2*Math.PI,0,Math.PI),Me=new THREE.MeshBasicMaterial({color:ne}),Ne=new THREE.Mesh(ye,Me),Pe=Ne.clone(),Qe=Ne.clone(),De=new THREE.PerspectiveCamera(80,window.innerWidth/window.innerHeight,5e-4,1e4),ke=new THREE.Clock,Ce=0,fe=function(){z.renderer.render(oe,De),Ce=ke.getElapsedTime()%4,Ne.visible=Ce>=1,Pe.visible=Ce>=2,Qe.visible=Ce>=3},oe.background=new THREE.Color(te),oe.add(De),Ne.position.set(-1,0,-15),Pe.position.set(0,0,-15),Qe.position.set(1,0,-15),De.add(Ne),De.add(Pe),De.add(Qe),F(),setTimeout(function(){z.hasLoaded||(T(De),K.style.display="block",window.addEventListener("resize",function(){T(De)}),z.renderer.setAnimationLoop(fe))},200))},ie.exports.remove=function(){window.removeEventListener("resize",T),K&&(K.style.display="none")};function T(N){var k=z.hasAttribute("embedded"),G=D(z.canvas,k,z.maxCanvasSize,z.is("vr-mode"));N.aspect=G.width/G.height,N.updateProjectionMatrix(),z.renderer.setSize(G.width,G.height,!1)}function F(){K=document.createElement("div"),K.className=V,K.innerHTML=document.title,K.style.display="none",z.appendChild(K)}},"./src/core/scene/metaTags.js":(ie,we,P)=>{var p=P("./src/constants/index.js"),S=P("./src/utils/index.js").extend,z=ie.exports.MOBILE_HEAD_TAGS=[D({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui,viewport-fit=cover"}),D({name:"mobile-web-app-capable",content:"yes"}),D({name:"theme-color",content:"black"})],K=[D({name:"apple-mobile-web-app-capable",content:"yes"}),D({name:"apple-mobile-web-app-status-bar-style",content:"black"}),Q({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];function D(T){return{tagName:"meta",attributes:T,exists:function(){return document.querySelector('meta[name="'+T.name+'"]')}}}function Q(T){return{tagName:"link",attributes:T,exists:function(){return document.querySelector('link[rel="'+T.rel+'"]')}}}ie.exports.inject=function(F){var N=document.head,k=N.querySelector("script"),G,Z=[];return z.forEach(ne),F.isIOS&&K.forEach(ne),Z;function ne(te){!te||te.exists()||(G=V(te),G&&(k?k.parentNode.insertBefore(G,k):N.appendChild(G),Z.push(G)))}};function V(T){if(!(!T||!T.tagName)){var F=document.createElement(T.tagName);return F.setAttribute(p.AFRAME_INJECTED,""),S(F,T.attributes)}}},"./src/core/scene/postMessage.js":(ie,we,P)=>{var p=P("./src/utils/index.js").isIframed;ie.exports=function(K){p()&&window.addEventListener("message",S.bind(K))};function S(z){var K=this;if(z.data)switch(z.data.type){case"vr":switch(z.data.data){case"enter":K.enterVR();break;case"exit":K.exitVR();break}}}},"./src/core/scene/scenes.js":ie=>{ie.exports=[]},"./src/core/scene/wakelock.js":(ie,we,P)=>{var p=P("./vendor/wakelock/wakelock.js");ie.exports=function(z){if(z.isMobile){var K=z.wakelock=new p;z.addEventListener("enter-vr",function(){K.request()}),z.addEventListener("exit-vr",function(){K.release()})}}},"./src/core/schema.js":(ie,we,P)=>{var p=P("./src/utils/index.js"),S=P("./src/core/propertyTypes.js"),z=p.debug,K=S.isValidDefaultValue,D=S.propertyTypes,Q=z("core:schema:warn");function V(k){return"type"in k?typeof k.type=="string":"default"in k}ie.exports.isSingleProperty=V,ie.exports.process=function(k,G){var Z;if(V(k))return T(k,G);for(Z in k)k[Z]=T(k[Z],G);return k};function T(k,G){var Z=k.default,ne,te,de=k.type;return k.type?k.type==="bool"?de="boolean":k.type==="float"&&(de="number"):Z!==void 0&&(typeof Z=="boolean"||typeof Z=="number")?de=typeof Z:Array.isArray(Z)?de="array":de="string",te=D[de],te||Q("Unknown property type for component `"+G+"`: "+de),ne=!!k.parse,k.parse=k.parse||te.parse,k.stringify=k.stringify||te.stringify,k.equals=k.equals||te.equals,k.isCacheable=k.isCacheable===!0||te.isCacheable,k.type=de,"default"in k?!ne&&!K(de,Z)&&Q("Default value `"+Z+"` does not match type `"+de+"` in component `"+G+"`"):k.default=te.default,k}ie.exports.processPropertyDefinition=T,ie.exports.parseProperties=function(){var k=[];return function(G,Z,ne,te,de){var oe,ye,Me,Ne;k.length=0;for(ye in ne?G:Z)ne&&G[ye]===void 0||k.push(ye);if(G===null||typeof G!="object")return G;for(ye in G)G[ye]!==void 0&&!Z[ye]&&!de&&Q("Unknown property `"+ye+"` for component/system `"+te+"`.");for(oe=0;oe<k.length;oe++){if(ye=k[oe],Me=Z[ye],Ne=G[ye],!Z[ye])return;G[ye]=F(Ne,Me)}return G}}();function F(k,G,Z){return(k==null||k==="")&&(k=G.default,Array.isArray(k)&&(k=k.slice())),G.parse(k,G.default,Z)}ie.exports.parseProperty=F,ie.exports.stringifyProperties=function(k,G){var Z,ne,te,de={},oe;for(Z in k)ne=G[Z],te=k[Z],oe=te,typeof oe=="object"&&(oe=N(te,ne),ne||Q("Unknown component property: "+Z)),de[Z]=oe;return de};function N(k,G){return typeof k!="object"?k:!G||k===null?JSON.stringify(k):G.stringify(k)}ie.exports.stringifyProperty=N},"./src/core/shader.js":(ie,we,P)=>{var p=P("./src/core/schema.js"),S=p.process,z=ie.exports.shaders={},K=ie.exports.shaderNames=[],D=P("./src/lib/three.js"),Q=P("./src/utils/index.js"),V={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},T=ie.exports.Shader=function(){};T.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(F){return this.uniforms=this.initUniforms(),this.material=new(this.raw?D.RawShaderMaterial:D.ShaderMaterial)({uniforms:this.uniforms,glslVersion:this.raw||this.glsl3?D.GLSL3:null,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initUniforms:function(){var F,N=this.schema,k={},G;for(F in N)N[F].is==="uniform"&&(G=V[N[F].type],k[F]={type:G,value:void 0});return k},update:function(F){var N,k,G=this.schema,Z=this.uniforms;for(N in F)if(!(!G[N]||G[N].is!=="uniform")){if(G[N].type==="map"){if(!Z[N]||Z[N].value===F[N])continue;k="_texture_"+N,this.setMapOnTextureLoad(Z,N,k),Q.material.updateMapMaterialFromData(k,N,this,F);continue}Z[N].value=this.parseValue(G[N].type,F[N]),Z[N].needsUpdate=!0}},parseValue:function(F,N){var k;switch(F){case"vec2":return new D.Vector2(N.x,N.y);case"vec3":return new D.Vector3(N.x,N.y,N.z);case"vec4":return new D.Vector4(N.x,N.y,N.z,N.w);case"color":return k=new D.Color(N),new D.Vector3(k.r,k.g,k.b);default:return N}},setMapOnTextureLoad:function(F,N,k){var G=this;this.el.addEventListener("materialtextureloaded",function(){F[N].value=G.material[k],F[N].needsUpdate=!0})}},ie.exports.registerShader=function(F,N){var k,G={};if(Object.keys(N).forEach(function(Z){G[Z]={value:N[Z],writable:!0}}),z[F])throw new Error("The shader "+F+" has already been registered");return k=function(){T.call(this)},k.prototype=Object.create(T.prototype,G),k.prototype.name=F,k.prototype.constructor=k,z[F]={Shader:k,schema:S(k.prototype.schema)},K.push(F),k}},"./src/core/system.js":(ie,we,P)=>{var p=P("./src/core/component.js"),S=P("./src/core/schema.js"),z=P("./src/utils/index.js"),K=P("./src/core/readyState.js"),D=S.parseProperties,Q=S.parseProperty,V=S.process,T=S.isSingleProperty,F=z.styleParser,N=ie.exports.systems={},k=ie.exports.System=function(G){var Z=p&&p.components[this.name];this.el=G,this.sceneEl=G,Z&&(Z.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};k.prototype={schema:{},init:function(){},update:function(G){},updateProperties:function(G){var Z=this.data;Object.keys(S).length&&(this.buildData(G),this.update(Z))},buildData:function(G){var Z=this.schema;Object.keys(Z).length&&(G=G||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),T(Z)?this.data=Q(G,Z):this.data=D(F.parse(G)||{},Z,!1,this.name))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},ie.exports.registerSystem=function(G,Z){var ne,te,de={},oe=z.findAllScenes(document);if(Object.keys(Z).forEach(function(ye){de[ye]={value:Z[ye],writable:!0}}),N[G])throw new Error("The system `"+G+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");if(te=function(ye){k.call(this,ye)},te.prototype=Object.create(k.prototype,de),te.prototype.name=G,te.prototype.constructor=te,te.prototype.schema=z.extend(V(te.prototype.schema)),N[G]=te,K.canInitializeElements)for(ne=0;ne<oe.length;ne++)oe[ne].initSystem(G)}},"./src/extras/components/index.js":(ie,we,P)=>{P("./src/extras/components/pivot.js")},"./src/extras/components/pivot.js":(ie,we,P)=>{var p=P("./src/core/component.js").registerComponent,S=P("./src/lib/three.js"),z=new S.Vector3,K=new S.Vector3;p("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var D=this.data,Q=this.el,V=Q.object3D.parent,T=Q.object3D,F=new S.Group;z.copy(T.position),K.copy(T.rotation),V.remove(T),F.add(T),V.add(F),Q.object3D=F,T.position.set(-1*D.x,-1*D.y,-1*D.z),F.position.set(D.x+z.x,D.y+z.y,D.z+z.z),F.rotation.copy(T.rotation),T.rotation.set(0,0,0)}})},"./src/extras/primitives/getMeshMixin.js":(ie,we,P)=>{var p=P("./src/core/component.js").components,S=P("./src/core/shader.js").shaders,z=P("./src/utils/index.js"),K={};Object.keys(p.material.schema).forEach(D),Object.keys(S.standard.schema).forEach(D);function D(Q){var V=Q.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();Q==="fog"&&(V="material-fog"),Q==="visible"&&(V="material-visible"),K[V]="material."+Q}ie.exports=function(){return{defaultComponents:{material:{}},mappings:z.extend({},K)}}},"./src/extras/primitives/index.js":(ie,we,P)=>{P("./src/extras/primitives/primitives/a-camera.js"),P("./src/extras/primitives/primitives/a-cursor.js"),P("./src/extras/primitives/primitives/a-curvedimage.js"),P("./src/extras/primitives/primitives/a-gltf-model.js"),P("./src/extras/primitives/primitives/a-image.js"),P("./src/extras/primitives/primitives/a-light.js"),P("./src/extras/primitives/primitives/a-link.js"),P("./src/extras/primitives/primitives/a-obj-model.js"),P("./src/extras/primitives/primitives/a-sky.js"),P("./src/extras/primitives/primitives/a-sound.js"),P("./src/extras/primitives/primitives/a-text.js"),P("./src/extras/primitives/primitives/a-video.js"),P("./src/extras/primitives/primitives/a-videosphere.js"),P("./src/extras/primitives/primitives/meshPrimitives.js")},"./src/extras/primitives/primitives.js":(ie,we,P)=>{var p=P("./src/core/a-node.js").knownTags,S=P("./src/core/a-entity.js").AEntity,z=P("./src/core/component.js").components,K=P("./src/utils/index.js"),D=K.debug,Q=K.entity.setComponentProperty,V=D("extras:primitives:debug"),T=D("extras:primitives:warn"),F=D("extras:primitives:error"),N=ie.exports.primitives={};ie.exports.registerPrimitive=function(te,de){if(te=te.toLowerCase(),p[te]){F("Trying to register primitive "+te+" that has been already previously registered");return}p[te]=!0,V("Registering <%s>",te),de.defaultAttributes&&T("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var oe=de.mappings||{},ye=class extends S{constructor(){super(),this.defaultComponentsFromPrimitive=de.defaultComponents||de.defaultAttributes||{},this.deprecated=de.deprecated||null,this.deprecatedMappings=de.deprecatedMappings||{},this.mappings=oe,de.deprecated&&console.warn(de.deprecated),this.resolveMappingCollisions()}resolveMappingCollisions(){var Me=this.mappings,Ne=this;Object.keys(Me).forEach(function(Qe){var De;Qe!==Qe.toLowerCase()&&T("Mapping keys should be specified in lower case. The mapping key "+Qe+" may not be recognized"),z[Qe]&&(De=Me[Qe].replace(".","-"),Me[De]=Me[Qe],delete Me[Qe],console.warn("The primitive "+Ne.tagName.toLowerCase()+" has a mapping collision. The attribute "+Qe+" has the same name as a registered component and has been renamed to "+De))})}getExtraComponents(){var Me,Ne,Pe,Qe,De,ke=this;for(Ne=K.clone(this.defaultComponentsFromPrimitive),De=this.getAttribute("mixin"),De&&(De=K.split(De.trim(),/\s+/),De.forEach(function(st){var dt=document.getElementById(st);if(dt){var Mt=dt.rawAttributeCache,Rt=dt.componentCache;for(var Yt in Mt){if(Qe=ke.mappings[Yt],Qe){k(Qe,Mt[Yt],Ne);return}Yt in Rt&&(Ne[Yt]=Ce(Ne[Yt],Rt[Yt]))}}})),Pe=0;Pe<this.attributes.length;Pe++)Me=this.attributes[Pe],Qe=this.mappings[Me.name],Qe&&k(Qe,Me.value,Ne);return Ne;function Ce(Ve,st){return fe(Ve)?Oe(st):fe(st)?Oe(Ve):Te(Ve)&&Te(st)?K.extendDeep(Ve,st):Oe(st)}function fe(Ve){return typeof Ve>"u"}function Oe(Ve){return Te(Ve)?K.extendDeep({},Ve):Ve}function Te(Ve){return Ve!==null&&Ve.constructor===Object}}attributeChangedCallback(Me,Ne,Pe){var Qe=this.mappings[Me];if(Me in this.deprecatedMappings&&console.warn(this.deprecatedMappings[Me]),!Me||!Qe){super.attributeChangedCallback(Me,Ne,Pe);return}Q(this,Qe,Pe)}};return customElements.define(te,ye),ye.mappings=oe,N[te]=ye,ye};function k(ne,te,de){var oe=K.entity.getComponentPropertyPath(ne);oe.constructor===Array?(de[oe[0]]=de[oe[0]]||{},de[oe[0]][oe[1]]=te.trim()):de[oe]=te.trim()}function G(ne,te){var de=z[ne].schema;Object.keys(de).map(function(oe){var ye=oe.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();te[ye]!==void 0&&(ye=ne+"-"+oe),te[ye]=ne+"."+oe})}function Z(ne,te,de){de=de||{},Object.keys(te).map(function(ye){G(ye,de)}),ie.exports.registerPrimitive(ne,K.extendDeep({},null,{defaultComponents:te,mappings:de}))}ie.exports.definePrimitive=Z},"./src/extras/primitives/primitives/a-camera.js":(ie,we,P)=>{var p=P("./src/extras/primitives/primitives.js").registerPrimitive;p("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{x:0,y:1.6,z:0}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},"./src/extras/primitives/primitives/a-cursor.js":(ie,we,P)=>{var p=P("./src/extras/primitives/getMeshMixin.js"),S=P("./src/extras/primitives/primitives.js").registerPrimitive,z=P("./src/utils/index.js");S("a-cursor",z.extendDeep({},p(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},"./src/extras/primitives/primitives/a-curvedimage.js":(ie,we,P)=>{var p=P("./src/extras/primitives/getMeshMixin.js"),S=P("./src/extras/primitives/primitives.js").registerPrimitive,z=P("./src/utils/index.js");S("a-curvedimage",z.extendDeep({},p(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},"./src/extras/primitives/primitives/a-gltf-model.js":(ie,we,P)=>{var p=P("./src/extras/primitives/primitives.js").registerPrimitive;p("a-gltf-model",{mappings:{src:"gltf-model"}})},"./src/extras/primitives/primitives/a-image.js":(ie,we,P)=>{var p=P("./src/extras/primitives/getMeshMixin.js"),S=P("./src/extras/primitives/primitives.js").registerPrimitive,z=P("./src/utils/index.js");S("a-image",z.extendDeep({},p(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-light.js":(ie,we,P)=>{var p=P("./src/extras/primitives/primitives.js").registerPrimitive;p("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target",envmap:"light.envMap","shadow-camera-automatic":"light.shadowCameraAutomatic"}})},"./src/extras/primitives/primitives/a-link.js":(ie,we,P)=>{var p=P("./src/extras/primitives/primitives.js").registerPrimitive;p("a-link",{defaultComponents:{link:{visualAspectEnabled:!0}},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},"./src/extras/primitives/primitives/a-obj-model.js":(ie,we,P)=>{var p=P("./src/extras/primitives/getMeshMixin.js")(),S=P("./src/extras/primitives/primitives.js").registerPrimitive,z=P("./src/utils/index.js");S("a-obj-model",z.extendDeep({},p,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},"./src/extras/primitives/primitives/a-sky.js":(ie,we,P)=>{var p=P("./src/extras/primitives/getMeshMixin.js"),S=P("./src/extras/primitives/primitives.js").registerPrimitive,z=P("./src/utils/index.js"),K=P("./src/extras/primitives/primitives/meshPrimitives.js");S("a-sky",z.extendDeep({},p(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:z.extendDeep({},K["a-sphere"].mappings)}))},"./src/extras/primitives/primitives/a-sound.js":(ie,we,P)=>{var p=P("./src/extras/primitives/primitives.js").registerPrimitive;p("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},"./src/extras/primitives/primitives/a-text.js":(ie,we,P)=>{var p=P("./src/extras/primitives/primitives.js").definePrimitive;p("a-text",{text:{anchor:"align",width:5}})},"./src/extras/primitives/primitives/a-video.js":(ie,we,P)=>{var p=P("./src/extras/primitives/getMeshMixin.js"),S=P("./src/extras/primitives/primitives.js").registerPrimitive,z=P("./src/utils/index.js");S("a-video",z.extendDeep({},p(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},"./src/extras/primitives/primitives/a-videosphere.js":(ie,we,P)=>{var p=P("./src/extras/primitives/getMeshMixin.js"),S=P("./src/extras/primitives/primitives.js").registerPrimitive,z=P("./src/utils/index.js");S("a-videosphere",z.extendDeep({},p(),{defaultComponents:{geometry:{primitive:"sphere",radius:500,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},"./src/extras/primitives/primitives/meshPrimitives.js":(ie,we,P)=>{var p=P("./src/extras/primitives/getMeshMixin.js"),S=P("./src/core/geometry.js").geometries,z=P("./src/core/geometry.js").geometryNames,K=P("./src/extras/primitives/primitives.js").registerPrimitive,D=P("./src/utils/index.js"),Q=ie.exports={};z.forEach(function(F){var N=S[F],k=V(F),G={};Object.keys(N.schema).forEach(function(de){G[V(de)]="geometry."+de});var Z="a-"+k,ne=K(Z,D.extendDeep({},p(),{defaultComponents:{geometry:{primitive:F}},mappings:G}));Q[Z]=ne});function V(T){return T.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}},"./src/geometries/box.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js");p("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(z){this.geometry=new S.BoxGeometry(z.width,z.height,z.depth,z.segmentsWidth,z.segmentsHeight,z.segmentsDepth)}})},"./src/geometries/circle.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js"),z=S.MathUtils.degToRad;p("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(K){this.geometry=new S.CircleGeometry(K.radius,K.segments,z(K.thetaStart),z(K.thetaLength))}})},"./src/geometries/cone.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js"),z=S.MathUtils.degToRad;p("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(K){this.geometry=new S.CylinderGeometry(K.radiusTop,K.radiusBottom,K.height,K.segmentsRadial,K.segmentsHeight,K.openEnded,z(K.thetaStart),z(K.thetaLength))}})},"./src/geometries/cylinder.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js"),z=S.MathUtils.degToRad;p("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(K){this.geometry=new S.CylinderGeometry(K.radius,K.radius,K.height,K.segmentsRadial,K.segmentsHeight,K.openEnded,z(K.thetaStart),z(K.thetaLength))}})},"./src/geometries/dodecahedron.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js");p("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(z){this.geometry=new S.DodecahedronGeometry(z.radius,z.detail)}})},"./src/geometries/icosahedron.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js");p("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(z){this.geometry=new S.IcosahedronGeometry(z.radius,z.detail)}})},"./src/geometries/index.js":(ie,we,P)=>{P("./src/geometries/box.js"),P("./src/geometries/circle.js"),P("./src/geometries/cone.js"),P("./src/geometries/cylinder.js"),P("./src/geometries/dodecahedron.js"),P("./src/geometries/icosahedron.js"),P("./src/geometries/octahedron.js"),P("./src/geometries/plane.js"),P("./src/geometries/ring.js"),P("./src/geometries/sphere.js"),P("./src/geometries/tetrahedron.js"),P("./src/geometries/torus.js"),P("./src/geometries/torusKnot.js"),P("./src/geometries/triangle.js")},"./src/geometries/octahedron.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js");p("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(z){this.geometry=new S.OctahedronGeometry(z.radius,z.detail)}})},"./src/geometries/plane.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js");p("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(z){this.geometry=new S.PlaneGeometry(z.width,z.height,z.segmentsWidth,z.segmentsHeight)}})},"./src/geometries/ring.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js"),z=S.MathUtils.degToRad;p("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(K){this.geometry=new S.RingGeometry(K.radiusInner,K.radiusOuter,K.segmentsTheta,K.segmentsPhi,z(K.thetaStart),z(K.thetaLength))}})},"./src/geometries/sphere.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js"),z=S.MathUtils.degToRad;p("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(K){this.geometry=new S.SphereGeometry(K.radius,K.segmentsWidth,K.segmentsHeight,z(K.phiStart),z(K.phiLength),z(K.thetaStart),z(K.thetaLength))}})},"./src/geometries/tetrahedron.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js");p("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(z){this.geometry=new S.TetrahedronGeometry(z.radius,z.detail)}})},"./src/geometries/torus.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js"),z=S.MathUtils.degToRad;p("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(K){this.geometry=new S.TorusGeometry(K.radius,K.radiusTubular*2,K.segmentsRadial,K.segmentsTubular,z(K.arc))}})},"./src/geometries/torusKnot.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js");p("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(z){this.geometry=new S.TorusKnotGeometry(z.radius,z.radiusTubular*2,z.segmentsTubular,z.segmentsRadial,z.p,z.q)}})},"./src/geometries/triangle.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").registerGeometry,S=P("./src/lib/three.js"),z=new S.Quaternion,K=new S.Vector3(0,0,1),D=new S.Vector2,Q=new S.Vector2,V=new S.Vector2;p("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(T){var F,N,k,G,Z,ne,te,de,oe;k=new S.Triangle,k.a.set(T.vertexA.x,T.vertexA.y,T.vertexA.z),k.b.set(T.vertexB.x,T.vertexB.y,T.vertexB.z),k.c.set(T.vertexC.x,T.vertexC.y,T.vertexC.z),N=k.getNormal(new S.Vector3),z.setFromUnitVectors(N,K),G=k.a.clone().applyQuaternion(z),Z=k.b.clone().applyQuaternion(z),ne=k.c.clone().applyQuaternion(z),D.set(Math.min(G.x,Z.x,ne.x),Math.min(G.y,Z.y,ne.y)),Q.set(Math.max(G.x,Z.x,ne.x),Math.max(G.y,Z.y,ne.y)),V.set(0,0).subVectors(Q,D),G=new S.Vector2().subVectors(G,D).divide(V),Z=new S.Vector2().subVectors(Z,D).divide(V),ne=new S.Vector2().subVectors(ne,D).divide(V),F=this.geometry=new S.BufferGeometry,te=[k.a.x,k.a.y,k.a.z,k.b.x,k.b.y,k.b.z,k.c.x,k.c.y,k.c.z],de=[N.x,N.y,N.z,N.x,N.y,N.z,N.x,N.y,N.z],oe=[G.x,G.y,Z.x,Z.y,ne.x,ne.y],F.setAttribute("position",new S.Float32BufferAttribute(te,3)),F.setAttribute("normal",new S.Float32BufferAttribute(de,3)),F.setAttribute("uv",new S.Float32BufferAttribute(oe,2))}})},"./src/index.js":(ie,we,P)=>{if(window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.hasNativeWebXRImplementation=navigator.xr!==void 0,!window.hasNativeWebXRImplementation&&!window.hasNativeWebVRImplementation){var p=P("./src/utils/isIOSOlderThan10.js"),S=p(window.navigator.userAgent)?1/window.devicePixelRatio:1,z=P("./node_modules/webvr-polyfill/build/webvr-polyfill.js"),K={BUFFER_SCALE:S,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,MOBILE_WAKE_LOCK:!!window.cordova};window.webvrpolyfill=new z(K)}var D=P("./src/utils/index.js"),Q=D.debug,V=Q("A-Frame:error"),T=Q("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&T("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),!window.cordova&&window.location.protocol==="file:"&&V("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/1.4.0/introduction/installation.html#use-a-local-server."),D.device.isBrowserEnvironment&&(P("./src/style/aframe.css"),P("./src/style/rStats.css"));var F=P("./src/core/scene/a-scene.js").AScene,N=P("./src/core/component.js").components,k=P("./src/core/component.js").registerComponent,G=P("./src/core/geometry.js").registerGeometry,Z=P("./src/extras/primitives/primitives.js").registerPrimitive,ne=P("./src/core/shader.js").registerShader,te=P("./src/core/system.js").registerSystem,de=P("./src/core/shader.js").shaders,oe=P("./src/core/system.js").systems,ye=window.THREE=P("./src/lib/three.js"),Me=P("./src/core/readyState.js"),Ne=P("./package.json");P("./src/components/index.js"),P("./src/geometries/index.js"),P("./src/shaders/index.js"),P("./src/systems/index.js");var Pe=P("./src/core/a-node.js").ANode,Qe=P("./src/core/a-entity.js").AEntity;P("./src/core/a-assets.js"),P("./src/core/a-cubemap.js"),P("./src/core/a-mixin.js"),P("./src/extras/components/index.js"),P("./src/extras/primitives/index.js"),console.log("A-Frame Version: 1.6.0 (Date 2024-05-23, Commit #e6c47761)"),console.log("THREE Version (https://github.com/supermedium/three.js):",ye.REVISION),console.log("WebVR Polyfill Version:",Ne.dependencies["webvr-polyfill"]),window.AFRAME_ASYNC||Me.waitForDocumentReadyState(),ie.exports=window.AFRAME={AComponent:P("./src/core/component.js").Component,AEntity:Qe,ANode:Pe,ANIME:P("./node_modules/super-animejs/lib/anime.es.js").default,AScene:F,components:N,coreComponents:Object.keys(N),geometries:P("./src/core/geometry.js").geometries,registerComponent:k,registerGeometry:G,registerPrimitive:Z,registerShader:ne,registerSystem:te,primitives:{getMeshMixin:P("./src/extras/primitives/getMeshMixin.js"),primitives:P("./src/extras/primitives/primitives.js").primitives},scenes:P("./src/core/scene/scenes.js"),schema:P("./src/core/schema.js"),shaders:de,systems:oe,emitReady:Me.emitReady,THREE:ye,utils:D,version:Ne.version}},"./src/lib/rStatsAframe.js":ie=>{window.aframeStats=function(we){var P=null,p=we,S={te:{caption:"Entities"},lt:{caption:"Load Time"}},z=[{caption:"A-Frame",values:["te","lt"]}];function K(){P("te").set(D()),window.performance.getEntriesByName&&P("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))}function D(){var F=p.querySelectorAll("*");return Array.prototype.slice.call(F).filter(function(N){return N.isEntity}),F.length}function Q(){}function V(){}function T(F){P=F}return{update:K,start:Q,end:V,attach:T,values:S,groups:z,fractions:[]}},ie.exports={aframeStats:window.aframeStats}},"./src/lib/three.js":(ie,we,P)=>{var p=P("./src/lib/three.mjs").default;P.g.THREE=p,P("./vendor/DeviceOrientationControls.js"),p.Cache&&(p.Cache.enabled=!0),ie.exports=p},"./src/shaders/flat.js":(ie,we,P)=>{var p=P("./src/core/shader.js").registerShader,S=P("./src/lib/three.js"),z=P("./src/utils/index.js");ie.exports.Shader=p("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2},toneMapped:{default:!0}},init:function(D){this.materialData={color:new S.Color},K(D,this.materialData),this.material=new S.MeshBasicMaterial(this.materialData)},update:function(D){this.updateMaterial(D),z.material.updateMap(this,D)},updateMaterial:function(D){var Q;K(D,this.materialData);for(Q in this.materialData)this.material[Q]=this.materialData[Q]}});function K(D,Q){return Q.color.set(D.color),Q.fog=D.fog,Q.wireframe=D.wireframe,Q.toneMapped=D.toneMapped,Q.wireframeLinewidth=D.wireframeLinewidth,Q}},"./src/shaders/index.js":(ie,we,P)=>{P("./src/shaders/flat.js"),P("./src/shaders/standard.js"),P("./src/shaders/phong.js"),P("./src/shaders/sdf.js"),P("./src/shaders/msdf.js"),P("./src/shaders/shadow.js")},"./src/shaders/msdf.js":(ie,we,P)=>{var p=P("./src/core/shader.js").registerShader,S=P("./src/lib/three.js"),z=["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),K=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform bool negate;","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float median(float r, float g, float b) {","  return max(min(r, g), min(max(r, g), b));","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec3 sampleColor = texture(map, vUV).rgb;","  if (negate) { sampleColor = 1.0 - sampleColor; }","  float sigDist = median(sampleColor.r, sampleColor.g, sampleColor.b) - 0.5;","  float alpha = clamp(sigDist / fwidth(sigDist) + 0.5, 0.0, 1.0);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  // Do modified alpha test.","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);","  }","  // Do modified alpha test.","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color.xyz, alpha * opacity);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`);ie.exports.Shader=p("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},vertexShader:z,fragmentShader:K,init:function(){return this.uniforms=S.UniformsUtils.merge([S.UniformsLib.fog,this.initUniforms()]),this.material=new S.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}})},"./src/shaders/phong.js":(ie,we,P)=>{var p=P("./src/core/shader.js").registerShader,S=P("./src/lib/three.js"),z=P("./src/utils/index.js");ie.exports.Shader=p("phong",{schema:{color:{type:"color"},emissive:{type:"color",default:"black"},emissiveIntensity:{default:1},specular:{type:"color",default:"#111111"},transparent:{default:!1},fog:{default:!0},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},envMap:{default:""},sphericalEnvMap:{type:"map"},shininess:{default:30},flatShading:{default:!1},wireframe:{default:!1},wireframeLinewidth:{default:2},combine:{oneOF:["multiply","mix","add"],default:"mix"},reflectivity:{default:.9},refractionRatio:{default:.98},refract:{default:!1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},bumpMap:{type:"map"},bumpMapScale:{default:1},bumpTextureOffset:{type:"vec2"},bumpTextureRepeat:{type:"vec2",default:{x:1,y:1}}},init:function(D){this.materialData={color:new S.Color,specular:new S.Color,emissive:new S.Color},K(D,this.materialData),this.material=new S.MeshPhongMaterial(this.materialData);var Q=this.el.sceneEl;Object.defineProperty(this.material,"envMap",{get:function(){return this._envMap||Q.object3D.environment},set:function(V){this._envMap=V}})},update:function(D){this.updateMaterial(D),z.material.updateMap(this,D),z.material.updateDistortionMap("normal",this,D),z.material.updateDistortionMap("displacement",this,D),z.material.updateDistortionMap("ambientOcclusion",this,D),z.material.updateDistortionMap("bump",this,D),z.material.updateEnvMap(this,D)},updateMaterial:function(D){var Q;K(D,this.materialData);for(Q in this.materialData)this.material[Q]=this.materialData[Q]}});function K(D,Q){switch(Q.color.set(D.color),Q.specular.set(D.specular),Q.emissive.set(D.emissive),Q.emissiveIntensity=D.emissiveIntensity,Q.fog=D.fog,Q.transparent=D.transparent,Q.wireframe=D.wireframe,Q.wireframeLinewidth=D.wireframeLinewidth,Q.shininess=D.shininess,Q.flatShading=D.flatShading,Q.wireframe=D.wireframe,Q.wireframeLinewidth=D.wireframeLinewidth,Q.reflectivity=D.reflectivity,Q.refractionRatio=D.refractionRatio,D.combine){case"mix":Q.combine=S.MixOperation;break;case"multiply":Q.combine=S.MultiplyOperation;break;case"add":Q.combine=S.AddOperation;break}return D.normalMap&&(Q.normalScale=D.normalScale),D.ambientOcclusionMap&&(Q.aoMapIntensity=D.ambientOcclusionMapIntensity),D.bumpMap&&(Q.bumpScale=D.bumpMapScale),D.displacementMap&&(Q.displacementScale=D.displacementScale,Q.displacementBias=D.displacementBias),Q}},"./src/shaders/sdf.js":(ie,we,P)=>{var p=P("./src/core/shader.js").registerShader,S=P("./src/lib/three.js"),z=["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","out vec2 vUV;","void main(void) {","  vUV = uv;","  #include <begin_vertex>","  #include <project_vertex>","  #include <logdepthbuf_vertex>","  #include <fog_vertex>","}"].join(`
`),K=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform float alphaTest;","uniform float opacity;","uniform sampler2D map;","uniform vec3 color;","in vec2 vUV;","float contour(float width, float value) {","  return smoothstep(0.5 - value, 0.5 + value, width);","}","#define BIG_ENOUGH 0.001","#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)","void main() {","  vec2 uv = vUV;","  vec4 texColor = texture(map, uv);","  float dist = texColor.a;","  float width = fwidth(dist);","  float alpha = contour(dist, width);","  float dscale = 0.353505;","  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));","  float isBigEnough = max(abs(duv.x), abs(duv.y));","  if (isBigEnough > BIG_ENOUGH) {","    float ratio = BIG_ENOUGH / isBigEnough;","    alpha = ratio * alpha + (1.0 - ratio) * dist;","  }","  if (isBigEnough <= BIG_ENOUGH) {","    vec4 box = vec4 (uv - duv, uv + duv);","    alpha = (alpha + 0.5 * (","      contour(texture(map, box.xy).a, width)","      + contour(texture(map, box.zw).a, width)","      + contour(texture(map, box.xw).a, width)","      + contour(texture(map, box.zy).a, width)","    )) / 3.0;","  }","  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }","  gl_FragColor = vec4(color, opacity * alpha);","  #include <logdepthbuf_fragment>","  #include <tonemapping_fragment>","  #include <colorspace_fragment>","  #include <fog_fragment>","}"].join(`
`);ie.exports.Shader=p("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:z,fragmentShader:K,init:function(){return this.uniforms=S.UniformsUtils.merge([S.UniformsLib.fog,this.initUniforms()]),this.material=new S.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,fog:!0}),this.material}})},"./src/shaders/shadow.js":(ie,we,P)=>{var p=P("./src/core/shader.js").registerShader,S=P("./src/lib/three.js");ie.exports.Shader=p("shadow",{schema:{opacity:{default:.5},transparent:{default:!0},alphaToCoverage:{default:!0}},init:function(z){this.material=new S.ShadowMaterial},update:function(z){this.material.opacity=z.opacity,this.material.alphaToCoverage=z.alphaToCoverage,this.material.transparent=z.transparent}})},"./src/shaders/standard.js":(ie,we,P)=>{var p=P("./src/core/shader.js").registerShader,S=P("./src/lib/three.js"),z=P("./src/utils/index.js");ie.exports.Shader=p("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(D){this.materialData={color:new S.Color,emissive:new S.Color},K(D,this.materialData),this.material=new S.MeshStandardMaterial(this.materialData)},update:function(D){this.updateMaterial(D),z.material.updateMap(this,D),z.material.updateDistortionMap("normal",this,D),z.material.updateDistortionMap("displacement",this,D),z.material.updateDistortionMap("ambientOcclusion",this,D),z.material.updateDistortionMap("metalness",this,D),z.material.updateDistortionMap("roughness",this,D),z.material.updateEnvMap(this,D)},updateMaterial:function(D){var Q,V=this.material;K(D,this.materialData);for(Q in this.materialData)V[Q]=this.materialData[Q]}});function K(D,Q){return Q.color.set(D.color),Q.emissive.set(D.emissive),Q.emissiveIntensity=D.emissiveIntensity,Q.fog=D.fog,Q.metalness=D.metalness,Q.roughness=D.roughness,Q.wireframe=D.wireframe,Q.wireframeLinewidth=D.wireframeLinewidth,D.normalMap&&(Q.normalScale=D.normalScale),D.ambientOcclusionMap&&(Q.aoMapIntensity=D.ambientOcclusionMapIntensity),D.displacementMap&&(Q.displacementScale=D.displacementScale,Q.displacementBias=D.displacementBias),Q}},"./src/systems/camera.js":(ie,we,P)=>{var p=P("./src/constants/index.js"),S=P("./src/core/system.js").registerSystem,z="data-aframe-default-camera";ie.exports.System=S("camera",{init:function(){this.activeCameraEl=null,this.render=this.render.bind(this),this.unwrapRender=this.unwrapRender.bind(this),this.wrapRender=this.wrapRender.bind(this),this.initialCameraFound=!1,this.numUserCameras=0,this.numUserCamerasChecked=0,this.setupInitialCamera()},setupInitialCamera:function(){var D,Q,V=this.sceneEl,T=this;if(V.camera&&!V.camera.el.getAttribute("camera").spectator){V.emit("cameraready",{cameraEl:V.camera.el});return}if(D=V.querySelectorAll("a-camera, :not(a-mixin)[camera]"),!D.length){this.createDefaultCamera();return}for(this.numUserCameras=D.length,Q=0;Q<D.length;Q++)D[Q].addEventListener("object3dset",function(F){F.detail.type==="camera"&&T.checkUserCamera(this)}),D[Q].isNode?D[Q].load():D[Q].addEventListener("nodeready",function(){this.load()})},checkUserCamera:function(D){var Q,V=this.el.sceneEl;if(this.numUserCamerasChecked++,!this.initialCameraFound){if(Q=D.getAttribute("camera"),!Q.active||Q.spectator){this.numUserCamerasChecked===this.numUserCameras&&this.createDefaultCamera();return}this.initialCameraFound=!0,V.camera=D.getObject3D("camera"),V.emit("cameraready",{cameraEl:D})}},createDefaultCamera:function(){var D,Q=this.sceneEl;D=document.createElement("a-entity"),D.setAttribute("camera",{active:!0}),D.setAttribute("position",{x:0,y:p.DEFAULT_CAMERA_HEIGHT,z:0}),D.setAttribute("wasd-controls",""),D.setAttribute("look-controls",""),D.setAttribute(p.AFRAME_INJECTED,""),D.addEventListener("object3dset",function(V){V.detail.type==="camera"&&(Q.camera=V.detail.object,Q.emit("cameraready",{cameraEl:D}))}),Q.appendChild(D)},disableActiveCamera:function(){var D,Q;D=this.sceneEl.querySelectorAll(":not(a-mixin)[camera]"),Q=D[D.length-1],Q.setAttribute("camera","active",!0)},setActiveCamera:function(D){var Q,V,T,F,N=this.activeCameraEl,k=this.sceneEl;if(F=D.getObject3D("camera"),!(!F||D===this.activeCameraEl)){var G=k.querySelector("["+z+"]"),Z=G&&G.querySelector(":not(a-mixin)[camera]");for(D!==Z&&K(k),this.activeCameraEl=D,this.activeCameraEl.play(),k.camera=F,N&&N.setAttribute("camera","active",!1),V=k.querySelectorAll(":not(a-mixin)[camera]"),T=0;T<V.length;T++)Q=V[T],!(!Q.isEntity||D===Q)&&(Q.setAttribute("camera","active",!1),Q.pause());k.emit("camera-set-active",{cameraEl:D})}},setSpectatorCamera:function(D){var Q,V=this.spectatorCameraEl,T=this.sceneEl,F;Q=D.getObject3D("camera"),!(!Q||D===this.spectatorCameraEl)&&(V&&V.setAttribute("camera","spectator",!1),F=this.spectatorCameraEl=D,T.addEventListener("enter-vr",this.wrapRender),T.addEventListener("exit-vr",this.unwrapRender),F.setAttribute("camera","active",!1),F.play(),T.emit("camera-set-spectator",{cameraEl:D}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},wrapRender:function(){!this.spectatorCameraEl||this.originalRender||(this.originalRender=this.sceneEl.renderer.render,this.sceneEl.renderer.render=this.render)},unwrapRender:function(){this.originalRender&&(this.sceneEl.renderer.render=this.originalRender,this.originalRender=void 0)},render:function(D,Q){var V,T=this.sceneEl,F;V=T.renderer.xr.enabled,this.originalRender.call(T.renderer,D,Q),!(!this.spectatorCameraEl||T.isMobile||!V)&&(F=this.spectatorCameraEl.components.camera.camera,T.renderer.xr.enabled=!1,this.originalRender.call(T.renderer,D,F),T.renderer.xr.enabled=V)}});function K(D){var Q,V=D.camera;V&&(Q=D.querySelector("["+z+"]"),Q&&D.removeChild(Q))}},"./src/systems/geometry.js":(ie,we,P)=>{var p=P("./src/core/geometry.js").geometries,S=P("./src/core/system.js").registerSystem;ie.exports.System=S("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(Q){var V=this.cache,T,F;return Q.skipCache?z(Q):(F=this.hash(Q),T=V[F],D(this.cacheCount,F),T||(T=z(Q),V[F]=T,T))},unuseGeometry:function(Q){var V=this.cache,T=this.cacheCount,F,N;Q.skipCache||(N=this.hash(Q),V[N]&&(K(T,N),!(T[N]>0)&&(F=V[N],F.dispose(),delete V[N],delete T[N])))},hash:function(Q){return JSON.stringify(Q)}});function z(Q){var V=Q.primitive,T=p[V]&&p[V].Geometry,F=new T;if(!T)throw new Error("Unknown geometry `"+V+"`");return F.init(Q),F.geometry}function K(Q,V){Q[V]--}function D(Q,V){Q[V]=Q[V]===void 0?1:Q[V]+1}},"./src/systems/gltf-model.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem,S=P("./src/lib/three.js");function z(K){return new Promise(function(D,Q){var V=document.createElement("script");document.body.appendChild(V),V.onload=D,V.onerror=Q,V.async=!0,V.src=K})}ie.exports.System=p("gltf-model",{schema:{dracoDecoderPath:{default:"https://www.gstatic.com/draco/versioned/decoders/1.5.6/"},basisTranscoderPath:{default:""},meshoptDecoderPath:{default:""}},init:function(){this.update()},update:function(){var K=this.data.dracoDecoderPath,D=this.data.basisTranscoderPath,Q=this.data.meshoptDecoderPath;!this.dracoLoader&&K&&(this.dracoLoader=new S.DRACOLoader,this.dracoLoader.setDecoderPath(K)),!this.ktx2Loader&&D&&(this.ktx2Loader=new S.KTX2Loader,this.ktx2Loader.setTranscoderPath(D).detectSupport(this.el.renderer)),!this.meshoptDecoder&&Q&&(this.meshoptDecoder=z(Q).then(function(){return window.MeshoptDecoder.ready}).then(function(){return window.MeshoptDecoder}))},getDRACOLoader:function(){return this.dracoLoader},getKTX2Loader:function(){return this.ktx2Loader},getMeshoptDecoder:function(){return this.meshoptDecoder}})},"./src/systems/index.js":(ie,we,P)=>{P("./src/systems/camera.js"),P("./src/systems/geometry.js"),P("./src/systems/gltf-model.js"),P("./src/systems/light.js"),P("./src/systems/material.js"),P("./src/systems/obb-collider.js"),P("./src/systems/renderer.js"),P("./src/systems/shadow.js"),P("./src/systems/tracked-controls-webvr.js"),P("./src/systems/tracked-controls-webxr.js"),P("./src/systems/webxr.js")},"./src/systems/light.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem,S=P("./src/constants/index.js"),z="data-aframe-default-light";ie.exports.System=p("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",this.setupDefaultLights.bind(this))},registerLight:function(K){K.hasAttribute(z)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var K,D=this.sceneEl;if(this.defaultLights){K=document.querySelectorAll("["+z+"]");for(var Q=0;Q<K.length;Q++)D.removeChild(K[Q]);this.defaultLights=!1}},setupDefaultLights:function(){var K=this.sceneEl,D,Q;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(D=document.createElement("a-entity"),D.setAttribute("light",{color:"#BBB",type:"ambient"}),D.setAttribute(z,""),D.setAttribute(S.AFRAME_INJECTED,""),K.appendChild(D),Q=document.createElement("a-entity"),Q.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),Q.setAttribute("position",{x:-.5,y:1,z:1}),Q.setAttribute(z,""),Q.setAttribute(S.AFRAME_INJECTED,""),K.appendChild(Q),this.defaultLights=!0)}})},"./src/systems/material.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem,S=P("./src/lib/three.js"),z=P("./src/utils/index.js"),K=P("./src/utils/material.js").setTextureProperties,D=P("./src/utils/material.js").createCompatibleTexture,Q=z.debug,V=Q("components:texture:error"),T=Q("components:texture:warn"),F=new S.ImageLoader;ie.exports.System=p("material",{init:function(){this.materials={},this.sourceCache={}},clearTextureSourceCache:function(){this.sourceCache={}},loadTexture:function(Z,ne,te){this.loadTextureSource(Z,function(oe){var ye=D(oe);K(ye,ne),te(ye)})},loadTextureSource:function(Z,ne){var te=this,de=this.sourceCache,oe=this.hash(Z);if(de[oe]){de[oe].then(ne);return}if(Z.tagName==="CANVAS"){Me(new S.Source(Z));return}Me(new Promise(ye));function ye(Ne,Pe){z.srcLoader.validateSrc(Z,Qe,De);function Qe(ke){te.loadImage(ke,Ne)}function De(ke){te.loadVideo(ke,Ne)}}function Me(Ne){de[oe]=Promise.resolve(Ne),de[oe].then(ne)}},loadCubeMapTexture:function(Z,ne){var te=this,de=0,oe=new S.CubeTexture;oe.colorSpace=S.SRGBColorSpace;function ye(Ne){te.loadTextureSource(Z[Ne],function(Pe){oe.images[Ne]=Pe,de++,de===6&&(oe.needsUpdate=!0,ne(oe))})}if(Z.length!==6){T("Cube map texture requires exactly 6 sources, got only %s sources",Z.length);return}for(var Me=0;Me<Z.length;Me++)ye(Me)},loadImage:function(Z,ne){if(typeof Z!="string"){ne(new S.Source(Z));return}ne(N(Z))},loadVideo:function(Z,ne){var te;typeof Z!="string"&&(te=Z,G(te)),te=te||k(Z),ne(new S.Source(te))},hash:function(Z){return Z.tagName&&(Z.id||Z.src)||Z},registerMaterial:function(Z){this.materials[Z.uuid]=Z},unregisterMaterial:function(Z){delete this.materials[Z.uuid]}});function N(Z){return new Promise(ne);function ne(te,de){F.load(Z,oe,function(){},function(ye){V("`$s` could not be fetched (Error code: %s; Response: %s)",ye.status,ye.statusText)});function oe(ye){te(new S.Source(ye))}}}function k(Z){var ne=document.createElement("video");return ne.setAttribute("playsinline",""),ne.setAttribute("webkit-playsinline",""),ne.autoplay=!0,ne.loop=!0,ne.crossOrigin="anonymous",ne.addEventListener("error",function(){T("`%s` is not a valid video",Z)},!0),ne.src=Z,ne}function G(Z){return Z.autoplay=Z.hasAttribute("autoplay")&&Z.getAttribute("autoplay")!=="false",Z.controls=Z.hasAttribute("controls")&&Z.getAttribute("controls")!=="false",Z.getAttribute("loop")==="false"&&Z.removeAttribute("loop"),Z.getAttribute("preload")==="false"&&(Z.preload="none"),Z.crossOrigin=Z.crossOrigin||"anonymous",Z.setAttribute("playsinline",""),Z.setAttribute("webkit-playsinline",""),Z}},"./src/systems/obb-collider.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem;p("obb-collider",{schema:{showColliders:{default:!1}},init:function(){this.collisions=[],this.colliderEls=[]},addCollider:function(S){this.colliderEls.push(S),this.data.showColliders?S.components["obb-collider"].showCollider():S.components["obb-collider"].hideCollider(),this.tick=this.detectCollisions},removeCollider:function(S){var z=this.colliderEls,K=z.indexOf(S);S.components["obb-collider"].hideCollider(),K>-1&&z.splice(K,1),z.length===0&&(this.tick=void 0)},registerCollision:function(S,z){var K=this.collisions,D=!1,Q=S.obb,V=z.obb,T=S.renderColliderMesh,F=z.renderColliderMesh;T&&T.material.color.set(16711680),F&&F.material.color.set(16711680);for(var N=0;N<K.length;N++)if(K[N].componentA.obb===Q&&K[N].componentB.obb===V||K[N].componentA.obb===V&&K[N].componentB.obb===Q){D=!0,K[N].detected=!0;break}D||(K.push({componentA:S,componentB:z,detected:!0}),S.el.emit("obbcollisionstarted",{trackedObject3D:S.trackedObject3D,withEl:z.el}),z.el.emit("obbcollisionstarted",{trackedObject3D:z.trackedObject3D,withEl:S.el}))},resetCollisions:function(){for(var S=this.collisions,z=0;z<S.length;z++)S[z].detected=!1},clearCollisions:function(){for(var S=this.collisions,z=[],K,D,Q,V,T=0;T<S.length;T++)S[T].detected?z.push(S[T]):(K=S[T].componentA,D=S[T].componentB,Q=K.renderColliderMesh,V=D.renderColliderMesh,Q&&Q.material.color.set(65280),K.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:D.el}),V&&V.material.color.set(65280),D.el.emit("obbcollisionended",{trackedObject3D:this.trackedObject3D,withEl:K.el}));this.collisions=z},detectCollisions:function(){var S,z,K,D,Q=this.colliderEls;if(!(Q.length<2)){this.resetCollisions();for(var V=0;V<Q.length;V++)if(K=Q[V].components["obb-collider"],S=Q[V].components["obb-collider"].obb,!(S.halfSize.x===0||S.halfSize.y===0||S.halfSize.z===0))for(var T=V+1;T<Q.length;T++)D=Q[T].components["obb-collider"],z=D.obb,!(z.halfSize.x===0||z.halfSize.y===0||z.halfSize.z===0)&&S.intersectsOBB(z)&&this.registerCollision(K,D);this.clearCollisions()}}})},"./src/systems/renderer.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem,S=P("./src/utils/index.js"),z=P("./src/lib/three.js"),K=S.debug,D=K("components:renderer:warn");ie.exports.System=p("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},highRefreshRate:{default:S.device.isOculusBrowser()},logarithmicDepthBuffer:{default:"auto",oneOf:["true","false","auto"]},maxCanvasWidth:{default:-1},maxCanvasHeight:{default:-1},multiviewStereo:{default:!1},physicallyCorrectLights:{default:!1},exposure:{default:1,if:{toneMapping:["ACESFilmic","linear","reinhard","cineon"]}},toneMapping:{default:"no",oneOf:["no","ACESFilmic","linear","reinhard","cineon"]},precision:{default:"high",oneOf:["high","medium","low"]},anisotropy:{default:1},sortTransparentObjects:{default:!1},colorManagement:{default:!0},alpha:{default:!0},stencil:{default:!1},foveationLevel:{default:1}},init:function(){var F=this.data,N=this.el,k=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1),G=N.renderer;F.physicallyCorrectLights||(G.useLegacyLights=!F.physicallyCorrectLights),G.toneMapping=z[k+"ToneMapping"],z.Texture.DEFAULT_ANISOTROPY=F.anisotropy,z.ColorManagement.enabled=F.colorManagement,G.outputColorSpace=F.colorManagement?z.SRGBColorSpace:z.LinearSRGBColorSpace,N.hasAttribute("antialias")&&D('Component `antialias` is deprecated. Use `renderer="antialias: true"` instead.'),N.hasAttribute("logarithmicDepthBuffer")&&D('Component `logarithmicDepthBuffer` is deprecated. Use `renderer="logarithmicDepthBuffer: true"` instead.'),G.sortObjects=!0,G.setOpaqueSort(Q)},update:function(){var F=this.data,N=this.el,k=N.renderer,G=this.data.toneMapping.charAt(0).toUpperCase()+this.data.toneMapping.slice(1);k.toneMapping=z[G+"ToneMapping"],k.toneMappingExposure=F.exposure,k.xr.setFoveation(F.foveationLevel),F.sortObjects&&D('`sortObjects` property is deprecated. Use `renderer="sortTransparentObjects: true"` instead.'),F.sortTransparentObjects?k.setTransparentSort(T):k.setTransparentSort(V)},applyColorCorrection:function(F){!this.data.colorManagement||!F||F.isTexture&&F.colorSpace!==z.SRGBColorSpace&&(F.colorSpace=z.SRGBColorSpace,F.needsUpdate=!0)},setWebXRFrameRate:function(F){var N=this.data,k=F.supportedFrameRates;if(k&&F.updateTargetFrameRate){var G;k.includes(90)?G=N.highRefreshRate?90:72:G=N.highRefreshRate?72:60,F.updateTargetFrameRate(G).catch(function(Z){console.warn("failed to set target frame rate of "+G+". Error info: "+Z)})}}});function Q(F,N){return F.groupOrder!==N.groupOrder?F.groupOrder-N.groupOrder:F.renderOrder!==N.renderOrder?F.renderOrder-N.renderOrder:F.z-N.z}function V(F,N){return F.groupOrder!==N.groupOrder?F.groupOrder-N.groupOrder:F.renderOrder-N.renderOrder}function T(F,N){return F.groupOrder!==N.groupOrder?F.groupOrder-N.groupOrder:F.renderOrder!==N.renderOrder?F.renderOrder-N.renderOrder:N.z-F.z}ie.exports.sortFrontToBack=Q,ie.exports.sortRenderOrderOnly=V,ie.exports.sortBackToFront=T},"./src/systems/shadow.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem,S=P("./src/lib/three.js"),z={basic:S.BasicShadowMap,pcf:S.PCFShadowMap,pcfsoft:S.PCFSoftShadowMap};ie.exports.System=p("shadow",{schema:{enabled:{default:!0},autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var D=this.sceneEl,Q=this.data;this.shadowMapEnabled=!1,D.renderer.shadowMap.type=z[Q.type],D.renderer.shadowMap.autoUpdate=Q.autoUpdate},update:function(D){D.enabled!==this.data.enabled&&this.setShadowMapEnabled(this.shadowMapEnabled)},setShadowMapEnabled:function(D){var Q=this.sceneEl,V=this.sceneEl.renderer;this.shadowMapEnabled=D;var T=this.data.enabled&&this.shadowMapEnabled;V&&T!==V.shadowMap.enabled&&(V.shadowMap.enabled=T,K(Q))}});function K(D){D.hasLoaded&&D.object3D.traverse(function(Q){if(Q.material)for(var V=Array.isArray(Q.material)?Q.material:[Q.material],T=0;T<V.length;T++)V[T].needsUpdate=!0})}},"./src/systems/tracked-controls-webvr.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem,S=P("./src/utils/index.js"),z=S.device.isWebXRAvailable;ie.exports.System=p("tracked-controls-webvr",{init:function(){var K=this;this.controllers=[],this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1,this.updateControllerList(),this.throttledUpdateControllerList=S.throttle(this.updateControllerList,500,this),!z&&navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(D){D.length&&(K.vrDisplay=D[0])})})},tick:function(){this.isChrome?this.updateControllerList():this.throttledUpdateControllerList()},updateControllerList:function(){var K=this.controllers,D,Q,V,T;if(Q=navigator.getGamepads&&navigator.getGamepads(),!!Q){for(T=K.length,K.length=0,V=0;V<Q.length;++V)D=Q[V],D&&D.pose&&K.push(D);K.length!==T&&this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/tracked-controls-webxr.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem,S=P("./src/utils/index.js");ie.exports.System=p("tracked-controls-webxr",{init:function(){this.controllers=[],this.oldControllers=[],this.oldControllersLength=0,this.throttledUpdateControllerList=S.throttle(this.updateControllerList,500,this),this.updateReferenceSpace=this.updateReferenceSpace.bind(this),this.el.addEventListener("enter-vr",this.updateReferenceSpace),this.el.addEventListener("exit-vr",this.updateReferenceSpace)},tick:function(){this.throttledUpdateControllerList()},updateReferenceSpace:function(){var z=this,K=this.el.xrSession;if(!K){this.referenceSpace=void 0,this.controllers=[],this.oldControllersLength>0&&(this.oldControllersLength=0,this.el.emit("controllersupdated",void 0,!1));return}var D=z.el.sceneEl.systems.webxr.sessionReferenceSpaceType;K.requestReferenceSpace(D).then(function(Q){z.referenceSpace=Q}).catch(function(Q){throw z.el.sceneEl.systems.webxr.warnIfFeatureNotRequested(D,'tracked-controls-webxr uses reference space "'+D+'".'),Q})},updateControllerList:function(){var z=this.el.xrSession,K=this.oldControllers,D;if(!z){if(this.oldControllersLength===0)return;this.oldControllersLength=0,this.controllers=[],this.el.emit("controllersupdated",void 0,!1);return}if(z.inputSources){if(this.controllers=z.inputSources,this.oldControllersLength===this.controllers.length){var Q=!0;for(D=0;D<this.controllers.length;++D)if(!(this.controllers[D]===K[D]&&this.controllers[D].gamepad===K[D].gamepad)){Q=!1;break}if(Q)return}for(K.length=0,D=0;D<this.controllers.length;D++)K.push(this.controllers[D]);this.oldControllersLength=this.controllers.length,this.el.emit("controllersupdated",void 0,!1)}}})},"./src/systems/webxr.js":(ie,we,P)=>{var p=P("./src/core/system.js").registerSystem,S=P("./src/utils/index.js"),z=S.debug("systems:webxr:warn");ie.exports.System=p("webxr",{schema:{referenceSpaceType:{type:"string",default:"local-floor"},requiredFeatures:{type:"array",default:["local-floor"]},optionalFeatures:{type:"array",default:["bounded-floor"]},overlayElement:{type:"selector"}},update:function(){var K=this.data;this.sessionConfiguration={requiredFeatures:K.requiredFeatures,optionalFeatures:K.optionalFeatures},this.sessionReferenceSpaceType=K.referenceSpaceType,K.overlayElement&&(K.overlayElement.classList.remove("a-dom-overlay"),K.optionalFeatures.includes("dom-overlay")||(K.optionalFeatures.push("dom-overlay"),this.el.setAttribute("webxr",K)),this.warnIfFeatureNotRequested("dom-overlay"),this.sessionConfiguration.domOverlay={root:K.overlayElement},K.overlayElement.classList.add("a-dom-overlay"))},wasFeatureRequested:function(K){return!!(K==="viewer"||K==="local"||this.sessionConfiguration.requiredFeatures.includes(K)||this.sessionConfiguration.optionalFeatures.includes(K))},warnIfFeatureNotRequested:function(K,D){if(!this.wasFeatureRequested(K)){var Q='Please add the feature "'+K+`" to a-scene's webxr system options in requiredFeatures/optionalFeatures.`;z((D?D+" ":"")+Q)}}})},"./src/utils/coordinates.js":(ie,we,P)=>{var p=P("./src/utils/debug.js"),S=p("utils:coordinates:warn"),z=["x","y","z","w"],K=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;ie.exports.regex=K;var D=/\s+/g;function Q(k,G,Z){var ne,te,de,oe,ye=Z&&typeof Z=="object"?Z:{},Me,Ne,Pe,Qe;if(k&&k instanceof Object)return Me=k.x===void 0?G&&G.x:k.x,Ne=k.y===void 0?G&&G.y:k.y,Pe=k.z===void 0?G&&G.z:k.z,Qe=k.w===void 0?G&&G.w:k.w,Me!=null&&(ye.x=N(Me)),Ne!=null&&(ye.y=N(Ne)),Pe!=null&&(ye.z=N(Pe)),Qe!=null&&(ye.w=N(Qe)),ye;if(k==null)return typeof G=="object"?Object.assign(ye,G):G;for(ne=k.trim().split(D),oe=0;oe<z.length;oe++)if(de=z[oe],ne[oe])ye[de]=parseFloat(ne[oe],10);else{if(te=G&&G[de],te===void 0)continue;ye[de]=N(te)}return ye}ie.exports.parse=Q;function V(k){var G;return typeof k!="object"?k:(G=k.x+" "+k.y,k.z!=null&&(G+=" "+k.z),k.w!=null&&(G+=" "+k.w),G)}ie.exports.stringify=V;function T(k,G){return typeof k!="object"||typeof G!="object"?k===G:k.x===G.x&&k.y===G.y&&k.z===G.z&&k.w===G.w}ie.exports.equals=T;function F(k){return K.test(k)}ie.exports.isCoordinates=F,ie.exports.isCoordinate=function(k){return S("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),F(k)};function N(k){return k!=null&&k.constructor===String?parseFloat(k,10):k}ie.exports.toVector3=function(k){return new THREE.Vector3(k.x,k.y,k.z)}},"./src/utils/debug.js":(ie,we,P)=>{var p=P("./node_modules/debug/src/browser.js"),S=P("./src/utils/device.js").isBrowserEnvironment,z={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}};p.formatArgs=K;function K(F){if(F[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+F[0]+(this.useColors?"%c ":" "),!!this.useColors){this.color=Q(this.namespace);var N="color: "+this.color;F.splice(1,0,N,"color: inherit");var k=0,G=0;F[0].replace(/%[a-zA-Z%]/g,function(Z){Z!=="%%"&&(k++,Z==="%c"&&(G=k))}),F.splice(G,0,N)}}function D(F){var N=F.split(":");return N[N.length-1]}function Q(F){var N=D(F),k=z.colors[N];return k||null}function V(){try{return window.localStorage}catch{}}var T=V();T&&(parseInt(T.logs,10)||T.logs==="true")?p.enable("*"):p.enable("*:error,*:info,*:warn"),S&&(window.logs=p),ie.exports=p},"./src/utils/device.js":(ie,we,P)=>{var p=P("./node_modules/debug/src/browser.js")("device:error"),S,z=!1,K=!1,D=ie.exports.isWebXRAvailable=navigator.xr!==void 0;if(window.addEventListener("vrdisplayactivate",function(Pe){var Qe;D||(Qe=document.createElement("canvas"),S=Pe.display,Qe.getContext("webgl",{}),S.requestPresent([{source:Qe}]).then(function(){},function(){}))}),D){var Q=function(){var Pe=document.querySelector("a-scene");if(!Pe){window.addEventListener("DOMContentLoaded",Q);return}Pe.hasLoaded?Pe.components["xr-mode-ui"].updateEnterInterfaces():Pe.addEventListener("loaded",Q)},V=function(Pe){p("WebXR session support error: "+Pe.message)};navigator.xr.isSessionSupported?(navigator.xr.isSessionSupported("immersive-vr").then(function(Pe){z=Pe,Q()}).catch(V),navigator.xr.isSessionSupported("immersive-ar").then(function(Pe){K=Pe,Q()}).catch(function(){})):navigator.xr.supportsSession?(navigator.xr.supportsSession("immersive-vr").then(function(){z=!0,Q()}).catch(V),navigator.xr.supportsSession("immersive-ar").then(function(){K=!0,Q()}).catch(function(){})):p("WebXR has neither isSessionSupported or supportsSession?!")}else navigator.getVRDisplays&&navigator.getVRDisplays().then(function(Pe){var Qe=document.querySelector("a-scene");S=Pe.length&&Pe[0],Qe&&Qe.emit("displayconnected",{vrDisplay:S})});function T(){return S}ie.exports.getVRDisplay=T;function F(){return z||K||!!T()}ie.exports.checkHeadsetConnected=F;function N(){return K}ie.exports.checkARSupport=N;function k(){return z}ie.exports.checkVRSupport=k;var G=function(){var Pe=!1;return function(Qe){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(Qe)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(Qe.substr(0,4)))&&(Pe=!0),(te()||Z()||Ne())&&(Pe=!0),Me()&&(Pe=!1)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return Pe}}();ie.exports.isMobile=G;function Z(Pe){var Qe=Pe||window.navigator.userAgent,De=/Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(Qe);return De||ne()}ie.exports.isTablet=Z;function ne(Pe,Qe,De){var ke=Pe||window.navigator.userAgent,Ce=Qe||window.navigator.platform,fe=De||window.navigator.maxTouchPoints||0;return(Ce==="iPad"||Ce==="MacIntel")&&fe>0&&/Macintosh|Intel|iPad|ipad/i.test(ke)&&!window.MSStream}ie.exports.isIpad=ne;function te(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}ie.exports.isIOS=te;function de(){return!G()&&!Me()&&window.orientation!==void 0}ie.exports.isMobileDeviceRequestingDesktopSite=de;function oe(){return/(OculusBrowser)/i.test(window.navigator.userAgent)}ie.exports.isOculusBrowser=oe;function ye(){return/(Mobile VR)/i.test(window.navigator.userAgent)}ie.exports.isFirefoxReality=ye;function Me(){return oe()||ye()}ie.exports.isMobileVR=Me;function Ne(){return/R7 Build/.test(window.navigator.userAgent)}ie.exports.isR7=Ne,ie.exports.isLandscape=function(){var Pe=window.orientation;return Ne()&&(Pe+=90),Pe===90||Pe===-90},ie.exports.isBrowserEnvironment=typeof process>"u"||process.browser===!0,ie.exports.isNodeEnvironment=!ie.exports.isBrowserEnvironment},"./src/utils/entity.js":(ie,we,P)=>{var p=P("./src/utils/split.js").split;function S(z,K){K=K||".";var D=p(z,K);return D.length===1?D[0]:D}ie.exports.getComponentPropertyPath=S,ie.exports.getComponentProperty=function(z,K,D){var Q;return D=D||".",K.indexOf(D)!==-1?(Q=S(K,D),Q.constructor===String?z.getAttribute(Q):z.getAttribute(Q[0])[Q[1]]):z.getAttribute(K)},ie.exports.setComponentProperty=function(z,K,D,Q){var V;if(Q=Q||".",K.indexOf(Q)!==-1){V=S(K,Q),V.constructor===String?z.setAttribute(V,D):z.setAttribute(V[0],V[1],D);return}z.setAttribute(K,D)}},"./src/utils/forceCanvasResizeSafariMobile.js":ie=>{ie.exports=function(P){var p=P.style.width,S=P.style.height;P.style.width=parseInt(p,10)+1+"px",P.style.height=parseInt(S,10)+1+"px",setTimeout(function(){P.style.width=p,P.style.height=S},200)}},"./src/utils/index.js":(ie,we,P)=>{var p=P("./src/utils/debug.js"),S=P("./node_modules/deep-assign/index.js"),z=P("./src/utils/device.js"),K=P("./src/utils/object-pool.js"),D=p("utils:warn");ie.exports.bind=function(V){return V.bind.apply(V,Array.prototype.slice.call(arguments,1))},ie.exports.coordinates=P("./src/utils/coordinates.js"),ie.exports.debug=p,ie.exports.device=z,ie.exports.entity=P("./src/utils/entity.js"),ie.exports.forceCanvasResizeSafariMobile=P("./src/utils/forceCanvasResizeSafariMobile.js"),ie.exports.material=P("./src/utils/material.js"),ie.exports.objectPool=K,ie.exports.split=P("./src/utils/split.js").split,ie.exports.styleParser=P("./src/utils/styleParser.js"),ie.exports.trackedControls=P("./src/utils/tracked-controls.js"),ie.exports.checkHeadsetConnected=function(){return D("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),z.checkHeadsetConnected(arguments)},ie.exports.isGearVR=ie.exports.device.isGearVR=function(){D("`utils.isGearVR` has been deprecated, use `utils.device.isMobileVR`")},ie.exports.isIOS=function(){return D("`utils.isIOS` has moved to `utils.device.isIOS`"),z.isIOS(arguments)},ie.exports.isOculusGo=ie.exports.device.isOculusGo=function(){D("`utils.isOculusGo` has been deprecated, use `utils.device.isMobileVR`")},ie.exports.isMobile=function(){return D("`utils.isMobile has moved to `utils.device.isMobile`"),z.isMobile(arguments)},ie.exports.throttle=function(V,T,F){var N;return F&&(V=V.bind(F)),function(){var k=Date.now(),G=typeof N>"u"?T:k-N;(typeof N>"u"||G>=T)&&(N=k,V.apply(null,arguments))}},ie.exports.throttleLeadingAndTrailing=function(V,T,F){var N,k;F&&(V=V.bind(F));var G,Z=function(){N=Date.now(),V.apply(this,G),k=void 0};return function(){var ne=Date.now(),te=typeof N>"u"?T:ne-N;te>=T?(clearTimeout(k),k=void 0,N=ne,V.apply(null,arguments)):(k=k||setTimeout(Z,T-te),G=arguments)}},ie.exports.throttleTick=function(V,T,F){var N;return F&&(V=V.bind(F)),function(k,G){var Z=typeof N>"u"?G:k-N;(typeof N>"u"||Z>=T)&&(N=k,V(k,Z))}},ie.exports.debounce=function(V,T,F){var N;return function(){var k=this,G=arguments,Z=function(){N=null,F||V.apply(k,G)},ne=F&&!N;clearTimeout(N),N=setTimeout(Z,T),ne&&V.apply(k,G)}},ie.exports.extend=Object.assign,ie.exports.extendDeep=S,ie.exports.clone=function(V){return JSON.parse(JSON.stringify(V))};var Q=function(){var V=K.createPool(function(){return[]});return function(T,F){var N,k,G,Z,ne,te;if(T===void 0||F===void 0||T===null||F===null||!(T&&F&&T.constructor===Object&&F.constructor===Object||T.constructor===Array&&F.constructor===Array))return T===F;k=V.use(),G=V.use(),k.length=0,G.length=0;for(N in T)k.push(N);for(N in F)G.push(N);if(k.length!==G.length)return V.recycle(k),V.recycle(G),!1;for(Z=0;Z<k.length;++Z)if(ne=T[k[Z]],te=F[k[Z]],typeof ne=="object"||typeof te=="object"||Array.isArray(ne)&&Array.isArray(te)){if(ne===te)continue;if(!Q(ne,te))return V.recycle(k),V.recycle(G),!1}else if(ne!==te)return V.recycle(k),V.recycle(G),!1;return V.recycle(k),V.recycle(G),!0}}();ie.exports.deepEqual=Q,ie.exports.diff=function(){var V=[];return function(T,F,N){var k,G,Z,ne,te,de,oe;ne=N||{},V.length=0;for(te in T)V.push(te);if(!F)return ne;for(Z in F)V.indexOf(Z)===-1&&V.push(Z);for(de=0;de<V.length;de++)te=V[de],k=T[te],G=F[te],oe=k&&G&&k.constructor===Object&&G.constructor===Object,(oe&&!Q(k,G)||!oe&&k!==G)&&(ne[te]=G);return ne}}(),ie.exports.shouldCaptureKeyEvent=function(V){return V.metaKey?!1:document.activeElement===document.body},ie.exports.splitString=function(V,T){typeof T>"u"&&(T=" ");var F=new RegExp(T,"g");return V=(V||"").replace(F,T),V.split(T)},ie.exports.getElData=function(V,T){T=T||{};var F={};Object.keys(T).forEach(N);function N(k){V.hasAttribute(k)&&(F[k]=V.getAttribute(k))}return F},ie.exports.getUrlParameter=function(V){V=V.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var T=new RegExp("[\\?&]"+V+"=([^&#]*)"),F=T.exec(location.search);return F===null?"":decodeURIComponent(F[1].replace(/\+/g," "))},ie.exports.isIframed=function(){return window.top!==window.self},ie.exports.findAllScenes=function(V){for(var T=[],F=V.getElementsByTagName("*"),N=0,k=F.length;N<k;N++)F[N].isScene&&T.push(F[N]);return T},ie.exports.srcLoader=P("./src/utils/src-loader.js")},"./src/utils/ios-orientationchange-blank-bug.js":()=>{window.addEventListener("orientationchange",function(){document.documentElement.style.height="initial",setTimeout(function(){document.documentElement.style.height="100%",setTimeout(function(){window.scrollTo(0,1)},500)},500)})},"./src/utils/isIOSOlderThan10.js":ie=>{ie.exports=function(P){return/(iphone|ipod|ipad).*os.(7_|8_|9_)/i.test(P)}},"./src/utils/material.js":(ie,we,P)=>{var p=P("./src/lib/three.js"),S=P("./src/utils/src-loader.js"),z=P("./src/utils/debug.js"),K=z("utils:material:warn"),D=new Set(["emissiveMap","envMap","map","specularMap"]);function Q(k,G){var Z=G.offset||{x:0,y:0},ne=G.repeat||{x:1,y:1},te=G.npot||!1,de=G.anisotropy||p.Texture.DEFAULT_ANISOTROPY,oe=k.wrapS,ye=k.wrapT,Me=k.magFilter,Ne=k.minFilter;te&&(oe=p.ClampToEdgeWrapping,ye=p.ClampToEdgeWrapping,Me=p.LinearFilter,Ne=p.LinearFilter),(ne.x!==1||ne.y!==1)&&(oe=p.RepeatWrapping,ye=p.RepeatWrapping),k.offset.set(Z.x,Z.y),k.repeat.set(ne.x,ne.y),(k.wrapS!==oe||k.wrapT!==ye||k.magFilter!==Me||k.minFilter!==Ne||k.anisotropy!==de)&&(k.wrapS=oe,k.wrapT=ye,k.magFilter=Me,k.minFilter=Ne,k.anisotropy=de,k.needsUpdate=!0)}ie.exports.setTextureProperties=Q,ie.exports.updateMapMaterialFromData=function(k,G,Z,ne){var te=Z.el,de=Z.material,oe=te.sceneEl.systems.renderer,ye=ne[G];if(Z.materialSrcs||(Z.materialSrcs={}),!ye){delete Z.materialSrcs[k],Ne(null);return}if(ye===Z.materialSrcs[k]&&de[k]){Q(de[k],ne);return}Z.materialSrcs[k]=ye,ye instanceof p.Texture?Ne(ye):te.sceneEl.systems.material.loadTextureSource(ye,Me);function Me(Pe){if(Z.materialSrcs[k]===ye){var Qe=de[k];Qe&&(Pe===null||!F(Qe,Pe))&&(Qe=null),!Qe&&Pe&&(Qe=N(Pe)),Qe&&(Qe.source!==Pe&&(Qe.source=Pe,Qe.needsUpdate=!0),D.has(k)&&oe.applyColorCorrection(Qe),Q(Qe,ne)),Ne(Qe)}}function Ne(Pe){de[k]!==Pe&&(de[k]&&de[k].dispose(),de[k]=Pe,de.needsUpdate=!0,T(te,Pe))}},ie.exports.updateMap=function(k,G){return ie.exports.updateMapMaterialFromData("map","src",k,G)},ie.exports.updateDistortionMap=function(k,G,Z){var ne=k;k==="ambientOcclusion"&&(ne="ao");var te={};return te.src=Z[k+"Map"],te.offset=Z[k+"TextureOffset"],te.repeat=Z[k+"TextureRepeat"],te.wrap=Z[k+"TextureWrap"],ie.exports.updateMapMaterialFromData(ne+"Map","src",G,te)};var V={};ie.exports.updateEnvMap=function(k,G){var Z=k.material,ne=k.el,te="envMap",de=G.envMap,oe=G.sphericalEnvMap,ye=G.refract;if(oe&&(de=oe,K("`sphericalEnvMap` property is deprecated, using spherical map as equirectangular map instead. Use `envMap` property with a CubeMap or Equirectangular image instead.")),k.materialSrcs||(k.materialSrcs={}),!de){delete k.materialSrcs[te],Z.envMap=null,Z.needsUpdate=!0;return}if(k.materialSrcs[te]=de,V[de]){V[de].then(Me);return}V[de]=new Promise(function(Ne){S.validateEnvMapSrc(de,function(Qe){ne.sceneEl.systems.material.loadCubeMapTexture(Qe,function(De){De.mapping=ye?p.CubeRefractionMapping:p.CubeReflectionMapping,Me(De),Ne(De)})},function(Qe){ne.sceneEl.systems.material.loadTexture(Qe,{src:Qe},function(De){De.mapping=ye?p.EquirectangularRefractionMapping:p.EquirectangularReflectionMapping,Me(De),Ne(De)})})});function Me(Ne){k.materialSrcs[te]===de&&(Z.envMap=Ne,Z.needsUpdate=!0,T(ne,Ne))}};function T(k,G){if(!G||(k.emit("materialtextureloaded",{src:G.image,texture:G}),!G.image||G.image.tagName!=="VIDEO"))return;G.image.addEventListener("loadeddata",Z),G.image.addEventListener("ended",ne);function Z(){k.emit("materialvideoloadeddata",{src:G.image,texture:G})}function ne(){k.emit("materialvideoended",{src:G.image,texture:G})}G.addEventListener("dispose",function(){G.image.removeEventListener("loadeddata",Z),G.image.removeEventListener("ended",ne)})}ie.exports.handleTextureEvents=T;function F(k,G){return G.data instanceof HTMLCanvasElement?k.isCanvasTexture:G.data instanceof HTMLVideoElement?k.isVideoTexture&&k.source===G:k.isTexture&&!k.isCanvasTexture&&!k.isVideoTexture}ie.exports.isCompatibleTexture=F;function N(k){var G;return k.data instanceof HTMLCanvasElement?G=new p.CanvasTexture:k.data instanceof HTMLVideoElement?G=new p.VideoTexture(k.data):G=new p.Texture,G.source=k,G.needsUpdate=!0,G}ie.exports.createCompatibleTexture=N},"./src/utils/math.js":ie=>{function we(p,S,z){var K=S.dot(p);return(K-S.dot(z))/S.length()}function P(p,S,z,K){var D=we(p,S,z);return K.copy(S),K.multiplyScalar(D),K.add(z),K}ie.exports.distanceOfPointFromPlane=we,ie.exports.nearestPointInPlane=P},"./src/utils/object-pool.js":ie=>{var we=Object.freeze(Object.create(null));function P(){return{}}ie.exports.createPool=function(K){var D=[],Q=null;K=K||P;function V(){var k;return(Q===null||Q===D.length)&&F(D.length||5),k=D[Q],D[Q++]=we,p(k),k}function T(k){if(k instanceof Object){if(Q===null||Q===-1){D[D.length]=k;return}D[--Q]=k}}function F(k){var G,Z;if(k=k===void 0?D.length:k,k>0&&Q==null&&(Q=0),k>0)for(G=D.length,D.length+=Number(k),Z=G;Z<D.length;Z++)D[Z]=K();return D.length}function N(){return D.length}return{grow:F,pool:D,recycle:T,size:N,use:V}};function p(z){var K;if(!(!z||z.constructor!==Object))for(K in z)z[K]=void 0}ie.exports.clearObject=p;function S(z,K){var D;if(!(!z||z.constructor!==Object))for(D in z)D in K||delete z[D]}ie.exports.removeUnusedKeys=S},"./src/utils/split.js":ie=>{ie.exports.split=function(){var we={};return function(P,p){return p in we||(we[p]={}),P in we[p]||(we[p][P]=P.split(p)),we[p][P]}}()},"./src/utils/src-loader.js":(ie,we,P)=>{var p=P("./src/utils/debug.js"),S=p("utils:src-loader:warn");function z(N,k,G){V(N,function(ne){if(ne){k(N);return}G(N)})}function K(N,k,G){var Z,ne="",te,de,oe=[];if(typeof N=="string"){let Me=function(Ne){oe.push(Ne),oe.length===6&&k(oe)};for(te=0;te<5;te++)ne+="(url\\((?:[^\\)]+)\\),\\s*)";if(ne+="(url\\((?:[^\\)]+)\\)\\s*)",de=N.match(new RegExp(ne)),de){for(te=1;te<7;te++)z(Q(de[te]),Me);return}if(!N.startsWith("#")){var ye=Q(N);z(ye||N,G);return}}if(N.tagName?Z=N:Z=F(N),!!Z){if(Z.tagName==="A-CUBEMAP"&&Z.srcs)return k(Z.srcs);if(Z.tagName==="IMG")return G(Z);S('Selector "%s" does not point to <a-cubemap> or <img>',N)}}function D(N,k){return K(N,k,function(){S("Expected cubemap but got image")})}function Q(N){var k=N.match(/url\((.+)\)/);if(k)return k[1]}function V(N,k){var G;if(N.tagName){k(N.tagName==="IMG");return}G=new XMLHttpRequest,G.open("HEAD",N),G.addEventListener("load",function(Z){var ne;G.status>=200&&G.status<300?(ne=G.getResponseHeader("Content-Type"),ne==null?T(N,k):ne.startsWith("image")?k(!0):k(!1)):T(N,k),G.abort()}),G.send()}function T(N,k){var G=new Image;G.addEventListener("load",Z);function Z(){k(!0)}G.addEventListener("error",ne);function ne(){k(!1)}G.src=N}function F(N){try{var k=document.querySelector(N);return k||S('No element was found matching the selector: "%s"',N),k}catch{S('"%s" is not a valid selector',N);return}}ie.exports={parseUrl:Q,validateSrc:z,validateCubemapSrc:D,validateEnvMapSrc:K}},"./src/utils/styleParser.js":ie=>{var we=/-([a-z])/g;ie.exports.parse=function(D,Q){var V;return typeof D!="string"||(V=S(D,Q),V[""])?D:V},ie.exports.stringify=function(D){return typeof D=="string"?D:z(D)};function P(D){return D.replace(we,K)}ie.exports.toCamelCase=P;var p=function(){var D=[],Q=/url\([^)]+$/;return function(T){var F="",N,k=0,G=";";for(D.length=0;k<T.length;){if(N=T.indexOf(G,k),N===-1&&(N=T.length),F+=T.substring(k,N),Q.test(F)){F+=";",k=N+1;continue}D.push(F.trim()),F="",k=N+1}return D}}();function S(D,Q){var V,T,F,N,k,G;for(Q=Q||{},V=p(D),T=0;T<V.length;T++)F=V[T],F&&(N=F.indexOf(":"),k=F.substr(0,N).trim(),G=F.substr(N+1).trim(),Q[P(k)]=G);return Q}function z(D){var Q,V=0,T=0,F="";for(Q in D)V++;for(Q in D)F+=Q+": "+D[Q],T<V-1&&(F+="; "),T++;return F}function K(D){return D[1].toUpperCase()}},"./src/utils/tracked-controls.js":(ie,we,P)=>{var p=P("./src/constants/index.js").DEFAULT_HANDEDNESS,S=["x","y","z","w"],z=2;ie.exports.checkControllerPresentAndSetup=function(T,F,N){var k=T.el,G,Z=k.sceneEl.hasWebXR,ne=Z?D:K,te;if(G=ne(T,F,N),te=!!G,T.controllerPresent&&!T.controllerEventsActive&&!Z&&T.addEventListeners(),te===T.controllerPresent)return te;T.controllerPresent=te,te?(T.addEventListeners(),T.injectTrackedControls(G),k.emit("controllerconnected",{name:T.name,component:T})):(T.removeEventListeners(),k.emit("controllerdisconnected",{name:T.name,component:T}))};function K(T,F,N){var k,G=T.el.sceneEl,Z,ne=N.index||0;return!F||(Z=G&&G.systems["tracked-controls-webvr"],!Z)||(k=Z.controllers,!k.length)?!1:!!Q(k,null,F,N.hand,ne)}function D(T,F,N){var k,G=T.el.sceneEl,Z=G&&G.systems["tracked-controls-webxr"];return!Z||(k=Z.controllers,!k||!k.length)?!1:V(k,F,N.hand,N.index,N.iterateControllerProfiles,N.handTracking)}ie.exports.isControllerPresentWebVR=K,ie.exports.isControllerPresentWebXR=D;function Q(T,F,N,k,G){var Z,ne,te=0,de=G>=0?G:0;for(ne=0;ne<T.length;ne++)if(Z=T[ne],!(N&&!Z.id.startsWith(N))&&!(!N&&Z.id!==F)&&!(k&&Z.hand&&k!==Z.hand)){if(k&&!Z.hand)de=z*G+(k===p?0:1);else return Z;if(te===de)return Z;++te}}function V(T,F,N,k,G,Z){var ne,te,de,oe=!1,ye,Me;for(ne=0;ne<T.length;ne++){if(de=T[ne],Me=de.profiles,Z)oe=de.hand;else if(G)for(te=0;te<Me.length&&(oe=Me[te].startsWith(F),!oe);te++);else oe=Me.length>0&&Me[0].startsWith(F);if(oe){if(ye=de.handedness==="right"||de.handedness==="left",ye){if(de.handedness===N)return T[ne]}else if(ne===k)return T[ne]}}}ie.exports.findMatchingControllerWebVR=Q,ie.exports.findMatchingControllerWebXR=V,ie.exports.emitIfAxesChanged=function(T,F,N){var k,G,Z,ne,te;for(G in F){for(k=F[G],Z=!1,te=0;te<k.length;te++)N.detail.changed[k[te]]&&(Z=!0);if(Z){for(ne={},te=0;te<k.length;te++)ne[S[te]]=N.detail.axis[k[te]];T.el.emit(G+"moved",ne)}}},ie.exports.onButtonEvent=function(T,F,N,k){var G=k?N.mapping[k]:N.mapping,Z=G.buttons[T];N.el.emit(Z+F),N.updateModel&&N.updateModel(Z,F)}},"./vendor/DeviceOrientationControls.js":()=>{THREE.DeviceOrientationControls=function(ie){var we=this;this.object=ie,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var P=function(z){we.deviceOrientation=z},p=function(){we.screenOrientation=window.orientation||0},S=function(){var z=new THREE.Vector3(0,0,1),K=new THREE.Euler,D=new THREE.Quaternion,Q=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(V,T,F,N,k){K.set(F,T,-N,"YXZ"),V.setFromEuler(K),V.multiply(Q),V.multiply(D.setFromAxisAngle(z,-k))}}();this.connect=function(){p(),window.addEventListener("orientationchange",p,!1),window.addEventListener("deviceorientation",P,!1),we.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",p,!1),window.removeEventListener("deviceorientation",P,!1),we.enabled=!1},this.update=function(){if(we.enabled!==!1){var z=we.deviceOrientation;if(z){var K=z.alpha?THREE.MathUtils.degToRad(z.alpha)+we.alphaOffset:0,D=z.beta?THREE.MathUtils.degToRad(z.beta):0,Q=z.gamma?THREE.MathUtils.degToRad(z.gamma):0,V=we.screenOrientation?THREE.MathUtils.degToRad(we.screenOrientation):0;S(we.object.quaternion,K,D,Q,V)}}},this.dispose=function(){we.disconnect()},this.connect()}},"./vendor/rStats.extras.js":ie=>{window.glStats=function(){var we=null,P=0,p=0,S=0,z=0,K=0,D=0,Q=0;function V(te,de){return function(){de.apply(this,arguments),te.apply(this,arguments)}}WebGLRenderingContext.prototype.drawArrays=V(WebGLRenderingContext.prototype.drawArrays,function(){P++,arguments[0]==this.POINTS?D+=arguments[2]:K+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=V(WebGLRenderingContext.prototype.drawElements,function(){p++,z+=arguments[1]/3,K+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=V(WebGLRenderingContext.prototype.useProgram,function(){S++}),WebGLRenderingContext.prototype.bindTexture=V(WebGLRenderingContext.prototype.bindTexture,function(){Q++});var T={allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},F=[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],N=[{base:"allcalls",steps:["drawelements","drawarrays"]}];function k(){we("allcalls").set(P+p),we("drawElements").set(p),we("drawArrays").set(P),we("bindTexture").set(Q),we("useProgram").set(S),we("glfaces").set(z),we("glvertices").set(K),we("glpoints").set(D)}function G(){P=0,p=0,S=0,z=0,K=0,D=0,Q=0}function Z(){}function ne(te){we=te}return{update:k,start:G,end:Z,attach:ne,values:T,groups:F,fractions:N}},window.threeStats=function(we){var P=null,p={"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.triangles":{caption:"Triangles",over:1e3},"renderer.info.render.points":{caption:"Points"}},S=[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.triangles","renderer.info.render.points"]}],z=[];function K(){P("renderer.info.memory.geometries").set(we.info.memory.geometries),P("renderer.info.programs").set(we.info.programs.length),P("renderer.info.memory.textures").set(we.info.memory.textures),P("renderer.info.render.calls").set(we.info.render.calls),P("renderer.info.render.triangles").set(we.info.render.triangles),P("renderer.info.render.points").set(we.info.render.points)}function D(){}function Q(){}function V(T){P=T}return{update:K,start:D,end:Q,attach:V,values:p,groups:S,fractions:z}},window.BrowserStats=function(){var we=null,P=0,p=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),performance.memory.totalJSHeapSize===0&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var S={memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},z=[{caption:"Browser",values:["memory","total"]}],K=[{base:"total",steps:["memory"]}],D=Math.log(1024);function Q(k){var G=100,Z=Math.floor(Math.log(k)/D);return Math.round(k*G/Math.pow(1024,Z))/G}function V(){P=Q(performance.memory.usedJSHeapSize),p=Q(performance.memory.totalJSHeapSize),we("memory").set(P),we("total").set(p)}function T(){P=0}function F(){}function N(k){we=k}return{update:V,start:T,end:F,attach:N,values:S,groups:z,fractions:K}},ie.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats}},"./vendor/rStats.js":ie=>{(function(){"performance"in window||(window.performance={});var we=window.performance;if(!("now"in we)){var P=Date.now();we.timing&&we.timing.navigationStart&&(P=we.timing.navigationStart),we.now=function(){return Date.now()-P}}we.mark||(we.mark=function(){}),we.measure||(we.measure=function(){})})(),window.rStats=function(P){function p(Me,Ne){for(var Pe=Object.keys(Me),Qe=0,De=Pe.length;Qe<De;Qe++)Ne(Pe[Qe])}function S(Me){var Ne=document.createElement("link");Ne.href=Me,Ne.rel="stylesheet",Ne.type="text/css",document.getElementsByTagName("head")[0].appendChild(Ne)}var z=P||{},K=z.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],D="https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",Q=(z.CSSPath?z.CSSPath:"")+"rStats.css",V=z.css||[D,Q];V.forEach(function(Me){S(Me)}),z.values||(z.values={});var T,F,N=10,k=200,G={};function Z(Me,Ne,Pe){var Qe=Pe||{},De=document.createElement("canvas"),ke=De.getContext("2d"),Ce=0,fe=0,Oe=Qe.color?Qe.color:"#666666",Te=document.createElement("canvas"),Ve=Te.getContext("2d");Te.width=1,Te.height=2*N,Ve.fillStyle="#444444",Ve.fillRect(0,0,1,2*N),Ve.fillStyle=Oe,Ve.fillRect(0,N,1,N),Ve.fillStyle="#ffffff",Ve.globalAlpha=.5,Ve.fillRect(0,N,1,1),Ve.globalAlpha=1;var st=document.createElement("canvas"),dt=st.getContext("2d");st.width=1,st.height=2*N,dt.fillStyle="#444444",dt.fillRect(0,0,1,2*N),dt.fillStyle="#b70000",dt.fillRect(0,N,1,N),dt.globalAlpha=.5,dt.fillStyle="#ffffff",dt.fillRect(0,N,1,1),dt.globalAlpha=1;function Mt(){De.width=k,De.height=N,De.style.width=De.width+"px",De.style.height=De.height+"px",De.className="rs-canvas",Me.appendChild(De),ke.fillStyle="#444444",ke.fillRect(0,0,De.width,De.height)}function Rt(Yt,zt){fe+=(Yt-fe)*.1,Ce*=.99,fe>Ce&&(Ce=fe),ke.drawImage(De,1,0,De.width-1,De.height,0,0,De.width-1,De.height),zt?ke.drawImage(st,De.width-1,De.height-fe*De.height/Ce-N):ke.drawImage(Te,De.width-1,De.height-fe*De.height/Ce-N)}return Mt(),{draw:Rt}}function ne(Me,Ne){var Pe=document.createElement("canvas"),Qe=Pe.getContext("2d");function De(){Pe.width=k,Pe.height=N*Ne,Pe.style.width=Pe.width+"px",Pe.style.height=Pe.height+"px",Pe.className="rs-canvas",Me.appendChild(Pe),Qe.fillStyle="#444444",Qe.fillRect(0,0,Pe.width,Pe.height)}function ke(Ce){Qe.drawImage(Pe,1,0,Pe.width-1,Pe.height,0,0,Pe.width-1,Pe.height);var fe=0;p(Ce,function(Oe){var Te=Ce[Oe]*Pe.height;Qe.fillStyle=K[Oe],Qe.fillRect(Pe.width-1,fe,1,Te),fe+=Te})}return De(),{draw:ke}}function te(Me,Ne){var Pe=Me,Qe,De=0,ke=0,Ce=0,fe=0,Oe=performance.now(),Te=0,Ve=document.createElement("div"),st=document.createElement("span"),dt=document.createElement("div"),Mt=document.createTextNode(""),Rt=z.values[Pe.toLowerCase()],Yt=new Z(Ve,Pe,Rt),zt=!1;st.className="rs-counter-id",st.textContent=Rt&&Rt.caption?Rt.caption:Pe,dt.className="rs-counter-value",dt.appendChild(Mt),Ve.appendChild(st),Ve.appendChild(dt),Ne?Ne.div.appendChild(Ve):F.appendChild(Ve),Qe=performance.now();function Ci(Jn){if(Rt&&Rt.average){fe+=Jn,Te++;var bn=performance.now();bn-Oe>=(Rt.avgMs||1e3)&&(Ce=fe/Te,fe=0,Oe=bn,Te=0)}}function ci(){Qe=performance.now(),z.userTimingAPI&&performance.mark(Pe+"-start"),zt=!0}function Qi(){De=performance.now()-Qe,z.userTimingAPI&&(performance.mark(Pe+"-end"),zt&&performance.measure(Pe,Pe+"-start",Pe+"-end")),Ci(De)}function sn(){Qi(),ci()}function In(){var Jn=Rt&&Rt.average?Ce:De;Mt.nodeValue=Math.round(Jn*100)/100;var bn=Rt&&(Rt.below&&De<Rt.below||Rt.over&&De>Rt.over);Yt.draw(De,bn),Ve.className=bn?"rs-counter-base alarm":"rs-counter-base"}function Xn(){var Jn=performance.now(),bn=Jn-Qe;ke++,bn>1e3&&(Rt&&Rt.interpolate===!1?De=ke:De=ke*1e3/bn,ke=0,Qe=Jn,Ci(De))}function tr(Jn){De=Jn,Ci(De)}return{set:tr,start:ci,tick:sn,end:Qi,frame:Xn,value:function(){return De},draw:In}}function de(Me){var Ne=Me.toLowerCase();if(Ne===void 0&&(Ne="default"),G[Ne])return G[Ne];var Pe=null;z.groups&&p(z.groups,function(De){var ke=z.groups[parseInt(De,10)];!Pe&&ke.values.indexOf(Ne.toLowerCase())!==-1&&(Pe=ke)});var Qe=new te(Ne,Pe);return G[Ne]=Qe,Qe}function oe(){if(z.plugins){z.values||(z.values={}),z.groups||(z.groups=[]),z.fractions||(z.fractions=[]);for(var Me=0;Me<z.plugins.length;Me++)z.plugins[Me].attach(de),p(z.plugins[Me].values,function(Ne){z.values[Ne]=z.plugins[Me].values[Ne]}),z.groups=z.groups.concat(z.plugins[Me].groups),z.fractions=z.fractions.concat(z.plugins[Me].fractions)}else z.plugins={};T=document.createElement("div"),T.className="rs-base",F=document.createElement("div"),F.className="rs-container",F.style.height="auto",T.appendChild(F),document.body.appendChild(T),z&&(z.groups&&p(z.groups,function(Ne){var Pe=z.groups[parseInt(Ne,10)],Qe=document.createElement("div");Qe.className="rs-group",Pe.div=Qe;var De=document.createElement("h1");De.textContent=Pe.caption,De.addEventListener("click",(function(ke){this.classList.toggle("hidden"),ke.preventDefault()}).bind(Qe)),F.appendChild(De),F.appendChild(Qe)}),z.fractions&&p(z.fractions,function(Ne){var Pe=z.fractions[parseInt(Ne,10)],Qe=document.createElement("div");Qe.className="rs-fraction";var De=document.createElement("div");De.className="rs-legend";var ke=0;p(z.fractions[Ne].steps,function(fe){var Oe=document.createElement("p");Oe.textContent=z.fractions[Ne].steps[fe],Oe.style.color=K[ke],De.appendChild(Oe),ke++}),Qe.appendChild(De),Qe.style.height=ke*N+"px",Pe.div=Qe;var Ce=new ne(Qe,ke);Pe.graph=Ce,F.appendChild(Qe)}))}function ye(){p(z.plugins,function(Me){z.plugins[Me].update()}),p(G,function(Me){G[Me].draw()}),z.fractions&&p(z.fractions,function(Me){var Ne=z.fractions[parseInt(Me,10)],Pe=[],Qe=G[Ne.base.toLowerCase()];Qe&&(Qe=Qe.value(),p(z.fractions[Me].steps,function(De){var ke=z.fractions[Me].steps[parseInt(De,10)].toLowerCase(),Ce=G[ke];Ce&&Pe.push(Ce.value()/Qe)})),Ne.graph.draw(Pe)})}return oe(),function(Me){return Me?de(Me):{element:T,update:ye}}},ie.exports=window.rStats},"./vendor/wakelock/util.js":ie=>{var we={};we.base64=function(P,p){return"data:"+P+";base64,"+p},we.isMobile=function(){var P=!1;return function(p){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(p)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(p.substr(0,4)))&&(P=!0)}(navigator.userAgent||navigator.vendor||window.opera),P},we.isIOS=function(){return/(iPad|iPhone|iPod)/g.test(navigator.userAgent)},we.isIFrame=function(){try{return window.self!==window.top}catch{return!0}},we.appendQueryParameter=function(P,p,S){var z=P.indexOf("?")<0?"?":"&";return P+=z+p+"="+S,P},we.getQueryParameter=function(P){P=P.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var p=new RegExp("[\\?&]"+P+"=([^&#]*)"),S=p.exec(location.search);return S===null?"":decodeURIComponent(S[1].replace(/\+/g," "))},we.isLandscapeMode=function(){return window.orientation==90||window.orientation==-90},ie.exports=we},"./vendor/wakelock/wakelock.js":(ie,we,P)=>{var p=P("./vendor/wakelock/util.js");function S(){var D=document.createElement("video");D.addEventListener("ended",function(){D.play()}),this.request=function(){D.paused&&(D.src=p.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),D.play())},this.release=function(){D.pause(),D.src=""}}function z(){var D=null;this.request=function(){D||(D=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){D&&(clearInterval(D),D=null)}}function K(){var D=navigator.userAgent||navigator.vendor||window.opera;return D.match(/iPhone/i)||D.match(/iPod/i)?z:S}ie.exports=K()},"./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css":(ie,we,P)=>{P.r(we),P.d(we,{default:()=>ye});var p=P("./node_modules/css-loader/dist/runtime/sourceMaps.js"),S=P.n(p),z=P("./node_modules/css-loader/dist/runtime/api.js"),K=P.n(z),D=P("./node_modules/css-loader/dist/runtime/getUrl.js"),Q=P.n(D),V=new URL(P("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),P.b),T=new URL(P("data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"),P.b),F=new URL(P("data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"),P.b),N=new URL(P("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"),P.b),k=new URL(P("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"),P.b),G=K()(S()),Z=Q()(V),ne=Q()(T),te=Q()(F),de=Q()(N),oe=Q()(k);G.push([ie.id,`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url(`+Z+`) 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url(`+ne+`) 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url(`+te+`);
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(`+de+`) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(`+oe+`) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`,"",{version:3,sources:["webpack://./src/style/aframe.css"],names:[],mappings:"AAAA,sCAAsC;AACtC;EACE,SAAS;EACT,OAAO;EACP,eAAe;EACf,QAAQ;EACR,MAAM;AACR;;AAEA;EACE,YAAY;EACZ,SAAS;EACT,gBAAgB;EAChB,UAAU;EACV,WAAW;AACb;;AAEA,oDAAoD;AACpD;EACE,sBAAsB;EACtB,uBAAuB;EACvB,iBAAiB;EACjB,kBAAkB;EAClB,mBAAmB;EACnB,oBAAoB;EACpB,0BAA0B;AAC5B;;AAEA;;EAEE,UAAU;EACV,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA,gEAAgE;AAChE;EACE,6BAA6B;AAC/B;;AAEA;EACE,wBAAwB;AAC1B;;AAEA;EACE,YAAY;EACZ,OAAO;EACP,kBAAkB;EAClB,MAAM;EACN,WAAW;AACb;;AAEA;EACE,YAAY;EACZ,iBAAiB;EACjB,oBAAoB;AACtB;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,SAAS;EACT,QAAQ;EACR,iBAAiB;EACjB,WAAW;EACX,qBAAqB;EACrB,eAAe;EACf,8BAA8B;EAC9B,kBAAkB;EAClB,cAAc;EACd,YAAY;AACd;;AAEA,+BAA+B;AAC/B,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,oBAAoB,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AAC7D,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;AACrE,4BAA4B,OAAO,UAAU,EAAE,EAAE,MAAM,UAAU,EAAE,EAAE;;AAErE;EACE,sCAAsC;EACtC,8CAA8C;AAChD;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,sBAAsB;EACtB,8BAA8B;AAChC;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,YAAY;EACZ,WAAW;AACb;;AAEA;;;;EAIE,aAAa;AACf;;AAEA;;EAEE,0DAA0D;AAC5D;;AAEA;EACE,6BAA6B;EAC7B,cAAc;EACd,qBAAqB;EACrB,6BAA6B;AAC/B;;AAEA;EACE,sBAAsB;EACtB,WAAW;EACX,gBAAgB;EAChB,kBAAkB;EAClB,UAAU;AACZ;;AAEA;;EAEE,kCAAkC;EAClC,eAAe;EACf,WAAW;EACX,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,WAAW;EACX,YAAY;AACd;;AAEA;EACE,WAAW;AACb;;AAEA;;;EAGE,WAAW;EACX,iBAAiB;EACjB,aAAa;AACf;;AAEA;EACE,yFAA4qB;AAC9qB;;AAEA;EACE,yFAAkzB;AACpzB;;AAEA;EACE,yDAA2qK;AAC7qK;;AAEA;;EAEE,wBAAwB;EACxB,SAAS;EACT,SAAS;EACT,eAAe;EACf,eAAe;EACf,gBAAgB;EAChB,kBAAkB;EAClB;;;;GAIC;EACD,gBAAgB;EAChB,cAAc;EACd,kBAAkB;EAClB,QAAQ;EACR,sCAAsC;EACtC,8CAA8C;EAC9C,aAAa;EACb,kBAAkB;EAClB,0BAA0B,EAAE,8CAA8C;AAC5E;;AAEA;EACE,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;;;;EAIE,yBAAyB;AAC3B;;AAEA;EACE,qCAAqC;AACvC;;AAEA;EACE,sBAAsB;EACtB,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,kBAAkB;EAClB,YAAY;EACZ,YAAY;EACZ,SAAS;EACT,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,4BAA4B;EAC5B,kCAAkC;EAClC,qBAAqB;EACrB,WAAW;EACX,kBAAkB;EAClB,WAAW;EACX,QAAQ;EACR,QAAQ;EACR,SAAS;AACX;;AAEA;;EAEE,eAAe;AACjB;;AAEA;EACE,SAAS;AACX;;AAEA;EACE,YAAY;AACd;;AAEA;EACE,2FAAivF;EACjvF,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,8CAA8C;EAC9C,cAAc;EACd,kBAAkB;EAClB,kBAAkB;EAClB,QAAQ;EACR,2BAA2B;EAC3B,WAAW;AACb;;AAEA;EACE,6DAA25B;EAC35B,YAAY;EACZ,YAAY;EACZ,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,oCAAoC;EACpC,kCAAkC;EAClC,kBAAkB;EAClB,eAAe;EACf,YAAY;EACZ,gBAAgB;EAChB,iBAAiB;EACjB,kBAAkB;EAClB,UAAU;EACV,SAAS;EACT,QAAQ;EACR,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,+BAA+B;EAC/B,wBAAwB;EACxB,SAAS;EACT,eAAe;EACf,gBAAgB;EAChB,OAAO;EACP,iBAAiB;EACjB,QAAQ;EACR,eAAe;EACf,MAAM;EACN,gBAAgB;AAClB;;AAEA;EACE,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,gCAAgC;EAChC,eAAe;EACf,YAAY;EACZ,aAAa;EACb,wBAAwB;EACxB,uBAAuB;EACvB,kCAAkC;EAClC,eAAe;EACf,kBAAkB;EAClB,YAAY;AACd;;AAEA;EACE,WAAW;EACX,WAAW;EACX,sBAAsB;EACtB,aAAa;EACb,uBAAuB;EACvB,qBAAqB;EACrB,sBAAsB;AACxB;;AAEA;EACE,qBAAqB;EACrB,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,oBAAoB;EACpB,oBAAoB;EACpB,WAAW;EACX,WAAW;AACb;;AAEA;EACE,eAAe;EACf,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,UAAU;EACV,eAAe;EACf,WAAW;EACX,kBAAkB;EAClB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,yCAAyC;EACzC,iCAAiC;EACjC,wEAAwE;EACxE,iBAAiB;AACnB;;AAEA;EACE,mEAAmE;AACrE;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;AAC3B;;AAEA;EACE,yBAAyB;EACzB,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,kBAAkB;EAClB,oBAAoB;EACpB,sBAAsB;EACtB,SAAS;EACT,OAAO;EACP,QAAQ;EACR,MAAM;EACN,YAAY;AACd;;AAEA;EACE,oBAAoB;AACtB",sourcesContent:[`/* .a-fullscreen means not embedded. */
html.a-fullscreen {
  bottom: 0;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
}

html.a-fullscreen body {
  height: 100%;
  margin: 0;
  overflow: hidden;
  padding: 0;
  width: 100%;
}

/* Class is removed when doing <a-scene embedded>. */
html.a-fullscreen .a-canvas {
  width: 100% !important;
  height: 100% !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  position: fixed !important;
}

html:not(.a-fullscreen) .a-enter-vr,
html:not(.a-fullscreen) .a-enter-ar {
  right: 5px;
  bottom: 5px;
}

html:not(.a-fullscreen) .a-enter-ar {
  right: 60px;
}

/* In chrome mobile the user agent stylesheet set it to white  */
:-webkit-full-screen {
  background-color: transparent;
}

.a-hidden {
  display: none !important;
}

.a-canvas {
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  width: 100%;
}

.a-canvas.a-grab-cursor:hover {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

canvas.a-canvas.a-mouse-cursor-hover:hover {
  cursor: pointer;
}

.a-inspector-loader {
  background-color: #ed3160;
  position: fixed;
  left: 3px;
  top: 3px;
  padding: 6px 10px;
  color: #fff;
  text-decoration: none;
  font-size: 12px;
  font-family: Roboto,sans-serif;
  text-align: center;
  z-index: 99999;
  width: 204px;
}

/* Inspector loader animation */
@keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }
@-webkit-keyframes dots-1 { from { opacity: 0; } 25% { opacity: 1; } }
@-webkit-keyframes dots-2 { from { opacity: 0; } 50% { opacity: 1; } }
@-webkit-keyframes dots-3 { from { opacity: 0; } 75% { opacity: 1; } }

.a-inspector-loader .dots span {
  animation: dots-1 2s infinite steps(1);
  -webkit-animation: dots-1 2s infinite steps(1);
}

.a-inspector-loader .dots span:first-child + span {
  animation-name: dots-2;
  -webkit-animation-name: dots-2;
}

.a-inspector-loader .dots span:first-child + span + span {
  animation-name: dots-3;
  -webkit-animation-name: dots-3;
}

a-scene {
  display: block;
  position: relative;
  height: 100%;
  width: 100%;
}

a-assets,
a-scene video,
a-scene img,
a-scene audio {
  display: none;
}

.a-enter-vr-modal,
.a-orientation-modal {
  font-family: Consolas, Andale Mono, Courier New, monospace;
}

.a-enter-vr-modal a {
  border-bottom: 1px solid #fff;
  padding: 2px 0;
  text-decoration: none;
  transition: .1s color ease-in;
}

.a-enter-vr-modal a:hover {
  background-color: #fff;
  color: #111;
  padding: 2px 4px;
  position: relative;
  left: -4px;
}

.a-enter-vr,
.a-enter-ar {
  font-family: sans-serif, monospace;
  font-size: 13px;
  width: 100%;
  font-weight: 200;
  line-height: 16px;
  position: absolute;
  right: 20px;
  bottom: 20px;
}

.a-enter-ar.xr {
  right: 90px;
}

.a-enter-vr-button,
.a-enter-vr-modal,
.a-enter-vr-modal a {
  color: #fff;
  user-select: none;
  outline: none;
}

.a-enter-vr-button {
  background: rgba(0, 0, 0, 0.35) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z' fill='%23fff'/%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-ar-button {
  background: rgba(0, 0, 0, 0.20) url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='108' height='62' viewBox='0 0 108 62'%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z' fill='%23fff'/%3E%3Cpath d='M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z' fill='%23fff'/%3E%3Cpath d='M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z' fill='%23fff'/%3E%3C/svg%3E") 50% 50% no-repeat;
}

.a-enter-vr.fullscreen .a-enter-vr-button {
  background-image: url("data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8' standalone='no'%3F%3E%3Csvg width='108' height='62' viewBox='0 0 108 62' version='1.1' id='svg320' sodipodi:docname='fullscreen-aframe.svg' xml:space='preserve' inkscape:version='1.2.1 (9c6d41e  2022-07-14)' xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape' xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd' xmlns='http://www.w3.org/2000/svg' xmlns:svg='http://www.w3.org/2000/svg' xmlns:rdf='http://www.w3.org/1999/02/22-rdf-syntax-ns%23' xmlns:cc='http://creativecommons.org/ns%23' xmlns:dc='http://purl.org/dc/elements/1.1/'%3E%3Cdefs id='defs324' /%3E%3Csodipodi:namedview id='namedview322' pagecolor='%23ffffff' bordercolor='%23000000' borderopacity='0.25' inkscape:showpageshadow='2' inkscape:pageopacity='0.0' inkscape:pagecheckerboard='0' inkscape:deskcolor='%23d1d1d1' showgrid='false' inkscape:zoom='3.8064516' inkscape:cx='91.423729' inkscape:cy='-1.4449153' inkscape:window-width='1440' inkscape:window-height='847' inkscape:window-x='32' inkscape:window-y='25' inkscape:window-maximized='0' inkscape:current-layer='svg320' /%3E%3Ctitle id='title312'%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d='M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z' fill='%23fff' id='path314' style='fill:%23ffffff' /%3E%3Cg id='g356' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g358' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g360' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g362' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g364' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g366' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g368' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g370' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g372' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g374' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g376' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g378' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g380' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g382' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cg id='g384' transform='translate(-206.61017 -232.61864)'%3E%3C/g%3E%3Cmetadata id='metadata561'%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=''%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d='m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4' id='path596' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4' id='path598' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4' id='path600' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3Cpath d='m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616' id='path602' style='fill:%23ffffff%3Bstroke-width:1.50194' /%3E%3C/svg%3E");
}

.a-enter-vr-button,
.a-enter-ar-button {
  background-size: 90% 90%;
  border: 0;
  bottom: 0;
  cursor: pointer;
  min-width: 58px;
  min-height: 34px;
  /* 1.74418604651 */
  /*
    In order to keep the aspect ratio when resizing
    padding-top percentages are relative to the containing block's width.
    http://stackoverflow.com/questions/12121090/responsively-change-div-size-keeping-aspect-ratio
  */
  padding-right: 0;
  padding-top: 0;
  position: absolute;
  right: 0;
  transition: background-color .05s ease;
  -webkit-transition: background-color .05s ease;
  z-index: 9999;
  border-radius: 8px;
  touch-action: manipulation; /* Prevent iOS double tap zoom on the button */
}

.a-enter-ar-button {
  background-size: 100% 90%;
  border-radius: 7px;
}

.a-enter-ar-button:active,
.a-enter-ar-button:hover,
.a-enter-vr-button:active,
.a-enter-vr-button:hover {
  background-color: #ef2d5e;
}

.a-enter-vr-button.resethover {
  background-color: rgba(0, 0, 0, 0.35);
}

.a-enter-vr-modal {
  background-color: #666;
  border-radius: 0;
  display: none;
  min-height: 32px;
  margin-right: 70px;
  padding: 9px;
  width: 280px;
  right: 2%;
  position: absolute;
}

.a-enter-vr-modal:after {
  border-bottom: 10px solid transparent;
  border-left: 10px solid #666;
  border-top: 10px solid transparent;
  display: inline-block;
  content: '';
  position: absolute;
  right: -5px;
  top: 5px;
  width: 0;
  height: 0;
}

.a-enter-vr-modal p,
.a-enter-vr-modal a {
  display: inline;
}

.a-enter-vr-modal p {
  margin: 0;
}

.a-enter-vr-modal p:after {
  content: ' ';
}

.a-orientation-modal {
  background: rgba(244, 244, 244, 1) url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center no-repeat;
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-orientation-modal:after {
  color: #666;
  content: "Insert phone into Cardboard holder.";
  display: block;
  position: absolute;
  text-align: center;
  top: 70%;
  transform: translateY(-70%);
  width: 100%;
}

.a-orientation-modal button {
  background: url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;
  border: none;
  height: 50px;
  text-indent: -9999px;
  width: 50px;
}

.a-loader-title {
  background-color: rgba(0, 0, 0, 0.6);
  font-family: sans-serif, monospace;
  text-align: center;
  font-size: 20px;
  height: 50px;
  font-weight: 300;
  line-height: 50px;
  position: absolute;
  right: 0px;
  left: 0px;
  top: 0px;
  color: white;
}

.a-modal {
  position: absolute;
  background: rgba(0, 0, 0, 0.60);
  background-size: 50% 50%;
  bottom: 0;
  font-size: 14px;
  font-weight: 600;
  left: 0;
  line-height: 20px;
  right: 0;
  position: fixed;
  top: 0;
  z-index: 9999999;
}

.a-dialog {
  position: relative;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  z-index: 199995;
  width: 300px;
  height: 200px;
  background-size: contain;
  background-color: white;
  font-family: sans-serif, monospace;
  font-size: 20px;
  border-radius: 3px;
  padding: 6px;
}

.a-dialog-text-container {
  width: 100%;
  height: 70%;
  align-self: flex-start;
  display: flex;
  justify-content: center;
  align-content: center;
  flex-direction: column;
}

.a-dialog-text {
  display: inline-block;
  font-weight: normal;
  font-size: 14pt;
  margin: 8px;
}

.a-dialog-buttons-container {
  display: inline-flex;
  align-self: flex-end;
  width: 100%;
  height: 30%;
}

.a-dialog-button {
  cursor: pointer;
  align-self: center;
  opacity: 0.9;
  height: 80%;
  width: 50%;
  font-size: 12pt;
  margin: 4px;
  border-radius: 2px;
  text-align:center;
  border: none;
  display: inline-block;
  -webkit-transition: all 0.25s ease-in-out;
  transition: all 0.25s ease-in-out;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.10), 0 1px 2px rgba(0, 0, 0, 0.20);
  user-select: none;
}

.a-dialog-permission-button:hover {
  box-shadow: 0 7px 14px rgba(0,0,0,0.20), 0 2px 2px rgba(0,0,0,0.20);
}

.a-dialog-allow-button {
  background-color: #00ceff;
}

.a-dialog-deny-button {
  background-color: #ff005b;
}

.a-dialog-ok-button {
  background-color: #00ceff;
  width: 100%;
}

.a-dom-overlay:not(.a-no-style) {
  overflow: hidden;
  position: absolute;
  pointer-events: none;
  box-sizing: border-box;
  bottom: 0;
  left: 0;
  right: 0;
  top: 0;
  padding: 1em;
}

.a-dom-overlay:not(.a-no-style)>* {
  pointer-events: auto;
}
`],sourceRoot:""}]);const ye=G},"./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css":(ie,we,P)=>{P.r(we),P.d(we,{default:()=>Q});var p=P("./node_modules/css-loader/dist/runtime/sourceMaps.js"),S=P.n(p),z=P("./node_modules/css-loader/dist/runtime/api.js"),K=P.n(z),D=K()(S());D.push([ie.id,`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`,"",{version:3,sources:["webpack://./src/style/rStats.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,cAAc;EACd,gBAAgB;EAChB,oBAAoB;EACpB,SAAS;EACT,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,aAAa;EACb,eAAe;EACf,QAAQ;EACR,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,gBAAgB;EAChB,eAAe;EACf,UAAU;AACZ;;AAEA;EACE,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,sCAAsC;EACtC,8BAA8B;EAC9B,kBAAkB;AACpB;;AAEA;EACE,gBAAgB;AAClB;;AAEA;EACE,mBAAmB;EACnB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;EACb,YAAY;EACZ,sCAAsC;EACtC,8BAA8B;EAC9B,aAAa;AACf;;AAEA;EACE,cAAc;EACd;;;;;;;;2BAQyB;AAC3B;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,WAAW;AACb;;AAEA;EACE,gBAAgB;EAChB,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;EACR,iBAAiB;EACjB,WAAW;AACb;;AAEA;EACE,4BAA4B;EAC5B,gBAAgB;EAChB,QAAQ;AACV;;AAEA;EACE;IACE,UAAU;IACV,SAAS;EACX;AACF",sourcesContent:[`.rs-base {
  background-color: #333;
  color: #fafafa;
  border-radius: 0;
  font: 10px monospace;
  left: 5px;
  line-height: 1em;
  opacity: 0.85;
  overflow: hidden;
  padding: 10px;
  position: fixed;
  top: 5px;
  width: 300px;
  z-index: 10000;
}

.rs-base div.hidden {
  display: none;
}

.rs-base h1 {
  color: #fff;
  cursor: pointer;
  font-size: 1.4em;
  font-weight: 300;
  margin: 0 0 5px;
  padding: 0;
}

.rs-group {
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  -webkit-flex-direction: column-reverse;
  flex-direction: column-reverse;
  margin-bottom: 5px;
}

.rs-group:last-child {
  margin-bottom: 0;
}

.rs-counter-base {
  align-items: center;
  display: -webkit-box;
  display: -webkit-flex;
  display: flex;
  height: 10px;
  -webkit-justify-content: space-between;
  justify-content: space-between;
  margin: 2px 0;
}

.rs-counter-base.alarm {
  color: #b70000;
  text-shadow: 0 0 0 #b70000,
               0 0 1px #fff,
               0 0 1px #fff,
               0 0 2px #fff,
               0 0 2px #fff,
               0 0 3px #fff,
               0 0 3px #fff,
               0 0 4px #fff,
               0 0 4px #fff;
}

.rs-counter-id {
  font-weight: 300;
  -webkit-box-ordinal-group: 0;
  -webkit-order: 0;
  order: 0;
  width: 54px;
}

.rs-counter-value {
  font-weight: 300;
  -webkit-box-ordinal-group: 1;
  -webkit-order: 1;
  order: 1;
  text-align: right;
  width: 35px;
}

.rs-canvas {
  -webkit-box-ordinal-group: 2;
  -webkit-order: 2;
  order: 2;
}

@media (min-width: 480px) {
  .rs-base {
    left: 20px;
    top: 20px;
  }
}
`],sourceRoot:""}]);const Q=D},"./src/style/aframe.css":(ie,we,P)=>{P.r(we),P.d(we,{default:()=>te});var p=P("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),S=P.n(p),z=P("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),K=P.n(z),D=P("./node_modules/style-loader/dist/runtime/insertBySelector.js"),Q=P.n(D),V=P("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),T=P.n(V),F=P("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),N=P.n(F),k=P("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),G=P.n(k),Z=P("./node_modules/css-loader/dist/cjs.js!./src/style/aframe.css"),ne={};ne.styleTagTransform=G(),ne.setAttributes=T(),ne.insert=Q().bind(null,"head"),ne.domAPI=K(),ne.insertStyleElement=N(),S()(Z.default,ne);const te=Z.default&&Z.default.locals?Z.default.locals:void 0},"./src/style/rStats.css":(ie,we,P)=>{P.r(we),P.d(we,{default:()=>te});var p=P("./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js"),S=P.n(p),z=P("./node_modules/style-loader/dist/runtime/styleDomAPI.js"),K=P.n(z),D=P("./node_modules/style-loader/dist/runtime/insertBySelector.js"),Q=P.n(D),V=P("./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js"),T=P.n(V),F=P("./node_modules/style-loader/dist/runtime/insertStyleElement.js"),N=P.n(F),k=P("./node_modules/style-loader/dist/runtime/styleTagTransform.js"),G=P.n(k),Z=P("./node_modules/css-loader/dist/cjs.js!./src/style/rStats.css"),ne={};ne.styleTagTransform=G(),ne.setAttributes=T(),ne.insert=Q().bind(null,"head"),ne.domAPI=K(),ne.insertStyleElement=N(),S()(Z.default,ne);const te=Z.default&&Z.default.locals?Z.default.locals:void 0},"./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js":ie=>{var we=[];function P(z){for(var K=-1,D=0;D<we.length;D++)if(we[D].identifier===z){K=D;break}return K}function p(z,K){for(var D={},Q=[],V=0;V<z.length;V++){var T=z[V],F=K.base?T[0]+K.base:T[0],N=D[F]||0,k="".concat(F," ").concat(N);D[F]=N+1;var G=P(k),Z={css:T[1],media:T[2],sourceMap:T[3],supports:T[4],layer:T[5]};if(G!==-1)we[G].references++,we[G].updater(Z);else{var ne=S(Z,K);K.byIndex=V,we.splice(V,0,{identifier:k,updater:ne,references:1})}Q.push(k)}return Q}function S(z,K){var D=K.domAPI(K);D.update(z);var Q=function(T){if(T){if(T.css===z.css&&T.media===z.media&&T.sourceMap===z.sourceMap&&T.supports===z.supports&&T.layer===z.layer)return;D.update(z=T)}else D.remove()};return Q}ie.exports=function(z,K){K=K||{},z=z||[];var D=p(z,K);return function(V){V=V||[];for(var T=0;T<D.length;T++){var F=D[T],N=P(F);we[N].references--}for(var k=p(V,K),G=0;G<D.length;G++){var Z=D[G],ne=P(Z);we[ne].references===0&&(we[ne].updater(),we.splice(ne,1))}D=k}}},"./node_modules/style-loader/dist/runtime/insertBySelector.js":ie=>{var we={};function P(S){if(typeof we[S]>"u"){var z=document.querySelector(S);if(window.HTMLIFrameElement&&z instanceof window.HTMLIFrameElement)try{z=z.contentDocument.head}catch{z=null}we[S]=z}return we[S]}function p(S,z){var K=P(S);if(!K)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");K.appendChild(z)}ie.exports=p},"./node_modules/style-loader/dist/runtime/insertStyleElement.js":ie=>{function we(P){var p=document.createElement("style");return P.setAttributes(p,P.attributes),P.insert(p,P.options),p}ie.exports=we},"./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js":(ie,we,P)=>{function p(S){var z=P.nc;z&&S.setAttribute("nonce",z)}ie.exports=p},"./node_modules/style-loader/dist/runtime/styleDomAPI.js":ie=>{function we(S,z,K){var D="";K.supports&&(D+="@supports (".concat(K.supports,") {")),K.media&&(D+="@media ".concat(K.media," {"));var Q=typeof K.layer<"u";Q&&(D+="@layer".concat(K.layer.length>0?" ".concat(K.layer):""," {")),D+=K.css,Q&&(D+="}"),K.media&&(D+="}"),K.supports&&(D+="}");var V=K.sourceMap;V&&typeof btoa<"u"&&(D+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(V))))," */")),z.styleTagTransform(D,S,z.options)}function P(S){if(S.parentNode===null)return!1;S.parentNode.removeChild(S)}function p(S){if(typeof document>"u")return{update:function(){},remove:function(){}};var z=S.insertStyleElement(S);return{update:function(D){we(z,S,D)},remove:function(){P(z)}}}ie.exports=p},"./node_modules/style-loader/dist/runtime/styleTagTransform.js":ie=>{function we(P,p){if(p.styleSheet)p.styleSheet.cssText=P;else{for(;p.firstChild;)p.removeChild(p.firstChild);p.appendChild(document.createTextNode(P))}}ie.exports=we},"data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E":ie=>{ie.exports="data:image/svg+xml,%3C%3Fxml version=%271.0%27 encoding=%27UTF-8%27 standalone=%27no%27%3F%3E%3Csvg width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27 version=%271.1%27 id=%27svg320%27 sodipodi:docname=%27fullscreen-aframe.svg%27 xml:space=%27preserve%27 inkscape:version=%271.2.1 %289c6d41e  2022-07-14%29%27 xmlns:inkscape=%27http://www.inkscape.org/namespaces/inkscape%27 xmlns:sodipodi=%27http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd%27 xmlns=%27http://www.w3.org/2000/svg%27 xmlns:svg=%27http://www.w3.org/2000/svg%27 xmlns:rdf=%27http://www.w3.org/1999/02/22-rdf-syntax-ns%23%27 xmlns:cc=%27http://creativecommons.org/ns%23%27 xmlns:dc=%27http://purl.org/dc/elements/1.1/%27%3E%3Cdefs id=%27defs324%27 /%3E%3Csodipodi:namedview id=%27namedview322%27 pagecolor=%27%23ffffff%27 bordercolor=%27%23000000%27 borderopacity=%270.25%27 inkscape:showpageshadow=%272%27 inkscape:pageopacity=%270.0%27 inkscape:pagecheckerboard=%270%27 inkscape:deskcolor=%27%23d1d1d1%27 showgrid=%27false%27 inkscape:zoom=%273.8064516%27 inkscape:cx=%2791.423729%27 inkscape:cy=%27-1.4449153%27 inkscape:window-width=%271440%27 inkscape:window-height=%27847%27 inkscape:window-x=%2732%27 inkscape:window-y=%2725%27 inkscape:window-maximized=%270%27 inkscape:current-layer=%27svg320%27 /%3E%3Ctitle id=%27title312%27%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96 0H12A12 12 0 0 0 0 12V50A12 12 0 0 0 12 62H96a12 12 0 0 0 12-12V12A12 12 0 0 0 96 0Zm8 50a8 8 0 0 1-8 8H12a8 8 0 0 1-8-8V12a8 8 0 0 1 8-8H96a8 8 0 0 1 8 8Z%27 fill=%27%23fff%27 id=%27path314%27 style=%27fill:%23ffffff%27 /%3E%3Cg id=%27g356%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g358%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g360%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g362%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g364%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g366%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g368%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g370%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g372%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g374%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g376%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g378%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g380%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g382%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cg id=%27g384%27 transform=%27translate%28-206.61017 -232.61864%29%27%3E%3C/g%3E%3Cmetadata id=%27metadata561%27%3E%3Crdf:RDF%3E%3Ccc:Work rdf:about=%27%27%3E%3Cdc:title%3Eaframe-armode-noborder-reduced-tracking%3C/dc:title%3E%3C/cc:Work%3E%3C/rdf:RDF%3E%3C/metadata%3E%3Cpath d=%27m 98.168511 40.083649 c 0 -1.303681 -0.998788 -2.358041 -2.239389 -2.358041 -1.230088 0.0031 -2.240892 1.05436 -2.240892 2.358041 v 4.881296 l -9.041661 -9.041662 c -0.874129 -0.875631 -2.288954 -0.875631 -3.16308 0 -0.874129 0.874126 -0.874129 2.293459 0 3.167585 l 8.995101 8.992101 h -4.858767 c -1.323206 0.0031 -2.389583 1.004796 -2.389583 2.239386 0 1.237598 1.066377 2.237888 2.389583 2.237888 h 10.154599 c 1.323206 0 2.388082 -0.998789 2.392587 -2.237888 -0.0044 -0.03305 -0.009 -0.05858 -0.0134 -0.09161 0.0046 -0.04207 0.0134 -0.08712 0.0134 -0.13066 V 40.085172 h -1.52e-4%27 id=%27path596%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 23.091002 35.921781 -9.026643 9.041662 v -4.881296 c 0 -1.303681 -1.009302 -2.355037 -2.242393 -2.358041 -1.237598 0 -2.237888 1.05436 -2.237888 2.358041 l -0.0031 10.016421 c 0 0.04356 0.01211 0.08862 0.0015 0.130659 -0.0031 0.03153 -0.009 0.05709 -0.01211 0.09161 0.0031 1.239099 1.069379 2.237888 2.391085 2.237888 h 10.156101 c 1.320202 0 2.388079 -1.000291 2.388079 -2.237888 0 -1.234591 -1.067877 -2.236383 -2.388079 -2.239387 h -4.858767 l 8.995101 -8.9921 c 0.871126 -0.874127 0.871126 -2.293459 0 -3.167586 -0.875628 -0.877132 -2.291957 -0.877132 -3.169087 -1.52e-4%27 id=%27path598%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 84.649572 25.978033 9.041662 -9.041664 v 4.881298 c 0 1.299176 1.010806 2.350532 2.240891 2.355037 1.240601 0 2.23939 -1.055861 2.23939 -2.355037 V 11.798242 c 0 -0.04356 -0.009 -0.08862 -0.0134 -0.127671 0.0044 -0.03153 0.009 -0.06157 0.0134 -0.09313 -0.0044 -1.240598 -1.069379 -2.2393873 -2.391085 -2.2393873 h -10.1546 c -1.323205 0 -2.38958 0.9987893 -2.38958 2.2393873 0 1.233091 1.066375 2.237887 2.38958 2.240891 h 4.858768 l -8.995102 8.9921 c -0.874129 0.872625 -0.874129 2.288954 0 3.161578 0.874127 0.880137 2.288951 0.880137 3.16308 1.5e-4%27 id=%27path600%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3Cpath d=%27m 17.264988 13.822853 h 4.857265 c 1.320202 -0.0031 2.388079 -1.0078 2.388079 -2.240889 0 -1.240601 -1.067877 -2.2393893 -2.388079 -2.2393893 H 11.967654 c -1.321707 0 -2.388082 0.9987883 -2.391085 2.2393893 0.0031 0.03153 0.009 0.06157 0.01211 0.09313 -0.0031 0.03905 -0.0015 0.08262 -0.0015 0.127671 l 0.0031 10.020926 c 0 1.299176 1.00029 2.355038 2.237887 2.355038 1.233092 -0.0044 2.242393 -1.055862 2.242393 -2.355038 v -4.881295 l 9.026644 9.041661 c 0.877132 0.878635 2.293459 0.878635 3.169087 0 0.871125 -0.872624 0.871125 -2.288953 0 -3.161577 l -8.995282 -8.993616%27 id=%27path602%27 style=%27fill:%23ffffff%3Bstroke-width:1.50194%27 /%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":ie=>{ie.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-armode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0Zm8,50a8,8,0,0,1-8,8H12a8,8,0,0,1-8-8V12a8,8,0,0,1,8-8H96a8,8,0,0,1,8,8Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M43.35,39.82H32.51L30.45,46H23.88L35,16h5.73L52,46H45.43Zm-9.17-5h7.5L37.91,23.58Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M68.11,35H63.18V46H57V16H68.15q5.31,0,8.2,2.37a8.18,8.18,0,0,1,2.88,6.7,9.22,9.22,0,0,1-1.33,5.12,9.09,9.09,0,0,1-4,3.26l6.49,12.26V46H73.73Zm-4.93-5h5a5.09,5.09,0,0,0,3.6-1.18,4.21,4.21,0,0,0,1.28-3.27,4.56,4.56,0,0,0-1.2-3.34A5,5,0,0,0,68.15,21h-5Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E":ie=>{ie.exports="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 width=%27108%27 height=%2762%27 viewBox=%270 0 108 62%27%3E%3Ctitle%3Eaframe-vrmode-noborder-reduced-tracking%3C/title%3E%3Cpath d=%27M68.81,21.56H64.23v8.27h4.58a4.13,4.13,0,0,0,3.1-1.09,4.2,4.2,0,0,0,1-3,4.24,4.24,0,0,0-1-3A4.05,4.05,0,0,0,68.81,21.56Z%27 fill=%27%23fff%27/%3E%3Cpath d=%27M96,0H12A12,12,0,0,0,0,12V50A12,12,0,0,0,12,62H96a12,12,0,0,0,12-12V12A12,12,0,0,0,96,0ZM41.9,46H34L24,16h8l6,21.84,6-21.84H52Zm39.29,0H73.44L68.15,35.39H64.23V46H57V16H68.81q5.32,0,8.34,2.37a8,8,0,0,1,3,6.69,9.68,9.68,0,0,1-1.27,5.18,8.9,8.9,0,0,1-4,3.34l6.26,12.11Z%27 fill=%27%23fff%27/%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E":ie=>{ie.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E"},"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E":ie=>{ie.exports="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E"},"./node_modules/three/build/three.module.js":(ie,we,P)=>{P.r(we),P.d(we,{ACESFilmicToneMapping:()=>Ti,AddEquation:()=>Pe,AddOperation:()=>Ms,AdditiveAnimationBlendMode:()=>r0,AdditiveBlending:()=>oe,AgXToneMapping:()=>Xe,AlphaFormat:()=>ua,AlwaysCompare:()=>ac,AlwaysDepth:()=>tr,AlwaysStencilFunc:()=>x1,AmbientLight:()=>TA,AnimationAction:()=>zA,AnimationClip:()=>ff,AnimationLoader:()=>M3,AnimationMixer:()=>eg,AnimationObjectGroup:()=>$3,AnimationUtils:()=>w3,ArcCurve:()=>zp,ArrayCamera:()=>g2,ArrowHelper:()=>Cg,AttachedBindMode:()=>tt,Audio:()=>GA,AudioAnalyser:()=>Q3,AudioContext:()=>Z2,AudioListener:()=>U3,AudioLoader:()=>F3,AxesHelper:()=>_g,BackSide:()=>Z,BasicDepthPacking:()=>ha,BasicShadowMap:()=>T,BatchedMesh:()=>Op,Bone:()=>_2,BooleanKeyframeTrack:()=>ch,Box2:()=>lg,Box3:()=>jn,Box3Helper:()=>yg,BoxGeometry:()=>U0,BoxHelper:()=>Eg,BufferAttribute:()=>Zr,BufferGeometry:()=>rr,BufferGeometryLoader:()=>DA,ByteType:()=>Vo,Cache:()=>q1,Camera:()=>Ba,CameraHelper:()=>vg,CanvasTexture:()=>Wm,CapsuleGeometry:()=>Gf,CatmullRomCurve3:()=>Wp,CineonToneMapping:()=>Jr,CircleGeometry:()=>Qf,ClampToEdgeWrapping:()=>St,Clock:()=>NA,Color:()=>un,ColorKeyframeTrack:()=>W2,ColorManagement:()=>jr,CompressedArrayTexture:()=>Vm,CompressedCubeTexture:()=>zm,CompressedTexture:()=>kf,CompressedTextureLoader:()=>S3,ConeGeometry:()=>Vf,ConstantAlphaFactor:()=>sn,ConstantColorFactor:()=>ci,CubeCamera:()=>_c,CubeReflectionMapping:()=>Ie,CubeRefractionMapping:()=>ae,CubeTexture:()=>ao,CubeTextureLoader:()=>b3,CubeUVReflectionMapping:()=>Ze,CubicBezierCurve:()=>D2,CubicBezierCurve3:()=>Xp,CubicInterpolant:()=>gA,CullFaceBack:()=>D,CullFaceFront:()=>Q,CullFaceFrontBack:()=>V,CullFaceNone:()=>K,Curve:()=>zl,CurvePath:()=>qp,CustomBlending:()=>Ne,CustomToneMapping:()=>Ye,CylinderGeometry:()=>Md,Cylindrical:()=>ag,Data3DTexture:()=>ar,DataArrayTexture:()=>hl,DataTexture:()=>zc,DataTextureLoader:()=>T3,DataUtils:()=>yu,DecrementStencilOp:()=>$c,DecrementWrapStencilOp:()=>w1,DefaultLoadingManager:()=>yA,DepthFormat:()=>kt,DepthStencilFormat:()=>di,DepthTexture:()=>z1,DetachedBindMode:()=>ot,DirectionalLight:()=>bA,DirectionalLightHelper:()=>gg,DiscreteInterpolant:()=>vA,DisplayP3ColorSpace:()=>ll,DodecahedronGeometry:()=>zf,DoubleSide:()=>ne,DstAlphaFactor:()=>Mt,DstColorFactor:()=>Yt,DynamicCopyUsage:()=>lu,DynamicDrawUsage:()=>nu,DynamicReadUsage:()=>lc,EdgesGeometry:()=>Jp,EllipseCurve:()=>Nf,EqualCompare:()=>nc,EqualDepth:()=>cr,EqualStencilFunc:()=>jc,EquirectangularReflectionMapping:()=>ge,EquirectangularRefractionMapping:()=>He,Euler:()=>a0,EventDispatcher:()=>uo,ExtrudeGeometry:()=>Zf,FileLoader:()=>Z1,Float16BufferAttribute:()=>ks,Float32BufferAttribute:()=>Ai,FloatType:()=>Rs,Fog:()=>yf,FogExp2:()=>Ef,FramebufferTexture:()=>Qm,FrontSide:()=>G,Frustum:()=>il,GLBufferAttribute:()=>rg,GLSL1:()=>uu,GLSL3:()=>M1,GreaterCompare:()=>rc,GreaterDepth:()=>je,GreaterEqualCompare:()=>oc,GreaterEqualDepth:()=>Ir,GreaterEqualStencilFunc:()=>iu,GreaterStencilFunc:()=>tu,GridHelper:()=>Ag,Group:()=>ih,HalfFloatType:()=>ir,HemisphereLight:()=>wA,HemisphereLightHelper:()=>pg,IcosahedronGeometry:()=>$f,ImageBitmapLoader:()=>O3,ImageLoader:()=>pf,ImageUtils:()=>Xa,IncrementStencilOp:()=>Ml,IncrementWrapStencilOp:()=>y1,InstancedBufferAttribute:()=>Cd,InstancedBufferGeometry:()=>LA,InstancedInterleavedBuffer:()=>ng,InstancedMesh:()=>Lp,Int16BufferAttribute:()=>i1,Int32BufferAttribute:()=>wu,Int8BufferAttribute:()=>t1,IntType:()=>W0,InterleavedBuffer:()=>wf,InterleavedBufferAttribute:()=>rh,Interpolant:()=>uf,InterpolateDiscrete:()=>Js,InterpolateLinear:()=>vs,InterpolateSmooth:()=>Zs,InvertStencilOp:()=>Kl,KeepStencilOp:()=>m0,KeyframeTrack:()=>Wl,LOD:()=>Cp,LatheGeometry:()=>rf,Layers:()=>xa,LessCompare:()=>ic,LessDepth:()=>Jn,LessEqualCompare:()=>Xl,LessEqualDepth:()=>bn,LessEqualStencilFunc:()=>eu,LessStencilFunc:()=>ec,Light:()=>Yc,LightProbe:()=>BA,Line:()=>Kc,Line3:()=>cg,LineBasicMaterial:()=>la,LineCurve:()=>P2,LineCurve3:()=>Yp,LineDashedMaterial:()=>pA,LineLoop:()=>Hp,LineSegments:()=>m1,LinearDisplayP3ColorSpace:()=>fa,LinearFilter:()=>kn,LinearInterpolant:()=>z2,LinearMipMapLinearFilter:()=>Hs,LinearMipMapNearestFilter:()=>Dr,LinearMipmapLinearFilter:()=>Pr,LinearMipmapNearestFilter:()=>Jt,LinearSRGBColorSpace:()=>xo,LinearToneMapping:()=>Co,LinearTransfer:()=>cl,Loader:()=>Ha,LoaderUtils:()=>J2,LoadingManager:()=>K2,LoopOnce:()=>ls,LoopPingPong:()=>qs,LoopRepeat:()=>Vr,LuminanceAlphaFormat:()=>si,LuminanceFormat:()=>Pt,MOUSE:()=>S,Material:()=>us,MaterialLoader:()=>s2,MathUtils:()=>mu,Matrix3:()=>Nn,Matrix4:()=>on,MaxEquation:()=>Ce,Mesh:()=>Bs,MeshBasicMaterial:()=>es,MeshDepthMaterial:()=>A2,MeshDistanceMaterial:()=>m2,MeshLambertMaterial:()=>dA,MeshMatcapMaterial:()=>fA,MeshNormalMaterial:()=>hA,MeshPhongMaterial:()=>cA,MeshPhysicalMaterial:()=>lA,MeshStandardMaterial:()=>G2,MeshToonMaterial:()=>uA,MinEquation:()=>ke,MirroredRepeatWrapping:()=>Di,MixOperation:()=>Wn,MultiplyBlending:()=>Me,MultiplyOperation:()=>mr,NearestFilter:()=>Wi,NearestMipMapLinearFilter:()=>Ss,NearestMipMapNearestFilter:()=>Ui,NearestMipmapLinearFilter:()=>Ji,NearestMipmapNearestFilter:()=>Oi,NeutralToneMapping:()=>lt,NeverCompare:()=>tc,NeverDepth:()=>Xn,NeverStencilFunc:()=>C1,NoBlending:()=>te,NoColorSpace:()=>co,NoToneMapping:()=>ts,NormalAnimationBlendMode:()=>D0,NormalBlending:()=>de,NotEqualCompare:()=>sc,NotEqualDepth:()=>xs,NotEqualStencilFunc:()=>_1,NumberKeyframeTrack:()=>hf,Object3D:()=>Nr,ObjectLoader:()=>D3,ObjectSpaceNormalMap:()=>M0,OctahedronGeometry:()=>lf,OneFactor:()=>Oe,OneMinusConstantAlphaFactor:()=>In,OneMinusConstantColorFactor:()=>Qi,OneMinusDstAlphaFactor:()=>Rt,OneMinusDstColorFactor:()=>zt,OneMinusSrcAlphaFactor:()=>dt,OneMinusSrcColorFactor:()=>Ve,OrthographicCamera:()=>H1,P3Primaries:()=>ul,PCFShadowMap:()=>F,PCFSoftShadowMap:()=>N,PMREMGenerator:()=>Cs,Path:()=>nf,PerspectiveCamera:()=>Ls,Plane:()=>vo,PlaneGeometry:()=>Da,PlaneHelper:()=>wg,PointLight:()=>SA,PointLightHelper:()=>dg,Points:()=>Qp,PointsMaterial:()=>b2,PolarGridHelper:()=>mg,PolyhedronGeometry:()=>Xc,PositionalAudio:()=>G3,PropertyBinding:()=>ss,PropertyMixer:()=>VA,QuadraticBezierCurve:()=>O2,QuadraticBezierCurve3:()=>F2,Quaternion:()=>xr,QuaternionKeyframeTrack:()=>bd,QuaternionLinearInterpolant:()=>EA,RED_GREEN_RGTC2_Format:()=>gr,RED_RGTC1_Format:()=>Qn,REVISION:()=>p,RGBADepthPacking:()=>da,RGBAFormat:()=>At,RGBAIntegerFormat:()=>Tn,RGBA_ASTC_10x10_Format:()=>ni,RGBA_ASTC_10x5_Format:()=>ei,RGBA_ASTC_10x6_Format:()=>pi,RGBA_ASTC_10x8_Format:()=>Ut,RGBA_ASTC_12x10_Format:()=>Ri,RGBA_ASTC_12x12_Format:()=>an,RGBA_ASTC_4x4_Format:()=>Or,RGBA_ASTC_5x4_Format:()=>_e,RGBA_ASTC_5x5_Format:()=>Re,RGBA_ASTC_6x5_Format:()=>Fe,RGBA_ASTC_6x6_Format:()=>We,RGBA_ASTC_8x5_Format:()=>it,RGBA_ASTC_8x6_Format:()=>_t,RGBA_ASTC_8x8_Format:()=>Dt,RGBA_BPTC_Format:()=>mi,RGBA_ETC2_EAC_Format:()=>as,RGBA_PVRTC_2BPPV1_Format:()=>bs,RGBA_PVRTC_4BPPV1_Format:()=>gs,RGBA_S3TC_DXT1_Format:()=>Dn,RGBA_S3TC_DXT3_Format:()=>ns,RGBA_S3TC_DXT5_Format:()=>Kn,RGBFormat:()=>$e,RGB_BPTC_SIGNED_Format:()=>On,RGB_BPTC_UNSIGNED_Format:()=>nr,RGB_ETC1_Format:()=>rn,RGB_ETC2_Format:()=>$n,RGB_PVRTC_2BPPV1_Format:()=>br,RGB_PVRTC_4BPPV1_Format:()=>or,RGB_S3TC_DXT1_Format:()=>Bn,RGFormat:()=>nn,RGIntegerFormat:()=>hi,RawShaderMaterial:()=>aA,Ray:()=>Is,Raycaster:()=>sg,Rec709Primaries:()=>pa,RectAreaLight:()=>RA,RedFormat:()=>Ii,RedIntegerFormat:()=>pn,ReinhardToneMapping:()=>Us,RenderTarget:()=>Ya,RepeatWrapping:()=>ht,ReplaceStencilOp:()=>E1,ReverseSubtractEquation:()=>De,RingGeometry:()=>jf,SIGNED_RED_GREEN_RGTC2_Format:()=>Qr,SIGNED_RED_RGTC1_Format:()=>Ln,SRGBColorSpace:()=>Fr,SRGBTransfer:()=>$r,Scene:()=>mp,ShaderChunk:()=>Un,ShaderLib:()=>h0,ShaderMaterial:()=>w0,ShadowMaterial:()=>oA,Shape:()=>oh,ShapeGeometry:()=>e2,ShapePath:()=>xg,ShapeUtils:()=>g1,ShortType:()=>Ps,Skeleton:()=>bf,SkeletonHelper:()=>hg,SkinnedMesh:()=>Tp,Source:()=>Es,Sphere:()=>Vs,SphereGeometry:()=>cf,Spherical:()=>og,SphericalHarmonics3:()=>IA,SplineCurve:()=>k2,SpotLight:()=>xA,SpotLightHelper:()=>ug,Sprite:()=>yp,SpriteMaterial:()=>E2,SrcAlphaFactor:()=>st,SrcAlphaSaturateFactor:()=>Ci,SrcColorFactor:()=>Te,StaticCopyUsage:()=>au,StaticDrawUsage:()=>Ga,StaticReadUsage:()=>su,StereoCamera:()=>k3,StreamCopyUsage:()=>cu,StreamDrawUsage:()=>ru,StreamReadUsage:()=>ou,StringKeyframeTrack:()=>uh,SubtractEquation:()=>Qe,SubtractiveBlending:()=>ye,TOUCH:()=>z,TangentSpaceNormalMap:()=>_o,TetrahedronGeometry:()=>t2,Texture:()=>cs,TextureLoader:()=>R3,TorusGeometry:()=>i2,TorusKnotGeometry:()=>n2,Triangle:()=>po,TriangleFanDrawMode:()=>P0,TriangleStripDrawMode:()=>A0,TrianglesDrawMode:()=>x0,TubeGeometry:()=>r2,UVMapping:()=>ct,Uint16BufferAttribute:()=>n1,Uint32BufferAttribute:()=>ja,Uint8BufferAttribute:()=>D1,Uint8ClampedBufferAttribute:()=>gc,Uniform:()=>ep,UniformsGroup:()=>ig,UniformsLib:()=>tn,UniformsUtils:()=>wc,UnsignedByteType:()=>os,UnsignedInt248Type:()=>L0,UnsignedInt5999Type:()=>al,UnsignedIntType:()=>zo,UnsignedShort4444Type:()=>Ys,UnsignedShort5551Type:()=>ca,UnsignedShortType:()=>Fo,VSMShadowMap:()=>k,Vector2:()=>vi,Vector3:()=>nt,Vector4:()=>zr,VectorKeyframeTrack:()=>df,VideoTexture:()=>Gm,WebGL3DRenderTarget:()=>kr,WebGLArrayRenderTarget:()=>fn,WebGLCoordinateSystem:()=>O0,WebGLCubeRenderTarget:()=>F1,WebGLMultipleRenderTargets:()=>Mg,WebGLRenderTarget:()=>js,WebGLRenderer:()=>Lm,WebGLUtils:()=>hp,WebGPUCoordinateSystem:()=>Qa,WireframeGeometry:()=>nA,WrapAroundEnding:()=>p0,ZeroCurvatureEnding:()=>Os,ZeroFactor:()=>fe,ZeroSlopeEnding:()=>$s,ZeroStencilOp:()=>s0,createCanvasElement:()=>Zl});/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const p="164",S={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},z={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},K=0,D=1,Q=2,V=3,T=0,F=1,N=2,k=3,G=0,Z=1,ne=2,te=0,de=1,oe=2,ye=3,Me=4,Ne=5,Pe=100,Qe=101,De=102,ke=103,Ce=104,fe=200,Oe=201,Te=202,Ve=203,st=204,dt=205,Mt=206,Rt=207,Yt=208,zt=209,Ci=210,ci=211,Qi=212,sn=213,In=214,Xn=0,tr=1,Jn=2,bn=3,cr=4,Ir=5,je=6,xs=7,mr=0,Wn=1,Ms=2,ts=0,Co=1,Us=2,Jr=3,Ti=4,Ye=5,Xe=6,lt=7,tt="attached",ot="detached",ct=300,Ie=301,ae=302,ge=303,He=304,Ze=306,ht=1e3,St=1001,Di=1002,Wi=1003,Oi=1004,Ui=1004,Ji=1005,Ss=1005,kn=1006,Jt=1007,Dr=1007,Pr=1008,Hs=1008,os=1009,Vo=1010,Ps=1011,Fo=1012,W0=1013,zo=1014,Rs=1015,ir=1016,Ys=1017,ca=1018,L0=1020,al=35902,ua=1021,$e=1022,At=1023,Pt=1024,si=1025,kt=1026,di=1027,Ii=1028,pn=1029,nn=1030,hi=1031,Tn=1033,Bn=33776,Dn=33777,ns=33778,Kn=33779,or=35840,br=35841,gs=35842,bs=35843,rn=36196,$n=37492,as=37496,Or=37808,_e=37809,Re=37810,Fe=37811,We=37812,it=37813,_t=37814,Dt=37815,ei=37816,pi=37817,Ut=37818,ni=37819,Ri=37820,an=37821,mi=36492,On=36494,nr=36495,Qn=36283,Ln=36284,gr=36285,Qr=36286,ls=2200,Vr=2201,qs=2202,Js=2300,vs=2301,Zs=2302,Os=2400,$s=2401,p0=2402,D0=2500,r0=2501,x0=0,A0=1,P0=2,ha=3200,da=3201,_o=0,M0=1,co="",Fr="srgb",xo="srgb-linear",ll="display-p3",fa="display-p3-linear",cl="linear",$r="srgb",pa="rec709",ul="p3",s0=0,m0=7680,E1=7681,Ml=7682,$c=7683,y1=34055,w1=34056,Kl=5386,C1=512,ec=513,jc=514,eu=515,tu=516,_1=517,iu=518,x1=519,tc=512,ic=513,nc=514,Xl=515,rc=516,sc=517,oc=518,ac=519,Ga=35044,nu=35048,ru=35040,su=35045,lc=35049,ou=35041,au=35046,lu=35050,cu=35042,uu="100",M1="300 es",O0=2e3,Qa=2001;class uo{addEventListener(o,h){this._listeners===void 0&&(this._listeners={});const m=this._listeners;m[o]===void 0&&(m[o]=[]),m[o].indexOf(h)===-1&&m[o].push(h)}hasEventListener(o,h){if(this._listeners===void 0)return!1;const m=this._listeners;return m[o]!==void 0&&m[o].indexOf(h)!==-1}removeEventListener(o,h){if(this._listeners===void 0)return;const v=this._listeners[o];if(v!==void 0){const C=v.indexOf(h);C!==-1&&v.splice(C,1)}}dispatchEvent(o){if(this._listeners===void 0)return;const m=this._listeners[o.type];if(m!==void 0){o.target=this;const v=m.slice(0);for(let C=0,b=v.length;C<b;C++)v[C].call(this,o);o.target=null}}}const Mo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let S1=1234567;const Aa=Math.PI/180,Va=180/Math.PI;function Wo(){const x=Math.random()*4294967295|0,o=Math.random()*4294967295|0,h=Math.random()*4294967295|0,m=Math.random()*4294967295|0;return(Mo[x&255]+Mo[x>>8&255]+Mo[x>>16&255]+Mo[x>>24&255]+"-"+Mo[o&255]+Mo[o>>8&255]+"-"+Mo[o>>16&15|64]+Mo[o>>24&255]+"-"+Mo[h&63|128]+Mo[h>>8&255]+"-"+Mo[h>>16&255]+Mo[h>>24&255]+Mo[m&255]+Mo[m>>8&255]+Mo[m>>16&255]+Mo[m>>24&255]).toLowerCase()}function Ts(x,o,h){return Math.max(o,Math.min(h,x))}function ma(x,o){return(x%o+o)%o}function hu(x,o,h,m,v){return m+(x-o)*(v-m)/(h-o)}function du(x,o,h){return x!==o?(h-x)/(o-x):0}function Sl(x,o,h){return(1-h)*x+h*o}function cc(x,o,h,m){return Sl(x,o,1-Math.exp(-h*m))}function uc(x,o=1){return o-Math.abs(ma(x,o*2)-o)}function bl(x,o,h){return x<=o?0:x>=h?1:(x=(x-o)/(h-o),x*x*(3-2*x))}function Tl(x,o,h){return x<=o?0:x>=h?1:(x=(x-o)/(h-o),x*x*x*(x*(x*6-15)+10))}function fu(x,o){return x+Math.floor(Math.random()*(o-x+1))}function Yl(x,o){return x+Math.random()*(o-x)}function pu(x){return x*(.5-Math.random())}function hc(x){x!==void 0&&(S1=x);let o=S1+=1831565813;return o=Math.imul(o^o>>>15,o|1),o^=o+Math.imul(o^o>>>7,o|61),((o^o>>>14)>>>0)/4294967296}function ql(x){return x*Aa}function b1(x){return x*Va}function dc(x){return(x&x-1)===0&&x!==0}function fc(x){return Math.pow(2,Math.ceil(Math.log(x)/Math.LN2))}function pc(x){return Math.pow(2,Math.floor(Math.log(x)/Math.LN2))}function Au(x,o,h,m,v){const C=Math.cos,b=Math.sin,L=C(h/2),W=b(h/2),J=C((o+m)/2),re=b((o+m)/2),ue=C((o-m)/2),pe=b((o-m)/2),ve=C((m-o)/2),xe=b((m-o)/2);switch(v){case"XYX":x.set(L*re,W*ue,W*pe,L*J);break;case"YZY":x.set(W*pe,L*re,W*ue,L*J);break;case"ZXZ":x.set(W*ue,W*pe,L*re,L*J);break;case"XZX":x.set(L*re,W*xe,W*ve,L*J);break;case"YXY":x.set(W*ve,L*re,W*xe,L*J);break;case"ZYZ":x.set(W*xe,W*ve,L*re,L*J);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+v)}}function So(x,o){switch(o.constructor){case Float32Array:return x;case Uint32Array:return x/4294967295;case Uint16Array:return x/65535;case Uint8Array:return x/255;case Int32Array:return Math.max(x/2147483647,-1);case Int16Array:return Math.max(x/32767,-1);case Int8Array:return Math.max(x/127,-1);default:throw new Error("Invalid component type.")}}function ur(x,o){switch(o.constructor){case Float32Array:return x;case Uint32Array:return Math.round(x*4294967295);case Uint16Array:return Math.round(x*65535);case Uint8Array:return Math.round(x*255);case Int32Array:return Math.round(x*2147483647);case Int16Array:return Math.round(x*32767);case Int8Array:return Math.round(x*127);default:throw new Error("Invalid component type.")}}const mu={DEG2RAD:Aa,RAD2DEG:Va,generateUUID:Wo,clamp:Ts,euclideanModulo:ma,mapLinear:hu,inverseLerp:du,lerp:Sl,damp:cc,pingpong:uc,smoothstep:bl,smootherstep:Tl,randInt:fu,randFloat:Yl,randFloatSpread:pu,seededRandom:hc,degToRad:ql,radToDeg:b1,isPowerOfTwo:dc,ceilPowerOfTwo:fc,floorPowerOfTwo:pc,setQuaternionFromProperEuler:Au,normalize:ur,denormalize:So};class vi{constructor(o=0,h=0){vi.prototype.isVector2=!0,this.x=o,this.y=h}get width(){return this.x}set width(o){this.x=o}get height(){return this.y}set height(o){this.y=o}set(o,h){return this.x=o,this.y=h,this}setScalar(o){return this.x=o,this.y=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setComponent(o,h){switch(o){case 0:this.x=h;break;case 1:this.y=h;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y)}copy(o){return this.x=o.x,this.y=o.y,this}add(o){return this.x+=o.x,this.y+=o.y,this}addScalar(o){return this.x+=o,this.y+=o,this}addVectors(o,h){return this.x=o.x+h.x,this.y=o.y+h.y,this}addScaledVector(o,h){return this.x+=o.x*h,this.y+=o.y*h,this}sub(o){return this.x-=o.x,this.y-=o.y,this}subScalar(o){return this.x-=o,this.y-=o,this}subVectors(o,h){return this.x=o.x-h.x,this.y=o.y-h.y,this}multiply(o){return this.x*=o.x,this.y*=o.y,this}multiplyScalar(o){return this.x*=o,this.y*=o,this}divide(o){return this.x/=o.x,this.y/=o.y,this}divideScalar(o){return this.multiplyScalar(1/o)}applyMatrix3(o){const h=this.x,m=this.y,v=o.elements;return this.x=v[0]*h+v[3]*m+v[6],this.y=v[1]*h+v[4]*m+v[7],this}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this}clamp(o,h){return this.x=Math.max(o.x,Math.min(h.x,this.x)),this.y=Math.max(o.y,Math.min(h.y,this.y)),this}clampScalar(o,h){return this.x=Math.max(o,Math.min(h,this.x)),this.y=Math.max(o,Math.min(h,this.y)),this}clampLength(o,h){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(o,Math.min(h,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(o){return this.x*o.x+this.y*o.y}cross(o){return this.x*o.y-this.y*o.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(o){const h=Math.sqrt(this.lengthSq()*o.lengthSq());if(h===0)return Math.PI/2;const m=this.dot(o)/h;return Math.acos(Ts(m,-1,1))}distanceTo(o){return Math.sqrt(this.distanceToSquared(o))}distanceToSquared(o){const h=this.x-o.x,m=this.y-o.y;return h*h+m*m}manhattanDistanceTo(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,h){return this.x+=(o.x-this.x)*h,this.y+=(o.y-this.y)*h,this}lerpVectors(o,h,m){return this.x=o.x+(h.x-o.x)*m,this.y=o.y+(h.y-o.y)*m,this}equals(o){return o.x===this.x&&o.y===this.y}fromArray(o,h=0){return this.x=o[h],this.y=o[h+1],this}toArray(o=[],h=0){return o[h]=this.x,o[h+1]=this.y,o}fromBufferAttribute(o,h){return this.x=o.getX(h),this.y=o.getY(h),this}rotateAround(o,h){const m=Math.cos(h),v=Math.sin(h),C=this.x-o.x,b=this.y-o.y;return this.x=C*m-b*v+o.x,this.y=C*v+b*m+o.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Nn{constructor(o,h,m,v,C,b,L,W,J){Nn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],o!==void 0&&this.set(o,h,m,v,C,b,L,W,J)}set(o,h,m,v,C,b,L,W,J){const re=this.elements;return re[0]=o,re[1]=v,re[2]=L,re[3]=h,re[4]=C,re[5]=W,re[6]=m,re[7]=b,re[8]=J,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(o){const h=this.elements,m=o.elements;return h[0]=m[0],h[1]=m[1],h[2]=m[2],h[3]=m[3],h[4]=m[4],h[5]=m[5],h[6]=m[6],h[7]=m[7],h[8]=m[8],this}extractBasis(o,h,m){return o.setFromMatrix3Column(this,0),h.setFromMatrix3Column(this,1),m.setFromMatrix3Column(this,2),this}setFromMatrix4(o){const h=o.elements;return this.set(h[0],h[4],h[8],h[1],h[5],h[9],h[2],h[6],h[10]),this}multiply(o){return this.multiplyMatrices(this,o)}premultiply(o){return this.multiplyMatrices(o,this)}multiplyMatrices(o,h){const m=o.elements,v=h.elements,C=this.elements,b=m[0],L=m[3],W=m[6],J=m[1],re=m[4],ue=m[7],pe=m[2],ve=m[5],xe=m[8],Le=v[0],Se=v[3],Ee=v[6],Ke=v[1],Ge=v[4],Ue=v[7],Ct=v[2],at=v[5],ft=v[8];return C[0]=b*Le+L*Ke+W*Ct,C[3]=b*Se+L*Ge+W*at,C[6]=b*Ee+L*Ue+W*ft,C[1]=J*Le+re*Ke+ue*Ct,C[4]=J*Se+re*Ge+ue*at,C[7]=J*Ee+re*Ue+ue*ft,C[2]=pe*Le+ve*Ke+xe*Ct,C[5]=pe*Se+ve*Ge+xe*at,C[8]=pe*Ee+ve*Ue+xe*ft,this}multiplyScalar(o){const h=this.elements;return h[0]*=o,h[3]*=o,h[6]*=o,h[1]*=o,h[4]*=o,h[7]*=o,h[2]*=o,h[5]*=o,h[8]*=o,this}determinant(){const o=this.elements,h=o[0],m=o[1],v=o[2],C=o[3],b=o[4],L=o[5],W=o[6],J=o[7],re=o[8];return h*b*re-h*L*J-m*C*re+m*L*W+v*C*J-v*b*W}invert(){const o=this.elements,h=o[0],m=o[1],v=o[2],C=o[3],b=o[4],L=o[5],W=o[6],J=o[7],re=o[8],ue=re*b-L*J,pe=L*W-re*C,ve=J*C-b*W,xe=h*ue+m*pe+v*ve;if(xe===0)return this.set(0,0,0,0,0,0,0,0,0);const Le=1/xe;return o[0]=ue*Le,o[1]=(v*J-re*m)*Le,o[2]=(L*m-v*b)*Le,o[3]=pe*Le,o[4]=(re*h-v*W)*Le,o[5]=(v*C-L*h)*Le,o[6]=ve*Le,o[7]=(m*W-J*h)*Le,o[8]=(b*h-m*C)*Le,this}transpose(){let o;const h=this.elements;return o=h[1],h[1]=h[3],h[3]=o,o=h[2],h[2]=h[6],h[6]=o,o=h[5],h[5]=h[7],h[7]=o,this}getNormalMatrix(o){return this.setFromMatrix4(o).invert().transpose()}transposeIntoArray(o){const h=this.elements;return o[0]=h[0],o[1]=h[3],o[2]=h[6],o[3]=h[1],o[4]=h[4],o[5]=h[7],o[6]=h[2],o[7]=h[5],o[8]=h[8],this}setUvTransform(o,h,m,v,C,b,L){const W=Math.cos(C),J=Math.sin(C);return this.set(m*W,m*J,-m*(W*b+J*L)+b+o,-v*J,v*W,-v*(-J*b+W*L)+L+h,0,0,1),this}scale(o,h){return this.premultiply(ga.makeScale(o,h)),this}rotate(o){return this.premultiply(ga.makeRotation(-o)),this}translate(o,h){return this.premultiply(ga.makeTranslation(o,h)),this}makeTranslation(o,h){return o.isVector2?this.set(1,0,o.x,0,1,o.y,0,0,1):this.set(1,0,o,0,1,h,0,0,1),this}makeRotation(o){const h=Math.cos(o),m=Math.sin(o);return this.set(h,-m,0,m,h,0,0,0,1),this}makeScale(o,h){return this.set(o,0,0,0,h,0,0,0,1),this}equals(o){const h=this.elements,m=o.elements;for(let v=0;v<9;v++)if(h[v]!==m[v])return!1;return!0}fromArray(o,h=0){for(let m=0;m<9;m++)this.elements[m]=o[m+h];return this}toArray(o=[],h=0){const m=this.elements;return o[h]=m[0],o[h+1]=m[1],o[h+2]=m[2],o[h+3]=m[3],o[h+4]=m[4],o[h+5]=m[5],o[h+6]=m[6],o[h+7]=m[7],o[h+8]=m[8],o}clone(){return new this.constructor().fromArray(this.elements)}}const ga=new Nn;function Jl(x){for(let o=x.length-1;o>=0;--o)if(x[o]>=65535)return!0;return!1}const T1={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function va(x,o){return new T1[x](o)}function za(x){return document.createElementNS("http://www.w3.org/1999/xhtml",x)}function Zl(){const x=za("canvas");return x.style.display="block",x}const Wa={};function Gs(x){x in Wa||(Wa[x]=!0,console.warn(x))}const Ka=new Nn().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),$l=new Nn().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ea={[xo]:{transfer:cl,primaries:pa,toReference:x=>x,fromReference:x=>x},[Fr]:{transfer:$r,primaries:pa,toReference:x=>x.convertSRGBToLinear(),fromReference:x=>x.convertLinearToSRGB()},[fa]:{transfer:cl,primaries:ul,toReference:x=>x.applyMatrix3($l),fromReference:x=>x.applyMatrix3(Ka)},[ll]:{transfer:$r,primaries:ul,toReference:x=>x.convertSRGBToLinear().applyMatrix3($l),fromReference:x=>x.applyMatrix3(Ka).convertLinearToSRGB()}},R1=new Set([xo,fa]),jr={enabled:!0,_workingColorSpace:xo,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(x){if(!R1.has(x))throw new Error(`Unsupported working color space, "${x}".`);this._workingColorSpace=x},convert:function(x,o,h){if(this.enabled===!1||o===h||!o||!h)return x;const m=Ea[o].toReference,v=Ea[h].fromReference;return v(m(x))},fromWorkingColorSpace:function(x,o){return this.convert(x,this._workingColorSpace,o)},toWorkingColorSpace:function(x,o){return this.convert(x,o,this._workingColorSpace)},getPrimaries:function(x){return Ea[x].primaries},getTransfer:function(x){return x===co?cl:Ea[x].transfer}};function ya(x){return x<.04045?x*.0773993808:Math.pow(x*.9478672986+.0521327014,2.4)}function wa(x){return x<.0031308?x*12.92:1.055*Math.pow(x,.41666)-.055}let K0;class Xa{static getDataURL(o){if(/^data:/i.test(o.src)||typeof HTMLCanvasElement>"u")return o.src;let h;if(o instanceof HTMLCanvasElement)h=o;else{K0===void 0&&(K0=za("canvas")),K0.width=o.width,K0.height=o.height;const m=K0.getContext("2d");o instanceof ImageData?m.putImageData(o,0,0):m.drawImage(o,0,0,o.width,o.height),h=K0}return h.width>2048||h.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",o),h.toDataURL("image/jpeg",.6)):h.toDataURL("image/png")}static sRGBToLinear(o){if(typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&o instanceof ImageBitmap){const h=za("canvas");h.width=o.width,h.height=o.height;const m=h.getContext("2d");m.drawImage(o,0,0,o.width,o.height);const v=m.getImageData(0,0,o.width,o.height),C=v.data;for(let b=0;b<C.length;b++)C[b]=ya(C[b]/255)*255;return m.putImageData(v,0,0),h}else if(o.data){const h=o.data.slice(0);for(let m=0;m<h.length;m++)h instanceof Uint8Array||h instanceof Uint8ClampedArray?h[m]=Math.floor(ya(h[m]/255)*255):h[m]=ya(h[m]);return{data:h,width:o.width,height:o.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),o}}let Rl=0;class Es{constructor(o=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Rl++}),this.uuid=Wo(),this.data=o,this.dataReady=!0,this.version=0}set needsUpdate(o){o===!0&&this.version++}toJSON(o){const h=o===void 0||typeof o=="string";if(!h&&o.images[this.uuid]!==void 0)return o.images[this.uuid];const m={uuid:this.uuid,url:""},v=this.data;if(v!==null){let C;if(Array.isArray(v)){C=[];for(let b=0,L=v.length;b<L;b++)v[b].isDataTexture?C.push(Il(v[b].image)):C.push(Il(v[b]))}else C=Il(v);m.url=C}return h||(o.images[this.uuid]=m),m}}function Il(x){return typeof HTMLImageElement<"u"&&x instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&x instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&x instanceof ImageBitmap?Xa.getDataURL(x):x.data?{data:Array.from(x.data),width:x.width,height:x.height,type:x.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let I1=0;class cs extends uo{constructor(o=cs.DEFAULT_IMAGE,h=cs.DEFAULT_MAPPING,m=St,v=St,C=kn,b=Pr,L=At,W=os,J=cs.DEFAULT_ANISOTROPY,re=co){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:I1++}),this.uuid=Wo(),this.name="",this.source=new Es(o),this.mipmaps=[],this.mapping=h,this.channel=0,this.wrapS=m,this.wrapT=v,this.magFilter=C,this.minFilter=b,this.anisotropy=J,this.format=L,this.internalFormat=null,this.type=W,this.offset=new vi(0,0),this.repeat=new vi(1,1),this.center=new vi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=re,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(o=null){this.source.data=o}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(o){return this.name=o.name,this.source=o.source,this.mipmaps=o.mipmaps.slice(0),this.mapping=o.mapping,this.channel=o.channel,this.wrapS=o.wrapS,this.wrapT=o.wrapT,this.magFilter=o.magFilter,this.minFilter=o.minFilter,this.anisotropy=o.anisotropy,this.format=o.format,this.internalFormat=o.internalFormat,this.type=o.type,this.offset.copy(o.offset),this.repeat.copy(o.repeat),this.center.copy(o.center),this.rotation=o.rotation,this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrix.copy(o.matrix),this.generateMipmaps=o.generateMipmaps,this.premultiplyAlpha=o.premultiplyAlpha,this.flipY=o.flipY,this.unpackAlignment=o.unpackAlignment,this.colorSpace=o.colorSpace,this.userData=JSON.parse(JSON.stringify(o.userData)),this.needsUpdate=!0,this}toJSON(o){const h=o===void 0||typeof o=="string";if(!h&&o.textures[this.uuid]!==void 0)return o.textures[this.uuid];const m={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(o).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(m.userData=this.userData),h||(o.textures[this.uuid]=m),m}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(o){if(this.mapping!==ct)return o;if(o.applyMatrix3(this.matrix),o.x<0||o.x>1)switch(this.wrapS){case ht:o.x=o.x-Math.floor(o.x);break;case St:o.x=o.x<0?0:1;break;case Di:Math.abs(Math.floor(o.x)%2)===1?o.x=Math.ceil(o.x)-o.x:o.x=o.x-Math.floor(o.x);break}if(o.y<0||o.y>1)switch(this.wrapT){case ht:o.y=o.y-Math.floor(o.y);break;case St:o.y=o.y<0?0:1;break;case Di:Math.abs(Math.floor(o.y)%2)===1?o.y=Math.ceil(o.y)-o.y:o.y=o.y-Math.floor(o.y);break}return this.flipY&&(o.y=1-o.y),o}set needsUpdate(o){o===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(o){o===!0&&this.pmremVersion++}}cs.DEFAULT_IMAGE=null,cs.DEFAULT_MAPPING=ct,cs.DEFAULT_ANISOTROPY=1;class zr{constructor(o=0,h=0,m=0,v=1){zr.prototype.isVector4=!0,this.x=o,this.y=h,this.z=m,this.w=v}get width(){return this.z}set width(o){this.z=o}get height(){return this.w}set height(o){this.w=o}set(o,h,m,v){return this.x=o,this.y=h,this.z=m,this.w=v,this}setScalar(o){return this.x=o,this.y=o,this.z=o,this.w=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setZ(o){return this.z=o,this}setW(o){return this.w=o,this}setComponent(o,h){switch(o){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;case 3:this.w=h;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(o){return this.x=o.x,this.y=o.y,this.z=o.z,this.w=o.w!==void 0?o.w:1,this}add(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z,this.w+=o.w,this}addScalar(o){return this.x+=o,this.y+=o,this.z+=o,this.w+=o,this}addVectors(o,h){return this.x=o.x+h.x,this.y=o.y+h.y,this.z=o.z+h.z,this.w=o.w+h.w,this}addScaledVector(o,h){return this.x+=o.x*h,this.y+=o.y*h,this.z+=o.z*h,this.w+=o.w*h,this}sub(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z,this.w-=o.w,this}subScalar(o){return this.x-=o,this.y-=o,this.z-=o,this.w-=o,this}subVectors(o,h){return this.x=o.x-h.x,this.y=o.y-h.y,this.z=o.z-h.z,this.w=o.w-h.w,this}multiply(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z,this.w*=o.w,this}multiplyScalar(o){return this.x*=o,this.y*=o,this.z*=o,this.w*=o,this}applyMatrix4(o){const h=this.x,m=this.y,v=this.z,C=this.w,b=o.elements;return this.x=b[0]*h+b[4]*m+b[8]*v+b[12]*C,this.y=b[1]*h+b[5]*m+b[9]*v+b[13]*C,this.z=b[2]*h+b[6]*m+b[10]*v+b[14]*C,this.w=b[3]*h+b[7]*m+b[11]*v+b[15]*C,this}divideScalar(o){return this.multiplyScalar(1/o)}setAxisAngleFromQuaternion(o){this.w=2*Math.acos(o.w);const h=Math.sqrt(1-o.w*o.w);return h<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=o.x/h,this.y=o.y/h,this.z=o.z/h),this}setAxisAngleFromRotationMatrix(o){let h,m,v,C;const W=o.elements,J=W[0],re=W[4],ue=W[8],pe=W[1],ve=W[5],xe=W[9],Le=W[2],Se=W[6],Ee=W[10];if(Math.abs(re-pe)<.01&&Math.abs(ue-Le)<.01&&Math.abs(xe-Se)<.01){if(Math.abs(re+pe)<.1&&Math.abs(ue+Le)<.1&&Math.abs(xe+Se)<.1&&Math.abs(J+ve+Ee-3)<.1)return this.set(1,0,0,0),this;h=Math.PI;const Ge=(J+1)/2,Ue=(ve+1)/2,Ct=(Ee+1)/2,at=(re+pe)/4,ft=(ue+Le)/4,yt=(xe+Se)/4;return Ge>Ue&&Ge>Ct?Ge<.01?(m=0,v=.707106781,C=.707106781):(m=Math.sqrt(Ge),v=at/m,C=ft/m):Ue>Ct?Ue<.01?(m=.707106781,v=0,C=.707106781):(v=Math.sqrt(Ue),m=at/v,C=yt/v):Ct<.01?(m=.707106781,v=.707106781,C=0):(C=Math.sqrt(Ct),m=ft/C,v=yt/C),this.set(m,v,C,h),this}let Ke=Math.sqrt((Se-xe)*(Se-xe)+(ue-Le)*(ue-Le)+(pe-re)*(pe-re));return Math.abs(Ke)<.001&&(Ke=1),this.x=(Se-xe)/Ke,this.y=(ue-Le)/Ke,this.z=(pe-re)/Ke,this.w=Math.acos((J+ve+Ee-1)/2),this}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this.w=Math.min(this.w,o.w),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this.w=Math.max(this.w,o.w),this}clamp(o,h){return this.x=Math.max(o.x,Math.min(h.x,this.x)),this.y=Math.max(o.y,Math.min(h.y,this.y)),this.z=Math.max(o.z,Math.min(h.z,this.z)),this.w=Math.max(o.w,Math.min(h.w,this.w)),this}clampScalar(o,h){return this.x=Math.max(o,Math.min(h,this.x)),this.y=Math.max(o,Math.min(h,this.y)),this.z=Math.max(o,Math.min(h,this.z)),this.w=Math.max(o,Math.min(h,this.w)),this}clampLength(o,h){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(o,Math.min(h,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(o){return this.x*o.x+this.y*o.y+this.z*o.z+this.w*o.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,h){return this.x+=(o.x-this.x)*h,this.y+=(o.y-this.y)*h,this.z+=(o.z-this.z)*h,this.w+=(o.w-this.w)*h,this}lerpVectors(o,h,m){return this.x=o.x+(h.x-o.x)*m,this.y=o.y+(h.y-o.y)*m,this.z=o.z+(h.z-o.z)*m,this.w=o.w+(h.w-o.w)*m,this}equals(o){return o.x===this.x&&o.y===this.y&&o.z===this.z&&o.w===this.w}fromArray(o,h=0){return this.x=o[h],this.y=o[h+1],this.z=o[h+2],this.w=o[h+3],this}toArray(o=[],h=0){return o[h]=this.x,o[h+1]=this.y,o[h+2]=this.z,o[h+3]=this.w,o}fromBufferAttribute(o,h){return this.x=o.getX(h),this.y=o.getY(h),this.z=o.getZ(h),this.w=o.getW(h),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ya extends uo{constructor(o=1,h=1,m={}){super(),this.isRenderTarget=!0,this.width=o,this.height=h,this.depth=1,this.scissor=new zr(0,0,o,h),this.scissorTest=!1,this.viewport=new zr(0,0,o,h);const v={width:o,height:h,depth:1};m=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:kn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},m);const C=new cs(v,m.mapping,m.wrapS,m.wrapT,m.magFilter,m.minFilter,m.format,m.type,m.anisotropy,m.colorSpace);C.flipY=!1,C.generateMipmaps=m.generateMipmaps,C.internalFormat=m.internalFormat,this.textures=[];const b=m.count;for(let L=0;L<b;L++)this.textures[L]=C.clone(),this.textures[L].isRenderTargetTexture=!0;this.depthBuffer=m.depthBuffer,this.stencilBuffer=m.stencilBuffer,this.resolveDepthBuffer=m.resolveDepthBuffer,this.resolveStencilBuffer=m.resolveStencilBuffer,this.depthTexture=m.depthTexture,this.samples=m.samples}get texture(){return this.textures[0]}set texture(o){this.textures[0]=o}setSize(o,h,m=1){if(this.width!==o||this.height!==h||this.depth!==m){this.width=o,this.height=h,this.depth=m;for(let v=0,C=this.textures.length;v<C;v++)this.textures[v].image.width=o,this.textures[v].image.height=h,this.textures[v].image.depth=m;this.dispose()}this.viewport.set(0,0,o,h),this.scissor.set(0,0,o,h)}clone(){return new this.constructor().copy(this)}copy(o){this.width=o.width,this.height=o.height,this.depth=o.depth,this.scissor.copy(o.scissor),this.scissorTest=o.scissorTest,this.viewport.copy(o.viewport),this.textures.length=0;for(let m=0,v=o.textures.length;m<v;m++)this.textures[m]=o.textures[m].clone(),this.textures[m].isRenderTargetTexture=!0;const h=Object.assign({},o.texture.image);return this.texture.source=new Es(h),this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,this.resolveDepthBuffer=o.resolveDepthBuffer,this.resolveStencilBuffer=o.resolveStencilBuffer,o.depthTexture!==null&&(this.depthTexture=o.depthTexture.clone()),this.samples=o.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class js extends Ya{constructor(o=1,h=1,m={}){super(o,h,m),this.isWebGLRenderTarget=!0}}class hl extends cs{constructor(o=null,h=1,m=1,v=1){super(null),this.isDataArrayTexture=!0,this.image={data:o,width:h,height:m,depth:v},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=St,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class fn extends js{constructor(o=1,h=1,m=1,v={}){super(o,h,v),this.isWebGLArrayRenderTarget=!0,this.depth=m,this.texture=new hl(null,o,h,m),this.texture.isRenderTargetTexture=!0}}class ar extends cs{constructor(o=null,h=1,m=1,v=1){super(null),this.isData3DTexture=!0,this.image={data:o,width:h,height:m,depth:v},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=St,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kr extends js{constructor(o=1,h=1,m=1,v={}){super(o,h,v),this.isWebGL3DRenderTarget=!0,this.depth=m,this.texture=new ar(null,o,h,m),this.texture.isRenderTargetTexture=!0}}class xr{constructor(o=0,h=0,m=0,v=1){this.isQuaternion=!0,this._x=o,this._y=h,this._z=m,this._w=v}static slerpFlat(o,h,m,v,C,b,L){let W=m[v+0],J=m[v+1],re=m[v+2],ue=m[v+3];const pe=C[b+0],ve=C[b+1],xe=C[b+2],Le=C[b+3];if(L===0){o[h+0]=W,o[h+1]=J,o[h+2]=re,o[h+3]=ue;return}if(L===1){o[h+0]=pe,o[h+1]=ve,o[h+2]=xe,o[h+3]=Le;return}if(ue!==Le||W!==pe||J!==ve||re!==xe){let Se=1-L;const Ee=W*pe+J*ve+re*xe+ue*Le,Ke=Ee>=0?1:-1,Ge=1-Ee*Ee;if(Ge>Number.EPSILON){const Ct=Math.sqrt(Ge),at=Math.atan2(Ct,Ee*Ke);Se=Math.sin(Se*at)/Ct,L=Math.sin(L*at)/Ct}const Ue=L*Ke;if(W=W*Se+pe*Ue,J=J*Se+ve*Ue,re=re*Se+xe*Ue,ue=ue*Se+Le*Ue,Se===1-L){const Ct=1/Math.sqrt(W*W+J*J+re*re+ue*ue);W*=Ct,J*=Ct,re*=Ct,ue*=Ct}}o[h]=W,o[h+1]=J,o[h+2]=re,o[h+3]=ue}static multiplyQuaternionsFlat(o,h,m,v,C,b){const L=m[v],W=m[v+1],J=m[v+2],re=m[v+3],ue=C[b],pe=C[b+1],ve=C[b+2],xe=C[b+3];return o[h]=L*xe+re*ue+W*ve-J*pe,o[h+1]=W*xe+re*pe+J*ue-L*ve,o[h+2]=J*xe+re*ve+L*pe-W*ue,o[h+3]=re*xe-L*ue-W*pe-J*ve,o}get x(){return this._x}set x(o){this._x=o,this._onChangeCallback()}get y(){return this._y}set y(o){this._y=o,this._onChangeCallback()}get z(){return this._z}set z(o){this._z=o,this._onChangeCallback()}get w(){return this._w}set w(o){this._w=o,this._onChangeCallback()}set(o,h,m,v){return this._x=o,this._y=h,this._z=m,this._w=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(o){return this._x=o.x,this._y=o.y,this._z=o.z,this._w=o.w,this._onChangeCallback(),this}setFromEuler(o,h=!0){const m=o._x,v=o._y,C=o._z,b=o._order,L=Math.cos,W=Math.sin,J=L(m/2),re=L(v/2),ue=L(C/2),pe=W(m/2),ve=W(v/2),xe=W(C/2);switch(b){case"XYZ":this._x=pe*re*ue+J*ve*xe,this._y=J*ve*ue-pe*re*xe,this._z=J*re*xe+pe*ve*ue,this._w=J*re*ue-pe*ve*xe;break;case"YXZ":this._x=pe*re*ue+J*ve*xe,this._y=J*ve*ue-pe*re*xe,this._z=J*re*xe-pe*ve*ue,this._w=J*re*ue+pe*ve*xe;break;case"ZXY":this._x=pe*re*ue-J*ve*xe,this._y=J*ve*ue+pe*re*xe,this._z=J*re*xe+pe*ve*ue,this._w=J*re*ue-pe*ve*xe;break;case"ZYX":this._x=pe*re*ue-J*ve*xe,this._y=J*ve*ue+pe*re*xe,this._z=J*re*xe-pe*ve*ue,this._w=J*re*ue+pe*ve*xe;break;case"YZX":this._x=pe*re*ue+J*ve*xe,this._y=J*ve*ue+pe*re*xe,this._z=J*re*xe-pe*ve*ue,this._w=J*re*ue-pe*ve*xe;break;case"XZY":this._x=pe*re*ue-J*ve*xe,this._y=J*ve*ue-pe*re*xe,this._z=J*re*xe+pe*ve*ue,this._w=J*re*ue+pe*ve*xe;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+b)}return h===!0&&this._onChangeCallback(),this}setFromAxisAngle(o,h){const m=h/2,v=Math.sin(m);return this._x=o.x*v,this._y=o.y*v,this._z=o.z*v,this._w=Math.cos(m),this._onChangeCallback(),this}setFromRotationMatrix(o){const h=o.elements,m=h[0],v=h[4],C=h[8],b=h[1],L=h[5],W=h[9],J=h[2],re=h[6],ue=h[10],pe=m+L+ue;if(pe>0){const ve=.5/Math.sqrt(pe+1);this._w=.25/ve,this._x=(re-W)*ve,this._y=(C-J)*ve,this._z=(b-v)*ve}else if(m>L&&m>ue){const ve=2*Math.sqrt(1+m-L-ue);this._w=(re-W)/ve,this._x=.25*ve,this._y=(v+b)/ve,this._z=(C+J)/ve}else if(L>ue){const ve=2*Math.sqrt(1+L-m-ue);this._w=(C-J)/ve,this._x=(v+b)/ve,this._y=.25*ve,this._z=(W+re)/ve}else{const ve=2*Math.sqrt(1+ue-m-L);this._w=(b-v)/ve,this._x=(C+J)/ve,this._y=(W+re)/ve,this._z=.25*ve}return this._onChangeCallback(),this}setFromUnitVectors(o,h){let m=o.dot(h)+1;return m<Number.EPSILON?(m=0,Math.abs(o.x)>Math.abs(o.z)?(this._x=-o.y,this._y=o.x,this._z=0,this._w=m):(this._x=0,this._y=-o.z,this._z=o.y,this._w=m)):(this._x=o.y*h.z-o.z*h.y,this._y=o.z*h.x-o.x*h.z,this._z=o.x*h.y-o.y*h.x,this._w=m),this.normalize()}angleTo(o){return 2*Math.acos(Math.abs(Ts(this.dot(o),-1,1)))}rotateTowards(o,h){const m=this.angleTo(o);if(m===0)return this;const v=Math.min(1,h/m);return this.slerp(o,v),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(o){return this._x*o._x+this._y*o._y+this._z*o._z+this._w*o._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let o=this.length();return o===0?(this._x=0,this._y=0,this._z=0,this._w=1):(o=1/o,this._x=this._x*o,this._y=this._y*o,this._z=this._z*o,this._w=this._w*o),this._onChangeCallback(),this}multiply(o){return this.multiplyQuaternions(this,o)}premultiply(o){return this.multiplyQuaternions(o,this)}multiplyQuaternions(o,h){const m=o._x,v=o._y,C=o._z,b=o._w,L=h._x,W=h._y,J=h._z,re=h._w;return this._x=m*re+b*L+v*J-C*W,this._y=v*re+b*W+C*L-m*J,this._z=C*re+b*J+m*W-v*L,this._w=b*re-m*L-v*W-C*J,this._onChangeCallback(),this}slerp(o,h){if(h===0)return this;if(h===1)return this.copy(o);const m=this._x,v=this._y,C=this._z,b=this._w;let L=b*o._w+m*o._x+v*o._y+C*o._z;if(L<0?(this._w=-o._w,this._x=-o._x,this._y=-o._y,this._z=-o._z,L=-L):this.copy(o),L>=1)return this._w=b,this._x=m,this._y=v,this._z=C,this;const W=1-L*L;if(W<=Number.EPSILON){const ve=1-h;return this._w=ve*b+h*this._w,this._x=ve*m+h*this._x,this._y=ve*v+h*this._y,this._z=ve*C+h*this._z,this.normalize(),this}const J=Math.sqrt(W),re=Math.atan2(J,L),ue=Math.sin((1-h)*re)/J,pe=Math.sin(h*re)/J;return this._w=b*ue+this._w*pe,this._x=m*ue+this._x*pe,this._y=v*ue+this._y*pe,this._z=C*ue+this._z*pe,this._onChangeCallback(),this}slerpQuaternions(o,h,m){return this.copy(o).slerp(h,m)}random(){const o=2*Math.PI*Math.random(),h=2*Math.PI*Math.random(),m=Math.random(),v=Math.sqrt(1-m),C=Math.sqrt(m);return this.set(v*Math.sin(o),v*Math.cos(o),C*Math.sin(h),C*Math.cos(h))}equals(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._w===this._w}fromArray(o,h=0){return this._x=o[h],this._y=o[h+1],this._z=o[h+2],this._w=o[h+3],this._onChangeCallback(),this}toArray(o=[],h=0){return o[h]=this._x,o[h+1]=this._y,o[h+2]=this._z,o[h+3]=this._w,o}fromBufferAttribute(o,h){return this._x=o.getX(h),this._y=o.getY(h),this._z=o.getZ(h),this._w=o.getW(h),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(o){return this._onChangeCallback=o,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class nt{constructor(o=0,h=0,m=0){nt.prototype.isVector3=!0,this.x=o,this.y=h,this.z=m}set(o,h,m){return m===void 0&&(m=this.z),this.x=o,this.y=h,this.z=m,this}setScalar(o){return this.x=o,this.y=o,this.z=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setZ(o){return this.z=o,this}setComponent(o,h){switch(o){case 0:this.x=h;break;case 1:this.y=h;break;case 2:this.z=h;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(o){return this.x=o.x,this.y=o.y,this.z=o.z,this}add(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z,this}addScalar(o){return this.x+=o,this.y+=o,this.z+=o,this}addVectors(o,h){return this.x=o.x+h.x,this.y=o.y+h.y,this.z=o.z+h.z,this}addScaledVector(o,h){return this.x+=o.x*h,this.y+=o.y*h,this.z+=o.z*h,this}sub(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z,this}subScalar(o){return this.x-=o,this.y-=o,this.z-=o,this}subVectors(o,h){return this.x=o.x-h.x,this.y=o.y-h.y,this.z=o.z-h.z,this}multiply(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z,this}multiplyScalar(o){return this.x*=o,this.y*=o,this.z*=o,this}multiplyVectors(o,h){return this.x=o.x*h.x,this.y=o.y*h.y,this.z=o.z*h.z,this}applyEuler(o){return this.applyQuaternion(ys.setFromEuler(o))}applyAxisAngle(o,h){return this.applyQuaternion(ys.setFromAxisAngle(o,h))}applyMatrix3(o){const h=this.x,m=this.y,v=this.z,C=o.elements;return this.x=C[0]*h+C[3]*m+C[6]*v,this.y=C[1]*h+C[4]*m+C[7]*v,this.z=C[2]*h+C[5]*m+C[8]*v,this}applyNormalMatrix(o){return this.applyMatrix3(o).normalize()}applyMatrix4(o){const h=this.x,m=this.y,v=this.z,C=o.elements,b=1/(C[3]*h+C[7]*m+C[11]*v+C[15]);return this.x=(C[0]*h+C[4]*m+C[8]*v+C[12])*b,this.y=(C[1]*h+C[5]*m+C[9]*v+C[13])*b,this.z=(C[2]*h+C[6]*m+C[10]*v+C[14])*b,this}applyQuaternion(o){const h=this.x,m=this.y,v=this.z,C=o.x,b=o.y,L=o.z,W=o.w,J=2*(b*v-L*m),re=2*(L*h-C*v),ue=2*(C*m-b*h);return this.x=h+W*J+b*ue-L*re,this.y=m+W*re+L*J-C*ue,this.z=v+W*ue+C*re-b*J,this}project(o){return this.applyMatrix4(o.matrixWorldInverse).applyMatrix4(o.projectionMatrix)}unproject(o){return this.applyMatrix4(o.projectionMatrixInverse).applyMatrix4(o.matrixWorld)}transformDirection(o){const h=this.x,m=this.y,v=this.z,C=o.elements;return this.x=C[0]*h+C[4]*m+C[8]*v,this.y=C[1]*h+C[5]*m+C[9]*v,this.z=C[2]*h+C[6]*m+C[10]*v,this.normalize()}divide(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z,this}divideScalar(o){return this.multiplyScalar(1/o)}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this}clamp(o,h){return this.x=Math.max(o.x,Math.min(h.x,this.x)),this.y=Math.max(o.y,Math.min(h.y,this.y)),this.z=Math.max(o.z,Math.min(h.z,this.z)),this}clampScalar(o,h){return this.x=Math.max(o,Math.min(h,this.x)),this.y=Math.max(o,Math.min(h,this.y)),this.z=Math.max(o,Math.min(h,this.z)),this}clampLength(o,h){const m=this.length();return this.divideScalar(m||1).multiplyScalar(Math.max(o,Math.min(h,m)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(o){return this.x*o.x+this.y*o.y+this.z*o.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,h){return this.x+=(o.x-this.x)*h,this.y+=(o.y-this.y)*h,this.z+=(o.z-this.z)*h,this}lerpVectors(o,h,m){return this.x=o.x+(h.x-o.x)*m,this.y=o.y+(h.y-o.y)*m,this.z=o.z+(h.z-o.z)*m,this}cross(o){return this.crossVectors(this,o)}crossVectors(o,h){const m=o.x,v=o.y,C=o.z,b=h.x,L=h.y,W=h.z;return this.x=v*W-C*L,this.y=C*b-m*W,this.z=m*L-v*b,this}projectOnVector(o){const h=o.lengthSq();if(h===0)return this.set(0,0,0);const m=o.dot(this)/h;return this.copy(o).multiplyScalar(m)}projectOnPlane(o){return Ko.copy(this).projectOnVector(o),this.sub(Ko)}reflect(o){return this.sub(Ko.copy(o).multiplyScalar(2*this.dot(o)))}angleTo(o){const h=Math.sqrt(this.lengthSq()*o.lengthSq());if(h===0)return Math.PI/2;const m=this.dot(o)/h;return Math.acos(Ts(m,-1,1))}distanceTo(o){return Math.sqrt(this.distanceToSquared(o))}distanceToSquared(o){const h=this.x-o.x,m=this.y-o.y,v=this.z-o.z;return h*h+m*m+v*v}manhattanDistanceTo(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)+Math.abs(this.z-o.z)}setFromSpherical(o){return this.setFromSphericalCoords(o.radius,o.phi,o.theta)}setFromSphericalCoords(o,h,m){const v=Math.sin(h)*o;return this.x=v*Math.sin(m),this.y=Math.cos(h)*o,this.z=v*Math.cos(m),this}setFromCylindrical(o){return this.setFromCylindricalCoords(o.radius,o.theta,o.y)}setFromCylindricalCoords(o,h,m){return this.x=o*Math.sin(h),this.y=m,this.z=o*Math.cos(h),this}setFromMatrixPosition(o){const h=o.elements;return this.x=h[12],this.y=h[13],this.z=h[14],this}setFromMatrixScale(o){const h=this.setFromMatrixColumn(o,0).length(),m=this.setFromMatrixColumn(o,1).length(),v=this.setFromMatrixColumn(o,2).length();return this.x=h,this.y=m,this.z=v,this}setFromMatrixColumn(o,h){return this.fromArray(o.elements,h*4)}setFromMatrix3Column(o,h){return this.fromArray(o.elements,h*3)}setFromEuler(o){return this.x=o._x,this.y=o._y,this.z=o._z,this}setFromColor(o){return this.x=o.r,this.y=o.g,this.z=o.b,this}equals(o){return o.x===this.x&&o.y===this.y&&o.z===this.z}fromArray(o,h=0){return this.x=o[h],this.y=o[h+1],this.z=o[h+2],this}toArray(o=[],h=0){return o[h]=this.x,o[h+1]=this.y,o[h+2]=this.z,o}fromBufferAttribute(o,h){return this.x=o.getX(h),this.y=o.getY(h),this.z=o.getZ(h),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const o=Math.random()*Math.PI*2,h=Math.random()*2-1,m=Math.sqrt(1-h*h);return this.x=m*Math.cos(o),this.y=h,this.z=m*Math.sin(o),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ko=new nt,ys=new xr;class jn{constructor(o=new nt(1/0,1/0,1/0),h=new nt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=o,this.max=h}set(o,h){return this.min.copy(o),this.max.copy(h),this}setFromArray(o){this.makeEmpty();for(let h=0,m=o.length;h<m;h+=3)this.expandByPoint(ho.fromArray(o,h));return this}setFromBufferAttribute(o){this.makeEmpty();for(let h=0,m=o.count;h<m;h++)this.expandByPoint(ho.fromBufferAttribute(o,h));return this}setFromPoints(o){this.makeEmpty();for(let h=0,m=o.length;h<m;h++)this.expandByPoint(o[h]);return this}setFromCenterAndSize(o,h){const m=ho.copy(h).multiplyScalar(.5);return this.min.copy(o).sub(m),this.max.copy(o).add(m),this}setFromObject(o,h=!1){return this.makeEmpty(),this.expandByObject(o,h)}clone(){return new this.constructor().copy(this)}copy(o){return this.min.copy(o.min),this.max.copy(o.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(o){return this.isEmpty()?o.set(0,0,0):o.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(o){return this.isEmpty()?o.set(0,0,0):o.subVectors(this.max,this.min)}expandByPoint(o){return this.min.min(o),this.max.max(o),this}expandByVector(o){return this.min.sub(o),this.max.add(o),this}expandByScalar(o){return this.min.addScalar(-o),this.max.addScalar(o),this}expandByObject(o,h=!1){o.updateWorldMatrix(!1,!1);const m=o.geometry;if(m!==void 0){const C=m.getAttribute("position");if(h===!0&&C!==void 0&&o.isInstancedMesh!==!0)for(let b=0,L=C.count;b<L;b++)o.isMesh===!0?o.getVertexPosition(b,ho):ho.fromBufferAttribute(C,b),ho.applyMatrix4(o.matrixWorld),this.expandByPoint(ho);else o.boundingBox!==void 0?(o.boundingBox===null&&o.computeBoundingBox(),g0.copy(o.boundingBox)):(m.boundingBox===null&&m.computeBoundingBox(),g0.copy(m.boundingBox)),g0.applyMatrix4(o.matrixWorld),this.union(g0)}const v=o.children;for(let C=0,b=v.length;C<b;C++)this.expandByObject(v[C],h);return this}containsPoint(o){return!(o.x<this.min.x||o.x>this.max.x||o.y<this.min.y||o.y>this.max.y||o.z<this.min.z||o.z>this.max.z)}containsBox(o){return this.min.x<=o.min.x&&o.max.x<=this.max.x&&this.min.y<=o.min.y&&o.max.y<=this.max.y&&this.min.z<=o.min.z&&o.max.z<=this.max.z}getParameter(o,h){return h.set((o.x-this.min.x)/(this.max.x-this.min.x),(o.y-this.min.y)/(this.max.y-this.min.y),(o.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(o){return!(o.max.x<this.min.x||o.min.x>this.max.x||o.max.y<this.min.y||o.min.y>this.max.y||o.max.z<this.min.z||o.min.z>this.max.z)}intersectsSphere(o){return this.clampPoint(o.center,ho),ho.distanceToSquared(o.center)<=o.radius*o.radius}intersectsPlane(o){let h,m;return o.normal.x>0?(h=o.normal.x*this.min.x,m=o.normal.x*this.max.x):(h=o.normal.x*this.max.x,m=o.normal.x*this.min.x),o.normal.y>0?(h+=o.normal.y*this.min.y,m+=o.normal.y*this.max.y):(h+=o.normal.y*this.max.y,m+=o.normal.y*this.min.y),o.normal.z>0?(h+=o.normal.z*this.min.z,m+=o.normal.z*this.max.z):(h+=o.normal.z*this.max.z,m+=o.normal.z*this.min.z),h<=-o.constant&&m>=-o.constant}intersectsTriangle(o){if(this.isEmpty())return!1;this.getCenter(Wr),vr.subVectors(this.max,Wr),o0.subVectors(o.a,Wr),no.subVectors(o.b,Wr),qn.subVectors(o.c,Wr),Zn.subVectors(no,o0),Qs.subVectors(qn,no),fo.subVectors(o0,qn);let h=[0,-Zn.z,Zn.y,0,-Qs.z,Qs.y,0,-fo.z,fo.y,Zn.z,0,-Zn.x,Qs.z,0,-Qs.x,fo.z,0,-fo.x,-Zn.y,Zn.x,0,-Qs.y,Qs.x,0,-fo.y,fo.x,0];return!bo(h,o0,no,qn,vr)||(h=[1,0,0,0,1,0,0,0,1],!bo(h,o0,no,qn,vr))?!1:(Zi.crossVectors(Zn,Qs),h=[Zi.x,Zi.y,Zi.z],bo(h,o0,no,qn,vr))}clampPoint(o,h){return h.copy(o).clamp(this.min,this.max)}distanceToPoint(o){return this.clampPoint(o,ho).distanceTo(o)}getBoundingSphere(o){return this.isEmpty()?o.makeEmpty():(this.getCenter(o.center),o.radius=this.getSize(ho).length()*.5),o}intersect(o){return this.min.max(o.min),this.max.min(o.max),this.isEmpty()&&this.makeEmpty(),this}union(o){return this.min.min(o.min),this.max.max(o.max),this}applyMatrix4(o){return this.isEmpty()?this:(_r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(o),_r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(o),_r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(o),_r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(o),_r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(o),_r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(o),_r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(o),_r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(o),this.setFromPoints(_r),this)}translate(o){return this.min.add(o),this.max.add(o),this}equals(o){return o.min.equals(this.min)&&o.max.equals(this.max)}}const _r=[new nt,new nt,new nt,new nt,new nt,new nt,new nt,new nt],ho=new nt,g0=new jn,o0=new nt,no=new nt,qn=new nt,Zn=new nt,Qs=new nt,fo=new nt,Wr=new nt,vr=new nt,Zi=new nt,fr=new nt;function bo(x,o,h,m,v){for(let C=0,b=x.length-3;C<=b;C+=3){fr.fromArray(x,C);const L=v.x*Math.abs(fr.x)+v.y*Math.abs(fr.y)+v.z*Math.abs(fr.z),W=o.dot(fr),J=h.dot(fr),re=m.dot(fr);if(Math.max(-Math.max(W,J,re),Math.min(W,J,re))>L)return!1}return!0}const X0=new jn,Y0=new nt,qa=new nt;class Vs{constructor(o=new nt,h=-1){this.isSphere=!0,this.center=o,this.radius=h}set(o,h){return this.center.copy(o),this.radius=h,this}setFromPoints(o,h){const m=this.center;h!==void 0?m.copy(h):X0.setFromPoints(o).getCenter(m);let v=0;for(let C=0,b=o.length;C<b;C++)v=Math.max(v,m.distanceToSquared(o[C]));return this.radius=Math.sqrt(v),this}copy(o){return this.center.copy(o.center),this.radius=o.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(o){return o.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(o){return o.distanceTo(this.center)-this.radius}intersectsSphere(o){const h=this.radius+o.radius;return o.center.distanceToSquared(this.center)<=h*h}intersectsBox(o){return o.intersectsSphere(this)}intersectsPlane(o){return Math.abs(o.distanceToPoint(this.center))<=this.radius}clampPoint(o,h){const m=this.center.distanceToSquared(o);return h.copy(o),m>this.radius*this.radius&&(h.sub(this.center).normalize(),h.multiplyScalar(this.radius).add(this.center)),h}getBoundingBox(o){return this.isEmpty()?(o.makeEmpty(),o):(o.set(this.center,this.center),o.expandByScalar(this.radius),o)}applyMatrix4(o){return this.center.applyMatrix4(o),this.radius=this.radius*o.getMaxScaleOnAxis(),this}translate(o){return this.center.add(o),this}expandByPoint(o){if(this.isEmpty())return this.center.copy(o),this.radius=0,this;Y0.subVectors(o,this.center);const h=Y0.lengthSq();if(h>this.radius*this.radius){const m=Math.sqrt(h),v=(m-this.radius)*.5;this.center.addScaledVector(Y0,v/m),this.radius+=v}return this}union(o){return o.isEmpty()?this:this.isEmpty()?(this.copy(o),this):(this.center.equals(o.center)===!0?this.radius=Math.max(this.radius,o.radius):(qa.subVectors(o.center,this.center).setLength(o.radius),this.expandByPoint(Y0.copy(o.center).add(qa)),this.expandByPoint(Y0.copy(o.center).sub(qa))),this)}equals(o){return o.center.equals(this.center)&&o.radius===this.radius}clone(){return new this.constructor().copy(this)}}const F0=new nt,Ca=new nt,Bl=new nt,_a=new nt,Ll=new nt,S0=new nt,Dl=new nt;class Is{constructor(o=new nt,h=new nt(0,0,-1)){this.origin=o,this.direction=h}set(o,h){return this.origin.copy(o),this.direction.copy(h),this}copy(o){return this.origin.copy(o.origin),this.direction.copy(o.direction),this}at(o,h){return h.copy(this.origin).addScaledVector(this.direction,o)}lookAt(o){return this.direction.copy(o).sub(this.origin).normalize(),this}recast(o){return this.origin.copy(this.at(o,F0)),this}closestPointToPoint(o,h){h.subVectors(o,this.origin);const m=h.dot(this.direction);return m<0?h.copy(this.origin):h.copy(this.origin).addScaledVector(this.direction,m)}distanceToPoint(o){return Math.sqrt(this.distanceSqToPoint(o))}distanceSqToPoint(o){const h=F0.subVectors(o,this.origin).dot(this.direction);return h<0?this.origin.distanceToSquared(o):(F0.copy(this.origin).addScaledVector(this.direction,h),F0.distanceToSquared(o))}distanceSqToSegment(o,h,m,v){Ca.copy(o).add(h).multiplyScalar(.5),Bl.copy(h).sub(o).normalize(),_a.copy(this.origin).sub(Ca);const C=o.distanceTo(h)*.5,b=-this.direction.dot(Bl),L=_a.dot(this.direction),W=-_a.dot(Bl),J=_a.lengthSq(),re=Math.abs(1-b*b);let ue,pe,ve,xe;if(re>0)if(ue=b*W-L,pe=b*L-W,xe=C*re,ue>=0)if(pe>=-xe)if(pe<=xe){const Le=1/re;ue*=Le,pe*=Le,ve=ue*(ue+b*pe+2*L)+pe*(b*ue+pe+2*W)+J}else pe=C,ue=Math.max(0,-(b*pe+L)),ve=-ue*ue+pe*(pe+2*W)+J;else pe=-C,ue=Math.max(0,-(b*pe+L)),ve=-ue*ue+pe*(pe+2*W)+J;else pe<=-xe?(ue=Math.max(0,-(-b*C+L)),pe=ue>0?-C:Math.min(Math.max(-C,-W),C),ve=-ue*ue+pe*(pe+2*W)+J):pe<=xe?(ue=0,pe=Math.min(Math.max(-C,-W),C),ve=pe*(pe+2*W)+J):(ue=Math.max(0,-(b*C+L)),pe=ue>0?C:Math.min(Math.max(-C,-W),C),ve=-ue*ue+pe*(pe+2*W)+J);else pe=b>0?-C:C,ue=Math.max(0,-(b*pe+L)),ve=-ue*ue+pe*(pe+2*W)+J;return m&&m.copy(this.origin).addScaledVector(this.direction,ue),v&&v.copy(Ca).addScaledVector(Bl,pe),ve}intersectSphere(o,h){F0.subVectors(o.center,this.origin);const m=F0.dot(this.direction),v=F0.dot(F0)-m*m,C=o.radius*o.radius;if(v>C)return null;const b=Math.sqrt(C-v),L=m-b,W=m+b;return W<0?null:L<0?this.at(W,h):this.at(L,h)}intersectsSphere(o){return this.distanceSqToPoint(o.center)<=o.radius*o.radius}distanceToPlane(o){const h=o.normal.dot(this.direction);if(h===0)return o.distanceToPoint(this.origin)===0?0:null;const m=-(this.origin.dot(o.normal)+o.constant)/h;return m>=0?m:null}intersectPlane(o,h){const m=this.distanceToPlane(o);return m===null?null:this.at(m,h)}intersectsPlane(o){const h=o.distanceToPoint(this.origin);return h===0||o.normal.dot(this.direction)*h<0}intersectBox(o,h){let m,v,C,b,L,W;const J=1/this.direction.x,re=1/this.direction.y,ue=1/this.direction.z,pe=this.origin;return J>=0?(m=(o.min.x-pe.x)*J,v=(o.max.x-pe.x)*J):(m=(o.max.x-pe.x)*J,v=(o.min.x-pe.x)*J),re>=0?(C=(o.min.y-pe.y)*re,b=(o.max.y-pe.y)*re):(C=(o.max.y-pe.y)*re,b=(o.min.y-pe.y)*re),m>b||C>v||((C>m||isNaN(m))&&(m=C),(b<v||isNaN(v))&&(v=b),ue>=0?(L=(o.min.z-pe.z)*ue,W=(o.max.z-pe.z)*ue):(L=(o.max.z-pe.z)*ue,W=(o.min.z-pe.z)*ue),m>W||L>v)||((L>m||m!==m)&&(m=L),(W<v||v!==v)&&(v=W),v<0)?null:this.at(m>=0?m:v,h)}intersectsBox(o){return this.intersectBox(o,F0)!==null}intersectTriangle(o,h,m,v,C){Ll.subVectors(h,o),S0.subVectors(m,o),Dl.crossVectors(Ll,S0);let b=this.direction.dot(Dl),L;if(b>0){if(v)return null;L=1}else if(b<0)L=-1,b=-b;else return null;_a.subVectors(this.origin,o);const W=L*this.direction.dot(S0.crossVectors(_a,S0));if(W<0)return null;const J=L*this.direction.dot(Ll.cross(_a));if(J<0||W+J>b)return null;const re=-L*_a.dot(Dl);return re<0?null:this.at(re/b,C)}applyMatrix4(o){return this.origin.applyMatrix4(o),this.direction.transformDirection(o),this}equals(o){return o.origin.equals(this.origin)&&o.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class on{constructor(o,h,m,v,C,b,L,W,J,re,ue,pe,ve,xe,Le,Se){on.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o!==void 0&&this.set(o,h,m,v,C,b,L,W,J,re,ue,pe,ve,xe,Le,Se)}set(o,h,m,v,C,b,L,W,J,re,ue,pe,ve,xe,Le,Se){const Ee=this.elements;return Ee[0]=o,Ee[4]=h,Ee[8]=m,Ee[12]=v,Ee[1]=C,Ee[5]=b,Ee[9]=L,Ee[13]=W,Ee[2]=J,Ee[6]=re,Ee[10]=ue,Ee[14]=pe,Ee[3]=ve,Ee[7]=xe,Ee[11]=Le,Ee[15]=Se,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new on().fromArray(this.elements)}copy(o){const h=this.elements,m=o.elements;return h[0]=m[0],h[1]=m[1],h[2]=m[2],h[3]=m[3],h[4]=m[4],h[5]=m[5],h[6]=m[6],h[7]=m[7],h[8]=m[8],h[9]=m[9],h[10]=m[10],h[11]=m[11],h[12]=m[12],h[13]=m[13],h[14]=m[14],h[15]=m[15],this}copyPosition(o){const h=this.elements,m=o.elements;return h[12]=m[12],h[13]=m[13],h[14]=m[14],this}setFromMatrix3(o){const h=o.elements;return this.set(h[0],h[3],h[6],0,h[1],h[4],h[7],0,h[2],h[5],h[8],0,0,0,0,1),this}extractBasis(o,h,m){return o.setFromMatrixColumn(this,0),h.setFromMatrixColumn(this,1),m.setFromMatrixColumn(this,2),this}makeBasis(o,h,m){return this.set(o.x,h.x,m.x,0,o.y,h.y,m.y,0,o.z,h.z,m.z,0,0,0,0,1),this}extractRotation(o){const h=this.elements,m=o.elements,v=1/Fs.setFromMatrixColumn(o,0).length(),C=1/Fs.setFromMatrixColumn(o,1).length(),b=1/Fs.setFromMatrixColumn(o,2).length();return h[0]=m[0]*v,h[1]=m[1]*v,h[2]=m[2]*v,h[3]=0,h[4]=m[4]*C,h[5]=m[5]*C,h[6]=m[6]*C,h[7]=0,h[8]=m[8]*b,h[9]=m[9]*b,h[10]=m[10]*b,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this}makeRotationFromEuler(o){const h=this.elements,m=o.x,v=o.y,C=o.z,b=Math.cos(m),L=Math.sin(m),W=Math.cos(v),J=Math.sin(v),re=Math.cos(C),ue=Math.sin(C);if(o.order==="XYZ"){const pe=b*re,ve=b*ue,xe=L*re,Le=L*ue;h[0]=W*re,h[4]=-W*ue,h[8]=J,h[1]=ve+xe*J,h[5]=pe-Le*J,h[9]=-L*W,h[2]=Le-pe*J,h[6]=xe+ve*J,h[10]=b*W}else if(o.order==="YXZ"){const pe=W*re,ve=W*ue,xe=J*re,Le=J*ue;h[0]=pe+Le*L,h[4]=xe*L-ve,h[8]=b*J,h[1]=b*ue,h[5]=b*re,h[9]=-L,h[2]=ve*L-xe,h[6]=Le+pe*L,h[10]=b*W}else if(o.order==="ZXY"){const pe=W*re,ve=W*ue,xe=J*re,Le=J*ue;h[0]=pe-Le*L,h[4]=-b*ue,h[8]=xe+ve*L,h[1]=ve+xe*L,h[5]=b*re,h[9]=Le-pe*L,h[2]=-b*J,h[6]=L,h[10]=b*W}else if(o.order==="ZYX"){const pe=b*re,ve=b*ue,xe=L*re,Le=L*ue;h[0]=W*re,h[4]=xe*J-ve,h[8]=pe*J+Le,h[1]=W*ue,h[5]=Le*J+pe,h[9]=ve*J-xe,h[2]=-J,h[6]=L*W,h[10]=b*W}else if(o.order==="YZX"){const pe=b*W,ve=b*J,xe=L*W,Le=L*J;h[0]=W*re,h[4]=Le-pe*ue,h[8]=xe*ue+ve,h[1]=ue,h[5]=b*re,h[9]=-L*re,h[2]=-J*re,h[6]=ve*ue+xe,h[10]=pe-Le*ue}else if(o.order==="XZY"){const pe=b*W,ve=b*J,xe=L*W,Le=L*J;h[0]=W*re,h[4]=-ue,h[8]=J*re,h[1]=pe*ue+Le,h[5]=b*re,h[9]=ve*ue-xe,h[2]=xe*ue-ve,h[6]=L*re,h[10]=Le*ue+pe}return h[3]=0,h[7]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,this}makeRotationFromQuaternion(o){return this.compose(gu,o,Td)}lookAt(o,h,m){const v=this.elements;return ko.subVectors(o,h),ko.lengthSq()===0&&(ko.z=1),ko.normalize(),dl.crossVectors(m,ko),dl.lengthSq()===0&&(Math.abs(m.z)===1?ko.x+=1e-4:ko.z+=1e-4,ko.normalize(),dl.crossVectors(m,ko)),dl.normalize(),q0.crossVectors(ko,dl),v[0]=dl.x,v[4]=q0.x,v[8]=ko.x,v[1]=dl.y,v[5]=q0.y,v[9]=ko.y,v[2]=dl.z,v[6]=q0.z,v[10]=ko.z,this}multiply(o){return this.multiplyMatrices(this,o)}premultiply(o){return this.multiplyMatrices(o,this)}multiplyMatrices(o,h){const m=o.elements,v=h.elements,C=this.elements,b=m[0],L=m[4],W=m[8],J=m[12],re=m[1],ue=m[5],pe=m[9],ve=m[13],xe=m[2],Le=m[6],Se=m[10],Ee=m[14],Ke=m[3],Ge=m[7],Ue=m[11],Ct=m[15],at=v[0],ft=v[4],yt=v[8],et=v[12],qe=v[1],wt=v[5],Ft=v[9],Lt=v[13],Gt=v[2],ti=v[6],Ei=v[10],$i=v[14],ri=v[3],zi=v[7],Yi=v[11],Rn=v[15];return C[0]=b*at+L*qe+W*Gt+J*ri,C[4]=b*ft+L*wt+W*ti+J*zi,C[8]=b*yt+L*Ft+W*Ei+J*Yi,C[12]=b*et+L*Lt+W*$i+J*Rn,C[1]=re*at+ue*qe+pe*Gt+ve*ri,C[5]=re*ft+ue*wt+pe*ti+ve*zi,C[9]=re*yt+ue*Ft+pe*Ei+ve*Yi,C[13]=re*et+ue*Lt+pe*$i+ve*Rn,C[2]=xe*at+Le*qe+Se*Gt+Ee*ri,C[6]=xe*ft+Le*wt+Se*ti+Ee*zi,C[10]=xe*yt+Le*Ft+Se*Ei+Ee*Yi,C[14]=xe*et+Le*Lt+Se*$i+Ee*Rn,C[3]=Ke*at+Ge*qe+Ue*Gt+Ct*ri,C[7]=Ke*ft+Ge*wt+Ue*ti+Ct*zi,C[11]=Ke*yt+Ge*Ft+Ue*Ei+Ct*Yi,C[15]=Ke*et+Ge*Lt+Ue*$i+Ct*Rn,this}multiplyScalar(o){const h=this.elements;return h[0]*=o,h[4]*=o,h[8]*=o,h[12]*=o,h[1]*=o,h[5]*=o,h[9]*=o,h[13]*=o,h[2]*=o,h[6]*=o,h[10]*=o,h[14]*=o,h[3]*=o,h[7]*=o,h[11]*=o,h[15]*=o,this}determinant(){const o=this.elements,h=o[0],m=o[4],v=o[8],C=o[12],b=o[1],L=o[5],W=o[9],J=o[13],re=o[2],ue=o[6],pe=o[10],ve=o[14],xe=o[3],Le=o[7],Se=o[11],Ee=o[15];return xe*(+C*W*ue-v*J*ue-C*L*pe+m*J*pe+v*L*ve-m*W*ve)+Le*(+h*W*ve-h*J*pe+C*b*pe-v*b*ve+v*J*re-C*W*re)+Se*(+h*J*ue-h*L*ve-C*b*ue+m*b*ve+C*L*re-m*J*re)+Ee*(-v*L*re-h*W*ue+h*L*pe+v*b*ue-m*b*pe+m*W*re)}transpose(){const o=this.elements;let h;return h=o[1],o[1]=o[4],o[4]=h,h=o[2],o[2]=o[8],o[8]=h,h=o[6],o[6]=o[9],o[9]=h,h=o[3],o[3]=o[12],o[12]=h,h=o[7],o[7]=o[13],o[13]=h,h=o[11],o[11]=o[14],o[14]=h,this}setPosition(o,h,m){const v=this.elements;return o.isVector3?(v[12]=o.x,v[13]=o.y,v[14]=o.z):(v[12]=o,v[13]=h,v[14]=m),this}invert(){const o=this.elements,h=o[0],m=o[1],v=o[2],C=o[3],b=o[4],L=o[5],W=o[6],J=o[7],re=o[8],ue=o[9],pe=o[10],ve=o[11],xe=o[12],Le=o[13],Se=o[14],Ee=o[15],Ke=ue*Se*J-Le*pe*J+Le*W*ve-L*Se*ve-ue*W*Ee+L*pe*Ee,Ge=xe*pe*J-re*Se*J-xe*W*ve+b*Se*ve+re*W*Ee-b*pe*Ee,Ue=re*Le*J-xe*ue*J+xe*L*ve-b*Le*ve-re*L*Ee+b*ue*Ee,Ct=xe*ue*W-re*Le*W-xe*L*pe+b*Le*pe+re*L*Se-b*ue*Se,at=h*Ke+m*Ge+v*Ue+C*Ct;if(at===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const ft=1/at;return o[0]=Ke*ft,o[1]=(Le*pe*C-ue*Se*C-Le*v*ve+m*Se*ve+ue*v*Ee-m*pe*Ee)*ft,o[2]=(L*Se*C-Le*W*C+Le*v*J-m*Se*J-L*v*Ee+m*W*Ee)*ft,o[3]=(ue*W*C-L*pe*C-ue*v*J+m*pe*J+L*v*ve-m*W*ve)*ft,o[4]=Ge*ft,o[5]=(re*Se*C-xe*pe*C+xe*v*ve-h*Se*ve-re*v*Ee+h*pe*Ee)*ft,o[6]=(xe*W*C-b*Se*C-xe*v*J+h*Se*J+b*v*Ee-h*W*Ee)*ft,o[7]=(b*pe*C-re*W*C+re*v*J-h*pe*J-b*v*ve+h*W*ve)*ft,o[8]=Ue*ft,o[9]=(xe*ue*C-re*Le*C-xe*m*ve+h*Le*ve+re*m*Ee-h*ue*Ee)*ft,o[10]=(b*Le*C-xe*L*C+xe*m*J-h*Le*J-b*m*Ee+h*L*Ee)*ft,o[11]=(re*L*C-b*ue*C-re*m*J+h*ue*J+b*m*ve-h*L*ve)*ft,o[12]=Ct*ft,o[13]=(re*Le*v-xe*ue*v+xe*m*pe-h*Le*pe-re*m*Se+h*ue*Se)*ft,o[14]=(xe*L*v-b*Le*v-xe*m*W+h*Le*W+b*m*Se-h*L*Se)*ft,o[15]=(b*ue*v-re*L*v+re*m*W-h*ue*W-b*m*pe+h*L*pe)*ft,this}scale(o){const h=this.elements,m=o.x,v=o.y,C=o.z;return h[0]*=m,h[4]*=v,h[8]*=C,h[1]*=m,h[5]*=v,h[9]*=C,h[2]*=m,h[6]*=v,h[10]*=C,h[3]*=m,h[7]*=v,h[11]*=C,this}getMaxScaleOnAxis(){const o=this.elements,h=o[0]*o[0]+o[1]*o[1]+o[2]*o[2],m=o[4]*o[4]+o[5]*o[5]+o[6]*o[6],v=o[8]*o[8]+o[9]*o[9]+o[10]*o[10];return Math.sqrt(Math.max(h,m,v))}makeTranslation(o,h,m){return o.isVector3?this.set(1,0,0,o.x,0,1,0,o.y,0,0,1,o.z,0,0,0,1):this.set(1,0,0,o,0,1,0,h,0,0,1,m,0,0,0,1),this}makeRotationX(o){const h=Math.cos(o),m=Math.sin(o);return this.set(1,0,0,0,0,h,-m,0,0,m,h,0,0,0,0,1),this}makeRotationY(o){const h=Math.cos(o),m=Math.sin(o);return this.set(h,0,m,0,0,1,0,0,-m,0,h,0,0,0,0,1),this}makeRotationZ(o){const h=Math.cos(o),m=Math.sin(o);return this.set(h,-m,0,0,m,h,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(o,h){const m=Math.cos(h),v=Math.sin(h),C=1-m,b=o.x,L=o.y,W=o.z,J=C*b,re=C*L;return this.set(J*b+m,J*L-v*W,J*W+v*L,0,J*L+v*W,re*L+m,re*W-v*b,0,J*W-v*L,re*W+v*b,C*W*W+m,0,0,0,0,1),this}makeScale(o,h,m){return this.set(o,0,0,0,0,h,0,0,0,0,m,0,0,0,0,1),this}makeShear(o,h,m,v,C,b){return this.set(1,m,C,0,o,1,b,0,h,v,1,0,0,0,0,1),this}compose(o,h,m){const v=this.elements,C=h._x,b=h._y,L=h._z,W=h._w,J=C+C,re=b+b,ue=L+L,pe=C*J,ve=C*re,xe=C*ue,Le=b*re,Se=b*ue,Ee=L*ue,Ke=W*J,Ge=W*re,Ue=W*ue,Ct=m.x,at=m.y,ft=m.z;return v[0]=(1-(Le+Ee))*Ct,v[1]=(ve+Ue)*Ct,v[2]=(xe-Ge)*Ct,v[3]=0,v[4]=(ve-Ue)*at,v[5]=(1-(pe+Ee))*at,v[6]=(Se+Ke)*at,v[7]=0,v[8]=(xe+Ge)*ft,v[9]=(Se-Ke)*ft,v[10]=(1-(pe+Le))*ft,v[11]=0,v[12]=o.x,v[13]=o.y,v[14]=o.z,v[15]=1,this}decompose(o,h,m){const v=this.elements;let C=Fs.set(v[0],v[1],v[2]).length();const b=Fs.set(v[4],v[5],v[6]).length(),L=Fs.set(v[8],v[9],v[10]).length();this.determinant()<0&&(C=-C),o.x=v[12],o.y=v[13],o.z=v[14],Kr.copy(this);const J=1/C,re=1/b,ue=1/L;return Kr.elements[0]*=J,Kr.elements[1]*=J,Kr.elements[2]*=J,Kr.elements[4]*=re,Kr.elements[5]*=re,Kr.elements[6]*=re,Kr.elements[8]*=ue,Kr.elements[9]*=ue,Kr.elements[10]*=ue,h.setFromRotationMatrix(Kr),m.x=C,m.y=b,m.z=L,this}makePerspective(o,h,m,v,C,b,L=O0){const W=this.elements,J=2*C/(h-o),re=2*C/(m-v),ue=(h+o)/(h-o),pe=(m+v)/(m-v);let ve,xe;if(L===O0)ve=-(b+C)/(b-C),xe=-2*b*C/(b-C);else if(L===Qa)ve=-b/(b-C),xe=-b*C/(b-C);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+L);return W[0]=J,W[4]=0,W[8]=ue,W[12]=0,W[1]=0,W[5]=re,W[9]=pe,W[13]=0,W[2]=0,W[6]=0,W[10]=ve,W[14]=xe,W[3]=0,W[7]=0,W[11]=-1,W[15]=0,this}makeOrthographic(o,h,m,v,C,b,L=O0){const W=this.elements,J=1/(h-o),re=1/(m-v),ue=1/(b-C),pe=(h+o)*J,ve=(m+v)*re;let xe,Le;if(L===O0)xe=(b+C)*ue,Le=-2*ue;else if(L===Qa)xe=C*ue,Le=-1*ue;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+L);return W[0]=2*J,W[4]=0,W[8]=0,W[12]=-pe,W[1]=0,W[5]=2*re,W[9]=0,W[13]=-ve,W[2]=0,W[6]=0,W[10]=Le,W[14]=-xe,W[3]=0,W[7]=0,W[11]=0,W[15]=1,this}equals(o){const h=this.elements,m=o.elements;for(let v=0;v<16;v++)if(h[v]!==m[v])return!1;return!0}fromArray(o,h=0){for(let m=0;m<16;m++)this.elements[m]=o[m+h];return this}toArray(o=[],h=0){const m=this.elements;return o[h]=m[0],o[h+1]=m[1],o[h+2]=m[2],o[h+3]=m[3],o[h+4]=m[4],o[h+5]=m[5],o[h+6]=m[6],o[h+7]=m[7],o[h+8]=m[8],o[h+9]=m[9],o[h+10]=m[10],o[h+11]=m[11],o[h+12]=m[12],o[h+13]=m[13],o[h+14]=m[14],o[h+15]=m[15],o}}const Fs=new nt,Kr=new on,gu=new nt(0,0,0),Td=new nt(1,1,1),dl=new nt,q0=new nt,ko=new nt,Pl=new on,jl=new xr;class a0{constructor(o=0,h=0,m=0,v=a0.DEFAULT_ORDER){this.isEuler=!0,this._x=o,this._y=h,this._z=m,this._order=v}get x(){return this._x}set x(o){this._x=o,this._onChangeCallback()}get y(){return this._y}set y(o){this._y=o,this._onChangeCallback()}get z(){return this._z}set z(o){this._z=o,this._onChangeCallback()}get order(){return this._order}set order(o){this._order=o,this._onChangeCallback()}set(o,h,m,v=this._order){return this._x=o,this._y=h,this._z=m,this._order=v,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(o){return this._x=o._x,this._y=o._y,this._z=o._z,this._order=o._order,this._onChangeCallback(),this}setFromRotationMatrix(o,h=this._order,m=!0){const v=o.elements,C=v[0],b=v[4],L=v[8],W=v[1],J=v[5],re=v[9],ue=v[2],pe=v[6],ve=v[10];switch(h){case"XYZ":this._y=Math.asin(Ts(L,-1,1)),Math.abs(L)<.9999999?(this._x=Math.atan2(-re,ve),this._z=Math.atan2(-b,C)):(this._x=Math.atan2(pe,J),this._z=0);break;case"YXZ":this._x=Math.asin(-Ts(re,-1,1)),Math.abs(re)<.9999999?(this._y=Math.atan2(L,ve),this._z=Math.atan2(W,J)):(this._y=Math.atan2(-ue,C),this._z=0);break;case"ZXY":this._x=Math.asin(Ts(pe,-1,1)),Math.abs(pe)<.9999999?(this._y=Math.atan2(-ue,ve),this._z=Math.atan2(-b,J)):(this._y=0,this._z=Math.atan2(W,C));break;case"ZYX":this._y=Math.asin(-Ts(ue,-1,1)),Math.abs(ue)<.9999999?(this._x=Math.atan2(pe,ve),this._z=Math.atan2(W,C)):(this._x=0,this._z=Math.atan2(-b,J));break;case"YZX":this._z=Math.asin(Ts(W,-1,1)),Math.abs(W)<.9999999?(this._x=Math.atan2(-re,J),this._y=Math.atan2(-ue,C)):(this._x=0,this._y=Math.atan2(L,ve));break;case"XZY":this._z=Math.asin(-Ts(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(pe,J),this._y=Math.atan2(L,C)):(this._x=Math.atan2(-re,ve),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+h)}return this._order=h,m===!0&&this._onChangeCallback(),this}setFromQuaternion(o,h,m){return Pl.makeRotationFromQuaternion(o),this.setFromRotationMatrix(Pl,h,m)}setFromVector3(o,h=this._order){return this.set(o.x,o.y,o.z,h)}reorder(o){return jl.setFromEuler(this),this.setFromQuaternion(jl,o)}equals(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._order===this._order}fromArray(o){return this._x=o[0],this._y=o[1],this._z=o[2],o[3]!==void 0&&(this._order=o[3]),this._onChangeCallback(),this}toArray(o=[],h=0){return o[h]=this._x,o[h+1]=this._y,o[h+2]=this._z,o[h+3]=this._order,o}_onChange(o){return this._onChangeCallback=o,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}a0.DEFAULT_ORDER="XYZ";class xa{constructor(){this.mask=1}set(o){this.mask=(1<<o|0)>>>0}enable(o){this.mask|=1<<o|0}enableAll(){this.mask=-1}toggle(o){this.mask^=1<<o|0}disable(o){this.mask&=~(1<<o|0)}disableAll(){this.mask=0}test(o){return(this.mask&o.mask)!==0}isEnabled(o){return(this.mask&(1<<o|0))!==0}}let b0=0;const ws=new nt,Yr=new xr,No=new on,eo=new nt,To=new nt,Ja=new nt,Za=new xr,l0=new nt(1,0,0),Ol=new nt(0,1,0),Ac=new nt(0,0,1),vu={type:"added"},B1={type:"removed"},ps={type:"childadded",child:null},J0={type:"childremoved",child:null};class Nr extends uo{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:b0++}),this.uuid=Wo(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Nr.DEFAULT_UP.clone();const o=new nt,h=new a0,m=new xr,v=new nt(1,1,1);function C(){m.setFromEuler(h,!1)}function b(){h.setFromQuaternion(m,void 0,!1)}h._onChange(C),m._onChange(b),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:o},rotation:{configurable:!0,enumerable:!0,value:h},quaternion:{configurable:!0,enumerable:!0,value:m},scale:{configurable:!0,enumerable:!0,value:v},modelViewMatrix:{value:new on},normalMatrix:{value:new Nn}}),this.matrix=new on,this.matrixWorld=new on,this.matrixAutoUpdate=Nr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Nr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new xa,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(o){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(o),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(o){return this.quaternion.premultiply(o),this}setRotationFromAxisAngle(o,h){this.quaternion.setFromAxisAngle(o,h)}setRotationFromEuler(o){this.quaternion.setFromEuler(o,!0)}setRotationFromMatrix(o){this.quaternion.setFromRotationMatrix(o)}setRotationFromQuaternion(o){this.quaternion.copy(o)}rotateOnAxis(o,h){return Yr.setFromAxisAngle(o,h),this.quaternion.multiply(Yr),this}rotateOnWorldAxis(o,h){return Yr.setFromAxisAngle(o,h),this.quaternion.premultiply(Yr),this}rotateX(o){return this.rotateOnAxis(l0,o)}rotateY(o){return this.rotateOnAxis(Ol,o)}rotateZ(o){return this.rotateOnAxis(Ac,o)}translateOnAxis(o,h){return ws.copy(o).applyQuaternion(this.quaternion),this.position.add(ws.multiplyScalar(h)),this}translateX(o){return this.translateOnAxis(l0,o)}translateY(o){return this.translateOnAxis(Ol,o)}translateZ(o){return this.translateOnAxis(Ac,o)}localToWorld(o){return this.updateWorldMatrix(!0,!1),o.applyMatrix4(this.matrixWorld)}worldToLocal(o){return this.updateWorldMatrix(!0,!1),o.applyMatrix4(No.copy(this.matrixWorld).invert())}lookAt(o,h,m){o.isVector3?eo.copy(o):eo.set(o,h,m);const v=this.parent;this.updateWorldMatrix(!0,!1),To.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?No.lookAt(To,eo,this.up):No.lookAt(eo,To,this.up),this.quaternion.setFromRotationMatrix(No),v&&(No.extractRotation(v.matrixWorld),Yr.setFromRotationMatrix(No),this.quaternion.premultiply(Yr.invert()))}add(o){if(arguments.length>1){for(let h=0;h<arguments.length;h++)this.add(arguments[h]);return this}return o===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",o),this):(o&&o.isObject3D?(o.removeFromParent(),o.parent=this,this.children.push(o),o.dispatchEvent(vu),ps.child=o,this.dispatchEvent(ps),ps.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",o),this)}remove(o){if(arguments.length>1){for(let m=0;m<arguments.length;m++)this.remove(arguments[m]);return this}const h=this.children.indexOf(o);return h!==-1&&(o.parent=null,this.children.splice(h,1),o.dispatchEvent(B1),J0.child=o,this.dispatchEvent(J0),J0.child=null),this}removeFromParent(){const o=this.parent;return o!==null&&o.remove(this),this}clear(){return this.remove(...this.children)}attach(o){return this.updateWorldMatrix(!0,!1),No.copy(this.matrixWorld).invert(),o.parent!==null&&(o.parent.updateWorldMatrix(!0,!1),No.multiply(o.parent.matrixWorld)),o.applyMatrix4(No),o.removeFromParent(),o.parent=this,this.children.push(o),o.updateWorldMatrix(!1,!0),o.dispatchEvent(vu),ps.child=o,this.dispatchEvent(ps),ps.child=null,this}getObjectById(o){return this.getObjectByProperty("id",o)}getObjectByName(o){return this.getObjectByProperty("name",o)}getObjectByProperty(o,h){if(this[o]===h)return this;for(let m=0,v=this.children.length;m<v;m++){const b=this.children[m].getObjectByProperty(o,h);if(b!==void 0)return b}}getObjectsByProperty(o,h,m=[]){this[o]===h&&m.push(this);const v=this.children;for(let C=0,b=v.length;C<b;C++)v[C].getObjectsByProperty(o,h,m);return m}getWorldPosition(o){return this.updateWorldMatrix(!0,!1),o.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(o){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(To,o,Ja),o}getWorldScale(o){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(To,Za,o),o}getWorldDirection(o){this.updateWorldMatrix(!0,!1);const h=this.matrixWorld.elements;return o.set(h[8],h[9],h[10]).normalize()}raycast(){}traverse(o){o(this);const h=this.children;for(let m=0,v=h.length;m<v;m++)h[m].traverse(o)}traverseVisible(o){if(this.visible===!1)return;o(this);const h=this.children;for(let m=0,v=h.length;m<v;m++)h[m].traverseVisible(o)}traverseAncestors(o){const h=this.parent;h!==null&&(o(h),h.traverseAncestors(o))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,o=!0);const h=this.children;for(let m=0,v=h.length;m<v;m++){const C=h[m];(C.matrixWorldAutoUpdate===!0||o===!0)&&C.updateMatrixWorld(o)}}updateWorldMatrix(o,h){const m=this.parent;if(o===!0&&m!==null&&m.matrixWorldAutoUpdate===!0&&m.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),h===!0){const v=this.children;for(let C=0,b=v.length;C<b;C++){const L=v[C];L.matrixWorldAutoUpdate===!0&&L.updateWorldMatrix(!1,!0)}}}toJSON(o){const h=o===void 0||typeof o=="string",m={};h&&(o={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},m.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const v={};v.uuid=this.uuid,v.type=this.type,this.name!==""&&(v.name=this.name),this.castShadow===!0&&(v.castShadow=!0),this.receiveShadow===!0&&(v.receiveShadow=!0),this.visible===!1&&(v.visible=!1),this.frustumCulled===!1&&(v.frustumCulled=!1),this.renderOrder!==0&&(v.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(v.userData=this.userData),v.layers=this.layers.mask,v.matrix=this.matrix.toArray(),v.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(v.matrixAutoUpdate=!1),this.isInstancedMesh&&(v.type="InstancedMesh",v.count=this.count,v.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(v.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(v.type="BatchedMesh",v.perObjectFrustumCulled=this.perObjectFrustumCulled,v.sortObjects=this.sortObjects,v.drawRanges=this._drawRanges,v.reservedRanges=this._reservedRanges,v.visibility=this._visibility,v.active=this._active,v.bounds=this._bounds.map(L=>({boxInitialized:L.boxInitialized,boxMin:L.box.min.toArray(),boxMax:L.box.max.toArray(),sphereInitialized:L.sphereInitialized,sphereRadius:L.sphere.radius,sphereCenter:L.sphere.center.toArray()})),v.maxGeometryCount=this._maxGeometryCount,v.maxVertexCount=this._maxVertexCount,v.maxIndexCount=this._maxIndexCount,v.geometryInitialized=this._geometryInitialized,v.geometryCount=this._geometryCount,v.matricesTexture=this._matricesTexture.toJSON(o),this.boundingSphere!==null&&(v.boundingSphere={center:v.boundingSphere.center.toArray(),radius:v.boundingSphere.radius}),this.boundingBox!==null&&(v.boundingBox={min:v.boundingBox.min.toArray(),max:v.boundingBox.max.toArray()}));function C(L,W){return L[W.uuid]===void 0&&(L[W.uuid]=W.toJSON(o)),W.uuid}if(this.isScene)this.background&&(this.background.isColor?v.background=this.background.toJSON():this.background.isTexture&&(v.background=this.background.toJSON(o).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(v.environment=this.environment.toJSON(o).uuid);else if(this.isMesh||this.isLine||this.isPoints){v.geometry=C(o.geometries,this.geometry);const L=this.geometry.parameters;if(L!==void 0&&L.shapes!==void 0){const W=L.shapes;if(Array.isArray(W))for(let J=0,re=W.length;J<re;J++){const ue=W[J];C(o.shapes,ue)}else C(o.shapes,W)}}if(this.isSkinnedMesh&&(v.bindMode=this.bindMode,v.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(C(o.skeletons,this.skeleton),v.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const L=[];for(let W=0,J=this.material.length;W<J;W++)L.push(C(o.materials,this.material[W]));v.material=L}else v.material=C(o.materials,this.material);if(this.children.length>0){v.children=[];for(let L=0;L<this.children.length;L++)v.children.push(this.children[L].toJSON(o).object)}if(this.animations.length>0){v.animations=[];for(let L=0;L<this.animations.length;L++){const W=this.animations[L];v.animations.push(C(o.animations,W))}}if(h){const L=b(o.geometries),W=b(o.materials),J=b(o.textures),re=b(o.images),ue=b(o.shapes),pe=b(o.skeletons),ve=b(o.animations),xe=b(o.nodes);L.length>0&&(m.geometries=L),W.length>0&&(m.materials=W),J.length>0&&(m.textures=J),re.length>0&&(m.images=re),ue.length>0&&(m.shapes=ue),pe.length>0&&(m.skeletons=pe),ve.length>0&&(m.animations=ve),xe.length>0&&(m.nodes=xe)}return m.object=v,m;function b(L){const W=[];for(const J in L){const re=L[J];delete re.metadata,W.push(re)}return W}}clone(o){return new this.constructor().copy(this,o)}copy(o,h=!0){if(this.name=o.name,this.up.copy(o.up),this.position.copy(o.position),this.rotation.order=o.rotation.order,this.quaternion.copy(o.quaternion),this.scale.copy(o.scale),this.matrix.copy(o.matrix),this.matrixWorld.copy(o.matrixWorld),this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrixWorldAutoUpdate=o.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=o.matrixWorldNeedsUpdate,this.layers.mask=o.layers.mask,this.visible=o.visible,this.castShadow=o.castShadow,this.receiveShadow=o.receiveShadow,this.frustumCulled=o.frustumCulled,this.renderOrder=o.renderOrder,this.animations=o.animations.slice(),this.userData=JSON.parse(JSON.stringify(o.userData)),h===!0)for(let m=0;m<o.children.length;m++){const v=o.children[m];this.add(v.clone())}return this}}Nr.DEFAULT_UP=new nt(0,1,0),Nr.DEFAULT_MATRIX_AUTO_UPDATE=!0,Nr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ro=new nt,Ma=new nt,Eu=new nt,Xo=new nt,k0=new nt,Z0=new nt,L1=new nt,e1=new nt,Io=new nt,v0=new nt;class po{constructor(o=new nt,h=new nt,m=new nt){this.a=o,this.b=h,this.c=m}static getNormal(o,h,m,v){v.subVectors(m,h),Ro.subVectors(o,h),v.cross(Ro);const C=v.lengthSq();return C>0?v.multiplyScalar(1/Math.sqrt(C)):v.set(0,0,0)}static getBarycoord(o,h,m,v,C){Ro.subVectors(v,h),Ma.subVectors(m,h),Eu.subVectors(o,h);const b=Ro.dot(Ro),L=Ro.dot(Ma),W=Ro.dot(Eu),J=Ma.dot(Ma),re=Ma.dot(Eu),ue=b*J-L*L;if(ue===0)return C.set(0,0,0),null;const pe=1/ue,ve=(J*W-L*re)*pe,xe=(b*re-L*W)*pe;return C.set(1-ve-xe,xe,ve)}static containsPoint(o,h,m,v){return this.getBarycoord(o,h,m,v,Xo)===null?!1:Xo.x>=0&&Xo.y>=0&&Xo.x+Xo.y<=1}static getInterpolation(o,h,m,v,C,b,L,W){return this.getBarycoord(o,h,m,v,Xo)===null?(W.x=0,W.y=0,"z"in W&&(W.z=0),"w"in W&&(W.w=0),null):(W.setScalar(0),W.addScaledVector(C,Xo.x),W.addScaledVector(b,Xo.y),W.addScaledVector(L,Xo.z),W)}static isFrontFacing(o,h,m,v){return Ro.subVectors(m,h),Ma.subVectors(o,h),Ro.cross(Ma).dot(v)<0}set(o,h,m){return this.a.copy(o),this.b.copy(h),this.c.copy(m),this}setFromPointsAndIndices(o,h,m,v){return this.a.copy(o[h]),this.b.copy(o[m]),this.c.copy(o[v]),this}setFromAttributeAndIndices(o,h,m,v){return this.a.fromBufferAttribute(o,h),this.b.fromBufferAttribute(o,m),this.c.fromBufferAttribute(o,v),this}clone(){return new this.constructor().copy(this)}copy(o){return this.a.copy(o.a),this.b.copy(o.b),this.c.copy(o.c),this}getArea(){return Ro.subVectors(this.c,this.b),Ma.subVectors(this.a,this.b),Ro.cross(Ma).length()*.5}getMidpoint(o){return o.addVectors(this.a,this.b).add(this.c).multiplyScalar(.3333333333333333)}getNormal(o){return po.getNormal(this.a,this.b,this.c,o)}getPlane(o){return o.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(o,h){return po.getBarycoord(o,this.a,this.b,this.c,h)}getInterpolation(o,h,m,v,C){return po.getInterpolation(o,this.a,this.b,this.c,h,m,v,C)}containsPoint(o){return po.containsPoint(o,this.a,this.b,this.c)}isFrontFacing(o){return po.isFrontFacing(this.a,this.b,this.c,o)}intersectsBox(o){return o.intersectsTriangle(this)}closestPointToPoint(o,h){const m=this.a,v=this.b,C=this.c;let b,L;k0.subVectors(v,m),Z0.subVectors(C,m),e1.subVectors(o,m);const W=k0.dot(e1),J=Z0.dot(e1);if(W<=0&&J<=0)return h.copy(m);Io.subVectors(o,v);const re=k0.dot(Io),ue=Z0.dot(Io);if(re>=0&&ue<=re)return h.copy(v);const pe=W*ue-re*J;if(pe<=0&&W>=0&&re<=0)return b=W/(W-re),h.copy(m).addScaledVector(k0,b);v0.subVectors(o,C);const ve=k0.dot(v0),xe=Z0.dot(v0);if(xe>=0&&ve<=xe)return h.copy(C);const Le=ve*J-W*xe;if(Le<=0&&J>=0&&xe<=0)return L=J/(J-xe),h.copy(m).addScaledVector(Z0,L);const Se=re*xe-ve*ue;if(Se<=0&&ue-re>=0&&ve-xe>=0)return L1.subVectors(C,v),L=(ue-re)/(ue-re+(ve-xe)),h.copy(v).addScaledVector(L1,L);const Ee=1/(Se+Le+pe);return b=Le*Ee,L=pe*Ee,h.copy(m).addScaledVector(k0,b).addScaledVector(Z0,L)}equals(o){return o.a.equals(this.a)&&o.b.equals(this.b)&&o.c.equals(this.c)}}const Sa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ro={h:0,s:0,l:0},$0={h:0,s:0,l:0};function mc(x,o,h){return h<0&&(h+=1),h>1&&(h-=1),h<.16666666666666666?x+(o-x)*6*h:h<.5?o:h<.6666666666666666?x+(o-x)*6*(.6666666666666666-h):x}class un{constructor(o,h,m){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(o,h,m)}set(o,h,m){if(h===void 0&&m===void 0){const v=o;v&&v.isColor?this.copy(v):typeof v=="number"?this.setHex(v):typeof v=="string"&&this.setStyle(v)}else this.setRGB(o,h,m);return this}setScalar(o){return this.r=o,this.g=o,this.b=o,this}setHex(o,h=Fr){return o=Math.floor(o),this.r=(o>>16&255)/255,this.g=(o>>8&255)/255,this.b=(o&255)/255,jr.toWorkingColorSpace(this,h),this}setRGB(o,h,m,v=jr.workingColorSpace){return this.r=o,this.g=h,this.b=m,jr.toWorkingColorSpace(this,v),this}setHSL(o,h,m,v=jr.workingColorSpace){if(o=ma(o,1),h=Ts(h,0,1),m=Ts(m,0,1),h===0)this.r=this.g=this.b=m;else{const C=m<=.5?m*(1+h):m+h-m*h,b=2*m-C;this.r=mc(b,C,o+.3333333333333333),this.g=mc(b,C,o),this.b=mc(b,C,o-.3333333333333333)}return jr.toWorkingColorSpace(this,v),this}setStyle(o,h=Fr){function m(C){C!==void 0&&parseFloat(C)<1&&console.warn("THREE.Color: Alpha component of "+o+" will be ignored.")}let v;if(v=/^(\w+)\(([^\)]*)\)/.exec(o)){let C;const b=v[1],L=v[2];switch(b){case"rgb":case"rgba":if(C=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(L))return m(C[4]),this.setRGB(Math.min(255,parseInt(C[1],10))/255,Math.min(255,parseInt(C[2],10))/255,Math.min(255,parseInt(C[3],10))/255,h);if(C=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(L))return m(C[4]),this.setRGB(Math.min(100,parseInt(C[1],10))/100,Math.min(100,parseInt(C[2],10))/100,Math.min(100,parseInt(C[3],10))/100,h);break;case"hsl":case"hsla":if(C=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(L))return m(C[4]),this.setHSL(parseFloat(C[1])/360,parseFloat(C[2])/100,parseFloat(C[3])/100,h);break;default:console.warn("THREE.Color: Unknown color model "+o)}}else if(v=/^\#([A-Fa-f\d]+)$/.exec(o)){const C=v[1],b=C.length;if(b===3)return this.setRGB(parseInt(C.charAt(0),16)/15,parseInt(C.charAt(1),16)/15,parseInt(C.charAt(2),16)/15,h);if(b===6)return this.setHex(parseInt(C,16),h);console.warn("THREE.Color: Invalid hex color "+o)}else if(o&&o.length>0)return this.setColorName(o,h);return this}setColorName(o,h=Fr){const m=Sa[o.toLowerCase()];return m!==void 0?this.setHex(m,h):console.warn("THREE.Color: Unknown color "+o),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(o){return this.r=o.r,this.g=o.g,this.b=o.b,this}copySRGBToLinear(o){return this.r=ya(o.r),this.g=ya(o.g),this.b=ya(o.b),this}copyLinearToSRGB(o){return this.r=wa(o.r),this.g=wa(o.g),this.b=wa(o.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(o=Fr){return jr.fromWorkingColorSpace(Ao.copy(this),o),Math.round(Ts(Ao.r*255,0,255))*65536+Math.round(Ts(Ao.g*255,0,255))*256+Math.round(Ts(Ao.b*255,0,255))}getHexString(o=Fr){return("000000"+this.getHex(o).toString(16)).slice(-6)}getHSL(o,h=jr.workingColorSpace){jr.fromWorkingColorSpace(Ao.copy(this),h);const m=Ao.r,v=Ao.g,C=Ao.b,b=Math.max(m,v,C),L=Math.min(m,v,C);let W,J;const re=(L+b)/2;if(L===b)W=0,J=0;else{const ue=b-L;switch(J=re<=.5?ue/(b+L):ue/(2-b-L),b){case m:W=(v-C)/ue+(v<C?6:0);break;case v:W=(C-m)/ue+2;break;case C:W=(m-v)/ue+4;break}W/=6}return o.h=W,o.s=J,o.l=re,o}getRGB(o,h=jr.workingColorSpace){return jr.fromWorkingColorSpace(Ao.copy(this),h),o.r=Ao.r,o.g=Ao.g,o.b=Ao.b,o}getStyle(o=Fr){jr.fromWorkingColorSpace(Ao.copy(this),o);const h=Ao.r,m=Ao.g,v=Ao.b;return o!==Fr?`color(${o} ${h.toFixed(3)} ${m.toFixed(3)} ${v.toFixed(3)})`:`rgb(${Math.round(h*255)},${Math.round(m*255)},${Math.round(v*255)})`}offsetHSL(o,h,m){return this.getHSL(ro),this.setHSL(ro.h+o,ro.s+h,ro.l+m)}add(o){return this.r+=o.r,this.g+=o.g,this.b+=o.b,this}addColors(o,h){return this.r=o.r+h.r,this.g=o.g+h.g,this.b=o.b+h.b,this}addScalar(o){return this.r+=o,this.g+=o,this.b+=o,this}sub(o){return this.r=Math.max(0,this.r-o.r),this.g=Math.max(0,this.g-o.g),this.b=Math.max(0,this.b-o.b),this}multiply(o){return this.r*=o.r,this.g*=o.g,this.b*=o.b,this}multiplyScalar(o){return this.r*=o,this.g*=o,this.b*=o,this}lerp(o,h){return this.r+=(o.r-this.r)*h,this.g+=(o.g-this.g)*h,this.b+=(o.b-this.b)*h,this}lerpColors(o,h,m){return this.r=o.r+(h.r-o.r)*m,this.g=o.g+(h.g-o.g)*m,this.b=o.b+(h.b-o.b)*m,this}lerpHSL(o,h){this.getHSL(ro),o.getHSL($0);const m=Sl(ro.h,$0.h,h),v=Sl(ro.s,$0.s,h),C=Sl(ro.l,$0.l,h);return this.setHSL(m,v,C),this}setFromVector3(o){return this.r=o.x,this.g=o.y,this.b=o.z,this}applyMatrix3(o){const h=this.r,m=this.g,v=this.b,C=o.elements;return this.r=C[0]*h+C[3]*m+C[6]*v,this.g=C[1]*h+C[4]*m+C[7]*v,this.b=C[2]*h+C[5]*m+C[8]*v,this}equals(o){return o.r===this.r&&o.g===this.g&&o.b===this.b}fromArray(o,h=0){return this.r=o[h],this.g=o[h+1],this.b=o[h+2],this}toArray(o=[],h=0){return o[h]=this.r,o[h+1]=this.g,o[h+2]=this.b,o}fromBufferAttribute(o,h){return this.r=o.getX(h),this.g=o.getY(h),this.b=o.getZ(h),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ao=new un;un.NAMES=Sa;let mo=0;class us extends uo{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:mo++}),this.uuid=Wo(),this.name="",this.type="Material",this.blending=de,this.side=G,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=st,this.blendDst=dt,this.blendEquation=Pe,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new un(0,0,0),this.blendAlpha=0,this.depthFunc=bn,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=x1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=m0,this.stencilZFail=m0,this.stencilZPass=m0,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(o){this._alphaTest>0!=o>0&&this.version++,this._alphaTest=o}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(o){if(o!==void 0)for(const h in o){const m=o[h];if(m===void 0){console.warn(`THREE.Material: parameter '${h}' has value of undefined.`);continue}const v=this[h];if(v===void 0){console.warn(`THREE.Material: '${h}' is not a property of THREE.${this.type}.`);continue}v&&v.isColor?v.set(m):v&&v.isVector3&&m&&m.isVector3?v.copy(m):this[h]=m}}toJSON(o){const h=o===void 0||typeof o=="string";h&&(o={textures:{},images:{}});const m={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};m.uuid=this.uuid,m.type=this.type,this.name!==""&&(m.name=this.name),this.color&&this.color.isColor&&(m.color=this.color.getHex()),this.roughness!==void 0&&(m.roughness=this.roughness),this.metalness!==void 0&&(m.metalness=this.metalness),this.sheen!==void 0&&(m.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(m.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(m.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(m.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(m.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(m.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(m.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(m.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(m.shininess=this.shininess),this.clearcoat!==void 0&&(m.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(m.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(m.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(m.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(m.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,m.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(m.dispersion=this.dispersion),this.iridescence!==void 0&&(m.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(m.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(m.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(m.iridescenceMap=this.iridescenceMap.toJSON(o).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(m.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(o).uuid),this.anisotropy!==void 0&&(m.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(m.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(m.anisotropyMap=this.anisotropyMap.toJSON(o).uuid),this.map&&this.map.isTexture&&(m.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(m.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(m.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(m.lightMap=this.lightMap.toJSON(o).uuid,m.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(m.aoMap=this.aoMap.toJSON(o).uuid,m.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(m.bumpMap=this.bumpMap.toJSON(o).uuid,m.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(m.normalMap=this.normalMap.toJSON(o).uuid,m.normalMapType=this.normalMapType,m.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(m.displacementMap=this.displacementMap.toJSON(o).uuid,m.displacementScale=this.displacementScale,m.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(m.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(m.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(m.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(m.specularMap=this.specularMap.toJSON(o).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(m.specularIntensityMap=this.specularIntensityMap.toJSON(o).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(m.specularColorMap=this.specularColorMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(m.envMap=this.envMap.toJSON(o).uuid,this.combine!==void 0&&(m.combine=this.combine)),this.envMapRotation!==void 0&&(m.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(m.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(m.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(m.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(m.gradientMap=this.gradientMap.toJSON(o).uuid),this.transmission!==void 0&&(m.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(m.transmissionMap=this.transmissionMap.toJSON(o).uuid),this.thickness!==void 0&&(m.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(m.thicknessMap=this.thicknessMap.toJSON(o).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(m.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(m.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(m.size=this.size),this.shadowSide!==null&&(m.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(m.sizeAttenuation=this.sizeAttenuation),this.blending!==de&&(m.blending=this.blending),this.side!==G&&(m.side=this.side),this.vertexColors===!0&&(m.vertexColors=!0),this.opacity<1&&(m.opacity=this.opacity),this.transparent===!0&&(m.transparent=!0),this.blendSrc!==st&&(m.blendSrc=this.blendSrc),this.blendDst!==dt&&(m.blendDst=this.blendDst),this.blendEquation!==Pe&&(m.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(m.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(m.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(m.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(m.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(m.blendAlpha=this.blendAlpha),this.depthFunc!==bn&&(m.depthFunc=this.depthFunc),this.depthTest===!1&&(m.depthTest=this.depthTest),this.depthWrite===!1&&(m.depthWrite=this.depthWrite),this.colorWrite===!1&&(m.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(m.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==x1&&(m.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(m.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(m.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==m0&&(m.stencilFail=this.stencilFail),this.stencilZFail!==m0&&(m.stencilZFail=this.stencilZFail),this.stencilZPass!==m0&&(m.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(m.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(m.rotation=this.rotation),this.polygonOffset===!0&&(m.polygonOffset=!0),this.polygonOffsetFactor!==0&&(m.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(m.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(m.linewidth=this.linewidth),this.dashSize!==void 0&&(m.dashSize=this.dashSize),this.gapSize!==void 0&&(m.gapSize=this.gapSize),this.scale!==void 0&&(m.scale=this.scale),this.dithering===!0&&(m.dithering=!0),this.alphaTest>0&&(m.alphaTest=this.alphaTest),this.alphaHash===!0&&(m.alphaHash=!0),this.alphaToCoverage===!0&&(m.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(m.premultipliedAlpha=!0),this.forceSinglePass===!0&&(m.forceSinglePass=!0),this.wireframe===!0&&(m.wireframe=!0),this.wireframeLinewidth>1&&(m.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(m.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(m.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(m.flatShading=!0),this.visible===!1&&(m.visible=!1),this.toneMapped===!1&&(m.toneMapped=!1),this.fog===!1&&(m.fog=!1),Object.keys(this.userData).length>0&&(m.userData=this.userData);function v(C){const b=[];for(const L in C){const W=C[L];delete W.metadata,b.push(W)}return b}if(h){const C=v(o.textures),b=v(o.images);C.length>0&&(m.textures=C),b.length>0&&(m.images=b)}return m}clone(){return new this.constructor().copy(this)}copy(o){this.name=o.name,this.blending=o.blending,this.side=o.side,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.blendColor.copy(o.blendColor),this.blendAlpha=o.blendAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.stencilWriteMask=o.stencilWriteMask,this.stencilFunc=o.stencilFunc,this.stencilRef=o.stencilRef,this.stencilFuncMask=o.stencilFuncMask,this.stencilFail=o.stencilFail,this.stencilZFail=o.stencilZFail,this.stencilZPass=o.stencilZPass,this.stencilWrite=o.stencilWrite;const h=o.clippingPlanes;let m=null;if(h!==null){const v=h.length;m=new Array(v);for(let C=0;C!==v;++C)m[C]=h[C].clone()}return this.clippingPlanes=m,this.clipIntersection=o.clipIntersection,this.clipShadows=o.clipShadows,this.shadowSide=o.shadowSide,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.dithering=o.dithering,this.alphaTest=o.alphaTest,this.alphaHash=o.alphaHash,this.alphaToCoverage=o.alphaToCoverage,this.premultipliedAlpha=o.premultipliedAlpha,this.forceSinglePass=o.forceSinglePass,this.visible=o.visible,this.toneMapped=o.toneMapped,this.userData=JSON.parse(JSON.stringify(o.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(o){o===!0&&this.version++}}class es extends us{constructor(o){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new un(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new a0,this.combine=mr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapRotation.copy(o.envMapRotation),this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.fog=o.fog,this}}const go=gh();function gh(){const x=new ArrayBuffer(4),o=new Float32Array(x),h=new Uint32Array(x),m=new Uint32Array(512),v=new Uint32Array(512);for(let W=0;W<256;++W){const J=W-127;J<-27?(m[W]=0,m[W|256]=32768,v[W]=24,v[W|256]=24):J<-14?(m[W]=1024>>-J-14,m[W|256]=1024>>-J-14|32768,v[W]=-J-1,v[W|256]=-J-1):J<=15?(m[W]=J+15<<10,m[W|256]=J+15<<10|32768,v[W]=13,v[W|256]=13):J<128?(m[W]=31744,m[W|256]=64512,v[W]=24,v[W|256]=24):(m[W]=31744,m[W|256]=64512,v[W]=13,v[W|256]=13)}const C=new Uint32Array(2048),b=new Uint32Array(64),L=new Uint32Array(64);for(let W=1;W<1024;++W){let J=W<<13,re=0;for(;!(J&8388608);)J<<=1,re-=8388608;J&=-8388609,re+=947912704,C[W]=J|re}for(let W=1024;W<2048;++W)C[W]=939524096+(W-1024<<13);for(let W=1;W<31;++W)b[W]=W<<23;b[31]=1199570944,b[32]=2147483648;for(let W=33;W<63;++W)b[W]=2147483648+(W-32<<23);b[63]=3347054592;for(let W=1;W<64;++W)W!==32&&(L[W]=1024);return{floatView:o,uint32View:h,baseTable:m,shiftTable:v,mantissaTable:C,exponentTable:b,offsetTable:L}}function Yo(x){Math.abs(x)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),x=Ts(x,-65504,65504),go.floatView[0]=x;const o=go.uint32View[0],h=o>>23&511;return go.baseTable[h]+((o&8388607)>>go.shiftTable[h])}function fl(x){const o=x>>10;return go.uint32View[0]=go.mantissaTable[go.offsetTable[o]+(x&1023)]+go.exponentTable[o],go.floatView[0]}const yu={toHalfFloat:Yo,fromHalfFloat:fl},to=new nt,$a=new vi;class Zr{constructor(o,h,m=!1){if(Array.isArray(o))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=o,this.itemSize=h,this.count=o!==void 0?o.length/h:0,this.normalized=m,this.usage=Ga,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Rs,this.version=0}onUploadCallback(){}set needsUpdate(o){o===!0&&this.version++}get updateRange(){return Gs("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(o){return this.usage=o,this}addUpdateRange(o,h){this.updateRanges.push({start:o,count:h})}clearUpdateRanges(){this.updateRanges.length=0}copy(o){return this.name=o.name,this.array=new o.array.constructor(o.array),this.itemSize=o.itemSize,this.count=o.count,this.normalized=o.normalized,this.usage=o.usage,this.gpuType=o.gpuType,this}copyAt(o,h,m){o*=this.itemSize,m*=h.itemSize;for(let v=0,C=this.itemSize;v<C;v++)this.array[o+v]=h.array[m+v];return this}copyArray(o){return this.array.set(o),this}applyMatrix3(o){if(this.itemSize===2)for(let h=0,m=this.count;h<m;h++)$a.fromBufferAttribute(this,h),$a.applyMatrix3(o),this.setXY(h,$a.x,$a.y);else if(this.itemSize===3)for(let h=0,m=this.count;h<m;h++)to.fromBufferAttribute(this,h),to.applyMatrix3(o),this.setXYZ(h,to.x,to.y,to.z);return this}applyMatrix4(o){for(let h=0,m=this.count;h<m;h++)to.fromBufferAttribute(this,h),to.applyMatrix4(o),this.setXYZ(h,to.x,to.y,to.z);return this}applyNormalMatrix(o){for(let h=0,m=this.count;h<m;h++)to.fromBufferAttribute(this,h),to.applyNormalMatrix(o),this.setXYZ(h,to.x,to.y,to.z);return this}transformDirection(o){for(let h=0,m=this.count;h<m;h++)to.fromBufferAttribute(this,h),to.transformDirection(o),this.setXYZ(h,to.x,to.y,to.z);return this}set(o,h=0){return this.array.set(o,h),this}getComponent(o,h){let m=this.array[o*this.itemSize+h];return this.normalized&&(m=So(m,this.array)),m}setComponent(o,h,m){return this.normalized&&(m=ur(m,this.array)),this.array[o*this.itemSize+h]=m,this}getX(o){let h=this.array[o*this.itemSize];return this.normalized&&(h=So(h,this.array)),h}setX(o,h){return this.normalized&&(h=ur(h,this.array)),this.array[o*this.itemSize]=h,this}getY(o){let h=this.array[o*this.itemSize+1];return this.normalized&&(h=So(h,this.array)),h}setY(o,h){return this.normalized&&(h=ur(h,this.array)),this.array[o*this.itemSize+1]=h,this}getZ(o){let h=this.array[o*this.itemSize+2];return this.normalized&&(h=So(h,this.array)),h}setZ(o,h){return this.normalized&&(h=ur(h,this.array)),this.array[o*this.itemSize+2]=h,this}getW(o){let h=this.array[o*this.itemSize+3];return this.normalized&&(h=So(h,this.array)),h}setW(o,h){return this.normalized&&(h=ur(h,this.array)),this.array[o*this.itemSize+3]=h,this}setXY(o,h,m){return o*=this.itemSize,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array)),this.array[o+0]=h,this.array[o+1]=m,this}setXYZ(o,h,m,v){return o*=this.itemSize,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array),v=ur(v,this.array)),this.array[o+0]=h,this.array[o+1]=m,this.array[o+2]=v,this}setXYZW(o,h,m,v,C){return o*=this.itemSize,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array),v=ur(v,this.array),C=ur(C,this.array)),this.array[o+0]=h,this.array[o+1]=m,this.array[o+2]=v,this.array[o+3]=C,this}onUpload(o){return this.onUploadCallback=o,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const o={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(o.name=this.name),this.usage!==Ga&&(o.usage=this.usage),o}}class t1 extends Zr{constructor(o,h,m){super(new Int8Array(o),h,m)}}class D1 extends Zr{constructor(o,h,m){super(new Uint8Array(o),h,m)}}class gc extends Zr{constructor(o,h,m){super(new Uint8ClampedArray(o),h,m)}}class i1 extends Zr{constructor(o,h,m){super(new Int16Array(o),h,m)}}class n1 extends Zr{constructor(o,h,m){super(new Uint16Array(o),h,m)}}class wu extends Zr{constructor(o,h,m){super(new Int32Array(o),h,m)}}class ja extends Zr{constructor(o,h,m){super(new Uint32Array(o),h,m)}}class ks extends Zr{constructor(o,h,m){super(new Uint16Array(o),h,m),this.isFloat16BufferAttribute=!0}getX(o){let h=fl(this.array[o*this.itemSize]);return this.normalized&&(h=So(h,this.array)),h}setX(o,h){return this.normalized&&(h=ur(h,this.array)),this.array[o*this.itemSize]=Yo(h),this}getY(o){let h=fl(this.array[o*this.itemSize+1]);return this.normalized&&(h=So(h,this.array)),h}setY(o,h){return this.normalized&&(h=ur(h,this.array)),this.array[o*this.itemSize+1]=Yo(h),this}getZ(o){let h=fl(this.array[o*this.itemSize+2]);return this.normalized&&(h=So(h,this.array)),h}setZ(o,h){return this.normalized&&(h=ur(h,this.array)),this.array[o*this.itemSize+2]=Yo(h),this}getW(o){let h=fl(this.array[o*this.itemSize+3]);return this.normalized&&(h=So(h,this.array)),h}setW(o,h){return this.normalized&&(h=ur(h,this.array)),this.array[o*this.itemSize+3]=Yo(h),this}setXY(o,h,m){return o*=this.itemSize,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array)),this.array[o+0]=Yo(h),this.array[o+1]=Yo(m),this}setXYZ(o,h,m,v){return o*=this.itemSize,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array),v=ur(v,this.array)),this.array[o+0]=Yo(h),this.array[o+1]=Yo(m),this.array[o+2]=Yo(v),this}setXYZW(o,h,m,v,C){return o*=this.itemSize,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array),v=ur(v,this.array),C=ur(C,this.array)),this.array[o+0]=Yo(h),this.array[o+1]=Yo(m),this.array[o+2]=Yo(v),this.array[o+3]=Yo(C),this}}class Ai extends Zr{constructor(o,h,m){super(new Float32Array(o),h,m)}}let Xi=0;const qo=new on,ba=new Nr,pl=new nt,Jo=new jn,Ta=new jn,so=new nt;class rr extends uo{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Xi++}),this.uuid=Wo(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(o){return Array.isArray(o)?this.index=new(Jl(o)?ja:n1)(o,1):this.index=o,this}getAttribute(o){return this.attributes[o]}setAttribute(o,h){return this.attributes[o]=h,this}deleteAttribute(o){return delete this.attributes[o],this}hasAttribute(o){return this.attributes[o]!==void 0}addGroup(o,h,m=0){this.groups.push({start:o,count:h,materialIndex:m})}clearGroups(){this.groups=[]}setDrawRange(o,h){this.drawRange.start=o,this.drawRange.count=h}applyMatrix4(o){const h=this.attributes.position;h!==void 0&&(h.applyMatrix4(o),h.needsUpdate=!0);const m=this.attributes.normal;if(m!==void 0){const C=new Nn().getNormalMatrix(o);m.applyNormalMatrix(C),m.needsUpdate=!0}const v=this.attributes.tangent;return v!==void 0&&(v.transformDirection(o),v.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(o){return qo.makeRotationFromQuaternion(o),this.applyMatrix4(qo),this}rotateX(o){return qo.makeRotationX(o),this.applyMatrix4(qo),this}rotateY(o){return qo.makeRotationY(o),this.applyMatrix4(qo),this}rotateZ(o){return qo.makeRotationZ(o),this.applyMatrix4(qo),this}translate(o,h,m){return qo.makeTranslation(o,h,m),this.applyMatrix4(qo),this}scale(o,h,m){return qo.makeScale(o,h,m),this.applyMatrix4(qo),this}lookAt(o){return ba.lookAt(o),ba.updateMatrix(),this.applyMatrix4(ba.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(pl).negate(),this.translate(pl.x,pl.y,pl.z),this}setFromPoints(o){const h=[];for(let m=0,v=o.length;m<v;m++){const C=o[m];h.push(C.x,C.y,C.z||0)}return this.setAttribute("position",new Ai(h,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new jn);const o=this.attributes.position,h=this.morphAttributes.position;if(o&&o.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new nt(-1/0,-1/0,-1/0),new nt(1/0,1/0,1/0));return}if(o!==void 0){if(this.boundingBox.setFromBufferAttribute(o),h)for(let m=0,v=h.length;m<v;m++){const C=h[m];Jo.setFromBufferAttribute(C),this.morphTargetsRelative?(so.addVectors(this.boundingBox.min,Jo.min),this.boundingBox.expandByPoint(so),so.addVectors(this.boundingBox.max,Jo.max),this.boundingBox.expandByPoint(so)):(this.boundingBox.expandByPoint(Jo.min),this.boundingBox.expandByPoint(Jo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vs);const o=this.attributes.position,h=this.morphAttributes.position;if(o&&o.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new nt,1/0);return}if(o){const m=this.boundingSphere.center;if(Jo.setFromBufferAttribute(o),h)for(let C=0,b=h.length;C<b;C++){const L=h[C];Ta.setFromBufferAttribute(L),this.morphTargetsRelative?(so.addVectors(Jo.min,Ta.min),Jo.expandByPoint(so),so.addVectors(Jo.max,Ta.max),Jo.expandByPoint(so)):(Jo.expandByPoint(Ta.min),Jo.expandByPoint(Ta.max))}Jo.getCenter(m);let v=0;for(let C=0,b=o.count;C<b;C++)so.fromBufferAttribute(o,C),v=Math.max(v,m.distanceToSquared(so));if(h)for(let C=0,b=h.length;C<b;C++){const L=h[C],W=this.morphTargetsRelative;for(let J=0,re=L.count;J<re;J++)so.fromBufferAttribute(L,J),W&&(pl.fromBufferAttribute(o,J),so.add(pl)),v=Math.max(v,m.distanceToSquared(so))}this.boundingSphere.radius=Math.sqrt(v),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const o=this.index,h=this.attributes;if(o===null||h.position===void 0||h.normal===void 0||h.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const m=h.position,v=h.normal,C=h.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Zr(new Float32Array(4*m.count),4));const b=this.getAttribute("tangent"),L=[],W=[];for(let yt=0;yt<m.count;yt++)L[yt]=new nt,W[yt]=new nt;const J=new nt,re=new nt,ue=new nt,pe=new vi,ve=new vi,xe=new vi,Le=new nt,Se=new nt;function Ee(yt,et,qe){J.fromBufferAttribute(m,yt),re.fromBufferAttribute(m,et),ue.fromBufferAttribute(m,qe),pe.fromBufferAttribute(C,yt),ve.fromBufferAttribute(C,et),xe.fromBufferAttribute(C,qe),re.sub(J),ue.sub(J),ve.sub(pe),xe.sub(pe);const wt=1/(ve.x*xe.y-xe.x*ve.y);isFinite(wt)&&(Le.copy(re).multiplyScalar(xe.y).addScaledVector(ue,-ve.y).multiplyScalar(wt),Se.copy(ue).multiplyScalar(ve.x).addScaledVector(re,-xe.x).multiplyScalar(wt),L[yt].add(Le),L[et].add(Le),L[qe].add(Le),W[yt].add(Se),W[et].add(Se),W[qe].add(Se))}let Ke=this.groups;Ke.length===0&&(Ke=[{start:0,count:o.count}]);for(let yt=0,et=Ke.length;yt<et;++yt){const qe=Ke[yt],wt=qe.start,Ft=qe.count;for(let Lt=wt,Gt=wt+Ft;Lt<Gt;Lt+=3)Ee(o.getX(Lt+0),o.getX(Lt+1),o.getX(Lt+2))}const Ge=new nt,Ue=new nt,Ct=new nt,at=new nt;function ft(yt){Ct.fromBufferAttribute(v,yt),at.copy(Ct);const et=L[yt];Ge.copy(et),Ge.sub(Ct.multiplyScalar(Ct.dot(et))).normalize(),Ue.crossVectors(at,et);const wt=Ue.dot(W[yt])<0?-1:1;b.setXYZW(yt,Ge.x,Ge.y,Ge.z,wt)}for(let yt=0,et=Ke.length;yt<et;++yt){const qe=Ke[yt],wt=qe.start,Ft=qe.count;for(let Lt=wt,Gt=wt+Ft;Lt<Gt;Lt+=3)ft(o.getX(Lt+0)),ft(o.getX(Lt+1)),ft(o.getX(Lt+2))}}computeVertexNormals(){const o=this.index,h=this.getAttribute("position");if(h!==void 0){let m=this.getAttribute("normal");if(m===void 0)m=new Zr(new Float32Array(h.count*3),3),this.setAttribute("normal",m);else for(let pe=0,ve=m.count;pe<ve;pe++)m.setXYZ(pe,0,0,0);const v=new nt,C=new nt,b=new nt,L=new nt,W=new nt,J=new nt,re=new nt,ue=new nt;if(o)for(let pe=0,ve=o.count;pe<ve;pe+=3){const xe=o.getX(pe+0),Le=o.getX(pe+1),Se=o.getX(pe+2);v.fromBufferAttribute(h,xe),C.fromBufferAttribute(h,Le),b.fromBufferAttribute(h,Se),re.subVectors(b,C),ue.subVectors(v,C),re.cross(ue),L.fromBufferAttribute(m,xe),W.fromBufferAttribute(m,Le),J.fromBufferAttribute(m,Se),L.add(re),W.add(re),J.add(re),m.setXYZ(xe,L.x,L.y,L.z),m.setXYZ(Le,W.x,W.y,W.z),m.setXYZ(Se,J.x,J.y,J.z)}else for(let pe=0,ve=h.count;pe<ve;pe+=3)v.fromBufferAttribute(h,pe+0),C.fromBufferAttribute(h,pe+1),b.fromBufferAttribute(h,pe+2),re.subVectors(b,C),ue.subVectors(v,C),re.cross(ue),m.setXYZ(pe+0,re.x,re.y,re.z),m.setXYZ(pe+1,re.x,re.y,re.z),m.setXYZ(pe+2,re.x,re.y,re.z);this.normalizeNormals(),m.needsUpdate=!0}}normalizeNormals(){const o=this.attributes.normal;for(let h=0,m=o.count;h<m;h++)so.fromBufferAttribute(o,h),so.normalize(),o.setXYZ(h,so.x,so.y,so.z)}toNonIndexed(){function o(L,W){const J=L.array,re=L.itemSize,ue=L.normalized,pe=new J.constructor(W.length*re);let ve=0,xe=0;for(let Le=0,Se=W.length;Le<Se;Le++){L.isInterleavedBufferAttribute?ve=W[Le]*L.data.stride+L.offset:ve=W[Le]*re;for(let Ee=0;Ee<re;Ee++)pe[xe++]=J[ve++]}return new Zr(pe,re,ue)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const h=new rr,m=this.index.array,v=this.attributes;for(const L in v){const W=v[L],J=o(W,m);h.setAttribute(L,J)}const C=this.morphAttributes;for(const L in C){const W=[],J=C[L];for(let re=0,ue=J.length;re<ue;re++){const pe=J[re],ve=o(pe,m);W.push(ve)}h.morphAttributes[L]=W}h.morphTargetsRelative=this.morphTargetsRelative;const b=this.groups;for(let L=0,W=b.length;L<W;L++){const J=b[L];h.addGroup(J.start,J.count,J.materialIndex)}return h}toJSON(){const o={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),Object.keys(this.userData).length>0&&(o.userData=this.userData),this.parameters!==void 0){const W=this.parameters;for(const J in W)W[J]!==void 0&&(o[J]=W[J]);return o}o.data={attributes:{}};const h=this.index;h!==null&&(o.data.index={type:h.array.constructor.name,array:Array.prototype.slice.call(h.array)});const m=this.attributes;for(const W in m){const J=m[W];o.data.attributes[W]=J.toJSON(o.data)}const v={};let C=!1;for(const W in this.morphAttributes){const J=this.morphAttributes[W],re=[];for(let ue=0,pe=J.length;ue<pe;ue++){const ve=J[ue];re.push(ve.toJSON(o.data))}re.length>0&&(v[W]=re,C=!0)}C&&(o.data.morphAttributes=v,o.data.morphTargetsRelative=this.morphTargetsRelative);const b=this.groups;b.length>0&&(o.data.groups=JSON.parse(JSON.stringify(b)));const L=this.boundingSphere;return L!==null&&(o.data.boundingSphere={center:L.center.toArray(),radius:L.radius}),o}clone(){return new this.constructor().copy(this)}copy(o){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const h={};this.name=o.name;const m=o.index;m!==null&&this.setIndex(m.clone(h));const v=o.attributes;for(const J in v){const re=v[J];this.setAttribute(J,re.clone(h))}const C=o.morphAttributes;for(const J in C){const re=[],ue=C[J];for(let pe=0,ve=ue.length;pe<ve;pe++)re.push(ue[pe].clone(h));this.morphAttributes[J]=re}this.morphTargetsRelative=o.morphTargetsRelative;const b=o.groups;for(let J=0,re=b.length;J<re;J++){const ue=b[J];this.addGroup(ue.start,ue.count,ue.materialIndex)}const L=o.boundingBox;L!==null&&(this.boundingBox=L.clone());const W=o.boundingSphere;return W!==null&&(this.boundingSphere=W.clone()),this.drawRange.start=o.drawRange.start,this.drawRange.count=o.drawRange.count,this.userData=o.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const T0=new on,E0=new Is,r1=new Vs,vc=new nt,y0=new nt,Ot=new nt,Ra=new nt,Ec=new nt,N0=new nt,j0=new vi,Bo=new vi,P1=new vi,el=new nt,yc=new nt,s1=new nt,vn=new nt,Ia=new nt;class Bs extends Nr{constructor(o=new rr,h=new es){super(),this.isMesh=!0,this.type="Mesh",this.geometry=o,this.material=h,this.updateMorphTargets()}copy(o,h){return super.copy(o,h),o.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=o.morphTargetInfluences.slice()),o.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},o.morphTargetDictionary)),this.material=Array.isArray(o.material)?o.material.slice():o.material,this.geometry=o.geometry,this}updateMorphTargets(){const h=this.geometry.morphAttributes,m=Object.keys(h);if(m.length>0){const v=h[m[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let C=0,b=v.length;C<b;C++){const L=v[C].name||String(C);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=C}}}}getVertexPosition(o,h){const m=this.geometry,v=m.attributes.position,C=m.morphAttributes.position,b=m.morphTargetsRelative;h.fromBufferAttribute(v,o);const L=this.morphTargetInfluences;if(C&&L){N0.set(0,0,0);for(let W=0,J=C.length;W<J;W++){const re=L[W],ue=C[W];re!==0&&(Ec.fromBufferAttribute(ue,o),b?N0.addScaledVector(Ec,re):N0.addScaledVector(Ec.sub(h),re))}h.add(N0)}return h}raycast(o,h){const m=this.geometry,v=this.material,C=this.matrixWorld;v!==void 0&&(m.boundingSphere===null&&m.computeBoundingSphere(),r1.copy(m.boundingSphere),r1.applyMatrix4(C),E0.copy(o.ray).recast(o.near),!(r1.containsPoint(E0.origin)===!1&&(E0.intersectSphere(r1,vc)===null||E0.origin.distanceToSquared(vc)>(o.far-o.near)**2))&&(T0.copy(C).invert(),E0.copy(o.ray).applyMatrix4(T0),!(m.boundingBox!==null&&E0.intersectsBox(m.boundingBox)===!1)&&this._computeIntersections(o,h,E0)))}_computeIntersections(o,h,m){let v;const C=this.geometry,b=this.material,L=C.index,W=C.attributes.position,J=C.attributes.uv,re=C.attributes.uv1,ue=C.attributes.normal,pe=C.groups,ve=C.drawRange;if(L!==null)if(Array.isArray(b))for(let xe=0,Le=pe.length;xe<Le;xe++){const Se=pe[xe],Ee=b[Se.materialIndex],Ke=Math.max(Se.start,ve.start),Ge=Math.min(L.count,Math.min(Se.start+Se.count,ve.start+ve.count));for(let Ue=Ke,Ct=Ge;Ue<Ct;Ue+=3){const at=L.getX(Ue),ft=L.getX(Ue+1),yt=L.getX(Ue+2);v=tl(this,Ee,o,m,J,re,ue,at,ft,yt),v&&(v.faceIndex=Math.floor(Ue/3),v.face.materialIndex=Se.materialIndex,h.push(v))}}else{const xe=Math.max(0,ve.start),Le=Math.min(L.count,ve.start+ve.count);for(let Se=xe,Ee=Le;Se<Ee;Se+=3){const Ke=L.getX(Se),Ge=L.getX(Se+1),Ue=L.getX(Se+2);v=tl(this,b,o,m,J,re,ue,Ke,Ge,Ue),v&&(v.faceIndex=Math.floor(Se/3),h.push(v))}}else if(W!==void 0)if(Array.isArray(b))for(let xe=0,Le=pe.length;xe<Le;xe++){const Se=pe[xe],Ee=b[Se.materialIndex],Ke=Math.max(Se.start,ve.start),Ge=Math.min(W.count,Math.min(Se.start+Se.count,ve.start+ve.count));for(let Ue=Ke,Ct=Ge;Ue<Ct;Ue+=3){const at=Ue,ft=Ue+1,yt=Ue+2;v=tl(this,Ee,o,m,J,re,ue,at,ft,yt),v&&(v.faceIndex=Math.floor(Ue/3),v.face.materialIndex=Se.materialIndex,h.push(v))}}else{const xe=Math.max(0,ve.start),Le=Math.min(W.count,ve.start+ve.count);for(let Se=xe,Ee=Le;Se<Ee;Se+=3){const Ke=Se,Ge=Se+1,Ue=Se+2;v=tl(this,b,o,m,J,re,ue,Ke,Ge,Ue),v&&(v.faceIndex=Math.floor(Se/3),h.push(v))}}}}function Fl(x,o,h,m,v,C,b,L){let W;if(o.side===Z?W=m.intersectTriangle(b,C,v,!0,L):W=m.intersectTriangle(v,C,b,o.side===G,L),W===null)return null;Ia.copy(L),Ia.applyMatrix4(x.matrixWorld);const J=h.ray.origin.distanceTo(Ia);return J<h.near||J>h.far?null:{distance:J,point:Ia.clone(),object:x}}function tl(x,o,h,m,v,C,b,L,W,J){x.getVertexPosition(L,y0),x.getVertexPosition(W,Ot),x.getVertexPosition(J,Ra);const re=Fl(x,o,h,m,y0,Ot,Ra,vn);if(re){v&&(j0.fromBufferAttribute(v,L),Bo.fromBufferAttribute(v,W),P1.fromBufferAttribute(v,J),re.uv=po.getInterpolation(vn,y0,Ot,Ra,j0,Bo,P1,new vi)),C&&(j0.fromBufferAttribute(C,L),Bo.fromBufferAttribute(C,W),P1.fromBufferAttribute(C,J),re.uv1=po.getInterpolation(vn,y0,Ot,Ra,j0,Bo,P1,new vi)),b&&(el.fromBufferAttribute(b,L),yc.fromBufferAttribute(b,W),s1.fromBufferAttribute(b,J),re.normal=po.getInterpolation(vn,y0,Ot,Ra,el,yc,s1,new nt),re.normal.dot(m.direction)>0&&re.normal.multiplyScalar(-1));const ue={a:L,b:W,c:J,normal:new nt,materialIndex:0};po.getNormal(y0,Ot,Ra,ue.normal),re.face=ue}return re}class U0 extends rr{constructor(o=1,h=1,m=1,v=1,C=1,b=1){super(),this.type="BoxGeometry",this.parameters={width:o,height:h,depth:m,widthSegments:v,heightSegments:C,depthSegments:b};const L=this;v=Math.floor(v),C=Math.floor(C),b=Math.floor(b);const W=[],J=[],re=[],ue=[];let pe=0,ve=0;xe("z","y","x",-1,-1,m,h,o,b,C,0),xe("z","y","x",1,-1,m,h,-o,b,C,1),xe("x","z","y",1,1,o,m,h,v,b,2),xe("x","z","y",1,-1,o,m,-h,v,b,3),xe("x","y","z",1,-1,o,h,m,v,C,4),xe("x","y","z",-1,-1,o,h,-m,v,C,5),this.setIndex(W),this.setAttribute("position",new Ai(J,3)),this.setAttribute("normal",new Ai(re,3)),this.setAttribute("uv",new Ai(ue,2));function xe(Le,Se,Ee,Ke,Ge,Ue,Ct,at,ft,yt,et){const qe=Ue/ft,wt=Ct/yt,Ft=Ue/2,Lt=Ct/2,Gt=at/2,ti=ft+1,Ei=yt+1;let $i=0,ri=0;const zi=new nt;for(let Yi=0;Yi<Ei;Yi++){const Rn=Yi*wt-Lt;for(let Br=0;Br<ti;Br++){const As=Br*qe-Ft;zi[Le]=As*Ke,zi[Se]=Rn*Ge,zi[Ee]=Gt,J.push(zi.x,zi.y,zi.z),zi[Le]=0,zi[Se]=0,zi[Ee]=at>0?1:-1,re.push(zi.x,zi.y,zi.z),ue.push(Br/ft),ue.push(1-Yi/yt),$i+=1}}for(let Yi=0;Yi<yt;Yi++)for(let Rn=0;Rn<ft;Rn++){const Br=pe+Rn+ti*Yi,As=pe+Rn+ti*(Yi+1),Ks=pe+(Rn+1)+ti*(Yi+1),hs=pe+(Rn+1)+ti*Yi;W.push(Br,As,hs),W.push(As,Ks,hs),ri+=6}L.addGroup(ve,ri,et),ve+=ri,pe+=$i}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new U0(o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments)}}function kl(x){const o={};for(const h in x){o[h]={};for(const m in x[h]){const v=x[h][m];v&&(v.isColor||v.isMatrix3||v.isMatrix4||v.isVector2||v.isVector3||v.isVector4||v.isTexture||v.isQuaternion)?v.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),o[h][m]=null):o[h][m]=v.clone():Array.isArray(v)?o[h][m]=v.slice():o[h][m]=v}}return o}function Uo(x){const o={};for(let h=0;h<x.length;h++){const m=kl(x[h]);for(const v in m)o[v]=m[v]}return o}function Ns(x){const o=[];for(let h=0;h<x.length;h++)o.push(x[h].clone());return o}function O1(x){const o=x.getRenderTarget();return o===null?x.outputColorSpace:o.isXRRenderTarget===!0?o.texture.colorSpace:jr.workingColorSpace}const wc={clone:kl,merge:Uo};var Cc=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Al=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class w0 extends us{constructor(o){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Cc,this.fragmentShader=Al,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,o!==void 0&&this.setValues(o)}copy(o){return super.copy(o),this.fragmentShader=o.fragmentShader,this.vertexShader=o.vertexShader,this.uniforms=kl(o.uniforms),this.uniformsGroups=Ns(o.uniformsGroups),this.defines=Object.assign({},o.defines),this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.fog=o.fog,this.lights=o.lights,this.clipping=o.clipping,this.extensions=Object.assign({},o.extensions),this.glslVersion=o.glslVersion,this}toJSON(o){const h=super.toJSON(o);h.glslVersion=this.glslVersion,h.uniforms={};for(const v in this.uniforms){const b=this.uniforms[v].value;b&&b.isTexture?h.uniforms[v]={type:"t",value:b.toJSON(o).uuid}:b&&b.isColor?h.uniforms[v]={type:"c",value:b.getHex()}:b&&b.isVector2?h.uniforms[v]={type:"v2",value:b.toArray()}:b&&b.isVector3?h.uniforms[v]={type:"v3",value:b.toArray()}:b&&b.isVector4?h.uniforms[v]={type:"v4",value:b.toArray()}:b&&b.isMatrix3?h.uniforms[v]={type:"m3",value:b.toArray()}:b&&b.isMatrix4?h.uniforms[v]={type:"m4",value:b.toArray()}:h.uniforms[v]={value:b}}Object.keys(this.defines).length>0&&(h.defines=this.defines),h.vertexShader=this.vertexShader,h.fragmentShader=this.fragmentShader,h.lights=this.lights,h.clipping=this.clipping;const m={};for(const v in this.extensions)this.extensions[v]===!0&&(m[v]=!0);return Object.keys(m).length>0&&(h.extensions=m),h}}class Ba extends Nr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new on,this.projectionMatrix=new on,this.projectionMatrixInverse=new on,this.coordinateSystem=O0}copy(o,h){return super.copy(o,h),this.matrixWorldInverse.copy(o.matrixWorldInverse),this.projectionMatrix.copy(o.projectionMatrix),this.projectionMatrixInverse.copy(o.projectionMatrixInverse),this.coordinateSystem=o.coordinateSystem,this}getWorldDirection(o){return super.getWorldDirection(o).negate()}updateMatrixWorld(o){super.updateMatrixWorld(o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(o,h){super.updateWorldMatrix(o,h),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const is=new nt,Er=new vi,oo=new vi;class Ls extends Ba{constructor(o=50,h=1,m=.1,v=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=o,this.zoom=1,this.near=m,this.far=v,this.focus=10,this.aspect=h,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(o,h){return super.copy(o,h),this.fov=o.fov,this.zoom=o.zoom,this.near=o.near,this.far=o.far,this.focus=o.focus,this.aspect=o.aspect,this.view=o.view===null?null:Object.assign({},o.view),this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this}setFocalLength(o){const h=.5*this.getFilmHeight()/o;this.fov=Va*2*Math.atan(h),this.updateProjectionMatrix()}getFocalLength(){const o=Math.tan(Aa*.5*this.fov);return .5*this.getFilmHeight()/o}getEffectiveFOV(){return Va*2*Math.atan(Math.tan(Aa*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(o,h,m){is.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),h.set(is.x,is.y).multiplyScalar(-o/is.z),is.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),m.set(is.x,is.y).multiplyScalar(-o/is.z)}getViewSize(o,h){return this.getViewBounds(o,Er,oo),h.subVectors(oo,Er)}setViewOffset(o,h,m,v,C,b){this.aspect=o/h,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=h,this.view.offsetX=m,this.view.offsetY=v,this.view.width=C,this.view.height=b,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const o=this.near;let h=o*Math.tan(Aa*.5*this.fov)/this.zoom,m=2*h,v=this.aspect*m,C=-.5*v;const b=this.view;if(this.view!==null&&this.view.enabled){const W=b.fullWidth,J=b.fullHeight;C+=b.offsetX*v/W,h-=b.offsetY*m/J,v*=b.width/W,m*=b.height/J}const L=this.filmOffset;L!==0&&(C+=o*L/this.getFilmWidth()),this.projectionMatrix.makePerspective(C,C+v,h,h-m,o,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(o){const h=super.toJSON(o);return h.object.fov=this.fov,h.object.zoom=this.zoom,h.object.near=this.near,h.object.far=this.far,h.object.focus=this.focus,h.object.aspect=this.aspect,this.view!==null&&(h.object.view=Object.assign({},this.view)),h.object.filmGauge=this.filmGauge,h.object.filmOffset=this.filmOffset,h}}const c0=-90,La=1;class _c extends Nr{constructor(o,h,m){super(),this.type="CubeCamera",this.renderTarget=m,this.coordinateSystem=null,this.activeMipmapLevel=0;const v=new Ls(c0,La,o,h);v.layers=this.layers,this.add(v);const C=new Ls(c0,La,o,h);C.layers=this.layers,this.add(C);const b=new Ls(c0,La,o,h);b.layers=this.layers,this.add(b);const L=new Ls(c0,La,o,h);L.layers=this.layers,this.add(L);const W=new Ls(c0,La,o,h);W.layers=this.layers,this.add(W);const J=new Ls(c0,La,o,h);J.layers=this.layers,this.add(J)}updateCoordinateSystem(){const o=this.coordinateSystem,h=this.children.concat(),[m,v,C,b,L,W]=h;for(const J of h)this.remove(J);if(o===O0)m.up.set(0,1,0),m.lookAt(1,0,0),v.up.set(0,1,0),v.lookAt(-1,0,0),C.up.set(0,0,-1),C.lookAt(0,1,0),b.up.set(0,0,1),b.lookAt(0,-1,0),L.up.set(0,1,0),L.lookAt(0,0,1),W.up.set(0,1,0),W.lookAt(0,0,-1);else if(o===Qa)m.up.set(0,-1,0),m.lookAt(-1,0,0),v.up.set(0,-1,0),v.lookAt(1,0,0),C.up.set(0,0,1),C.lookAt(0,1,0),b.up.set(0,0,-1),b.lookAt(0,-1,0),L.up.set(0,-1,0),L.lookAt(0,0,1),W.up.set(0,-1,0),W.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+o);for(const J of h)this.add(J),J.updateMatrixWorld()}update(o,h){this.parent===null&&this.updateMatrixWorld();const{renderTarget:m,activeMipmapLevel:v}=this;this.coordinateSystem!==o.coordinateSystem&&(this.coordinateSystem=o.coordinateSystem,this.updateCoordinateSystem());const[C,b,L,W,J,re]=this.children,ue=o.getRenderTarget(),pe=o.getActiveCubeFace(),ve=o.getActiveMipmapLevel(),xe=o.xr.enabled;o.xr.enabled=!1;const Le=m.texture.generateMipmaps;m.texture.generateMipmaps=!1,o.setRenderTarget(m,0,v),o.render(h,C),o.setRenderTarget(m,1,v),o.render(h,b),o.setRenderTarget(m,2,v),o.render(h,L),o.setRenderTarget(m,3,v),o.render(h,W),o.setRenderTarget(m,4,v),o.render(h,J),m.texture.generateMipmaps=Le,o.setRenderTarget(m,5,v),o.render(h,re),o.setRenderTarget(ue,pe,ve),o.xr.enabled=xe,m.texture.needsPMREMUpdate=!0}}class ao extends cs{constructor(o,h,m,v,C,b,L,W,J,re){o=o!==void 0?o:[],h=h!==void 0?h:Ie,super(o,h,m,v,C,b,L,W,J,re),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(o){this.image=o}}class F1 extends js{constructor(o=1,h={}){super(o,o,h),this.isWebGLCubeRenderTarget=!0;const m={width:o,height:o,depth:1},v=[m,m,m,m,m,m];this.texture=new ao(v,h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=h.generateMipmaps!==void 0?h.generateMipmaps:!1,this.texture.minFilter=h.minFilter!==void 0?h.minFilter:kn}fromEquirectangularTexture(o,h){this.texture.type=h.type,this.texture.colorSpace=h.colorSpace,this.texture.generateMipmaps=h.generateMipmaps,this.texture.minFilter=h.minFilter,this.texture.magFilter=h.magFilter;const m={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},v=new U0(5,5,5),C=new w0({name:"CubemapFromEquirect",uniforms:kl(m.uniforms),vertexShader:m.vertexShader,fragmentShader:m.fragmentShader,side:Z,blending:te});C.uniforms.tEquirect.value=h;const b=new Bs(v,C),L=h.minFilter;return h.minFilter===Pr&&(h.minFilter=kn),new _c(1,10,this).update(o,b),h.minFilter=L,b.geometry.dispose(),b.material.dispose(),this}clear(o,h,m,v){const C=o.getRenderTarget();for(let b=0;b<6;b++)o.setRenderTarget(this,b),o.clear(h,m,v);o.setRenderTarget(C)}}const o1=new nt,xc=new nt,ea=new Nn;class vo{constructor(o=new nt(1,0,0),h=0){this.isPlane=!0,this.normal=o,this.constant=h}set(o,h){return this.normal.copy(o),this.constant=h,this}setComponents(o,h,m,v){return this.normal.set(o,h,m),this.constant=v,this}setFromNormalAndCoplanarPoint(o,h){return this.normal.copy(o),this.constant=-h.dot(this.normal),this}setFromCoplanarPoints(o,h,m){const v=o1.subVectors(m,h).cross(xc.subVectors(o,h)).normalize();return this.setFromNormalAndCoplanarPoint(v,o),this}copy(o){return this.normal.copy(o.normal),this.constant=o.constant,this}normalize(){const o=1/this.normal.length();return this.normal.multiplyScalar(o),this.constant*=o,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(o){return this.normal.dot(o)+this.constant}distanceToSphere(o){return this.distanceToPoint(o.center)-o.radius}projectPoint(o,h){return h.copy(o).addScaledVector(this.normal,-this.distanceToPoint(o))}intersectLine(o,h){const m=o.delta(o1),v=this.normal.dot(m);if(v===0)return this.distanceToPoint(o.start)===0?h.copy(o.start):null;const C=-(o.start.dot(this.normal)+this.constant)/v;return C<0||C>1?null:h.copy(o.start).addScaledVector(m,C)}intersectsLine(o){const h=this.distanceToPoint(o.start),m=this.distanceToPoint(o.end);return h<0&&m>0||m<0&&h>0}intersectsBox(o){return o.intersectsPlane(this)}intersectsSphere(o){return o.intersectsPlane(this)}coplanarPoint(o){return o.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(o,h){const m=h||ea.getNormalMatrix(o),v=this.coplanarPoint(o1).applyMatrix4(o),C=this.normal.applyMatrix3(m).normalize();return this.constant=-v.dot(C),this}translate(o){return this.constant-=o.dot(this.normal),this}equals(o){return o.normal.equals(this.normal)&&o.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ta=new Vs,R0=new nt;class il{constructor(o=new vo,h=new vo,m=new vo,v=new vo,C=new vo,b=new vo){this.planes=[o,h,m,v,C,b]}set(o,h,m,v,C,b){const L=this.planes;return L[0].copy(o),L[1].copy(h),L[2].copy(m),L[3].copy(v),L[4].copy(C),L[5].copy(b),this}copy(o){const h=this.planes;for(let m=0;m<6;m++)h[m].copy(o.planes[m]);return this}setFromProjectionMatrix(o,h=O0){const m=this.planes,v=o.elements,C=v[0],b=v[1],L=v[2],W=v[3],J=v[4],re=v[5],ue=v[6],pe=v[7],ve=v[8],xe=v[9],Le=v[10],Se=v[11],Ee=v[12],Ke=v[13],Ge=v[14],Ue=v[15];if(m[0].setComponents(W-C,pe-J,Se-ve,Ue-Ee).normalize(),m[1].setComponents(W+C,pe+J,Se+ve,Ue+Ee).normalize(),m[2].setComponents(W+b,pe+re,Se+xe,Ue+Ke).normalize(),m[3].setComponents(W-b,pe-re,Se-xe,Ue-Ke).normalize(),m[4].setComponents(W-L,pe-ue,Se-Le,Ue-Ge).normalize(),h===O0)m[5].setComponents(W+L,pe+ue,Se+Le,Ue+Ge).normalize();else if(h===Qa)m[5].setComponents(L,ue,Le,Ge).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+h);return this}intersectsObject(o){if(o.boundingSphere!==void 0)o.boundingSphere===null&&o.computeBoundingSphere(),ta.copy(o.boundingSphere).applyMatrix4(o.matrixWorld);else{const h=o.geometry;h.boundingSphere===null&&h.computeBoundingSphere(),ta.copy(h.boundingSphere).applyMatrix4(o.matrixWorld)}return this.intersectsSphere(ta)}intersectsSprite(o){return ta.center.set(0,0,0),ta.radius=.7071067811865476,ta.applyMatrix4(o.matrixWorld),this.intersectsSphere(ta)}intersectsSphere(o){const h=this.planes,m=o.center,v=-o.radius;for(let C=0;C<6;C++)if(h[C].distanceToPoint(m)<v)return!1;return!0}intersectsBox(o){const h=this.planes;for(let m=0;m<6;m++){const v=h[m];if(R0.x=v.normal.x>0?o.max.x:o.min.x,R0.y=v.normal.y>0?o.max.y:o.min.y,R0.z=v.normal.z>0?o.max.z:o.min.z,v.distanceToPoint(R0)<0)return!1}return!0}containsPoint(o){const h=this.planes;for(let m=0;m<6;m++)if(h[m].distanceToPoint(o)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function a1(){let x=null,o=!1,h=null,m=null;function v(C,b){h(C,b),m=x.requestAnimationFrame(v)}return{start:function(){o!==!0&&h!==null&&(m=x.requestAnimationFrame(v),o=!0)},stop:function(){x.cancelAnimationFrame(m),o=!1},setAnimationLoop:function(C){h=C},setContext:function(C){x=C}}}function vh(x){const o=new WeakMap;function h(L,W){const J=L.array,re=L.usage,ue=J.byteLength,pe=x.createBuffer();x.bindBuffer(W,pe),x.bufferData(W,J,re),L.onUploadCallback();let ve;if(J instanceof Float32Array)ve=x.FLOAT;else if(J instanceof Uint16Array)L.isFloat16BufferAttribute?ve=x.HALF_FLOAT:ve=x.UNSIGNED_SHORT;else if(J instanceof Int16Array)ve=x.SHORT;else if(J instanceof Uint32Array)ve=x.UNSIGNED_INT;else if(J instanceof Int32Array)ve=x.INT;else if(J instanceof Int8Array)ve=x.BYTE;else if(J instanceof Uint8Array)ve=x.UNSIGNED_BYTE;else if(J instanceof Uint8ClampedArray)ve=x.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+J);return{buffer:pe,type:ve,bytesPerElement:J.BYTES_PER_ELEMENT,version:L.version,size:ue}}function m(L,W,J){const re=W.array,ue=W._updateRange,pe=W.updateRanges;if(x.bindBuffer(J,L),ue.count===-1&&pe.length===0&&x.bufferSubData(J,0,re),pe.length!==0){for(let ve=0,xe=pe.length;ve<xe;ve++){const Le=pe[ve];x.bufferSubData(J,Le.start*re.BYTES_PER_ELEMENT,re,Le.start,Le.count)}W.clearUpdateRanges()}ue.count!==-1&&(x.bufferSubData(J,ue.offset*re.BYTES_PER_ELEMENT,re,ue.offset,ue.count),ue.count=-1),W.onUploadCallback()}function v(L){return L.isInterleavedBufferAttribute&&(L=L.data),o.get(L)}function C(L){L.isInterleavedBufferAttribute&&(L=L.data);const W=o.get(L);W&&(x.deleteBuffer(W.buffer),o.delete(L))}function b(L,W){if(L.isGLBufferAttribute){const re=o.get(L);(!re||re.version<L.version)&&o.set(L,{buffer:L.buffer,type:L.type,bytesPerElement:L.elementSize,version:L.version});return}L.isInterleavedBufferAttribute&&(L=L.data);const J=o.get(L);if(J===void 0)o.set(L,h(L,W));else if(J.version<L.version){if(J.size!==L.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");m(J.buffer,L,W),J.version=L.version}}return{get:v,remove:C,update:b}}class Da extends rr{constructor(o=1,h=1,m=1,v=1){super(),this.type="PlaneGeometry",this.parameters={width:o,height:h,widthSegments:m,heightSegments:v};const C=o/2,b=h/2,L=Math.floor(m),W=Math.floor(v),J=L+1,re=W+1,ue=o/L,pe=h/W,ve=[],xe=[],Le=[],Se=[];for(let Ee=0;Ee<re;Ee++){const Ke=Ee*pe-b;for(let Ge=0;Ge<J;Ge++){const Ue=Ge*ue-C;xe.push(Ue,-Ke,0),Le.push(0,0,1),Se.push(Ge/L),Se.push(1-Ee/W)}}for(let Ee=0;Ee<W;Ee++)for(let Ke=0;Ke<L;Ke++){const Ge=Ke+J*Ee,Ue=Ke+J*(Ee+1),Ct=Ke+1+J*(Ee+1),at=Ke+1+J*Ee;ve.push(Ge,Ue,at),ve.push(Ue,Ct,at)}this.setIndex(ve),this.setAttribute("position",new Ai(xe,3)),this.setAttribute("normal",new Ai(Le,3)),this.setAttribute("uv",new Ai(Se,2))}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new Da(o.width,o.height,o.widthSegments,o.heightSegments)}}var Eh=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,yh=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,wh=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Ch=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_h=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,l1=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,xh=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,ml=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Mc=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Mh=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Cu=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,_u=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Sh=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,bh=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Th=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,xu=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Rh=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ih=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Bh=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Rd=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Lh=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Id=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Bd=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Dh=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ph=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Oh=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Sc=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Ld=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Dd=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Pd=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,ia="gl_FragColor = linearToOutputTexel( gl_FragColor );",Mu=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,bc=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Fh=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,kh=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Nh=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Su=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,c1=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,bu=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Tu=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Ru=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Uh=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Hh=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Gh=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Qh=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Vh=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Od=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,C0=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,u0=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,zh=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Wh=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Kh=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Xh=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,yr=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,wr=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Yh=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,u1=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Iu=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Bu=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Lu=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,Nl=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,I0=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Tc=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,nl=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Fd=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,qh=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Du=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Pu=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,h1=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,_0=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,kd=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Rc=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Ou=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Jh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Zh=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,k1=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Zo=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Nd=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Ud=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Ic=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,$o=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Hd=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,En=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,d1=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Fu=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,$h=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Gd=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,f1=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Bc=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,ku=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return shadow;
	}
#endif`,jh=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,ed=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,td=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Nu=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Uu=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Ho=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,na=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,gl=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,id=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,nd=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ra=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,rd=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Pa=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Qd=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sd=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,od=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,ad=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Un={alphahash_fragment:Eh,alphahash_pars_fragment:yh,alphamap_fragment:wh,alphamap_pars_fragment:Ch,alphatest_fragment:_h,alphatest_pars_fragment:l1,aomap_fragment:xh,aomap_pars_fragment:ml,batching_pars_vertex:Mc,batching_vertex:Mh,begin_vertex:Cu,beginnormal_vertex:_u,bsdfs:Sh,iridescence_fragment:bh,bumpmap_pars_fragment:Th,clipping_planes_fragment:xu,clipping_planes_pars_fragment:Rh,clipping_planes_pars_vertex:Ih,clipping_planes_vertex:Bh,color_fragment:Rd,color_pars_fragment:Lh,color_pars_vertex:Id,color_vertex:Bd,common:Dh,cube_uv_reflection_fragment:Ph,defaultnormal_vertex:Oh,displacementmap_pars_vertex:Sc,displacementmap_vertex:Ld,emissivemap_fragment:Dd,emissivemap_pars_fragment:Pd,colorspace_fragment:ia,colorspace_pars_fragment:Mu,envmap_fragment:bc,envmap_common_pars_fragment:Fh,envmap_pars_fragment:kh,envmap_pars_vertex:Nh,envmap_physical_pars_fragment:Od,envmap_vertex:Su,fog_vertex:c1,fog_pars_vertex:bu,fog_fragment:Tu,fog_pars_fragment:Ru,gradientmap_pars_fragment:Uh,lightmap_pars_fragment:Hh,lights_lambert_fragment:Gh,lights_lambert_pars_fragment:Qh,lights_pars_begin:Vh,lights_toon_fragment:C0,lights_toon_pars_fragment:u0,lights_phong_fragment:zh,lights_phong_pars_fragment:Wh,lights_physical_fragment:Kh,lights_physical_pars_fragment:Xh,lights_fragment_begin:yr,lights_fragment_maps:wr,lights_fragment_end:Yh,logdepthbuf_fragment:u1,logdepthbuf_pars_fragment:Iu,logdepthbuf_pars_vertex:Bu,logdepthbuf_vertex:Lu,map_fragment:Nl,map_pars_fragment:I0,map_particle_fragment:Tc,map_particle_pars_fragment:nl,metalnessmap_fragment:Fd,metalnessmap_pars_fragment:qh,morphinstance_vertex:Du,morphcolor_vertex:Pu,morphnormal_vertex:h1,morphtarget_pars_vertex:_0,morphtarget_vertex:kd,normal_fragment_begin:Rc,normal_fragment_maps:Ou,normal_pars_fragment:Jh,normal_pars_vertex:Zh,normal_vertex:k1,normalmap_pars_fragment:Zo,clearcoat_normal_fragment_begin:Nd,clearcoat_normal_fragment_maps:Ud,clearcoat_pars_fragment:Ic,iridescence_pars_fragment:$o,opaque_fragment:Hd,packing:En,premultiplied_alpha_fragment:d1,project_vertex:Fu,dithering_fragment:$h,dithering_pars_fragment:Gd,roughnessmap_fragment:f1,roughnessmap_pars_fragment:Bc,shadowmap_pars_fragment:ku,shadowmap_pars_vertex:jh,shadowmap_vertex:ed,shadowmask_pars_fragment:td,skinbase_vertex:Nu,skinning_pars_vertex:Uu,skinning_vertex:Ho,skinnormal_vertex:na,specularmap_fragment:gl,specularmap_pars_fragment:id,tonemapping_fragment:nd,tonemapping_pars_fragment:ra,transmission_fragment:rd,transmission_pars_fragment:Pa,uv_pars_fragment:Qd,uv_pars_vertex:sd,uv_vertex:od,worldpos_vertex:ad,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,depth_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`},tn={common:{diffuse:{value:new un(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Nn}},envmap:{envMap:{value:null},envMapRotation:{value:new Nn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Nn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Nn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Nn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Nn},normalScale:{value:new vi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Nn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Nn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Nn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Nn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new un(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new un(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0},uvTransform:{value:new Nn}},sprite:{diffuse:{value:new un(16777215)},opacity:{value:1},center:{value:new vi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Nn},alphaMap:{value:null},alphaMapTransform:{value:new Nn},alphaTest:{value:0}}},h0={basic:{uniforms:Uo([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.fog]),vertexShader:Un.meshbasic_vert,fragmentShader:Un.meshbasic_frag},lambert:{uniforms:Uo([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.fog,tn.lights,{emissive:{value:new un(0)}}]),vertexShader:Un.meshlambert_vert,fragmentShader:Un.meshlambert_frag},phong:{uniforms:Uo([tn.common,tn.specularmap,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.fog,tn.lights,{emissive:{value:new un(0)},specular:{value:new un(1118481)},shininess:{value:30}}]),vertexShader:Un.meshphong_vert,fragmentShader:Un.meshphong_frag},standard:{uniforms:Uo([tn.common,tn.envmap,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.roughnessmap,tn.metalnessmap,tn.fog,tn.lights,{emissive:{value:new un(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Un.meshphysical_vert,fragmentShader:Un.meshphysical_frag},toon:{uniforms:Uo([tn.common,tn.aomap,tn.lightmap,tn.emissivemap,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.gradientmap,tn.fog,tn.lights,{emissive:{value:new un(0)}}]),vertexShader:Un.meshtoon_vert,fragmentShader:Un.meshtoon_frag},matcap:{uniforms:Uo([tn.common,tn.bumpmap,tn.normalmap,tn.displacementmap,tn.fog,{matcap:{value:null}}]),vertexShader:Un.meshmatcap_vert,fragmentShader:Un.meshmatcap_frag},points:{uniforms:Uo([tn.points,tn.fog]),vertexShader:Un.points_vert,fragmentShader:Un.points_frag},dashed:{uniforms:Uo([tn.common,tn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Un.linedashed_vert,fragmentShader:Un.linedashed_frag},depth:{uniforms:Uo([tn.common,tn.displacementmap]),vertexShader:Un.depth_vert,fragmentShader:Un.depth_frag},normal:{uniforms:Uo([tn.common,tn.bumpmap,tn.normalmap,tn.displacementmap,{opacity:{value:1}}]),vertexShader:Un.meshnormal_vert,fragmentShader:Un.meshnormal_frag},sprite:{uniforms:Uo([tn.sprite,tn.fog]),vertexShader:Un.sprite_vert,fragmentShader:Un.sprite_frag},background:{uniforms:{uvTransform:{value:new Nn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Un.background_vert,fragmentShader:Un.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Nn}},vertexShader:Un.backgroundCube_vert,fragmentShader:Un.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Un.cube_vert,fragmentShader:Un.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Un.equirect_vert,fragmentShader:Un.equirect_frag},distanceRGBA:{uniforms:Uo([tn.common,tn.displacementmap,{referencePosition:{value:new nt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Un.distanceRGBA_vert,fragmentShader:Un.distanceRGBA_frag},shadow:{uniforms:Uo([tn.lights,tn.fog,{color:{value:new un(0)},opacity:{value:1}}]),vertexShader:Un.shadow_vert,fragmentShader:Un.shadow_frag}};h0.physical={uniforms:Uo([h0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Nn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Nn},clearcoatNormalScale:{value:new vi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Nn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Nn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Nn},sheen:{value:0},sheenColor:{value:new un(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Nn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Nn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Nn},transmissionSamplerSize:{value:new vi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Nn},attenuationDistance:{value:0},attenuationColor:{value:new un(0)},specularColor:{value:new un(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Nn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Nn},anisotropyVector:{value:new vi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Nn}}]),vertexShader:Un.meshphysical_vert,fragmentShader:Un.meshphysical_frag};const A1={r:0,b:0,g:0},Gl=new a0,yl=new on;function dd(x,o,h,m,v,C,b){const L=new un(0);let W=C===!0?0:1,J,re,ue=null,pe=0,ve=null;function xe(Ke){let Ge=Ke.isScene===!0?Ke.background:null;return Ge&&Ge.isTexture&&(Ge=(Ke.backgroundBlurriness>0?h:o).get(Ge)),Ge}function Le(Ke){let Ge=!1;const Ue=xe(Ke);Ue===null?Ee(L,W):Ue&&Ue.isColor&&(Ee(Ue,1),Ge=!0);const Ct=x.xr.getEnvironmentBlendMode();Ct==="additive"?m.buffers.color.setClear(0,0,0,1,b):Ct==="alpha-blend"&&m.buffers.color.setClear(0,0,0,0,b),(x.autoClear||Ge)&&x.clear(x.autoClearColor,x.autoClearDepth,x.autoClearStencil)}function Se(Ke,Ge){const Ue=xe(Ge);Ue&&(Ue.isCubeTexture||Ue.mapping===Ze)?(re===void 0&&(re=new Bs(new U0(1e4,1e4,1e4),new w0({name:"BackgroundCubeMaterial",uniforms:kl(h0.backgroundCube.uniforms),vertexShader:h0.backgroundCube.vertexShader,fragmentShader:h0.backgroundCube.fragmentShader,side:Z,depthTest:!1,depthWrite:!1,fog:!1})),re.geometry.deleteAttribute("normal"),re.geometry.deleteAttribute("uv"),re.onBeforeRender=function(Ct,at,ft){this.matrixWorld.copyPosition(ft.matrixWorld)},Object.defineProperty(re.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),v.update(re)),Gl.copy(Ge.backgroundRotation),Gl.x*=-1,Gl.y*=-1,Gl.z*=-1,Ue.isCubeTexture&&Ue.isRenderTargetTexture===!1&&(Gl.y*=-1,Gl.z*=-1),re.material.uniforms.envMap.value=Ue,re.material.uniforms.flipEnvMap.value=Ue.isCubeTexture&&Ue.isRenderTargetTexture===!1?-1:1,re.material.uniforms.backgroundBlurriness.value=Ge.backgroundBlurriness,re.material.uniforms.backgroundIntensity.value=Ge.backgroundIntensity,re.material.uniforms.backgroundRotation.value.setFromMatrix4(yl.makeRotationFromEuler(Gl)),re.material.toneMapped=jr.getTransfer(Ue.colorSpace)!==$r,(ue!==Ue||pe!==Ue.version||ve!==x.toneMapping)&&(re.material.needsUpdate=!0,ue=Ue,pe=Ue.version,ve=x.toneMapping),re.layers.enableAll(),Ke.unshift(re,re.geometry,re.material,0,0,null)):Ue&&Ue.isTexture&&(J===void 0&&(J=new Bs(new Da(2,2),new w0({name:"BackgroundMaterial",uniforms:kl(h0.background.uniforms),vertexShader:h0.background.vertexShader,fragmentShader:h0.background.fragmentShader,side:G,depthTest:!1,depthWrite:!1,fog:!1})),J.geometry.deleteAttribute("normal"),Object.defineProperty(J.material,"map",{get:function(){return this.uniforms.t2D.value}}),v.update(J)),J.material.uniforms.t2D.value=Ue,J.material.uniforms.backgroundIntensity.value=Ge.backgroundIntensity,J.material.toneMapped=jr.getTransfer(Ue.colorSpace)!==$r,Ue.matrixAutoUpdate===!0&&Ue.updateMatrix(),J.material.uniforms.uvTransform.value.copy(Ue.matrix),(ue!==Ue||pe!==Ue.version||ve!==x.toneMapping)&&(J.material.needsUpdate=!0,ue=Ue,pe=Ue.version,ve=x.toneMapping),J.layers.enableAll(),Ke.unshift(J,J.geometry,J.material,0,0,null))}function Ee(Ke,Ge){Ke.getRGB(A1,O1(x)),m.buffers.color.setClear(A1.r,A1.g,A1.b,Ge,b)}return{getClearColor:function(){return L},setClearColor:function(Ke,Ge=1){L.set(Ke),W=Ge,Ee(L,W)},getClearAlpha:function(){return W},setClearAlpha:function(Ke){W=Ke,Ee(L,W)},render:Le,addToRenderList:Se}}function Wu(x,o){const h=x.getParameter(x.MAX_VERTEX_ATTRIBS),m={},v=pe(null);let C=v,b=!1;function L(qe,wt,Ft,Lt,Gt){let ti=!1;const Ei=ue(Lt,Ft,wt);C!==Ei&&(C=Ei,J(C.object)),ti=ve(qe,Lt,Ft,Gt),ti&&xe(qe,Lt,Ft,Gt),Gt!==null&&o.update(Gt,x.ELEMENT_ARRAY_BUFFER),(ti||b)&&(b=!1,Ue(qe,wt,Ft,Lt),Gt!==null&&x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,o.get(Gt).buffer))}function W(){return x.createVertexArray()}function J(qe){return x.bindVertexArray(qe)}function re(qe){return x.deleteVertexArray(qe)}function ue(qe,wt,Ft){const Lt=Ft.wireframe===!0;let Gt=m[qe.id];Gt===void 0&&(Gt={},m[qe.id]=Gt);let ti=Gt[wt.id];ti===void 0&&(ti={},Gt[wt.id]=ti);let Ei=ti[Lt];return Ei===void 0&&(Ei=pe(W()),ti[Lt]=Ei),Ei}function pe(qe){const wt=[],Ft=[],Lt=[];for(let Gt=0;Gt<h;Gt++)wt[Gt]=0,Ft[Gt]=0,Lt[Gt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:wt,enabledAttributes:Ft,attributeDivisors:Lt,object:qe,attributes:{},index:null}}function ve(qe,wt,Ft,Lt){const Gt=C.attributes,ti=wt.attributes;let Ei=0;const $i=Ft.getAttributes();for(const ri in $i)if($i[ri].location>=0){const Yi=Gt[ri];let Rn=ti[ri];if(Rn===void 0&&(ri==="instanceMatrix"&&qe.instanceMatrix&&(Rn=qe.instanceMatrix),ri==="instanceColor"&&qe.instanceColor&&(Rn=qe.instanceColor)),Yi===void 0||Yi.attribute!==Rn||Rn&&Yi.data!==Rn.data)return!0;Ei++}return C.attributesNum!==Ei||C.index!==Lt}function xe(qe,wt,Ft,Lt){const Gt={},ti=wt.attributes;let Ei=0;const $i=Ft.getAttributes();for(const ri in $i)if($i[ri].location>=0){let Yi=ti[ri];Yi===void 0&&(ri==="instanceMatrix"&&qe.instanceMatrix&&(Yi=qe.instanceMatrix),ri==="instanceColor"&&qe.instanceColor&&(Yi=qe.instanceColor));const Rn={};Rn.attribute=Yi,Yi&&Yi.data&&(Rn.data=Yi.data),Gt[ri]=Rn,Ei++}C.attributes=Gt,C.attributesNum=Ei,C.index=Lt}function Le(){const qe=C.newAttributes;for(let wt=0,Ft=qe.length;wt<Ft;wt++)qe[wt]=0}function Se(qe){Ee(qe,0)}function Ee(qe,wt){const Ft=C.newAttributes,Lt=C.enabledAttributes,Gt=C.attributeDivisors;Ft[qe]=1,Lt[qe]===0&&(x.enableVertexAttribArray(qe),Lt[qe]=1),Gt[qe]!==wt&&(x.vertexAttribDivisor(qe,wt),Gt[qe]=wt)}function Ke(){const qe=C.newAttributes,wt=C.enabledAttributes;for(let Ft=0,Lt=wt.length;Ft<Lt;Ft++)wt[Ft]!==qe[Ft]&&(x.disableVertexAttribArray(Ft),wt[Ft]=0)}function Ge(qe,wt,Ft,Lt,Gt,ti,Ei){Ei===!0?x.vertexAttribIPointer(qe,wt,Ft,Gt,ti):x.vertexAttribPointer(qe,wt,Ft,Lt,Gt,ti)}function Ue(qe,wt,Ft,Lt){Le();const Gt=Lt.attributes,ti=Ft.getAttributes(),Ei=wt.defaultAttributeValues;for(const $i in ti){const ri=ti[$i];if(ri.location>=0){let zi=Gt[$i];if(zi===void 0&&($i==="instanceMatrix"&&qe.instanceMatrix&&(zi=qe.instanceMatrix),$i==="instanceColor"&&qe.instanceColor&&(zi=qe.instanceColor)),zi!==void 0){const Yi=zi.normalized,Rn=zi.itemSize,Br=o.get(zi);if(Br===void 0)continue;const As=Br.buffer,Ks=Br.type,hs=Br.bytesPerElement,Ds=Ks===x.INT||Ks===x.UNSIGNED_INT||zi.gpuType===W0;if(zi.isInterleavedBufferAttribute){const Pn=zi.data,xi=Pn.stride,en=zi.offset;if(Pn.isInstancedInterleavedBuffer){for(let ln=0;ln<ri.locationSize;ln++)Ee(ri.location+ln,Pn.meshPerAttribute);qe.isInstancedMesh!==!0&&Lt._maxInstanceCount===void 0&&(Lt._maxInstanceCount=Pn.meshPerAttribute*Pn.count)}else for(let ln=0;ln<ri.locationSize;ln++)Se(ri.location+ln);x.bindBuffer(x.ARRAY_BUFFER,As);for(let ln=0;ln<ri.locationSize;ln++)Ge(ri.location+ln,Rn/ri.locationSize,Ks,Yi,xi*hs,(en+Rn/ri.locationSize*ln)*hs,Ds)}else{if(zi.isInstancedBufferAttribute){for(let Pn=0;Pn<ri.locationSize;Pn++)Ee(ri.location+Pn,zi.meshPerAttribute);qe.isInstancedMesh!==!0&&Lt._maxInstanceCount===void 0&&(Lt._maxInstanceCount=zi.meshPerAttribute*zi.count)}else for(let Pn=0;Pn<ri.locationSize;Pn++)Se(ri.location+Pn);x.bindBuffer(x.ARRAY_BUFFER,As);for(let Pn=0;Pn<ri.locationSize;Pn++)Ge(ri.location+Pn,Rn/ri.locationSize,Ks,Yi,Rn*hs,Rn/ri.locationSize*Pn*hs,Ds)}}else if(Ei!==void 0){const Yi=Ei[$i];if(Yi!==void 0)switch(Yi.length){case 2:x.vertexAttrib2fv(ri.location,Yi);break;case 3:x.vertexAttrib3fv(ri.location,Yi);break;case 4:x.vertexAttrib4fv(ri.location,Yi);break;default:x.vertexAttrib1fv(ri.location,Yi)}}}}Ke()}function Ct(){yt();for(const qe in m){const wt=m[qe];for(const Ft in wt){const Lt=wt[Ft];for(const Gt in Lt)re(Lt[Gt].object),delete Lt[Gt];delete wt[Ft]}delete m[qe]}}function at(qe){if(m[qe.id]===void 0)return;const wt=m[qe.id];for(const Ft in wt){const Lt=wt[Ft];for(const Gt in Lt)re(Lt[Gt].object),delete Lt[Gt];delete wt[Ft]}delete m[qe.id]}function ft(qe){for(const wt in m){const Ft=m[wt];if(Ft[qe.id]===void 0)continue;const Lt=Ft[qe.id];for(const Gt in Lt)re(Lt[Gt].object),delete Lt[Gt];delete Ft[qe.id]}}function yt(){et(),b=!0,C!==v&&(C=v,J(C.object))}function et(){v.geometry=null,v.program=null,v.wireframe=!1}return{setup:L,reset:yt,resetDefaultState:et,dispose:Ct,releaseStatesOfGeometry:at,releaseStatesOfProgram:ft,initAttributes:Le,enableAttribute:Se,disableUnusedAttributes:Ke}}function rl(x,o,h){let m;function v(J){m=J}function C(J,re){x.drawArrays(m,J,re),h.update(re,m,1)}function b(J,re,ue){ue!==0&&(x.drawArraysInstanced(m,J,re,ue),h.update(re,m,ue))}function L(J,re,ue){if(ue===0)return;const pe=o.get("WEBGL_multi_draw");if(pe===null)for(let ve=0;ve<ue;ve++)this.render(J[ve],re[ve]);else{pe.multiDrawArraysWEBGL(m,J,0,re,0,ue);let ve=0;for(let xe=0;xe<ue;xe++)ve+=re[xe];h.update(ve,m,1)}}function W(J,re,ue,pe){if(ue===0)return;const ve=o.get("WEBGL_multi_draw");if(ve===null)for(let xe=0;xe<J.length;xe++)b(J[xe],re[xe],pe[xe]);else{ve.multiDrawArraysInstancedWEBGL(m,J,0,re,0,pe,0,ue);let xe=0;for(let Le=0;Le<ue;Le++)xe+=re[Le];for(let Le=0;Le<pe.length;Le++)h.update(xe,m,pe[Le])}}this.setMode=v,this.render=C,this.renderInstances=b,this.renderMultiDraw=L,this.renderMultiDrawInstances=W}function Ku(x,o,h,m){let v;function C(){if(v!==void 0)return v;if(o.has("EXT_texture_filter_anisotropic")===!0){const at=o.get("EXT_texture_filter_anisotropic");v=x.getParameter(at.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else v=0;return v}function b(at){return!(at!==At&&m.convert(at)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_FORMAT))}function L(at){const ft=at===ir&&(o.has("EXT_color_buffer_half_float")||o.has("EXT_color_buffer_float"));return!(at!==os&&m.convert(at)!==x.getParameter(x.IMPLEMENTATION_COLOR_READ_TYPE)&&at!==Rs&&!ft)}function W(at){if(at==="highp"){if(x.getShaderPrecisionFormat(x.VERTEX_SHADER,x.HIGH_FLOAT).precision>0&&x.getShaderPrecisionFormat(x.FRAGMENT_SHADER,x.HIGH_FLOAT).precision>0)return"highp";at="mediump"}return at==="mediump"&&x.getShaderPrecisionFormat(x.VERTEX_SHADER,x.MEDIUM_FLOAT).precision>0&&x.getShaderPrecisionFormat(x.FRAGMENT_SHADER,x.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let J=h.precision!==void 0?h.precision:"highp";const re=W(J);re!==J&&(console.warn("THREE.WebGLRenderer:",J,"not supported, using",re,"instead."),J=re);const ue=h.logarithmicDepthBuffer===!0,pe=x.getParameter(x.MAX_TEXTURE_IMAGE_UNITS),ve=x.getParameter(x.MAX_VERTEX_TEXTURE_IMAGE_UNITS),xe=x.getParameter(x.MAX_TEXTURE_SIZE),Le=x.getParameter(x.MAX_CUBE_MAP_TEXTURE_SIZE),Se=x.getParameter(x.MAX_VERTEX_ATTRIBS),Ee=x.getParameter(x.MAX_VERTEX_UNIFORM_VECTORS),Ke=x.getParameter(x.MAX_VARYING_VECTORS),Ge=x.getParameter(x.MAX_FRAGMENT_UNIFORM_VECTORS),Ue=ve>0,Ct=x.getParameter(x.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:C,getMaxPrecision:W,textureFormatReadable:b,textureTypeReadable:L,precision:J,logarithmicDepthBuffer:ue,maxTextures:pe,maxVertexTextures:ve,maxTextureSize:xe,maxCubemapSize:Le,maxAttributes:Se,maxVertexUniforms:Ee,maxVaryings:Ke,maxFragmentUniforms:Ge,vertexTextures:Ue,maxSamples:Ct}}function Ql(x){const o=this;let h=null,m=0,v=!1,C=!1;const b=new vo,L=new Nn,W={value:null,needsUpdate:!1};this.uniform=W,this.numPlanes=0,this.numIntersection=0,this.init=function(ue,pe){const ve=ue.length!==0||pe||m!==0||v;return v=pe,m=ue.length,ve},this.beginShadows=function(){C=!0,re(null)},this.endShadows=function(){C=!1},this.setGlobalState=function(ue,pe){h=re(ue,pe,0)},this.setState=function(ue,pe,ve){const xe=ue.clippingPlanes,Le=ue.clipIntersection,Se=ue.clipShadows,Ee=x.get(ue);if(!v||xe===null||xe.length===0||C&&!Se)C?re(null):J();else{const Ke=C?0:m,Ge=Ke*4;let Ue=Ee.clippingState||null;W.value=Ue,Ue=re(xe,pe,Ge,ve);for(let Ct=0;Ct!==Ge;++Ct)Ue[Ct]=h[Ct];Ee.clippingState=Ue,this.numIntersection=Le?this.numPlanes:0,this.numPlanes+=Ke}};function J(){W.value!==h&&(W.value=h,W.needsUpdate=m>0),o.numPlanes=m,o.numIntersection=0}function re(ue,pe,ve,xe){const Le=ue!==null?ue.length:0;let Se=null;if(Le!==0){if(Se=W.value,xe!==!0||Se===null){const Ee=ve+Le*4,Ke=pe.matrixWorldInverse;L.getNormalMatrix(Ke),(Se===null||Se.length<Ee)&&(Se=new Float32Array(Ee));for(let Ge=0,Ue=ve;Ge!==Le;++Ge,Ue+=4)b.copy(ue[Ge]).applyMatrix4(Ke,L),b.normal.toArray(Se,Ue),Se[Ue+3]=b.constant}W.value=Se,W.needsUpdate=!0}return o.numPlanes=Le,o.numIntersection=0,Se}}function fd(x){let o=new WeakMap;function h(b,L){return L===ge?b.mapping=Ie:L===He&&(b.mapping=ae),b}function m(b){if(b&&b.isTexture){const L=b.mapping;if(L===ge||L===He)if(o.has(b)){const W=o.get(b).texture;return h(W,b.mapping)}else{const W=b.image;if(W&&W.height>0){const J=new F1(W.height);return J.fromEquirectangularTexture(x,b),o.set(b,J),b.addEventListener("dispose",v),h(J.texture,b.mapping)}else return null}}return b}function v(b){const L=b.target;L.removeEventListener("dispose",v);const W=o.get(L);W!==void 0&&(o.delete(L),W.dispose())}function C(){o=new WeakMap}return{get:m,dispose:C}}class H1 extends Ba{constructor(o=-1,h=1,m=1,v=-1,C=.1,b=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=o,this.right=h,this.top=m,this.bottom=v,this.near=C,this.far=b,this.updateProjectionMatrix()}copy(o,h){return super.copy(o,h),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.near=o.near,this.far=o.far,this.zoom=o.zoom,this.view=o.view===null?null:Object.assign({},o.view),this}setViewOffset(o,h,m,v,C,b){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=h,this.view.offsetX=m,this.view.offsetY=v,this.view.width=C,this.view.height=b,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const o=(this.right-this.left)/(2*this.zoom),h=(this.top-this.bottom)/(2*this.zoom),m=(this.right+this.left)/2,v=(this.top+this.bottom)/2;let C=m-o,b=m+o,L=v+h,W=v-h;if(this.view!==null&&this.view.enabled){const J=(this.right-this.left)/this.view.fullWidth/this.zoom,re=(this.top-this.bottom)/this.view.fullHeight/this.zoom;C+=J*this.view.offsetX,b=C+J*this.view.width,L-=re*this.view.offsetY,W=L-re*this.view.height}this.projectionMatrix.makeOrthographic(C,b,L,W,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(o){const h=super.toJSON(o);return h.object.zoom=this.zoom,h.object.left=this.left,h.object.right=this.right,h.object.top=this.top,h.object.bottom=this.bottom,h.object.near=this.near,h.object.far=this.far,this.view!==null&&(h.object.view=Object.assign({},this.view)),h}}const Fa=4,G1=[.125,.215,.35,.446,.526,.582],ka=20,Fc=new H1,Xu=new un;let Q1=null,sl=0,Go=0,Ht=!1;const rs=(1+Math.sqrt(5))/2,er=1/rs,Na=[new nt(-rs,er,0),new nt(rs,er,0),new nt(-er,0,rs),new nt(er,0,rs),new nt(0,rs,-er),new nt(0,rs,er),new nt(-1,1,-1),new nt(1,1,-1),new nt(-1,1,1),new nt(1,1,1)];class Cs{constructor(o){this._renderer=o,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(o,h=0,m=.1,v=100){Q1=this._renderer.getRenderTarget(),sl=this._renderer.getActiveCubeFace(),Go=this._renderer.getActiveMipmapLevel(),Ht=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const C=this._allocateTargets();return C.depthBuffer=!0,this._sceneToCubeUV(o,m,v,C),h>0&&this._blur(C,0,0,h),this._applyPMREM(C),this._cleanup(C),C}fromEquirectangular(o,h=null){return this._fromTexture(o,h)}fromCubemap(o,h=null){return this._fromTexture(o,h)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=t0(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Wd(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(o){this._lodMax=Math.floor(Math.log2(o)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let o=0;o<this._lodPlanes.length;o++)this._lodPlanes[o].dispose()}_cleanup(o){this._renderer.setRenderTarget(Q1,sl,Go),this._renderer.xr.enabled=Ht,o.scissorTest=!1,V1(o,0,0,o.width,o.height)}_fromTexture(o,h){o.mapping===Ie||o.mapping===ae?this._setSize(o.image.length===0?16:o.image[0].width||o.image[0].image.width):this._setSize(o.image.width/4),Q1=this._renderer.getRenderTarget(),sl=this._renderer.getActiveCubeFace(),Go=this._renderer.getActiveMipmapLevel(),Ht=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const m=h||this._allocateTargets();return this._textureToCubeUV(o,m),this._applyPMREM(m),this._cleanup(m),m}_allocateTargets(){const o=3*Math.max(this._cubeSize,112),h=4*this._cubeSize,m={magFilter:kn,minFilter:kn,generateMipmaps:!1,type:ir,format:At,colorSpace:xo,depthBuffer:!1},v=Yu(o,h,m);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==o||this._pingPongRenderTarget.height!==h){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Yu(o,h,m);const{_lodMax:C}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=vf(C)),this._blurMaterial=zd(C,o,h)}return v}_compileMaterial(o){const h=new Bs(this._lodPlanes[0],o);this._renderer.compile(h,Fc)}_sceneToCubeUV(o,h,m,v){const L=new Ls(90,1,h,m),W=[1,-1,1,1,1,1],J=[1,1,1,-1,-1,-1],re=this._renderer,ue=re.autoClear,pe=re.toneMapping;re.getClearColor(Xu),re.toneMapping=ts,re.autoClear=!1;const ve=new es({name:"PMREM.Background",side:Z,depthWrite:!1,depthTest:!1}),xe=new Bs(new U0,ve);let Le=!1;const Se=o.background;Se?Se.isColor&&(ve.color.copy(Se),o.background=null,Le=!0):(ve.color.copy(Xu),Le=!0);for(let Ee=0;Ee<6;Ee++){const Ke=Ee%3;Ke===0?(L.up.set(0,W[Ee],0),L.lookAt(J[Ee],0,0)):Ke===1?(L.up.set(0,0,W[Ee]),L.lookAt(0,J[Ee],0)):(L.up.set(0,W[Ee],0),L.lookAt(0,0,J[Ee]));const Ge=this._cubeSize;V1(v,Ke*Ge,Ee>2?Ge:0,Ge,Ge),re.setRenderTarget(v),Le&&re.render(xe,L),re.render(o,L)}xe.geometry.dispose(),xe.material.dispose(),re.toneMapping=pe,re.autoClear=ue,o.background=Se}_textureToCubeUV(o,h){const m=this._renderer,v=o.mapping===Ie||o.mapping===ae;v?(this._cubemapMaterial===null&&(this._cubemapMaterial=t0()),this._cubemapMaterial.uniforms.flipEnvMap.value=o.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Wd());const C=v?this._cubemapMaterial:this._equirectMaterial,b=new Bs(this._lodPlanes[0],C),L=C.uniforms;L.envMap.value=o;const W=this._cubeSize;V1(h,0,0,3*W,2*W),m.setRenderTarget(h),m.render(b,Fc)}_applyPMREM(o){const h=this._renderer,m=h.autoClear;h.autoClear=!1;const v=this._lodPlanes.length;for(let C=1;C<v;C++){const b=Math.sqrt(this._sigmas[C]*this._sigmas[C]-this._sigmas[C-1]*this._sigmas[C-1]),L=Na[(v-C-1)%Na.length];this._blur(o,C-1,C,b,L)}h.autoClear=m}_blur(o,h,m,v,C){const b=this._pingPongRenderTarget;this._halfBlur(o,b,h,m,v,"latitudinal",C),this._halfBlur(b,o,m,m,v,"longitudinal",C)}_halfBlur(o,h,m,v,C,b,L){const W=this._renderer,J=this._blurMaterial;b!=="latitudinal"&&b!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const re=3,ue=new Bs(this._lodPlanes[v],J),pe=J.uniforms,ve=this._sizeLods[m]-1,xe=isFinite(C)?Math.PI/(2*ve):2*Math.PI/(2*ka-1),Le=C/xe,Se=isFinite(C)?1+Math.floor(re*Le):ka;Se>ka&&console.warn(`sigmaRadians, ${C}, is too large and will clip, as it requested ${Se} samples when the maximum is set to ${ka}`);const Ee=[];let Ke=0;for(let ft=0;ft<ka;++ft){const yt=ft/Le,et=Math.exp(-yt*yt/2);Ee.push(et),ft===0?Ke+=et:ft<Se&&(Ke+=2*et)}for(let ft=0;ft<Ee.length;ft++)Ee[ft]=Ee[ft]/Ke;pe.envMap.value=o.texture,pe.samples.value=Se,pe.weights.value=Ee,pe.latitudinal.value=b==="latitudinal",L&&(pe.poleAxis.value=L);const{_lodMax:Ge}=this;pe.dTheta.value=xe,pe.mipInt.value=Ge-m;const Ue=this._sizeLods[v],Ct=3*Ue*(v>Ge-Fa?v-Ge+Fa:0),at=4*(this._cubeSize-Ue);V1(h,Ct,at,3*Ue,2*Ue),W.setRenderTarget(h),W.render(ue,Fc)}}function vf(x){const o=[],h=[],m=[];let v=x;const C=x-Fa+1+G1.length;for(let b=0;b<C;b++){const L=Math.pow(2,v);h.push(L);let W=1/L;b>x-Fa?W=G1[b-x+Fa-1]:b===0&&(W=0),m.push(W);const J=1/(L-2),re=-J,ue=1+J,pe=[re,re,ue,re,ue,ue,re,re,ue,ue,re,ue],ve=6,xe=6,Le=3,Se=2,Ee=1,Ke=new Float32Array(Le*xe*ve),Ge=new Float32Array(Se*xe*ve),Ue=new Float32Array(Ee*xe*ve);for(let at=0;at<ve;at++){const ft=at%3*2/3-1,yt=at>2?0:-1,et=[ft,yt,0,ft+2/3,yt,0,ft+2/3,yt+1,0,ft,yt,0,ft+2/3,yt+1,0,ft,yt+1,0];Ke.set(et,Le*xe*at),Ge.set(pe,Se*xe*at);const qe=[at,at,at,at,at,at];Ue.set(qe,Ee*xe*at)}const Ct=new rr;Ct.setAttribute("position",new Zr(Ke,Le)),Ct.setAttribute("uv",new Zr(Ge,Se)),Ct.setAttribute("faceIndex",new Zr(Ue,Ee)),o.push(Ct),v>Fa&&v--}return{lodPlanes:o,sizeLods:h,sigmas:m}}function Yu(x,o,h){const m=new js(x,o,h);return m.texture.mapping=Ze,m.texture.name="PMREM.cubeUv",m.scissorTest=!0,m}function V1(x,o,h,m,v){x.viewport.set(o,h,m,v),x.scissor.set(o,h,m,v)}function zd(x,o,h){const m=new Float32Array(ka),v=new nt(0,1,0);return new w0({name:"SphericalGaussianBlur",defines:{n:ka,CUBEUV_TEXEL_WIDTH:1/o,CUBEUV_TEXEL_HEIGHT:1/h,CUBEUV_MAX_MIP:`${x}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:m},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:v}},vertexShader:wl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:te,depthTest:!1,depthWrite:!1})}function Wd(){return new w0({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:wl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:te,depthTest:!1,depthWrite:!1})}function t0(){return new w0({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:wl(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:te,depthTest:!1,depthWrite:!1})}function wl(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function qu(x){let o=new WeakMap,h=null;function m(L){if(L&&L.isTexture){const W=L.mapping,J=W===ge||W===He,re=W===Ie||W===ae;if(J||re){let ue=o.get(L);const pe=ue!==void 0?ue.texture.pmremVersion:0;if(L.isRenderTargetTexture&&L.pmremVersion!==pe)return h===null&&(h=new Cs(x)),ue=J?h.fromEquirectangular(L,ue):h.fromCubemap(L,ue),ue.texture.pmremVersion=L.pmremVersion,o.set(L,ue),ue.texture;if(ue!==void 0)return ue.texture;{const ve=L.image;return J&&ve&&ve.height>0||re&&ve&&v(ve)?(h===null&&(h=new Cs(x)),ue=J?h.fromEquirectangular(L):h.fromCubemap(L),ue.texture.pmremVersion=L.pmremVersion,o.set(L,ue),L.addEventListener("dispose",C),ue.texture):null}}}return L}function v(L){let W=0;const J=6;for(let re=0;re<J;re++)L[re]!==void 0&&W++;return W===J}function C(L){const W=L.target;W.removeEventListener("dispose",C);const J=o.get(W);J!==void 0&&(o.delete(W),J.dispose())}function b(){o=new WeakMap,h!==null&&(h.dispose(),h=null)}return{get:m,dispose:b}}function oa(x){const o={};function h(m){if(o[m]!==void 0)return o[m];let v;switch(m){case"WEBGL_depth_texture":v=x.getExtension("WEBGL_depth_texture")||x.getExtension("MOZ_WEBGL_depth_texture")||x.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":v=x.getExtension("EXT_texture_filter_anisotropic")||x.getExtension("MOZ_EXT_texture_filter_anisotropic")||x.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":v=x.getExtension("WEBGL_compressed_texture_s3tc")||x.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":v=x.getExtension("WEBGL_compressed_texture_pvrtc")||x.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:v=x.getExtension(m)}return o[m]=v,v}return{has:function(m){return h(m)!==null},init:function(){h("EXT_color_buffer_float"),h("WEBGL_clip_cull_distance"),h("OES_texture_float_linear"),h("EXT_color_buffer_half_float"),h("WEBGL_multisampled_render_to_texture"),h("WEBGL_render_shared_exponent")},get:function(m){const v=h(m);return v===null&&console.warn("THREE.WebGLRenderer: "+m+" extension not supported."),v}}}function kc(x,o,h,m){const v={},C=new WeakMap;function b(ue){const pe=ue.target;pe.index!==null&&o.remove(pe.index);for(const xe in pe.attributes)o.remove(pe.attributes[xe]);for(const xe in pe.morphAttributes){const Le=pe.morphAttributes[xe];for(let Se=0,Ee=Le.length;Se<Ee;Se++)o.remove(Le[Se])}pe.removeEventListener("dispose",b),delete v[pe.id];const ve=C.get(pe);ve&&(o.remove(ve),C.delete(pe)),m.releaseStatesOfGeometry(pe),pe.isInstancedBufferGeometry===!0&&delete pe._maxInstanceCount,h.memory.geometries--}function L(ue,pe){return v[pe.id]===!0||(pe.addEventListener("dispose",b),v[pe.id]=!0,h.memory.geometries++),pe}function W(ue){const pe=ue.attributes;for(const xe in pe)o.update(pe[xe],x.ARRAY_BUFFER);const ve=ue.morphAttributes;for(const xe in ve){const Le=ve[xe];for(let Se=0,Ee=Le.length;Se<Ee;Se++)o.update(Le[Se],x.ARRAY_BUFFER)}}function J(ue){const pe=[],ve=ue.index,xe=ue.attributes.position;let Le=0;if(ve!==null){const Ke=ve.array;Le=ve.version;for(let Ge=0,Ue=Ke.length;Ge<Ue;Ge+=3){const Ct=Ke[Ge+0],at=Ke[Ge+1],ft=Ke[Ge+2];pe.push(Ct,at,at,ft,ft,Ct)}}else if(xe!==void 0){const Ke=xe.array;Le=xe.version;for(let Ge=0,Ue=Ke.length/3-1;Ge<Ue;Ge+=3){const Ct=Ge+0,at=Ge+1,ft=Ge+2;pe.push(Ct,at,at,ft,ft,Ct)}}else return;const Se=new(Jl(pe)?ja:n1)(pe,1);Se.version=Le;const Ee=C.get(ue);Ee&&o.remove(Ee),C.set(ue,Se)}function re(ue){const pe=C.get(ue);if(pe){const ve=ue.index;ve!==null&&pe.version<ve.version&&J(ue)}else J(ue);return C.get(ue)}return{get:L,update:W,getWireframeAttribute:re}}function Vl(x,o,h){let m;function v(pe){m=pe}let C,b;function L(pe){C=pe.type,b=pe.bytesPerElement}function W(pe,ve){x.drawElements(m,ve,C,pe*b),h.update(ve,m,1)}function J(pe,ve,xe){xe!==0&&(x.drawElementsInstanced(m,ve,C,pe*b,xe),h.update(ve,m,xe))}function re(pe,ve,xe){if(xe===0)return;const Le=o.get("WEBGL_multi_draw");if(Le===null)for(let Se=0;Se<xe;Se++)this.render(pe[Se]/b,ve[Se]);else{Le.multiDrawElementsWEBGL(m,ve,0,C,pe,0,xe);let Se=0;for(let Ee=0;Ee<xe;Ee++)Se+=ve[Ee];h.update(Se,m,1)}}function ue(pe,ve,xe,Le){if(xe===0)return;const Se=o.get("WEBGL_multi_draw");if(Se===null)for(let Ee=0;Ee<pe.length;Ee++)J(pe[Ee]/b,ve[Ee],Le[Ee]);else{Se.multiDrawElementsInstancedWEBGL(m,ve,0,C,pe,0,Le,0,xe);let Ee=0;for(let Ke=0;Ke<xe;Ke++)Ee+=ve[Ke];for(let Ke=0;Ke<Le.length;Ke++)h.update(Ee,m,Le[Ke])}}this.setMode=v,this.setIndex=L,this.render=W,this.renderInstances=J,this.renderMultiDraw=re,this.renderMultiDrawInstances=ue}function Nc(x){const o={geometries:0,textures:0},h={frame:0,calls:0,triangles:0,points:0,lines:0};function m(C,b,L){switch(h.calls++,b){case x.TRIANGLES:h.triangles+=L*(C/3);break;case x.LINES:h.lines+=L*(C/2);break;case x.LINE_STRIP:h.lines+=L*(C-1);break;case x.LINE_LOOP:h.lines+=L*C;break;case x.POINTS:h.points+=L*C;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",b);break}}function v(){h.calls=0,h.triangles=0,h.points=0,h.lines=0}return{memory:o,render:h,programs:null,autoReset:!0,reset:v,update:m}}function Ju(x,o,h){const m=new WeakMap,v=new zr;function C(b,L,W){const J=b.morphTargetInfluences,re=L.morphAttributes.position||L.morphAttributes.normal||L.morphAttributes.color,ue=re!==void 0?re.length:0;let pe=m.get(L);if(pe===void 0||pe.count!==ue){let ve=function(){yt.dispose(),m.delete(L),L.removeEventListener("dispose",ve)};pe!==void 0&&pe.texture.dispose();const xe=L.morphAttributes.position!==void 0,Le=L.morphAttributes.normal!==void 0,Se=L.morphAttributes.color!==void 0,Ee=L.morphAttributes.position||[],Ke=L.morphAttributes.normal||[],Ge=L.morphAttributes.color||[];let Ue=0;xe===!0&&(Ue=1),Le===!0&&(Ue=2),Se===!0&&(Ue=3);let Ct=L.attributes.position.count*Ue,at=1;Ct>o.maxTextureSize&&(at=Math.ceil(Ct/o.maxTextureSize),Ct=o.maxTextureSize);const ft=new Float32Array(Ct*at*4*ue),yt=new hl(ft,Ct,at,ue);yt.type=Rs,yt.needsUpdate=!0;const et=Ue*4;for(let qe=0;qe<ue;qe++){const wt=Ee[qe],Ft=Ke[qe],Lt=Ge[qe],Gt=Ct*at*4*qe;for(let ti=0;ti<wt.count;ti++){const Ei=ti*et;xe===!0&&(v.fromBufferAttribute(wt,ti),ft[Gt+Ei+0]=v.x,ft[Gt+Ei+1]=v.y,ft[Gt+Ei+2]=v.z,ft[Gt+Ei+3]=0),Le===!0&&(v.fromBufferAttribute(Ft,ti),ft[Gt+Ei+4]=v.x,ft[Gt+Ei+5]=v.y,ft[Gt+Ei+6]=v.z,ft[Gt+Ei+7]=0),Se===!0&&(v.fromBufferAttribute(Lt,ti),ft[Gt+Ei+8]=v.x,ft[Gt+Ei+9]=v.y,ft[Gt+Ei+10]=v.z,ft[Gt+Ei+11]=Lt.itemSize===4?v.w:1)}}pe={count:ue,texture:yt,size:new vi(Ct,at)},m.set(L,pe),L.addEventListener("dispose",ve)}if(b.isInstancedMesh===!0&&b.morphTexture!==null)W.getUniforms().setValue(x,"morphTexture",b.morphTexture,h);else{let ve=0;for(let Le=0;Le<J.length;Le++)ve+=J[Le];const xe=L.morphTargetsRelative?1:1-ve;W.getUniforms().setValue(x,"morphTargetBaseInfluence",xe),W.getUniforms().setValue(x,"morphTargetInfluences",J)}W.getUniforms().setValue(x,"morphTargetsTexture",pe.texture,h),W.getUniforms().setValue(x,"morphTargetsTextureSize",pe.size)}return{update:C}}class Zu{constructor(o,h,m){if(this.renderer=o,this.DEFAULT_NUMVIEWS=2,this.maxNumViews=0,this.gl=m,this.extensions=h,this.available=this.extensions.has("OCULUS_multiview"),this.available){const C=this.extensions.get("OCULUS_multiview");this.maxNumViews=this.gl.getParameter(C.MAX_VIEWS_OVR),this.mat4=[],this.mat3=[],this.cameraArray=[];for(var v=0;v<this.maxNumViews;v++)this.mat4[v]=new on,this.mat3[v]=new Nn}}getCameraArray(o){return o.isArrayCamera?o.cameras:(this.cameraArray[0]=o,this.cameraArray)}updateCameraProjectionMatricesUniform(o,h){for(var m=this.getCameraArray(o),v=0;v<m.length;v++)this.mat4[v].copy(m[v].projectionMatrix);h.setValue(this.gl,"projectionMatrices",this.mat4)}updateCameraViewMatricesUniform(o,h){for(var m=this.getCameraArray(o),v=0;v<m.length;v++)this.mat4[v].copy(m[v].matrixWorldInverse);h.setValue(this.gl,"viewMatrices",this.mat4)}updateObjectMatricesUniforms(o,h,m){for(var v=this.getCameraArray(h),C=0;C<v.length;C++)this.mat4[C].multiplyMatrices(v[C].matrixWorldInverse,o.matrixWorld),this.mat3[C].getNormalMatrix(this.mat4[C]);m.setValue(this.gl,"modelViewMatrices",this.mat4),m.setValue(this.gl,"normalMatrices",this.mat3)}}function Kd(x,o,h,m){let v=new WeakMap;function C(W){const J=m.render.frame,re=W.geometry,ue=o.get(W,re);if(v.get(ue)!==J&&(o.update(ue),v.set(ue,J)),W.isInstancedMesh&&(W.hasEventListener("dispose",L)===!1&&W.addEventListener("dispose",L),v.get(W)!==J&&(h.update(W.instanceMatrix,x.ARRAY_BUFFER),W.instanceColor!==null&&h.update(W.instanceColor,x.ARRAY_BUFFER),v.set(W,J))),W.isSkinnedMesh){const pe=W.skeleton;v.get(pe)!==J&&(pe.update(),v.set(pe,J))}return ue}function b(){v=new WeakMap}function L(W){const J=W.target;J.removeEventListener("dispose",L),h.remove(J.instanceMatrix),J.instanceColor!==null&&h.remove(J.instanceColor)}return{update:C,dispose:b}}class z1 extends cs{constructor(o,h,m,v,C,b,L,W,J,re){if(re=re!==void 0?re:kt,re!==kt&&re!==di)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");m===void 0&&re===kt&&(m=zo),m===void 0&&re===di&&(m=L0),super(null,v,C,b,L,W,re,m,J),this.isDepthTexture=!0,this.image={width:o,height:h},this.magFilter=L!==void 0?L:Wi,this.minFilter=W!==void 0?W:Wi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(o){return super.copy(o),this.compareFunction=o.compareFunction,this}toJSON(o){const h=super.toJSON(o);return this.compareFunction!==null&&(h.compareFunction=this.compareFunction),h}}const pd=new cs,$u=new z1(1,1);$u.compareFunction=Xl;const ju=new hl,W1=new ar,K1=new ao,eh=[],Uc=[],th=new Float32Array(16),Hc=new Float32Array(9),X1=new Float32Array(4);function Cl(x,o,h){const m=x[0];if(m<=0||m>0)return x;const v=o*h;let C=eh[v];if(C===void 0&&(C=new Float32Array(v),eh[v]=C),o!==0){m.toArray(C,0);for(let b=1,L=0;b!==o;++b)L+=h,x[b].toArray(C,L)}return C}function zs(x,o){if(x.length!==o.length)return!1;for(let h=0,m=x.length;h<m;h++)if(x[h]!==o[h])return!1;return!0}function lo(x,o){for(let h=0,m=o.length;h<m;h++)x[h]=o[h]}function Gc(x,o){let h=Uc[o];h===void 0&&(h=new Int32Array(o),Uc[o]=h);for(let m=0;m!==o;++m)h[m]=x.allocateTextureUnit();return h}function Qc(x,o){const h=this.cache;h[0]!==o&&(x.uniform1f(this.addr,o),h[0]=o)}function Ad(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y)&&(x.uniform2f(this.addr,o.x,o.y),h[0]=o.x,h[1]=o.y);else{if(zs(h,o))return;x.uniform2fv(this.addr,o),lo(h,o)}}function Y1(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y||h[2]!==o.z)&&(x.uniform3f(this.addr,o.x,o.y,o.z),h[0]=o.x,h[1]=o.y,h[2]=o.z);else if(o.r!==void 0)(h[0]!==o.r||h[1]!==o.g||h[2]!==o.b)&&(x.uniform3f(this.addr,o.r,o.g,o.b),h[0]=o.r,h[1]=o.g,h[2]=o.b);else{if(zs(h,o))return;x.uniform3fv(this.addr,o),lo(h,o)}}function i0(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y||h[2]!==o.z||h[3]!==o.w)&&(x.uniform4f(this.addr,o.x,o.y,o.z,o.w),h[0]=o.x,h[1]=o.y,h[2]=o.z,h[3]=o.w);else{if(zs(h,o))return;x.uniform4fv(this.addr,o),lo(h,o)}}function Vc(x,o){const h=this.cache,m=o.elements;if(m===void 0){if(zs(h,o))return;x.uniformMatrix2fv(this.addr,!1,o),lo(h,o)}else{if(zs(h,m))return;X1.set(m),x.uniformMatrix2fv(this.addr,!1,X1),lo(h,m)}}function g(x,o){const h=this.cache,m=o.elements;if(m===void 0){if(zs(h,o))return;x.uniformMatrix3fv(this.addr,!1,o),lo(h,o)}else{if(zs(h,m))return;Hc.set(m),x.uniformMatrix3fv(this.addr,!1,Hc),lo(h,m)}}function y(x,o){const h=this.cache,m=o.elements;if(m===void 0){if(zs(h,o))return;x.uniformMatrix4fv(this.addr,!1,o),lo(h,o)}else{if(zs(h,m))return;th.set(m),x.uniformMatrix4fv(this.addr,!1,th),lo(h,m)}}function I(x,o){const h=this.cache;h[0]!==o&&(x.uniform1i(this.addr,o),h[0]=o)}function j(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y)&&(x.uniform2i(this.addr,o.x,o.y),h[0]=o.x,h[1]=o.y);else{if(zs(h,o))return;x.uniform2iv(this.addr,o),lo(h,o)}}function he(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y||h[2]!==o.z)&&(x.uniform3i(this.addr,o.x,o.y,o.z),h[0]=o.x,h[1]=o.y,h[2]=o.z);else{if(zs(h,o))return;x.uniform3iv(this.addr,o),lo(h,o)}}function be(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y||h[2]!==o.z||h[3]!==o.w)&&(x.uniform4i(this.addr,o.x,o.y,o.z,o.w),h[0]=o.x,h[1]=o.y,h[2]=o.z,h[3]=o.w);else{if(zs(h,o))return;x.uniform4iv(this.addr,o),lo(h,o)}}function ze(x,o){const h=this.cache;h[0]!==o&&(x.uniform1ui(this.addr,o),h[0]=o)}function pt(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y)&&(x.uniform2ui(this.addr,o.x,o.y),h[0]=o.x,h[1]=o.y);else{if(zs(h,o))return;x.uniform2uiv(this.addr,o),lo(h,o)}}function bt(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y||h[2]!==o.z)&&(x.uniform3ui(this.addr,o.x,o.y,o.z),h[0]=o.x,h[1]=o.y,h[2]=o.z);else{if(zs(h,o))return;x.uniform3uiv(this.addr,o),lo(h,o)}}function Zt(x,o){const h=this.cache;if(o.x!==void 0)(h[0]!==o.x||h[1]!==o.y||h[2]!==o.z||h[3]!==o.w)&&(x.uniform4ui(this.addr,o.x,o.y,o.z,o.w),h[0]=o.x,h[1]=o.y,h[2]=o.z,h[3]=o.w);else{if(zs(h,o))return;x.uniform4uiv(this.addr,o),lo(h,o)}}function Bi(x,o,h){const m=this.cache,v=h.allocateTextureUnit();m[0]!==v&&(x.uniform1i(this.addr,v),m[0]=v);const C=this.type===x.SAMPLER_2D_SHADOW?$u:pd;h.setTexture2D(o||C,v)}function Fi(x,o,h){const m=this.cache,v=h.allocateTextureUnit();m[0]!==v&&(x.uniform1i(this.addr,v),m[0]=v),h.setTexture3D(o||W1,v)}function _i(x,o,h){const m=this.cache,v=h.allocateTextureUnit();m[0]!==v&&(x.uniform1i(this.addr,v),m[0]=v),h.setTextureCube(o||K1,v)}function cn(x,o,h){const m=this.cache,v=h.allocateTextureUnit();m[0]!==v&&(x.uniform1i(this.addr,v),m[0]=v),h.setTexture2DArray(o||ju,v)}function mn(x){switch(x){case 5126:return Qc;case 35664:return Ad;case 35665:return Y1;case 35666:return i0;case 35674:return Vc;case 35675:return g;case 35676:return y;case 5124:case 35670:return I;case 35667:case 35671:return j;case 35668:case 35672:return he;case 35669:case 35673:return be;case 5125:return ze;case 36294:return pt;case 36295:return bt;case 36296:return Zt;case 35678:case 36198:case 36298:case 36306:case 35682:return Bi;case 35679:case 36299:case 36307:return Fi;case 35680:case 36300:case 36308:case 36293:return _i;case 36289:case 36303:case 36311:case 36292:return cn}}function Sn(x,o){x.uniform1fv(this.addr,o)}function Ws(x,o){const h=Cl(o,this.size,2);x.uniform2fv(this.addr,h)}function Wt(x,o){const h=Cl(o,this.size,3);x.uniform3fv(this.addr,h)}function Bt(x,o){const h=Cl(o,this.size,4);x.uniform4fv(this.addr,h)}function Xt(x,o){const h=Cl(o,this.size,4);x.uniformMatrix2fv(this.addr,!1,h)}function Pi(x,o){const h=Cl(o,this.size,9);x.uniformMatrix3fv(this.addr,!1,h)}function Mn(x,o){const h=Cl(o,this.size,16);x.uniformMatrix4fv(this.addr,!1,h)}function r(x,o){x.uniform1iv(this.addr,o)}function a(x,o){x.uniform2iv(this.addr,o)}function c(x,o){x.uniform3iv(this.addr,o)}function s(x,o){x.uniform4iv(this.addr,o)}function n(x,o){x.uniform1uiv(this.addr,o)}function t(x,o){x.uniform2uiv(this.addr,o)}function u(x,o){x.uniform3uiv(this.addr,o)}function l(x,o){x.uniform4uiv(this.addr,o)}function d(x,o,h){const m=this.cache,v=o.length,C=Gc(h,v);zs(m,C)||(x.uniform1iv(this.addr,C),lo(m,C));for(let b=0;b!==v;++b)h.setTexture2D(o[b]||pd,C[b])}function f(x,o,h){const m=this.cache,v=o.length,C=Gc(h,v);zs(m,C)||(x.uniform1iv(this.addr,C),lo(m,C));for(let b=0;b!==v;++b)h.setTexture3D(o[b]||W1,C[b])}function A(x,o,h){const m=this.cache,v=o.length,C=Gc(h,v);zs(m,C)||(x.uniform1iv(this.addr,C),lo(m,C));for(let b=0;b!==v;++b)h.setTextureCube(o[b]||K1,C[b])}function E(x,o,h){const m=this.cache,v=o.length,C=Gc(h,v);zs(m,C)||(x.uniform1iv(this.addr,C),lo(m,C));for(let b=0;b!==v;++b)h.setTexture2DArray(o[b]||ju,C[b])}function M(x){switch(x){case 5126:return Sn;case 35664:return Ws;case 35665:return Wt;case 35666:return Bt;case 35674:return Xt;case 35675:return Pi;case 35676:return Mn;case 5124:case 35670:return r;case 35667:case 35671:return a;case 35668:case 35672:return c;case 35669:case 35673:return s;case 5125:return n;case 36294:return t;case 36295:return u;case 36296:return l;case 35678:case 36198:case 36298:case 36306:case 35682:return d;case 35679:case 36299:case 36307:return f;case 35680:case 36300:case 36308:case 36293:return A;case 36289:case 36303:case 36311:case 36292:return E}}class B{constructor(o,h,m){this.id=o,this.addr=m,this.cache=[],this.type=h.type,this.setValue=mn(h.type)}}class H{constructor(o,h,m){this.id=o,this.addr=m,this.cache=[],this.type=h.type,this.size=h.size,this.setValue=M(h.type)}}class le{constructor(o){this.id=o,this.seq=[],this.map={}}setValue(o,h,m){const v=this.seq;for(let C=0,b=v.length;C!==b;++C){const L=v[C];L.setValue(o,h[L.id],m)}}}const ee=/(\w+)(\])?(\[|\.)?/g;function Y(x,o){x.seq.push(o),x.map[o.id]=o}function q(x,o,h){const m=x.name,v=m.length;for(ee.lastIndex=0;;){const C=ee.exec(m),b=ee.lastIndex;let L=C[1];const W=C[2]==="]",J=C[3];if(W&&(L=L|0),J===void 0||J==="["&&b+2===v){Y(h,J===void 0?new B(L,x,o):new H(L,x,o));break}else{let ue=h.map[L];ue===void 0&&(ue=new le(L),Y(h,ue)),h=ue}}}class se{constructor(o,h){this.seq=[],this.map={};const m=o.getProgramParameter(h,o.ACTIVE_UNIFORMS);for(let v=0;v<m;++v){const C=o.getActiveUniform(h,v),b=o.getUniformLocation(h,C.name);q(C,b,this)}}setValue(o,h,m,v){const C=this.map[h];C!==void 0&&C.setValue(o,m,v)}setOptional(o,h,m){const v=h[m];v!==void 0&&this.setValue(o,m,v)}static upload(o,h,m,v){for(let C=0,b=h.length;C!==b;++C){const L=h[C],W=m[L.id];W.needsUpdate!==!1&&L.setValue(o,W.value,v)}}static seqWithValue(o,h){const m=[];for(let v=0,C=o.length;v!==C;++v){const b=o[v];b.id in h&&m.push(b)}return m}}function Ae(x,o,h){const m=x.createShader(o);return x.shaderSource(m,h),x.compileShader(m),m}const ce=37297;let $=0;function X(x,o){const h=x.split(`
`),m=[],v=Math.max(o-6,0),C=Math.min(o+6,h.length);for(let b=v;b<C;b++){const L=b+1;m.push(`${L===o?">":" "} ${L}: ${h[b]}`)}return m.join(`
`)}function Be(x){const o=jr.getPrimaries(jr.workingColorSpace),h=jr.getPrimaries(x);let m;switch(o===h?m="":o===ul&&h===pa?m="LinearDisplayP3ToLinearSRGB":o===pa&&h===ul&&(m="LinearSRGBToLinearDisplayP3"),x){case xo:case fa:return[m,"LinearTransferOETF"];case Fr:case ll:return[m,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",x),[m,"LinearTransferOETF"]}}function gt(x,o,h){const m=x.getShaderParameter(o,x.COMPILE_STATUS),v=x.getShaderInfoLog(o).trim();if(m&&v==="")return"";const C=/ERROR: 0:(\d+)/.exec(v);if(C){const b=parseInt(C[1]);return h.toUpperCase()+`

`+v+`

`+X(x.getShaderSource(o),b)}else return v}function xt(x,o){const h=Be(o);return`vec4 ${x}( vec4 value ) { return ${h[0]}( ${h[1]}( value ) ); }`}function It(x,o){let h;switch(o){case Co:h="Linear";break;case Us:h="Reinhard";break;case Jr:h="OptimizedCineon";break;case Ti:h="ACESFilmic";break;case Xe:h="AgX";break;case lt:h="Neutral";break;case Ye:h="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",o),h="Linear"}return"vec3 "+x+"( vec3 color ) { return "+h+"ToneMapping( color ); }"}function Nt(x){return[x.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",x.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(qt).join(`
`)}function Et(x){const o=[];for(const h in x){const m=x[h];m!==!1&&o.push("#define "+h+" "+m)}return o.join(`
`)}function gi(x,o){const h={},m=x.getProgramParameter(o,x.ACTIVE_ATTRIBUTES);for(let v=0;v<m;v++){const C=x.getActiveAttrib(o,v),b=C.name;let L=1;C.type===x.FLOAT_MAT2&&(L=2),C.type===x.FLOAT_MAT3&&(L=3),C.type===x.FLOAT_MAT4&&(L=4),h[b]={type:C.type,location:x.getAttribLocation(o,b),locationSize:L}}return h}function qt(x){return x!==""}function ui(x,o){const h=o.numSpotLightShadows+o.numSpotLightMaps-o.numSpotLightShadowsWithMaps;return x.replace(/NUM_DIR_LIGHTS/g,o.numDirLights).replace(/NUM_SPOT_LIGHTS/g,o.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,o.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,h).replace(/NUM_RECT_AREA_LIGHTS/g,o.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,o.numPointLights).replace(/NUM_HEMI_LIGHTS/g,o.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,o.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,o.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,o.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,o.numPointLightShadows)}function yi(x,o){return x.replace(/NUM_CLIPPING_PLANES/g,o.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,o.numClippingPlanes-o.numClipIntersection)}const oi=/^[ \t]*#include +<([\w\d./]+)>/gm;function ut(x){return x.replace(oi,mt)}const Kt=new Map;function mt(x,o){let h=Un[o];if(h===void 0){const m=Kt.get(o);if(m!==void 0)h=Un[m],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',o,m);else throw new Error("Can not resolve #include <"+o+">")}return ut(h)}const gn=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ki(x){return x.replace(gn,hr)}function hr(x,o,h,m){let v="";for(let C=parseInt(o);C<parseInt(h);C++)v+=m.replace(/\[\s*i\s*\]/g,"[ "+C+" ]").replace(/UNROLLED_LOOP_INDEX/g,C);return v}function Ur(x){let o=`precision ${x.precision} float;
	precision ${x.precision} int;
	precision ${x.precision} sampler2D;
	precision ${x.precision} samplerCube;
	precision ${x.precision} sampler3D;
	precision ${x.precision} sampler2DArray;
	precision ${x.precision} sampler2DShadow;
	precision ${x.precision} samplerCubeShadow;
	precision ${x.precision} sampler2DArrayShadow;
	precision ${x.precision} isampler2D;
	precision ${x.precision} isampler3D;
	precision ${x.precision} isamplerCube;
	precision ${x.precision} isampler2DArray;
	precision ${x.precision} usampler2D;
	precision ${x.precision} usampler3D;
	precision ${x.precision} usamplerCube;
	precision ${x.precision} usampler2DArray;
	`;return x.precision==="highp"?o+=`
#define HIGH_PRECISION`:x.precision==="mediump"?o+=`
#define MEDIUM_PRECISION`:x.precision==="lowp"&&(o+=`
#define LOW_PRECISION`),o}function Ar(x){let o="SHADOWMAP_TYPE_BASIC";return x.shadowMapType===F?o="SHADOWMAP_TYPE_PCF":x.shadowMapType===N?o="SHADOWMAP_TYPE_PCF_SOFT":x.shadowMapType===k&&(o="SHADOWMAP_TYPE_VSM"),o}function ai(x){let o="ENVMAP_TYPE_CUBE";if(x.envMap)switch(x.envMapMode){case Ie:case ae:o="ENVMAP_TYPE_CUBE";break;case Ze:o="ENVMAP_TYPE_CUBE_UV";break}return o}function Si(x){let o="ENVMAP_MODE_REFLECTION";if(x.envMap)switch(x.envMapMode){case ae:o="ENVMAP_MODE_REFRACTION";break}return o}function Vi(x){let o="ENVMAP_BLENDING_NONE";if(x.envMap)switch(x.combine){case mr:o="ENVMAP_BLENDING_MULTIPLY";break;case Wn:o="ENVMAP_BLENDING_MIX";break;case Ms:o="ENVMAP_BLENDING_ADD";break}return o}function Mr(x){const o=x.envMapCubeUVHeight;if(o===null)return null;const h=Math.log2(o)-2,m=1/o;return{texelWidth:1/(3*Math.max(Math.pow(2,h),7*16)),texelHeight:m,maxMip:h}}function Fn(x,o,h,m){const v=x.getContext(),C=h.defines;let b=h.vertexShader,L=h.fragmentShader;const W=Ar(h),J=ai(h),re=Si(h),ue=Vi(h),pe=Mr(h),ve=Nt(h),xe=Et(C),Le=v.createProgram();let Se,Ee,Ke=h.glslVersion?"#version "+h.glslVersion+`
`:"";const Ge=h.numMultiviewViews;h.isRawShaderMaterial?(Se=["#define SHADER_TYPE "+h.shaderType,"#define SHADER_NAME "+h.shaderName,xe].filter(qt).join(`
`),Se.length>0&&(Se+=`
`),Ee=["#define SHADER_TYPE "+h.shaderType,"#define SHADER_NAME "+h.shaderName,xe].filter(qt).join(`
`),Ee.length>0&&(Ee+=`
`)):(Se=[Ur(h),"#define SHADER_TYPE "+h.shaderType,"#define SHADER_NAME "+h.shaderName,xe,h.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",h.batching?"#define USE_BATCHING":"",h.instancing?"#define USE_INSTANCING":"",h.instancingColor?"#define USE_INSTANCING_COLOR":"",h.instancingMorph?"#define USE_INSTANCING_MORPH":"",h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.map?"#define USE_MAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+re:"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",h.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",h.displacementMap?"#define USE_DISPLACEMENTMAP":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.anisotropy?"#define USE_ANISOTROPY":"",h.anisotropyMap?"#define USE_ANISOTROPYMAP":"",h.clearcoatMap?"#define USE_CLEARCOATMAP":"",h.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",h.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",h.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.alphaHash?"#define USE_ALPHAHASH":"",h.transmission?"#define USE_TRANSMISSION":"",h.transmissionMap?"#define USE_TRANSMISSIONMAP":"",h.thicknessMap?"#define USE_THICKNESSMAP":"",h.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",h.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",h.mapUv?"#define MAP_UV "+h.mapUv:"",h.alphaMapUv?"#define ALPHAMAP_UV "+h.alphaMapUv:"",h.lightMapUv?"#define LIGHTMAP_UV "+h.lightMapUv:"",h.aoMapUv?"#define AOMAP_UV "+h.aoMapUv:"",h.emissiveMapUv?"#define EMISSIVEMAP_UV "+h.emissiveMapUv:"",h.bumpMapUv?"#define BUMPMAP_UV "+h.bumpMapUv:"",h.normalMapUv?"#define NORMALMAP_UV "+h.normalMapUv:"",h.displacementMapUv?"#define DISPLACEMENTMAP_UV "+h.displacementMapUv:"",h.metalnessMapUv?"#define METALNESSMAP_UV "+h.metalnessMapUv:"",h.roughnessMapUv?"#define ROUGHNESSMAP_UV "+h.roughnessMapUv:"",h.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+h.anisotropyMapUv:"",h.clearcoatMapUv?"#define CLEARCOATMAP_UV "+h.clearcoatMapUv:"",h.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+h.clearcoatNormalMapUv:"",h.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+h.clearcoatRoughnessMapUv:"",h.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+h.iridescenceMapUv:"",h.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+h.iridescenceThicknessMapUv:"",h.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+h.sheenColorMapUv:"",h.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+h.sheenRoughnessMapUv:"",h.specularMapUv?"#define SPECULARMAP_UV "+h.specularMapUv:"",h.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+h.specularColorMapUv:"",h.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+h.specularIntensityMapUv:"",h.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+h.transmissionMapUv:"",h.thicknessMapUv?"#define THICKNESSMAP_UV "+h.thicknessMapUv:"",h.vertexTangents&&h.flatShading===!1?"#define USE_TANGENT":"",h.vertexColors?"#define USE_COLOR":"",h.vertexAlphas?"#define USE_COLOR_ALPHA":"",h.vertexUv1s?"#define USE_UV1":"",h.vertexUv2s?"#define USE_UV2":"",h.vertexUv3s?"#define USE_UV3":"",h.pointsUvs?"#define USE_POINTS_UV":"",h.flatShading?"#define FLAT_SHADED":"",h.skinning?"#define USE_SKINNING":"",h.morphTargets?"#define USE_MORPHTARGETS":"",h.morphNormals&&h.flatShading===!1?"#define USE_MORPHNORMALS":"",h.morphColors?"#define USE_MORPHCOLORS":"",h.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE":"",h.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+h.morphTextureStride:"",h.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+h.morphTargetsCount:"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+W:"",h.sizeAttenuation?"#define USE_SIZEATTENUATION":"",h.numLightProbes>0?"#define USE_LIGHT_PROBES":"",h.useLegacyLights?"#define LEGACY_LIGHTS":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(qt).join(`
`),Ee=[Ur(h),"#define SHADER_TYPE "+h.shaderType,"#define SHADER_NAME "+h.shaderName,xe,h.useFog&&h.fog?"#define USE_FOG":"",h.useFog&&h.fogExp2?"#define FOG_EXP2":"",h.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",h.map?"#define USE_MAP":"",h.matcap?"#define USE_MATCAP":"",h.envMap?"#define USE_ENVMAP":"",h.envMap?"#define "+J:"",h.envMap?"#define "+re:"",h.envMap?"#define "+ue:"",pe?"#define CUBEUV_TEXEL_WIDTH "+pe.texelWidth:"",pe?"#define CUBEUV_TEXEL_HEIGHT "+pe.texelHeight:"",pe?"#define CUBEUV_MAX_MIP "+pe.maxMip+".0":"",h.lightMap?"#define USE_LIGHTMAP":"",h.aoMap?"#define USE_AOMAP":"",h.bumpMap?"#define USE_BUMPMAP":"",h.normalMap?"#define USE_NORMALMAP":"",h.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",h.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",h.emissiveMap?"#define USE_EMISSIVEMAP":"",h.anisotropy?"#define USE_ANISOTROPY":"",h.anisotropyMap?"#define USE_ANISOTROPYMAP":"",h.clearcoat?"#define USE_CLEARCOAT":"",h.clearcoatMap?"#define USE_CLEARCOATMAP":"",h.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",h.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",h.dispersion?"#define USE_DISPERSION":"",h.iridescence?"#define USE_IRIDESCENCE":"",h.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",h.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",h.specularMap?"#define USE_SPECULARMAP":"",h.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",h.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",h.roughnessMap?"#define USE_ROUGHNESSMAP":"",h.metalnessMap?"#define USE_METALNESSMAP":"",h.alphaMap?"#define USE_ALPHAMAP":"",h.alphaTest?"#define USE_ALPHATEST":"",h.alphaHash?"#define USE_ALPHAHASH":"",h.sheen?"#define USE_SHEEN":"",h.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",h.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",h.transmission?"#define USE_TRANSMISSION":"",h.transmissionMap?"#define USE_TRANSMISSIONMAP":"",h.thicknessMap?"#define USE_THICKNESSMAP":"",h.vertexTangents&&h.flatShading===!1?"#define USE_TANGENT":"",h.vertexColors||h.instancingColor?"#define USE_COLOR":"",h.vertexAlphas?"#define USE_COLOR_ALPHA":"",h.vertexUv1s?"#define USE_UV1":"",h.vertexUv2s?"#define USE_UV2":"",h.vertexUv3s?"#define USE_UV3":"",h.pointsUvs?"#define USE_POINTS_UV":"",h.gradientMap?"#define USE_GRADIENTMAP":"",h.flatShading?"#define FLAT_SHADED":"",h.doubleSided?"#define DOUBLE_SIDED":"",h.flipSided?"#define FLIP_SIDED":"",h.shadowMapEnabled?"#define USE_SHADOWMAP":"",h.shadowMapEnabled?"#define "+W:"",h.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",h.numLightProbes>0?"#define USE_LIGHT_PROBES":"",h.useLegacyLights?"#define LEGACY_LIGHTS":"",h.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",h.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",h.toneMapping!==ts?"#define TONE_MAPPING":"",h.toneMapping!==ts?Un.tonemapping_pars_fragment:"",h.toneMapping!==ts?It("toneMapping",h.toneMapping):"",h.dithering?"#define DITHERING":"",h.opaque?"#define OPAQUE":"",Un.colorspace_pars_fragment,xt("linearToOutputTexel",h.outputColorSpace),h.useDepthPacking?"#define DEPTH_PACKING "+h.depthPacking:"",`
`].filter(qt).join(`
`)),b=ut(b),b=ui(b,h),b=yi(b,h),L=ut(L),L=ui(L,h),L=yi(L,h),b=Ki(b),L=Ki(L),h.isRawShaderMaterial!==!0&&(Ke=`#version 300 es
`,Se=[ve,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Se,Ee=["#define varying in",h.glslVersion===M1?"":"layout(location = 0) out highp vec4 pc_fragColor;",h.glslVersion===M1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Ee,Ge>0&&(Se=["#extension GL_OVR_multiview : require","layout(num_views = "+Ge+") in;","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+Se,Se=Se.replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join(`
`),["uniform mat4 modelViewMatrices["+Ge+"];","uniform mat4 projectionMatrices["+Ge+"];","uniform mat4 viewMatrices["+Ge+"];","uniform mat3 normalMatrices["+Ge+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join(`
`)),Ee=["#extension GL_OVR_multiview : require","#define VIEW_ID gl_ViewID_OVR"].join(`
`)+`
`+Ee,Ee=Ee.replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+Ge+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join(`
`))));const Ue=Ke+Se+b,Ct=Ke+Ee+L,at=Ae(v,v.VERTEX_SHADER,Ue),ft=Ae(v,v.FRAGMENT_SHADER,Ct);v.attachShader(Le,at),v.attachShader(Le,ft),h.index0AttributeName!==void 0?v.bindAttribLocation(Le,0,h.index0AttributeName):h.morphTargets===!0&&v.bindAttribLocation(Le,0,"position"),v.linkProgram(Le);function yt(Ft){if(x.debug.checkShaderErrors){const Lt=v.getProgramInfoLog(Le).trim(),Gt=v.getShaderInfoLog(at).trim(),ti=v.getShaderInfoLog(ft).trim();let Ei=!0,$i=!0;if(v.getProgramParameter(Le,v.LINK_STATUS)===!1)if(Ei=!1,typeof x.debug.onShaderError=="function")x.debug.onShaderError(v,Le,at,ft);else{const ri=gt(v,at,"vertex"),zi=gt(v,ft,"fragment");console.error("THREE.WebGLProgram: Shader Error "+v.getError()+" - VALIDATE_STATUS "+v.getProgramParameter(Le,v.VALIDATE_STATUS)+`

Material Name: `+Ft.name+`
Material Type: `+Ft.type+`

Program Info Log: `+Lt+`
`+ri+`
`+zi)}else Lt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Lt):(Gt===""||ti==="")&&($i=!1);$i&&(Ft.diagnostics={runnable:Ei,programLog:Lt,vertexShader:{log:Gt,prefix:Se},fragmentShader:{log:ti,prefix:Ee}})}v.deleteShader(at),v.deleteShader(ft),et=new se(v,Le),qe=gi(v,Le)}let et;this.getUniforms=function(){return et===void 0&&yt(this),et};let qe;this.getAttributes=function(){return qe===void 0&&yt(this),qe};let wt=h.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return wt===!1&&(wt=v.getProgramParameter(Le,ce)),wt},this.destroy=function(){m.releaseStatesOfProgram(this),v.deleteProgram(Le),this.program=void 0},this.type=h.shaderType,this.name=h.shaderName,this.id=$++,this.cacheKey=o,this.usedTimes=1,this.program=Le,this.vertexShader=at,this.fragmentShader=ft,this.numMultiviewViews=Ge,this}let Ua=0;class Q0{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(o){const h=o.vertexShader,m=o.fragmentShader,v=this._getShaderStage(h),C=this._getShaderStage(m),b=this._getShaderCacheForMaterial(o);return b.has(v)===!1&&(b.add(v),v.usedTimes++),b.has(C)===!1&&(b.add(C),C.usedTimes++),this}remove(o){const h=this.materialCache.get(o);for(const m of h)m.usedTimes--,m.usedTimes===0&&this.shaderCache.delete(m.code);return this.materialCache.delete(o),this}getVertexShaderID(o){return this._getShaderStage(o.vertexShader).id}getFragmentShaderID(o){return this._getShaderStage(o.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(o){const h=this.materialCache;let m=h.get(o);return m===void 0&&(m=new Set,h.set(o,m)),m}_getShaderStage(o){const h=this.shaderCache;let m=h.get(o);return m===void 0&&(m=new md(o),h.set(o,m)),m}}class md{constructor(o){this.id=Ua++,this.code=o,this.usedTimes=0}}function gd(x,o,h,m,v,C,b){const L=new xa,W=new Q0,J=new Set,re=[],ue=v.logarithmicDepthBuffer,pe=v.vertexTextures;let ve=v.precision;const xe={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Le(et){return J.add(et),et===0?"uv":`uv${et}`}function Se(et,qe,wt,Ft,Lt){const Gt=Ft.fog,ti=Lt.geometry,Ei=et.isMeshStandardMaterial?Ft.environment:null,$i=(et.isMeshStandardMaterial?h:o).get(et.envMap||Ei),ri=$i&&$i.mapping===Ze?$i.image.height:null,zi=xe[et.type];et.precision!==null&&(ve=v.getMaxPrecision(et.precision),ve!==et.precision&&console.warn("THREE.WebGLProgram.getParameters:",et.precision,"not supported, using",ve,"instead."));const Yi=ti.morphAttributes.position||ti.morphAttributes.normal||ti.morphAttributes.color,Rn=Yi!==void 0?Yi.length:0;let Br=0;ti.morphAttributes.position!==void 0&&(Br=1),ti.morphAttributes.normal!==void 0&&(Br=2),ti.morphAttributes.color!==void 0&&(Br=3);let As,Ks,hs,Ds;if(zi){const d0=h0[zi];As=d0.vertexShader,Ks=d0.fragmentShader}else As=et.vertexShader,Ks=et.fragmentShader,W.update(et),hs=W.getVertexShaderID(et),Ds=W.getFragmentShaderID(et);const Pn=x.getRenderTarget(),xi=Pn&&Pn.isWebGLMultiviewRenderTarget?Pn.numViews:0,en=Lt.isInstancedMesh===!0,ln=Lt.isBatchedMesh===!0,Qt=!!et.map,Mi=!!et.matcap,fi=!!$i,Gi=!!et.aoMap,Hi=!!et.lightMap,ki=!!et.bumpMap,hn=!!et.normalMap,Cn=!!et.displacementMap,pr=!!et.emissiveMap,Cr=!!et.metalnessMap,ds=!!et.roughnessMap,wo=et.anisotropy>0,Xs=et.clearcoat>0,vt=et.dispersion>0,Je=et.iridescence>0,li=et.sheen>0,wi=et.transmission>0,Li=wo&&!!et.anisotropyMap,bi=Xs&&!!et.clearcoatMap,Hn=Xs&&!!et.clearcoatNormalMap,ji=Xs&&!!et.clearcoatRoughnessMap,_n=Je&&!!et.iridescenceMap,_s=Je&&!!et.iridescenceThicknessMap,xn=li&&!!et.sheenColorMap,Vn=li&&!!et.sheenRoughnessMap,Tr=!!et.specularMap,sr=!!et.specularColorMap,Tt=!!et.specularIntensityMap,Ni=wi&&!!et.transmissionMap,qi=wi&&!!et.thicknessMap,Gn=!!et.gradientMap,yn=!!et.alphaMap,Rr=et.alphaTest>0,wn=!!et.alphaHash,dn=!!et.extensions;let Hr=ts;et.toneMapped&&(Pn===null||Pn.isXRRenderTarget===!0)&&(Hr=x.toneMapping);const lr={shaderID:zi,shaderType:et.type,shaderName:et.name,vertexShader:As,fragmentShader:Ks,defines:et.defines,customVertexShaderID:hs,customFragmentShaderID:Ds,isRawShaderMaterial:et.isRawShaderMaterial===!0,glslVersion:et.glslVersion,precision:ve,batching:ln,instancing:en,instancingColor:en&&Lt.instanceColor!==null,instancingMorph:en&&Lt.morphTexture!==null,supportsVertexTextures:pe,numMultiviewViews:xi,outputColorSpace:Pn===null?x.outputColorSpace:Pn.isXRRenderTarget===!0?Pn.texture.colorSpace:xo,alphaToCoverage:!!et.alphaToCoverage,map:Qt,matcap:Mi,envMap:fi,envMapMode:fi&&$i.mapping,envMapCubeUVHeight:ri,aoMap:Gi,lightMap:Hi,bumpMap:ki,normalMap:hn,displacementMap:pe&&Cn,emissiveMap:pr,normalMapObjectSpace:hn&&et.normalMapType===M0,normalMapTangentSpace:hn&&et.normalMapType===_o,metalnessMap:Cr,roughnessMap:ds,anisotropy:wo,anisotropyMap:Li,clearcoat:Xs,clearcoatMap:bi,clearcoatNormalMap:Hn,clearcoatRoughnessMap:ji,dispersion:vt,iridescence:Je,iridescenceMap:_n,iridescenceThicknessMap:_s,sheen:li,sheenColorMap:xn,sheenRoughnessMap:Vn,specularMap:Tr,specularColorMap:sr,specularIntensityMap:Tt,transmission:wi,transmissionMap:Ni,thicknessMap:qi,gradientMap:Gn,opaque:et.transparent===!1&&et.blending===de&&et.alphaToCoverage===!1,alphaMap:yn,alphaTest:Rr,alphaHash:wn,combine:et.combine,mapUv:Qt&&Le(et.map.channel),aoMapUv:Gi&&Le(et.aoMap.channel),lightMapUv:Hi&&Le(et.lightMap.channel),bumpMapUv:ki&&Le(et.bumpMap.channel),normalMapUv:hn&&Le(et.normalMap.channel),displacementMapUv:Cn&&Le(et.displacementMap.channel),emissiveMapUv:pr&&Le(et.emissiveMap.channel),metalnessMapUv:Cr&&Le(et.metalnessMap.channel),roughnessMapUv:ds&&Le(et.roughnessMap.channel),anisotropyMapUv:Li&&Le(et.anisotropyMap.channel),clearcoatMapUv:bi&&Le(et.clearcoatMap.channel),clearcoatNormalMapUv:Hn&&Le(et.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ji&&Le(et.clearcoatRoughnessMap.channel),iridescenceMapUv:_n&&Le(et.iridescenceMap.channel),iridescenceThicknessMapUv:_s&&Le(et.iridescenceThicknessMap.channel),sheenColorMapUv:xn&&Le(et.sheenColorMap.channel),sheenRoughnessMapUv:Vn&&Le(et.sheenRoughnessMap.channel),specularMapUv:Tr&&Le(et.specularMap.channel),specularColorMapUv:sr&&Le(et.specularColorMap.channel),specularIntensityMapUv:Tt&&Le(et.specularIntensityMap.channel),transmissionMapUv:Ni&&Le(et.transmissionMap.channel),thicknessMapUv:qi&&Le(et.thicknessMap.channel),alphaMapUv:yn&&Le(et.alphaMap.channel),vertexTangents:!!ti.attributes.tangent&&(hn||wo),vertexColors:et.vertexColors,vertexAlphas:et.vertexColors===!0&&!!ti.attributes.color&&ti.attributes.color.itemSize===4,pointsUvs:Lt.isPoints===!0&&!!ti.attributes.uv&&(Qt||yn),fog:!!Gt,useFog:et.fog===!0,fogExp2:!!Gt&&Gt.isFogExp2,flatShading:et.flatShading===!0,sizeAttenuation:et.sizeAttenuation===!0,logarithmicDepthBuffer:ue,skinning:Lt.isSkinnedMesh===!0,morphTargets:ti.morphAttributes.position!==void 0,morphNormals:ti.morphAttributes.normal!==void 0,morphColors:ti.morphAttributes.color!==void 0,morphTargetsCount:Rn,morphTextureStride:Br,numDirLights:qe.directional.length,numPointLights:qe.point.length,numSpotLights:qe.spot.length,numSpotLightMaps:qe.spotLightMap.length,numRectAreaLights:qe.rectArea.length,numHemiLights:qe.hemi.length,numDirLightShadows:qe.directionalShadowMap.length,numPointLightShadows:qe.pointShadowMap.length,numSpotLightShadows:qe.spotShadowMap.length,numSpotLightShadowsWithMaps:qe.numSpotLightShadowsWithMaps,numLightProbes:qe.numLightProbes,numClippingPlanes:b.numPlanes,numClipIntersection:b.numIntersection,dithering:et.dithering,shadowMapEnabled:x.shadowMap.enabled&&wt.length>0,shadowMapType:x.shadowMap.type,toneMapping:Hr,useLegacyLights:x._useLegacyLights,decodeVideoTexture:Qt&&et.map.isVideoTexture===!0&&jr.getTransfer(et.map.colorSpace)===$r,premultipliedAlpha:et.premultipliedAlpha,doubleSided:et.side===ne,flipSided:et.side===Z,useDepthPacking:et.depthPacking>=0,depthPacking:et.depthPacking||0,index0AttributeName:et.index0AttributeName,extensionClipCullDistance:dn&&et.extensions.clipCullDistance===!0&&m.has("WEBGL_clip_cull_distance"),extensionMultiDraw:dn&&et.extensions.multiDraw===!0&&m.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:m.has("KHR_parallel_shader_compile"),customProgramCacheKey:et.customProgramCacheKey()};return lr.vertexUv1s=J.has(1),lr.vertexUv2s=J.has(2),lr.vertexUv3s=J.has(3),J.clear(),lr}function Ee(et){const qe=[];if(et.shaderID?qe.push(et.shaderID):(qe.push(et.customVertexShaderID),qe.push(et.customFragmentShaderID)),et.defines!==void 0)for(const wt in et.defines)qe.push(wt),qe.push(et.defines[wt]);return et.isRawShaderMaterial===!1&&(Ke(qe,et),Ge(qe,et),qe.push(x.outputColorSpace)),qe.push(et.customProgramCacheKey),qe.join()}function Ke(et,qe){et.push(qe.precision),et.push(qe.outputColorSpace),et.push(qe.envMapMode),et.push(qe.envMapCubeUVHeight),et.push(qe.mapUv),et.push(qe.alphaMapUv),et.push(qe.lightMapUv),et.push(qe.aoMapUv),et.push(qe.bumpMapUv),et.push(qe.normalMapUv),et.push(qe.displacementMapUv),et.push(qe.emissiveMapUv),et.push(qe.metalnessMapUv),et.push(qe.roughnessMapUv),et.push(qe.anisotropyMapUv),et.push(qe.clearcoatMapUv),et.push(qe.clearcoatNormalMapUv),et.push(qe.clearcoatRoughnessMapUv),et.push(qe.iridescenceMapUv),et.push(qe.iridescenceThicknessMapUv),et.push(qe.sheenColorMapUv),et.push(qe.sheenRoughnessMapUv),et.push(qe.specularMapUv),et.push(qe.specularColorMapUv),et.push(qe.specularIntensityMapUv),et.push(qe.transmissionMapUv),et.push(qe.thicknessMapUv),et.push(qe.combine),et.push(qe.fogExp2),et.push(qe.sizeAttenuation),et.push(qe.morphTargetsCount),et.push(qe.morphAttributeCount),et.push(qe.numDirLights),et.push(qe.numPointLights),et.push(qe.numSpotLights),et.push(qe.numSpotLightMaps),et.push(qe.numHemiLights),et.push(qe.numRectAreaLights),et.push(qe.numDirLightShadows),et.push(qe.numPointLightShadows),et.push(qe.numSpotLightShadows),et.push(qe.numSpotLightShadowsWithMaps),et.push(qe.numLightProbes),et.push(qe.shadowMapType),et.push(qe.toneMapping),et.push(qe.numClippingPlanes),et.push(qe.numClipIntersection),et.push(qe.depthPacking)}function Ge(et,qe){L.disableAll(),qe.supportsVertexTextures&&L.enable(0),qe.instancing&&L.enable(1),qe.instancingColor&&L.enable(2),qe.instancingMorph&&L.enable(3),qe.matcap&&L.enable(4),qe.envMap&&L.enable(5),qe.normalMapObjectSpace&&L.enable(6),qe.normalMapTangentSpace&&L.enable(7),qe.clearcoat&&L.enable(8),qe.iridescence&&L.enable(9),qe.alphaTest&&L.enable(10),qe.vertexColors&&L.enable(11),qe.vertexAlphas&&L.enable(12),qe.vertexUv1s&&L.enable(13),qe.vertexUv2s&&L.enable(14),qe.vertexUv3s&&L.enable(15),qe.vertexTangents&&L.enable(16),qe.anisotropy&&L.enable(17),qe.alphaHash&&L.enable(18),qe.batching&&L.enable(19),qe.dispersion&&L.enable(20),et.push(L.mask),L.disableAll(),qe.fog&&L.enable(0),qe.useFog&&L.enable(1),qe.flatShading&&L.enable(2),qe.logarithmicDepthBuffer&&L.enable(3),qe.skinning&&L.enable(4),qe.morphTargets&&L.enable(5),qe.morphNormals&&L.enable(6),qe.morphColors&&L.enable(7),qe.premultipliedAlpha&&L.enable(8),qe.shadowMapEnabled&&L.enable(9),qe.useLegacyLights&&L.enable(10),qe.doubleSided&&L.enable(11),qe.flipSided&&L.enable(12),qe.useDepthPacking&&L.enable(13),qe.dithering&&L.enable(14),qe.transmission&&L.enable(15),qe.sheen&&L.enable(16),qe.opaque&&L.enable(17),qe.pointsUvs&&L.enable(18),qe.decodeVideoTexture&&L.enable(19),qe.alphaToCoverage&&L.enable(20),qe.numMultiviewViews&&L.enable(21),et.push(L.mask)}function Ue(et){const qe=xe[et.type];let wt;if(qe){const Ft=h0[qe];wt=wc.clone(Ft.uniforms)}else wt=et.uniforms;return wt}function Ct(et,qe){let wt;for(let Ft=0,Lt=re.length;Ft<Lt;Ft++){const Gt=re[Ft];if(Gt.cacheKey===qe){wt=Gt,++wt.usedTimes;break}}return wt===void 0&&(wt=new Fn(x,qe,et,C),re.push(wt)),wt}function at(et){if(--et.usedTimes===0){const qe=re.indexOf(et);re[qe]=re[re.length-1],re.pop(),et.destroy()}}function ft(et){W.remove(et)}function yt(){W.dispose()}return{getParameters:Se,getProgramCacheKey:Ee,getUniforms:Ue,acquireProgram:Ct,releaseProgram:at,releaseShaderCache:ft,programs:re,dispose:yt}}function _l(){let x=new WeakMap;function o(C){let b=x.get(C);return b===void 0&&(b={},x.set(C,b)),b}function h(C){x.delete(C)}function m(C,b,L){x.get(C)[b]=L}function v(){x=new WeakMap}return{get:o,remove:h,update:m,dispose:v}}function um(x,o){return x.groupOrder!==o.groupOrder?x.groupOrder-o.groupOrder:x.renderOrder!==o.renderOrder?x.renderOrder-o.renderOrder:x.material.id!==o.material.id?x.material.id-o.material.id:x.z!==o.z?x.z-o.z:x.id-o.id}function lp(x,o){return x.groupOrder!==o.groupOrder?x.groupOrder-o.groupOrder:x.renderOrder!==o.renderOrder?x.renderOrder-o.renderOrder:x.z!==o.z?o.z-x.z:x.id-o.id}function cp(){const x=[];let o=0;const h=[],m=[],v=[];function C(){o=0,h.length=0,m.length=0,v.length=0}function b(ue,pe,ve,xe,Le,Se){let Ee=x[o];return Ee===void 0?(Ee={id:ue.id,object:ue,geometry:pe,material:ve,groupOrder:xe,renderOrder:ue.renderOrder,z:Le,group:Se},x[o]=Ee):(Ee.id=ue.id,Ee.object=ue,Ee.geometry=pe,Ee.material=ve,Ee.groupOrder=xe,Ee.renderOrder=ue.renderOrder,Ee.z=Le,Ee.group=Se),o++,Ee}function L(ue,pe,ve,xe,Le,Se){const Ee=b(ue,pe,ve,xe,Le,Se);ve.transmission>0?m.push(Ee):ve.transparent===!0?v.push(Ee):h.push(Ee)}function W(ue,pe,ve,xe,Le,Se){const Ee=b(ue,pe,ve,xe,Le,Se);ve.transmission>0?m.unshift(Ee):ve.transparent===!0?v.unshift(Ee):h.unshift(Ee)}function J(ue,pe){h.length>1&&h.sort(ue||um),m.length>1&&m.sort(pe||lp),v.length>1&&v.sort(pe||lp)}function re(){for(let ue=o,pe=x.length;ue<pe;ue++){const ve=x[ue];if(ve.id===null)break;ve.id=null,ve.object=null,ve.geometry=null,ve.material=null,ve.group=null}}return{opaque:h,transmissive:m,transparent:v,init:C,push:L,unshift:W,finish:re,sort:J}}function hm(){let x=new WeakMap;function o(m,v){const C=x.get(m);let b;return C===void 0?(b=new cp,x.set(m,[b])):v>=C.length?(b=new cp,C.push(b)):b=C[v],b}function h(){x=new WeakMap}return{get:o,dispose:h}}function dm(){const x={};return{get:function(o){if(x[o.id]!==void 0)return x[o.id];let h;switch(o.type){case"DirectionalLight":h={direction:new nt,color:new un};break;case"SpotLight":h={position:new nt,direction:new nt,color:new un,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":h={position:new nt,color:new un,distance:0,decay:0};break;case"HemisphereLight":h={direction:new nt,skyColor:new un,groundColor:new un};break;case"RectAreaLight":h={color:new un,position:new nt,halfWidth:new nt,halfHeight:new nt};break}return x[o.id]=h,h}}}function fm(){const x={};return{get:function(o){if(x[o.id]!==void 0)return x[o.id];let h;switch(o.type){case"DirectionalLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vi};break;case"SpotLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vi};break;case"PointLight":h={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new vi,shadowCameraNear:1,shadowCameraFar:1e3};break}return x[o.id]=h,h}}}let pm=0;function Am(x,o){return(o.castShadow?2:0)-(x.castShadow?2:0)+(o.map?1:0)-(x.map?1:0)}function mm(x){const o=new dm,h=fm(),m={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let J=0;J<9;J++)m.probe.push(new nt);const v=new nt,C=new on,b=new on;function L(J,re){let ue=0,pe=0,ve=0;for(let wt=0;wt<9;wt++)m.probe[wt].set(0,0,0);let xe=0,Le=0,Se=0,Ee=0,Ke=0,Ge=0,Ue=0,Ct=0,at=0,ft=0,yt=0;J.sort(Am);const et=re===!0?Math.PI:1;for(let wt=0,Ft=J.length;wt<Ft;wt++){const Lt=J[wt],Gt=Lt.color,ti=Lt.intensity,Ei=Lt.distance,$i=Lt.shadow&&Lt.shadow.map?Lt.shadow.map.texture:null;if(Lt.isAmbientLight)ue+=Gt.r*ti*et,pe+=Gt.g*ti*et,ve+=Gt.b*ti*et;else if(Lt.isLightProbe){for(let ri=0;ri<9;ri++)m.probe[ri].addScaledVector(Lt.sh.coefficients[ri],ti);yt++}else if(Lt.isDirectionalLight){const ri=o.get(Lt);if(ri.color.copy(Lt.color).multiplyScalar(Lt.intensity*et),Lt.castShadow){const zi=Lt.shadow,Yi=h.get(Lt);Yi.shadowBias=zi.bias,Yi.shadowNormalBias=zi.normalBias,Yi.shadowRadius=zi.radius,Yi.shadowMapSize=zi.mapSize,m.directionalShadow[xe]=Yi,m.directionalShadowMap[xe]=$i,m.directionalShadowMatrix[xe]=Lt.shadow.matrix,Ge++}m.directional[xe]=ri,xe++}else if(Lt.isSpotLight){const ri=o.get(Lt);ri.position.setFromMatrixPosition(Lt.matrixWorld),ri.color.copy(Gt).multiplyScalar(ti*et),ri.distance=Ei,ri.coneCos=Math.cos(Lt.angle),ri.penumbraCos=Math.cos(Lt.angle*(1-Lt.penumbra)),ri.decay=Lt.decay,m.spot[Se]=ri;const zi=Lt.shadow;if(Lt.map&&(m.spotLightMap[at]=Lt.map,at++,zi.updateMatrices(Lt),Lt.castShadow&&ft++),m.spotLightMatrix[Se]=zi.matrix,Lt.castShadow){const Yi=h.get(Lt);Yi.shadowBias=zi.bias,Yi.shadowNormalBias=zi.normalBias,Yi.shadowRadius=zi.radius,Yi.shadowMapSize=zi.mapSize,m.spotShadow[Se]=Yi,m.spotShadowMap[Se]=$i,Ct++}Se++}else if(Lt.isRectAreaLight){const ri=o.get(Lt);ri.color.copy(Gt).multiplyScalar(ti),ri.halfWidth.set(Lt.width*.5,0,0),ri.halfHeight.set(0,Lt.height*.5,0),m.rectArea[Ee]=ri,Ee++}else if(Lt.isPointLight){const ri=o.get(Lt);if(ri.color.copy(Lt.color).multiplyScalar(Lt.intensity*et),ri.distance=Lt.distance,ri.decay=Lt.decay,Lt.castShadow){const zi=Lt.shadow,Yi=h.get(Lt);Yi.shadowBias=zi.bias,Yi.shadowNormalBias=zi.normalBias,Yi.shadowRadius=zi.radius,Yi.shadowMapSize=zi.mapSize,Yi.shadowCameraNear=zi.camera.near,Yi.shadowCameraFar=zi.camera.far,m.pointShadow[Le]=Yi,m.pointShadowMap[Le]=$i,m.pointShadowMatrix[Le]=Lt.shadow.matrix,Ue++}m.point[Le]=ri,Le++}else if(Lt.isHemisphereLight){const ri=o.get(Lt);ri.skyColor.copy(Lt.color).multiplyScalar(ti*et),ri.groundColor.copy(Lt.groundColor).multiplyScalar(ti*et),m.hemi[Ke]=ri,Ke++}}Ee>0&&(x.has("OES_texture_float_linear")===!0?(m.rectAreaLTC1=tn.LTC_FLOAT_1,m.rectAreaLTC2=tn.LTC_FLOAT_2):(m.rectAreaLTC1=tn.LTC_HALF_1,m.rectAreaLTC2=tn.LTC_HALF_2)),m.ambient[0]=ue,m.ambient[1]=pe,m.ambient[2]=ve;const qe=m.hash;(qe.directionalLength!==xe||qe.pointLength!==Le||qe.spotLength!==Se||qe.rectAreaLength!==Ee||qe.hemiLength!==Ke||qe.numDirectionalShadows!==Ge||qe.numPointShadows!==Ue||qe.numSpotShadows!==Ct||qe.numSpotMaps!==at||qe.numLightProbes!==yt)&&(m.directional.length=xe,m.spot.length=Se,m.rectArea.length=Ee,m.point.length=Le,m.hemi.length=Ke,m.directionalShadow.length=Ge,m.directionalShadowMap.length=Ge,m.pointShadow.length=Ue,m.pointShadowMap.length=Ue,m.spotShadow.length=Ct,m.spotShadowMap.length=Ct,m.directionalShadowMatrix.length=Ge,m.pointShadowMatrix.length=Ue,m.spotLightMatrix.length=Ct+at-ft,m.spotLightMap.length=at,m.numSpotLightShadowsWithMaps=ft,m.numLightProbes=yt,qe.directionalLength=xe,qe.pointLength=Le,qe.spotLength=Se,qe.rectAreaLength=Ee,qe.hemiLength=Ke,qe.numDirectionalShadows=Ge,qe.numPointShadows=Ue,qe.numSpotShadows=Ct,qe.numSpotMaps=at,qe.numLightProbes=yt,m.version=pm++)}function W(J,re){let ue=0,pe=0,ve=0,xe=0,Le=0;const Se=re.matrixWorldInverse;for(let Ee=0,Ke=J.length;Ee<Ke;Ee++){const Ge=J[Ee];if(Ge.isDirectionalLight){const Ue=m.directional[ue];Ue.direction.setFromMatrixPosition(Ge.matrixWorld),v.setFromMatrixPosition(Ge.target.matrixWorld),Ue.direction.sub(v),Ue.direction.transformDirection(Se),ue++}else if(Ge.isSpotLight){const Ue=m.spot[ve];Ue.position.setFromMatrixPosition(Ge.matrixWorld),Ue.position.applyMatrix4(Se),Ue.direction.setFromMatrixPosition(Ge.matrixWorld),v.setFromMatrixPosition(Ge.target.matrixWorld),Ue.direction.sub(v),Ue.direction.transformDirection(Se),ve++}else if(Ge.isRectAreaLight){const Ue=m.rectArea[xe];Ue.position.setFromMatrixPosition(Ge.matrixWorld),Ue.position.applyMatrix4(Se),b.identity(),C.copy(Ge.matrixWorld),C.premultiply(Se),b.extractRotation(C),Ue.halfWidth.set(Ge.width*.5,0,0),Ue.halfHeight.set(0,Ge.height*.5,0),Ue.halfWidth.applyMatrix4(b),Ue.halfHeight.applyMatrix4(b),xe++}else if(Ge.isPointLight){const Ue=m.point[pe];Ue.position.setFromMatrixPosition(Ge.matrixWorld),Ue.position.applyMatrix4(Se),pe++}else if(Ge.isHemisphereLight){const Ue=m.hemi[Le];Ue.direction.setFromMatrixPosition(Ge.matrixWorld),Ue.direction.transformDirection(Se),Le++}}}return{setup:L,setupView:W,state:m}}function up(x){const o=new mm(x),h=[],m=[];function v(re){J.camera=re,h.length=0,m.length=0}function C(re){h.push(re)}function b(re){m.push(re)}function L(re){o.setup(h,re)}function W(re){o.setupView(h,re)}const J={lightsArray:h,shadowsArray:m,camera:null,lights:o,transmissionRenderTarget:{}};return{init:v,state:J,setupLights:L,setupLightsView:W,pushLight:C,pushShadow:b}}function gm(x){let o=new WeakMap;function h(v,C=0){const b=o.get(v);let L;return b===void 0?(L=new up(x),o.set(v,[L])):C>=b.length?(L=new up(x),b.push(L)):L=b[C],L}function m(){o=new WeakMap}return{get:h,dispose:m}}class A2 extends us{constructor(o){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ha,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(o)}copy(o){return super.copy(o),this.depthPacking=o.depthPacking,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this}}class m2 extends us{constructor(o){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(o)}copy(o){return super.copy(o),this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this}}const vm=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Em=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ym(x,o,h){let m=new il;const v=new vi,C=new vi,b=new zr,L=new A2({depthPacking:da}),W=new m2,J={},re=h.maxTextureSize,ue={[G]:Z,[Z]:G,[ne]:ne},pe=new w0({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new vi},radius:{value:4}},vertexShader:vm,fragmentShader:Em}),ve=pe.clone();ve.defines.HORIZONTAL_PASS=1;const xe=new rr;xe.setAttribute("position",new Zr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Le=new Bs(xe,pe),Se=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=F;let Ee=this.type;this.render=function(at,ft,yt){if(Se.enabled===!1||Se.autoUpdate===!1&&Se.needsUpdate===!1||at.length===0)return;const et=x.getRenderTarget(),qe=x.getActiveCubeFace(),wt=x.getActiveMipmapLevel(),Ft=x.state;Ft.setBlending(te),Ft.buffers.color.setClear(1,1,1,1),Ft.buffers.depth.setTest(!0),Ft.setScissorTest(!1);const Lt=Ee!==k&&this.type===k,Gt=Ee===k&&this.type!==k;for(let ti=0,Ei=at.length;ti<Ei;ti++){const $i=at[ti],ri=$i.shadow;if(ri===void 0){console.warn("THREE.WebGLShadowMap:",$i,"has no shadow.");continue}if(ri.autoUpdate===!1&&ri.needsUpdate===!1)continue;v.copy(ri.mapSize);const zi=ri.getFrameExtents();if(v.multiply(zi),C.copy(ri.mapSize),(v.x>re||v.y>re)&&(v.x>re&&(C.x=Math.floor(re/zi.x),v.x=C.x*zi.x,ri.mapSize.x=C.x),v.y>re&&(C.y=Math.floor(re/zi.y),v.y=C.y*zi.y,ri.mapSize.y=C.y)),ri.map===null||Lt===!0||Gt===!0){const Rn=this.type!==k?{minFilter:Wi,magFilter:Wi}:{};ri.map!==null&&ri.map.dispose(),ri.map=new js(v.x,v.y,Rn),ri.map.texture.name=$i.name+".shadowMap",ri.camera.updateProjectionMatrix()}x.setRenderTarget(ri.map),x.clear();const Yi=ri.getViewportCount();for(let Rn=0;Rn<Yi;Rn++){const Br=ri.getViewport(Rn);b.set(C.x*Br.x,C.y*Br.y,C.x*Br.z,C.y*Br.w),Ft.viewport(b),ri.updateMatrices($i,Rn),m=ri.getFrustum(),Ue(ft,yt,ri.camera,$i,this.type)}ri.isPointLightShadow!==!0&&this.type===k&&Ke(ri,yt),ri.needsUpdate=!1}Ee=this.type,Se.needsUpdate=!1,x.setRenderTarget(et,qe,wt)};function Ke(at,ft){const yt=o.update(Le);pe.defines.VSM_SAMPLES!==at.blurSamples&&(pe.defines.VSM_SAMPLES=at.blurSamples,ve.defines.VSM_SAMPLES=at.blurSamples,pe.needsUpdate=!0,ve.needsUpdate=!0),at.mapPass===null&&(at.mapPass=new js(v.x,v.y)),pe.uniforms.shadow_pass.value=at.map.texture,pe.uniforms.resolution.value=at.mapSize,pe.uniforms.radius.value=at.radius,x.setRenderTarget(at.mapPass),x.clear(),x.renderBufferDirect(ft,null,yt,pe,Le,null),ve.uniforms.shadow_pass.value=at.mapPass.texture,ve.uniforms.resolution.value=at.mapSize,ve.uniforms.radius.value=at.radius,x.setRenderTarget(at.map),x.clear(),x.renderBufferDirect(ft,null,yt,ve,Le,null)}function Ge(at,ft,yt,et){let qe=null;const wt=yt.isPointLight===!0?at.customDistanceMaterial:at.customDepthMaterial;if(wt!==void 0)qe=wt;else if(qe=yt.isPointLight===!0?W:L,x.localClippingEnabled&&ft.clipShadows===!0&&Array.isArray(ft.clippingPlanes)&&ft.clippingPlanes.length!==0||ft.displacementMap&&ft.displacementScale!==0||ft.alphaMap&&ft.alphaTest>0||ft.map&&ft.alphaTest>0){const Ft=qe.uuid,Lt=ft.uuid;let Gt=J[Ft];Gt===void 0&&(Gt={},J[Ft]=Gt);let ti=Gt[Lt];ti===void 0&&(ti=qe.clone(),Gt[Lt]=ti,ft.addEventListener("dispose",Ct)),qe=ti}if(qe.visible=ft.visible,qe.wireframe=ft.wireframe,et===k?qe.side=ft.shadowSide!==null?ft.shadowSide:ft.side:qe.side=ft.shadowSide!==null?ft.shadowSide:ue[ft.side],qe.alphaMap=ft.alphaMap,qe.alphaTest=ft.alphaTest,qe.map=ft.map,qe.clipShadows=ft.clipShadows,qe.clippingPlanes=ft.clippingPlanes,qe.clipIntersection=ft.clipIntersection,qe.displacementMap=ft.displacementMap,qe.displacementScale=ft.displacementScale,qe.displacementBias=ft.displacementBias,qe.wireframeLinewidth=ft.wireframeLinewidth,qe.linewidth=ft.linewidth,yt.isPointLight===!0&&qe.isMeshDistanceMaterial===!0){const Ft=x.properties.get(qe);Ft.light=yt}return qe}function Ue(at,ft,yt,et,qe){if(at.visible===!1)return;if(at.layers.test(ft.layers)&&(at.isMesh||at.isLine||at.isPoints)&&(at.castShadow||at.receiveShadow&&qe===k)&&(!at.frustumCulled||m.intersectsObject(at))){at.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,at.matrixWorld);const Lt=o.update(at),Gt=at.material;if(Array.isArray(Gt)){const ti=Lt.groups;for(let Ei=0,$i=ti.length;Ei<$i;Ei++){const ri=ti[Ei],zi=Gt[ri.materialIndex];if(zi&&zi.visible){const Yi=Ge(at,zi,et,qe);at.onBeforeShadow(x,at,ft,yt,Lt,Yi,ri),x.renderBufferDirect(yt,null,Lt,Yi,at,ri),at.onAfterShadow(x,at,ft,yt,Lt,Yi,ri)}}}else if(Gt.visible){const ti=Ge(at,Gt,et,qe);at.onBeforeShadow(x,at,ft,yt,Lt,ti,null),x.renderBufferDirect(yt,null,Lt,ti,at,null),at.onAfterShadow(x,at,ft,yt,Lt,ti,null)}}const Ft=at.children;for(let Lt=0,Gt=Ft.length;Lt<Gt;Lt++)Ue(Ft[Lt],ft,yt,et,qe)}function Ct(at){at.target.removeEventListener("dispose",Ct);for(const yt in J){const et=J[yt],qe=at.target.uuid;qe in et&&(et[qe].dispose(),delete et[qe])}}}function wm(x){function o(){let Tt=!1;const Ni=new zr;let qi=null;const Gn=new zr(0,0,0,0);return{setMask:function(yn){qi!==yn&&!Tt&&(x.colorMask(yn,yn,yn,yn),qi=yn)},setLocked:function(yn){Tt=yn},setClear:function(yn,Rr,wn,dn,Hr){Hr===!0&&(yn*=dn,Rr*=dn,wn*=dn),Ni.set(yn,Rr,wn,dn),Gn.equals(Ni)===!1&&(x.clearColor(yn,Rr,wn,dn),Gn.copy(Ni))},reset:function(){Tt=!1,qi=null,Gn.set(-1,0,0,0)}}}function h(){let Tt=!1,Ni=null,qi=null,Gn=null;return{setTest:function(yn){yn?Ds(x.DEPTH_TEST):Pn(x.DEPTH_TEST)},setMask:function(yn){Ni!==yn&&!Tt&&(x.depthMask(yn),Ni=yn)},setFunc:function(yn){if(qi!==yn){switch(yn){case Xn:x.depthFunc(x.NEVER);break;case tr:x.depthFunc(x.ALWAYS);break;case Jn:x.depthFunc(x.LESS);break;case bn:x.depthFunc(x.LEQUAL);break;case cr:x.depthFunc(x.EQUAL);break;case Ir:x.depthFunc(x.GEQUAL);break;case je:x.depthFunc(x.GREATER);break;case xs:x.depthFunc(x.NOTEQUAL);break;default:x.depthFunc(x.LEQUAL)}qi=yn}},setLocked:function(yn){Tt=yn},setClear:function(yn){Gn!==yn&&(x.clearDepth(yn),Gn=yn)},reset:function(){Tt=!1,Ni=null,qi=null,Gn=null}}}function m(){let Tt=!1,Ni=null,qi=null,Gn=null,yn=null,Rr=null,wn=null,dn=null,Hr=null;return{setTest:function(lr){Tt||(lr?Ds(x.STENCIL_TEST):Pn(x.STENCIL_TEST))},setMask:function(lr){Ni!==lr&&!Tt&&(x.stencilMask(lr),Ni=lr)},setFunc:function(lr,d0,v1){(qi!==lr||Gn!==d0||yn!==v1)&&(x.stencilFunc(lr,d0,v1),qi=lr,Gn=d0,yn=v1)},setOp:function(lr,d0,v1){(Rr!==lr||wn!==d0||dn!==v1)&&(x.stencilOp(lr,d0,v1),Rr=lr,wn=d0,dn=v1)},setLocked:function(lr){Tt=lr},setClear:function(lr){Hr!==lr&&(x.clearStencil(lr),Hr=lr)},reset:function(){Tt=!1,Ni=null,qi=null,Gn=null,yn=null,Rr=null,wn=null,dn=null,Hr=null}}}const v=new o,C=new h,b=new m,L=new WeakMap,W=new WeakMap;let J={},re={},ue=new WeakMap,pe=[],ve=null,xe=!1,Le=null,Se=null,Ee=null,Ke=null,Ge=null,Ue=null,Ct=null,at=new un(0,0,0),ft=0,yt=!1,et=null,qe=null,wt=null,Ft=null,Lt=null;const Gt=x.getParameter(x.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ti=!1,Ei=0;const $i=x.getParameter(x.VERSION);$i.indexOf("WebGL")!==-1?(Ei=parseFloat(/^WebGL (\d)/.exec($i)[1]),ti=Ei>=1):$i.indexOf("OpenGL ES")!==-1&&(Ei=parseFloat(/^OpenGL ES (\d)/.exec($i)[1]),ti=Ei>=2);let ri=null,zi={};const Yi=x.getParameter(x.SCISSOR_BOX),Rn=x.getParameter(x.VIEWPORT),Br=new zr().fromArray(Yi),As=new zr().fromArray(Rn);function Ks(Tt,Ni,qi,Gn){const yn=new Uint8Array(4),Rr=x.createTexture();x.bindTexture(Tt,Rr),x.texParameteri(Tt,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(Tt,x.TEXTURE_MAG_FILTER,x.NEAREST);for(let wn=0;wn<qi;wn++)Tt===x.TEXTURE_3D||Tt===x.TEXTURE_2D_ARRAY?x.texImage3D(Ni,0,x.RGBA,1,1,Gn,0,x.RGBA,x.UNSIGNED_BYTE,yn):x.texImage2D(Ni+wn,0,x.RGBA,1,1,0,x.RGBA,x.UNSIGNED_BYTE,yn);return Rr}const hs={};hs[x.TEXTURE_2D]=Ks(x.TEXTURE_2D,x.TEXTURE_2D,1),hs[x.TEXTURE_CUBE_MAP]=Ks(x.TEXTURE_CUBE_MAP,x.TEXTURE_CUBE_MAP_POSITIVE_X,6),hs[x.TEXTURE_2D_ARRAY]=Ks(x.TEXTURE_2D_ARRAY,x.TEXTURE_2D_ARRAY,1,1),hs[x.TEXTURE_3D]=Ks(x.TEXTURE_3D,x.TEXTURE_3D,1,1),v.setClear(0,0,0,1),C.setClear(1),b.setClear(0),Ds(x.DEPTH_TEST),C.setFunc(bn),Hi(!1),ki(D),Ds(x.CULL_FACE),fi(te);function Ds(Tt){J[Tt]!==!0&&(x.enable(Tt),J[Tt]=!0)}function Pn(Tt){J[Tt]!==!1&&(x.disable(Tt),J[Tt]=!1)}function xi(Tt,Ni){return re[Tt]!==Ni?(x.bindFramebuffer(Tt,Ni),re[Tt]=Ni,Tt===x.DRAW_FRAMEBUFFER&&(re[x.FRAMEBUFFER]=Ni),Tt===x.FRAMEBUFFER&&(re[x.DRAW_FRAMEBUFFER]=Ni),!0):!1}function en(Tt,Ni){let qi=pe,Gn=!1;if(Tt){qi=ue.get(Ni),qi===void 0&&(qi=[],ue.set(Ni,qi));const yn=Tt.textures;if(qi.length!==yn.length||qi[0]!==x.COLOR_ATTACHMENT0){for(let Rr=0,wn=yn.length;Rr<wn;Rr++)qi[Rr]=x.COLOR_ATTACHMENT0+Rr;qi.length=yn.length,Gn=!0}}else qi[0]!==x.BACK&&(qi[0]=x.BACK,Gn=!0);Gn&&x.drawBuffers(qi)}function ln(Tt){return ve!==Tt?(x.useProgram(Tt),ve=Tt,!0):!1}const Qt={[Pe]:x.FUNC_ADD,[Qe]:x.FUNC_SUBTRACT,[De]:x.FUNC_REVERSE_SUBTRACT};Qt[ke]=x.MIN,Qt[Ce]=x.MAX;const Mi={[fe]:x.ZERO,[Oe]:x.ONE,[Te]:x.SRC_COLOR,[st]:x.SRC_ALPHA,[Ci]:x.SRC_ALPHA_SATURATE,[Yt]:x.DST_COLOR,[Mt]:x.DST_ALPHA,[Ve]:x.ONE_MINUS_SRC_COLOR,[dt]:x.ONE_MINUS_SRC_ALPHA,[zt]:x.ONE_MINUS_DST_COLOR,[Rt]:x.ONE_MINUS_DST_ALPHA,[ci]:x.CONSTANT_COLOR,[Qi]:x.ONE_MINUS_CONSTANT_COLOR,[sn]:x.CONSTANT_ALPHA,[In]:x.ONE_MINUS_CONSTANT_ALPHA};function fi(Tt,Ni,qi,Gn,yn,Rr,wn,dn,Hr,lr){if(Tt===te){xe===!0&&(Pn(x.BLEND),xe=!1);return}if(xe===!1&&(Ds(x.BLEND),xe=!0),Tt!==Ne){if(Tt!==Le||lr!==yt){if((Se!==Pe||Ge!==Pe)&&(x.blendEquation(x.FUNC_ADD),Se=Pe,Ge=Pe),lr)switch(Tt){case de:x.blendFuncSeparate(x.ONE,x.ONE_MINUS_SRC_ALPHA,x.ONE,x.ONE_MINUS_SRC_ALPHA);break;case oe:x.blendFunc(x.ONE,x.ONE);break;case ye:x.blendFuncSeparate(x.ZERO,x.ONE_MINUS_SRC_COLOR,x.ZERO,x.ONE);break;case Me:x.blendFuncSeparate(x.ZERO,x.SRC_COLOR,x.ZERO,x.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Tt);break}else switch(Tt){case de:x.blendFuncSeparate(x.SRC_ALPHA,x.ONE_MINUS_SRC_ALPHA,x.ONE,x.ONE_MINUS_SRC_ALPHA);break;case oe:x.blendFunc(x.SRC_ALPHA,x.ONE);break;case ye:x.blendFuncSeparate(x.ZERO,x.ONE_MINUS_SRC_COLOR,x.ZERO,x.ONE);break;case Me:x.blendFunc(x.ZERO,x.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Tt);break}Ee=null,Ke=null,Ue=null,Ct=null,at.set(0,0,0),ft=0,Le=Tt,yt=lr}return}yn=yn||Ni,Rr=Rr||qi,wn=wn||Gn,(Ni!==Se||yn!==Ge)&&(x.blendEquationSeparate(Qt[Ni],Qt[yn]),Se=Ni,Ge=yn),(qi!==Ee||Gn!==Ke||Rr!==Ue||wn!==Ct)&&(x.blendFuncSeparate(Mi[qi],Mi[Gn],Mi[Rr],Mi[wn]),Ee=qi,Ke=Gn,Ue=Rr,Ct=wn),(dn.equals(at)===!1||Hr!==ft)&&(x.blendColor(dn.r,dn.g,dn.b,Hr),at.copy(dn),ft=Hr),Le=Tt,yt=!1}function Gi(Tt,Ni){Tt.side===ne?Pn(x.CULL_FACE):Ds(x.CULL_FACE);let qi=Tt.side===Z;Ni&&(qi=!qi),Hi(qi),Tt.blending===de&&Tt.transparent===!1?fi(te):fi(Tt.blending,Tt.blendEquation,Tt.blendSrc,Tt.blendDst,Tt.blendEquationAlpha,Tt.blendSrcAlpha,Tt.blendDstAlpha,Tt.blendColor,Tt.blendAlpha,Tt.premultipliedAlpha),C.setFunc(Tt.depthFunc),C.setTest(Tt.depthTest),C.setMask(Tt.depthWrite),v.setMask(Tt.colorWrite);const Gn=Tt.stencilWrite;b.setTest(Gn),Gn&&(b.setMask(Tt.stencilWriteMask),b.setFunc(Tt.stencilFunc,Tt.stencilRef,Tt.stencilFuncMask),b.setOp(Tt.stencilFail,Tt.stencilZFail,Tt.stencilZPass)),Cn(Tt.polygonOffset,Tt.polygonOffsetFactor,Tt.polygonOffsetUnits),Tt.alphaToCoverage===!0?Ds(x.SAMPLE_ALPHA_TO_COVERAGE):Pn(x.SAMPLE_ALPHA_TO_COVERAGE)}function Hi(Tt){et!==Tt&&(Tt?x.frontFace(x.CW):x.frontFace(x.CCW),et=Tt)}function ki(Tt){Tt!==K?(Ds(x.CULL_FACE),Tt!==qe&&(Tt===D?x.cullFace(x.BACK):Tt===Q?x.cullFace(x.FRONT):x.cullFace(x.FRONT_AND_BACK))):Pn(x.CULL_FACE),qe=Tt}function hn(Tt){Tt!==wt&&(ti&&x.lineWidth(Tt),wt=Tt)}function Cn(Tt,Ni,qi){Tt?(Ds(x.POLYGON_OFFSET_FILL),(Ft!==Ni||Lt!==qi)&&(x.polygonOffset(Ni,qi),Ft=Ni,Lt=qi)):Pn(x.POLYGON_OFFSET_FILL)}function pr(Tt){Tt?Ds(x.SCISSOR_TEST):Pn(x.SCISSOR_TEST)}function Cr(Tt){Tt===void 0&&(Tt=x.TEXTURE0+Gt-1),ri!==Tt&&(x.activeTexture(Tt),ri=Tt)}function ds(Tt,Ni,qi){qi===void 0&&(ri===null?qi=x.TEXTURE0+Gt-1:qi=ri);let Gn=zi[qi];Gn===void 0&&(Gn={type:void 0,texture:void 0},zi[qi]=Gn),(Gn.type!==Tt||Gn.texture!==Ni)&&(ri!==qi&&(x.activeTexture(qi),ri=qi),x.bindTexture(Tt,Ni||hs[Tt]),Gn.type=Tt,Gn.texture=Ni)}function wo(){const Tt=zi[ri];Tt!==void 0&&Tt.type!==void 0&&(x.bindTexture(Tt.type,null),Tt.type=void 0,Tt.texture=void 0)}function Xs(){try{x.compressedTexImage2D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function vt(){try{x.compressedTexImage3D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function Je(){try{x.texSubImage2D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function li(){try{x.texSubImage3D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function wi(){try{x.compressedTexSubImage2D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function Li(){try{x.compressedTexSubImage3D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function bi(){try{x.texStorage2D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function Hn(){try{x.texStorage3D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function ji(){try{x.texImage2D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function _n(){try{x.texImage3D.apply(x,arguments)}catch(Tt){console.error("THREE.WebGLState:",Tt)}}function _s(Tt){Br.equals(Tt)===!1&&(x.scissor(Tt.x,Tt.y,Tt.z,Tt.w),Br.copy(Tt))}function xn(Tt){As.equals(Tt)===!1&&(x.viewport(Tt.x,Tt.y,Tt.z,Tt.w),As.copy(Tt))}function Vn(Tt,Ni){let qi=W.get(Ni);qi===void 0&&(qi=new WeakMap,W.set(Ni,qi));let Gn=qi.get(Tt);Gn===void 0&&(Gn=x.getUniformBlockIndex(Ni,Tt.name),qi.set(Tt,Gn))}function Tr(Tt,Ni){const Gn=W.get(Ni).get(Tt);L.get(Ni)!==Gn&&(x.uniformBlockBinding(Ni,Gn,Tt.__bindingPointIndex),L.set(Ni,Gn))}function sr(){x.disable(x.BLEND),x.disable(x.CULL_FACE),x.disable(x.DEPTH_TEST),x.disable(x.POLYGON_OFFSET_FILL),x.disable(x.SCISSOR_TEST),x.disable(x.STENCIL_TEST),x.disable(x.SAMPLE_ALPHA_TO_COVERAGE),x.blendEquation(x.FUNC_ADD),x.blendFunc(x.ONE,x.ZERO),x.blendFuncSeparate(x.ONE,x.ZERO,x.ONE,x.ZERO),x.blendColor(0,0,0,0),x.colorMask(!0,!0,!0,!0),x.clearColor(0,0,0,0),x.depthMask(!0),x.depthFunc(x.LESS),x.clearDepth(1),x.stencilMask(4294967295),x.stencilFunc(x.ALWAYS,0,4294967295),x.stencilOp(x.KEEP,x.KEEP,x.KEEP),x.clearStencil(0),x.cullFace(x.BACK),x.frontFace(x.CCW),x.polygonOffset(0,0),x.activeTexture(x.TEXTURE0),x.bindFramebuffer(x.FRAMEBUFFER,null),x.bindFramebuffer(x.DRAW_FRAMEBUFFER,null),x.bindFramebuffer(x.READ_FRAMEBUFFER,null),x.useProgram(null),x.lineWidth(1),x.scissor(0,0,x.canvas.width,x.canvas.height),x.viewport(0,0,x.canvas.width,x.canvas.height),J={},ri=null,zi={},re={},ue=new WeakMap,pe=[],ve=null,xe=!1,Le=null,Se=null,Ee=null,Ke=null,Ge=null,Ue=null,Ct=null,at=new un(0,0,0),ft=0,yt=!1,et=null,qe=null,wt=null,Ft=null,Lt=null,Br.set(0,0,x.canvas.width,x.canvas.height),As.set(0,0,x.canvas.width,x.canvas.height),v.reset(),C.reset(),b.reset()}return{buffers:{color:v,depth:C,stencil:b},enable:Ds,disable:Pn,bindFramebuffer:xi,drawBuffers:en,useProgram:ln,setBlending:fi,setMaterial:Gi,setFlipSided:Hi,setCullFace:ki,setLineWidth:hn,setPolygonOffset:Cn,setScissorTest:pr,activeTexture:Cr,bindTexture:ds,unbindTexture:wo,compressedTexImage2D:Xs,compressedTexImage3D:vt,texImage2D:ji,texImage3D:_n,updateUBOMapping:Vn,uniformBlockBinding:Tr,texStorage2D:bi,texStorage3D:Hn,texSubImage2D:Je,texSubImage3D:li,compressedTexSubImage2D:wi,compressedTexSubImage3D:Li,scissor:_s,viewport:xn,reset:sr}}function Cm(x,o,h,m,v,C,b){const L=o.has("WEBGL_multisampled_render_to_texture")?o.get("WEBGL_multisampled_render_to_texture"):null,W=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),J=o.has("OCULUS_multiview")?o.get("OCULUS_multiview"):null,re=new vi,ue=new WeakMap;let pe;const ve=new WeakMap;let xe=[],Le=!1,Se=!1;try{Se=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Ee(vt,Je){return Se?new OffscreenCanvas(vt,Je):za("canvas")}function Ke(vt,Je,li){let wi=1;const Li=Xs(vt);if((Li.width>li||Li.height>li)&&(wi=li/Math.max(Li.width,Li.height)),wi<1)if(typeof HTMLImageElement<"u"&&vt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&vt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&vt instanceof ImageBitmap||typeof VideoFrame<"u"&&vt instanceof VideoFrame){const bi=Math.floor(wi*Li.width),Hn=Math.floor(wi*Li.height);pe===void 0&&(pe=Ee(bi,Hn));const ji=Je?Ee(bi,Hn):pe;return ji.width=bi,ji.height=Hn,ji.getContext("2d").drawImage(vt,0,0,bi,Hn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Li.width+"x"+Li.height+") to ("+bi+"x"+Hn+")."),ji}else return"data"in vt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Li.width+"x"+Li.height+")."),vt;return vt}function Ge(vt){return vt.generateMipmaps&&vt.minFilter!==Wi&&vt.minFilter!==kn}function Ue(vt){x.generateMipmap(vt)}function Ct(vt,Je,li,wi,Li=!1){if(vt!==null){if(x[vt]!==void 0)return x[vt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+vt+"'")}let bi=Je;if(Je===x.RED&&(li===x.FLOAT&&(bi=x.R32F),li===x.HALF_FLOAT&&(bi=x.R16F),li===x.UNSIGNED_BYTE&&(bi=x.R8)),Je===x.RED_INTEGER&&(li===x.UNSIGNED_BYTE&&(bi=x.R8UI),li===x.UNSIGNED_SHORT&&(bi=x.R16UI),li===x.UNSIGNED_INT&&(bi=x.R32UI),li===x.BYTE&&(bi=x.R8I),li===x.SHORT&&(bi=x.R16I),li===x.INT&&(bi=x.R32I)),Je===x.RG&&(li===x.FLOAT&&(bi=x.RG32F),li===x.HALF_FLOAT&&(bi=x.RG16F),li===x.UNSIGNED_BYTE&&(bi=x.RG8)),Je===x.RG_INTEGER&&(li===x.UNSIGNED_BYTE&&(bi=x.RG8UI),li===x.UNSIGNED_SHORT&&(bi=x.RG16UI),li===x.UNSIGNED_INT&&(bi=x.RG32UI),li===x.BYTE&&(bi=x.RG8I),li===x.SHORT&&(bi=x.RG16I),li===x.INT&&(bi=x.RG32I)),Je===x.RGB&&li===x.UNSIGNED_INT_5_9_9_9_REV&&(bi=x.RGB9_E5),Je===x.RGBA){const Hn=Li?cl:jr.getTransfer(wi);li===x.FLOAT&&(bi=x.RGBA32F),li===x.HALF_FLOAT&&(bi=x.RGBA16F),li===x.UNSIGNED_BYTE&&(bi=Hn===$r?x.SRGB8_ALPHA8:x.RGBA8),li===x.UNSIGNED_SHORT_4_4_4_4&&(bi=x.RGBA4),li===x.UNSIGNED_SHORT_5_5_5_1&&(bi=x.RGB5_A1)}return(bi===x.R16F||bi===x.R32F||bi===x.RG16F||bi===x.RG32F||bi===x.RGBA16F||bi===x.RGBA32F)&&o.get("EXT_color_buffer_float"),bi}function at(vt,Je){return Ge(vt)===!0||vt.isFramebufferTexture&&vt.minFilter!==Wi&&vt.minFilter!==kn?Math.log2(Math.max(Je.width,Je.height))+1:vt.mipmaps!==void 0&&vt.mipmaps.length>0?vt.mipmaps.length:vt.isCompressedTexture&&Array.isArray(vt.image)?Je.mipmaps.length:1}function ft(vt){const Je=vt.target;Je.removeEventListener("dispose",ft),et(Je),Je.isVideoTexture&&ue.delete(Je)}function yt(vt){const Je=vt.target;Je.removeEventListener("dispose",yt),wt(Je)}function et(vt){const Je=m.get(vt);if(Je.__webglInit===void 0)return;const li=vt.source,wi=ve.get(li);if(wi){const Li=wi[Je.__cacheKey];Li.usedTimes--,Li.usedTimes===0&&qe(vt),Object.keys(wi).length===0&&ve.delete(li)}m.remove(vt)}function qe(vt){const Je=m.get(vt);x.deleteTexture(Je.__webglTexture);const li=vt.source,wi=ve.get(li);delete wi[Je.__cacheKey],b.memory.textures--}function wt(vt){const Je=m.get(vt);if(vt.depthTexture&&vt.depthTexture.dispose(),vt.isWebGLCubeRenderTarget)for(let wi=0;wi<6;wi++){if(Array.isArray(Je.__webglFramebuffer[wi]))for(let Li=0;Li<Je.__webglFramebuffer[wi].length;Li++)x.deleteFramebuffer(Je.__webglFramebuffer[wi][Li]);else x.deleteFramebuffer(Je.__webglFramebuffer[wi]);Je.__webglDepthbuffer&&x.deleteRenderbuffer(Je.__webglDepthbuffer[wi])}else{if(Array.isArray(Je.__webglFramebuffer))for(let wi=0;wi<Je.__webglFramebuffer.length;wi++)x.deleteFramebuffer(Je.__webglFramebuffer[wi]);else x.deleteFramebuffer(Je.__webglFramebuffer);if(Je.__webglDepthbuffer&&x.deleteRenderbuffer(Je.__webglDepthbuffer),Je.__webglMultisampledFramebuffer&&x.deleteFramebuffer(Je.__webglMultisampledFramebuffer),Je.__webglColorRenderbuffer)for(let wi=0;wi<Je.__webglColorRenderbuffer.length;wi++)Je.__webglColorRenderbuffer[wi]&&x.deleteRenderbuffer(Je.__webglColorRenderbuffer[wi]);Je.__webglDepthRenderbuffer&&x.deleteRenderbuffer(Je.__webglDepthRenderbuffer)}const li=vt.textures;for(let wi=0,Li=li.length;wi<Li;wi++){const bi=m.get(li[wi]);bi.__webglTexture&&(x.deleteTexture(bi.__webglTexture),b.memory.textures--),m.remove(li[wi])}m.remove(vt)}let Ft=0;function Lt(){Ft=0}function Gt(){const vt=Ft;return vt>=v.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+vt+" texture units while this GPU supports only "+v.maxTextures),Ft+=1,vt}function ti(vt){const Je=[];return Je.push(vt.wrapS),Je.push(vt.wrapT),Je.push(vt.wrapR||0),Je.push(vt.magFilter),Je.push(vt.minFilter),Je.push(vt.anisotropy),Je.push(vt.internalFormat),Je.push(vt.format),Je.push(vt.type),Je.push(vt.generateMipmaps),Je.push(vt.premultiplyAlpha),Je.push(vt.flipY),Je.push(vt.unpackAlignment),Je.push(vt.colorSpace),Je.join()}function Ei(vt,Je){const li=m.get(vt);if(vt.isVideoTexture&&ds(vt),vt.isRenderTargetTexture===!1&&vt.version>0&&li.__version!==vt.version){const wi=vt.image;if(wi===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(wi.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else if(Pn(li,vt,Je))return}h.bindTexture(x.TEXTURE_2D,li.__webglTexture,x.TEXTURE0+Je)}function $i(vt,Je){const li=m.get(vt);if(vt.version>0&&li.__version!==vt.version){Pn(li,vt,Je);return}h.bindTexture(x.TEXTURE_2D_ARRAY,li.__webglTexture,x.TEXTURE0+Je)}function ri(vt,Je){const li=m.get(vt);if(vt.version>0&&li.__version!==vt.version){Pn(li,vt,Je);return}h.bindTexture(x.TEXTURE_3D,li.__webglTexture,x.TEXTURE0+Je)}function zi(vt,Je){const li=m.get(vt);if(vt.version>0&&li.__version!==vt.version){xi(li,vt,Je);return}h.bindTexture(x.TEXTURE_CUBE_MAP,li.__webglTexture,x.TEXTURE0+Je)}const Yi={[ht]:x.REPEAT,[St]:x.CLAMP_TO_EDGE,[Di]:x.MIRRORED_REPEAT},Rn={[Wi]:x.NEAREST,[Oi]:x.NEAREST_MIPMAP_NEAREST,[Ji]:x.NEAREST_MIPMAP_LINEAR,[kn]:x.LINEAR,[Jt]:x.LINEAR_MIPMAP_NEAREST,[Pr]:x.LINEAR_MIPMAP_LINEAR},Br={[tc]:x.NEVER,[ac]:x.ALWAYS,[ic]:x.LESS,[Xl]:x.LEQUAL,[nc]:x.EQUAL,[oc]:x.GEQUAL,[rc]:x.GREATER,[sc]:x.NOTEQUAL};function As(vt,Je){if(Je.type===Rs&&o.has("OES_texture_float_linear")===!1&&(Je.magFilter===kn||Je.magFilter===Jt||Je.magFilter===Ji||Je.magFilter===Pr||Je.minFilter===kn||Je.minFilter===Jt||Je.minFilter===Ji||Je.minFilter===Pr)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),x.texParameteri(vt,x.TEXTURE_WRAP_S,Yi[Je.wrapS]),x.texParameteri(vt,x.TEXTURE_WRAP_T,Yi[Je.wrapT]),(vt===x.TEXTURE_3D||vt===x.TEXTURE_2D_ARRAY)&&x.texParameteri(vt,x.TEXTURE_WRAP_R,Yi[Je.wrapR]),x.texParameteri(vt,x.TEXTURE_MAG_FILTER,Rn[Je.magFilter]),x.texParameteri(vt,x.TEXTURE_MIN_FILTER,Rn[Je.minFilter]),Je.compareFunction&&(x.texParameteri(vt,x.TEXTURE_COMPARE_MODE,x.COMPARE_REF_TO_TEXTURE),x.texParameteri(vt,x.TEXTURE_COMPARE_FUNC,Br[Je.compareFunction])),o.has("EXT_texture_filter_anisotropic")===!0){if(Je.magFilter===Wi||Je.minFilter!==Ji&&Je.minFilter!==Pr||Je.type===Rs&&o.has("OES_texture_float_linear")===!1)return;if(Je.anisotropy>1||m.get(Je).__currentAnisotropy){const li=o.get("EXT_texture_filter_anisotropic");x.texParameterf(vt,li.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Je.anisotropy,v.getMaxAnisotropy())),m.get(Je).__currentAnisotropy=Je.anisotropy}}}function Ks(vt,Je){let li=!1;vt.__webglInit===void 0&&(vt.__webglInit=!0,Je.addEventListener("dispose",ft));const wi=Je.source;let Li=ve.get(wi);Li===void 0&&(Li={},ve.set(wi,Li));const bi=ti(Je);if(bi!==vt.__cacheKey){Li[bi]===void 0&&(Li[bi]={texture:x.createTexture(),usedTimes:0},b.memory.textures++,li=!0),Li[bi].usedTimes++;const Hn=Li[vt.__cacheKey];Hn!==void 0&&(Li[vt.__cacheKey].usedTimes--,Hn.usedTimes===0&&qe(Je)),vt.__cacheKey=bi,vt.__webglTexture=Li[bi].texture}return li}function hs(vt){Le=vt}function Ds(){const vt=Le;Le=!1;for(const Je of xe)Pn(Je.textureProperties,Je.texture,Je.slot),Je.texture.isPendingDeferredUpload=!1;xe=[],Le=vt}function Pn(vt,Je,li){if(Le)return Je.isPendingDeferredUpload||(Je.isPendingDeferredUpload=!0,xe.push({textureProperties:vt,texture:Je,slot:li})),!1;let wi=x.TEXTURE_2D;(Je.isDataArrayTexture||Je.isCompressedArrayTexture)&&(wi=x.TEXTURE_2D_ARRAY),Je.isData3DTexture&&(wi=x.TEXTURE_3D);const Li=Ks(vt,Je),bi=Je.source;h.bindTexture(wi,vt.__webglTexture,x.TEXTURE0+li);const Hn=m.get(bi);if(bi.version!==Hn.__version||Li===!0){h.activeTexture(x.TEXTURE0+li);const ji=jr.getPrimaries(jr.workingColorSpace),_n=Je.colorSpace===co?null:jr.getPrimaries(Je.colorSpace),_s=Je.colorSpace===co||ji===_n?x.NONE:x.BROWSER_DEFAULT_WEBGL;x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,Je.flipY),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Je.premultiplyAlpha),x.pixelStorei(x.UNPACK_ALIGNMENT,Je.unpackAlignment),x.pixelStorei(x.UNPACK_COLORSPACE_CONVERSION_WEBGL,_s);let xn=Ke(Je.image,!1,v.maxTextureSize);xn=wo(Je,xn);const Vn=C.convert(Je.format,Je.colorSpace),Tr=C.convert(Je.type);let sr=Ct(Je.internalFormat,Vn,Tr,Je.colorSpace,Je.isVideoTexture);As(wi,Je);let Tt;const Ni=Je.mipmaps,qi=Je.isVideoTexture!==!0,Gn=Hn.__version===void 0||Li===!0,yn=bi.dataReady,Rr=at(Je,xn);if(Je.isDepthTexture)sr=x.DEPTH_COMPONENT16,Je.type===Rs?sr=x.DEPTH_COMPONENT32F:Je.type===zo?sr=x.DEPTH_COMPONENT24:Je.type===L0&&(sr=x.DEPTH24_STENCIL8),Gn&&(qi?h.texStorage2D(x.TEXTURE_2D,1,sr,xn.width,xn.height):h.texImage2D(x.TEXTURE_2D,0,sr,xn.width,xn.height,0,Vn,Tr,null));else if(Je.isDataTexture)if(Ni.length>0){qi&&Gn&&h.texStorage2D(x.TEXTURE_2D,Rr,sr,Ni[0].width,Ni[0].height);for(let wn=0,dn=Ni.length;wn<dn;wn++)Tt=Ni[wn],qi?yn&&h.texSubImage2D(x.TEXTURE_2D,wn,0,0,Tt.width,Tt.height,Vn,Tr,Tt.data):h.texImage2D(x.TEXTURE_2D,wn,sr,Tt.width,Tt.height,0,Vn,Tr,Tt.data);Je.generateMipmaps=!1}else qi?(Gn&&h.texStorage2D(x.TEXTURE_2D,Rr,sr,xn.width,xn.height),yn&&h.texSubImage2D(x.TEXTURE_2D,0,0,0,xn.width,xn.height,Vn,Tr,xn.data)):h.texImage2D(x.TEXTURE_2D,0,sr,xn.width,xn.height,0,Vn,Tr,xn.data);else if(Je.isCompressedTexture)if(Je.isCompressedArrayTexture){qi&&Gn&&h.texStorage3D(x.TEXTURE_2D_ARRAY,Rr,sr,Ni[0].width,Ni[0].height,xn.depth);for(let wn=0,dn=Ni.length;wn<dn;wn++)Tt=Ni[wn],Je.format!==At?Vn!==null?qi?yn&&h.compressedTexSubImage3D(x.TEXTURE_2D_ARRAY,wn,0,0,0,Tt.width,Tt.height,xn.depth,Vn,Tt.data,0,0):h.compressedTexImage3D(x.TEXTURE_2D_ARRAY,wn,sr,Tt.width,Tt.height,xn.depth,0,Tt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qi?yn&&h.texSubImage3D(x.TEXTURE_2D_ARRAY,wn,0,0,0,Tt.width,Tt.height,xn.depth,Vn,Tr,Tt.data):h.texImage3D(x.TEXTURE_2D_ARRAY,wn,sr,Tt.width,Tt.height,xn.depth,0,Vn,Tr,Tt.data)}else{qi&&Gn&&h.texStorage2D(x.TEXTURE_2D,Rr,sr,Ni[0].width,Ni[0].height);for(let wn=0,dn=Ni.length;wn<dn;wn++)Tt=Ni[wn],Je.format!==At?Vn!==null?qi?yn&&h.compressedTexSubImage2D(x.TEXTURE_2D,wn,0,0,Tt.width,Tt.height,Vn,Tt.data):h.compressedTexImage2D(x.TEXTURE_2D,wn,sr,Tt.width,Tt.height,0,Tt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qi?yn&&h.texSubImage2D(x.TEXTURE_2D,wn,0,0,Tt.width,Tt.height,Vn,Tr,Tt.data):h.texImage2D(x.TEXTURE_2D,wn,sr,Tt.width,Tt.height,0,Vn,Tr,Tt.data)}else if(Je.isDataArrayTexture)qi?(Gn&&h.texStorage3D(x.TEXTURE_2D_ARRAY,Rr,sr,xn.width,xn.height,xn.depth),yn&&h.texSubImage3D(x.TEXTURE_2D_ARRAY,0,0,0,0,xn.width,xn.height,xn.depth,Vn,Tr,xn.data)):h.texImage3D(x.TEXTURE_2D_ARRAY,0,sr,xn.width,xn.height,xn.depth,0,Vn,Tr,xn.data);else if(Je.isData3DTexture)qi?(Gn&&h.texStorage3D(x.TEXTURE_3D,Rr,sr,xn.width,xn.height,xn.depth),yn&&h.texSubImage3D(x.TEXTURE_3D,0,0,0,0,xn.width,xn.height,xn.depth,Vn,Tr,xn.data)):h.texImage3D(x.TEXTURE_3D,0,sr,xn.width,xn.height,xn.depth,0,Vn,Tr,xn.data);else if(Je.isFramebufferTexture){if(Gn)if(qi)h.texStorage2D(x.TEXTURE_2D,Rr,sr,xn.width,xn.height);else{let wn=xn.width,dn=xn.height;for(let Hr=0;Hr<Rr;Hr++)h.texImage2D(x.TEXTURE_2D,Hr,sr,wn,dn,0,Vn,Tr,null),wn>>=1,dn>>=1}}else if(Ni.length>0){if(qi&&Gn){const wn=Xs(Ni[0]);h.texStorage2D(x.TEXTURE_2D,Rr,sr,wn.width,wn.height)}for(let wn=0,dn=Ni.length;wn<dn;wn++)Tt=Ni[wn],qi?yn&&h.texSubImage2D(x.TEXTURE_2D,wn,0,0,Vn,Tr,Tt):h.texImage2D(x.TEXTURE_2D,wn,sr,Vn,Tr,Tt);Je.generateMipmaps=!1}else if(qi){if(Gn){const wn=Xs(xn);h.texStorage2D(x.TEXTURE_2D,Rr,sr,wn.width,wn.height)}yn&&h.texSubImage2D(x.TEXTURE_2D,0,0,0,Vn,Tr,xn)}else h.texImage2D(x.TEXTURE_2D,0,sr,Vn,Tr,xn);Ge(Je)&&Ue(wi),Hn.__version=bi.version,Je.onUpdate&&Je.onUpdate(Je)}return vt.__version=Je.version,!0}function xi(vt,Je,li){if(Je.image.length!==6)return;const wi=Ks(vt,Je),Li=Je.source;h.bindTexture(x.TEXTURE_CUBE_MAP,vt.__webglTexture,x.TEXTURE0+li);const bi=m.get(Li);if(Li.version!==bi.__version||wi===!0){h.activeTexture(x.TEXTURE0+li);const Hn=jr.getPrimaries(jr.workingColorSpace),ji=Je.colorSpace===co?null:jr.getPrimaries(Je.colorSpace),_n=Je.colorSpace===co||Hn===ji?x.NONE:x.BROWSER_DEFAULT_WEBGL;x.pixelStorei(x.UNPACK_FLIP_Y_WEBGL,Je.flipY),x.pixelStorei(x.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Je.premultiplyAlpha),x.pixelStorei(x.UNPACK_ALIGNMENT,Je.unpackAlignment),x.pixelStorei(x.UNPACK_COLORSPACE_CONVERSION_WEBGL,_n);const _s=Je.isCompressedTexture||Je.image[0].isCompressedTexture,xn=Je.image[0]&&Je.image[0].isDataTexture,Vn=[];for(let dn=0;dn<6;dn++)!_s&&!xn?Vn[dn]=Ke(Je.image[dn],!0,v.maxCubemapSize):Vn[dn]=xn?Je.image[dn].image:Je.image[dn],Vn[dn]=wo(Je,Vn[dn]);const Tr=Vn[0],sr=C.convert(Je.format,Je.colorSpace),Tt=C.convert(Je.type),Ni=Ct(Je.internalFormat,sr,Tt,Je.colorSpace),qi=Je.isVideoTexture!==!0,Gn=bi.__version===void 0||wi===!0,yn=Li.dataReady;let Rr=at(Je,Tr);As(x.TEXTURE_CUBE_MAP,Je);let wn;if(_s){qi&&Gn&&h.texStorage2D(x.TEXTURE_CUBE_MAP,Rr,Ni,Tr.width,Tr.height);for(let dn=0;dn<6;dn++){wn=Vn[dn].mipmaps;for(let Hr=0;Hr<wn.length;Hr++){const lr=wn[Hr];Je.format!==At?sr!==null?qi?yn&&h.compressedTexSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,Hr,0,0,lr.width,lr.height,sr,lr.data):h.compressedTexImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,Hr,Ni,lr.width,lr.height,0,lr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):qi?yn&&h.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,Hr,0,0,lr.width,lr.height,sr,Tt,lr.data):h.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,Hr,Ni,lr.width,lr.height,0,sr,Tt,lr.data)}}}else{if(wn=Je.mipmaps,qi&&Gn){wn.length>0&&Rr++;const dn=Xs(Vn[0]);h.texStorage2D(x.TEXTURE_CUBE_MAP,Rr,Ni,dn.width,dn.height)}for(let dn=0;dn<6;dn++)if(xn){qi?yn&&h.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,0,0,0,Vn[dn].width,Vn[dn].height,sr,Tt,Vn[dn].data):h.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,0,Ni,Vn[dn].width,Vn[dn].height,0,sr,Tt,Vn[dn].data);for(let Hr=0;Hr<wn.length;Hr++){const d0=wn[Hr].image[dn].image;qi?yn&&h.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,Hr+1,0,0,d0.width,d0.height,sr,Tt,d0.data):h.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,Hr+1,Ni,d0.width,d0.height,0,sr,Tt,d0.data)}}else{qi?yn&&h.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,0,0,0,sr,Tt,Vn[dn]):h.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,0,Ni,sr,Tt,Vn[dn]);for(let Hr=0;Hr<wn.length;Hr++){const lr=wn[Hr];qi?yn&&h.texSubImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,Hr+1,0,0,sr,Tt,lr.image[dn]):h.texImage2D(x.TEXTURE_CUBE_MAP_POSITIVE_X+dn,Hr+1,Ni,sr,Tt,lr.image[dn])}}}Ge(Je)&&Ue(x.TEXTURE_CUBE_MAP),bi.__version=Li.version,Je.onUpdate&&Je.onUpdate(Je)}vt.__version=Je.version}function en(vt,Je,li,wi,Li,bi){const Hn=C.convert(li.format,li.colorSpace),ji=C.convert(li.type),_n=Ct(li.internalFormat,Hn,ji,li.colorSpace);if(!m.get(Je).__hasExternalTextures){const Vn=Math.max(1,Je.width>>bi),Tr=Math.max(1,Je.height>>bi);Je.isWebGLMultiviewRenderTarget===!0?h.texStorage3D(x.TEXTURE_2D_ARRAY,0,_n,Je.width,Je.height,Je.numViews):Li===x.TEXTURE_3D||Li===x.TEXTURE_2D_ARRAY?h.texImage3D(Li,bi,_n,Vn,Tr,Je.depth,0,Hn,ji,null):h.texImage2D(Li,bi,_n,Vn,Tr,0,Hn,ji,null)}h.bindFramebuffer(x.FRAMEBUFFER,vt);const xn=Cr(Je);Je.isWebGLMultiviewRenderTarget===!0?xn?J.framebufferTextureMultisampleMultiviewOVR(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,m.get(li).__webglTexture,0,pr(Je),0,Je.numViews):J.framebufferTextureMultiviewOVR(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0,m.get(li).__webglTexture,0,0,Je.numViews):(Li===x.TEXTURE_2D||Li>=x.TEXTURE_CUBE_MAP_POSITIVE_X&&Li<=x.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&(xn?L.framebufferTexture2DMultisampleEXT(x.FRAMEBUFFER,wi,Li,m.get(li).__webglTexture,0,pr(Je)):x.framebufferTexture2D(x.FRAMEBUFFER,wi,Li,m.get(li).__webglTexture,bi)),h.bindFramebuffer(x.FRAMEBUFFER,null)}function ln(vt,Je,li){if(x.bindRenderbuffer(x.RENDERBUFFER,vt),Je.isWebGLMultiviewRenderTarget===!0){const wi=Cr(Je),Li=Je.numViews,bi=Je.depthTexture;let Hn=x.DEPTH_COMPONENT24,ji=x.DEPTH_ATTACHMENT;bi&&bi.isDepthTexture&&(bi.type===Rs?Hn=x.DEPTH_COMPONENT32F:bi.type===L0&&(Hn=x.DEPTH24_STENCIL8,ji=x.DEPTH_STENCIL_ATTACHMENT));let _n=m.get(Je.depthTexture).__webglTexture;_n===void 0&&(_n=x.createTexture(),x.bindTexture(x.TEXTURE_2D_ARRAY,_n),x.texStorage3D(x.TEXTURE_2D_ARRAY,1,Hn,Je.width,Je.height,Li)),wi?J.framebufferTextureMultisampleMultiviewOVR(x.FRAMEBUFFER,ji,_n,0,pr(Je),0,Li):J.framebufferTextureMultiviewOVR(x.FRAMEBUFFER,ji,_n,0,0,Li)}else if(Je.depthBuffer&&!Je.stencilBuffer){let wi=x.DEPTH_COMPONENT24;if(li||Cr(Je)){const Li=Je.depthTexture;Li&&Li.isDepthTexture&&(Li.type===Rs?wi=x.DEPTH_COMPONENT32F:Li.type===zo&&(wi=x.DEPTH_COMPONENT24));const bi=pr(Je);Cr(Je)?L.renderbufferStorageMultisampleEXT(x.RENDERBUFFER,bi,wi,Je.width,Je.height):x.renderbufferStorageMultisample(x.RENDERBUFFER,bi,wi,Je.width,Je.height)}else x.renderbufferStorage(x.RENDERBUFFER,wi,Je.width,Je.height);x.framebufferRenderbuffer(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.RENDERBUFFER,vt)}else if(Je.depthBuffer&&Je.stencilBuffer){const wi=pr(Je);li&&Cr(Je)===!1?x.renderbufferStorageMultisample(x.RENDERBUFFER,wi,x.DEPTH24_STENCIL8,Je.width,Je.height):Cr(Je)?L.renderbufferStorageMultisampleEXT(x.RENDERBUFFER,wi,x.DEPTH24_STENCIL8,Je.width,Je.height):x.renderbufferStorage(x.RENDERBUFFER,x.DEPTH_STENCIL,Je.width,Je.height),x.framebufferRenderbuffer(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,x.RENDERBUFFER,vt)}else{const wi=Je.textures;for(let Li=0;Li<wi.length;Li++){const bi=wi[Li],Hn=C.convert(bi.format,bi.colorSpace),ji=C.convert(bi.type),_n=Ct(bi.internalFormat,Hn,ji,bi.colorSpace),_s=pr(Je);li&&Cr(Je)===!1?x.renderbufferStorageMultisample(x.RENDERBUFFER,_s,_n,Je.width,Je.height):Cr(Je)?L.renderbufferStorageMultisampleEXT(x.RENDERBUFFER,_s,_n,Je.width,Je.height):x.renderbufferStorage(x.RENDERBUFFER,_n,Je.width,Je.height)}}x.bindRenderbuffer(x.RENDERBUFFER,null)}function Qt(vt,Je){if(Je&&Je.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(h.bindFramebuffer(x.FRAMEBUFFER,vt),!(Je.depthTexture&&Je.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!m.get(Je.depthTexture).__webglTexture||Je.depthTexture.image.width!==Je.width||Je.depthTexture.image.height!==Je.height)&&(Je.depthTexture.image.width=Je.width,Je.depthTexture.image.height=Je.height,Je.depthTexture.needsUpdate=!0),Ei(Je.depthTexture,0),Je.depthTexture.image.depth!=1?$i(Je.depthTexture,0):Ei(Je.depthTexture,0);const wi=m.get(Je.depthTexture).__webglTexture,Li=pr(Je);if(Je.isWebGLMultiviewRenderTarget===!0){const bi=Cr(Je),Hn=Je.numViews;if(Je.depthTexture.format===kt)bi?J.framebufferTextureMultisampleMultiviewOVR(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,wi,0,Li,0,Hn):J.framebufferTextureMultiviewOVR(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,wi,0,0,Hn);else if(Je.depthTexture.format===di)bi?J.framebufferTextureMultisampleMultiviewOVR(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,wi,0,Li,0,Hn):J.framebufferTextureMultiviewOVR(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,wi,0,0,Hn);else throw new Error("Unknown depthTexture format")}else if(Je.depthTexture.format===kt)Cr(Je)?L.framebufferTexture2DMultisampleEXT(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.TEXTURE_2D,wi,0,Li):x.framebufferTexture2D(x.FRAMEBUFFER,x.DEPTH_ATTACHMENT,x.TEXTURE_2D,wi,0);else if(Je.depthTexture.format===di)Cr(Je)?L.framebufferTexture2DMultisampleEXT(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,x.TEXTURE_2D,wi,0,Li):x.framebufferTexture2D(x.FRAMEBUFFER,x.DEPTH_STENCIL_ATTACHMENT,x.TEXTURE_2D,wi,0);else throw new Error("Unknown depthTexture format")}function Mi(vt){const Je=m.get(vt),li=vt.isWebGLCubeRenderTarget===!0;if(vt.depthTexture&&!Je.__autoAllocateDepthBuffer){if(li)throw new Error("target.depthTexture not supported in Cube render targets");Qt(Je.__webglFramebuffer,vt)}else if(li){Je.__webglDepthbuffer=[];for(let wi=0;wi<6;wi++)h.bindFramebuffer(x.FRAMEBUFFER,Je.__webglFramebuffer[wi]),Je.__webglDepthbuffer[wi]=x.createRenderbuffer(),ln(Je.__webglDepthbuffer[wi],vt,!1)}else h.bindFramebuffer(x.FRAMEBUFFER,Je.__webglFramebuffer),Je.__webglDepthbuffer=x.createRenderbuffer(),ln(Je.__webglDepthbuffer,vt,!1);h.bindFramebuffer(x.FRAMEBUFFER,null)}function fi(vt,Je,li){const wi=m.get(vt);Je!==void 0&&en(wi.__webglFramebuffer,vt,vt.texture,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,0),li!==void 0&&Mi(vt)}function Gi(vt){const Je=vt.texture,li=m.get(vt),wi=m.get(Je);vt.addEventListener("dispose",yt);const Li=vt.textures,bi=vt.isWebGLCubeRenderTarget===!0,Hn=Li.length>1;if(Hn||(wi.__webglTexture===void 0&&(wi.__webglTexture=x.createTexture()),wi.__version=Je.version,b.memory.textures++),bi){li.__webglFramebuffer=[];for(let ji=0;ji<6;ji++)if(Je.mipmaps&&Je.mipmaps.length>0){li.__webglFramebuffer[ji]=[];for(let _n=0;_n<Je.mipmaps.length;_n++)li.__webglFramebuffer[ji][_n]=x.createFramebuffer()}else li.__webglFramebuffer[ji]=x.createFramebuffer()}else{if(Je.mipmaps&&Je.mipmaps.length>0){li.__webglFramebuffer=[];for(let ji=0;ji<Je.mipmaps.length;ji++)li.__webglFramebuffer[ji]=x.createFramebuffer()}else li.__webglFramebuffer=x.createFramebuffer();if(Hn)for(let ji=0,_n=Li.length;ji<_n;ji++){const _s=m.get(Li[ji]);_s.__webglTexture===void 0&&(_s.__webglTexture=x.createTexture(),b.memory.textures++)}if(vt.samples>0&&Cr(vt)===!1){li.__webglMultisampledFramebuffer=x.createFramebuffer(),li.__webglColorRenderbuffer=[],h.bindFramebuffer(x.FRAMEBUFFER,li.__webglMultisampledFramebuffer);for(let ji=0;ji<Li.length;ji++){const _n=Li[ji];li.__webglColorRenderbuffer[ji]=x.createRenderbuffer(),x.bindRenderbuffer(x.RENDERBUFFER,li.__webglColorRenderbuffer[ji]);const _s=C.convert(_n.format,_n.colorSpace),xn=C.convert(_n.type),Vn=Ct(_n.internalFormat,_s,xn,_n.colorSpace,vt.isXRRenderTarget===!0),Tr=pr(vt);x.renderbufferStorageMultisample(x.RENDERBUFFER,Tr,Vn,vt.width,vt.height),x.framebufferRenderbuffer(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0+ji,x.RENDERBUFFER,li.__webglColorRenderbuffer[ji])}x.bindRenderbuffer(x.RENDERBUFFER,null),vt.depthBuffer&&(li.__webglDepthRenderbuffer=x.createRenderbuffer(),ln(li.__webglDepthRenderbuffer,vt,!0)),h.bindFramebuffer(x.FRAMEBUFFER,null)}}if(bi){h.bindTexture(x.TEXTURE_CUBE_MAP,wi.__webglTexture),As(x.TEXTURE_CUBE_MAP,Je);for(let ji=0;ji<6;ji++)if(Je.mipmaps&&Je.mipmaps.length>0)for(let _n=0;_n<Je.mipmaps.length;_n++)en(li.__webglFramebuffer[ji][_n],vt,Je,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+ji,_n);else en(li.__webglFramebuffer[ji],vt,Je,x.COLOR_ATTACHMENT0,x.TEXTURE_CUBE_MAP_POSITIVE_X+ji,0);Ge(Je)&&Ue(x.TEXTURE_CUBE_MAP),h.unbindTexture()}else if(Hn){for(let ji=0,_n=Li.length;ji<_n;ji++){const _s=Li[ji],xn=m.get(_s);h.bindTexture(x.TEXTURE_2D,xn.__webglTexture),As(x.TEXTURE_2D,_s),en(li.__webglFramebuffer,vt,_s,x.COLOR_ATTACHMENT0+ji,x.TEXTURE_2D,0),Ge(_s)&&Ue(x.TEXTURE_2D)}h.unbindTexture()}else{let ji=x.TEXTURE_2D;if((vt.isWebGL3DRenderTarget||vt.isWebGLArrayRenderTarget)&&(ji=vt.isWebGL3DRenderTarget?x.TEXTURE_3D:x.TEXTURE_2D_ARRAY),vt.isWebGLMultiviewRenderTarget===!0&&(ji=x.TEXTURE_2D_ARRAY),h.bindTexture(ji,wi.__webglTexture),As(ji,Je),Je.mipmaps&&Je.mipmaps.length>0)for(let _n=0;_n<Je.mipmaps.length;_n++)en(li.__webglFramebuffer[_n],vt,Je,x.COLOR_ATTACHMENT0,ji,_n);else en(li.__webglFramebuffer,vt,Je,x.COLOR_ATTACHMENT0,ji,0);Ge(Je)&&Ue(ji),h.unbindTexture()}(vt.depthBuffer||vt.isWebGLMultiviewRenderTarget===!0)&&this.setupDepthRenderbuffer(vt)}function Hi(vt){const Je=vt.textures;for(let li=0,wi=Je.length;li<wi;li++){const Li=Je[li];if(Ge(Li)){const bi=vt.isWebGLCubeRenderTarget?x.TEXTURE_CUBE_MAP:x.TEXTURE_2D,Hn=m.get(Li).__webglTexture;h.bindTexture(bi,Hn),Ue(bi),h.unbindTexture()}}}const ki=[],hn=[];function Cn(vt){if(vt.samples>0){if(Cr(vt)===!1){const Je=vt.textures,li=vt.width,wi=vt.height;let Li=x.COLOR_BUFFER_BIT;const bi=vt.stencilBuffer?x.DEPTH_STENCIL_ATTACHMENT:x.DEPTH_ATTACHMENT,Hn=m.get(vt),ji=Je.length>1;if(ji)for(let _n=0;_n<Je.length;_n++)h.bindFramebuffer(x.FRAMEBUFFER,Hn.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0+_n,x.RENDERBUFFER,null),h.bindFramebuffer(x.FRAMEBUFFER,Hn.__webglFramebuffer),x.framebufferTexture2D(x.DRAW_FRAMEBUFFER,x.COLOR_ATTACHMENT0+_n,x.TEXTURE_2D,null,0);h.bindFramebuffer(x.READ_FRAMEBUFFER,Hn.__webglMultisampledFramebuffer),h.bindFramebuffer(x.DRAW_FRAMEBUFFER,Hn.__webglFramebuffer);for(let _n=0;_n<Je.length;_n++){if(vt.resolveDepthBuffer&&(vt.depthBuffer&&(Li|=x.DEPTH_BUFFER_BIT),vt.stencilBuffer&&vt.resolveStencilBuffer&&(Li|=x.STENCIL_BUFFER_BIT)),ji){x.framebufferRenderbuffer(x.READ_FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.RENDERBUFFER,Hn.__webglColorRenderbuffer[_n]);const _s=m.get(Je[_n]).__webglTexture;x.framebufferTexture2D(x.DRAW_FRAMEBUFFER,x.COLOR_ATTACHMENT0,x.TEXTURE_2D,_s,0)}x.blitFramebuffer(0,0,li,wi,0,0,li,wi,Li,x.NEAREST),W===!0&&(ki.length=0,hn.length=0,ki.push(x.COLOR_ATTACHMENT0+_n),vt.depthBuffer&&vt.resolveDepthBuffer===!1&&(ki.push(bi),hn.push(bi),x.invalidateFramebuffer(x.DRAW_FRAMEBUFFER,hn)),x.invalidateFramebuffer(x.READ_FRAMEBUFFER,ki))}if(h.bindFramebuffer(x.READ_FRAMEBUFFER,null),h.bindFramebuffer(x.DRAW_FRAMEBUFFER,null),ji)for(let _n=0;_n<Je.length;_n++){h.bindFramebuffer(x.FRAMEBUFFER,Hn.__webglMultisampledFramebuffer),x.framebufferRenderbuffer(x.FRAMEBUFFER,x.COLOR_ATTACHMENT0+_n,x.RENDERBUFFER,Hn.__webglColorRenderbuffer[_n]);const _s=m.get(Je[_n]).__webglTexture;h.bindFramebuffer(x.FRAMEBUFFER,Hn.__webglFramebuffer),x.framebufferTexture2D(x.DRAW_FRAMEBUFFER,x.COLOR_ATTACHMENT0+_n,x.TEXTURE_2D,_s,0)}h.bindFramebuffer(x.DRAW_FRAMEBUFFER,Hn.__webglMultisampledFramebuffer)}else if(vt.depthBuffer&&vt.resolveDepthBuffer===!1&&W){const Je=vt.stencilBuffer?x.DEPTH_STENCIL_ATTACHMENT:x.DEPTH_ATTACHMENT;x.invalidateFramebuffer(x.DRAW_FRAMEBUFFER,[Je])}}}function pr(vt){return Math.min(v.maxSamples,vt.samples)}function Cr(vt){const Je=m.get(vt);return vt.samples>0&&o.has("WEBGL_multisampled_render_to_texture")===!0&&Je.__useRenderToTexture!==!1}function ds(vt){const Je=b.render.frame;ue.get(vt)!==Je&&(ue.set(vt,Je),vt.update())}function wo(vt,Je){const li=vt.colorSpace,wi=vt.format,Li=vt.type;return vt.isCompressedTexture===!0||vt.isVideoTexture===!0||li!==xo&&li!==co&&(jr.getTransfer(li)===$r?(wi!==At||Li!==os)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",li)),Je}function Xs(vt){return typeof HTMLImageElement<"u"&&vt instanceof HTMLImageElement?(re.width=vt.naturalWidth||vt.width,re.height=vt.naturalHeight||vt.height):typeof VideoFrame<"u"&&vt instanceof VideoFrame?(re.width=vt.displayWidth,re.height=vt.displayHeight):(re.width=vt.width,re.height=vt.height),re}this.allocateTextureUnit=Gt,this.resetTextureUnits=Lt,this.setTexture2D=Ei,this.setTexture2DArray=$i,this.setTexture3D=ri,this.setTextureCube=zi,this.rebindTextures=fi,this.uploadTexture=Pn,this.setupRenderTarget=Gi,this.updateRenderTargetMipmap=Hi,this.updateMultisampleRenderTarget=Cn,this.setupDepthTexture=Qt,this.setupDepthRenderbuffer=Mi,this.setupFrameBufferTexture=en,this.useMultisampledRTT=Cr,this.runDeferredUploads=Ds,this.setDeferTextureUploads=hs}function hp(x,o){function h(m,v=co){let C;const b=jr.getTransfer(v);if(m===os)return x.UNSIGNED_BYTE;if(m===Ys)return x.UNSIGNED_SHORT_4_4_4_4;if(m===ca)return x.UNSIGNED_SHORT_5_5_5_1;if(m===al)return x.UNSIGNED_INT_5_9_9_9_REV;if(m===Vo)return x.BYTE;if(m===Ps)return x.SHORT;if(m===Fo)return x.UNSIGNED_SHORT;if(m===W0)return x.INT;if(m===zo)return x.UNSIGNED_INT;if(m===Rs)return x.FLOAT;if(m===ir)return x.HALF_FLOAT;if(m===ua)return x.ALPHA;if(m===$e)return x.RGB;if(m===At)return x.RGBA;if(m===Pt)return x.LUMINANCE;if(m===si)return x.LUMINANCE_ALPHA;if(m===kt)return x.DEPTH_COMPONENT;if(m===di)return x.DEPTH_STENCIL;if(m===Ii)return x.RED;if(m===pn)return x.RED_INTEGER;if(m===nn)return x.RG;if(m===hi)return x.RG_INTEGER;if(m===Tn)return x.RGBA_INTEGER;if(m===Bn||m===Dn||m===ns||m===Kn)if(b===$r)if(C=o.get("WEBGL_compressed_texture_s3tc_srgb"),C!==null){if(m===Bn)return C.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(m===Dn)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(m===ns)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(m===Kn)return C.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(C=o.get("WEBGL_compressed_texture_s3tc"),C!==null){if(m===Bn)return C.COMPRESSED_RGB_S3TC_DXT1_EXT;if(m===Dn)return C.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(m===ns)return C.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(m===Kn)return C.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(m===or||m===br||m===gs||m===bs)if(C=o.get("WEBGL_compressed_texture_pvrtc"),C!==null){if(m===or)return C.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(m===br)return C.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(m===gs)return C.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(m===bs)return C.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(m===rn||m===$n||m===as)if(C=o.get("WEBGL_compressed_texture_etc"),C!==null){if(m===rn||m===$n)return b===$r?C.COMPRESSED_SRGB8_ETC2:C.COMPRESSED_RGB8_ETC2;if(m===as)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:C.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(m===Or||m===_e||m===Re||m===Fe||m===We||m===it||m===_t||m===Dt||m===ei||m===pi||m===Ut||m===ni||m===Ri||m===an)if(C=o.get("WEBGL_compressed_texture_astc"),C!==null){if(m===Or)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:C.COMPRESSED_RGBA_ASTC_4x4_KHR;if(m===_e)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:C.COMPRESSED_RGBA_ASTC_5x4_KHR;if(m===Re)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:C.COMPRESSED_RGBA_ASTC_5x5_KHR;if(m===Fe)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:C.COMPRESSED_RGBA_ASTC_6x5_KHR;if(m===We)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:C.COMPRESSED_RGBA_ASTC_6x6_KHR;if(m===it)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:C.COMPRESSED_RGBA_ASTC_8x5_KHR;if(m===_t)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:C.COMPRESSED_RGBA_ASTC_8x6_KHR;if(m===Dt)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:C.COMPRESSED_RGBA_ASTC_8x8_KHR;if(m===ei)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:C.COMPRESSED_RGBA_ASTC_10x5_KHR;if(m===pi)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:C.COMPRESSED_RGBA_ASTC_10x6_KHR;if(m===Ut)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:C.COMPRESSED_RGBA_ASTC_10x8_KHR;if(m===ni)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:C.COMPRESSED_RGBA_ASTC_10x10_KHR;if(m===Ri)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:C.COMPRESSED_RGBA_ASTC_12x10_KHR;if(m===an)return b===$r?C.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:C.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(m===mi||m===On||m===nr)if(C=o.get("EXT_texture_compression_bptc"),C!==null){if(m===mi)return b===$r?C.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:C.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(m===On)return C.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(m===nr)return C.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(m===Qn||m===Ln||m===gr||m===Qr)if(C=o.get("EXT_texture_compression_rgtc"),C!==null){if(m===mi)return C.COMPRESSED_RED_RGTC1_EXT;if(m===Ln)return C.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(m===gr)return C.COMPRESSED_RED_GREEN_RGTC2_EXT;if(m===Qr)return C.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return m===L0?x.UNSIGNED_INT_24_8:x[m]!==void 0?x[m]:null}return{convert:h}}class ih extends Nr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class g2 extends Ls{constructor(o=[]){super(),this.isArrayCamera=!0,this.cameras=o}}var dp=new nt,fp=new nt;function _m(x,o,h){dp.setFromMatrixPosition(o.matrixWorld),fp.setFromMatrixPosition(h.matrixWorld);var m=dp.distanceTo(fp),v=o.projectionMatrix.elements,C=h.projectionMatrix.elements,b=v[14]/(v[10]-1),L=v[14]/(v[10]+1),W=(v[9]+1)/v[5],J=(v[9]-1)/v[5],re=(v[8]-1)/v[0],ue=(C[8]+1)/C[0],pe=b*re,ve=b*ue,xe=m/(-re+ue),Le=xe*-re;o.matrixWorld.decompose(x.position,x.quaternion,x.scale),x.translateX(Le),x.translateZ(xe),x.matrixWorld.compose(x.position,x.quaternion,x.scale),x.matrixWorldInverse.copy(x.matrixWorld).invert();var Se=b+xe,Ee=L+xe,Ke=pe-Le,Ge=ve+(m-Le),Ue=W*L/Ee*Se,Ct=J*L/Ee*Se;x.projectionMatrix.makePerspective(Ke,Ge,Ue,Ct,Se,Ee)}function pp(x){var o,h,m=this,v=null,C=null,b=null,L=[],W=new on,J=new on,re=1,ue="local-floor";typeof window<"u"&&"VRFrameData"in window&&(C=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",Ue,!1));var pe=new on,ve=new xr,xe=new nt,Le=new Ls;Le.viewport=new zr,Le.layers.enable(1);var Se=new Ls;Se.viewport=new zr,Se.layers.enable(2);var Ee=new g2([Le,Se]);Ee.layers.enable(1),Ee.layers.enable(2);var Ke=new vi,Ge;function Ue(){var wt=m.isPresenting=v!==null&&v.isPresenting===!0;if(wt){var Ft=v.getEyeParameters("left");o=2*Ft.renderWidth*re,h=Ft.renderHeight*re,Ge=x.getPixelRatio(),x.getSize(Ke),x.setDrawingBufferSize(o,h,1),Le.viewport.set(0,0,o/2,h),Se.viewport.set(o/2,0,o/2,h),qe.start(),m.dispatchEvent({type:"sessionstart"})}else m.enabled&&x.setDrawingBufferSize(Ke.width,Ke.height,Ge),qe.stop(),m.dispatchEvent({type:"sessionend"})}var Ct=[],at=[];function ft(wt){for(var Ft=navigator.getGamepads&&navigator.getGamepads(),Lt=0,Gt=Ft.length;Lt<Gt;Lt++){var ti=Ft[Lt];if(ti&&(ti.id==="Daydream Controller"||ti.id==="Gear VR Controller"||ti.id==="Oculus Go Controller"||ti.id==="OpenVR Gamepad"||ti.id.startsWith("Oculus Touch")||ti.id.startsWith("HTC Vive Focus")||ti.id.startsWith("Spatial Controller"))){var Ei=ti.hand;if(wt===0&&(Ei===""||Ei==="right")||wt===1&&Ei==="left")return ti}}}function yt(){for(var wt=0;wt<L.length;wt++){var Ft=L[wt],Lt=ft(wt);if(Lt!==void 0&&Lt.pose!==void 0){if(Lt.pose===null)return;var Gt=Lt.pose;Gt.hasPosition===!1&&Ft.position.set(.2,-.6,-.05),Gt.position!==null&&Ft.position.fromArray(Gt.position),Gt.orientation!==null&&Ft.quaternion.fromArray(Gt.orientation),Ft.matrix.compose(Ft.position,Ft.quaternion,Ft.scale),Ft.matrix.premultiply(W),Ft.matrix.decompose(Ft.position,Ft.quaternion,Ft.scale),Ft.matrixWorldNeedsUpdate=!0,Ft.visible=!0;var ti=Lt.id==="Daydream Controller"?0:1;Ct[wt]===void 0&&(Ct[wt]=!1),Ct[wt]!==Lt.buttons[ti].pressed&&(Ct[wt]=Lt.buttons[ti].pressed,Ct[wt]===!0?Ft.dispatchEvent({type:"selectstart"}):(Ft.dispatchEvent({type:"selectend"}),Ft.dispatchEvent({type:"select"}))),ti=2,at[wt]===void 0&&(at[wt]=!1),Lt.buttons[ti]!==void 0&&at[wt]!==Lt.buttons[ti].pressed&&(at[wt]=Lt.buttons[ti].pressed,at[wt]===!0?Ft.dispatchEvent({type:"squeezestart"}):(Ft.dispatchEvent({type:"squeezeend"}),Ft.dispatchEvent({type:"squeeze"})))}else Ft.visible=!1}}function et(wt,Ft){Ft!==null&&Ft.length===4&&wt.set(Ft[0]*o,Ft[1]*h,Ft[2]*o,Ft[3]*h)}this.enabled=!1,this.getController=function(wt){var Ft=L[wt];return Ft===void 0&&(Ft=new ih,Ft.matrixAutoUpdate=!1,Ft.visible=!1,L[wt]=Ft),Ft},this.getDevice=function(){return v},this.setDevice=function(wt){wt!==void 0&&(v=wt),qe.setContext(wt)},this.setFramebufferScaleFactor=function(wt){re=wt},this.setReferenceSpaceType=function(wt){ue=wt},this.setPoseTarget=function(wt){wt!==void 0&&(b=wt)},this.cameraAutoUpdate=!0,this.updateCamera=function(wt){var Ft=ue==="local-floor"?1.6:0;if(v.depthNear=wt.near,v.depthFar=wt.far,v.getFrameData(C),ue==="local-floor"){var Lt=v.stageParameters;Lt?W.fromArray(Lt.sittingToStandingTransform):W.makeTranslation(0,Ft,0)}var Gt=C.pose,ti=b!==null?b:wt;ti.matrix.copy(W),ti.matrix.decompose(ti.position,ti.quaternion,ti.scale),Gt.orientation!==null&&(ve.fromArray(Gt.orientation),ti.quaternion.multiply(ve)),Gt.position!==null&&(ve.setFromRotationMatrix(W),xe.fromArray(Gt.position),xe.applyQuaternion(ve),ti.position.add(xe)),ti.updateMatrixWorld();for(var Ei=ti.children,$i=0,ri=Ei.length;$i<ri;$i++)Ei[$i].updateMatrixWorld(!0);Le.near=wt.near,Se.near=wt.near,Le.far=wt.far,Se.far=wt.far,Le.matrixWorldInverse.fromArray(C.leftViewMatrix),Se.matrixWorldInverse.fromArray(C.rightViewMatrix),J.copy(W).invert(),ue==="local-floor"&&(Le.matrixWorldInverse.multiply(J),Se.matrixWorldInverse.multiply(J));var zi=ti.parent;zi!==null&&(pe.copy(zi.matrixWorld).invert(),Le.matrixWorldInverse.multiply(pe),Se.matrixWorldInverse.multiply(pe)),Le.matrixWorld.copy(Le.matrixWorldInverse).invert(),Se.matrixWorld.copy(Se.matrixWorldInverse).invert(),Le.projectionMatrix.fromArray(C.leftProjectionMatrix),Se.projectionMatrix.fromArray(C.rightProjectionMatrix),_m(Ee,Le,Se);var Yi=v.getLayers();if(Yi.length){var Rn=Yi[0];et(Le.viewport,Rn.leftBounds),et(Se.viewport,Rn.rightBounds)}return yt(),Ee},this.getCamera=function(){return Ee},this.getFoveation=function(){return 1},this.setFoveation=function(wt){wt!==1&&console.warn("THREE.WebVRManager: setFoveation() not used in WebVR.")},this.getEnvironmentBlendMode=function(){if(m.isPresenting)return"opaque"},this.getStandingMatrix=function(){return W},this.isPresenting=!1;var qe=new a1;this.setAnimationLoop=function(wt){qe.setAnimationLoop(wt),this.isPresenting&&qe.start()},this.submitFrame=function(){this.isPresenting&&v.submitFrame()},this.dispose=function(){typeof window<"u"&&window.removeEventListener("vrdisplaypresentchange",Ue)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}Object.assign(pp.prototype,{addEventListener:uo.prototype.addEventListener,hasEventListener:uo.prototype.hasEventListener,removeEventListener:uo.prototype.removeEventListener,dispatchEvent:uo.prototype.dispatchEvent});class Ap extends js{constructor(o,h,m,v={}){super(o,h,v),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=m}copy(o){return super.copy(o),this.numViews=o.numViews,this}}Ap.prototype.isWebGLMultiviewRenderTarget=!0;const xm={type:"move"};class v2{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ih,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ih,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new nt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new nt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ih,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new nt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new nt),this._grip}dispatchEvent(o){return this._targetRay!==null&&this._targetRay.dispatchEvent(o),this._grip!==null&&this._grip.dispatchEvent(o),this._hand!==null&&this._hand.dispatchEvent(o),this}connect(o){if(o&&o.hand){const h=this._hand;if(h)for(const m of o.hand.values())this._getHandJoint(h,m)}return this.dispatchEvent({type:"connected",data:o}),this}disconnect(o){return this.dispatchEvent({type:"disconnected",data:o}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(o,h,m){let v=null,C=null,b=null;const L=this._targetRay,W=this._grip,J=this._hand;if(o&&h.session.visibilityState!=="visible-blurred"){if(J&&o.hand){b=!0;for(const Le of o.hand.values()){const Se=h.getJointPose(Le,m),Ee=this._getHandJoint(J,Le);Se!==null&&(Ee.matrix.fromArray(Se.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.rotation,Ee.scale),Ee.matrixWorldNeedsUpdate=!0,Ee.jointRadius=Se.radius),Ee.visible=Se!==null}const re=J.joints["index-finger-tip"],ue=J.joints["thumb-tip"],pe=re.position.distanceTo(ue.position),ve=.02,xe=.005;J.inputState.pinching&&pe>ve+xe?(J.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:o.handedness,target:this})):!J.inputState.pinching&&pe<=ve-xe&&(J.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:o.handedness,target:this}))}else W!==null&&o.gripSpace&&(C=h.getPose(o.gripSpace,m),C!==null&&(W.matrix.fromArray(C.transform.matrix),W.matrix.decompose(W.position,W.rotation,W.scale),W.matrixWorldNeedsUpdate=!0,C.linearVelocity?(W.hasLinearVelocity=!0,W.linearVelocity.copy(C.linearVelocity)):W.hasLinearVelocity=!1,C.angularVelocity?(W.hasAngularVelocity=!0,W.angularVelocity.copy(C.angularVelocity)):W.hasAngularVelocity=!1));L!==null&&(v=h.getPose(o.targetRaySpace,m),v===null&&C!==null&&(v=C),v!==null&&(L.matrix.fromArray(v.transform.matrix),L.matrix.decompose(L.position,L.rotation,L.scale),L.matrixWorldNeedsUpdate=!0,v.linearVelocity?(L.hasLinearVelocity=!0,L.linearVelocity.copy(v.linearVelocity)):L.hasLinearVelocity=!1,v.angularVelocity?(L.hasAngularVelocity=!0,L.angularVelocity.copy(v.angularVelocity)):L.hasAngularVelocity=!1,this.dispatchEvent(xm)))}return L!==null&&(L.visible=v!==null),W!==null&&(W.visible=C!==null),J!==null&&(J.visible=b!==null),this}_getHandJoint(o,h){if(o.joints[h.jointName]===void 0){const m=new ih;m.matrixAutoUpdate=!1,m.visible=!1,o.joints[h.jointName]=m,o.add(m)}return o.joints[h.jointName]}}const Mm=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Sm=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class bm{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(o,h,m){if(this.texture===null){const v=new cs,C=o.properties.get(v);C.__webglTexture=h.texture,(h.depthNear!=m.depthNear||h.depthFar!=m.depthFar)&&(this.depthNear=h.depthNear,this.depthFar=h.depthFar),this.texture=v}}render(o,h){if(this.texture!==null){if(this.mesh===null){const m=h.cameras[0].viewport,v=new w0({vertexShader:Mm,fragmentShader:Sm,uniforms:{depthColor:{value:this.texture},depthWidth:{value:m.z},depthHeight:{value:m.w}}});this.mesh=new Bs(new Da(20,20),v)}o.render(this.mesh,h)}}reset(){this.texture=null,this.mesh=null}}class Tm extends uo{constructor(o,h,m,v){super();const C=this;let b=null,L=1;var W=null;let J=null,re="local-floor",ue=1,pe=null,ve=null;var xe=[];let Le=null,Se=null,Ee=null,Ke=null;const Ge=new bm,Ue=h.getContextAttributes();let Ct=null,at=null;const ft=[],yt=[],et=new vi;let qe=null;const wt=new Ls;wt.layers.enable(1),wt.viewport=new zr;const Ft=new Ls;Ft.layers.enable(2),Ft.viewport=new zr;const Lt=[wt,Ft],Gt=new g2;Gt.layers.enable(1),Gt.layers.enable(2);let ti=null,Ei=null;this.cameraAutoUpdate=!0,this.layersEnabled=!1,this.enabled=!1,this.isPresenting=!1,this.isMultiview=!1,this.getCameraPose=function(){return ve},this.getController=function(xi){let en=ft[xi];return en===void 0&&(en=new v2,ft[xi]=en),en.getTargetRaySpace()},this.getControllerGrip=function(xi){let en=ft[xi];return en===void 0&&(en=new v2,ft[xi]=en),en.getGripSpace()},this.getHand=function(xi){let en=ft[xi];return en===void 0&&(en=new v2,ft[xi]=en),en.getHandSpace()};function $i(xi){const en=yt.indexOf(xi.inputSource);if(en===-1)return;const ln=ft[en];ln!==void 0&&(ln.update(xi.inputSource,xi.frame,pe||J),ln.dispatchEvent({type:xi.type,data:xi.inputSource}))}function ri(){b.removeEventListener("select",$i),b.removeEventListener("selectstart",$i),b.removeEventListener("selectend",$i),b.removeEventListener("squeeze",$i),b.removeEventListener("squeezestart",$i),b.removeEventListener("squeezeend",$i),b.removeEventListener("end",ri),b.removeEventListener("inputsourceschange",zi);for(let xi=0;xi<ft.length;xi++){const en=yt[xi];en!==null&&(yt[xi]=null,ft[xi].disconnect(en))}ti=null,Ei=null,Ge.reset(),o.setRenderTarget(Ct),Ee=null,Se=null,Le=null,b=null,at=null,Pn.stop(),C.isPresenting=!1,o.setPixelRatio(qe),o.setSize(et.width,et.height,!1),C.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(xi){L=xi,C.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(xi){re=xi,C.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return pe||J},this.setReferenceSpace=function(xi){pe=xi},this.getBaseLayer=function(){return Se!==null?Se:Ee},this.getBinding=function(){return Le},this.getFrame=function(){return Ke},this.getSession=function(){return b},this.setSession=async function(xi){if(b=xi,b!==null){if(Ct=o.getRenderTarget(),b.addEventListener("select",$i),b.addEventListener("selectstart",$i),b.addEventListener("selectend",$i),b.addEventListener("squeeze",$i),b.addEventListener("squeezestart",$i),b.addEventListener("squeezeend",$i),b.addEventListener("end",ri),b.addEventListener("inputsourceschange",zi),Ue.xrCompatible!==!0&&await h.makeXRCompatible(),qe=o.getPixelRatio(),o.getSize(et),b.renderState.layers===void 0){const en={antialias:Ue.antialias,alpha:!0,depth:Ue.depth,stencil:Ue.stencil,framebufferScaleFactor:L};Ee=new XRWebGLLayer(b,h,en),b.updateRenderState({baseLayer:Ee}),o.setPixelRatio(1),o.setSize(Ee.framebufferWidth,Ee.framebufferHeight,!1),at=new js(Ee.framebufferWidth,Ee.framebufferHeight,{format:At,type:os,colorSpace:o.outputColorSpace,stencilBuffer:Ue.stencil})}else{let en=null,ln=null,Qt=null;Ue.depth&&(Qt=Ue.stencil?h.DEPTH24_STENCIL8:h.DEPTH_COMPONENT24,en=Ue.stencil?di:kt,ln=Ue.stencil?L0:zo),C.isMultiview=v&&m.has("OCULUS_multiview");const Mi={colorFormat:h.RGBA8,depthFormat:Qt,scaleFactor:L};C.isMultiview&&(Mi.textureType="texture-array"),Le=new XRWebGLBinding(b,h),Se=Le.createProjectionLayer(Mi),b.updateRenderState({layers:[Se]}),o.setPixelRatio(1),o.setSize(Se.textureWidth,Se.textureHeight,!1);const fi={format:At,type:os,depthTexture:new z1(Se.textureWidth,Se.textureHeight,ln,void 0,void 0,void 0,void 0,void 0,void 0,en),stencilBuffer:Ue.stencil,colorSpace:o.outputColorSpace,samples:Ue.antialias?4:0,resolveDepthBuffer:Se.ignoreDepthValues===!1};if(C.isMultiview){const Gi=m.get("OCULUS_multiview");this.maxNumViews=h.getParameter(Gi.MAX_VIEWS_OVR),at=new Ap(Se.textureWidth,Se.textureHeight,2,fi)}else at=new js(Se.textureWidth,Se.textureHeight,fi)}at.isXRRenderTarget=!0,this.setFoveation(ue),pe=null,J=await b.requestReferenceSpace(re),Pn.setContext(b),Pn.start(),C.isPresenting=!0,C.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(b!==null)return b.environmentBlendMode},this.addLayer=function(xi){!window.XRWebGLBinding||!this.layersEnabled||!b||(xe.push(xi),this.updateLayers())},this.removeLayer=function(xi){xe.splice(xe.indexOf(xi),1),!(!window.XRWebGLBinding||!this.layersEnabled||!b)&&this.updateLayers()},this.updateLayers=function(){var xi=xe.map(function(en){return en});xi.unshift(b.renderState.layers[0]),b.updateRenderState({layers:xi})};function zi(xi){for(let en=0;en<xi.removed.length;en++){const ln=xi.removed[en],Qt=yt.indexOf(ln);Qt>=0&&(yt[Qt]=null,ft[Qt].disconnect(ln))}for(let en=0;en<xi.added.length;en++){const ln=xi.added[en];let Qt=yt.indexOf(ln);if(Qt===-1){for(let fi=0;fi<ft.length;fi++)if(fi>=yt.length){yt.push(ln),Qt=fi;break}else if(yt[fi]===null){yt[fi]=ln,Qt=fi;break}if(Qt===-1)break}const Mi=ft[Qt];Mi&&Mi.connect(ln)}}const Yi=new nt,Rn=new nt;function Br(xi,en,ln){Yi.setFromMatrixPosition(en.matrixWorld),Rn.setFromMatrixPosition(ln.matrixWorld);const Qt=Yi.distanceTo(Rn),Mi=en.projectionMatrix.elements,fi=ln.projectionMatrix.elements,Gi=Mi[14]/(Mi[10]-1),Hi=Mi[14]/(Mi[10]+1),ki=(Mi[9]+1)/Mi[5],hn=(Mi[9]-1)/Mi[5],Cn=(Mi[8]-1)/Mi[0],pr=(fi[8]+1)/fi[0],Cr=Gi*Cn,ds=Gi*pr,wo=Qt/(-Cn+pr),Xs=wo*-Cn;en.matrixWorld.decompose(xi.position,xi.quaternion,xi.scale),xi.translateX(Xs),xi.translateZ(wo),xi.matrixWorld.compose(xi.position,xi.quaternion,xi.scale),xi.matrixWorldInverse.copy(xi.matrixWorld).invert();const vt=Gi+wo,Je=Hi+wo,li=Cr-Xs,wi=ds+(Qt-Xs),Li=ki*Hi/Je*vt,bi=hn*Hi/Je*vt;xi.projectionMatrix.makePerspective(li,wi,Li,bi,vt,Je),xi.projectionMatrixInverse.copy(xi.projectionMatrix).invert()}function As(xi,en){en===null?xi.matrixWorld.copy(xi.matrix):xi.matrixWorld.multiplyMatrices(en.matrixWorld,xi.matrix),xi.matrixWorldInverse.copy(xi.matrixWorld).invert()}this.setPoseTarget=function(xi){xi!==void 0&&(W=xi)},this.updateCamera=function(xi){if(b===null)return;Ge.texture!==null&&(xi.near=Ge.depthNear,xi.far=Ge.depthFar),Gt.near=Ft.near=wt.near=xi.near,Gt.far=Ft.far=wt.far=xi.far,(ti!==Gt.near||Ei!==Gt.far)&&(b.updateRenderState({depthNear:Gt.near,depthFar:Gt.far}),ti=Gt.near,Ei=Gt.far,wt.near=ti,wt.far=Ei,Ft.near=ti,Ft.far=Ei,wt.updateProjectionMatrix(),Ft.updateProjectionMatrix(),xi.updateProjectionMatrix());const en=Gt.cameras;var ln=W||xi;const Qt=ln.parent;As(Gt,Qt);for(let Mi=0;Mi<en.length;Mi++)As(en[Mi],Qt);en.length===2?Br(Gt,wt,Ft):Gt.projectionMatrix.copy(wt.projectionMatrix),Ks(xi,Gt,ln)};function Ks(xi,en,ln){en.matrixWorld.decompose(en.position,en.quaternion,en.scale),ln.parent===null?ln.matrix.copy(en.matrixWorld):(ln.matrix.copy(ln.parent.matrixWorld),ln.matrix.invert(),ln.matrix.multiply(en.matrixWorld)),ln.matrix.decompose(ln.position,ln.quaternion,ln.scale),ln.updateMatrixWorld(!0),xi.projectionMatrix.copy(en.projectionMatrix),xi.projectionMatrixInverse.copy(en.projectionMatrixInverse),xi.isPerspectiveCamera&&(xi.fov=Va*2*Math.atan(1/xi.projectionMatrix.elements[5]),xi.zoom=1)}this.getCamera=function(){return Gt},this.getFoveation=function(){if(!(Se===null&&Ee===null))return ue},this.setFoveation=function(xi){ue=xi,Se!==null&&(Se.fixedFoveation=xi),Ee!==null&&Ee.fixedFoveation!==void 0&&(Ee.fixedFoveation=xi)},this.hasDepthSensing=function(){return Ge.texture!==null};let hs=null;function Ds(xi,en){if(ve=en.getViewerPose(pe||J),Ke=en,ve!==null){const ln=ve.views;Ee!==null&&(o.setRenderTargetFramebuffer(at,Ee.framebuffer),o.setRenderTarget(at));let Qt=!1;ln.length!==Gt.cameras.length&&(Gt.cameras.length=0,Qt=!0);for(let fi=0;fi<ln.length;fi++){const Gi=ln[fi];let Hi=null;if(Ee!==null)Hi=Ee.getViewport(Gi);else{const hn=Le.getViewSubImage(Se,Gi);Hi=hn.viewport,fi===0&&(o.setRenderTargetTextures(at,hn.colorTexture,Se.ignoreDepthValues?void 0:hn.depthStencilTexture),o.setRenderTarget(at))}let ki=Lt[fi];ki===void 0&&(ki=new Ls,ki.layers.enable(fi),ki.viewport=new zr,Lt[fi]=ki),ki.matrix.fromArray(Gi.transform.matrix),ki.matrix.decompose(ki.position,ki.quaternion,ki.scale),ki.projectionMatrix.fromArray(Gi.projectionMatrix),ki.projectionMatrixInverse.copy(ki.projectionMatrix).invert(),ki.viewport.set(Hi.x,Hi.y,Hi.width,Hi.height),fi===0&&(Gt.matrix.copy(ki.matrix),Gt.matrix.decompose(Gt.position,Gt.quaternion,Gt.scale)),Qt===!0&&Gt.cameras.push(ki)}const Mi=b.enabledFeatures;if(Mi&&Mi.includes("depth-sensing")){const fi=Le.getDepthInformation(ln[0]);fi&&fi.isValid&&fi.texture&&Ge.init(o,fi,b.renderState)}}for(let ln=0;ln<ft.length;ln++){const Qt=yt[ln],Mi=ft[ln];Qt!==null&&Mi!==void 0&&Mi.update(Qt,en,pe||J)}Ge.render(o,Gt),hs&&hs(xi,en),en.detectedPlanes&&C.dispatchEvent({type:"planesdetected",data:en}),Ke=null}const Pn=new a1;Pn.setAnimationLoop(Ds),this.setAnimationLoop=function(xi){hs=xi},this.dispose=function(){}}}const nh=new a0,Rm=new on;function Im(x,o){function h(Se,Ee){Se.matrixAutoUpdate===!0&&Se.updateMatrix(),Ee.value.copy(Se.matrix)}function m(Se,Ee){Ee.color.getRGB(Se.fogColor.value,O1(x)),Ee.isFog?(Se.fogNear.value=Ee.near,Se.fogFar.value=Ee.far):Ee.isFogExp2&&(Se.fogDensity.value=Ee.density)}function v(Se,Ee,Ke,Ge,Ue){Ee.isMeshBasicMaterial||Ee.isMeshLambertMaterial?C(Se,Ee):Ee.isMeshToonMaterial?(C(Se,Ee),ue(Se,Ee)):Ee.isMeshPhongMaterial?(C(Se,Ee),re(Se,Ee)):Ee.isMeshStandardMaterial?(C(Se,Ee),pe(Se,Ee),Ee.isMeshPhysicalMaterial&&ve(Se,Ee,Ue)):Ee.isMeshMatcapMaterial?(C(Se,Ee),xe(Se,Ee)):Ee.isMeshDepthMaterial?C(Se,Ee):Ee.isMeshDistanceMaterial?(C(Se,Ee),Le(Se,Ee)):Ee.isMeshNormalMaterial?C(Se,Ee):Ee.isLineBasicMaterial?(b(Se,Ee),Ee.isLineDashedMaterial&&L(Se,Ee)):Ee.isPointsMaterial?W(Se,Ee,Ke,Ge):Ee.isSpriteMaterial?J(Se,Ee):Ee.isShadowMaterial?(Se.color.value.copy(Ee.color),Se.opacity.value=Ee.opacity):Ee.isShaderMaterial&&(Ee.uniformsNeedUpdate=!1)}function C(Se,Ee){Se.opacity.value=Ee.opacity,Ee.color&&Se.diffuse.value.copy(Ee.color),Ee.emissive&&Se.emissive.value.copy(Ee.emissive).multiplyScalar(Ee.emissiveIntensity),Ee.map&&(Se.map.value=Ee.map,h(Ee.map,Se.mapTransform)),Ee.alphaMap&&(Se.alphaMap.value=Ee.alphaMap,h(Ee.alphaMap,Se.alphaMapTransform)),Ee.bumpMap&&(Se.bumpMap.value=Ee.bumpMap,h(Ee.bumpMap,Se.bumpMapTransform),Se.bumpScale.value=Ee.bumpScale,Ee.side===Z&&(Se.bumpScale.value*=-1)),Ee.normalMap&&(Se.normalMap.value=Ee.normalMap,h(Ee.normalMap,Se.normalMapTransform),Se.normalScale.value.copy(Ee.normalScale),Ee.side===Z&&Se.normalScale.value.negate()),Ee.displacementMap&&(Se.displacementMap.value=Ee.displacementMap,h(Ee.displacementMap,Se.displacementMapTransform),Se.displacementScale.value=Ee.displacementScale,Se.displacementBias.value=Ee.displacementBias),Ee.emissiveMap&&(Se.emissiveMap.value=Ee.emissiveMap,h(Ee.emissiveMap,Se.emissiveMapTransform)),Ee.specularMap&&(Se.specularMap.value=Ee.specularMap,h(Ee.specularMap,Se.specularMapTransform)),Ee.alphaTest>0&&(Se.alphaTest.value=Ee.alphaTest);const Ke=o.get(Ee),Ge=Ke.envMap,Ue=Ke.envMapRotation;if(Ge&&(Se.envMap.value=Ge,nh.copy(Ue),nh.x*=-1,nh.y*=-1,nh.z*=-1,Ge.isCubeTexture&&Ge.isRenderTargetTexture===!1&&(nh.y*=-1,nh.z*=-1),Se.envMapRotation.value.setFromMatrix4(Rm.makeRotationFromEuler(nh)),Se.flipEnvMap.value=Ge.isCubeTexture&&Ge.isRenderTargetTexture===!1?-1:1,Se.reflectivity.value=Ee.reflectivity,Se.ior.value=Ee.ior,Se.refractionRatio.value=Ee.refractionRatio),Ee.lightMap){Se.lightMap.value=Ee.lightMap;const Ct=x._useLegacyLights===!0?Math.PI:1;Se.lightMapIntensity.value=Ee.lightMapIntensity*Ct,h(Ee.lightMap,Se.lightMapTransform)}Ee.aoMap&&(Se.aoMap.value=Ee.aoMap,Se.aoMapIntensity.value=Ee.aoMapIntensity,h(Ee.aoMap,Se.aoMapTransform))}function b(Se,Ee){Se.diffuse.value.copy(Ee.color),Se.opacity.value=Ee.opacity,Ee.map&&(Se.map.value=Ee.map,h(Ee.map,Se.mapTransform))}function L(Se,Ee){Se.dashSize.value=Ee.dashSize,Se.totalSize.value=Ee.dashSize+Ee.gapSize,Se.scale.value=Ee.scale}function W(Se,Ee,Ke,Ge){Se.diffuse.value.copy(Ee.color),Se.opacity.value=Ee.opacity,Se.size.value=Ee.size*Ke,Se.scale.value=Ge*.5,Ee.map&&(Se.map.value=Ee.map,h(Ee.map,Se.uvTransform)),Ee.alphaMap&&(Se.alphaMap.value=Ee.alphaMap,h(Ee.alphaMap,Se.alphaMapTransform)),Ee.alphaTest>0&&(Se.alphaTest.value=Ee.alphaTest)}function J(Se,Ee){Se.diffuse.value.copy(Ee.color),Se.opacity.value=Ee.opacity,Se.rotation.value=Ee.rotation,Ee.map&&(Se.map.value=Ee.map,h(Ee.map,Se.mapTransform)),Ee.alphaMap&&(Se.alphaMap.value=Ee.alphaMap,h(Ee.alphaMap,Se.alphaMapTransform)),Ee.alphaTest>0&&(Se.alphaTest.value=Ee.alphaTest)}function re(Se,Ee){Se.specular.value.copy(Ee.specular),Se.shininess.value=Math.max(Ee.shininess,1e-4)}function ue(Se,Ee){Ee.gradientMap&&(Se.gradientMap.value=Ee.gradientMap)}function pe(Se,Ee){Se.metalness.value=Ee.metalness,Ee.metalnessMap&&(Se.metalnessMap.value=Ee.metalnessMap,h(Ee.metalnessMap,Se.metalnessMapTransform)),Se.roughness.value=Ee.roughness,Ee.roughnessMap&&(Se.roughnessMap.value=Ee.roughnessMap,h(Ee.roughnessMap,Se.roughnessMapTransform)),Ee.envMap&&(Se.envMapIntensity.value=Ee.envMapIntensity)}function ve(Se,Ee,Ke){Se.ior.value=Ee.ior,Ee.sheen>0&&(Se.sheenColor.value.copy(Ee.sheenColor).multiplyScalar(Ee.sheen),Se.sheenRoughness.value=Ee.sheenRoughness,Ee.sheenColorMap&&(Se.sheenColorMap.value=Ee.sheenColorMap,h(Ee.sheenColorMap,Se.sheenColorMapTransform)),Ee.sheenRoughnessMap&&(Se.sheenRoughnessMap.value=Ee.sheenRoughnessMap,h(Ee.sheenRoughnessMap,Se.sheenRoughnessMapTransform))),Ee.clearcoat>0&&(Se.clearcoat.value=Ee.clearcoat,Se.clearcoatRoughness.value=Ee.clearcoatRoughness,Ee.clearcoatMap&&(Se.clearcoatMap.value=Ee.clearcoatMap,h(Ee.clearcoatMap,Se.clearcoatMapTransform)),Ee.clearcoatRoughnessMap&&(Se.clearcoatRoughnessMap.value=Ee.clearcoatRoughnessMap,h(Ee.clearcoatRoughnessMap,Se.clearcoatRoughnessMapTransform)),Ee.clearcoatNormalMap&&(Se.clearcoatNormalMap.value=Ee.clearcoatNormalMap,h(Ee.clearcoatNormalMap,Se.clearcoatNormalMapTransform),Se.clearcoatNormalScale.value.copy(Ee.clearcoatNormalScale),Ee.side===Z&&Se.clearcoatNormalScale.value.negate())),Ee.dispersion>0&&(Se.dispersion.value=Ee.dispersion),Ee.iridescence>0&&(Se.iridescence.value=Ee.iridescence,Se.iridescenceIOR.value=Ee.iridescenceIOR,Se.iridescenceThicknessMinimum.value=Ee.iridescenceThicknessRange[0],Se.iridescenceThicknessMaximum.value=Ee.iridescenceThicknessRange[1],Ee.iridescenceMap&&(Se.iridescenceMap.value=Ee.iridescenceMap,h(Ee.iridescenceMap,Se.iridescenceMapTransform)),Ee.iridescenceThicknessMap&&(Se.iridescenceThicknessMap.value=Ee.iridescenceThicknessMap,h(Ee.iridescenceThicknessMap,Se.iridescenceThicknessMapTransform))),Ee.transmission>0&&(Se.transmission.value=Ee.transmission,Se.transmissionSamplerMap.value=Ke.texture,Se.transmissionSamplerSize.value.set(Ke.width,Ke.height),Ee.transmissionMap&&(Se.transmissionMap.value=Ee.transmissionMap,h(Ee.transmissionMap,Se.transmissionMapTransform)),Se.thickness.value=Ee.thickness,Ee.thicknessMap&&(Se.thicknessMap.value=Ee.thicknessMap,h(Ee.thicknessMap,Se.thicknessMapTransform)),Se.attenuationDistance.value=Ee.attenuationDistance,Se.attenuationColor.value.copy(Ee.attenuationColor)),Ee.anisotropy>0&&(Se.anisotropyVector.value.set(Ee.anisotropy*Math.cos(Ee.anisotropyRotation),Ee.anisotropy*Math.sin(Ee.anisotropyRotation)),Ee.anisotropyMap&&(Se.anisotropyMap.value=Ee.anisotropyMap,h(Ee.anisotropyMap,Se.anisotropyMapTransform))),Se.specularIntensity.value=Ee.specularIntensity,Se.specularColor.value.copy(Ee.specularColor),Ee.specularColorMap&&(Se.specularColorMap.value=Ee.specularColorMap,h(Ee.specularColorMap,Se.specularColorMapTransform)),Ee.specularIntensityMap&&(Se.specularIntensityMap.value=Ee.specularIntensityMap,h(Ee.specularIntensityMap,Se.specularIntensityMapTransform))}function xe(Se,Ee){Ee.matcap&&(Se.matcap.value=Ee.matcap)}function Le(Se,Ee){const Ke=o.get(Ee).light;Se.referencePosition.value.setFromMatrixPosition(Ke.matrixWorld),Se.nearDistance.value=Ke.shadow.camera.near,Se.farDistance.value=Ke.shadow.camera.far}return{refreshFogUniforms:m,refreshMaterialUniforms:v}}function Bm(x,o,h,m){let v={},C={},b=[];const L=x.getParameter(x.MAX_UNIFORM_BUFFER_BINDINGS);function W(Ke,Ge){const Ue=Ge.program;m.uniformBlockBinding(Ke,Ue)}function J(Ke,Ge){let Ue=v[Ke.id];Ue===void 0&&(xe(Ke),Ue=re(Ke),v[Ke.id]=Ue,Ke.addEventListener("dispose",Se));const Ct=Ge.program;m.updateUBOMapping(Ke,Ct);const at=o.render.frame;C[Ke.id]!==at&&(pe(Ke),C[Ke.id]=at)}function re(Ke){const Ge=ue();Ke.__bindingPointIndex=Ge;const Ue=x.createBuffer(),Ct=Ke.__size,at=Ke.usage;return x.bindBuffer(x.UNIFORM_BUFFER,Ue),x.bufferData(x.UNIFORM_BUFFER,Ct,at),x.bindBuffer(x.UNIFORM_BUFFER,null),x.bindBufferBase(x.UNIFORM_BUFFER,Ge,Ue),Ue}function ue(){for(let Ke=0;Ke<L;Ke++)if(b.indexOf(Ke)===-1)return b.push(Ke),Ke;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function pe(Ke){const Ge=v[Ke.id],Ue=Ke.uniforms,Ct=Ke.__cache;x.bindBuffer(x.UNIFORM_BUFFER,Ge);for(let at=0,ft=Ue.length;at<ft;at++){const yt=Array.isArray(Ue[at])?Ue[at]:[Ue[at]];for(let et=0,qe=yt.length;et<qe;et++){const wt=yt[et];if(ve(wt,at,et,Ct)===!0){const Ft=wt.__offset,Lt=Array.isArray(wt.value)?wt.value:[wt.value];let Gt=0;for(let ti=0;ti<Lt.length;ti++){const Ei=Lt[ti],$i=Le(Ei);typeof Ei=="number"||typeof Ei=="boolean"?(wt.__data[0]=Ei,x.bufferSubData(x.UNIFORM_BUFFER,Ft+Gt,wt.__data)):Ei.isMatrix3?(wt.__data[0]=Ei.elements[0],wt.__data[1]=Ei.elements[1],wt.__data[2]=Ei.elements[2],wt.__data[3]=0,wt.__data[4]=Ei.elements[3],wt.__data[5]=Ei.elements[4],wt.__data[6]=Ei.elements[5],wt.__data[7]=0,wt.__data[8]=Ei.elements[6],wt.__data[9]=Ei.elements[7],wt.__data[10]=Ei.elements[8],wt.__data[11]=0):(Ei.toArray(wt.__data,Gt),Gt+=$i.storage/Float32Array.BYTES_PER_ELEMENT)}x.bufferSubData(x.UNIFORM_BUFFER,Ft,wt.__data)}}}x.bindBuffer(x.UNIFORM_BUFFER,null)}function ve(Ke,Ge,Ue,Ct){const at=Ke.value,ft=Ge+"_"+Ue;if(Ct[ft]===void 0)return typeof at=="number"||typeof at=="boolean"?Ct[ft]=at:Ct[ft]=at.clone(),!0;{const yt=Ct[ft];if(typeof at=="number"||typeof at=="boolean"){if(yt!==at)return Ct[ft]=at,!0}else if(yt.equals(at)===!1)return yt.copy(at),!0}return!1}function xe(Ke){const Ge=Ke.uniforms;let Ue=0;const Ct=16;for(let ft=0,yt=Ge.length;ft<yt;ft++){const et=Array.isArray(Ge[ft])?Ge[ft]:[Ge[ft]];for(let qe=0,wt=et.length;qe<wt;qe++){const Ft=et[qe],Lt=Array.isArray(Ft.value)?Ft.value:[Ft.value];for(let Gt=0,ti=Lt.length;Gt<ti;Gt++){const Ei=Lt[Gt],$i=Le(Ei),ri=Ue%Ct;ri!==0&&Ct-ri<$i.boundary&&(Ue+=Ct-ri),Ft.__data=new Float32Array($i.storage/Float32Array.BYTES_PER_ELEMENT),Ft.__offset=Ue,Ue+=$i.storage}}}const at=Ue%Ct;return at>0&&(Ue+=Ct-at),Ke.__size=Ue,Ke.__cache={},this}function Le(Ke){const Ge={boundary:0,storage:0};return typeof Ke=="number"||typeof Ke=="boolean"?(Ge.boundary=4,Ge.storage=4):Ke.isVector2?(Ge.boundary=8,Ge.storage=8):Ke.isVector3||Ke.isColor?(Ge.boundary=16,Ge.storage=12):Ke.isVector4?(Ge.boundary=16,Ge.storage=16):Ke.isMatrix3?(Ge.boundary=48,Ge.storage=48):Ke.isMatrix4?(Ge.boundary=64,Ge.storage=64):Ke.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Ke),Ge}function Se(Ke){const Ge=Ke.target;Ge.removeEventListener("dispose",Se);const Ue=b.indexOf(Ge.__bindingPointIndex);b.splice(Ue,1),x.deleteBuffer(v[Ge.id]),delete v[Ge.id],delete C[Ge.id]}function Ee(){for(const Ke in v)x.deleteBuffer(v[Ke]);b=[],v={},C={}}return{bind:W,update:J,dispose:Ee}}class Lm{constructor(o={}){const{canvas:h=Zl(),context:m=null,depth:v=!0,stencil:C=!1,alpha:b=!1,antialias:L=!1,premultipliedAlpha:W=!0,preserveDrawingBuffer:J=!1,powerPreference:re="default",failIfMajorPerformanceCaveat:ue=!1,multiviewStereo:pe=!1}=o;this.isWebGLRenderer=!0;let ve;if(m!==null){if(typeof WebGLRenderingContext<"u"&&m instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");ve=m.getContextAttributes().alpha}else ve=b;const xe=new Uint32Array(4),Le=new Int32Array(4);let Se=null,Ee=null;const Ke=[],Ge=[];this.domElement=h,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Fr,this._useLegacyLights=!1,this.toneMapping=ts,this.toneMappingExposure=1;const Ue=this;let Ct=!1,at=0,ft=0,yt=null,et=-1,qe=null;const wt=new zr,Ft=new zr;let Lt=null;const Gt=new un(0);let ti=0,Ei=h.width,$i=h.height,ri=1,zi=null,Yi=null;const Rn=new zr(0,0,Ei,$i),Br=new zr(0,0,Ei,$i);let As=!1;const Ks=new il;let hs=!1,Ds=!1;const Pn=new on,xi=new nt,en={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ln(){return yt===null?ri:1}let Qt=m;function Mi(rt,Vt){return h.getContext(rt,Vt)}try{const rt={alpha:!0,depth:v,stencil:C,antialias:L,premultipliedAlpha:W,preserveDrawingBuffer:J,powerPreference:re,failIfMajorPerformanceCaveat:ue};if("setAttribute"in h&&h.setAttribute("data-engine",`three.js r${p}`),h.addEventListener("webglcontextlost",qi,!1),h.addEventListener("webglcontextrestored",Gn,!1),h.addEventListener("webglcontextcreationerror",yn,!1),Qt===null){const Vt="webgl2";if(Qt=Mi(Vt,rt),Qt===null)throw Mi(Vt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(rt){throw console.error("THREE.WebGLRenderer: "+rt.message),rt}let fi,Gi,Hi,ki,hn,Cn,pr,Cr,ds,wo,Xs,vt,Je,li,wi,Li,bi,Hn,ji,_n,_s,xn,Vn,Tr,sr;function Tt(){fi=new oa(Qt),fi.init(),Vn=new hp(Qt,fi),Gi=new Ku(Qt,fi,o,Vn),Hi=new wm(Qt),ki=new Nc(Qt),hn=new _l,Cn=new Cm(Qt,fi,Hi,hn,Gi,Vn,ki),pr=new fd(Ue),Cr=new qu(Ue),ds=new vh(Qt),Tr=new Wu(Qt,ds),wo=new kc(Qt,ds,ki,Tr),Xs=new Kd(Qt,wo,ds,ki),_n=new Ju(Qt,Gi,Cn),Li=new Ql(hn),vt=new gd(Ue,pr,Cr,fi,Gi,Tr,Li),Je=new Im(Ue,hn),li=new hm,wi=new gm(fi),ji=new dd(Ue,pr,Cr,Hi,Xs,ve,W),Hn=new Zu(Ue,fi,Qt),bi=new ym(Ue,Xs,Gi),sr=new Bm(Qt,ki,Gi,Hi),_s=new rl(Qt,fi,ki),xn=new Vl(Qt,fi,ki),ki.programs=vt.programs,Ue.capabilities=Gi,Ue.extensions=fi,Ue.properties=hn,Ue.renderLists=li,Ue.shadowMap=bi,Ue.state=Hi,Ue.info=ki}Tt();const Ni=typeof navigator<"u"&&"xr"in navigator?new Tm(Ue,Qt,fi,pe):new pp(Ue);this.xr=Ni,this.getContext=function(){return Qt},this.getContextAttributes=function(){return Qt.getContextAttributes()},this.forceContextLoss=function(){const rt=fi.get("WEBGL_lose_context");rt&&rt.loseContext()},this.forceContextRestore=function(){const rt=fi.get("WEBGL_lose_context");rt&&rt.restoreContext()},this.getPixelRatio=function(){return ri},this.setPixelRatio=function(rt){rt!==void 0&&(ri=rt,this.setSize(Ei,$i,!1))},this.getSize=function(rt){return rt.set(Ei,$i)},this.setSize=function(rt,Vt,ii=!0){if(Ni.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ei=rt,$i=Vt,h.width=Math.floor(rt*ri),h.height=Math.floor(Vt*ri),ii===!0&&(h.style.width=rt+"px",h.style.height=Vt+"px"),this.setViewport(0,0,rt,Vt)},this.getDrawingBufferSize=function(rt){return rt.set(Ei*ri,$i*ri).floor()},this.setDrawingBufferSize=function(rt,Vt,ii){Ei=rt,$i=Vt,ri=ii,h.width=Math.floor(rt*ii),h.height=Math.floor(Vt*ii),this.setViewport(0,0,rt,Vt)},this.getCurrentViewport=function(rt){return rt.copy(wt)},this.getViewport=function(rt){return rt.copy(Rn)},this.setViewport=function(rt,Vt,ii,$t){rt.isVector4?Rn.set(rt.x,rt.y,rt.z,rt.w):Rn.set(rt,Vt,ii,$t),Hi.viewport(wt.copy(Rn).multiplyScalar(ri).round())},this.getScissor=function(rt){return rt.copy(Br)},this.setScissor=function(rt,Vt,ii,$t){rt.isVector4?Br.set(rt.x,rt.y,rt.z,rt.w):Br.set(rt,Vt,ii,$t),Hi.scissor(Ft.copy(Br).multiplyScalar(ri).round())},this.getScissorTest=function(){return As},this.setScissorTest=function(rt){Hi.setScissorTest(As=rt)},this.setOpaqueSort=function(rt){zi=rt},this.setTransparentSort=function(rt){Yi=rt},this.getClearColor=function(rt){return rt.copy(ji.getClearColor())},this.setClearColor=function(){ji.setClearColor.apply(ji,arguments)},this.getClearAlpha=function(){return ji.getClearAlpha()},this.setClearAlpha=function(){ji.setClearAlpha.apply(ji,arguments)},this.clear=function(rt=!0,Vt=!0,ii=!0){let $t=0;if(rt){let jt=!1;if(yt!==null){const An=yt.texture.format;jt=An===Tn||An===hi||An===pn}if(jt){const An=yt.texture.type,zn=An===os||An===zo||An===Fo||An===L0||An===Ys||An===ca,Yn=ji.getClearColor(),dr=ji.getClearAlpha(),Sr=Yn.r,Lr=Yn.g,Xr=Yn.b;zn?(xe[0]=Sr,xe[1]=Lr,xe[2]=Xr,xe[3]=dr,Qt.clearBufferuiv(Qt.COLOR,0,xe)):(Le[0]=Sr,Le[1]=Lr,Le[2]=Xr,Le[3]=dr,Qt.clearBufferiv(Qt.COLOR,0,Le))}else $t|=Qt.COLOR_BUFFER_BIT}Vt&&($t|=Qt.DEPTH_BUFFER_BIT),ii&&($t|=Qt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Qt.clear($t)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){h.removeEventListener("webglcontextlost",qi,!1),h.removeEventListener("webglcontextrestored",Gn,!1),h.removeEventListener("webglcontextcreationerror",yn,!1),li.dispose(),wi.dispose(),hn.dispose(),pr.dispose(),Cr.dispose(),Xs.dispose(),Tr.dispose(),sr.dispose(),vt.dispose(),Ni.dispose(),Ni.removeEventListener("sessionstart",v1),Ni.removeEventListener("sessionend",im),mh.stop()};function qi(rt){rt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Ct=!0}function Gn(){console.log("THREE.WebGLRenderer: Context Restored."),Ct=!1;const rt=ki.autoReset,Vt=bi.enabled,ii=bi.autoUpdate,$t=bi.needsUpdate,jt=bi.type;Tt(),ki.autoReset=rt,bi.enabled=Vt,bi.autoUpdate=ii,bi.needsUpdate=$t,bi.type=jt}function yn(rt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",rt.statusMessage)}function Rr(rt){const Vt=rt.target;Vt.removeEventListener("dispose",Rr),wn(Vt)}function wn(rt){dn(rt),hn.remove(rt)}function dn(rt){const Vt=hn.get(rt).programs;Vt!==void 0&&(Vt.forEach(function(ii){vt.releaseProgram(ii)}),rt.isShaderMaterial&&vt.releaseShaderCache(rt))}this.renderBufferDirect=function(rt,Vt,ii,$t,jt,An){Vt===null&&(Vt=en);const zn=jt.isMesh&&jt.matrixWorld.determinant()<0,Yn=Sg(rt,Vt,ii,$t,jt);Hi.setMaterial($t,zn);let dr=ii.index,Sr=1;if($t.wireframe===!0){if(dr=wo.getWireframeAttribute(ii),dr===void 0)return;Sr=2}const Lr=ii.drawRange,Xr=ii.attributes.position;let n0=Lr.start*Sr,z0=(Lr.start+Lr.count)*Sr;An!==null&&(n0=Math.max(n0,An.start*Sr),z0=Math.min(z0,(An.start+An.count)*Sr)),dr!==null?(n0=Math.max(n0,0),z0=Math.min(z0,dr.count)):Xr!=null&&(n0=Math.max(n0,0),z0=Math.min(z0,Xr.count));const ol=z0-n0;if(ol<0||ol===1/0)return;Tr.setup(jt,$t,Yn,ii,dr);let Jc,ms=_s;if(dr!==null&&(Jc=ds.get(dr),ms=xn,ms.setIndex(Jc)),jt.isMesh)$t.wireframe===!0?(Hi.setLineWidth($t.wireframeLinewidth*ln()),ms.setMode(Qt.LINES)):ms.setMode(Qt.TRIANGLES);else if(jt.isLine){let $1=$t.linewidth;$1===void 0&&($1=1),Hi.setLineWidth($1*ln()),jt.isLineSegments?ms.setMode(Qt.LINES):jt.isLineLoop?ms.setMode(Qt.LINE_LOOP):ms.setMode(Qt.LINE_STRIP)}else jt.isPoints?ms.setMode(Qt.POINTS):jt.isSprite&&ms.setMode(Qt.TRIANGLES);if(jt.isBatchedMesh)jt._multiDrawInstances!==null?ms.renderMultiDrawInstances(jt._multiDrawStarts,jt._multiDrawCounts,jt._multiDrawCount,jt._multiDrawInstances):ms.renderMultiDraw(jt._multiDrawStarts,jt._multiDrawCounts,jt._multiDrawCount);else if(jt.isInstancedMesh)ms.renderInstances(n0,ol,jt.count);else if(ii.isInstancedBufferGeometry){const $1=ii._maxInstanceCount!==void 0?ii._maxInstanceCount:1/0,Gr=Math.min(ii.instanceCount,$1);ms.renderInstances(n0,ol,Gr)}else ms.render(n0,ol)};function Hr(rt,Vt,ii){rt.transparent===!0&&rt.side===ne&&rt.forceSinglePass===!1?(rt.side=Z,rt.needsUpdate=!0,p2(rt,Vt,ii),rt.side=G,rt.needsUpdate=!0,p2(rt,Vt,ii),rt.side=ne):p2(rt,Vt,ii)}this.compile=function(rt,Vt,ii=null){ii===null&&(ii=rt),Ee=wi.get(ii),Ee.init(Vt),Ge.push(Ee),ii.traverseVisible(function(jt){jt.isLight&&jt.layers.test(Vt.layers)&&(Ee.pushLight(jt),jt.castShadow&&Ee.pushShadow(jt))}),rt!==ii&&rt.traverseVisible(function(jt){jt.isLight&&jt.layers.test(Vt.layers)&&(Ee.pushLight(jt),jt.castShadow&&Ee.pushShadow(jt))}),Ee.setupLights(Ue._useLegacyLights);const $t=new Set;return rt.traverse(function(jt){const An=jt.material;if(An)if(Array.isArray(An))for(let zn=0;zn<An.length;zn++){const Yn=An[zn];Hr(Yn,ii,jt),$t.add(Yn)}else Hr(An,ii,jt),$t.add(An)}),Ge.pop(),Ee=null,$t},this.compileAsync=function(rt,Vt,ii=null){const $t=this.compile(rt,Vt,ii);return new Promise(jt=>{function An(){if($t.forEach(function(zn){hn.get(zn).currentProgram.isReady()&&$t.delete(zn)}),$t.size===0){jt(rt);return}setTimeout(An,10)}fi.get("KHR_parallel_shader_compile")!==null?An():setTimeout(An,10)})};let lr=null;function d0(rt){lr&&lr(rt)}function v1(){mh.stop()}function im(){mh.start()}const mh=new a1;mh.setAnimationLoop(d0),typeof self<"u"&&mh.setContext(self),this.setAnimationLoop=function(rt){lr=rt,Ni.setAnimationLoop(rt),rt===null?mh.stop():mh.start()},Ni.addEventListener("sessionstart",v1),Ni.addEventListener("sessionend",im),this.render=function(rt,Vt){if(Vt!==void 0&&Vt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Ct===!0)return;rt.matrixWorldAutoUpdate===!0&&rt.updateMatrixWorld(),Vt.parent===null&&Vt.matrixWorldAutoUpdate===!0&&Vt.updateMatrixWorld(),Ni.enabled===!0&&Ni.isPresenting===!0&&(Ni.cameraAutoUpdate===!0&&Ni.updateCamera(Vt),Vt=Ni.getCamera()),rt.isScene===!0&&rt.onBeforeRender(Ue,rt,Vt,yt),Ee=wi.get(rt,Ge.length),Ee.init(Vt),Ge.push(Ee),Pn.multiplyMatrices(Vt.projectionMatrix,Vt.matrixWorldInverse),Ks.setFromProjectionMatrix(Pn),Ds=this.localClippingEnabled,hs=Li.init(this.clippingPlanes,Ds),Se=li.get(rt,Ke.length),Se.init(),Ke.push(Se),nm(rt,Vt,0,Ue.sortObjects),Se.finish(),Ue.sortObjects===!0&&Se.sort(zi,Yi);const ii=Ni.enabled===!1||Ni.isPresenting===!1||Ni.hasDepthSensing()===!1;ii&&ji.addToRenderList(Se,rt),this.info.render.frame++,hs===!0&&Li.beginShadows();const $t=Ee.state.shadowsArray;bi.render($t,rt,Vt),hs===!0&&Li.endShadows(),this.info.autoReset===!0&&this.info.reset();const jt=Se.opaque,An=Se.transmissive;if(Ee.setupLights(Ue._useLegacyLights),Vt.isArrayCamera){const zn=Vt.cameras;if(An.length>0)for(let Yn=0,dr=zn.length;Yn<dr;Yn++){const Sr=zn[Yn];rm(jt,An,rt,Sr)}if(ii&&ji.render(rt),Ni.enabled&&Ni.isMultiview)Cn.setDeferTextureUploads(!0),rp(Se,rt,Vt,Vt.cameras[0].viewport);else for(let Yn=0,dr=zn.length;Yn<dr;Yn++){const Sr=zn[Yn];rp(Se,rt,Sr,Sr.viewport)}}else An.length>0&&rm(jt,An,rt,Vt),ii&&ji.render(rt),rp(Se,rt,Vt);yt!==null&&(Cn.updateMultisampleRenderTarget(yt),Cn.updateRenderTargetMipmap(yt)),rt.isScene===!0&&rt.onAfterRender(Ue,rt,Vt),Cn.runDeferredUploads(),Ni.enabled&&Ni.submitFrame&&Ni.submitFrame(),Tr.resetDefaultState(),et=-1,qe=null,Ge.pop(),Ge.length>0?(Ee=Ge[Ge.length-1],hs===!0&&Li.setGlobalState(Ue.clippingPlanes,Ee.state.camera)):Ee=null,Ke.pop(),Ke.length>0?Se=Ke[Ke.length-1]:Se=null};function nm(rt,Vt,ii,$t){if(rt.visible===!1)return;if(rt.layers.test(Vt.layers)){if(rt.isGroup)ii=rt.renderOrder;else if(rt.isLOD)rt.autoUpdate===!0&&rt.update(Vt);else if(rt.isLight)Ee.pushLight(rt),rt.castShadow&&Ee.pushShadow(rt);else if(rt.isSprite){if(!rt.frustumCulled||Ks.intersectsSprite(rt)){$t&&xi.setFromMatrixPosition(rt.matrixWorld).applyMatrix4(Pn);const zn=Xs.update(rt),Yn=rt.material;Yn.visible&&Se.push(rt,zn,Yn,ii,xi.z,null)}}else if((rt.isMesh||rt.isLine||rt.isPoints)&&(!rt.frustumCulled||Ks.intersectsObject(rt))){const zn=Xs.update(rt),Yn=rt.material;if($t&&(rt.boundingSphere!==void 0?(rt.boundingSphere===null&&rt.computeBoundingSphere(),xi.copy(rt.boundingSphere.center)):(zn.boundingSphere===null&&zn.computeBoundingSphere(),xi.copy(zn.boundingSphere.center)),xi.applyMatrix4(rt.matrixWorld).applyMatrix4(Pn)),Array.isArray(Yn)){const dr=zn.groups;for(let Sr=0,Lr=dr.length;Sr<Lr;Sr++){const Xr=dr[Sr],n0=Yn[Xr.materialIndex];n0&&n0.visible&&Se.push(rt,zn,n0,ii,xi.z,Xr)}}else Yn.visible&&Se.push(rt,zn,Yn,ii,xi.z,null)}}const An=rt.children;for(let zn=0,Yn=An.length;zn<Yn;zn++)nm(An[zn],Vt,ii,$t)}function rp(rt,Vt,ii,$t){const jt=rt.opaque,An=rt.transmissive,zn=rt.transparent;Ee.setupLightsView(ii),hs===!0&&Li.setGlobalState(Ue.clippingPlanes,ii),$t&&Hi.viewport(wt.copy($t)),jt.length>0&&f2(jt,Vt,ii),An.length>0&&f2(An,Vt,ii),zn.length>0&&f2(zn,Vt,ii),Hi.buffers.depth.setTest(!0),Hi.buffers.depth.setMask(!0),Hi.buffers.color.setMask(!0),Hi.setPolygonOffset(!1)}function rm(rt,Vt,ii,$t){if((ii.isScene===!0?ii.overrideMaterial:null)!==null)return;Ee.state.transmissionRenderTarget[$t.id]===void 0&&(Ee.state.transmissionRenderTarget[$t.id]=new js(1,1,{generateMipmaps:!0,type:fi.has("EXT_color_buffer_half_float")||fi.has("EXT_color_buffer_float")?ir:os,minFilter:Pr,samples:4,stencilBuffer:C,resolveDepthBuffer:!1,resolveStencilBuffer:!1}));const An=Ee.state.transmissionRenderTarget[$t.id],zn=$t.viewport||wt;An.setSize(zn.z,zn.w);const Yn=Ue.getRenderTarget();Ue.setRenderTarget(An),Ue.getClearColor(Gt),ti=Ue.getClearAlpha(),ti<1&&Ue.setClearColor(16777215,.5),Ue.clear();const dr=Ue.toneMapping;Ue.toneMapping=ts;const Sr=$t.viewport;if($t.viewport!==void 0&&($t.viewport=void 0),Ee.setupLightsView($t),hs===!0&&Li.setGlobalState(Ue.clippingPlanes,$t),f2(rt,ii,$t),Cn.updateMultisampleRenderTarget(An),Cn.updateRenderTargetMipmap(An),fi.has("WEBGL_multisampled_render_to_texture")===!1){let Lr=!1;for(let Xr=0,n0=Vt.length;Xr<n0;Xr++){const z0=Vt[Xr],ol=z0.object,Jc=z0.geometry,ms=z0.material,$1=z0.group;if(ms.side===ne&&ol.layers.test($t.layers)){const Gr=ms.side;ms.side=Z,ms.needsUpdate=!0,sm(ol,ii,$t,Jc,ms,$1),ms.side=Gr,ms.needsUpdate=!0,Lr=!0}}Lr===!0&&(Cn.updateMultisampleRenderTarget(An),Cn.updateRenderTargetMipmap(An))}Ue.setRenderTarget(Yn),Ue.setClearColor(Gt,ti),Sr!==void 0&&($t.viewport=Sr),Ue.toneMapping=dr}function f2(rt,Vt,ii){const $t=Vt.isScene===!0?Vt.overrideMaterial:null;for(let jt=0,An=rt.length;jt<An;jt++){const zn=rt[jt],Yn=zn.object,dr=zn.geometry,Sr=$t===null?zn.material:$t,Lr=zn.group;Yn.layers.test(ii.layers)&&sm(Yn,Vt,ii,dr,Sr,Lr)}}function sm(rt,Vt,ii,$t,jt,An){rt.onBeforeRender(Ue,Vt,ii,$t,jt,An),rt.modelViewMatrix.multiplyMatrices(ii.matrixWorldInverse,rt.matrixWorld),rt.normalMatrix.getNormalMatrix(rt.modelViewMatrix),jt.onBeforeRender(Ue,Vt,ii,$t,rt,An),jt.transparent===!0&&jt.side===ne&&jt.forceSinglePass===!1?(jt.side=Z,jt.needsUpdate=!0,Ue.renderBufferDirect(ii,Vt,$t,jt,rt,An),jt.side=G,jt.needsUpdate=!0,Ue.renderBufferDirect(ii,Vt,$t,jt,rt,An),jt.side=ne):Ue.renderBufferDirect(ii,Vt,$t,jt,rt,An),rt.onAfterRender(Ue,Vt,ii,$t,jt,An)}function p2(rt,Vt,ii){Vt.isScene!==!0&&(Vt=en);const $t=hn.get(rt),jt=Ee.state.lights,An=Ee.state.shadowsArray,zn=jt.state.version,Yn=vt.getParameters(rt,jt.state,An,Vt,ii),dr=vt.getProgramCacheKey(Yn);let Sr=$t.programs;$t.environment=rt.isMeshStandardMaterial?Vt.environment:null,$t.fog=Vt.fog,$t.envMap=(rt.isMeshStandardMaterial?Cr:pr).get(rt.envMap||$t.environment),$t.envMapRotation=$t.environment!==null&&rt.envMap===null?Vt.environmentRotation:rt.envMapRotation,Sr===void 0&&(rt.addEventListener("dispose",Rr),Sr=new Map,$t.programs=Sr);let Lr=Sr.get(dr);if(Lr!==void 0){if($t.currentProgram===Lr&&$t.lightsStateVersion===zn)return am(rt,Yn),Lr}else Yn.uniforms=vt.getUniforms(rt),rt.onBuild(ii,Yn,Ue),rt.onBeforeCompile(Yn,Ue),Lr=vt.acquireProgram(Yn,dr),Sr.set(dr,Lr),$t.uniforms=Yn.uniforms;const Xr=$t.uniforms;return(!rt.isShaderMaterial&&!rt.isRawShaderMaterial||rt.clipping===!0)&&(Xr.clippingPlanes=Li.uniform),am(rt,Yn),$t.needsLights=Tg(rt),$t.lightsStateVersion=zn,$t.needsLights&&(Xr.ambientLightColor.value=jt.state.ambient,Xr.lightProbe.value=jt.state.probe,Xr.directionalLights.value=jt.state.directional,Xr.directionalLightShadows.value=jt.state.directionalShadow,Xr.spotLights.value=jt.state.spot,Xr.spotLightShadows.value=jt.state.spotShadow,Xr.rectAreaLights.value=jt.state.rectArea,Xr.ltc_1.value=jt.state.rectAreaLTC1,Xr.ltc_2.value=jt.state.rectAreaLTC2,Xr.pointLights.value=jt.state.point,Xr.pointLightShadows.value=jt.state.pointShadow,Xr.hemisphereLights.value=jt.state.hemi,Xr.directionalShadowMap.value=jt.state.directionalShadowMap,Xr.directionalShadowMatrix.value=jt.state.directionalShadowMatrix,Xr.spotShadowMap.value=jt.state.spotShadowMap,Xr.spotLightMatrix.value=jt.state.spotLightMatrix,Xr.spotLightMap.value=jt.state.spotLightMap,Xr.pointShadowMap.value=jt.state.pointShadowMap,Xr.pointShadowMatrix.value=jt.state.pointShadowMatrix),$t.currentProgram=Lr,$t.uniformsList=null,Lr}function om(rt){if(rt.uniformsList===null){const Vt=rt.currentProgram.getUniforms();rt.uniformsList=se.seqWithValue(Vt.seq,rt.uniforms)}return rt.uniformsList}function am(rt,Vt){const ii=hn.get(rt);ii.outputColorSpace=Vt.outputColorSpace,ii.batching=Vt.batching,ii.instancing=Vt.instancing,ii.instancingColor=Vt.instancingColor,ii.instancingMorph=Vt.instancingMorph,ii.skinning=Vt.skinning,ii.morphTargets=Vt.morphTargets,ii.morphNormals=Vt.morphNormals,ii.morphColors=Vt.morphColors,ii.morphTargetsCount=Vt.morphTargetsCount,ii.numClippingPlanes=Vt.numClippingPlanes,ii.numIntersection=Vt.numClipIntersection,ii.vertexAlphas=Vt.vertexAlphas,ii.vertexTangents=Vt.vertexTangents,ii.toneMapping=Vt.toneMapping,ii.numMultiviewViews=Vt.numMultiviewViews}function Sg(rt,Vt,ii,$t,jt){Vt.isScene!==!0&&(Vt=en),Cn.resetTextureUnits();const An=Vt.fog,zn=$t.isMeshStandardMaterial?Vt.environment:null,Yn=yt===null?Ue.outputColorSpace:yt.isXRRenderTarget===!0?yt.texture.colorSpace:xo,dr=($t.isMeshStandardMaterial?Cr:pr).get($t.envMap||zn),Sr=$t.vertexColors===!0&&!!ii.attributes.color&&ii.attributes.color.itemSize===4,Lr=!!ii.attributes.tangent&&(!!$t.normalMap||$t.anisotropy>0),Xr=!!ii.morphAttributes.position,n0=!!ii.morphAttributes.normal,z0=!!ii.morphAttributes.color;let ol=ts;$t.toneMapped&&(yt===null||yt.isXRRenderTarget===!0)&&(ol=Ue.toneMapping);const Jc=yt&&yt.isWebGLMultiviewRenderTarget?yt.numViews:0,ms=ii.morphAttributes.position||ii.morphAttributes.normal||ii.morphAttributes.color,$1=ms!==void 0?ms.length:0,Gr=hn.get($t),Rg=Ee.state.lights;if(hs===!0&&(Ds===!0||rt!==qe)){const xl=rt===qe&&$t.id===et;Li.setState($t,rt,xl)}let io=!1;$t.version===Gr.__version?(Gr.needsLights&&Gr.lightsStateVersion!==Rg.state.version||Gr.outputColorSpace!==Yn||jt.isBatchedMesh&&Gr.batching===!1||!jt.isBatchedMesh&&Gr.batching===!0||jt.isInstancedMesh&&Gr.instancing===!1||!jt.isInstancedMesh&&Gr.instancing===!0||jt.isSkinnedMesh&&Gr.skinning===!1||!jt.isSkinnedMesh&&Gr.skinning===!0||jt.isInstancedMesh&&Gr.instancingColor===!0&&jt.instanceColor===null||jt.isInstancedMesh&&Gr.instancingColor===!1&&jt.instanceColor!==null||jt.isInstancedMesh&&Gr.instancingMorph===!0&&jt.morphTexture===null||jt.isInstancedMesh&&Gr.instancingMorph===!1&&jt.morphTexture!==null||Gr.envMap!==dr||$t.fog===!0&&Gr.fog!==An||Gr.numClippingPlanes!==void 0&&(Gr.numClippingPlanes!==Li.numPlanes||Gr.numIntersection!==Li.numIntersection)||Gr.vertexAlphas!==Sr||Gr.vertexTangents!==Lr||Gr.morphTargets!==Xr||Gr.morphNormals!==n0||Gr.morphColors!==z0||Gr.toneMapping!==ol||Gr.morphTargetsCount!==$1||Gr.numMultiviewViews!==Jc)&&(io=!0):(io=!0,Gr.__version=$t.version);let j1=Gr.currentProgram;io===!0&&(j1=p2($t,Vt,jt));let lm=!1,mf=!1,sp=!1;const f0=j1.getUniforms(),Zc=Gr.uniforms;if(Hi.useProgram(j1.program)&&(lm=!0,mf=!0,sp=!0),$t.id!==et&&(et=$t.id,mf=!0),lm||qe!==rt){j1.numMultiviewViews>0?(Hn.updateCameraProjectionMatricesUniform(rt,f0),Hn.updateCameraViewMatricesUniform(rt,f0)):(f0.setValue(Qt,"projectionMatrix",rt.projectionMatrix),f0.setValue(Qt,"viewMatrix",rt.matrixWorldInverse));const xl=f0.map.cameraPosition;xl!==void 0&&xl.setValue(Qt,xi.setFromMatrixPosition(rt.matrixWorld)),Gi.logarithmicDepthBuffer&&f0.setValue(Qt,"logDepthBufFC",2/(Math.log(rt.far+1)/Math.LN2)),($t.isMeshPhongMaterial||$t.isMeshToonMaterial||$t.isMeshLambertMaterial||$t.isMeshBasicMaterial||$t.isMeshStandardMaterial||$t.isShaderMaterial)&&f0.setValue(Qt,"isOrthographic",rt.isOrthographicCamera===!0),qe!==rt&&(qe=rt,mf=!0,sp=!0)}if(jt.isSkinnedMesh){f0.setOptional(Qt,jt,"bindMatrix"),f0.setOptional(Qt,jt,"bindMatrixInverse");const xl=jt.skeleton;xl&&(xl.boneTexture===null&&xl.computeBoneTexture(),f0.setValue(Qt,"boneTexture",xl.boneTexture,Cn))}jt.isBatchedMesh&&(f0.setOptional(Qt,jt,"batchingTexture"),f0.setValue(Qt,"batchingTexture",jt._matricesTexture,Cn));const op=ii.morphAttributes;if((op.position!==void 0||op.normal!==void 0||op.color!==void 0)&&_n.update(jt,ii,j1),(mf||Gr.receiveShadow!==jt.receiveShadow)&&(Gr.receiveShadow=jt.receiveShadow,f0.setValue(Qt,"receiveShadow",jt.receiveShadow)),$t.isMeshGouraudMaterial&&$t.envMap!==null&&(Zc.envMap.value=dr,Zc.flipEnvMap.value=dr.isCubeTexture&&dr.isRenderTargetTexture===!1?-1:1),$t.isMeshStandardMaterial&&$t.envMap===null&&Vt.environment!==null&&(Zc.envMapIntensity.value=Vt.environmentIntensity),mf&&(f0.setValue(Qt,"toneMappingExposure",Ue.toneMappingExposure),Gr.needsLights&&bg(Zc,sp),An&&$t.fog===!0&&Je.refreshFogUniforms(Zc,An),Je.refreshMaterialUniforms(Zc,$t,ri,$i,Ee.state.transmissionRenderTarget[rt.id]),se.upload(Qt,om(Gr),Zc,Cn)),$t.isShaderMaterial&&$t.uniformsNeedUpdate===!0&&(se.upload(Qt,om(Gr),Zc,Cn),$t.uniformsNeedUpdate=!1),$t.isSpriteMaterial&&f0.setValue(Qt,"center",jt.center),j1.numMultiviewViews>0?Hn.updateObjectMatricesUniforms(jt,rt,f0):(f0.setValue(Qt,"modelViewMatrix",jt.modelViewMatrix),f0.setValue(Qt,"normalMatrix",jt.normalMatrix)),f0.setValue(Qt,"modelMatrix",jt.matrixWorld),$t.isShaderMaterial||$t.isRawShaderMaterial){const xl=$t.uniformsGroups;for(let ap=0,Ig=xl.length;ap<Ig;ap++){const cm=xl[ap];sr.update(cm,j1),sr.bind(cm,j1)}}return j1}function bg(rt,Vt){rt.ambientLightColor.needsUpdate=Vt,rt.lightProbe.needsUpdate=Vt,rt.directionalLights.needsUpdate=Vt,rt.directionalLightShadows.needsUpdate=Vt,rt.pointLights.needsUpdate=Vt,rt.pointLightShadows.needsUpdate=Vt,rt.spotLights.needsUpdate=Vt,rt.spotLightShadows.needsUpdate=Vt,rt.rectAreaLights.needsUpdate=Vt,rt.hemisphereLights.needsUpdate=Vt}function Tg(rt){return rt.isMeshLambertMaterial||rt.isMeshToonMaterial||rt.isMeshPhongMaterial||rt.isMeshStandardMaterial||rt.isShadowMaterial||rt.isShaderMaterial&&rt.lights===!0}this.setTexture2D=function(){var rt=!1;return function(ii,$t){ii&&ii.isWebGLRenderTarget&&(rt||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),rt=!0),ii=ii.texture),Cn.setTexture2D(ii,$t)}}(),this.getActiveCubeFace=function(){return at},this.getActiveMipmapLevel=function(){return ft},this.getRenderTarget=function(){return yt},this.setRenderTargetTextures=function(rt,Vt,ii){hn.get(rt.texture).__webglTexture=Vt,hn.get(rt.depthTexture).__webglTexture=ii;const $t=hn.get(rt);$t.__hasExternalTextures=!0,$t.__autoAllocateDepthBuffer=ii===void 0,!$t.__autoAllocateDepthBuffer&&(!yt||!yt.isWebGLMultiviewRenderTarget)&&fi.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$t.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(rt,Vt){const ii=hn.get(rt);ii.__webglFramebuffer=Vt,ii.__useDefaultFramebuffer=Vt===void 0},this.setRenderTarget=function(rt,Vt=0,ii=0){yt=rt,at=Vt,ft=ii;let $t=!0,jt=null,An=!1,zn=!1;if(rt){const dr=hn.get(rt);dr.__useDefaultFramebuffer!==void 0?(Hi.bindFramebuffer(Qt.FRAMEBUFFER,null),$t=!1):dr.__webglFramebuffer===void 0?Cn.setupRenderTarget(rt):dr.__hasExternalTextures&&Cn.rebindTextures(rt,hn.get(rt.texture).__webglTexture,hn.get(rt.depthTexture).__webglTexture);const Sr=rt.texture;(Sr.isData3DTexture||Sr.isDataArrayTexture||Sr.isCompressedArrayTexture)&&(zn=!0);const Lr=hn.get(rt).__webglFramebuffer;rt.isWebGLCubeRenderTarget?(Array.isArray(Lr[Vt])?jt=Lr[Vt][ii]:jt=Lr[Vt],An=!0):rt.samples>0&&Cn.useMultisampledRTT(rt)===!1?jt=hn.get(rt).__webglMultisampledFramebuffer:Array.isArray(Lr)?jt=Lr[ii]:jt=Lr,wt.copy(rt.viewport),Ft.copy(rt.scissor),Lt=rt.scissorTest}else wt.copy(Rn).multiplyScalar(ri).floor(),Ft.copy(Br).multiplyScalar(ri).floor(),Lt=As;if(Hi.bindFramebuffer(Qt.FRAMEBUFFER,jt)&&$t&&Hi.drawBuffers(rt,jt),Hi.viewport(wt),Hi.scissor(Ft),Hi.setScissorTest(Lt),An){const dr=hn.get(rt.texture);Qt.framebufferTexture2D(Qt.FRAMEBUFFER,Qt.COLOR_ATTACHMENT0,Qt.TEXTURE_CUBE_MAP_POSITIVE_X+Vt,dr.__webglTexture,ii)}else if(zn){const dr=hn.get(rt.texture),Sr=Vt||0;Qt.framebufferTextureLayer(Qt.FRAMEBUFFER,Qt.COLOR_ATTACHMENT0,dr.__webglTexture,ii||0,Sr)}et=-1},this.readRenderTargetPixels=function(rt,Vt,ii,$t,jt,An,zn){if(!(rt&&rt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Yn=hn.get(rt).__webglFramebuffer;if(rt.isWebGLCubeRenderTarget&&zn!==void 0&&(Yn=Yn[zn]),Yn){Hi.bindFramebuffer(Qt.FRAMEBUFFER,Yn);try{const dr=rt.texture,Sr=dr.format,Lr=dr.type;if(!Gi.textureFormatReadable(Sr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Gi.textureTypeReadable(Lr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Vt>=0&&Vt<=rt.width-$t&&ii>=0&&ii<=rt.height-jt&&Qt.readPixels(Vt,ii,$t,jt,Vn.convert(Sr),Vn.convert(Lr),An)}finally{const dr=yt!==null?hn.get(yt).__webglFramebuffer:null;Hi.bindFramebuffer(Qt.FRAMEBUFFER,dr)}}},this.copyFramebufferToTexture=function(rt,Vt,ii=0){const $t=Math.pow(2,-ii),jt=Math.floor(Vt.image.width*$t),An=Math.floor(Vt.image.height*$t);Cn.setTexture2D(Vt,0),Qt.copyTexSubImage2D(Qt.TEXTURE_2D,ii,0,0,rt.x,rt.y,jt,An),Hi.unbindTexture()},this.copyTextureToTexture=function(rt,Vt,ii,$t=0){const jt=Vt.image.width,An=Vt.image.height,zn=Vn.convert(ii.format),Yn=Vn.convert(ii.type);Cn.setTexture2D(ii,0),Qt.pixelStorei(Qt.UNPACK_FLIP_Y_WEBGL,ii.flipY),Qt.pixelStorei(Qt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ii.premultiplyAlpha),Qt.pixelStorei(Qt.UNPACK_ALIGNMENT,ii.unpackAlignment),Vt.isDataTexture?Qt.texSubImage2D(Qt.TEXTURE_2D,$t,rt.x,rt.y,jt,An,zn,Yn,Vt.image.data):Vt.isCompressedTexture?Qt.compressedTexSubImage2D(Qt.TEXTURE_2D,$t,rt.x,rt.y,Vt.mipmaps[0].width,Vt.mipmaps[0].height,zn,Vt.mipmaps[0].data):Qt.texSubImage2D(Qt.TEXTURE_2D,$t,rt.x,rt.y,zn,Yn,Vt.image),$t===0&&ii.generateMipmaps&&Qt.generateMipmap(Qt.TEXTURE_2D),Hi.unbindTexture()},this.copyTextureToTexture3D=function(rt,Vt,ii,$t,jt=0){const An=rt.max.x-rt.min.x,zn=rt.max.y-rt.min.y,Yn=rt.max.z-rt.min.z,dr=Vn.convert($t.format),Sr=Vn.convert($t.type);let Lr;if($t.isData3DTexture)Cn.setTexture3D($t,0),Lr=Qt.TEXTURE_3D;else if($t.isDataArrayTexture||$t.isCompressedArrayTexture)Cn.setTexture2DArray($t,0),Lr=Qt.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Qt.pixelStorei(Qt.UNPACK_FLIP_Y_WEBGL,$t.flipY),Qt.pixelStorei(Qt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$t.premultiplyAlpha),Qt.pixelStorei(Qt.UNPACK_ALIGNMENT,$t.unpackAlignment);const Xr=Qt.getParameter(Qt.UNPACK_ROW_LENGTH),n0=Qt.getParameter(Qt.UNPACK_IMAGE_HEIGHT),z0=Qt.getParameter(Qt.UNPACK_SKIP_PIXELS),ol=Qt.getParameter(Qt.UNPACK_SKIP_ROWS),Jc=Qt.getParameter(Qt.UNPACK_SKIP_IMAGES),ms=ii.isCompressedTexture?ii.mipmaps[jt]:ii.image;Qt.pixelStorei(Qt.UNPACK_ROW_LENGTH,ms.width),Qt.pixelStorei(Qt.UNPACK_IMAGE_HEIGHT,ms.height),Qt.pixelStorei(Qt.UNPACK_SKIP_PIXELS,rt.min.x),Qt.pixelStorei(Qt.UNPACK_SKIP_ROWS,rt.min.y),Qt.pixelStorei(Qt.UNPACK_SKIP_IMAGES,rt.min.z),ii.isDataTexture||ii.isData3DTexture?Qt.texSubImage3D(Lr,jt,Vt.x,Vt.y,Vt.z,An,zn,Yn,dr,Sr,ms.data):$t.isCompressedArrayTexture?Qt.compressedTexSubImage3D(Lr,jt,Vt.x,Vt.y,Vt.z,An,zn,Yn,dr,ms.data):Qt.texSubImage3D(Lr,jt,Vt.x,Vt.y,Vt.z,An,zn,Yn,dr,Sr,ms),Qt.pixelStorei(Qt.UNPACK_ROW_LENGTH,Xr),Qt.pixelStorei(Qt.UNPACK_IMAGE_HEIGHT,n0),Qt.pixelStorei(Qt.UNPACK_SKIP_PIXELS,z0),Qt.pixelStorei(Qt.UNPACK_SKIP_ROWS,ol),Qt.pixelStorei(Qt.UNPACK_SKIP_IMAGES,Jc),jt===0&&$t.generateMipmaps&&Qt.generateMipmap(Lr),Hi.unbindTexture()},this.initTexture=function(rt){rt.isCubeTexture?Cn.setTextureCube(rt,0):rt.isData3DTexture?Cn.setTexture3D(rt,0):rt.isDataArrayTexture||rt.isCompressedArrayTexture?Cn.setTexture2DArray(rt,0):Cn.setTexture2D(rt,0),Hi.unbindTexture()},this.resetState=function(){at=0,ft=0,yt=null,Hi.reset(),Tr.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return O0}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(o){this._outputColorSpace=o;const h=this.getContext();h.drawingBufferColorSpace=o===ll?"display-p3":"srgb",h.unpackColorSpace=jr.workingColorSpace===fa?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(o){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=o}}class Ef{constructor(o,h=25e-5){this.isFogExp2=!0,this.name="",this.color=new un(o),this.density=h}clone(){return new Ef(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class yf{constructor(o,h=1,m=1e3){this.isFog=!0,this.name="",this.color=new un(o),this.near=h,this.far=m}clone(){return new yf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class mp extends Nr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new a0,this.environmentIntensity=1,this.environmentRotation=new a0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(o,h){return super.copy(o,h),o.background!==null&&(this.background=o.background.clone()),o.environment!==null&&(this.environment=o.environment.clone()),o.fog!==null&&(this.fog=o.fog.clone()),this.backgroundBlurriness=o.backgroundBlurriness,this.backgroundIntensity=o.backgroundIntensity,this.backgroundRotation.copy(o.backgroundRotation),this.environmentIntensity=o.environmentIntensity,this.environmentRotation.copy(o.environmentRotation),o.overrideMaterial!==null&&(this.overrideMaterial=o.overrideMaterial.clone()),this.matrixAutoUpdate=o.matrixAutoUpdate,this}toJSON(o){const h=super.toJSON(o);return this.fog!==null&&(h.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(h.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(h.object.backgroundIntensity=this.backgroundIntensity),h.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(h.object.environmentIntensity=this.environmentIntensity),h.object.environmentRotation=this.environmentRotation.toArray(),h}}class wf{constructor(o,h){this.isInterleavedBuffer=!0,this.array=o,this.stride=h,this.count=o!==void 0?o.length/h:0,this.usage=Ga,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Wo()}onUploadCallback(){}set needsUpdate(o){o===!0&&this.version++}get updateRange(){return Gs("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(o){return this.usage=o,this}addUpdateRange(o,h){this.updateRanges.push({start:o,count:h})}clearUpdateRanges(){this.updateRanges.length=0}copy(o){return this.array=new o.array.constructor(o.array),this.count=o.count,this.stride=o.stride,this.usage=o.usage,this}copyAt(o,h,m){o*=this.stride,m*=h.stride;for(let v=0,C=this.stride;v<C;v++)this.array[o+v]=h.array[m+v];return this}set(o,h=0){return this.array.set(o,h),this}clone(o){o.arrayBuffers===void 0&&(o.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wo()),o.arrayBuffers[this.array.buffer._uuid]===void 0&&(o.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const h=new this.array.constructor(o.arrayBuffers[this.array.buffer._uuid]),m=new this.constructor(h,this.stride);return m.setUsage(this.usage),m}onUpload(o){return this.onUploadCallback=o,this}toJSON(o){return o.arrayBuffers===void 0&&(o.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wo()),o.arrayBuffers[this.array.buffer._uuid]===void 0&&(o.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const aa=new nt;class rh{constructor(o,h,m,v=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=o,this.itemSize=h,this.offset=m,this.normalized=v}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(o){this.data.needsUpdate=o}applyMatrix4(o){for(let h=0,m=this.data.count;h<m;h++)aa.fromBufferAttribute(this,h),aa.applyMatrix4(o),this.setXYZ(h,aa.x,aa.y,aa.z);return this}applyNormalMatrix(o){for(let h=0,m=this.count;h<m;h++)aa.fromBufferAttribute(this,h),aa.applyNormalMatrix(o),this.setXYZ(h,aa.x,aa.y,aa.z);return this}transformDirection(o){for(let h=0,m=this.count;h<m;h++)aa.fromBufferAttribute(this,h),aa.transformDirection(o),this.setXYZ(h,aa.x,aa.y,aa.z);return this}getComponent(o,h){let m=this.array[o*this.data.stride+this.offset+h];return this.normalized&&(m=So(m,this.array)),m}setComponent(o,h,m){return this.normalized&&(m=ur(m,this.array)),this.data.array[o*this.data.stride+this.offset+h]=m,this}setX(o,h){return this.normalized&&(h=ur(h,this.array)),this.data.array[o*this.data.stride+this.offset]=h,this}setY(o,h){return this.normalized&&(h=ur(h,this.array)),this.data.array[o*this.data.stride+this.offset+1]=h,this}setZ(o,h){return this.normalized&&(h=ur(h,this.array)),this.data.array[o*this.data.stride+this.offset+2]=h,this}setW(o,h){return this.normalized&&(h=ur(h,this.array)),this.data.array[o*this.data.stride+this.offset+3]=h,this}getX(o){let h=this.data.array[o*this.data.stride+this.offset];return this.normalized&&(h=So(h,this.array)),h}getY(o){let h=this.data.array[o*this.data.stride+this.offset+1];return this.normalized&&(h=So(h,this.array)),h}getZ(o){let h=this.data.array[o*this.data.stride+this.offset+2];return this.normalized&&(h=So(h,this.array)),h}getW(o){let h=this.data.array[o*this.data.stride+this.offset+3];return this.normalized&&(h=So(h,this.array)),h}setXY(o,h,m){return o=o*this.data.stride+this.offset,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array)),this.data.array[o+0]=h,this.data.array[o+1]=m,this}setXYZ(o,h,m,v){return o=o*this.data.stride+this.offset,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array),v=ur(v,this.array)),this.data.array[o+0]=h,this.data.array[o+1]=m,this.data.array[o+2]=v,this}setXYZW(o,h,m,v,C){return o=o*this.data.stride+this.offset,this.normalized&&(h=ur(h,this.array),m=ur(m,this.array),v=ur(v,this.array),C=ur(C,this.array)),this.data.array[o+0]=h,this.data.array[o+1]=m,this.data.array[o+2]=v,this.data.array[o+3]=C,this}clone(o){if(o===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const h=[];for(let m=0;m<this.count;m++){const v=m*this.data.stride+this.offset;for(let C=0;C<this.itemSize;C++)h.push(this.data.array[v+C])}return new Zr(new this.array.constructor(h),this.itemSize,this.normalized)}else return o.interleavedBuffers===void 0&&(o.interleavedBuffers={}),o.interleavedBuffers[this.data.uuid]===void 0&&(o.interleavedBuffers[this.data.uuid]=this.data.clone(o)),new rh(o.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(o){if(o===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const h=[];for(let m=0;m<this.count;m++){const v=m*this.data.stride+this.offset;for(let C=0;C<this.itemSize;C++)h.push(this.data.array[v+C])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:h,normalized:this.normalized}}else return o.interleavedBuffers===void 0&&(o.interleavedBuffers={}),o.interleavedBuffers[this.data.uuid]===void 0&&(o.interleavedBuffers[this.data.uuid]=this.data.toJSON(o)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class E2 extends us{constructor(o){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new un(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.alphaMap=o.alphaMap,this.rotation=o.rotation,this.sizeAttenuation=o.sizeAttenuation,this.fog=o.fog,this}}let vd;const Xd=new nt,Ed=new nt,yd=new nt,wd=new vi,Yd=new vi,gp=new on,Cf=new nt,qd=new nt,_f=new nt,vp=new vi,y2=new vi,Ep=new vi;class yp extends Nr{constructor(o=new E2){if(super(),this.isSprite=!0,this.type="Sprite",vd===void 0){vd=new rr;const h=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),m=new wf(h,5);vd.setIndex([0,1,2,0,2,3]),vd.setAttribute("position",new rh(m,3,0,!1)),vd.setAttribute("uv",new rh(m,2,3,!1))}this.geometry=vd,this.material=o,this.center=new vi(.5,.5)}raycast(o,h){o.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ed.setFromMatrixScale(this.matrixWorld),gp.copy(o.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(o.camera.matrixWorldInverse,this.matrixWorld),yd.setFromMatrixPosition(this.modelViewMatrix),o.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ed.multiplyScalar(-yd.z);const m=this.material.rotation;let v,C;m!==0&&(C=Math.cos(m),v=Math.sin(m));const b=this.center;xf(Cf.set(-.5,-.5,0),yd,b,Ed,v,C),xf(qd.set(.5,-.5,0),yd,b,Ed,v,C),xf(_f.set(.5,.5,0),yd,b,Ed,v,C),vp.set(0,0),y2.set(1,0),Ep.set(1,1);let L=o.ray.intersectTriangle(Cf,qd,_f,!1,Xd);if(L===null&&(xf(qd.set(-.5,.5,0),yd,b,Ed,v,C),y2.set(0,1),L=o.ray.intersectTriangle(Cf,_f,qd,!1,Xd),L===null))return;const W=o.ray.origin.distanceTo(Xd);W<o.near||W>o.far||h.push({distance:W,point:Xd.clone(),uv:po.getInterpolation(Xd,Cf,qd,_f,vp,y2,Ep,new vi),face:null,object:this})}copy(o,h){return super.copy(o,h),o.center!==void 0&&this.center.copy(o.center),this.material=o.material,this}}function xf(x,o,h,m,v,C){wd.subVectors(x,h).addScalar(.5).multiply(m),v!==void 0?(Yd.x=C*wd.x-v*wd.y,Yd.y=v*wd.x+C*wd.y):Yd.copy(wd),x.copy(o),x.x+=Yd.x,x.y+=Yd.y,x.applyMatrix4(gp)}const Mf=new nt,wp=new nt;class Cp extends Nr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(o){super.copy(o,!1);const h=o.levels;for(let m=0,v=h.length;m<v;m++){const C=h[m];this.addLevel(C.object.clone(),C.distance,C.hysteresis)}return this.autoUpdate=o.autoUpdate,this}addLevel(o,h=0,m=0){h=Math.abs(h);const v=this.levels;let C;for(C=0;C<v.length&&!(h<v[C].distance);C++);return v.splice(C,0,{distance:h,hysteresis:m,object:o}),this.add(o),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(o){const h=this.levels;if(h.length>0){let m,v;for(m=1,v=h.length;m<v;m++){let C=h[m].distance;if(h[m].object.visible&&(C-=C*h[m].hysteresis),o<C)break}return h[m-1].object}return null}raycast(o,h){if(this.levels.length>0){Mf.setFromMatrixPosition(this.matrixWorld);const v=o.ray.origin.distanceTo(Mf);this.getObjectForDistance(v).raycast(o,h)}}update(o){const h=this.levels;if(h.length>1){Mf.setFromMatrixPosition(o.matrixWorld),wp.setFromMatrixPosition(this.matrixWorld);const m=Mf.distanceTo(wp)/o.zoom;h[0].object.visible=!0;let v,C;for(v=1,C=h.length;v<C;v++){let b=h[v].distance;if(h[v].object.visible&&(b-=b*h[v].hysteresis),m>=b)h[v-1].object.visible=!1,h[v].object.visible=!0;else break}for(this._currentLevel=v-1;v<C;v++)h[v].object.visible=!1}}toJSON(o){const h=super.toJSON(o);this.autoUpdate===!1&&(h.object.autoUpdate=!1),h.object.levels=[];const m=this.levels;for(let v=0,C=m.length;v<C;v++){const b=m[v];h.object.levels.push({object:b.object.uuid,distance:b.distance,hysteresis:b.hysteresis})}return h}}const _p=new nt,xp=new zr,Mp=new zr,Dm=new nt,Sp=new on,Sf=new nt,w2=new Vs,bp=new on,C2=new Is;class Tp extends Bs{constructor(o,h){super(o,h),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=tt,this.bindMatrix=new on,this.bindMatrixInverse=new on,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const o=this.geometry;this.boundingBox===null&&(this.boundingBox=new jn),this.boundingBox.makeEmpty();const h=o.getAttribute("position");for(let m=0;m<h.count;m++)this.getVertexPosition(m,Sf),this.boundingBox.expandByPoint(Sf)}computeBoundingSphere(){const o=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Vs),this.boundingSphere.makeEmpty();const h=o.getAttribute("position");for(let m=0;m<h.count;m++)this.getVertexPosition(m,Sf),this.boundingSphere.expandByPoint(Sf)}copy(o,h){return super.copy(o,h),this.bindMode=o.bindMode,this.bindMatrix.copy(o.bindMatrix),this.bindMatrixInverse.copy(o.bindMatrixInverse),this.skeleton=o.skeleton,o.boundingBox!==null&&(this.boundingBox=o.boundingBox.clone()),o.boundingSphere!==null&&(this.boundingSphere=o.boundingSphere.clone()),this}raycast(o,h){const m=this.material,v=this.matrixWorld;m!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),w2.copy(this.boundingSphere),w2.applyMatrix4(v),o.ray.intersectsSphere(w2)!==!1&&(bp.copy(v).invert(),C2.copy(o.ray).applyMatrix4(bp),!(this.boundingBox!==null&&C2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(o,h,C2)))}getVertexPosition(o,h){return super.getVertexPosition(o,h),this.applyBoneTransform(o,h),h}bind(o,h){this.skeleton=o,h===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),h=this.matrixWorld),this.bindMatrix.copy(h),this.bindMatrixInverse.copy(h).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const o=new zr,h=this.geometry.attributes.skinWeight;for(let m=0,v=h.count;m<v;m++){o.fromBufferAttribute(h,m);const C=1/o.manhattanLength();C!==1/0?o.multiplyScalar(C):o.set(1,0,0,0),h.setXYZW(m,o.x,o.y,o.z,o.w)}}updateMatrixWorld(o){super.updateMatrixWorld(o),this.bindMode===tt?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===ot?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(o,h){const m=this.skeleton,v=this.geometry;xp.fromBufferAttribute(v.attributes.skinIndex,o),Mp.fromBufferAttribute(v.attributes.skinWeight,o),_p.copy(h).applyMatrix4(this.bindMatrix),h.set(0,0,0);for(let C=0;C<4;C++){const b=Mp.getComponent(C);if(b!==0){const L=xp.getComponent(C);Sp.multiplyMatrices(m.bones[L].matrixWorld,m.boneInverses[L]),h.addScaledVector(Dm.copy(_p).applyMatrix4(Sp),b)}}return h.applyMatrix4(this.bindMatrixInverse)}}class _2 extends Nr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zc extends cs{constructor(o=null,h=1,m=1,v,C,b,L,W,J=Wi,re=Wi,ue,pe){super(null,b,L,W,J,re,v,C,ue,pe),this.isDataTexture=!0,this.image={data:o,width:h,height:m},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Rp=new on,Pm=new on;class bf{constructor(o=[],h=[]){this.uuid=Wo(),this.bones=o.slice(0),this.boneInverses=h,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const o=this.bones,h=this.boneInverses;if(this.boneMatrices=new Float32Array(o.length*16),h.length===0)this.calculateInverses();else if(o.length!==h.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let m=0,v=this.bones.length;m<v;m++)this.boneInverses.push(new on)}}calculateInverses(){this.boneInverses.length=0;for(let o=0,h=this.bones.length;o<h;o++){const m=new on;this.bones[o]&&m.copy(this.bones[o].matrixWorld).invert(),this.boneInverses.push(m)}}pose(){for(let o=0,h=this.bones.length;o<h;o++){const m=this.bones[o];m&&m.matrixWorld.copy(this.boneInverses[o]).invert()}for(let o=0,h=this.bones.length;o<h;o++){const m=this.bones[o];m&&(m.parent&&m.parent.isBone?(m.matrix.copy(m.parent.matrixWorld).invert(),m.matrix.multiply(m.matrixWorld)):m.matrix.copy(m.matrixWorld),m.matrix.decompose(m.position,m.quaternion,m.scale))}}update(){const o=this.bones,h=this.boneInverses,m=this.boneMatrices,v=this.boneTexture;for(let C=0,b=o.length;C<b;C++){const L=o[C]?o[C].matrixWorld:Pm;Rp.multiplyMatrices(L,h[C]),Rp.toArray(m,C*16)}v!==null&&(v.needsUpdate=!0)}clone(){return new bf(this.bones,this.boneInverses)}computeBoneTexture(){let o=Math.sqrt(this.bones.length*4);o=Math.ceil(o/4)*4,o=Math.max(o,4);const h=new Float32Array(o*o*4);h.set(this.boneMatrices);const m=new zc(h,o,o,At,Rs);return m.needsUpdate=!0,this.boneMatrices=h,this.boneTexture=m,this}getBoneByName(o){for(let h=0,m=this.bones.length;h<m;h++){const v=this.bones[h];if(v.name===o)return v}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(o,h){this.uuid=o.uuid;for(let m=0,v=o.bones.length;m<v;m++){const C=o.bones[m];let b=h[C];b===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",C),b=new _2),this.bones.push(b),this.boneInverses.push(new on().fromArray(o.boneInverses[m]))}return this.init(),this}toJSON(){const o={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};o.uuid=this.uuid;const h=this.bones,m=this.boneInverses;for(let v=0,C=h.length;v<C;v++){const b=h[v];o.bones.push(b.uuid);const L=m[v];o.boneInverses.push(L.toArray())}return o}}class Cd extends Zr{constructor(o,h,m,v=1){super(o,h,m),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=v}copy(o){return super.copy(o),this.meshPerAttribute=o.meshPerAttribute,this}toJSON(){const o=super.toJSON();return o.meshPerAttribute=this.meshPerAttribute,o.isInstancedBufferAttribute=!0,o}}const _d=new on,Ip=new on,Tf=[],Bp=new jn,Om=new on,Jd=new Bs,Zd=new Vs;class Lp extends Bs{constructor(o,h,m){super(o,h),this.isInstancedMesh=!0,this.instanceMatrix=new Cd(new Float32Array(m*16),16),this.instanceColor=null,this.morphTexture=null,this.count=m,this.boundingBox=null,this.boundingSphere=null;for(let v=0;v<m;v++)this.setMatrixAt(v,Om)}computeBoundingBox(){const o=this.geometry,h=this.count;this.boundingBox===null&&(this.boundingBox=new jn),o.boundingBox===null&&o.computeBoundingBox(),this.boundingBox.makeEmpty();for(let m=0;m<h;m++)this.getMatrixAt(m,_d),Bp.copy(o.boundingBox).applyMatrix4(_d),this.boundingBox.union(Bp)}computeBoundingSphere(){const o=this.geometry,h=this.count;this.boundingSphere===null&&(this.boundingSphere=new Vs),o.boundingSphere===null&&o.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let m=0;m<h;m++)this.getMatrixAt(m,_d),Zd.copy(o.boundingSphere).applyMatrix4(_d),this.boundingSphere.union(Zd)}copy(o,h){return super.copy(o,h),this.instanceMatrix.copy(o.instanceMatrix),o.morphTexture!==null&&(this.morphTexture=o.morphTexture.clone()),o.instanceColor!==null&&(this.instanceColor=o.instanceColor.clone()),this.count=o.count,o.boundingBox!==null&&(this.boundingBox=o.boundingBox.clone()),o.boundingSphere!==null&&(this.boundingSphere=o.boundingSphere.clone()),this}getColorAt(o,h){h.fromArray(this.instanceColor.array,o*3)}getMatrixAt(o,h){h.fromArray(this.instanceMatrix.array,o*16)}getMorphAt(o,h){const m=h.morphTargetInfluences,v=this.morphTexture.source.data.data,C=m.length+1,b=o*C+1;for(let L=0;L<m.length;L++)m[L]=v[b+L]}raycast(o,h){const m=this.matrixWorld,v=this.count;if(Jd.geometry=this.geometry,Jd.material=this.material,Jd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Zd.copy(this.boundingSphere),Zd.applyMatrix4(m),o.ray.intersectsSphere(Zd)!==!1))for(let C=0;C<v;C++){this.getMatrixAt(C,_d),Ip.multiplyMatrices(m,_d),Jd.matrixWorld=Ip,Jd.raycast(o,Tf);for(let b=0,L=Tf.length;b<L;b++){const W=Tf[b];W.instanceId=C,W.object=this,h.push(W)}Tf.length=0}}setColorAt(o,h){this.instanceColor===null&&(this.instanceColor=new Cd(new Float32Array(this.instanceMatrix.count*3),3)),h.toArray(this.instanceColor.array,o*3)}setMatrixAt(o,h){h.toArray(this.instanceMatrix.array,o*16)}setMorphAt(o,h){const m=h.morphTargetInfluences,v=m.length+1;this.morphTexture===null&&(this.morphTexture=new zc(new Float32Array(v*this.count),v,this.count,Ii,Rs));const C=this.morphTexture.source.data.data;let b=0;for(let J=0;J<m.length;J++)b+=m[J];const L=this.geometry.morphTargetsRelative?1:1-b,W=v*o;C[W]=L,C.set(m,W+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Fm(x,o){return x.z-o.z}function km(x,o){return o.z-x.z}class Nm{constructor(){this.index=0,this.pool=[],this.list=[]}push(o,h){const m=this.pool,v=this.list;this.index>=m.length&&m.push({start:-1,count:-1,z:-1});const C=m[this.index];v.push(C),this.index++,C.start=o.start,C.count=o.count,C.z=h}reset(){this.list.length=0,this.index=0}}const xd="batchId",Wc=new on,Dp=new on,Um=new on,Pp=new on,x2=new il,Rf=new jn,sh=new Vs,$d=new nt,M2=new Nm,V0=new Bs,If=[];function Hm(x,o,h=0){const m=o.itemSize;if(x.isInterleavedBufferAttribute||x.array.constructor!==o.array.constructor){const v=x.count;for(let C=0;C<v;C++)for(let b=0;b<m;b++)o.setComponent(C+h,b,x.getComponent(C,b))}else o.array.set(x.array,h*m);o.needsUpdate=!0}class Op extends Bs{get maxGeometryCount(){return this._maxGeometryCount}constructor(o,h,m=h*2,v){super(new rr,v),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=o,this._maxVertexCount=h,this._maxIndexCount=m,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(o),this._multiDrawStarts=new Int32Array(o),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let o=Math.sqrt(this._maxGeometryCount*4);o=Math.ceil(o/4)*4,o=Math.max(o,4);const h=new Float32Array(o*o*4),m=new zc(h,o,o,At,Rs);this._matricesTexture=m}_initializeGeometry(o){const h=this.geometry,m=this._maxVertexCount,v=this._maxGeometryCount,C=this._maxIndexCount;if(this._geometryInitialized===!1){for(const L in o.attributes){const W=o.getAttribute(L),{array:J,itemSize:re,normalized:ue}=W,pe=new J.constructor(m*re),ve=new Zr(pe,re,ue);h.setAttribute(L,ve)}if(o.getIndex()!==null){const L=m>65536?new Uint32Array(C):new Uint16Array(C);h.setIndex(new Zr(L,1))}const b=v>65536?new Uint32Array(m):new Uint16Array(m);h.setAttribute(xd,new Zr(b,1)),this._geometryInitialized=!0}}_validateGeometry(o){if(o.getAttribute(xd))throw new Error(`BatchedMesh: Geometry cannot use attribute "${xd}"`);const h=this.geometry;if(!!o.getIndex()!=!!h.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const m in h.attributes){if(m===xd)continue;if(!o.hasAttribute(m))throw new Error(`BatchedMesh: Added geometry missing "${m}". All geometries must have consistent attributes.`);const v=o.getAttribute(m),C=h.getAttribute(m);if(v.itemSize!==C.itemSize||v.normalized!==C.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(o){return this.customSort=o,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new jn);const o=this._geometryCount,h=this.boundingBox,m=this._active;h.makeEmpty();for(let v=0;v<o;v++)m[v]!==!1&&(this.getMatrixAt(v,Wc),this.getBoundingBoxAt(v,Rf).applyMatrix4(Wc),h.union(Rf))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Vs);const o=this._geometryCount,h=this.boundingSphere,m=this._active;h.makeEmpty();for(let v=0;v<o;v++)m[v]!==!1&&(this.getMatrixAt(v,Wc),this.getBoundingSphereAt(v,sh).applyMatrix4(Wc),h.union(sh))}addGeometry(o,h=-1,m=-1){if(this._initializeGeometry(o),this._validateGeometry(o),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const v={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let C=null;const b=this._reservedRanges,L=this._drawRanges,W=this._bounds;this._geometryCount!==0&&(C=b[b.length-1]),h===-1?v.vertexCount=o.getAttribute("position").count:v.vertexCount=h,C===null?v.vertexStart=0:v.vertexStart=C.vertexStart+C.vertexCount;const J=o.getIndex(),re=J!==null;if(re&&(m===-1?v.indexCount=J.count:v.indexCount=m,C===null?v.indexStart=0:v.indexStart=C.indexStart+C.indexCount),v.indexStart!==-1&&v.indexStart+v.indexCount>this._maxIndexCount||v.vertexStart+v.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const ue=this._visibility,pe=this._active,ve=this._matricesTexture,xe=this._matricesTexture.image.data;ue.push(!0),pe.push(!0);const Le=this._geometryCount;this._geometryCount++,Um.toArray(xe,Le*16),ve.needsUpdate=!0,b.push(v),L.push({start:re?v.indexStart:v.vertexStart,count:-1}),W.push({boxInitialized:!1,box:new jn,sphereInitialized:!1,sphere:new Vs});const Se=this.geometry.getAttribute(xd);for(let Ee=0;Ee<v.vertexCount;Ee++)Se.setX(v.vertexStart+Ee,Le);return Se.needsUpdate=!0,this.setGeometryAt(Le,o),Le}setGeometryAt(o,h){if(o>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(h);const m=this.geometry,v=m.getIndex()!==null,C=m.getIndex(),b=h.getIndex(),L=this._reservedRanges[o];if(v&&b.count>L.indexCount||h.attributes.position.count>L.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const W=L.vertexStart,J=L.vertexCount;for(const ve in m.attributes){if(ve===xd)continue;const xe=h.getAttribute(ve),Le=m.getAttribute(ve);Hm(xe,Le,W);const Se=xe.itemSize;for(let Ee=xe.count,Ke=J;Ee<Ke;Ee++){const Ge=W+Ee;for(let Ue=0;Ue<Se;Ue++)Le.setComponent(Ge,Ue,0)}Le.needsUpdate=!0,Le.addUpdateRange(W*Se,J*Se)}if(v){const ve=L.indexStart;for(let xe=0;xe<b.count;xe++)C.setX(ve+xe,W+b.getX(xe));for(let xe=b.count,Le=L.indexCount;xe<Le;xe++)C.setX(ve+xe,W);C.needsUpdate=!0,C.addUpdateRange(ve,L.indexCount)}const re=this._bounds[o];h.boundingBox!==null?(re.box.copy(h.boundingBox),re.boxInitialized=!0):re.boxInitialized=!1,h.boundingSphere!==null?(re.sphere.copy(h.boundingSphere),re.sphereInitialized=!0):re.sphereInitialized=!1;const ue=this._drawRanges[o],pe=h.getAttribute("position");return ue.count=v?b.count:pe.count,this._visibilityChanged=!0,o}deleteGeometry(o){const h=this._active;return o>=h.length||h[o]===!1?this:(h[o]=!1,this._visibilityChanged=!0,this)}getInstanceCountAt(o){return this._multiDrawInstances===null?null:this._multiDrawInstances[o]}setInstanceCountAt(o,h){return this._multiDrawInstances===null&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[o]=h,o}getBoundingBoxAt(o,h){if(this._active[o]===!1)return null;const v=this._bounds[o],C=v.box,b=this.geometry;if(v.boxInitialized===!1){C.makeEmpty();const L=b.index,W=b.attributes.position,J=this._drawRanges[o];for(let re=J.start,ue=J.start+J.count;re<ue;re++){let pe=re;L&&(pe=L.getX(pe)),C.expandByPoint($d.fromBufferAttribute(W,pe))}v.boxInitialized=!0}return h.copy(C),h}getBoundingSphereAt(o,h){if(this._active[o]===!1)return null;const v=this._bounds[o],C=v.sphere,b=this.geometry;if(v.sphereInitialized===!1){C.makeEmpty(),this.getBoundingBoxAt(o,Rf),Rf.getCenter(C.center);const L=b.index,W=b.attributes.position,J=this._drawRanges[o];let re=0;for(let ue=J.start,pe=J.start+J.count;ue<pe;ue++){let ve=ue;L&&(ve=L.getX(ve)),$d.fromBufferAttribute(W,ve),re=Math.max(re,C.center.distanceToSquared($d))}C.radius=Math.sqrt(re),v.sphereInitialized=!0}return h.copy(C),h}setMatrixAt(o,h){const m=this._active,v=this._matricesTexture,C=this._matricesTexture.image.data,b=this._geometryCount;return o>=b||m[o]===!1?this:(h.toArray(C,o*16),v.needsUpdate=!0,this)}getMatrixAt(o,h){const m=this._active,v=this._matricesTexture.image.data,C=this._geometryCount;return o>=C||m[o]===!1?null:h.fromArray(v,o*16)}setVisibleAt(o,h){const m=this._visibility,v=this._active,C=this._geometryCount;return o>=C||v[o]===!1||m[o]===h?this:(m[o]=h,this._visibilityChanged=!0,this)}getVisibleAt(o){const h=this._visibility,m=this._active,v=this._geometryCount;return o>=v||m[o]===!1?!1:h[o]}raycast(o,h){const m=this._visibility,v=this._active,C=this._drawRanges,b=this._geometryCount,L=this.matrixWorld,W=this.geometry;V0.material=this.material,V0.geometry.index=W.index,V0.geometry.attributes=W.attributes,V0.geometry.boundingBox===null&&(V0.geometry.boundingBox=new jn),V0.geometry.boundingSphere===null&&(V0.geometry.boundingSphere=new Vs);for(let J=0;J<b;J++){if(!m[J]||!v[J])continue;const re=C[J];V0.geometry.setDrawRange(re.start,re.count),this.getMatrixAt(J,V0.matrixWorld).premultiply(L),this.getBoundingBoxAt(J,V0.geometry.boundingBox),this.getBoundingSphereAt(J,V0.geometry.boundingSphere),V0.raycast(o,If);for(let ue=0,pe=If.length;ue<pe;ue++){const ve=If[ue];ve.object=this,ve.batchId=J,h.push(ve)}If.length=0}V0.material=null,V0.geometry.index=null,V0.geometry.attributes={},V0.geometry.setDrawRange(0,1/0)}copy(o){return super.copy(o),this.geometry=o.geometry.clone(),this.perObjectFrustumCulled=o.perObjectFrustumCulled,this.sortObjects=o.sortObjects,this.boundingBox=o.boundingBox!==null?o.boundingBox.clone():null,this.boundingSphere=o.boundingSphere!==null?o.boundingSphere.clone():null,this._drawRanges=o._drawRanges.map(h=>({...h})),this._reservedRanges=o._reservedRanges.map(h=>({...h})),this._visibility=o._visibility.slice(),this._active=o._active.slice(),this._bounds=o._bounds.map(h=>({boxInitialized:h.boxInitialized,box:h.box.clone(),sphereInitialized:h.sphereInitialized,sphere:h.sphere.clone()})),this._maxGeometryCount=o._maxGeometryCount,this._maxVertexCount=o._maxVertexCount,this._maxIndexCount=o._maxIndexCount,this._geometryInitialized=o._geometryInitialized,this._geometryCount=o._geometryCount,this._multiDrawCounts=o._multiDrawCounts.slice(),this._multiDrawStarts=o._multiDrawStarts.slice(),this._matricesTexture=o._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(o,h,m,v,C){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const b=v.getIndex(),L=b===null?1:b.array.BYTES_PER_ELEMENT,W=this._active,J=this._visibility,re=this._multiDrawStarts,ue=this._multiDrawCounts,pe=this._drawRanges,ve=this.perObjectFrustumCulled;ve&&(Pp.multiplyMatrices(m.projectionMatrix,m.matrixWorldInverse).multiply(this.matrixWorld),x2.setFromProjectionMatrix(Pp,o.coordinateSystem));let xe=0;if(this.sortObjects){Dp.copy(this.matrixWorld).invert(),$d.setFromMatrixPosition(m.matrixWorld).applyMatrix4(Dp);for(let Ee=0,Ke=J.length;Ee<Ke;Ee++)if(J[Ee]&&W[Ee]){this.getMatrixAt(Ee,Wc),this.getBoundingSphereAt(Ee,sh).applyMatrix4(Wc);let Ge=!1;if(ve&&(Ge=!x2.intersectsSphere(sh)),!Ge){const Ue=$d.distanceTo(sh.center);M2.push(pe[Ee],Ue)}}const Le=M2.list,Se=this.customSort;Se===null?Le.sort(C.transparent?km:Fm):Se.call(this,Le,m);for(let Ee=0,Ke=Le.length;Ee<Ke;Ee++){const Ge=Le[Ee];re[xe]=Ge.start*L,ue[xe]=Ge.count,xe++}M2.reset()}else for(let Le=0,Se=J.length;Le<Se;Le++)if(J[Le]&&W[Le]){let Ee=!1;if(ve&&(this.getMatrixAt(Le,Wc),this.getBoundingSphereAt(Le,sh).applyMatrix4(Wc),Ee=!x2.intersectsSphere(sh)),!Ee){const Ke=pe[Le];re[xe]=Ke.start*L,ue[xe]=Ke.count,xe++}}this._multiDrawCount=xe,this._visibilityChanged=!1}onBeforeShadow(o,h,m,v,C,b){this.onBeforeRender(o,null,v,C,b)}}class la extends us{constructor(o){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new un(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.linewidth=o.linewidth,this.linecap=o.linecap,this.linejoin=o.linejoin,this.fog=o.fog,this}}const Bf=new nt,Lf=new nt,Fp=new on,jd=new Is,Df=new Vs,S2=new nt,kp=new nt;class Kc extends Nr{constructor(o=new rr,h=new la){super(),this.isLine=!0,this.type="Line",this.geometry=o,this.material=h,this.updateMorphTargets()}copy(o,h){return super.copy(o,h),this.material=Array.isArray(o.material)?o.material.slice():o.material,this.geometry=o.geometry,this}computeLineDistances(){const o=this.geometry;if(o.index===null){const h=o.attributes.position,m=[0];for(let v=1,C=h.count;v<C;v++)Bf.fromBufferAttribute(h,v-1),Lf.fromBufferAttribute(h,v),m[v]=m[v-1],m[v]+=Bf.distanceTo(Lf);o.setAttribute("lineDistance",new Ai(m,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(o,h){const m=this.geometry,v=this.matrixWorld,C=o.params.Line.threshold,b=m.drawRange;if(m.boundingSphere===null&&m.computeBoundingSphere(),Df.copy(m.boundingSphere),Df.applyMatrix4(v),Df.radius+=C,o.ray.intersectsSphere(Df)===!1)return;Fp.copy(v).invert(),jd.copy(o.ray).applyMatrix4(Fp);const L=C/((this.scale.x+this.scale.y+this.scale.z)/3),W=L*L,J=this.isLineSegments?2:1,re=m.index,pe=m.attributes.position;if(re!==null){const ve=Math.max(0,b.start),xe=Math.min(re.count,b.start+b.count);for(let Le=ve,Se=xe-1;Le<Se;Le+=J){const Ee=re.getX(Le),Ke=re.getX(Le+1),Ge=Pf(this,o,jd,W,Ee,Ke);Ge&&h.push(Ge)}if(this.isLineLoop){const Le=re.getX(xe-1),Se=re.getX(ve),Ee=Pf(this,o,jd,W,Le,Se);Ee&&h.push(Ee)}}else{const ve=Math.max(0,b.start),xe=Math.min(pe.count,b.start+b.count);for(let Le=ve,Se=xe-1;Le<Se;Le+=J){const Ee=Pf(this,o,jd,W,Le,Le+1);Ee&&h.push(Ee)}if(this.isLineLoop){const Le=Pf(this,o,jd,W,xe-1,ve);Le&&h.push(Le)}}}updateMorphTargets(){const h=this.geometry.morphAttributes,m=Object.keys(h);if(m.length>0){const v=h[m[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let C=0,b=v.length;C<b;C++){const L=v[C].name||String(C);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=C}}}}}function Pf(x,o,h,m,v,C){const b=x.geometry.attributes.position;if(Bf.fromBufferAttribute(b,v),Lf.fromBufferAttribute(b,C),h.distanceSqToSegment(Bf,Lf,S2,kp)>m)return;S2.applyMatrix4(x.matrixWorld);const W=o.ray.origin.distanceTo(S2);if(!(W<o.near||W>o.far))return{distance:W,point:kp.clone().applyMatrix4(x.matrixWorld),index:v,face:null,faceIndex:null,object:x}}const Np=new nt,Up=new nt;class m1 extends Kc{constructor(o,h){super(o,h),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const o=this.geometry;if(o.index===null){const h=o.attributes.position,m=[];for(let v=0,C=h.count;v<C;v+=2)Np.fromBufferAttribute(h,v),Up.fromBufferAttribute(h,v+1),m[v]=v===0?0:m[v-1],m[v+1]=m[v]+Np.distanceTo(Up);o.setAttribute("lineDistance",new Ai(m,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Hp extends Kc{constructor(o,h){super(o,h),this.isLineLoop=!0,this.type="LineLoop"}}class b2 extends us{constructor(o){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new un(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.alphaMap=o.alphaMap,this.size=o.size,this.sizeAttenuation=o.sizeAttenuation,this.fog=o.fog,this}}const Gp=new on,T2=new Is,Of=new Vs,Ff=new nt;class Qp extends Nr{constructor(o=new rr,h=new b2){super(),this.isPoints=!0,this.type="Points",this.geometry=o,this.material=h,this.updateMorphTargets()}copy(o,h){return super.copy(o,h),this.material=Array.isArray(o.material)?o.material.slice():o.material,this.geometry=o.geometry,this}raycast(o,h){const m=this.geometry,v=this.matrixWorld,C=o.params.Points.threshold,b=m.drawRange;if(m.boundingSphere===null&&m.computeBoundingSphere(),Of.copy(m.boundingSphere),Of.applyMatrix4(v),Of.radius+=C,o.ray.intersectsSphere(Of)===!1)return;Gp.copy(v).invert(),T2.copy(o.ray).applyMatrix4(Gp);const L=C/((this.scale.x+this.scale.y+this.scale.z)/3),W=L*L,J=m.index,ue=m.attributes.position;if(J!==null){const pe=Math.max(0,b.start),ve=Math.min(J.count,b.start+b.count);for(let xe=pe,Le=ve;xe<Le;xe++){const Se=J.getX(xe);Ff.fromBufferAttribute(ue,Se),Vp(Ff,Se,W,v,o,h,this)}}else{const pe=Math.max(0,b.start),ve=Math.min(ue.count,b.start+b.count);for(let xe=pe,Le=ve;xe<Le;xe++)Ff.fromBufferAttribute(ue,xe),Vp(Ff,xe,W,v,o,h,this)}}updateMorphTargets(){const h=this.geometry.morphAttributes,m=Object.keys(h);if(m.length>0){const v=h[m[0]];if(v!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let C=0,b=v.length;C<b;C++){const L=v[C].name||String(C);this.morphTargetInfluences.push(0),this.morphTargetDictionary[L]=C}}}}}function Vp(x,o,h,m,v,C,b){const L=T2.distanceSqToPoint(x);if(L<h){const W=new nt;T2.closestPointToPoint(x,W),W.applyMatrix4(m);const J=v.ray.origin.distanceTo(W);if(J<v.near||J>v.far)return;C.push({distance:J,distanceToRay:Math.sqrt(L),point:W,index:o,face:null,object:b})}}class Gm extends cs{constructor(o,h,m,v,C,b,L,W,J){super(o,h,m,v,C,b,L,W,J),this.isVideoTexture=!0,this.minFilter=b!==void 0?b:kn,this.magFilter=C!==void 0?C:kn,this.generateMipmaps=!1;const re=this;function ue(){re.needsUpdate=!0,o.requestVideoFrameCallback(ue)}"requestVideoFrameCallback"in o&&o.requestVideoFrameCallback(ue)}clone(){return new this.constructor(this.image).copy(this)}update(){const o=this.image;"requestVideoFrameCallback"in o===!1&&o.readyState>=o.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Qm extends cs{constructor(o,h){super({width:o,height:h}),this.isFramebufferTexture=!0,this.magFilter=Wi,this.minFilter=Wi,this.generateMipmaps=!1,this.needsUpdate=!0}}class kf extends cs{constructor(o,h,m,v,C,b,L,W,J,re,ue,pe){super(null,b,L,W,J,re,v,C,ue,pe),this.isCompressedTexture=!0,this.image={width:h,height:m},this.mipmaps=o,this.flipY=!1,this.generateMipmaps=!1}}class Vm extends kf{constructor(o,h,m,v,C,b){super(o,h,m,C,b),this.isCompressedArrayTexture=!0,this.image.depth=v,this.wrapR=St}}class zm extends kf{constructor(o,h,m){super(void 0,o[0].width,o[0].height,h,m,Ie),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=o}}class Wm extends cs{constructor(o,h,m,v,C,b,L,W,J){super(o,h,m,v,C,b,L,W,J),this.isCanvasTexture=!0,this.needsUpdate=!0}}class zl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(o,h){const m=this.getUtoTmapping(o);return this.getPoint(m,h)}getPoints(o=5){const h=[];for(let m=0;m<=o;m++)h.push(this.getPoint(m/o));return h}getSpacedPoints(o=5){const h=[];for(let m=0;m<=o;m++)h.push(this.getPointAt(m/o));return h}getLength(){const o=this.getLengths();return o[o.length-1]}getLengths(o=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===o+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const h=[];let m,v=this.getPoint(0),C=0;h.push(0);for(let b=1;b<=o;b++)m=this.getPoint(b/o),C+=m.distanceTo(v),h.push(C),v=m;return this.cacheArcLengths=h,h}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(o,h){const m=this.getLengths();let v=0;const C=m.length;let b;h?b=h:b=o*m[C-1];let L=0,W=C-1,J;for(;L<=W;)if(v=Math.floor(L+(W-L)/2),J=m[v]-b,J<0)L=v+1;else if(J>0)W=v-1;else{W=v;break}if(v=W,m[v]===b)return v/(C-1);const re=m[v],pe=m[v+1]-re,ve=(b-re)/pe;return(v+ve)/(C-1)}getTangent(o,h){let v=o-1e-4,C=o+1e-4;v<0&&(v=0),C>1&&(C=1);const b=this.getPoint(v),L=this.getPoint(C),W=h||(b.isVector2?new vi:new nt);return W.copy(L).sub(b).normalize(),W}getTangentAt(o,h){const m=this.getUtoTmapping(o);return this.getTangent(m,h)}computeFrenetFrames(o,h){const m=new nt,v=[],C=[],b=[],L=new nt,W=new on;for(let ve=0;ve<=o;ve++){const xe=ve/o;v[ve]=this.getTangentAt(xe,new nt)}C[0]=new nt,b[0]=new nt;let J=Number.MAX_VALUE;const re=Math.abs(v[0].x),ue=Math.abs(v[0].y),pe=Math.abs(v[0].z);re<=J&&(J=re,m.set(1,0,0)),ue<=J&&(J=ue,m.set(0,1,0)),pe<=J&&m.set(0,0,1),L.crossVectors(v[0],m).normalize(),C[0].crossVectors(v[0],L),b[0].crossVectors(v[0],C[0]);for(let ve=1;ve<=o;ve++){if(C[ve]=C[ve-1].clone(),b[ve]=b[ve-1].clone(),L.crossVectors(v[ve-1],v[ve]),L.length()>Number.EPSILON){L.normalize();const xe=Math.acos(Ts(v[ve-1].dot(v[ve]),-1,1));C[ve].applyMatrix4(W.makeRotationAxis(L,xe))}b[ve].crossVectors(v[ve],C[ve])}if(h===!0){let ve=Math.acos(Ts(C[0].dot(C[o]),-1,1));ve/=o,v[0].dot(L.crossVectors(C[0],C[o]))>0&&(ve=-ve);for(let xe=1;xe<=o;xe++)C[xe].applyMatrix4(W.makeRotationAxis(v[xe],ve*xe)),b[xe].crossVectors(v[xe],C[xe])}return{tangents:v,normals:C,binormals:b}}clone(){return new this.constructor().copy(this)}copy(o){return this.arcLengthDivisions=o.arcLengthDivisions,this}toJSON(){const o={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return o.arcLengthDivisions=this.arcLengthDivisions,o.type=this.type,o}fromJSON(o){return this.arcLengthDivisions=o.arcLengthDivisions,this}}class Nf extends zl{constructor(o=0,h=0,m=1,v=1,C=0,b=Math.PI*2,L=!1,W=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=o,this.aY=h,this.xRadius=m,this.yRadius=v,this.aStartAngle=C,this.aEndAngle=b,this.aClockwise=L,this.aRotation=W}getPoint(o,h=new vi){const m=h,v=Math.PI*2;let C=this.aEndAngle-this.aStartAngle;const b=Math.abs(C)<Number.EPSILON;for(;C<0;)C+=v;for(;C>v;)C-=v;C<Number.EPSILON&&(b?C=0:C=v),this.aClockwise===!0&&!b&&(C===v?C=-v:C=C-v);const L=this.aStartAngle+o*C;let W=this.aX+this.xRadius*Math.cos(L),J=this.aY+this.yRadius*Math.sin(L);if(this.aRotation!==0){const re=Math.cos(this.aRotation),ue=Math.sin(this.aRotation),pe=W-this.aX,ve=J-this.aY;W=pe*re-ve*ue+this.aX,J=pe*ue+ve*re+this.aY}return m.set(W,J)}copy(o){return super.copy(o),this.aX=o.aX,this.aY=o.aY,this.xRadius=o.xRadius,this.yRadius=o.yRadius,this.aStartAngle=o.aStartAngle,this.aEndAngle=o.aEndAngle,this.aClockwise=o.aClockwise,this.aRotation=o.aRotation,this}toJSON(){const o=super.toJSON();return o.aX=this.aX,o.aY=this.aY,o.xRadius=this.xRadius,o.yRadius=this.yRadius,o.aStartAngle=this.aStartAngle,o.aEndAngle=this.aEndAngle,o.aClockwise=this.aClockwise,o.aRotation=this.aRotation,o}fromJSON(o){return super.fromJSON(o),this.aX=o.aX,this.aY=o.aY,this.xRadius=o.xRadius,this.yRadius=o.yRadius,this.aStartAngle=o.aStartAngle,this.aEndAngle=o.aEndAngle,this.aClockwise=o.aClockwise,this.aRotation=o.aRotation,this}}class zp extends Nf{constructor(o,h,m,v,C,b){super(o,h,m,m,v,C,b),this.isArcCurve=!0,this.type="ArcCurve"}}function R2(){let x=0,o=0,h=0,m=0;function v(C,b,L,W){x=C,o=L,h=-3*C+3*b-2*L-W,m=2*C-2*b+L+W}return{initCatmullRom:function(C,b,L,W,J){v(b,L,J*(L-C),J*(W-b))},initNonuniformCatmullRom:function(C,b,L,W,J,re,ue){let pe=(b-C)/J-(L-C)/(J+re)+(L-b)/re,ve=(L-b)/re-(W-b)/(re+ue)+(W-L)/ue;pe*=re,ve*=re,v(b,L,pe,ve)},calc:function(C){const b=C*C,L=b*C;return x+o*C+h*b+m*L}}}const Uf=new nt,I2=new R2,B2=new R2,L2=new R2;class Wp extends zl{constructor(o=[],h=!1,m="centripetal",v=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=o,this.closed=h,this.curveType=m,this.tension=v}getPoint(o,h=new nt){const m=h,v=this.points,C=v.length,b=(C-(this.closed?0:1))*o;let L=Math.floor(b),W=b-L;this.closed?L+=L>0?0:(Math.floor(Math.abs(L)/C)+1)*C:W===0&&L===C-1&&(L=C-2,W=1);let J,re;this.closed||L>0?J=v[(L-1)%C]:(Uf.subVectors(v[0],v[1]).add(v[0]),J=Uf);const ue=v[L%C],pe=v[(L+1)%C];if(this.closed||L+2<C?re=v[(L+2)%C]:(Uf.subVectors(v[C-1],v[C-2]).add(v[C-1]),re=Uf),this.curveType==="centripetal"||this.curveType==="chordal"){const ve=this.curveType==="chordal"?.5:.25;let xe=Math.pow(J.distanceToSquared(ue),ve),Le=Math.pow(ue.distanceToSquared(pe),ve),Se=Math.pow(pe.distanceToSquared(re),ve);Le<1e-4&&(Le=1),xe<1e-4&&(xe=Le),Se<1e-4&&(Se=Le),I2.initNonuniformCatmullRom(J.x,ue.x,pe.x,re.x,xe,Le,Se),B2.initNonuniformCatmullRom(J.y,ue.y,pe.y,re.y,xe,Le,Se),L2.initNonuniformCatmullRom(J.z,ue.z,pe.z,re.z,xe,Le,Se)}else this.curveType==="catmullrom"&&(I2.initCatmullRom(J.x,ue.x,pe.x,re.x,this.tension),B2.initCatmullRom(J.y,ue.y,pe.y,re.y,this.tension),L2.initCatmullRom(J.z,ue.z,pe.z,re.z,this.tension));return m.set(I2.calc(W),B2.calc(W),L2.calc(W)),m}copy(o){super.copy(o),this.points=[];for(let h=0,m=o.points.length;h<m;h++){const v=o.points[h];this.points.push(v.clone())}return this.closed=o.closed,this.curveType=o.curveType,this.tension=o.tension,this}toJSON(){const o=super.toJSON();o.points=[];for(let h=0,m=this.points.length;h<m;h++){const v=this.points[h];o.points.push(v.toArray())}return o.closed=this.closed,o.curveType=this.curveType,o.tension=this.tension,o}fromJSON(o){super.fromJSON(o),this.points=[];for(let h=0,m=o.points.length;h<m;h++){const v=o.points[h];this.points.push(new nt().fromArray(v))}return this.closed=o.closed,this.curveType=o.curveType,this.tension=o.tension,this}}function Kp(x,o,h,m,v){const C=(m-o)*.5,b=(v-h)*.5,L=x*x,W=x*L;return(2*h-2*m+C+b)*W+(-3*h+3*m-2*C-b)*L+C*x+h}function Km(x,o){const h=1-x;return h*h*o}function Xm(x,o){return 2*(1-x)*x*o}function Ym(x,o){return x*x*o}function ef(x,o,h,m){return Km(x,o)+Xm(x,h)+Ym(x,m)}function qm(x,o){const h=1-x;return h*h*h*o}function Jm(x,o){const h=1-x;return 3*h*h*x*o}function Zm(x,o){return 3*(1-x)*x*x*o}function $m(x,o){return x*x*x*o}function tf(x,o,h,m,v){return qm(x,o)+Jm(x,h)+Zm(x,m)+$m(x,v)}class D2 extends zl{constructor(o=new vi,h=new vi,m=new vi,v=new vi){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=o,this.v1=h,this.v2=m,this.v3=v}getPoint(o,h=new vi){const m=h,v=this.v0,C=this.v1,b=this.v2,L=this.v3;return m.set(tf(o,v.x,C.x,b.x,L.x),tf(o,v.y,C.y,b.y,L.y)),m}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this.v3.copy(o.v3),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o.v3=this.v3.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this.v3.fromArray(o.v3),this}}class Xp extends zl{constructor(o=new nt,h=new nt,m=new nt,v=new nt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=o,this.v1=h,this.v2=m,this.v3=v}getPoint(o,h=new nt){const m=h,v=this.v0,C=this.v1,b=this.v2,L=this.v3;return m.set(tf(o,v.x,C.x,b.x,L.x),tf(o,v.y,C.y,b.y,L.y),tf(o,v.z,C.z,b.z,L.z)),m}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this.v3.copy(o.v3),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o.v3=this.v3.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this.v3.fromArray(o.v3),this}}class P2 extends zl{constructor(o=new vi,h=new vi){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=o,this.v2=h}getPoint(o,h=new vi){const m=h;return o===1?m.copy(this.v2):(m.copy(this.v2).sub(this.v1),m.multiplyScalar(o).add(this.v1)),m}getPointAt(o,h){return this.getPoint(o,h)}getTangent(o,h=new vi){return h.subVectors(this.v2,this.v1).normalize()}getTangentAt(o,h){return this.getTangent(o,h)}copy(o){return super.copy(o),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}}class Yp extends zl{constructor(o=new nt,h=new nt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=o,this.v2=h}getPoint(o,h=new nt){const m=h;return o===1?m.copy(this.v2):(m.copy(this.v2).sub(this.v1),m.multiplyScalar(o).add(this.v1)),m}getPointAt(o,h){return this.getPoint(o,h)}getTangent(o,h=new nt){return h.subVectors(this.v2,this.v1).normalize()}getTangentAt(o,h){return this.getTangent(o,h)}copy(o){return super.copy(o),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}}class O2 extends zl{constructor(o=new vi,h=new vi,m=new vi){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=o,this.v1=h,this.v2=m}getPoint(o,h=new vi){const m=h,v=this.v0,C=this.v1,b=this.v2;return m.set(ef(o,v.x,C.x,b.x),ef(o,v.y,C.y,b.y)),m}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}}class F2 extends zl{constructor(o=new nt,h=new nt,m=new nt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=o,this.v1=h,this.v2=m}getPoint(o,h=new nt){const m=h,v=this.v0,C=this.v1,b=this.v2;return m.set(ef(o,v.x,C.x,b.x),ef(o,v.y,C.y,b.y),ef(o,v.z,C.z,b.z)),m}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}}class k2 extends zl{constructor(o=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=o}getPoint(o,h=new vi){const m=h,v=this.points,C=(v.length-1)*o,b=Math.floor(C),L=C-b,W=v[b===0?b:b-1],J=v[b],re=v[b>v.length-2?v.length-1:b+1],ue=v[b>v.length-3?v.length-1:b+2];return m.set(Kp(L,W.x,J.x,re.x,ue.x),Kp(L,W.y,J.y,re.y,ue.y)),m}copy(o){super.copy(o),this.points=[];for(let h=0,m=o.points.length;h<m;h++){const v=o.points[h];this.points.push(v.clone())}return this}toJSON(){const o=super.toJSON();o.points=[];for(let h=0,m=this.points.length;h<m;h++){const v=this.points[h];o.points.push(v.toArray())}return o}fromJSON(o){super.fromJSON(o),this.points=[];for(let h=0,m=o.points.length;h<m;h++){const v=o.points[h];this.points.push(new vi().fromArray(v))}return this}}var Hf=Object.freeze({__proto__:null,ArcCurve:zp,CatmullRomCurve3:Wp,CubicBezierCurve:D2,CubicBezierCurve3:Xp,EllipseCurve:Nf,LineCurve:P2,LineCurve3:Yp,QuadraticBezierCurve:O2,QuadraticBezierCurve3:F2,SplineCurve:k2});class qp extends zl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(o){this.curves.push(o)}closePath(){const o=this.curves[0].getPoint(0),h=this.curves[this.curves.length-1].getPoint(1);if(!o.equals(h)){const m=o.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Hf[m](h,o))}return this}getPoint(o,h){const m=o*this.getLength(),v=this.getCurveLengths();let C=0;for(;C<v.length;){if(v[C]>=m){const b=v[C]-m,L=this.curves[C],W=L.getLength(),J=W===0?0:1-b/W;return L.getPointAt(J,h)}C++}return null}getLength(){const o=this.getCurveLengths();return o[o.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const o=[];let h=0;for(let m=0,v=this.curves.length;m<v;m++)h+=this.curves[m].getLength(),o.push(h);return this.cacheLengths=o,o}getSpacedPoints(o=40){const h=[];for(let m=0;m<=o;m++)h.push(this.getPoint(m/o));return this.autoClose&&h.push(h[0]),h}getPoints(o=12){const h=[];let m;for(let v=0,C=this.curves;v<C.length;v++){const b=C[v],L=b.isEllipseCurve?o*2:b.isLineCurve||b.isLineCurve3?1:b.isSplineCurve?o*b.points.length:o,W=b.getPoints(L);for(let J=0;J<W.length;J++){const re=W[J];m&&m.equals(re)||(h.push(re),m=re)}}return this.autoClose&&h.length>1&&!h[h.length-1].equals(h[0])&&h.push(h[0]),h}copy(o){super.copy(o),this.curves=[];for(let h=0,m=o.curves.length;h<m;h++){const v=o.curves[h];this.curves.push(v.clone())}return this.autoClose=o.autoClose,this}toJSON(){const o=super.toJSON();o.autoClose=this.autoClose,o.curves=[];for(let h=0,m=this.curves.length;h<m;h++){const v=this.curves[h];o.curves.push(v.toJSON())}return o}fromJSON(o){super.fromJSON(o),this.autoClose=o.autoClose,this.curves=[];for(let h=0,m=o.curves.length;h<m;h++){const v=o.curves[h];this.curves.push(new Hf[v.type]().fromJSON(v))}return this}}class nf extends qp{constructor(o){super(),this.type="Path",this.currentPoint=new vi,o&&this.setFromPoints(o)}setFromPoints(o){this.moveTo(o[0].x,o[0].y);for(let h=1,m=o.length;h<m;h++)this.lineTo(o[h].x,o[h].y);return this}moveTo(o,h){return this.currentPoint.set(o,h),this}lineTo(o,h){const m=new P2(this.currentPoint.clone(),new vi(o,h));return this.curves.push(m),this.currentPoint.set(o,h),this}quadraticCurveTo(o,h,m,v){const C=new O2(this.currentPoint.clone(),new vi(o,h),new vi(m,v));return this.curves.push(C),this.currentPoint.set(m,v),this}bezierCurveTo(o,h,m,v,C,b){const L=new D2(this.currentPoint.clone(),new vi(o,h),new vi(m,v),new vi(C,b));return this.curves.push(L),this.currentPoint.set(C,b),this}splineThru(o){const h=[this.currentPoint.clone()].concat(o),m=new k2(h);return this.curves.push(m),this.currentPoint.copy(o[o.length-1]),this}arc(o,h,m,v,C,b){const L=this.currentPoint.x,W=this.currentPoint.y;return this.absarc(o+L,h+W,m,v,C,b),this}absarc(o,h,m,v,C,b){return this.absellipse(o,h,m,m,v,C,b),this}ellipse(o,h,m,v,C,b,L,W){const J=this.currentPoint.x,re=this.currentPoint.y;return this.absellipse(o+J,h+re,m,v,C,b,L,W),this}absellipse(o,h,m,v,C,b,L,W){const J=new Nf(o,h,m,v,C,b,L,W);if(this.curves.length>0){const ue=J.getPoint(0);ue.equals(this.currentPoint)||this.lineTo(ue.x,ue.y)}this.curves.push(J);const re=J.getPoint(1);return this.currentPoint.copy(re),this}copy(o){return super.copy(o),this.currentPoint.copy(o.currentPoint),this}toJSON(){const o=super.toJSON();return o.currentPoint=this.currentPoint.toArray(),o}fromJSON(o){return super.fromJSON(o),this.currentPoint.fromArray(o.currentPoint),this}}class rf extends rr{constructor(o=[new vi(0,-.5),new vi(.5,0),new vi(0,.5)],h=12,m=0,v=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:o,segments:h,phiStart:m,phiLength:v},h=Math.floor(h),v=Ts(v,0,Math.PI*2);const C=[],b=[],L=[],W=[],J=[],re=1/h,ue=new nt,pe=new vi,ve=new nt,xe=new nt,Le=new nt;let Se=0,Ee=0;for(let Ke=0;Ke<=o.length-1;Ke++)switch(Ke){case 0:Se=o[Ke+1].x-o[Ke].x,Ee=o[Ke+1].y-o[Ke].y,ve.x=Ee*1,ve.y=-Se,ve.z=Ee*0,Le.copy(ve),ve.normalize(),W.push(ve.x,ve.y,ve.z);break;case o.length-1:W.push(Le.x,Le.y,Le.z);break;default:Se=o[Ke+1].x-o[Ke].x,Ee=o[Ke+1].y-o[Ke].y,ve.x=Ee*1,ve.y=-Se,ve.z=Ee*0,xe.copy(ve),ve.x+=Le.x,ve.y+=Le.y,ve.z+=Le.z,ve.normalize(),W.push(ve.x,ve.y,ve.z),Le.copy(xe)}for(let Ke=0;Ke<=h;Ke++){const Ge=m+Ke*re*v,Ue=Math.sin(Ge),Ct=Math.cos(Ge);for(let at=0;at<=o.length-1;at++){ue.x=o[at].x*Ue,ue.y=o[at].y,ue.z=o[at].x*Ct,b.push(ue.x,ue.y,ue.z),pe.x=Ke/h,pe.y=at/(o.length-1),L.push(pe.x,pe.y);const ft=W[3*at+0]*Ue,yt=W[3*at+1],et=W[3*at+0]*Ct;J.push(ft,yt,et)}}for(let Ke=0;Ke<h;Ke++)for(let Ge=0;Ge<o.length-1;Ge++){const Ue=Ge+Ke*o.length,Ct=Ue,at=Ue+o.length,ft=Ue+o.length+1,yt=Ue+1;C.push(Ct,at,yt),C.push(ft,yt,at)}this.setIndex(C),this.setAttribute("position",new Ai(b,3)),this.setAttribute("uv",new Ai(L,2)),this.setAttribute("normal",new Ai(J,3))}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new rf(o.points,o.segments,o.phiStart,o.phiLength)}}class Gf extends rf{constructor(o=1,h=1,m=4,v=8){const C=new nf;C.absarc(0,-h/2,o,Math.PI*1.5,0),C.absarc(0,h/2,o,0,Math.PI*.5),super(C.getPoints(m),v),this.type="CapsuleGeometry",this.parameters={radius:o,length:h,capSegments:m,radialSegments:v}}static fromJSON(o){return new Gf(o.radius,o.length,o.capSegments,o.radialSegments)}}class Qf extends rr{constructor(o=1,h=32,m=0,v=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:o,segments:h,thetaStart:m,thetaLength:v},h=Math.max(3,h);const C=[],b=[],L=[],W=[],J=new nt,re=new vi;b.push(0,0,0),L.push(0,0,1),W.push(.5,.5);for(let ue=0,pe=3;ue<=h;ue++,pe+=3){const ve=m+ue/h*v;J.x=o*Math.cos(ve),J.y=o*Math.sin(ve),b.push(J.x,J.y,J.z),L.push(0,0,1),re.x=(b[pe]/o+1)/2,re.y=(b[pe+1]/o+1)/2,W.push(re.x,re.y)}for(let ue=1;ue<=h;ue++)C.push(ue,ue+1,0);this.setIndex(C),this.setAttribute("position",new Ai(b,3)),this.setAttribute("normal",new Ai(L,3)),this.setAttribute("uv",new Ai(W,2))}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new Qf(o.radius,o.segments,o.thetaStart,o.thetaLength)}}class Md extends rr{constructor(o=1,h=1,m=1,v=32,C=1,b=!1,L=0,W=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:o,radiusBottom:h,height:m,radialSegments:v,heightSegments:C,openEnded:b,thetaStart:L,thetaLength:W};const J=this;v=Math.floor(v),C=Math.floor(C);const re=[],ue=[],pe=[],ve=[];let xe=0;const Le=[],Se=m/2;let Ee=0;Ke(),b===!1&&(o>0&&Ge(!0),h>0&&Ge(!1)),this.setIndex(re),this.setAttribute("position",new Ai(ue,3)),this.setAttribute("normal",new Ai(pe,3)),this.setAttribute("uv",new Ai(ve,2));function Ke(){const Ue=new nt,Ct=new nt;let at=0;const ft=(h-o)/m;for(let yt=0;yt<=C;yt++){const et=[],qe=yt/C,wt=qe*(h-o)+o;for(let Ft=0;Ft<=v;Ft++){const Lt=Ft/v,Gt=Lt*W+L,ti=Math.sin(Gt),Ei=Math.cos(Gt);Ct.x=wt*ti,Ct.y=-qe*m+Se,Ct.z=wt*Ei,ue.push(Ct.x,Ct.y,Ct.z),Ue.set(ti,ft,Ei).normalize(),pe.push(Ue.x,Ue.y,Ue.z),ve.push(Lt,1-qe),et.push(xe++)}Le.push(et)}for(let yt=0;yt<v;yt++)for(let et=0;et<C;et++){const qe=Le[et][yt],wt=Le[et+1][yt],Ft=Le[et+1][yt+1],Lt=Le[et][yt+1];re.push(qe,wt,Lt),re.push(wt,Ft,Lt),at+=6}J.addGroup(Ee,at,0),Ee+=at}function Ge(Ue){const Ct=xe,at=new vi,ft=new nt;let yt=0;const et=Ue===!0?o:h,qe=Ue===!0?1:-1;for(let Ft=1;Ft<=v;Ft++)ue.push(0,Se*qe,0),pe.push(0,qe,0),ve.push(.5,.5),xe++;const wt=xe;for(let Ft=0;Ft<=v;Ft++){const Gt=Ft/v*W+L,ti=Math.cos(Gt),Ei=Math.sin(Gt);ft.x=et*Ei,ft.y=Se*qe,ft.z=et*ti,ue.push(ft.x,ft.y,ft.z),pe.push(0,qe,0),at.x=ti*.5+.5,at.y=Ei*.5*qe+.5,ve.push(at.x,at.y),xe++}for(let Ft=0;Ft<v;Ft++){const Lt=Ct+Ft,Gt=wt+Ft;Ue===!0?re.push(Gt,Gt+1,Lt):re.push(Gt+1,Gt,Lt),yt+=3}J.addGroup(Ee,yt,Ue===!0?1:2),Ee+=yt}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new Md(o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength)}}class Vf extends Md{constructor(o=1,h=1,m=32,v=1,C=!1,b=0,L=Math.PI*2){super(0,o,h,m,v,C,b,L),this.type="ConeGeometry",this.parameters={radius:o,height:h,radialSegments:m,heightSegments:v,openEnded:C,thetaStart:b,thetaLength:L}}static fromJSON(o){return new Vf(o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength)}}class Xc extends rr{constructor(o=[],h=[],m=1,v=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:o,indices:h,radius:m,detail:v};const C=[],b=[];L(v),J(m),re(),this.setAttribute("position",new Ai(C,3)),this.setAttribute("normal",new Ai(C.slice(),3)),this.setAttribute("uv",new Ai(b,2)),v===0?this.computeVertexNormals():this.normalizeNormals();function L(Ke){const Ge=new nt,Ue=new nt,Ct=new nt;for(let at=0;at<h.length;at+=3)ve(h[at+0],Ge),ve(h[at+1],Ue),ve(h[at+2],Ct),W(Ge,Ue,Ct,Ke)}function W(Ke,Ge,Ue,Ct){const at=Ct+1,ft=[];for(let yt=0;yt<=at;yt++){ft[yt]=[];const et=Ke.clone().lerp(Ue,yt/at),qe=Ge.clone().lerp(Ue,yt/at),wt=at-yt;for(let Ft=0;Ft<=wt;Ft++)Ft===0&&yt===at?ft[yt][Ft]=et:ft[yt][Ft]=et.clone().lerp(qe,Ft/wt)}for(let yt=0;yt<at;yt++)for(let et=0;et<2*(at-yt)-1;et++){const qe=Math.floor(et/2);et%2===0?(pe(ft[yt][qe+1]),pe(ft[yt+1][qe]),pe(ft[yt][qe])):(pe(ft[yt][qe+1]),pe(ft[yt+1][qe+1]),pe(ft[yt+1][qe]))}}function J(Ke){const Ge=new nt;for(let Ue=0;Ue<C.length;Ue+=3)Ge.x=C[Ue+0],Ge.y=C[Ue+1],Ge.z=C[Ue+2],Ge.normalize().multiplyScalar(Ke),C[Ue+0]=Ge.x,C[Ue+1]=Ge.y,C[Ue+2]=Ge.z}function re(){const Ke=new nt;for(let Ge=0;Ge<C.length;Ge+=3){Ke.x=C[Ge+0],Ke.y=C[Ge+1],Ke.z=C[Ge+2];const Ue=Se(Ke)/2/Math.PI+.5,Ct=Ee(Ke)/Math.PI+.5;b.push(Ue,1-Ct)}xe(),ue()}function ue(){for(let Ke=0;Ke<b.length;Ke+=6){const Ge=b[Ke+0],Ue=b[Ke+2],Ct=b[Ke+4],at=Math.max(Ge,Ue,Ct),ft=Math.min(Ge,Ue,Ct);at>.9&&ft<.1&&(Ge<.2&&(b[Ke+0]+=1),Ue<.2&&(b[Ke+2]+=1),Ct<.2&&(b[Ke+4]+=1))}}function pe(Ke){C.push(Ke.x,Ke.y,Ke.z)}function ve(Ke,Ge){const Ue=Ke*3;Ge.x=o[Ue+0],Ge.y=o[Ue+1],Ge.z=o[Ue+2]}function xe(){const Ke=new nt,Ge=new nt,Ue=new nt,Ct=new nt,at=new vi,ft=new vi,yt=new vi;for(let et=0,qe=0;et<C.length;et+=9,qe+=6){Ke.set(C[et+0],C[et+1],C[et+2]),Ge.set(C[et+3],C[et+4],C[et+5]),Ue.set(C[et+6],C[et+7],C[et+8]),at.set(b[qe+0],b[qe+1]),ft.set(b[qe+2],b[qe+3]),yt.set(b[qe+4],b[qe+5]),Ct.copy(Ke).add(Ge).add(Ue).divideScalar(3);const wt=Se(Ct);Le(at,qe+0,Ke,wt),Le(ft,qe+2,Ge,wt),Le(yt,qe+4,Ue,wt)}}function Le(Ke,Ge,Ue,Ct){Ct<0&&Ke.x===1&&(b[Ge]=Ke.x-1),Ue.x===0&&Ue.z===0&&(b[Ge]=Ct/2/Math.PI+.5)}function Se(Ke){return Math.atan2(Ke.z,-Ke.x)}function Ee(Ke){return Math.atan2(-Ke.y,Math.sqrt(Ke.x*Ke.x+Ke.z*Ke.z))}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new Xc(o.vertices,o.indices,o.radius,o.details)}}class zf extends Xc{constructor(o=1,h=0){const m=(1+Math.sqrt(5))/2,v=1/m,C=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-v,-m,0,-v,m,0,v,-m,0,v,m,-v,-m,0,-v,m,0,v,-m,0,v,m,0,-m,0,-v,m,0,-v,-m,0,v,m,0,v],b=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(C,b,o,h),this.type="DodecahedronGeometry",this.parameters={radius:o,detail:h}}static fromJSON(o){return new zf(o.radius,o.detail)}}const Wf=new nt,Kf=new nt,N2=new nt,Xf=new po;class Jp extends rr{constructor(o=null,h=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:o,thresholdAngle:h},o!==null){const v=Math.pow(10,4),C=Math.cos(Aa*h),b=o.getIndex(),L=o.getAttribute("position"),W=b?b.count:L.count,J=[0,0,0],re=["a","b","c"],ue=new Array(3),pe={},ve=[];for(let xe=0;xe<W;xe+=3){b?(J[0]=b.getX(xe),J[1]=b.getX(xe+1),J[2]=b.getX(xe+2)):(J[0]=xe,J[1]=xe+1,J[2]=xe+2);const{a:Le,b:Se,c:Ee}=Xf;if(Le.fromBufferAttribute(L,J[0]),Se.fromBufferAttribute(L,J[1]),Ee.fromBufferAttribute(L,J[2]),Xf.getNormal(N2),ue[0]=`${Math.round(Le.x*v)},${Math.round(Le.y*v)},${Math.round(Le.z*v)}`,ue[1]=`${Math.round(Se.x*v)},${Math.round(Se.y*v)},${Math.round(Se.z*v)}`,ue[2]=`${Math.round(Ee.x*v)},${Math.round(Ee.y*v)},${Math.round(Ee.z*v)}`,!(ue[0]===ue[1]||ue[1]===ue[2]||ue[2]===ue[0]))for(let Ke=0;Ke<3;Ke++){const Ge=(Ke+1)%3,Ue=ue[Ke],Ct=ue[Ge],at=Xf[re[Ke]],ft=Xf[re[Ge]],yt=`${Ue}_${Ct}`,et=`${Ct}_${Ue}`;et in pe&&pe[et]?(N2.dot(pe[et].normal)<=C&&(ve.push(at.x,at.y,at.z),ve.push(ft.x,ft.y,ft.z)),pe[et]=null):yt in pe||(pe[yt]={index0:J[Ke],index1:J[Ge],normal:N2.clone()})}}for(const xe in pe)if(pe[xe]){const{index0:Le,index1:Se}=pe[xe];Wf.fromBufferAttribute(L,Le),Kf.fromBufferAttribute(L,Se),ve.push(Wf.x,Wf.y,Wf.z),ve.push(Kf.x,Kf.y,Kf.z)}this.setAttribute("position",new Ai(ve,3))}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}}class oh extends nf{constructor(o){super(o),this.uuid=Wo(),this.type="Shape",this.holes=[]}getPointsHoles(o){const h=[];for(let m=0,v=this.holes.length;m<v;m++)h[m]=this.holes[m].getPoints(o);return h}extractPoints(o){return{shape:this.getPoints(o),holes:this.getPointsHoles(o)}}copy(o){super.copy(o),this.holes=[];for(let h=0,m=o.holes.length;h<m;h++){const v=o.holes[h];this.holes.push(v.clone())}return this}toJSON(){const o=super.toJSON();o.uuid=this.uuid,o.holes=[];for(let h=0,m=this.holes.length;h<m;h++){const v=this.holes[h];o.holes.push(v.toJSON())}return o}fromJSON(o){super.fromJSON(o),this.uuid=o.uuid,this.holes=[];for(let h=0,m=o.holes.length;h<m;h++){const v=o.holes[h];this.holes.push(new nf().fromJSON(v))}return this}}const jm={triangulate:function(x,o,h=2){const m=o&&o.length,v=m?o[0]*h:x.length;let C=Zp(x,0,v,h,!0);const b=[];if(!C||C.next===C.prev)return b;let L,W,J,re,ue,pe,ve;if(m&&(C=r3(x,o,C,h)),x.length>80*h){L=J=x[0],W=re=x[1];for(let xe=h;xe<v;xe+=h)ue=x[xe],pe=x[xe+1],ue<L&&(L=ue),pe<W&&(W=pe),ue>J&&(J=ue),pe>re&&(re=pe);ve=Math.max(J-L,re-W),ve=ve!==0?32767/ve:0}return sf(C,b,h,L,W,ve,0),b}};function Zp(x,o,h,m,v){let C,b;if(v===A3(x,o,h,m)>0)for(C=o;C<h;C+=m)b=eA(C,x[C],x[C+1],b);else for(C=h-m;C>=o;C-=m)b=eA(C,x[C],x[C+1],b);return b&&Yf(b,b.next)&&(af(b),b=b.next),b}function ah(x,o){if(!x)return x;o||(o=x);let h=x,m;do if(m=!1,!h.steiner&&(Yf(h,h.next)||yo(h.prev,h,h.next)===0)){if(af(h),h=o=h.prev,h===h.next)break;m=!0}else h=h.next;while(m||h!==o);return o}function sf(x,o,h,m,v,C,b){if(!x)return;!b&&C&&c3(x,m,v,C);let L=x,W,J;for(;x.prev!==x.next;){if(W=x.prev,J=x.next,C?t3(x,m,v,C):e3(x)){o.push(W.i/h|0),o.push(x.i/h|0),o.push(J.i/h|0),af(x),x=J.next,L=J.next;continue}if(x=J,x===L){b?b===1?(x=i3(ah(x),o,h),sf(x,o,h,m,v,C,2)):b===2&&n3(x,o,h,m,v,C):sf(ah(x),o,h,m,v,C,1);break}}}function e3(x){const o=x.prev,h=x,m=x.next;if(yo(o,h,m)>=0)return!1;const v=o.x,C=h.x,b=m.x,L=o.y,W=h.y,J=m.y,re=v<C?v<b?v:b:C<b?C:b,ue=L<W?L<J?L:J:W<J?W:J,pe=v>C?v>b?v:b:C>b?C:b,ve=L>W?L>J?L:J:W>J?W:J;let xe=m.next;for(;xe!==o;){if(xe.x>=re&&xe.x<=pe&&xe.y>=ue&&xe.y<=ve&&Sd(v,L,C,W,b,J,xe.x,xe.y)&&yo(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function t3(x,o,h,m){const v=x.prev,C=x,b=x.next;if(yo(v,C,b)>=0)return!1;const L=v.x,W=C.x,J=b.x,re=v.y,ue=C.y,pe=b.y,ve=L<W?L<J?L:J:W<J?W:J,xe=re<ue?re<pe?re:pe:ue<pe?ue:pe,Le=L>W?L>J?L:J:W>J?W:J,Se=re>ue?re>pe?re:pe:ue>pe?ue:pe,Ee=U2(ve,xe,o,h,m),Ke=U2(Le,Se,o,h,m);let Ge=x.prevZ,Ue=x.nextZ;for(;Ge&&Ge.z>=Ee&&Ue&&Ue.z<=Ke;){if(Ge.x>=ve&&Ge.x<=Le&&Ge.y>=xe&&Ge.y<=Se&&Ge!==v&&Ge!==b&&Sd(L,re,W,ue,J,pe,Ge.x,Ge.y)&&yo(Ge.prev,Ge,Ge.next)>=0||(Ge=Ge.prevZ,Ue.x>=ve&&Ue.x<=Le&&Ue.y>=xe&&Ue.y<=Se&&Ue!==v&&Ue!==b&&Sd(L,re,W,ue,J,pe,Ue.x,Ue.y)&&yo(Ue.prev,Ue,Ue.next)>=0))return!1;Ue=Ue.nextZ}for(;Ge&&Ge.z>=Ee;){if(Ge.x>=ve&&Ge.x<=Le&&Ge.y>=xe&&Ge.y<=Se&&Ge!==v&&Ge!==b&&Sd(L,re,W,ue,J,pe,Ge.x,Ge.y)&&yo(Ge.prev,Ge,Ge.next)>=0)return!1;Ge=Ge.prevZ}for(;Ue&&Ue.z<=Ke;){if(Ue.x>=ve&&Ue.x<=Le&&Ue.y>=xe&&Ue.y<=Se&&Ue!==v&&Ue!==b&&Sd(L,re,W,ue,J,pe,Ue.x,Ue.y)&&yo(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.nextZ}return!0}function i3(x,o,h){let m=x;do{const v=m.prev,C=m.next.next;!Yf(v,C)&&$p(v,m,m.next,C)&&of(v,C)&&of(C,v)&&(o.push(v.i/h|0),o.push(m.i/h|0),o.push(C.i/h|0),af(m),af(m.next),m=x=C),m=m.next}while(m!==x);return ah(m)}function n3(x,o,h,m,v,C){let b=x;do{let L=b.next.next;for(;L!==b.prev;){if(b.i!==L.i&&d3(b,L)){let W=jp(b,L);b=ah(b,b.next),W=ah(W,W.next),sf(b,o,h,m,v,C,0),sf(W,o,h,m,v,C,0);return}L=L.next}b=b.next}while(b!==x)}function r3(x,o,h,m){const v=[];let C,b,L,W,J;for(C=0,b=o.length;C<b;C++)L=o[C]*m,W=C<b-1?o[C+1]*m:x.length,J=Zp(x,L,W,m,!1),J===J.next&&(J.steiner=!0),v.push(h3(J));for(v.sort(s3),C=0;C<v.length;C++)h=o3(v[C],h);return h}function s3(x,o){return x.x-o.x}function o3(x,o){const h=a3(x,o);if(!h)return o;const m=jp(h,x);return ah(m,m.next),ah(h,h.next)}function a3(x,o){let h=o,m=-1/0,v;const C=x.x,b=x.y;do{if(b<=h.y&&b>=h.next.y&&h.next.y!==h.y){const pe=h.x+(b-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(pe<=C&&pe>m&&(m=pe,v=h.x<h.next.x?h:h.next,pe===C))return v}h=h.next}while(h!==o);if(!v)return null;const L=v,W=v.x,J=v.y;let re=1/0,ue;h=v;do C>=h.x&&h.x>=W&&C!==h.x&&Sd(b<J?C:m,b,W,J,b<J?m:C,b,h.x,h.y)&&(ue=Math.abs(b-h.y)/(C-h.x),of(h,x)&&(ue<re||ue===re&&(h.x>v.x||h.x===v.x&&l3(v,h)))&&(v=h,re=ue)),h=h.next;while(h!==L);return v}function l3(x,o){return yo(x.prev,x,o.prev)<0&&yo(o.next,x,x.next)<0}function c3(x,o,h,m){let v=x;do v.z===0&&(v.z=U2(v.x,v.y,o,h,m)),v.prevZ=v.prev,v.nextZ=v.next,v=v.next;while(v!==x);v.prevZ.nextZ=null,v.prevZ=null,u3(v)}function u3(x){let o,h,m,v,C,b,L,W,J=1;do{for(h=x,x=null,C=null,b=0;h;){for(b++,m=h,L=0,o=0;o<J&&(L++,m=m.nextZ,!!m);o++);for(W=J;L>0||W>0&&m;)L!==0&&(W===0||!m||h.z<=m.z)?(v=h,h=h.nextZ,L--):(v=m,m=m.nextZ,W--),C?C.nextZ=v:x=v,v.prevZ=C,C=v;h=m}C.nextZ=null,J*=2}while(b>1);return x}function U2(x,o,h,m,v){return x=(x-h)*v|0,o=(o-m)*v|0,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,x|o<<1}function h3(x){let o=x,h=x;do(o.x<h.x||o.x===h.x&&o.y<h.y)&&(h=o),o=o.next;while(o!==x);return h}function Sd(x,o,h,m,v,C,b,L){return(v-b)*(o-L)>=(x-b)*(C-L)&&(x-b)*(m-L)>=(h-b)*(o-L)&&(h-b)*(C-L)>=(v-b)*(m-L)}function d3(x,o){return x.next.i!==o.i&&x.prev.i!==o.i&&!f3(x,o)&&(of(x,o)&&of(o,x)&&p3(x,o)&&(yo(x.prev,x,o.prev)||yo(x,o.prev,o))||Yf(x,o)&&yo(x.prev,x,x.next)>0&&yo(o.prev,o,o.next)>0)}function yo(x,o,h){return(o.y-x.y)*(h.x-o.x)-(o.x-x.x)*(h.y-o.y)}function Yf(x,o){return x.x===o.x&&x.y===o.y}function $p(x,o,h,m){const v=Jf(yo(x,o,h)),C=Jf(yo(x,o,m)),b=Jf(yo(h,m,x)),L=Jf(yo(h,m,o));return!!(v!==C&&b!==L||v===0&&qf(x,h,o)||C===0&&qf(x,m,o)||b===0&&qf(h,x,m)||L===0&&qf(h,o,m))}function qf(x,o,h){return o.x<=Math.max(x.x,h.x)&&o.x>=Math.min(x.x,h.x)&&o.y<=Math.max(x.y,h.y)&&o.y>=Math.min(x.y,h.y)}function Jf(x){return x>0?1:x<0?-1:0}function f3(x,o){let h=x;do{if(h.i!==x.i&&h.next.i!==x.i&&h.i!==o.i&&h.next.i!==o.i&&$p(h,h.next,x,o))return!0;h=h.next}while(h!==x);return!1}function of(x,o){return yo(x.prev,x,x.next)<0?yo(x,o,x.next)>=0&&yo(x,x.prev,o)>=0:yo(x,o,x.prev)<0||yo(x,x.next,o)<0}function p3(x,o){let h=x,m=!1;const v=(x.x+o.x)/2,C=(x.y+o.y)/2;do h.y>C!=h.next.y>C&&h.next.y!==h.y&&v<(h.next.x-h.x)*(C-h.y)/(h.next.y-h.y)+h.x&&(m=!m),h=h.next;while(h!==x);return m}function jp(x,o){const h=new H2(x.i,x.x,x.y),m=new H2(o.i,o.x,o.y),v=x.next,C=o.prev;return x.next=o,o.prev=x,h.next=v,v.prev=h,m.next=h,h.prev=m,C.next=m,m.prev=C,m}function eA(x,o,h,m){const v=new H2(x,o,h);return m?(v.next=m.next,v.prev=m,m.next.prev=v,m.next=v):(v.prev=v,v.next=v),v}function af(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function H2(x,o,h){this.i=x,this.x=o,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A3(x,o,h,m){let v=0;for(let C=o,b=h-m;C<h;C+=m)v+=(x[b]-x[C])*(x[C+1]+x[b+1]),b=C;return v}class g1{static area(o){const h=o.length;let m=0;for(let v=h-1,C=0;C<h;v=C++)m+=o[v].x*o[C].y-o[C].x*o[v].y;return m*.5}static isClockWise(o){return g1.area(o)<0}static triangulateShape(o,h){const m=[],v=[],C=[];tA(o),iA(m,o);let b=o.length;h.forEach(tA);for(let W=0;W<h.length;W++)v.push(b),b+=h[W].length,iA(m,h[W]);const L=jm.triangulate(m,v);for(let W=0;W<L.length;W+=3)C.push(L.slice(W,W+3));return C}}function tA(x){const o=x.length;o>2&&x[o-1].equals(x[0])&&x.pop()}function iA(x,o){for(let h=0;h<o.length;h++)x.push(o[h].x),x.push(o[h].y)}class Zf extends rr{constructor(o=new oh([new vi(.5,.5),new vi(-.5,.5),new vi(-.5,-.5),new vi(.5,-.5)]),h={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:o,options:h},o=Array.isArray(o)?o:[o];const m=this,v=[],C=[];for(let L=0,W=o.length;L<W;L++){const J=o[L];b(J)}this.setAttribute("position",new Ai(v,3)),this.setAttribute("uv",new Ai(C,2)),this.computeVertexNormals();function b(L){const W=[],J=h.curveSegments!==void 0?h.curveSegments:12,re=h.steps!==void 0?h.steps:1,ue=h.depth!==void 0?h.depth:1;let pe=h.bevelEnabled!==void 0?h.bevelEnabled:!0,ve=h.bevelThickness!==void 0?h.bevelThickness:.2,xe=h.bevelSize!==void 0?h.bevelSize:ve-.1,Le=h.bevelOffset!==void 0?h.bevelOffset:0,Se=h.bevelSegments!==void 0?h.bevelSegments:3;const Ee=h.extrudePath,Ke=h.UVGenerator!==void 0?h.UVGenerator:m3;let Ge,Ue=!1,Ct,at,ft,yt;Ee&&(Ge=Ee.getSpacedPoints(re),Ue=!0,pe=!1,Ct=Ee.computeFrenetFrames(re,!1),at=new nt,ft=new nt,yt=new nt),pe||(Se=0,ve=0,xe=0,Le=0);const et=L.extractPoints(J);let qe=et.shape;const wt=et.holes;if(!g1.isClockWise(qe)){qe=qe.reverse();for(let Mi=0,fi=wt.length;Mi<fi;Mi++){const Gi=wt[Mi];g1.isClockWise(Gi)&&(wt[Mi]=Gi.reverse())}}const Lt=g1.triangulateShape(qe,wt),Gt=qe;for(let Mi=0,fi=wt.length;Mi<fi;Mi++){const Gi=wt[Mi];qe=qe.concat(Gi)}function ti(Mi,fi,Gi){return fi||console.error("THREE.ExtrudeGeometry: vec does not exist"),Mi.clone().addScaledVector(fi,Gi)}const Ei=qe.length,$i=Lt.length;function ri(Mi,fi,Gi){let Hi,ki,hn;const Cn=Mi.x-fi.x,pr=Mi.y-fi.y,Cr=Gi.x-Mi.x,ds=Gi.y-Mi.y,wo=Cn*Cn+pr*pr,Xs=Cn*ds-pr*Cr;if(Math.abs(Xs)>Number.EPSILON){const vt=Math.sqrt(wo),Je=Math.sqrt(Cr*Cr+ds*ds),li=fi.x-pr/vt,wi=fi.y+Cn/vt,Li=Gi.x-ds/Je,bi=Gi.y+Cr/Je,Hn=((Li-li)*ds-(bi-wi)*Cr)/(Cn*ds-pr*Cr);Hi=li+Cn*Hn-Mi.x,ki=wi+pr*Hn-Mi.y;const ji=Hi*Hi+ki*ki;if(ji<=2)return new vi(Hi,ki);hn=Math.sqrt(ji/2)}else{let vt=!1;Cn>Number.EPSILON?Cr>Number.EPSILON&&(vt=!0):Cn<-Number.EPSILON?Cr<-Number.EPSILON&&(vt=!0):Math.sign(pr)===Math.sign(ds)&&(vt=!0),vt?(Hi=-pr,ki=Cn,hn=Math.sqrt(wo)):(Hi=Cn,ki=pr,hn=Math.sqrt(wo/2))}return new vi(Hi/hn,ki/hn)}const zi=[];for(let Mi=0,fi=Gt.length,Gi=fi-1,Hi=Mi+1;Mi<fi;Mi++,Gi++,Hi++)Gi===fi&&(Gi=0),Hi===fi&&(Hi=0),zi[Mi]=ri(Gt[Mi],Gt[Gi],Gt[Hi]);const Yi=[];let Rn,Br=zi.concat();for(let Mi=0,fi=wt.length;Mi<fi;Mi++){const Gi=wt[Mi];Rn=[];for(let Hi=0,ki=Gi.length,hn=ki-1,Cn=Hi+1;Hi<ki;Hi++,hn++,Cn++)hn===ki&&(hn=0),Cn===ki&&(Cn=0),Rn[Hi]=ri(Gi[Hi],Gi[hn],Gi[Cn]);Yi.push(Rn),Br=Br.concat(Rn)}for(let Mi=0;Mi<Se;Mi++){const fi=Mi/Se,Gi=ve*Math.cos(fi*Math.PI/2),Hi=xe*Math.sin(fi*Math.PI/2)+Le;for(let ki=0,hn=Gt.length;ki<hn;ki++){const Cn=ti(Gt[ki],zi[ki],Hi);Pn(Cn.x,Cn.y,-Gi)}for(let ki=0,hn=wt.length;ki<hn;ki++){const Cn=wt[ki];Rn=Yi[ki];for(let pr=0,Cr=Cn.length;pr<Cr;pr++){const ds=ti(Cn[pr],Rn[pr],Hi);Pn(ds.x,ds.y,-Gi)}}}const As=xe+Le;for(let Mi=0;Mi<Ei;Mi++){const fi=pe?ti(qe[Mi],Br[Mi],As):qe[Mi];Ue?(ft.copy(Ct.normals[0]).multiplyScalar(fi.x),at.copy(Ct.binormals[0]).multiplyScalar(fi.y),yt.copy(Ge[0]).add(ft).add(at),Pn(yt.x,yt.y,yt.z)):Pn(fi.x,fi.y,0)}for(let Mi=1;Mi<=re;Mi++)for(let fi=0;fi<Ei;fi++){const Gi=pe?ti(qe[fi],Br[fi],As):qe[fi];Ue?(ft.copy(Ct.normals[Mi]).multiplyScalar(Gi.x),at.copy(Ct.binormals[Mi]).multiplyScalar(Gi.y),yt.copy(Ge[Mi]).add(ft).add(at),Pn(yt.x,yt.y,yt.z)):Pn(Gi.x,Gi.y,ue/re*Mi)}for(let Mi=Se-1;Mi>=0;Mi--){const fi=Mi/Se,Gi=ve*Math.cos(fi*Math.PI/2),Hi=xe*Math.sin(fi*Math.PI/2)+Le;for(let ki=0,hn=Gt.length;ki<hn;ki++){const Cn=ti(Gt[ki],zi[ki],Hi);Pn(Cn.x,Cn.y,ue+Gi)}for(let ki=0,hn=wt.length;ki<hn;ki++){const Cn=wt[ki];Rn=Yi[ki];for(let pr=0,Cr=Cn.length;pr<Cr;pr++){const ds=ti(Cn[pr],Rn[pr],Hi);Ue?Pn(ds.x,ds.y+Ge[re-1].y,Ge[re-1].x+Gi):Pn(ds.x,ds.y,ue+Gi)}}}Ks(),hs();function Ks(){const Mi=v.length/3;if(pe){let fi=0,Gi=Ei*fi;for(let Hi=0;Hi<$i;Hi++){const ki=Lt[Hi];xi(ki[2]+Gi,ki[1]+Gi,ki[0]+Gi)}fi=re+Se*2,Gi=Ei*fi;for(let Hi=0;Hi<$i;Hi++){const ki=Lt[Hi];xi(ki[0]+Gi,ki[1]+Gi,ki[2]+Gi)}}else{for(let fi=0;fi<$i;fi++){const Gi=Lt[fi];xi(Gi[2],Gi[1],Gi[0])}for(let fi=0;fi<$i;fi++){const Gi=Lt[fi];xi(Gi[0]+Ei*re,Gi[1]+Ei*re,Gi[2]+Ei*re)}}m.addGroup(Mi,v.length/3-Mi,0)}function hs(){const Mi=v.length/3;let fi=0;Ds(Gt,fi),fi+=Gt.length;for(let Gi=0,Hi=wt.length;Gi<Hi;Gi++){const ki=wt[Gi];Ds(ki,fi),fi+=ki.length}m.addGroup(Mi,v.length/3-Mi,1)}function Ds(Mi,fi){let Gi=Mi.length;for(;--Gi>=0;){const Hi=Gi;let ki=Gi-1;ki<0&&(ki=Mi.length-1);for(let hn=0,Cn=re+Se*2;hn<Cn;hn++){const pr=Ei*hn,Cr=Ei*(hn+1),ds=fi+Hi+pr,wo=fi+ki+pr,Xs=fi+ki+Cr,vt=fi+Hi+Cr;en(ds,wo,Xs,vt)}}}function Pn(Mi,fi,Gi){W.push(Mi),W.push(fi),W.push(Gi)}function xi(Mi,fi,Gi){ln(Mi),ln(fi),ln(Gi);const Hi=v.length/3,ki=Ke.generateTopUV(m,v,Hi-3,Hi-2,Hi-1);Qt(ki[0]),Qt(ki[1]),Qt(ki[2])}function en(Mi,fi,Gi,Hi){ln(Mi),ln(fi),ln(Hi),ln(fi),ln(Gi),ln(Hi);const ki=v.length/3,hn=Ke.generateSideWallUV(m,v,ki-6,ki-3,ki-2,ki-1);Qt(hn[0]),Qt(hn[1]),Qt(hn[3]),Qt(hn[1]),Qt(hn[2]),Qt(hn[3])}function ln(Mi){v.push(W[Mi*3+0]),v.push(W[Mi*3+1]),v.push(W[Mi*3+2])}function Qt(Mi){C.push(Mi.x),C.push(Mi.y)}}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}toJSON(){const o=super.toJSON(),h=this.parameters.shapes,m=this.parameters.options;return g3(h,m,o)}static fromJSON(o,h){const m=[];for(let C=0,b=o.shapes.length;C<b;C++){const L=h[o.shapes[C]];m.push(L)}const v=o.options.extrudePath;return v!==void 0&&(o.options.extrudePath=new Hf[v.type]().fromJSON(v)),new Zf(m,o.options)}}const m3={generateTopUV:function(x,o,h,m,v){const C=o[h*3],b=o[h*3+1],L=o[m*3],W=o[m*3+1],J=o[v*3],re=o[v*3+1];return[new vi(C,b),new vi(L,W),new vi(J,re)]},generateSideWallUV:function(x,o,h,m,v,C){const b=o[h*3],L=o[h*3+1],W=o[h*3+2],J=o[m*3],re=o[m*3+1],ue=o[m*3+2],pe=o[v*3],ve=o[v*3+1],xe=o[v*3+2],Le=o[C*3],Se=o[C*3+1],Ee=o[C*3+2];return Math.abs(L-re)<Math.abs(b-J)?[new vi(b,1-W),new vi(J,1-ue),new vi(pe,1-xe),new vi(Le,1-Ee)]:[new vi(L,1-W),new vi(re,1-ue),new vi(ve,1-xe),new vi(Se,1-Ee)]}};function g3(x,o,h){if(h.shapes=[],Array.isArray(x))for(let m=0,v=x.length;m<v;m++){const C=x[m];h.shapes.push(C.uuid)}else h.shapes.push(x.uuid);return h.options=Object.assign({},o),o.extrudePath!==void 0&&(h.options.extrudePath=o.extrudePath.toJSON()),h}class $f extends Xc{constructor(o=1,h=0){const m=(1+Math.sqrt(5))/2,v=[-1,m,0,1,m,0,-1,-m,0,1,-m,0,0,-1,m,0,1,m,0,-1,-m,0,1,-m,m,0,-1,m,0,1,-m,0,-1,-m,0,1],C=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(v,C,o,h),this.type="IcosahedronGeometry",this.parameters={radius:o,detail:h}}static fromJSON(o){return new $f(o.radius,o.detail)}}class lf extends Xc{constructor(o=1,h=0){const m=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],v=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(m,v,o,h),this.type="OctahedronGeometry",this.parameters={radius:o,detail:h}}static fromJSON(o){return new lf(o.radius,o.detail)}}class jf extends rr{constructor(o=.5,h=1,m=32,v=1,C=0,b=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:o,outerRadius:h,thetaSegments:m,phiSegments:v,thetaStart:C,thetaLength:b},m=Math.max(3,m),v=Math.max(1,v);const L=[],W=[],J=[],re=[];let ue=o;const pe=(h-o)/v,ve=new nt,xe=new vi;for(let Le=0;Le<=v;Le++){for(let Se=0;Se<=m;Se++){const Ee=C+Se/m*b;ve.x=ue*Math.cos(Ee),ve.y=ue*Math.sin(Ee),W.push(ve.x,ve.y,ve.z),J.push(0,0,1),xe.x=(ve.x/h+1)/2,xe.y=(ve.y/h+1)/2,re.push(xe.x,xe.y)}ue+=pe}for(let Le=0;Le<v;Le++){const Se=Le*(m+1);for(let Ee=0;Ee<m;Ee++){const Ke=Ee+Se,Ge=Ke,Ue=Ke+m+1,Ct=Ke+m+2,at=Ke+1;L.push(Ge,Ue,at),L.push(Ue,Ct,at)}}this.setIndex(L),this.setAttribute("position",new Ai(W,3)),this.setAttribute("normal",new Ai(J,3)),this.setAttribute("uv",new Ai(re,2))}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new jf(o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength)}}class e2 extends rr{constructor(o=new oh([new vi(0,.5),new vi(-.5,-.5),new vi(.5,-.5)]),h=12){super(),this.type="ShapeGeometry",this.parameters={shapes:o,curveSegments:h};const m=[],v=[],C=[],b=[];let L=0,W=0;if(Array.isArray(o)===!1)J(o);else for(let re=0;re<o.length;re++)J(o[re]),this.addGroup(L,W,re),L+=W,W=0;this.setIndex(m),this.setAttribute("position",new Ai(v,3)),this.setAttribute("normal",new Ai(C,3)),this.setAttribute("uv",new Ai(b,2));function J(re){const ue=v.length/3,pe=re.extractPoints(h);let ve=pe.shape;const xe=pe.holes;g1.isClockWise(ve)===!1&&(ve=ve.reverse());for(let Se=0,Ee=xe.length;Se<Ee;Se++){const Ke=xe[Se];g1.isClockWise(Ke)===!0&&(xe[Se]=Ke.reverse())}const Le=g1.triangulateShape(ve,xe);for(let Se=0,Ee=xe.length;Se<Ee;Se++){const Ke=xe[Se];ve=ve.concat(Ke)}for(let Se=0,Ee=ve.length;Se<Ee;Se++){const Ke=ve[Se];v.push(Ke.x,Ke.y,0),C.push(0,0,1),b.push(Ke.x,Ke.y)}for(let Se=0,Ee=Le.length;Se<Ee;Se++){const Ke=Le[Se],Ge=Ke[0]+ue,Ue=Ke[1]+ue,Ct=Ke[2]+ue;m.push(Ge,Ue,Ct),W+=3}}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}toJSON(){const o=super.toJSON(),h=this.parameters.shapes;return v3(h,o)}static fromJSON(o,h){const m=[];for(let v=0,C=o.shapes.length;v<C;v++){const b=h[o.shapes[v]];m.push(b)}return new e2(m,o.curveSegments)}}function v3(x,o){if(o.shapes=[],Array.isArray(x))for(let h=0,m=x.length;h<m;h++){const v=x[h];o.shapes.push(v.uuid)}else o.shapes.push(x.uuid);return o}class cf extends rr{constructor(o=1,h=32,m=16,v=0,C=Math.PI*2,b=0,L=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:o,widthSegments:h,heightSegments:m,phiStart:v,phiLength:C,thetaStart:b,thetaLength:L},h=Math.max(3,Math.floor(h)),m=Math.max(2,Math.floor(m));const W=Math.min(b+L,Math.PI);let J=0;const re=[],ue=new nt,pe=new nt,ve=[],xe=[],Le=[],Se=[];for(let Ee=0;Ee<=m;Ee++){const Ke=[],Ge=Ee/m;let Ue=0;Ee===0&&b===0?Ue=.5/h:Ee===m&&W===Math.PI&&(Ue=-.5/h);for(let Ct=0;Ct<=h;Ct++){const at=Ct/h;ue.x=-o*Math.cos(v+at*C)*Math.sin(b+Ge*L),ue.y=o*Math.cos(b+Ge*L),ue.z=o*Math.sin(v+at*C)*Math.sin(b+Ge*L),xe.push(ue.x,ue.y,ue.z),pe.copy(ue).normalize(),Le.push(pe.x,pe.y,pe.z),Se.push(at+Ue,1-Ge),Ke.push(J++)}re.push(Ke)}for(let Ee=0;Ee<m;Ee++)for(let Ke=0;Ke<h;Ke++){const Ge=re[Ee][Ke+1],Ue=re[Ee][Ke],Ct=re[Ee+1][Ke],at=re[Ee+1][Ke+1];(Ee!==0||b>0)&&ve.push(Ge,Ue,at),(Ee!==m-1||W<Math.PI)&&ve.push(Ue,Ct,at)}this.setIndex(ve),this.setAttribute("position",new Ai(xe,3)),this.setAttribute("normal",new Ai(Le,3)),this.setAttribute("uv",new Ai(Se,2))}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new cf(o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength)}}class t2 extends Xc{constructor(o=1,h=0){const m=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],v=[2,1,0,0,3,2,1,3,0,2,3,1];super(m,v,o,h),this.type="TetrahedronGeometry",this.parameters={radius:o,detail:h}}static fromJSON(o){return new t2(o.radius,o.detail)}}class i2 extends rr{constructor(o=1,h=.4,m=12,v=48,C=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:o,tube:h,radialSegments:m,tubularSegments:v,arc:C},m=Math.floor(m),v=Math.floor(v);const b=[],L=[],W=[],J=[],re=new nt,ue=new nt,pe=new nt;for(let ve=0;ve<=m;ve++)for(let xe=0;xe<=v;xe++){const Le=xe/v*C,Se=ve/m*Math.PI*2;ue.x=(o+h*Math.cos(Se))*Math.cos(Le),ue.y=(o+h*Math.cos(Se))*Math.sin(Le),ue.z=h*Math.sin(Se),L.push(ue.x,ue.y,ue.z),re.x=o*Math.cos(Le),re.y=o*Math.sin(Le),pe.subVectors(ue,re).normalize(),W.push(pe.x,pe.y,pe.z),J.push(xe/v),J.push(ve/m)}for(let ve=1;ve<=m;ve++)for(let xe=1;xe<=v;xe++){const Le=(v+1)*ve+xe-1,Se=(v+1)*(ve-1)+xe-1,Ee=(v+1)*(ve-1)+xe,Ke=(v+1)*ve+xe;b.push(Le,Se,Ke),b.push(Se,Ee,Ke)}this.setIndex(b),this.setAttribute("position",new Ai(L,3)),this.setAttribute("normal",new Ai(W,3)),this.setAttribute("uv",new Ai(J,2))}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new i2(o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc)}}class n2 extends rr{constructor(o=1,h=.4,m=64,v=8,C=2,b=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:o,tube:h,tubularSegments:m,radialSegments:v,p:C,q:b},m=Math.floor(m),v=Math.floor(v);const L=[],W=[],J=[],re=[],ue=new nt,pe=new nt,ve=new nt,xe=new nt,Le=new nt,Se=new nt,Ee=new nt;for(let Ge=0;Ge<=m;++Ge){const Ue=Ge/m*C*Math.PI*2;Ke(Ue,C,b,o,ve),Ke(Ue+.01,C,b,o,xe),Se.subVectors(xe,ve),Ee.addVectors(xe,ve),Le.crossVectors(Se,Ee),Ee.crossVectors(Le,Se),Le.normalize(),Ee.normalize();for(let Ct=0;Ct<=v;++Ct){const at=Ct/v*Math.PI*2,ft=-h*Math.cos(at),yt=h*Math.sin(at);ue.x=ve.x+(ft*Ee.x+yt*Le.x),ue.y=ve.y+(ft*Ee.y+yt*Le.y),ue.z=ve.z+(ft*Ee.z+yt*Le.z),W.push(ue.x,ue.y,ue.z),pe.subVectors(ue,ve).normalize(),J.push(pe.x,pe.y,pe.z),re.push(Ge/m),re.push(Ct/v)}}for(let Ge=1;Ge<=m;Ge++)for(let Ue=1;Ue<=v;Ue++){const Ct=(v+1)*(Ge-1)+(Ue-1),at=(v+1)*Ge+(Ue-1),ft=(v+1)*Ge+Ue,yt=(v+1)*(Ge-1)+Ue;L.push(Ct,at,yt),L.push(at,ft,yt)}this.setIndex(L),this.setAttribute("position",new Ai(W,3)),this.setAttribute("normal",new Ai(J,3)),this.setAttribute("uv",new Ai(re,2));function Ke(Ge,Ue,Ct,at,ft){const yt=Math.cos(Ge),et=Math.sin(Ge),qe=Ct/Ue*Ge,wt=Math.cos(qe);ft.x=at*(2+wt)*.5*yt,ft.y=at*(2+wt)*et*.5,ft.z=at*Math.sin(qe)*.5}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}static fromJSON(o){return new n2(o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q)}}class r2 extends rr{constructor(o=new F2(new nt(-1,-1,0),new nt(-1,1,0),new nt(1,1,0)),h=64,m=1,v=8,C=!1){super(),this.type="TubeGeometry",this.parameters={path:o,tubularSegments:h,radius:m,radialSegments:v,closed:C};const b=o.computeFrenetFrames(h,C);this.tangents=b.tangents,this.normals=b.normals,this.binormals=b.binormals;const L=new nt,W=new nt,J=new vi;let re=new nt;const ue=[],pe=[],ve=[],xe=[];Le(),this.setIndex(xe),this.setAttribute("position",new Ai(ue,3)),this.setAttribute("normal",new Ai(pe,3)),this.setAttribute("uv",new Ai(ve,2));function Le(){for(let Ge=0;Ge<h;Ge++)Se(Ge);Se(C===!1?h:0),Ke(),Ee()}function Se(Ge){re=o.getPointAt(Ge/h,re);const Ue=b.normals[Ge],Ct=b.binormals[Ge];for(let at=0;at<=v;at++){const ft=at/v*Math.PI*2,yt=Math.sin(ft),et=-Math.cos(ft);W.x=et*Ue.x+yt*Ct.x,W.y=et*Ue.y+yt*Ct.y,W.z=et*Ue.z+yt*Ct.z,W.normalize(),pe.push(W.x,W.y,W.z),L.x=re.x+m*W.x,L.y=re.y+m*W.y,L.z=re.z+m*W.z,ue.push(L.x,L.y,L.z)}}function Ee(){for(let Ge=1;Ge<=h;Ge++)for(let Ue=1;Ue<=v;Ue++){const Ct=(v+1)*(Ge-1)+(Ue-1),at=(v+1)*Ge+(Ue-1),ft=(v+1)*Ge+Ue,yt=(v+1)*(Ge-1)+Ue;xe.push(Ct,at,yt),xe.push(at,ft,yt)}}function Ke(){for(let Ge=0;Ge<=h;Ge++)for(let Ue=0;Ue<=v;Ue++)J.x=Ge/h,J.y=Ue/v,ve.push(J.x,J.y)}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}toJSON(){const o=super.toJSON();return o.path=this.parameters.path.toJSON(),o}static fromJSON(o){return new r2(new Hf[o.path.type]().fromJSON(o.path),o.tubularSegments,o.radius,o.radialSegments,o.closed)}}class nA extends rr{constructor(o=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:o},o!==null){const h=[],m=new Set,v=new nt,C=new nt;if(o.index!==null){const b=o.attributes.position,L=o.index;let W=o.groups;W.length===0&&(W=[{start:0,count:L.count,materialIndex:0}]);for(let J=0,re=W.length;J<re;++J){const ue=W[J],pe=ue.start,ve=ue.count;for(let xe=pe,Le=pe+ve;xe<Le;xe+=3)for(let Se=0;Se<3;Se++){const Ee=L.getX(xe+Se),Ke=L.getX(xe+(Se+1)%3);v.fromBufferAttribute(b,Ee),C.fromBufferAttribute(b,Ke),rA(v,C,m)===!0&&(h.push(v.x,v.y,v.z),h.push(C.x,C.y,C.z))}}}else{const b=o.attributes.position;for(let L=0,W=b.count/3;L<W;L++)for(let J=0;J<3;J++){const re=3*L+J,ue=3*L+(J+1)%3;v.fromBufferAttribute(b,re),C.fromBufferAttribute(b,ue),rA(v,C,m)===!0&&(h.push(v.x,v.y,v.z),h.push(C.x,C.y,C.z))}}this.setAttribute("position",new Ai(h,3))}}copy(o){return super.copy(o),this.parameters=Object.assign({},o.parameters),this}}function rA(x,o,h){const m=`${x.x},${x.y},${x.z}-${o.x},${o.y},${o.z}`,v=`${o.x},${o.y},${o.z}-${x.x},${x.y},${x.z}`;return h.has(m)===!0||h.has(v)===!0?!1:(h.add(m),h.add(v),!0)}var sA=Object.freeze({__proto__:null,BoxGeometry:U0,CapsuleGeometry:Gf,CircleGeometry:Qf,ConeGeometry:Vf,CylinderGeometry:Md,DodecahedronGeometry:zf,EdgesGeometry:Jp,ExtrudeGeometry:Zf,IcosahedronGeometry:$f,LatheGeometry:rf,OctahedronGeometry:lf,PlaneGeometry:Da,PolyhedronGeometry:Xc,RingGeometry:jf,ShapeGeometry:e2,SphereGeometry:cf,TetrahedronGeometry:t2,TorusGeometry:i2,TorusKnotGeometry:n2,TubeGeometry:r2,WireframeGeometry:nA});class oA extends us{constructor(o){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new un(0),this.transparent=!0,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.fog=o.fog,this}}class aA extends w0{constructor(o){super(o),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class G2 extends us{constructor(o){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new un(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new vi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new a0,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.defines={STANDARD:""},this.color.copy(o.color),this.roughness=o.roughness,this.metalness=o.metalness,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.roughnessMap=o.roughnessMap,this.metalnessMap=o.metalnessMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapRotation.copy(o.envMapRotation),this.envMapIntensity=o.envMapIntensity,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}class lA extends G2{constructor(o){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new vi(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ts(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(h){this.ior=(1+.4*h)/(1-.4*h)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new un(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new un(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new un(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(o)}get anisotropy(){return this._anisotropy}set anisotropy(o){this._anisotropy>0!=o>0&&this.version++,this._anisotropy=o}get clearcoat(){return this._clearcoat}set clearcoat(o){this._clearcoat>0!=o>0&&this.version++,this._clearcoat=o}get iridescence(){return this._iridescence}set iridescence(o){this._iridescence>0!=o>0&&this.version++,this._iridescence=o}get dispersion(){return this._dispersion}set dispersion(o){this._dispersion>0!=o>0&&this.version++,this._dispersion=o}get sheen(){return this._sheen}set sheen(o){this._sheen>0!=o>0&&this.version++,this._sheen=o}get transmission(){return this._transmission}set transmission(o){this._transmission>0!=o>0&&this.version++,this._transmission=o}copy(o){return super.copy(o),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=o.anisotropy,this.anisotropyRotation=o.anisotropyRotation,this.anisotropyMap=o.anisotropyMap,this.clearcoat=o.clearcoat,this.clearcoatMap=o.clearcoatMap,this.clearcoatRoughness=o.clearcoatRoughness,this.clearcoatRoughnessMap=o.clearcoatRoughnessMap,this.clearcoatNormalMap=o.clearcoatNormalMap,this.clearcoatNormalScale.copy(o.clearcoatNormalScale),this.dispersion=o.dispersion,this.ior=o.ior,this.iridescence=o.iridescence,this.iridescenceMap=o.iridescenceMap,this.iridescenceIOR=o.iridescenceIOR,this.iridescenceThicknessRange=[...o.iridescenceThicknessRange],this.iridescenceThicknessMap=o.iridescenceThicknessMap,this.sheen=o.sheen,this.sheenColor.copy(o.sheenColor),this.sheenColorMap=o.sheenColorMap,this.sheenRoughness=o.sheenRoughness,this.sheenRoughnessMap=o.sheenRoughnessMap,this.transmission=o.transmission,this.transmissionMap=o.transmissionMap,this.thickness=o.thickness,this.thicknessMap=o.thicknessMap,this.attenuationDistance=o.attenuationDistance,this.attenuationColor.copy(o.attenuationColor),this.specularIntensity=o.specularIntensity,this.specularIntensityMap=o.specularIntensityMap,this.specularColor.copy(o.specularColor),this.specularColorMap=o.specularColorMap,this}}class cA extends us{constructor(o){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new un(16777215),this.specular=new un(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new vi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new a0,this.combine=mr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.specular.copy(o.specular),this.shininess=o.shininess,this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapRotation.copy(o.envMapRotation),this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}class uA extends us{constructor(o){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new un(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new vi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.gradientMap=o.gradientMap,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.alphaMap=o.alphaMap,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.fog=o.fog,this}}class hA extends us{constructor(o){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new vi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(o)}copy(o){return super.copy(o),this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.flatShading=o.flatShading,this}}class dA extends us{constructor(o){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new un(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new un(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new vi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new a0,this.combine=mr,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.envMapRotation.copy(o.envMapRotation),this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}class fA extends us{constructor(o){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new un(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=_o,this.normalScale=new vi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.defines={MATCAP:""},this.color.copy(o.color),this.matcap=o.matcap,this.map=o.map,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.alphaMap=o.alphaMap,this.flatShading=o.flatShading,this.fog=o.fog,this}}class pA extends la{constructor(o){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(o)}copy(o){return super.copy(o),this.scale=o.scale,this.dashSize=o.dashSize,this.gapSize=o.gapSize,this}}function lh(x,o,h){return!x||!h&&x.constructor===o?x:typeof o.BYTES_PER_ELEMENT=="number"?new o(x):Array.prototype.slice.call(x)}function AA(x){return ArrayBuffer.isView(x)&&!(x instanceof DataView)}function mA(x){function o(v,C){return x[v]-x[C]}const h=x.length,m=new Array(h);for(let v=0;v!==h;++v)m[v]=v;return m.sort(o),m}function Q2(x,o,h){const m=x.length,v=new x.constructor(m);for(let C=0,b=0;b!==m;++C){const L=h[C]*o;for(let W=0;W!==o;++W)v[b++]=x[L+W]}return v}function V2(x,o,h,m){let v=1,C=x[0];for(;C!==void 0&&C[m]===void 0;)C=x[v++];if(C===void 0)return;let b=C[m];if(b!==void 0)if(Array.isArray(b))do b=C[m],b!==void 0&&(o.push(C.time),h.push.apply(h,b)),C=x[v++];while(C!==void 0);else if(b.toArray!==void 0)do b=C[m],b!==void 0&&(o.push(C.time),b.toArray(h,h.length)),C=x[v++];while(C!==void 0);else do b=C[m],b!==void 0&&(o.push(C.time),h.push(b)),C=x[v++];while(C!==void 0)}function E3(x,o,h,m,v=30){const C=x.clone();C.name=o;const b=[];for(let W=0;W<C.tracks.length;++W){const J=C.tracks[W],re=J.getValueSize(),ue=[],pe=[];for(let ve=0;ve<J.times.length;++ve){const xe=J.times[ve]*v;if(!(xe<h||xe>=m)){ue.push(J.times[ve]);for(let Le=0;Le<re;++Le)pe.push(J.values[ve*re+Le])}}ue.length!==0&&(J.times=lh(ue,J.times.constructor),J.values=lh(pe,J.values.constructor),b.push(J))}C.tracks=b;let L=1/0;for(let W=0;W<C.tracks.length;++W)L>C.tracks[W].times[0]&&(L=C.tracks[W].times[0]);for(let W=0;W<C.tracks.length;++W)C.tracks[W].shift(-1*L);return C.resetDuration(),C}function y3(x,o=0,h=x,m=30){m<=0&&(m=30);const v=h.tracks.length,C=o/m;for(let b=0;b<v;++b){const L=h.tracks[b],W=L.ValueTypeName;if(W==="bool"||W==="string")continue;const J=x.tracks.find(function(Ee){return Ee.name===L.name&&Ee.ValueTypeName===W});if(J===void 0)continue;let re=0;const ue=L.getValueSize();L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(re=ue/3);let pe=0;const ve=J.getValueSize();J.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(pe=ve/3);const xe=L.times.length-1;let Le;if(C<=L.times[0]){const Ee=re,Ke=ue-re;Le=L.values.slice(Ee,Ke)}else if(C>=L.times[xe]){const Ee=xe*ue+re,Ke=Ee+ue-re;Le=L.values.slice(Ee,Ke)}else{const Ee=L.createInterpolant(),Ke=re,Ge=ue-re;Ee.evaluate(C),Le=Ee.resultBuffer.slice(Ke,Ge)}W==="quaternion"&&new xr().fromArray(Le).normalize().conjugate().toArray(Le);const Se=J.times.length;for(let Ee=0;Ee<Se;++Ee){const Ke=Ee*ve+pe;if(W==="quaternion")xr.multiplyQuaternionsFlat(J.values,Ke,Le,0,J.values,Ke);else{const Ge=ve-pe*2;for(let Ue=0;Ue<Ge;++Ue)J.values[Ke+Ue]-=Le[Ue]}}}return x.blendMode=r0,x}const w3={convertArray:lh,isTypedArray:AA,getKeyframeOrder:mA,sortedArray:Q2,flattenJSON:V2,subclip:E3,makeClipAdditive:y3};class uf{constructor(o,h,m,v){this.parameterPositions=o,this._cachedIndex=0,this.resultBuffer=v!==void 0?v:new h.constructor(m),this.sampleValues=h,this.valueSize=m,this.settings=null,this.DefaultSettings_={}}evaluate(o){const h=this.parameterPositions;let m=this._cachedIndex,v=h[m],C=h[m-1];e:{t:{let b;i:{s:if(!(o<v)){for(let L=m+2;;){if(v===void 0){if(o<C)break s;return m=h.length,this._cachedIndex=m,this.copySampleValue_(m-1)}if(m===L)break;if(C=v,v=h[++m],o<v)break t}b=h.length;break i}if(!(o>=C)){const L=h[1];o<L&&(m=2,C=L);for(let W=m-2;;){if(C===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(m===W)break;if(v=C,C=h[--m-1],o>=C)break t}b=m,m=0;break i}break e}for(;m<b;){const L=m+b>>>1;o<h[L]?b=L:m=L+1}if(v=h[m],C=h[m-1],C===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(v===void 0)return m=h.length,this._cachedIndex=m,this.copySampleValue_(m-1)}this._cachedIndex=m,this.intervalChanged_(m,C,v)}return this.interpolate_(m,C,o,v)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(o){const h=this.resultBuffer,m=this.sampleValues,v=this.valueSize,C=o*v;for(let b=0;b!==v;++b)h[b]=m[C+b];return h}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gA extends uf{constructor(o,h,m,v){super(o,h,m,v),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Os,endingEnd:Os}}intervalChanged_(o,h,m){const v=this.parameterPositions;let C=o-2,b=o+1,L=v[C],W=v[b];if(L===void 0)switch(this.getSettings_().endingStart){case $s:C=o,L=2*h-m;break;case p0:C=v.length-2,L=h+v[C]-v[C+1];break;default:C=o,L=m}if(W===void 0)switch(this.getSettings_().endingEnd){case $s:b=o,W=2*m-h;break;case p0:b=1,W=m+v[1]-v[0];break;default:b=o-1,W=h}const J=(m-h)*.5,re=this.valueSize;this._weightPrev=J/(h-L),this._weightNext=J/(W-m),this._offsetPrev=C*re,this._offsetNext=b*re}interpolate_(o,h,m,v){const C=this.resultBuffer,b=this.sampleValues,L=this.valueSize,W=o*L,J=W-L,re=this._offsetPrev,ue=this._offsetNext,pe=this._weightPrev,ve=this._weightNext,xe=(m-h)/(v-h),Le=xe*xe,Se=Le*xe,Ee=-pe*Se+2*pe*Le-pe*xe,Ke=(1+pe)*Se+(-1.5-2*pe)*Le+(-.5+pe)*xe+1,Ge=(-1-ve)*Se+(1.5+ve)*Le+.5*xe,Ue=ve*Se-ve*Le;for(let Ct=0;Ct!==L;++Ct)C[Ct]=Ee*b[re+Ct]+Ke*b[J+Ct]+Ge*b[W+Ct]+Ue*b[ue+Ct];return C}}class z2 extends uf{constructor(o,h,m,v){super(o,h,m,v)}interpolate_(o,h,m,v){const C=this.resultBuffer,b=this.sampleValues,L=this.valueSize,W=o*L,J=W-L,re=(m-h)/(v-h),ue=1-re;for(let pe=0;pe!==L;++pe)C[pe]=b[J+pe]*ue+b[W+pe]*re;return C}}class vA extends uf{constructor(o,h,m,v){super(o,h,m,v)}interpolate_(o){return this.copySampleValue_(o-1)}}class Wl{constructor(o,h,m,v){if(o===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(h===void 0||h.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+o);this.name=o,this.times=lh(h,this.TimeBufferType),this.values=lh(m,this.ValueBufferType),this.setInterpolation(v||this.DefaultInterpolation)}static toJSON(o){const h=o.constructor;let m;if(h.toJSON!==this.toJSON)m=h.toJSON(o);else{m={name:o.name,times:lh(o.times,Array),values:lh(o.values,Array)};const v=o.getInterpolation();v!==o.DefaultInterpolation&&(m.interpolation=v)}return m.type=o.ValueTypeName,m}InterpolantFactoryMethodDiscrete(o){return new vA(this.times,this.values,this.getValueSize(),o)}InterpolantFactoryMethodLinear(o){return new z2(this.times,this.values,this.getValueSize(),o)}InterpolantFactoryMethodSmooth(o){return new gA(this.times,this.values,this.getValueSize(),o)}setInterpolation(o){let h;switch(o){case Js:h=this.InterpolantFactoryMethodDiscrete;break;case vs:h=this.InterpolantFactoryMethodLinear;break;case Zs:h=this.InterpolantFactoryMethodSmooth;break}if(h===void 0){const m="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(o!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(m);return console.warn("THREE.KeyframeTrack:",m),this}return this.createInterpolant=h,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Js;case this.InterpolantFactoryMethodLinear:return vs;case this.InterpolantFactoryMethodSmooth:return Zs}}getValueSize(){return this.values.length/this.times.length}shift(o){if(o!==0){const h=this.times;for(let m=0,v=h.length;m!==v;++m)h[m]+=o}return this}scale(o){if(o!==1){const h=this.times;for(let m=0,v=h.length;m!==v;++m)h[m]*=o}return this}trim(o,h){const m=this.times,v=m.length;let C=0,b=v-1;for(;C!==v&&m[C]<o;)++C;for(;b!==-1&&m[b]>h;)--b;if(++b,C!==0||b!==v){C>=b&&(b=Math.max(b,1),C=b-1);const L=this.getValueSize();this.times=m.slice(C,b),this.values=this.values.slice(C*L,b*L)}return this}validate(){let o=!0;const h=this.getValueSize();h-Math.floor(h)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),o=!1);const m=this.times,v=this.values,C=m.length;C===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),o=!1);let b=null;for(let L=0;L!==C;L++){const W=m[L];if(typeof W=="number"&&isNaN(W)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,L,W),o=!1;break}if(b!==null&&b>W){console.error("THREE.KeyframeTrack: Out of order keys.",this,L,W,b),o=!1;break}b=W}if(v!==void 0&&AA(v))for(let L=0,W=v.length;L!==W;++L){const J=v[L];if(isNaN(J)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,L,J),o=!1;break}}return o}optimize(){const o=this.times.slice(),h=this.values.slice(),m=this.getValueSize(),v=this.getInterpolation()===Zs,C=o.length-1;let b=1;for(let L=1;L<C;++L){let W=!1;const J=o[L],re=o[L+1];if(J!==re&&(L!==1||J!==o[0]))if(v)W=!0;else{const ue=L*m,pe=ue-m,ve=ue+m;for(let xe=0;xe!==m;++xe){const Le=h[ue+xe];if(Le!==h[pe+xe]||Le!==h[ve+xe]){W=!0;break}}}if(W){if(L!==b){o[b]=o[L];const ue=L*m,pe=b*m;for(let ve=0;ve!==m;++ve)h[pe+ve]=h[ue+ve]}++b}}if(C>0){o[b]=o[C];for(let L=C*m,W=b*m,J=0;J!==m;++J)h[W+J]=h[L+J];++b}return b!==o.length?(this.times=o.slice(0,b),this.values=h.slice(0,b*m)):(this.times=o,this.values=h),this}clone(){const o=this.times.slice(),h=this.values.slice(),m=this.constructor,v=new m(this.name,o,h);return v.createInterpolant=this.createInterpolant,v}}Wl.prototype.TimeBufferType=Float32Array,Wl.prototype.ValueBufferType=Float32Array,Wl.prototype.DefaultInterpolation=vs;class ch extends Wl{}ch.prototype.ValueTypeName="bool",ch.prototype.ValueBufferType=Array,ch.prototype.DefaultInterpolation=Js,ch.prototype.InterpolantFactoryMethodLinear=void 0,ch.prototype.InterpolantFactoryMethodSmooth=void 0;class W2 extends Wl{}W2.prototype.ValueTypeName="color";class hf extends Wl{}hf.prototype.ValueTypeName="number";class EA extends uf{constructor(o,h,m,v){super(o,h,m,v)}interpolate_(o,h,m,v){const C=this.resultBuffer,b=this.sampleValues,L=this.valueSize,W=(m-h)/(v-h);let J=o*L;for(let re=J+L;J!==re;J+=4)xr.slerpFlat(C,0,b,J-L,b,J,W);return C}}class bd extends Wl{InterpolantFactoryMethodLinear(o){return new EA(this.times,this.values,this.getValueSize(),o)}}bd.prototype.ValueTypeName="quaternion",bd.prototype.DefaultInterpolation=vs,bd.prototype.InterpolantFactoryMethodSmooth=void 0;class uh extends Wl{}uh.prototype.ValueTypeName="string",uh.prototype.ValueBufferType=Array,uh.prototype.DefaultInterpolation=Js,uh.prototype.InterpolantFactoryMethodLinear=void 0,uh.prototype.InterpolantFactoryMethodSmooth=void 0;class df extends Wl{}df.prototype.ValueTypeName="vector";class ff{constructor(o="",h=-1,m=[],v=D0){this.name=o,this.tracks=m,this.duration=h,this.blendMode=v,this.uuid=Wo(),this.duration<0&&this.resetDuration()}static parse(o){const h=[],m=o.tracks,v=1/(o.fps||1);for(let b=0,L=m.length;b!==L;++b)h.push(_3(m[b]).scale(v));const C=new this(o.name,o.duration,h,o.blendMode);return C.uuid=o.uuid,C}static toJSON(o){const h=[],m=o.tracks,v={name:o.name,duration:o.duration,tracks:h,uuid:o.uuid,blendMode:o.blendMode};for(let C=0,b=m.length;C!==b;++C)h.push(Wl.toJSON(m[C]));return v}static CreateFromMorphTargetSequence(o,h,m,v){const C=h.length,b=[];for(let L=0;L<C;L++){let W=[],J=[];W.push((L+C-1)%C,L,(L+1)%C),J.push(0,1,0);const re=mA(W);W=Q2(W,1,re),J=Q2(J,1,re),!v&&W[0]===0&&(W.push(C),J.push(J[0])),b.push(new hf(".morphTargetInfluences["+h[L].name+"]",W,J).scale(1/m))}return new this(o,-1,b)}static findByName(o,h){let m=o;if(!Array.isArray(o)){const v=o;m=v.geometry&&v.geometry.animations||v.animations}for(let v=0;v<m.length;v++)if(m[v].name===h)return m[v];return null}static CreateClipsFromMorphTargetSequences(o,h,m){const v={},C=/^([\w-]*?)([\d]+)$/;for(let L=0,W=o.length;L<W;L++){const J=o[L],re=J.name.match(C);if(re&&re.length>1){const ue=re[1];let pe=v[ue];pe||(v[ue]=pe=[]),pe.push(J)}}const b=[];for(const L in v)b.push(this.CreateFromMorphTargetSequence(L,v[L],h,m));return b}static parseAnimation(o,h){if(!o)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const m=function(ue,pe,ve,xe,Le){if(ve.length!==0){const Se=[],Ee=[];V2(ve,Se,Ee,xe),Se.length!==0&&Le.push(new ue(pe,Se,Ee))}},v=[],C=o.name||"default",b=o.fps||30,L=o.blendMode;let W=o.length||-1;const J=o.hierarchy||[];for(let ue=0;ue<J.length;ue++){const pe=J[ue].keys;if(!(!pe||pe.length===0))if(pe[0].morphTargets){const ve={};let xe;for(xe=0;xe<pe.length;xe++)if(pe[xe].morphTargets)for(let Le=0;Le<pe[xe].morphTargets.length;Le++)ve[pe[xe].morphTargets[Le]]=-1;for(const Le in ve){const Se=[],Ee=[];for(let Ke=0;Ke!==pe[xe].morphTargets.length;++Ke){const Ge=pe[xe];Se.push(Ge.time),Ee.push(Ge.morphTarget===Le?1:0)}v.push(new hf(".morphTargetInfluence["+Le+"]",Se,Ee))}W=ve.length*b}else{const ve=".bones["+h[ue].name+"]";m(df,ve+".position",pe,"pos",v),m(bd,ve+".quaternion",pe,"rot",v),m(df,ve+".scale",pe,"scl",v)}}return v.length===0?null:new this(C,W,v,L)}resetDuration(){const o=this.tracks;let h=0;for(let m=0,v=o.length;m!==v;++m){const C=this.tracks[m];h=Math.max(h,C.times[C.times.length-1])}return this.duration=h,this}trim(){for(let o=0;o<this.tracks.length;o++)this.tracks[o].trim(0,this.duration);return this}validate(){let o=!0;for(let h=0;h<this.tracks.length;h++)o=o&&this.tracks[h].validate();return o}optimize(){for(let o=0;o<this.tracks.length;o++)this.tracks[o].optimize();return this}clone(){const o=[];for(let h=0;h<this.tracks.length;h++)o.push(this.tracks[h].clone());return new this.constructor(this.name,this.duration,o,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function C3(x){switch(x.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hf;case"vector":case"vector2":case"vector3":case"vector4":return df;case"color":return W2;case"quaternion":return bd;case"bool":case"boolean":return ch;case"string":return uh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+x)}function _3(x){if(x.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const o=C3(x.type);if(x.times===void 0){const h=[],m=[];V2(x.keys,h,m,"value"),x.times=h,x.values=m}return o.parse!==void 0?o.parse(x):new o(x.name,x.times,x.values,x.interpolation)}const q1={enabled:!1,files:{},add:function(x,o){this.enabled!==!1&&(this.files[x]=o)},get:function(x){if(this.enabled!==!1)return this.files[x]},remove:function(x){delete this.files[x]},clear:function(){this.files={}}};class K2{constructor(o,h,m){const v=this;let C=!1,b=0,L=0,W;const J=[];this.onStart=void 0,this.onLoad=o,this.onProgress=h,this.onError=m,this.itemStart=function(re){L++,C===!1&&v.onStart!==void 0&&v.onStart(re,b,L),C=!0},this.itemEnd=function(re){b++,v.onProgress!==void 0&&v.onProgress(re,b,L),b===L&&(C=!1,v.onLoad!==void 0&&v.onLoad())},this.itemError=function(re){v.onError!==void 0&&v.onError(re)},this.resolveURL=function(re){return W?W(re):re},this.setURLModifier=function(re){return W=re,this},this.addHandler=function(re,ue){return J.push(re,ue),this},this.removeHandler=function(re){const ue=J.indexOf(re);return ue!==-1&&J.splice(ue,2),this},this.getHandler=function(re){for(let ue=0,pe=J.length;ue<pe;ue+=2){const ve=J[ue],xe=J[ue+1];if(ve.global&&(ve.lastIndex=0),ve.test(re))return xe}return null}}}const yA=new K2;class Ha{constructor(o){this.manager=o!==void 0?o:yA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(o,h){const m=this;return new Promise(function(v,C){m.load(o,v,h,C)})}parse(){}setCrossOrigin(o){return this.crossOrigin=o,this}setWithCredentials(o){return this.withCredentials=o,this}setPath(o){return this.path=o,this}setResourcePath(o){return this.resourcePath=o,this}setRequestHeader(o){return this.requestHeader=o,this}}Ha.DEFAULT_MATERIAL_NAME="__DEFAULT";const J1={};class x3 extends Error{constructor(o,h){super(o),this.response=h}}class Z1 extends Ha{constructor(o){super(o)}load(o,h,m,v){o===void 0&&(o=""),this.path!==void 0&&(o=this.path+o),o=this.manager.resolveURL(o);const C=q1.get(o);if(C!==void 0)return this.manager.itemStart(o),setTimeout(()=>{h&&h(C),this.manager.itemEnd(o)},0),C;if(J1[o]!==void 0){J1[o].push({onLoad:h,onProgress:m,onError:v});return}J1[o]=[],J1[o].push({onLoad:h,onProgress:m,onError:v});const b=new Request(o,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),L=this.mimeType,W=this.responseType;fetch(b).then(J=>{if(J.status===200||J.status===0){if(J.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||J.body===void 0||J.body.getReader===void 0)return J;const re=J1[o],ue=J.body.getReader(),pe=J.headers.get("X-File-Size")||J.headers.get("Content-Length"),ve=pe?parseInt(pe):0,xe=ve!==0;let Le=0;const Se=new ReadableStream({start(Ee){Ke();function Ke(){ue.read().then(({done:Ge,value:Ue})=>{if(Ge)Ee.close();else{Le+=Ue.byteLength;const Ct=new ProgressEvent("progress",{lengthComputable:xe,loaded:Le,total:ve});for(let at=0,ft=re.length;at<ft;at++){const yt=re[at];yt.onProgress&&yt.onProgress(Ct)}Ee.enqueue(Ue),Ke()}})}}});return new Response(Se)}else throw new x3(`fetch for "${J.url}" responded with ${J.status}: ${J.statusText}`,J)}).then(J=>{switch(W){case"arraybuffer":return J.arrayBuffer();case"blob":return J.blob();case"document":return J.text().then(re=>new DOMParser().parseFromString(re,L));case"json":return J.json();default:if(L===void 0)return J.text();{const ue=/charset="?([^;"\s]*)"?/i.exec(L),pe=ue&&ue[1]?ue[1].toLowerCase():void 0,ve=new TextDecoder(pe);return J.arrayBuffer().then(xe=>ve.decode(xe))}}}).then(J=>{q1.add(o,J);const re=J1[o];delete J1[o];for(let ue=0,pe=re.length;ue<pe;ue++){const ve=re[ue];ve.onLoad&&ve.onLoad(J)}}).catch(J=>{const re=J1[o];if(re===void 0)throw this.manager.itemError(o),J;delete J1[o];for(let ue=0,pe=re.length;ue<pe;ue++){const ve=re[ue];ve.onError&&ve.onError(J)}this.manager.itemError(o)}).finally(()=>{this.manager.itemEnd(o)}),this.manager.itemStart(o)}setResponseType(o){return this.responseType=o,this}setMimeType(o){return this.mimeType=o,this}}class M3 extends Ha{constructor(o){super(o)}load(o,h,m,v){const C=this,b=new Z1(this.manager);b.setPath(this.path),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials),b.load(o,function(L){try{h(C.parse(JSON.parse(L)))}catch(W){v?v(W):console.error(W),C.manager.itemError(o)}},m,v)}parse(o){const h=[];for(let m=0;m<o.length;m++){const v=ff.parse(o[m]);h.push(v)}return h}}class S3 extends Ha{constructor(o){super(o)}load(o,h,m,v){const C=this,b=[],L=new kf,W=new Z1(this.manager);W.setPath(this.path),W.setResponseType("arraybuffer"),W.setRequestHeader(this.requestHeader),W.setWithCredentials(C.withCredentials);let J=0;function re(ue){W.load(o[ue],function(pe){const ve=C.parse(pe,!0);b[ue]={width:ve.width,height:ve.height,format:ve.format,mipmaps:ve.mipmaps},J+=1,J===6&&(ve.mipmapCount===1&&(L.minFilter=kn),L.image=b,L.format=ve.format,L.needsUpdate=!0,h&&h(L))},m,v)}if(Array.isArray(o))for(let ue=0,pe=o.length;ue<pe;++ue)re(ue);else W.load(o,function(ue){const pe=C.parse(ue,!0);if(pe.isCubemap){const ve=pe.mipmaps.length/pe.mipmapCount;for(let xe=0;xe<ve;xe++){b[xe]={mipmaps:[]};for(let Le=0;Le<pe.mipmapCount;Le++)b[xe].mipmaps.push(pe.mipmaps[xe*pe.mipmapCount+Le]),b[xe].format=pe.format,b[xe].width=pe.width,b[xe].height=pe.height}L.image=b}else L.image.width=pe.width,L.image.height=pe.height,L.mipmaps=pe.mipmaps;pe.mipmapCount===1&&(L.minFilter=kn),L.format=pe.format,L.needsUpdate=!0,h&&h(L)},m,v);return L}}class pf extends Ha{constructor(o){super(o)}load(o,h,m,v){this.path!==void 0&&(o=this.path+o),o=this.manager.resolveURL(o);const C=this,b=q1.get(o);if(b!==void 0)return C.manager.itemStart(o),setTimeout(function(){h&&h(b),C.manager.itemEnd(o)},0),b;const L=za("img");function W(){re(),q1.add(o,this),h&&h(this),C.manager.itemEnd(o)}function J(ue){re(),v&&v(ue),C.manager.itemError(o),C.manager.itemEnd(o)}function re(){L.removeEventListener("load",W,!1),L.removeEventListener("error",J,!1)}return L.addEventListener("load",W,!1),L.addEventListener("error",J,!1),o.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(L.crossOrigin=this.crossOrigin),C.manager.itemStart(o),L.src=o,L}}class b3 extends Ha{constructor(o){super(o)}load(o,h,m,v){const C=new ao;C.colorSpace=Fr;const b=new pf(this.manager);b.setCrossOrigin(this.crossOrigin),b.setPath(this.path);let L=0;function W(J){b.load(o[J],function(re){C.images[J]=re,L++,L===6&&(C.needsUpdate=!0,h&&h(C))},void 0,v)}for(let J=0;J<o.length;++J)W(J);return C}}class T3 extends Ha{constructor(o){super(o)}load(o,h,m,v){const C=this,b=new zc,L=new Z1(this.manager);return L.setResponseType("arraybuffer"),L.setRequestHeader(this.requestHeader),L.setPath(this.path),L.setWithCredentials(C.withCredentials),L.load(o,function(W){let J;try{J=C.parse(W)}catch(re){if(v!==void 0)v(re);else{console.error(re);return}}J.image!==void 0?b.image=J.image:J.data!==void 0&&(b.image.width=J.width,b.image.height=J.height,b.image.data=J.data),b.wrapS=J.wrapS!==void 0?J.wrapS:St,b.wrapT=J.wrapT!==void 0?J.wrapT:St,b.magFilter=J.magFilter!==void 0?J.magFilter:kn,b.minFilter=J.minFilter!==void 0?J.minFilter:kn,b.anisotropy=J.anisotropy!==void 0?J.anisotropy:1,J.colorSpace!==void 0&&(b.colorSpace=J.colorSpace),J.flipY!==void 0&&(b.flipY=J.flipY),J.format!==void 0&&(b.format=J.format),J.type!==void 0&&(b.type=J.type),J.mipmaps!==void 0&&(b.mipmaps=J.mipmaps,b.minFilter=Pr),J.mipmapCount===1&&(b.minFilter=kn),J.generateMipmaps!==void 0&&(b.generateMipmaps=J.generateMipmaps),b.needsUpdate=!0,h&&h(b,J)},m,v),b}}class R3 extends Ha{constructor(o){super(o)}load(o,h,m,v){const C=new cs,b=new pf(this.manager);return b.setCrossOrigin(this.crossOrigin),b.setPath(this.path),b.load(o,function(L){C.image=L,C.needsUpdate=!0,h!==void 0&&h(C)},m,v),C}}class Yc extends Nr{constructor(o,h=1){super(),this.isLight=!0,this.type="Light",this.color=new un(o),this.intensity=h}dispose(){}copy(o,h){return super.copy(o,h),this.color.copy(o.color),this.intensity=o.intensity,this}toJSON(o){const h=super.toJSON(o);return h.object.color=this.color.getHex(),h.object.intensity=this.intensity,this.groundColor!==void 0&&(h.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(h.object.distance=this.distance),this.angle!==void 0&&(h.object.angle=this.angle),this.decay!==void 0&&(h.object.decay=this.decay),this.penumbra!==void 0&&(h.object.penumbra=this.penumbra),this.shadow!==void 0&&(h.object.shadow=this.shadow.toJSON()),h}}class wA extends Yc{constructor(o,h,m){super(o,m),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Nr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new un(h)}copy(o,h){return super.copy(o,h),this.groundColor.copy(o.groundColor),this}}const X2=new on,CA=new nt,_A=new nt;class Y2{constructor(o){this.camera=o,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new vi(512,512),this.map=null,this.mapPass=null,this.matrix=new on,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new il,this._frameExtents=new vi(1,1),this._viewportCount=1,this._viewports=[new zr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(o){const h=this.camera,m=this.matrix;CA.setFromMatrixPosition(o.matrixWorld),h.position.copy(CA),_A.setFromMatrixPosition(o.target.matrixWorld),h.lookAt(_A),h.updateMatrixWorld(),X2.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix(X2),m.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),m.multiply(X2)}getViewport(o){return this._viewports[o]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(o){return this.camera=o.camera.clone(),this.bias=o.bias,this.radius=o.radius,this.mapSize.copy(o.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const o={};return this.bias!==0&&(o.bias=this.bias),this.normalBias!==0&&(o.normalBias=this.normalBias),this.radius!==1&&(o.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(o.mapSize=this.mapSize.toArray()),o.camera=this.camera.toJSON(!1).object,delete o.camera.matrix,o}}class I3 extends Y2{constructor(){super(new Ls(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(o){const h=this.camera,m=Va*2*o.angle*this.focus,v=this.mapSize.width/this.mapSize.height,C=o.distance||h.far;(m!==h.fov||v!==h.aspect||C!==h.far)&&(h.fov=m,h.aspect=v,h.far=C,h.updateProjectionMatrix()),super.updateMatrices(o)}copy(o){return super.copy(o),this.focus=o.focus,this}}class xA extends Yc{constructor(o,h,m=0,v=Math.PI/3,C=0,b=2){super(o,h),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Nr.DEFAULT_UP),this.updateMatrix(),this.target=new Nr,this.distance=m,this.angle=v,this.penumbra=C,this.decay=b,this.map=null,this.shadow=new I3}get power(){return this.intensity*Math.PI}set power(o){this.intensity=o/Math.PI}dispose(){this.shadow.dispose()}copy(o,h){return super.copy(o,h),this.distance=o.distance,this.angle=o.angle,this.penumbra=o.penumbra,this.decay=o.decay,this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}const MA=new on,Af=new nt,q2=new nt;class B3 extends Y2{constructor(){super(new Ls(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new vi(4,2),this._viewportCount=6,this._viewports=[new zr(2,1,1,1),new zr(0,1,1,1),new zr(3,1,1,1),new zr(1,1,1,1),new zr(3,0,1,1),new zr(1,0,1,1)],this._cubeDirections=[new nt(1,0,0),new nt(-1,0,0),new nt(0,0,1),new nt(0,0,-1),new nt(0,1,0),new nt(0,-1,0)],this._cubeUps=[new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,1,0),new nt(0,0,1),new nt(0,0,-1)]}updateMatrices(o,h=0){const m=this.camera,v=this.matrix,C=o.distance||m.far;C!==m.far&&(m.far=C,m.updateProjectionMatrix()),Af.setFromMatrixPosition(o.matrixWorld),m.position.copy(Af),q2.copy(m.position),q2.add(this._cubeDirections[h]),m.up.copy(this._cubeUps[h]),m.lookAt(q2),m.updateMatrixWorld(),v.makeTranslation(-Af.x,-Af.y,-Af.z),MA.multiplyMatrices(m.projectionMatrix,m.matrixWorldInverse),this._frustum.setFromProjectionMatrix(MA)}}class SA extends Yc{constructor(o,h,m=0,v=2){super(o,h),this.isPointLight=!0,this.type="PointLight",this.distance=m,this.decay=v,this.shadow=new B3}get power(){return this.intensity*4*Math.PI}set power(o){this.intensity=o/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(o,h){return super.copy(o,h),this.distance=o.distance,this.decay=o.decay,this.shadow=o.shadow.clone(),this}}class L3 extends Y2{constructor(){super(new H1(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class bA extends Yc{constructor(o,h){super(o,h),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Nr.DEFAULT_UP),this.updateMatrix(),this.target=new Nr,this.shadow=new L3}dispose(){this.shadow.dispose()}copy(o){return super.copy(o),this.target=o.target.clone(),this.shadow=o.shadow.clone(),this}}class TA extends Yc{constructor(o,h){super(o,h),this.isAmbientLight=!0,this.type="AmbientLight"}}class RA extends Yc{constructor(o,h,m=10,v=10){super(o,h),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=m,this.height=v}get power(){return this.intensity*this.width*this.height*Math.PI}set power(o){this.intensity=o/(this.width*this.height*Math.PI)}copy(o){return super.copy(o),this.width=o.width,this.height=o.height,this}toJSON(o){const h=super.toJSON(o);return h.object.width=this.width,h.object.height=this.height,h}}class IA{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let o=0;o<9;o++)this.coefficients.push(new nt)}set(o){for(let h=0;h<9;h++)this.coefficients[h].copy(o[h]);return this}zero(){for(let o=0;o<9;o++)this.coefficients[o].set(0,0,0);return this}getAt(o,h){const m=o.x,v=o.y,C=o.z,b=this.coefficients;return h.copy(b[0]).multiplyScalar(.282095),h.addScaledVector(b[1],.488603*v),h.addScaledVector(b[2],.488603*C),h.addScaledVector(b[3],.488603*m),h.addScaledVector(b[4],1.092548*(m*v)),h.addScaledVector(b[5],1.092548*(v*C)),h.addScaledVector(b[6],.315392*(3*C*C-1)),h.addScaledVector(b[7],1.092548*(m*C)),h.addScaledVector(b[8],.546274*(m*m-v*v)),h}getIrradianceAt(o,h){const m=o.x,v=o.y,C=o.z,b=this.coefficients;return h.copy(b[0]).multiplyScalar(.886227),h.addScaledVector(b[1],1.023328*v),h.addScaledVector(b[2],1.023328*C),h.addScaledVector(b[3],1.023328*m),h.addScaledVector(b[4],.858086*m*v),h.addScaledVector(b[5],.858086*v*C),h.addScaledVector(b[6],.743125*C*C-.247708),h.addScaledVector(b[7],.858086*m*C),h.addScaledVector(b[8],.429043*(m*m-v*v)),h}add(o){for(let h=0;h<9;h++)this.coefficients[h].add(o.coefficients[h]);return this}addScaledSH(o,h){for(let m=0;m<9;m++)this.coefficients[m].addScaledVector(o.coefficients[m],h);return this}scale(o){for(let h=0;h<9;h++)this.coefficients[h].multiplyScalar(o);return this}lerp(o,h){for(let m=0;m<9;m++)this.coefficients[m].lerp(o.coefficients[m],h);return this}equals(o){for(let h=0;h<9;h++)if(!this.coefficients[h].equals(o.coefficients[h]))return!1;return!0}copy(o){return this.set(o.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(o,h=0){const m=this.coefficients;for(let v=0;v<9;v++)m[v].fromArray(o,h+v*3);return this}toArray(o=[],h=0){const m=this.coefficients;for(let v=0;v<9;v++)m[v].toArray(o,h+v*3);return o}static getBasisAt(o,h){const m=o.x,v=o.y,C=o.z;h[0]=.282095,h[1]=.488603*v,h[2]=.488603*C,h[3]=.488603*m,h[4]=1.092548*m*v,h[5]=1.092548*v*C,h[6]=.315392*(3*C*C-1),h[7]=1.092548*m*C,h[8]=.546274*(m*m-v*v)}}class BA extends Yc{constructor(o=new IA,h=1){super(void 0,h),this.isLightProbe=!0,this.sh=o}copy(o){return super.copy(o),this.sh.copy(o.sh),this}fromJSON(o){return this.intensity=o.intensity,this.sh.fromArray(o.sh),this}toJSON(o){const h=super.toJSON(o);return h.object.sh=this.sh.toArray(),h}}class s2 extends Ha{constructor(o){super(o),this.textures={}}load(o,h,m,v){const C=this,b=new Z1(C.manager);b.setPath(C.path),b.setRequestHeader(C.requestHeader),b.setWithCredentials(C.withCredentials),b.load(o,function(L){try{h(C.parse(JSON.parse(L)))}catch(W){v?v(W):console.error(W),C.manager.itemError(o)}},m,v)}parse(o){const h=this.textures;function m(C){return h[C]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",C),h[C]}const v=s2.createMaterialFromType(o.type);if(o.uuid!==void 0&&(v.uuid=o.uuid),o.name!==void 0&&(v.name=o.name),o.color!==void 0&&v.color!==void 0&&v.color.setHex(o.color),o.roughness!==void 0&&(v.roughness=o.roughness),o.metalness!==void 0&&(v.metalness=o.metalness),o.sheen!==void 0&&(v.sheen=o.sheen),o.sheenColor!==void 0&&(v.sheenColor=new un().setHex(o.sheenColor)),o.sheenRoughness!==void 0&&(v.sheenRoughness=o.sheenRoughness),o.emissive!==void 0&&v.emissive!==void 0&&v.emissive.setHex(o.emissive),o.specular!==void 0&&v.specular!==void 0&&v.specular.setHex(o.specular),o.specularIntensity!==void 0&&(v.specularIntensity=o.specularIntensity),o.specularColor!==void 0&&v.specularColor!==void 0&&v.specularColor.setHex(o.specularColor),o.shininess!==void 0&&(v.shininess=o.shininess),o.clearcoat!==void 0&&(v.clearcoat=o.clearcoat),o.clearcoatRoughness!==void 0&&(v.clearcoatRoughness=o.clearcoatRoughness),o.dispersion!==void 0&&(v.dispersion=o.dispersion),o.iridescence!==void 0&&(v.iridescence=o.iridescence),o.iridescenceIOR!==void 0&&(v.iridescenceIOR=o.iridescenceIOR),o.iridescenceThicknessRange!==void 0&&(v.iridescenceThicknessRange=o.iridescenceThicknessRange),o.transmission!==void 0&&(v.transmission=o.transmission),o.thickness!==void 0&&(v.thickness=o.thickness),o.attenuationDistance!==void 0&&(v.attenuationDistance=o.attenuationDistance),o.attenuationColor!==void 0&&v.attenuationColor!==void 0&&v.attenuationColor.setHex(o.attenuationColor),o.anisotropy!==void 0&&(v.anisotropy=o.anisotropy),o.anisotropyRotation!==void 0&&(v.anisotropyRotation=o.anisotropyRotation),o.fog!==void 0&&(v.fog=o.fog),o.flatShading!==void 0&&(v.flatShading=o.flatShading),o.blending!==void 0&&(v.blending=o.blending),o.combine!==void 0&&(v.combine=o.combine),o.side!==void 0&&(v.side=o.side),o.shadowSide!==void 0&&(v.shadowSide=o.shadowSide),o.opacity!==void 0&&(v.opacity=o.opacity),o.transparent!==void 0&&(v.transparent=o.transparent),o.alphaTest!==void 0&&(v.alphaTest=o.alphaTest),o.alphaHash!==void 0&&(v.alphaHash=o.alphaHash),o.depthFunc!==void 0&&(v.depthFunc=o.depthFunc),o.depthTest!==void 0&&(v.depthTest=o.depthTest),o.depthWrite!==void 0&&(v.depthWrite=o.depthWrite),o.colorWrite!==void 0&&(v.colorWrite=o.colorWrite),o.blendSrc!==void 0&&(v.blendSrc=o.blendSrc),o.blendDst!==void 0&&(v.blendDst=o.blendDst),o.blendEquation!==void 0&&(v.blendEquation=o.blendEquation),o.blendSrcAlpha!==void 0&&(v.blendSrcAlpha=o.blendSrcAlpha),o.blendDstAlpha!==void 0&&(v.blendDstAlpha=o.blendDstAlpha),o.blendEquationAlpha!==void 0&&(v.blendEquationAlpha=o.blendEquationAlpha),o.blendColor!==void 0&&v.blendColor!==void 0&&v.blendColor.setHex(o.blendColor),o.blendAlpha!==void 0&&(v.blendAlpha=o.blendAlpha),o.stencilWriteMask!==void 0&&(v.stencilWriteMask=o.stencilWriteMask),o.stencilFunc!==void 0&&(v.stencilFunc=o.stencilFunc),o.stencilRef!==void 0&&(v.stencilRef=o.stencilRef),o.stencilFuncMask!==void 0&&(v.stencilFuncMask=o.stencilFuncMask),o.stencilFail!==void 0&&(v.stencilFail=o.stencilFail),o.stencilZFail!==void 0&&(v.stencilZFail=o.stencilZFail),o.stencilZPass!==void 0&&(v.stencilZPass=o.stencilZPass),o.stencilWrite!==void 0&&(v.stencilWrite=o.stencilWrite),o.wireframe!==void 0&&(v.wireframe=o.wireframe),o.wireframeLinewidth!==void 0&&(v.wireframeLinewidth=o.wireframeLinewidth),o.wireframeLinecap!==void 0&&(v.wireframeLinecap=o.wireframeLinecap),o.wireframeLinejoin!==void 0&&(v.wireframeLinejoin=o.wireframeLinejoin),o.rotation!==void 0&&(v.rotation=o.rotation),o.linewidth!==void 0&&(v.linewidth=o.linewidth),o.dashSize!==void 0&&(v.dashSize=o.dashSize),o.gapSize!==void 0&&(v.gapSize=o.gapSize),o.scale!==void 0&&(v.scale=o.scale),o.polygonOffset!==void 0&&(v.polygonOffset=o.polygonOffset),o.polygonOffsetFactor!==void 0&&(v.polygonOffsetFactor=o.polygonOffsetFactor),o.polygonOffsetUnits!==void 0&&(v.polygonOffsetUnits=o.polygonOffsetUnits),o.dithering!==void 0&&(v.dithering=o.dithering),o.alphaToCoverage!==void 0&&(v.alphaToCoverage=o.alphaToCoverage),o.premultipliedAlpha!==void 0&&(v.premultipliedAlpha=o.premultipliedAlpha),o.forceSinglePass!==void 0&&(v.forceSinglePass=o.forceSinglePass),o.visible!==void 0&&(v.visible=o.visible),o.toneMapped!==void 0&&(v.toneMapped=o.toneMapped),o.userData!==void 0&&(v.userData=o.userData),o.vertexColors!==void 0&&(typeof o.vertexColors=="number"?v.vertexColors=o.vertexColors>0:v.vertexColors=o.vertexColors),o.uniforms!==void 0)for(const C in o.uniforms){const b=o.uniforms[C];switch(v.uniforms[C]={},b.type){case"t":v.uniforms[C].value=m(b.value);break;case"c":v.uniforms[C].value=new un().setHex(b.value);break;case"v2":v.uniforms[C].value=new vi().fromArray(b.value);break;case"v3":v.uniforms[C].value=new nt().fromArray(b.value);break;case"v4":v.uniforms[C].value=new zr().fromArray(b.value);break;case"m3":v.uniforms[C].value=new Nn().fromArray(b.value);break;case"m4":v.uniforms[C].value=new on().fromArray(b.value);break;default:v.uniforms[C].value=b.value}}if(o.defines!==void 0&&(v.defines=o.defines),o.vertexShader!==void 0&&(v.vertexShader=o.vertexShader),o.fragmentShader!==void 0&&(v.fragmentShader=o.fragmentShader),o.glslVersion!==void 0&&(v.glslVersion=o.glslVersion),o.extensions!==void 0)for(const C in o.extensions)v.extensions[C]=o.extensions[C];if(o.lights!==void 0&&(v.lights=o.lights),o.clipping!==void 0&&(v.clipping=o.clipping),o.size!==void 0&&(v.size=o.size),o.sizeAttenuation!==void 0&&(v.sizeAttenuation=o.sizeAttenuation),o.map!==void 0&&(v.map=m(o.map)),o.matcap!==void 0&&(v.matcap=m(o.matcap)),o.alphaMap!==void 0&&(v.alphaMap=m(o.alphaMap)),o.bumpMap!==void 0&&(v.bumpMap=m(o.bumpMap)),o.bumpScale!==void 0&&(v.bumpScale=o.bumpScale),o.normalMap!==void 0&&(v.normalMap=m(o.normalMap)),o.normalMapType!==void 0&&(v.normalMapType=o.normalMapType),o.normalScale!==void 0){let C=o.normalScale;Array.isArray(C)===!1&&(C=[C,C]),v.normalScale=new vi().fromArray(C)}return o.displacementMap!==void 0&&(v.displacementMap=m(o.displacementMap)),o.displacementScale!==void 0&&(v.displacementScale=o.displacementScale),o.displacementBias!==void 0&&(v.displacementBias=o.displacementBias),o.roughnessMap!==void 0&&(v.roughnessMap=m(o.roughnessMap)),o.metalnessMap!==void 0&&(v.metalnessMap=m(o.metalnessMap)),o.emissiveMap!==void 0&&(v.emissiveMap=m(o.emissiveMap)),o.emissiveIntensity!==void 0&&(v.emissiveIntensity=o.emissiveIntensity),o.specularMap!==void 0&&(v.specularMap=m(o.specularMap)),o.specularIntensityMap!==void 0&&(v.specularIntensityMap=m(o.specularIntensityMap)),o.specularColorMap!==void 0&&(v.specularColorMap=m(o.specularColorMap)),o.envMap!==void 0&&(v.envMap=m(o.envMap)),o.envMapRotation!==void 0&&v.envMapRotation.fromArray(o.envMapRotation),o.envMapIntensity!==void 0&&(v.envMapIntensity=o.envMapIntensity),o.reflectivity!==void 0&&(v.reflectivity=o.reflectivity),o.refractionRatio!==void 0&&(v.refractionRatio=o.refractionRatio),o.lightMap!==void 0&&(v.lightMap=m(o.lightMap)),o.lightMapIntensity!==void 0&&(v.lightMapIntensity=o.lightMapIntensity),o.aoMap!==void 0&&(v.aoMap=m(o.aoMap)),o.aoMapIntensity!==void 0&&(v.aoMapIntensity=o.aoMapIntensity),o.gradientMap!==void 0&&(v.gradientMap=m(o.gradientMap)),o.clearcoatMap!==void 0&&(v.clearcoatMap=m(o.clearcoatMap)),o.clearcoatRoughnessMap!==void 0&&(v.clearcoatRoughnessMap=m(o.clearcoatRoughnessMap)),o.clearcoatNormalMap!==void 0&&(v.clearcoatNormalMap=m(o.clearcoatNormalMap)),o.clearcoatNormalScale!==void 0&&(v.clearcoatNormalScale=new vi().fromArray(o.clearcoatNormalScale)),o.iridescenceMap!==void 0&&(v.iridescenceMap=m(o.iridescenceMap)),o.iridescenceThicknessMap!==void 0&&(v.iridescenceThicknessMap=m(o.iridescenceThicknessMap)),o.transmissionMap!==void 0&&(v.transmissionMap=m(o.transmissionMap)),o.thicknessMap!==void 0&&(v.thicknessMap=m(o.thicknessMap)),o.anisotropyMap!==void 0&&(v.anisotropyMap=m(o.anisotropyMap)),o.sheenColorMap!==void 0&&(v.sheenColorMap=m(o.sheenColorMap)),o.sheenRoughnessMap!==void 0&&(v.sheenRoughnessMap=m(o.sheenRoughnessMap)),v}setTextures(o){return this.textures=o,this}static createMaterialFromType(o){const h={ShadowMaterial:oA,SpriteMaterial:E2,RawShaderMaterial:aA,ShaderMaterial:w0,PointsMaterial:b2,MeshPhysicalMaterial:lA,MeshStandardMaterial:G2,MeshPhongMaterial:cA,MeshToonMaterial:uA,MeshNormalMaterial:hA,MeshLambertMaterial:dA,MeshDepthMaterial:A2,MeshDistanceMaterial:m2,MeshBasicMaterial:es,MeshMatcapMaterial:fA,LineDashedMaterial:pA,LineBasicMaterial:la,Material:us};return new h[o]}}class J2{static decodeText(o){if(typeof TextDecoder<"u")return new TextDecoder().decode(o);let h="";for(let m=0,v=o.length;m<v;m++)h+=String.fromCharCode(o[m]);try{return decodeURIComponent(escape(h))}catch{return h}}static extractUrlBase(o){const h=o.lastIndexOf("/");return h===-1?"./":o.slice(0,h+1)}static resolveURL(o,h){return typeof o!="string"||o===""?"":(/^https?:\/\//i.test(h)&&/^\//.test(o)&&(h=h.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(o)||/^data:.*,.*$/i.test(o)||/^blob:.*$/i.test(o)?o:h+o)}}class LA extends rr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(o){return super.copy(o),this.instanceCount=o.instanceCount,this}toJSON(){const o=super.toJSON();return o.instanceCount=this.instanceCount,o.isInstancedBufferGeometry=!0,o}}class DA extends Ha{constructor(o){super(o)}load(o,h,m,v){const C=this,b=new Z1(C.manager);b.setPath(C.path),b.setRequestHeader(C.requestHeader),b.setWithCredentials(C.withCredentials),b.load(o,function(L){try{h(C.parse(JSON.parse(L)))}catch(W){v?v(W):console.error(W),C.manager.itemError(o)}},m,v)}parse(o){const h={},m={};function v(ve,xe){if(h[xe]!==void 0)return h[xe];const Se=ve.interleavedBuffers[xe],Ee=C(ve,Se.buffer),Ke=va(Se.type,Ee),Ge=new wf(Ke,Se.stride);return Ge.uuid=Se.uuid,h[xe]=Ge,Ge}function C(ve,xe){if(m[xe]!==void 0)return m[xe];const Se=ve.arrayBuffers[xe],Ee=new Uint32Array(Se).buffer;return m[xe]=Ee,Ee}const b=o.isInstancedBufferGeometry?new LA:new rr,L=o.data.index;if(L!==void 0){const ve=va(L.type,L.array);b.setIndex(new Zr(ve,1))}const W=o.data.attributes;for(const ve in W){const xe=W[ve];let Le;if(xe.isInterleavedBufferAttribute){const Se=v(o.data,xe.data);Le=new rh(Se,xe.itemSize,xe.offset,xe.normalized)}else{const Se=va(xe.type,xe.array),Ee=xe.isInstancedBufferAttribute?Cd:Zr;Le=new Ee(Se,xe.itemSize,xe.normalized)}xe.name!==void 0&&(Le.name=xe.name),xe.usage!==void 0&&Le.setUsage(xe.usage),b.setAttribute(ve,Le)}const J=o.data.morphAttributes;if(J)for(const ve in J){const xe=J[ve],Le=[];for(let Se=0,Ee=xe.length;Se<Ee;Se++){const Ke=xe[Se];let Ge;if(Ke.isInterleavedBufferAttribute){const Ue=v(o.data,Ke.data);Ge=new rh(Ue,Ke.itemSize,Ke.offset,Ke.normalized)}else{const Ue=va(Ke.type,Ke.array);Ge=new Zr(Ue,Ke.itemSize,Ke.normalized)}Ke.name!==void 0&&(Ge.name=Ke.name),Le.push(Ge)}b.morphAttributes[ve]=Le}o.data.morphTargetsRelative&&(b.morphTargetsRelative=!0);const ue=o.data.groups||o.data.drawcalls||o.data.offsets;if(ue!==void 0)for(let ve=0,xe=ue.length;ve!==xe;++ve){const Le=ue[ve];b.addGroup(Le.start,Le.count,Le.materialIndex)}const pe=o.data.boundingSphere;if(pe!==void 0){const ve=new nt;pe.center!==void 0&&ve.fromArray(pe.center),b.boundingSphere=new Vs(ve,pe.radius)}return o.name&&(b.name=o.name),o.userData&&(b.userData=o.userData),b}}class D3 extends Ha{constructor(o){super(o)}load(o,h,m,v){const C=this,b=this.path===""?J2.extractUrlBase(o):this.path;this.resourcePath=this.resourcePath||b;const L=new Z1(this.manager);L.setPath(this.path),L.setRequestHeader(this.requestHeader),L.setWithCredentials(this.withCredentials),L.load(o,function(W){let J=null;try{J=JSON.parse(W)}catch(ue){v!==void 0&&v(ue),console.error("THREE:ObjectLoader: Can't parse "+o+".",ue.message);return}const re=J.metadata;if(re===void 0||re.type===void 0||re.type.toLowerCase()==="geometry"){v!==void 0&&v(new Error("THREE.ObjectLoader: Can't load "+o)),console.error("THREE.ObjectLoader: Can't load "+o);return}C.parse(J,h)},m,v)}async loadAsync(o,h){const m=this,v=this.path===""?J2.extractUrlBase(o):this.path;this.resourcePath=this.resourcePath||v;const C=new Z1(this.manager);C.setPath(this.path),C.setRequestHeader(this.requestHeader),C.setWithCredentials(this.withCredentials);const b=await C.loadAsync(o,h),L=JSON.parse(b),W=L.metadata;if(W===void 0||W.type===void 0||W.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+o);return await m.parseAsync(L)}parse(o,h){const m=this.parseAnimations(o.animations),v=this.parseShapes(o.shapes),C=this.parseGeometries(o.geometries,v),b=this.parseImages(o.images,function(){h!==void 0&&h(J)}),L=this.parseTextures(o.textures,b),W=this.parseMaterials(o.materials,L),J=this.parseObject(o.object,C,W,L,m),re=this.parseSkeletons(o.skeletons,J);if(this.bindSkeletons(J,re),h!==void 0){let ue=!1;for(const pe in b)if(b[pe].data instanceof HTMLImageElement){ue=!0;break}ue===!1&&h(J)}return J}async parseAsync(o){const h=this.parseAnimations(o.animations),m=this.parseShapes(o.shapes),v=this.parseGeometries(o.geometries,m),C=await this.parseImagesAsync(o.images),b=this.parseTextures(o.textures,C),L=this.parseMaterials(o.materials,b),W=this.parseObject(o.object,v,L,b,h),J=this.parseSkeletons(o.skeletons,W);return this.bindSkeletons(W,J),W}parseShapes(o){const h={};if(o!==void 0)for(let m=0,v=o.length;m<v;m++){const C=new oh().fromJSON(o[m]);h[C.uuid]=C}return h}parseSkeletons(o,h){const m={},v={};if(h.traverse(function(C){C.isBone&&(v[C.uuid]=C)}),o!==void 0)for(let C=0,b=o.length;C<b;C++){const L=new bf().fromJSON(o[C],v);m[L.uuid]=L}return m}parseGeometries(o,h){const m={};if(o!==void 0){const C=new DA;for(let b=0,L=o.length;b<L;b++){let W;const J=o[b];switch(J.type){case"BufferGeometry":case"InstancedBufferGeometry":W=C.parse(J);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var v=new THREE.LegacyJSONLoader;W=v.parse(J,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:J.type in sA?W=sA[J.type].fromJSON(J,h):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${J.type}"`)}W.uuid=J.uuid,J.name!==void 0&&(W.name=J.name),J.userData!==void 0&&(W.userData=J.userData),m[J.uuid]=W}}return m}parseMaterials(o,h){const m={},v={};if(o!==void 0){const C=new s2;C.setTextures(h);for(let b=0,L=o.length;b<L;b++){const W=o[b];m[W.uuid]===void 0&&(m[W.uuid]=C.parse(W)),v[W.uuid]=m[W.uuid]}}return v}parseAnimations(o){const h={};if(o!==void 0)for(let m=0;m<o.length;m++){const v=o[m],C=ff.parse(v);h[C.uuid]=C}return h}parseImages(o,h){const m=this,v={};let C;function b(W){return m.manager.itemStart(W),C.load(W,function(){m.manager.itemEnd(W)},void 0,function(){m.manager.itemError(W),m.manager.itemEnd(W)})}function L(W){if(typeof W=="string"){const J=W,re=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(J)?J:m.resourcePath+J;return b(re)}else return W.data?{data:va(W.type,W.data),width:W.width,height:W.height}:null}if(o!==void 0&&o.length>0){const W=new K2(h);C=new pf(W),C.setCrossOrigin(this.crossOrigin);for(let J=0,re=o.length;J<re;J++){const ue=o[J],pe=ue.url;if(Array.isArray(pe)){const ve=[];for(let xe=0,Le=pe.length;xe<Le;xe++){const Se=pe[xe],Ee=L(Se);Ee!==null&&(Ee instanceof HTMLImageElement?ve.push(Ee):ve.push(new zc(Ee.data,Ee.width,Ee.height)))}v[ue.uuid]=new Es(ve)}else{const ve=L(ue.url);v[ue.uuid]=new Es(ve)}}}return v}async parseImagesAsync(o){const h=this,m={};let v;async function C(b){if(typeof b=="string"){const L=b,W=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(L)?L:h.resourcePath+L;return await v.loadAsync(W)}else return b.data?{data:va(b.type,b.data),width:b.width,height:b.height}:null}if(o!==void 0&&o.length>0){v=new pf(this.manager),v.setCrossOrigin(this.crossOrigin);for(let b=0,L=o.length;b<L;b++){const W=o[b],J=W.url;if(Array.isArray(J)){const re=[];for(let ue=0,pe=J.length;ue<pe;ue++){const ve=J[ue],xe=await C(ve);xe!==null&&(xe instanceof HTMLImageElement?re.push(xe):re.push(new zc(xe.data,xe.width,xe.height)))}m[W.uuid]=new Es(re)}else{const re=await C(W.url);m[W.uuid]=new Es(re)}}}return m}parseTextures(o,h){function m(C,b){return typeof C=="number"?C:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",C),b[C])}const v={};if(o!==void 0)for(let C=0,b=o.length;C<b;C++){const L=o[C];L.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',L.uuid),h[L.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",L.image);const W=h[L.image],J=W.data;let re;Array.isArray(J)?(re=new ao,J.length===6&&(re.needsUpdate=!0)):(J&&J.data?re=new zc:re=new cs,J&&(re.needsUpdate=!0)),re.source=W,re.uuid=L.uuid,L.name!==void 0&&(re.name=L.name),L.mapping!==void 0&&(re.mapping=m(L.mapping,P3)),L.channel!==void 0&&(re.channel=L.channel),L.offset!==void 0&&re.offset.fromArray(L.offset),L.repeat!==void 0&&re.repeat.fromArray(L.repeat),L.center!==void 0&&re.center.fromArray(L.center),L.rotation!==void 0&&(re.rotation=L.rotation),L.wrap!==void 0&&(re.wrapS=m(L.wrap[0],PA),re.wrapT=m(L.wrap[1],PA)),L.format!==void 0&&(re.format=L.format),L.internalFormat!==void 0&&(re.internalFormat=L.internalFormat),L.type!==void 0&&(re.type=L.type),L.colorSpace!==void 0&&(re.colorSpace=L.colorSpace),L.minFilter!==void 0&&(re.minFilter=m(L.minFilter,OA)),L.magFilter!==void 0&&(re.magFilter=m(L.magFilter,OA)),L.anisotropy!==void 0&&(re.anisotropy=L.anisotropy),L.flipY!==void 0&&(re.flipY=L.flipY),L.generateMipmaps!==void 0&&(re.generateMipmaps=L.generateMipmaps),L.premultiplyAlpha!==void 0&&(re.premultiplyAlpha=L.premultiplyAlpha),L.unpackAlignment!==void 0&&(re.unpackAlignment=L.unpackAlignment),L.compareFunction!==void 0&&(re.compareFunction=L.compareFunction),L.userData!==void 0&&(re.userData=L.userData),v[L.uuid]=re}return v}parseObject(o,h,m,v,C){let b;function L(pe){return h[pe]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",pe),h[pe]}function W(pe){if(pe!==void 0){if(Array.isArray(pe)){const ve=[];for(let xe=0,Le=pe.length;xe<Le;xe++){const Se=pe[xe];m[Se]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Se),ve.push(m[Se])}return ve}return m[pe]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",pe),m[pe]}}function J(pe){return v[pe]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",pe),v[pe]}let re,ue;switch(o.type){case"Scene":b=new mp,o.background!==void 0&&(Number.isInteger(o.background)?b.background=new un(o.background):b.background=J(o.background)),o.environment!==void 0&&(b.environment=J(o.environment)),o.fog!==void 0&&(o.fog.type==="Fog"?b.fog=new yf(o.fog.color,o.fog.near,o.fog.far):o.fog.type==="FogExp2"&&(b.fog=new Ef(o.fog.color,o.fog.density)),o.fog.name!==""&&(b.fog.name=o.fog.name)),o.backgroundBlurriness!==void 0&&(b.backgroundBlurriness=o.backgroundBlurriness),o.backgroundIntensity!==void 0&&(b.backgroundIntensity=o.backgroundIntensity),o.backgroundRotation!==void 0&&b.backgroundRotation.fromArray(o.backgroundRotation),o.environmentIntensity!==void 0&&(b.environmentIntensity=o.environmentIntensity),o.environmentRotation!==void 0&&b.environmentRotation.fromArray(o.environmentRotation);break;case"PerspectiveCamera":b=new Ls(o.fov,o.aspect,o.near,o.far),o.focus!==void 0&&(b.focus=o.focus),o.zoom!==void 0&&(b.zoom=o.zoom),o.filmGauge!==void 0&&(b.filmGauge=o.filmGauge),o.filmOffset!==void 0&&(b.filmOffset=o.filmOffset),o.view!==void 0&&(b.view=Object.assign({},o.view));break;case"OrthographicCamera":b=new H1(o.left,o.right,o.top,o.bottom,o.near,o.far),o.zoom!==void 0&&(b.zoom=o.zoom),o.view!==void 0&&(b.view=Object.assign({},o.view));break;case"AmbientLight":b=new TA(o.color,o.intensity);break;case"DirectionalLight":b=new bA(o.color,o.intensity);break;case"PointLight":b=new SA(o.color,o.intensity,o.distance,o.decay);break;case"RectAreaLight":b=new RA(o.color,o.intensity,o.width,o.height);break;case"SpotLight":b=new xA(o.color,o.intensity,o.distance,o.angle,o.penumbra,o.decay);break;case"HemisphereLight":b=new wA(o.color,o.groundColor,o.intensity);break;case"LightProbe":b=new BA().fromJSON(o);break;case"SkinnedMesh":re=L(o.geometry),ue=W(o.material),b=new Tp(re,ue),o.bindMode!==void 0&&(b.bindMode=o.bindMode),o.bindMatrix!==void 0&&b.bindMatrix.fromArray(o.bindMatrix),o.skeleton!==void 0&&(b.skeleton=o.skeleton);break;case"Mesh":re=L(o.geometry),ue=W(o.material),b=new Bs(re,ue);break;case"InstancedMesh":re=L(o.geometry),ue=W(o.material);const pe=o.count,ve=o.instanceMatrix,xe=o.instanceColor;b=new Lp(re,ue,pe),b.instanceMatrix=new Cd(new Float32Array(ve.array),16),xe!==void 0&&(b.instanceColor=new Cd(new Float32Array(xe.array),xe.itemSize));break;case"BatchedMesh":re=L(o.geometry),ue=W(o.material),b=new Op(o.maxGeometryCount,o.maxVertexCount,o.maxIndexCount,ue),b.geometry=re,b.perObjectFrustumCulled=o.perObjectFrustumCulled,b.sortObjects=o.sortObjects,b._drawRanges=o.drawRanges,b._reservedRanges=o.reservedRanges,b._visibility=o.visibility,b._active=o.active,b._bounds=o.bounds.map(Le=>{const Se=new jn;Se.min.fromArray(Le.boxMin),Se.max.fromArray(Le.boxMax);const Ee=new Vs;return Ee.radius=Le.sphereRadius,Ee.center.fromArray(Le.sphereCenter),{boxInitialized:Le.boxInitialized,box:Se,sphereInitialized:Le.sphereInitialized,sphere:Ee}}),b._maxGeometryCount=o.maxGeometryCount,b._maxVertexCount=o.maxVertexCount,b._maxIndexCount=o.maxIndexCount,b._geometryInitialized=o.geometryInitialized,b._geometryCount=o.geometryCount,b._matricesTexture=J(o.matricesTexture.uuid);break;case"LOD":b=new Cp;break;case"Line":b=new Kc(L(o.geometry),W(o.material));break;case"LineLoop":b=new Hp(L(o.geometry),W(o.material));break;case"LineSegments":b=new m1(L(o.geometry),W(o.material));break;case"PointCloud":case"Points":b=new Qp(L(o.geometry),W(o.material));break;case"Sprite":b=new yp(W(o.material));break;case"Group":b=new ih;break;case"Bone":b=new _2;break;default:b=new Nr}if(b.uuid=o.uuid,o.name!==void 0&&(b.name=o.name),o.matrix!==void 0?(b.matrix.fromArray(o.matrix),o.matrixAutoUpdate!==void 0&&(b.matrixAutoUpdate=o.matrixAutoUpdate),b.matrixAutoUpdate&&b.matrix.decompose(b.position,b.quaternion,b.scale)):(o.position!==void 0&&b.position.fromArray(o.position),o.rotation!==void 0&&b.rotation.fromArray(o.rotation),o.quaternion!==void 0&&b.quaternion.fromArray(o.quaternion),o.scale!==void 0&&b.scale.fromArray(o.scale)),o.up!==void 0&&b.up.fromArray(o.up),o.castShadow!==void 0&&(b.castShadow=o.castShadow),o.receiveShadow!==void 0&&(b.receiveShadow=o.receiveShadow),o.shadow&&(o.shadow.bias!==void 0&&(b.shadow.bias=o.shadow.bias),o.shadow.normalBias!==void 0&&(b.shadow.normalBias=o.shadow.normalBias),o.shadow.radius!==void 0&&(b.shadow.radius=o.shadow.radius),o.shadow.mapSize!==void 0&&b.shadow.mapSize.fromArray(o.shadow.mapSize),o.shadow.camera!==void 0&&(b.shadow.camera=this.parseObject(o.shadow.camera))),o.visible!==void 0&&(b.visible=o.visible),o.frustumCulled!==void 0&&(b.frustumCulled=o.frustumCulled),o.renderOrder!==void 0&&(b.renderOrder=o.renderOrder),o.userData!==void 0&&(b.userData=o.userData),o.layers!==void 0&&(b.layers.mask=o.layers),o.children!==void 0){const pe=o.children;for(let ve=0;ve<pe.length;ve++)b.add(this.parseObject(pe[ve],h,m,v,C))}if(o.animations!==void 0){const pe=o.animations;for(let ve=0;ve<pe.length;ve++){const xe=pe[ve];b.animations.push(C[xe])}}if(o.type==="LOD"){o.autoUpdate!==void 0&&(b.autoUpdate=o.autoUpdate);const pe=o.levels;for(let ve=0;ve<pe.length;ve++){const xe=pe[ve],Le=b.getObjectByProperty("uuid",xe.object);Le!==void 0&&b.addLevel(Le,xe.distance,xe.hysteresis)}}return b}bindSkeletons(o,h){Object.keys(h).length!==0&&o.traverse(function(m){if(m.isSkinnedMesh===!0&&m.skeleton!==void 0){const v=h[m.skeleton];v===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",m.skeleton):m.bind(v,m.bindMatrix)}})}}const P3={UVMapping:ct,CubeReflectionMapping:Ie,CubeRefractionMapping:ae,EquirectangularReflectionMapping:ge,EquirectangularRefractionMapping:He,CubeUVReflectionMapping:Ze},PA={RepeatWrapping:ht,ClampToEdgeWrapping:St,MirroredRepeatWrapping:Di},OA={NearestFilter:Wi,NearestMipmapNearestFilter:Oi,NearestMipmapLinearFilter:Ji,LinearFilter:kn,LinearMipmapNearestFilter:Jt,LinearMipmapLinearFilter:Pr};class O3 extends Ha{constructor(o){super(o),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(o){return this.options=o,this}load(o,h,m,v){o===void 0&&(o=""),this.path!==void 0&&(o=this.path+o),o=this.manager.resolveURL(o);const C=this,b=q1.get(o);if(b!==void 0){if(C.manager.itemStart(o),b.then){b.then(J=>{h&&h(J),C.manager.itemEnd(o)}).catch(J=>{v&&v(J)});return}return setTimeout(function(){h&&h(b),C.manager.itemEnd(o)},0),b}const L={};L.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",L.headers=this.requestHeader;const W=fetch(o,L).then(function(J){return J.blob()}).then(function(J){return createImageBitmap(J,Object.assign(C.options,{colorSpaceConversion:"none"}))}).then(function(J){return q1.add(o,J),h&&h(J),C.manager.itemEnd(o),J}).catch(function(J){v&&v(J),q1.remove(o),C.manager.itemError(o),C.manager.itemEnd(o)});q1.add(o,W),C.manager.itemStart(o)}}let o2;class Z2{static getContext(){return o2===void 0&&(o2=new(window.AudioContext||window.webkitAudioContext)),o2}static setContext(o){o2=o}}class F3 extends Ha{constructor(o){super(o)}load(o,h,m,v){const C=this,b=new Z1(this.manager);b.setResponseType("arraybuffer"),b.setPath(this.path),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials),b.load(o,function(W){try{const J=W.slice(0);Z2.getContext().decodeAudioData(J,function(ue){h(ue)}).catch(L)}catch(J){L(J)}},m,v);function L(W){v?v(W):console.error(W),C.manager.itemError(o)}}}const FA=new on,kA=new on,hh=new on;class k3{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ls,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ls,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(o){const h=this._cache;if(h.focus!==o.focus||h.fov!==o.fov||h.aspect!==o.aspect*this.aspect||h.near!==o.near||h.far!==o.far||h.zoom!==o.zoom||h.eyeSep!==this.eyeSep){h.focus=o.focus,h.fov=o.fov,h.aspect=o.aspect*this.aspect,h.near=o.near,h.far=o.far,h.zoom=o.zoom,h.eyeSep=this.eyeSep,hh.copy(o.projectionMatrix);const v=h.eyeSep/2,C=v*h.near/h.focus,b=h.near*Math.tan(Aa*h.fov*.5)/h.zoom;let L,W;kA.elements[12]=-v,FA.elements[12]=v,L=-b*h.aspect+C,W=b*h.aspect+C,hh.elements[0]=2*h.near/(W-L),hh.elements[8]=(W+L)/(W-L),this.cameraL.projectionMatrix.copy(hh),L=-b*h.aspect-C,W=b*h.aspect-C,hh.elements[0]=2*h.near/(W-L),hh.elements[8]=(W+L)/(W-L),this.cameraR.projectionMatrix.copy(hh)}this.cameraL.matrixWorld.copy(o.matrixWorld).multiply(kA),this.cameraR.matrixWorld.copy(o.matrixWorld).multiply(FA)}}class NA{constructor(o=!0){this.autoStart=o,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=UA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let o=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const h=UA();o=(h-this.oldTime)/1e3,this.oldTime=h,this.elapsedTime+=o}return o}}function UA(){return(typeof performance>"u"?Date:performance).now()}const dh=new nt,HA=new xr,N3=new nt,fh=new nt;class U3 extends Nr{constructor(){super(),this.type="AudioListener",this.context=Z2.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new NA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(o){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=o,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(o){return this.gain.gain.setTargetAtTime(o,this.context.currentTime,.01),this}updateMatrixWorld(o){super.updateMatrixWorld(o);const h=this.context.listener,m=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(dh,HA,N3),fh.set(0,0,-1).applyQuaternion(HA),h.positionX){const v=this.context.currentTime+this.timeDelta;h.positionX.linearRampToValueAtTime(dh.x,v),h.positionY.linearRampToValueAtTime(dh.y,v),h.positionZ.linearRampToValueAtTime(dh.z,v),h.forwardX.linearRampToValueAtTime(fh.x,v),h.forwardY.linearRampToValueAtTime(fh.y,v),h.forwardZ.linearRampToValueAtTime(fh.z,v),h.upX.linearRampToValueAtTime(m.x,v),h.upY.linearRampToValueAtTime(m.y,v),h.upZ.linearRampToValueAtTime(m.z,v)}else h.setPosition(dh.x,dh.y,dh.z),h.setOrientation(fh.x,fh.y,fh.z,m.x,m.y,m.z)}}class GA extends Nr{constructor(o){super(),this.type="Audio",this.listener=o,this.context=o.context,this.gain=this.context.createGain(),this.gain.connect(o.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(o){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=o,this.connect(),this}setMediaElementSource(o){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(o),this.connect(),this}setMediaStreamSource(o){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(o),this.connect(),this}setBuffer(o){return this.buffer=o,this.sourceType="buffer",this.autoplay&&this.play(),this}play(o=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+o;const h=this.context.createBufferSource();return h.buffer=this.buffer,h.loop=this.loop,h.loopStart=this.loopStart,h.loopEnd=this.loopEnd,h.onended=this.onEnded.bind(this),h.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=h,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let o=1,h=this.filters.length;o<h;o++)this.filters[o-1].connect(this.filters[o]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let o=1,h=this.filters.length;o<h;o++)this.filters[o-1].disconnect(this.filters[o]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(o){return o||(o=[]),this._connected===!0?(this.disconnect(),this.filters=o.slice(),this.connect()):this.filters=o.slice(),this}setDetune(o){return this.detune=o,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(o){return this.setFilters(o?[o]:[])}setPlaybackRate(o){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=o,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(o){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=o,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(o){return this.loopStart=o,this}setLoopEnd(o){return this.loopEnd=o,this}getVolume(){return this.gain.gain.value}setVolume(o){return this.gain.gain.setTargetAtTime(o,this.context.currentTime,.01),this}}const ph=new nt,QA=new xr,H3=new nt,Ah=new nt;class G3 extends GA{constructor(o){super(o),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(o){return this.panner.refDistance=o,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(o){return this.panner.rolloffFactor=o,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(o){return this.panner.distanceModel=o,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(o){return this.panner.maxDistance=o,this}setDirectionalCone(o,h,m){return this.panner.coneInnerAngle=o,this.panner.coneOuterAngle=h,this.panner.coneOuterGain=m,this}updateMatrixWorld(o){if(super.updateMatrixWorld(o),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(ph,QA,H3),Ah.set(0,0,1).applyQuaternion(QA);const h=this.panner;if(h.positionX){const m=this.context.currentTime+this.listener.timeDelta;h.positionX.linearRampToValueAtTime(ph.x,m),h.positionY.linearRampToValueAtTime(ph.y,m),h.positionZ.linearRampToValueAtTime(ph.z,m),h.orientationX.linearRampToValueAtTime(Ah.x,m),h.orientationY.linearRampToValueAtTime(Ah.y,m),h.orientationZ.linearRampToValueAtTime(Ah.z,m)}else h.setPosition(ph.x,ph.y,ph.z),h.setOrientation(Ah.x,Ah.y,Ah.z)}}class Q3{constructor(o,h=2048){this.analyser=o.context.createAnalyser(),this.analyser.fftSize=h,this.data=new Uint8Array(this.analyser.frequencyBinCount),o.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let o=0;const h=this.getFrequencyData();for(let m=0;m<h.length;m++)o+=h[m];return o/h.length}}class VA{constructor(o,h,m){this.binding=o,this.valueSize=m;let v,C,b;switch(h){case"quaternion":v=this._slerp,C=this._slerpAdditive,b=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(m*6),this._workIndex=5;break;case"string":case"bool":v=this._select,C=this._select,b=this._setAdditiveIdentityOther,this.buffer=new Array(m*5);break;default:v=this._lerp,C=this._lerpAdditive,b=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(m*5)}this._mixBufferRegion=v,this._mixBufferRegionAdditive=C,this._setIdentity=b,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(o,h){const m=this.buffer,v=this.valueSize,C=o*v+v;let b=this.cumulativeWeight;if(b===0){for(let L=0;L!==v;++L)m[C+L]=m[L];b=h}else{b+=h;const L=h/b;this._mixBufferRegion(m,C,0,L,v)}this.cumulativeWeight=b}accumulateAdditive(o){const h=this.buffer,m=this.valueSize,v=m*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(h,v,0,o,m),this.cumulativeWeightAdditive+=o}apply(o){const h=this.valueSize,m=this.buffer,v=o*h+h,C=this.cumulativeWeight,b=this.cumulativeWeightAdditive,L=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,C<1){const W=h*this._origIndex;this._mixBufferRegion(m,v,W,1-C,h)}b>0&&this._mixBufferRegionAdditive(m,v,this._addIndex*h,1,h);for(let W=h,J=h+h;W!==J;++W)if(m[W]!==m[W+h]){L.setValue(m,v);break}}saveOriginalState(){const o=this.binding,h=this.buffer,m=this.valueSize,v=m*this._origIndex;o.getValue(h,v);for(let C=m,b=v;C!==b;++C)h[C]=h[v+C%m];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const o=this.valueSize*3;this.binding.setValue(this.buffer,o)}_setAdditiveIdentityNumeric(){const o=this._addIndex*this.valueSize,h=o+this.valueSize;for(let m=o;m<h;m++)this.buffer[m]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const o=this._origIndex*this.valueSize,h=this._addIndex*this.valueSize;for(let m=0;m<this.valueSize;m++)this.buffer[h+m]=this.buffer[o+m]}_select(o,h,m,v,C){if(v>=.5)for(let b=0;b!==C;++b)o[h+b]=o[m+b]}_slerp(o,h,m,v){xr.slerpFlat(o,h,o,h,o,m,v)}_slerpAdditive(o,h,m,v,C){const b=this._workIndex*C;xr.multiplyQuaternionsFlat(o,b,o,h,o,m),xr.slerpFlat(o,h,o,h,o,b,v)}_lerp(o,h,m,v,C){const b=1-v;for(let L=0;L!==C;++L){const W=h+L;o[W]=o[W]*b+o[m+L]*v}}_lerpAdditive(o,h,m,v,C){for(let b=0;b!==C;++b){const L=h+b;o[L]=o[L]+o[m+b]*v}}}const $2="\\[\\]\\.:\\/",V3=new RegExp("["+$2+"]","g"),j2="[^"+$2+"]",z3="[^"+$2.replace("\\.","")+"]",W3=/((?:WC+[\/:])*)/.source.replace("WC",j2),K3=/(WCOD+)?/.source.replace("WCOD",z3),X3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",j2),Y3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",j2),q3=new RegExp("^"+W3+K3+X3+Y3+"$"),J3=["material","materials","bones","map"];class Z3{constructor(o,h,m){const v=m||ss.parseTrackName(h);this._targetGroup=o,this._bindings=o.subscribe_(h,v)}getValue(o,h){this.bind();const m=this._targetGroup.nCachedObjects_,v=this._bindings[m];v!==void 0&&v.getValue(o,h)}setValue(o,h){const m=this._bindings;for(let v=this._targetGroup.nCachedObjects_,C=m.length;v!==C;++v)m[v].setValue(o,h)}bind(){const o=this._bindings;for(let h=this._targetGroup.nCachedObjects_,m=o.length;h!==m;++h)o[h].bind()}unbind(){const o=this._bindings;for(let h=this._targetGroup.nCachedObjects_,m=o.length;h!==m;++h)o[h].unbind()}}class ss{constructor(o,h,m){this.path=h,this.parsedPath=m||ss.parseTrackName(h),this.node=ss.findNode(o,this.parsedPath.nodeName),this.rootNode=o,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(o,h,m){return o&&o.isAnimationObjectGroup?new ss.Composite(o,h,m):new ss(o,h,m)}static sanitizeNodeName(o){return o.replace(/\s/g,"_").replace(V3,"")}static parseTrackName(o){const h=q3.exec(o);if(h===null)throw new Error("PropertyBinding: Cannot parse trackName: "+o);const m={nodeName:h[2],objectName:h[3],objectIndex:h[4],propertyName:h[5],propertyIndex:h[6]},v=m.nodeName&&m.nodeName.lastIndexOf(".");if(v!==void 0&&v!==-1){const C=m.nodeName.substring(v+1);J3.indexOf(C)!==-1&&(m.nodeName=m.nodeName.substring(0,v),m.objectName=C)}if(m.propertyName===null||m.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+o);return m}static findNode(o,h){if(h===void 0||h===""||h==="."||h===-1||h===o.name||h===o.uuid)return o;if(o.skeleton){const m=o.skeleton.getBoneByName(h);if(m!==void 0)return m}if(o.children){const m=function(C){for(let b=0;b<C.length;b++){const L=C[b];if(L.name===h||L.uuid===h)return L;const W=m(L.children);if(W)return W}return null},v=m(o.children);if(v)return v}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(o,h){o[h]=this.targetObject[this.propertyName]}_getValue_array(o,h){const m=this.resolvedProperty;for(let v=0,C=m.length;v!==C;++v)o[h++]=m[v]}_getValue_arrayElement(o,h){o[h]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(o,h){this.resolvedProperty.toArray(o,h)}_setValue_direct(o,h){this.targetObject[this.propertyName]=o[h]}_setValue_direct_setNeedsUpdate(o,h){this.targetObject[this.propertyName]=o[h],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(o,h){this.targetObject[this.propertyName]=o[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(o,h){const m=this.resolvedProperty;for(let v=0,C=m.length;v!==C;++v)m[v]=o[h++]}_setValue_array_setNeedsUpdate(o,h){const m=this.resolvedProperty;for(let v=0,C=m.length;v!==C;++v)m[v]=o[h++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(o,h){const m=this.resolvedProperty;for(let v=0,C=m.length;v!==C;++v)m[v]=o[h++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(o,h){this.resolvedProperty[this.propertyIndex]=o[h]}_setValue_arrayElement_setNeedsUpdate(o,h){this.resolvedProperty[this.propertyIndex]=o[h],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(o,h){this.resolvedProperty[this.propertyIndex]=o[h],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(o,h){this.resolvedProperty.fromArray(o,h)}_setValue_fromArray_setNeedsUpdate(o,h){this.resolvedProperty.fromArray(o,h),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(o,h){this.resolvedProperty.fromArray(o,h),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(o,h){this.bind(),this.getValue(o,h)}_setValue_unbound(o,h){this.bind(),this.setValue(o,h)}bind(){let o=this.node;const h=this.parsedPath,m=h.objectName,v=h.propertyName;let C=h.propertyIndex;if(o||(o=ss.findNode(this.rootNode,h.nodeName),this.node=o),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!o){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(m){let J=h.objectIndex;switch(m){case"materials":if(!o.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!o.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}o=o.material.materials;break;case"bones":if(!o.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}o=o.skeleton.bones;for(let re=0;re<o.length;re++)if(o[re].name===J){J=re;break}break;case"map":if("map"in o){o=o.map;break}if(!o.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!o.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}o=o.material.map;break;default:if(o[m]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}o=o[m]}if(J!==void 0){if(o[J]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,o);return}o=o[J]}}const b=o[v];if(b===void 0){const J=h.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+J+"."+v+" but it wasn't found.",o);return}let L=this.Versioning.None;this.targetObject=o,o.needsUpdate!==void 0?L=this.Versioning.NeedsUpdate:o.matrixWorldNeedsUpdate!==void 0&&(L=this.Versioning.MatrixWorldNeedsUpdate);let W=this.BindingType.Direct;if(C!==void 0){if(v==="morphTargetInfluences"){if(!o.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!o.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}o.morphTargetDictionary[C]!==void 0&&(C=o.morphTargetDictionary[C])}W=this.BindingType.ArrayElement,this.resolvedProperty=b,this.propertyIndex=C}else b.fromArray!==void 0&&b.toArray!==void 0?(W=this.BindingType.HasFromToArray,this.resolvedProperty=b):Array.isArray(b)?(W=this.BindingType.EntireArray,this.resolvedProperty=b):this.propertyName=v;this.getValue=this.GetterByBindingType[W],this.setValue=this.SetterByBindingTypeAndVersioning[W][L]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ss.Composite=Z3,ss.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},ss.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},ss.prototype.GetterByBindingType=[ss.prototype._getValue_direct,ss.prototype._getValue_array,ss.prototype._getValue_arrayElement,ss.prototype._getValue_toArray],ss.prototype.SetterByBindingTypeAndVersioning=[[ss.prototype._setValue_direct,ss.prototype._setValue_direct_setNeedsUpdate,ss.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ss.prototype._setValue_array,ss.prototype._setValue_array_setNeedsUpdate,ss.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ss.prototype._setValue_arrayElement,ss.prototype._setValue_arrayElement_setNeedsUpdate,ss.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ss.prototype._setValue_fromArray,ss.prototype._setValue_fromArray_setNeedsUpdate,ss.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $3{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Wo(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const o={};this._indicesByUUID=o;for(let m=0,v=arguments.length;m!==v;++m)o[arguments[m].uuid]=m;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const h=this;this.stats={objects:{get total(){return h._objects.length},get inUse(){return this.total-h.nCachedObjects_}},get bindingsPerObject(){return h._bindings.length}}}add(){const o=this._objects,h=this._indicesByUUID,m=this._paths,v=this._parsedPaths,C=this._bindings,b=C.length;let L,W=o.length,J=this.nCachedObjects_;for(let re=0,ue=arguments.length;re!==ue;++re){const pe=arguments[re],ve=pe.uuid;let xe=h[ve];if(xe===void 0){xe=W++,h[ve]=xe,o.push(pe);for(let Le=0,Se=b;Le!==Se;++Le)C[Le].push(new ss(pe,m[Le],v[Le]))}else if(xe<J){L=o[xe];const Le=--J,Se=o[Le];h[Se.uuid]=xe,o[xe]=Se,h[ve]=Le,o[Le]=pe;for(let Ee=0,Ke=b;Ee!==Ke;++Ee){const Ge=C[Ee],Ue=Ge[Le];let Ct=Ge[xe];Ge[xe]=Ue,Ct===void 0&&(Ct=new ss(pe,m[Ee],v[Ee])),Ge[Le]=Ct}}else o[xe]!==L&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=J}remove(){const o=this._objects,h=this._indicesByUUID,m=this._bindings,v=m.length;let C=this.nCachedObjects_;for(let b=0,L=arguments.length;b!==L;++b){const W=arguments[b],J=W.uuid,re=h[J];if(re!==void 0&&re>=C){const ue=C++,pe=o[ue];h[pe.uuid]=re,o[re]=pe,h[J]=ue,o[ue]=W;for(let ve=0,xe=v;ve!==xe;++ve){const Le=m[ve],Se=Le[ue],Ee=Le[re];Le[re]=Se,Le[ue]=Ee}}}this.nCachedObjects_=C}uncache(){const o=this._objects,h=this._indicesByUUID,m=this._bindings,v=m.length;let C=this.nCachedObjects_,b=o.length;for(let L=0,W=arguments.length;L!==W;++L){const J=arguments[L],re=J.uuid,ue=h[re];if(ue!==void 0)if(delete h[re],ue<C){const pe=--C,ve=o[pe],xe=--b,Le=o[xe];h[ve.uuid]=ue,o[ue]=ve,h[Le.uuid]=pe,o[pe]=Le,o.pop();for(let Se=0,Ee=v;Se!==Ee;++Se){const Ke=m[Se],Ge=Ke[pe],Ue=Ke[xe];Ke[ue]=Ge,Ke[pe]=Ue,Ke.pop()}}else{const pe=--b,ve=o[pe];pe>0&&(h[ve.uuid]=ue),o[ue]=ve,o.pop();for(let xe=0,Le=v;xe!==Le;++xe){const Se=m[xe];Se[ue]=Se[pe],Se.pop()}}}this.nCachedObjects_=C}subscribe_(o,h){const m=this._bindingsIndicesByPath;let v=m[o];const C=this._bindings;if(v!==void 0)return C[v];const b=this._paths,L=this._parsedPaths,W=this._objects,J=W.length,re=this.nCachedObjects_,ue=new Array(J);v=C.length,m[o]=v,b.push(o),L.push(h),C.push(ue);for(let pe=re,ve=W.length;pe!==ve;++pe){const xe=W[pe];ue[pe]=new ss(xe,o,h)}return ue}unsubscribe_(o){const h=this._bindingsIndicesByPath,m=h[o];if(m!==void 0){const v=this._paths,C=this._parsedPaths,b=this._bindings,L=b.length-1,W=b[L],J=o[L];h[J]=m,b[m]=W,b.pop(),C[m]=C[L],C.pop(),v[m]=v[L],v.pop()}}}class zA{constructor(o,h,m=null,v=h.blendMode){this._mixer=o,this._clip=h,this._localRoot=m,this.blendMode=v;const C=h.tracks,b=C.length,L=new Array(b),W={endingStart:Os,endingEnd:Os};for(let J=0;J!==b;++J){const re=C[J].createInterpolant(null);L[J]=re,re.settings=W}this._interpolantSettings=W,this._interpolants=L,this._propertyBindings=new Array(b),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Vr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(o){return this._startTime=o,this}setLoop(o,h){return this.loop=o,this.repetitions=h,this}setEffectiveWeight(o){return this.weight=o,this._effectiveWeight=this.enabled?o:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(o){return this._scheduleFading(o,0,1)}fadeOut(o){return this._scheduleFading(o,1,0)}crossFadeFrom(o,h,m){if(o.fadeOut(h),this.fadeIn(h),m){const v=this._clip.duration,C=o._clip.duration,b=C/v,L=v/C;o.warp(1,b,h),this.warp(L,1,h)}return this}crossFadeTo(o,h,m){return o.crossFadeFrom(this,h,m)}stopFading(){const o=this._weightInterpolant;return o!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(o)),this}setEffectiveTimeScale(o){return this.timeScale=o,this._effectiveTimeScale=this.paused?0:o,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(o){return this.timeScale=this._clip.duration/o,this.stopWarping()}syncWith(o){return this.time=o.time,this.timeScale=o.timeScale,this.stopWarping()}halt(o){return this.warp(this._effectiveTimeScale,0,o)}warp(o,h,m){const v=this._mixer,C=v.time,b=this.timeScale;let L=this._timeScaleInterpolant;L===null&&(L=v._lendControlInterpolant(),this._timeScaleInterpolant=L);const W=L.parameterPositions,J=L.sampleValues;return W[0]=C,W[1]=C+m,J[0]=o/b,J[1]=h/b,this}stopWarping(){const o=this._timeScaleInterpolant;return o!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(o)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(o,h,m,v){if(!this.enabled){this._updateWeight(o);return}const C=this._startTime;if(C!==null){const W=(o-C)*m;W<0||m===0?h=0:(this._startTime=null,h=m*W)}h*=this._updateTimeScale(o);const b=this._updateTime(h),L=this._updateWeight(o);if(L>0){const W=this._interpolants,J=this._propertyBindings;switch(this.blendMode){case r0:for(let re=0,ue=W.length;re!==ue;++re)W[re].evaluate(b),J[re].accumulateAdditive(L);break;case D0:default:for(let re=0,ue=W.length;re!==ue;++re)W[re].evaluate(b),J[re].accumulate(v,L)}}}_updateWeight(o){let h=0;if(this.enabled){h=this.weight;const m=this._weightInterpolant;if(m!==null){const v=m.evaluate(o)[0];h*=v,o>m.parameterPositions[1]&&(this.stopFading(),v===0&&(this.enabled=!1))}}return this._effectiveWeight=h,h}_updateTimeScale(o){let h=0;if(!this.paused){h=this.timeScale;const m=this._timeScaleInterpolant;if(m!==null){const v=m.evaluate(o)[0];h*=v,o>m.parameterPositions[1]&&(this.stopWarping(),h===0?this.paused=!0:this.timeScale=h)}}return this._effectiveTimeScale=h,h}_updateTime(o){const h=this._clip.duration,m=this.loop;let v=this.time+o,C=this._loopCount;const b=m===qs;if(o===0)return C===-1?v:b&&(C&1)===1?h-v:v;if(m===ls){C===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(v>=h)v=h;else if(v<0)v=0;else{this.time=v;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=v,this._mixer.dispatchEvent({type:"finished",action:this,direction:o<0?-1:1})}}else{if(C===-1&&(o>=0?(C=0,this._setEndings(!0,this.repetitions===0,b)):this._setEndings(this.repetitions===0,!0,b)),v>=h||v<0){const L=Math.floor(v/h);v-=h*L,C+=Math.abs(L);const W=this.repetitions-C;if(W<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,v=o>0?h:0,this.time=v,this._mixer.dispatchEvent({type:"finished",action:this,direction:o>0?1:-1});else{if(W===1){const J=o<0;this._setEndings(J,!J,b)}else this._setEndings(!1,!1,b);this._loopCount=C,this.time=v,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:L})}}else this.time=v;if(b&&(C&1)===1)return h-v}return v}_setEndings(o,h,m){const v=this._interpolantSettings;m?(v.endingStart=$s,v.endingEnd=$s):(o?v.endingStart=this.zeroSlopeAtStart?$s:Os:v.endingStart=p0,h?v.endingEnd=this.zeroSlopeAtEnd?$s:Os:v.endingEnd=p0)}_scheduleFading(o,h,m){const v=this._mixer,C=v.time;let b=this._weightInterpolant;b===null&&(b=v._lendControlInterpolant(),this._weightInterpolant=b);const L=b.parameterPositions,W=b.sampleValues;return L[0]=C,W[0]=h,L[1]=C+o,W[1]=m,this}}const j3=new Float32Array(1);class eg extends uo{constructor(o){super(),this._root=o,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(o,h){const m=o._localRoot||this._root,v=o._clip.tracks,C=v.length,b=o._propertyBindings,L=o._interpolants,W=m.uuid,J=this._bindingsByRootAndName;let re=J[W];re===void 0&&(re={},J[W]=re);for(let ue=0;ue!==C;++ue){const pe=v[ue],ve=pe.name;let xe=re[ve];if(xe!==void 0)++xe.referenceCount,b[ue]=xe;else{if(xe=b[ue],xe!==void 0){xe._cacheIndex===null&&(++xe.referenceCount,this._addInactiveBinding(xe,W,ve));continue}const Le=h&&h._propertyBindings[ue].binding.parsedPath;xe=new VA(ss.create(m,ve,Le),pe.ValueTypeName,pe.getValueSize()),++xe.referenceCount,this._addInactiveBinding(xe,W,ve),b[ue]=xe}L[ue].resultBuffer=xe.buffer}}_activateAction(o){if(!this._isActiveAction(o)){if(o._cacheIndex===null){const m=(o._localRoot||this._root).uuid,v=o._clip.uuid,C=this._actionsByClip[v];this._bindAction(o,C&&C.knownActions[0]),this._addInactiveAction(o,v,m)}const h=o._propertyBindings;for(let m=0,v=h.length;m!==v;++m){const C=h[m];C.useCount++===0&&(this._lendBinding(C),C.saveOriginalState())}this._lendAction(o)}}_deactivateAction(o){if(this._isActiveAction(o)){const h=o._propertyBindings;for(let m=0,v=h.length;m!==v;++m){const C=h[m];--C.useCount===0&&(C.restoreOriginalState(),this._takeBackBinding(C))}this._takeBackAction(o)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const o=this;this.stats={actions:{get total(){return o._actions.length},get inUse(){return o._nActiveActions}},bindings:{get total(){return o._bindings.length},get inUse(){return o._nActiveBindings}},controlInterpolants:{get total(){return o._controlInterpolants.length},get inUse(){return o._nActiveControlInterpolants}}}}_isActiveAction(o){const h=o._cacheIndex;return h!==null&&h<this._nActiveActions}_addInactiveAction(o,h,m){const v=this._actions,C=this._actionsByClip;let b=C[h];if(b===void 0)b={knownActions:[o],actionByRoot:{}},o._byClipCacheIndex=0,C[h]=b;else{const L=b.knownActions;o._byClipCacheIndex=L.length,L.push(o)}o._cacheIndex=v.length,v.push(o),b.actionByRoot[m]=o}_removeInactiveAction(o){const h=this._actions,m=h[h.length-1],v=o._cacheIndex;m._cacheIndex=v,h[v]=m,h.pop(),o._cacheIndex=null;const C=o._clip.uuid,b=this._actionsByClip,L=b[C],W=L.knownActions,J=W[W.length-1],re=o._byClipCacheIndex;J._byClipCacheIndex=re,W[re]=J,W.pop(),o._byClipCacheIndex=null;const ue=L.actionByRoot,pe=(o._localRoot||this._root).uuid;delete ue[pe],W.length===0&&delete b[C],this._removeInactiveBindingsForAction(o)}_removeInactiveBindingsForAction(o){const h=o._propertyBindings;for(let m=0,v=h.length;m!==v;++m){const C=h[m];--C.referenceCount===0&&this._removeInactiveBinding(C)}}_lendAction(o){const h=this._actions,m=o._cacheIndex,v=this._nActiveActions++,C=h[v];o._cacheIndex=v,h[v]=o,C._cacheIndex=m,h[m]=C}_takeBackAction(o){const h=this._actions,m=o._cacheIndex,v=--this._nActiveActions,C=h[v];o._cacheIndex=v,h[v]=o,C._cacheIndex=m,h[m]=C}_addInactiveBinding(o,h,m){const v=this._bindingsByRootAndName,C=this._bindings;let b=v[h];b===void 0&&(b={},v[h]=b),b[m]=o,o._cacheIndex=C.length,C.push(o)}_removeInactiveBinding(o){const h=this._bindings,m=o.binding,v=m.rootNode.uuid,C=m.path,b=this._bindingsByRootAndName,L=b[v],W=h[h.length-1],J=o._cacheIndex;W._cacheIndex=J,h[J]=W,h.pop(),delete L[C],Object.keys(L).length===0&&delete b[v]}_lendBinding(o){const h=this._bindings,m=o._cacheIndex,v=this._nActiveBindings++,C=h[v];o._cacheIndex=v,h[v]=o,C._cacheIndex=m,h[m]=C}_takeBackBinding(o){const h=this._bindings,m=o._cacheIndex,v=--this._nActiveBindings,C=h[v];o._cacheIndex=v,h[v]=o,C._cacheIndex=m,h[m]=C}_lendControlInterpolant(){const o=this._controlInterpolants,h=this._nActiveControlInterpolants++;let m=o[h];return m===void 0&&(m=new z2(new Float32Array(2),new Float32Array(2),1,j3),m.__cacheIndex=h,o[h]=m),m}_takeBackControlInterpolant(o){const h=this._controlInterpolants,m=o.__cacheIndex,v=--this._nActiveControlInterpolants,C=h[v];o.__cacheIndex=v,h[v]=o,C.__cacheIndex=m,h[m]=C}clipAction(o,h,m){const v=h||this._root,C=v.uuid;let b=typeof o=="string"?ff.findByName(v,o):o;const L=b!==null?b.uuid:o,W=this._actionsByClip[L];let J=null;if(m===void 0&&(b!==null?m=b.blendMode:m=D0),W!==void 0){const ue=W.actionByRoot[C];if(ue!==void 0&&ue.blendMode===m)return ue;J=W.knownActions[0],b===null&&(b=J._clip)}if(b===null)return null;const re=new zA(this,b,h,m);return this._bindAction(re,J),this._addInactiveAction(re,L,C),re}existingAction(o,h){const m=h||this._root,v=m.uuid,C=typeof o=="string"?ff.findByName(m,o):o,b=C?C.uuid:o,L=this._actionsByClip[b];return L!==void 0&&L.actionByRoot[v]||null}stopAllAction(){const o=this._actions,h=this._nActiveActions;for(let m=h-1;m>=0;--m)o[m].stop();return this}update(o){o*=this.timeScale;const h=this._actions,m=this._nActiveActions,v=this.time+=o,C=Math.sign(o),b=this._accuIndex^=1;for(let J=0;J!==m;++J)h[J]._update(v,o,C,b);const L=this._bindings,W=this._nActiveBindings;for(let J=0;J!==W;++J)L[J].apply(b);return this}setTime(o){this.time=0;for(let h=0;h<this._actions.length;h++)this._actions[h].time=0;return this.update(o)}getRoot(){return this._root}uncacheClip(o){const h=this._actions,m=o.uuid,v=this._actionsByClip,C=v[m];if(C!==void 0){const b=C.knownActions;for(let L=0,W=b.length;L!==W;++L){const J=b[L];this._deactivateAction(J);const re=J._cacheIndex,ue=h[h.length-1];J._cacheIndex=null,J._byClipCacheIndex=null,ue._cacheIndex=re,h[re]=ue,h.pop(),this._removeInactiveBindingsForAction(J)}delete v[m]}}uncacheRoot(o){const h=o.uuid,m=this._actionsByClip;for(const b in m){const L=m[b].actionByRoot,W=L[h];W!==void 0&&(this._deactivateAction(W),this._removeInactiveAction(W))}const v=this._bindingsByRootAndName,C=v[h];if(C!==void 0)for(const b in C){const L=C[b];L.restoreOriginalState(),this._removeInactiveBinding(L)}}uncacheAction(o,h){const m=this.existingAction(o,h);m!==null&&(this._deactivateAction(m),this._removeInactiveAction(m))}}class ep{constructor(o){this.value=o}clone(){return new ep(this.value.clone===void 0?this.value:this.value.clone())}}let tg=0;class ig extends uo{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:tg++}),this.name="",this.usage=Ga,this.uniforms=[]}add(o){return this.uniforms.push(o),this}remove(o){const h=this.uniforms.indexOf(o);return h!==-1&&this.uniforms.splice(h,1),this}setName(o){return this.name=o,this}setUsage(o){return this.usage=o,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(o){this.name=o.name,this.usage=o.usage;const h=o.uniforms;this.uniforms.length=0;for(let m=0,v=h.length;m<v;m++){const C=Array.isArray(h[m])?h[m]:[h[m]];for(let b=0;b<C.length;b++)this.uniforms.push(C[b].clone())}return this}clone(){return new this.constructor().copy(this)}}class ng extends wf{constructor(o,h,m=1){super(o,h),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=m}copy(o){return super.copy(o),this.meshPerAttribute=o.meshPerAttribute,this}clone(o){const h=super.clone(o);return h.meshPerAttribute=this.meshPerAttribute,h}toJSON(o){const h=super.toJSON(o);return h.isInstancedInterleavedBuffer=!0,h.meshPerAttribute=this.meshPerAttribute,h}}class rg{constructor(o,h,m,v,C){this.isGLBufferAttribute=!0,this.name="",this.buffer=o,this.type=h,this.itemSize=m,this.elementSize=v,this.count=C,this.version=0}set needsUpdate(o){o===!0&&this.version++}setBuffer(o){return this.buffer=o,this}setType(o,h){return this.type=o,this.elementSize=h,this}setItemSize(o){return this.itemSize=o,this}setCount(o){return this.count=o,this}}const WA=new on;class sg{constructor(o,h,m=0,v=1/0){this.ray=new Is(o,h),this.near=m,this.far=v,this.camera=null,this.layers=new xa,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(o,h){this.ray.set(o,h)}setFromCamera(o,h){h.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(h.matrixWorld),this.ray.direction.set(o.x,o.y,.5).unproject(h).sub(this.ray.origin).normalize(),this.camera=h):h.isOrthographicCamera?(this.ray.origin.set(o.x,o.y,(h.near+h.far)/(h.near-h.far)).unproject(h),this.ray.direction.set(0,0,-1).transformDirection(h.matrixWorld),this.camera=h):console.error("THREE.Raycaster: Unsupported camera type: "+h.type)}setFromXRController(o){return WA.identity().extractRotation(o.matrixWorld),this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(WA),this}intersectObject(o,h=!0,m=[]){return tp(o,this,m,h),m.sort(KA),m}intersectObjects(o,h=!0,m=[]){for(let v=0,C=o.length;v<C;v++)tp(o[v],this,m,h);return m.sort(KA),m}}function KA(x,o){return x.distance-o.distance}function tp(x,o,h,m){if(x.layers.test(o.layers)&&x.raycast(o,h),m===!0){const v=x.children;for(let C=0,b=v.length;C<b;C++)tp(v[C],o,h,!0)}}class og{constructor(o=1,h=0,m=0){return this.radius=o,this.phi=h,this.theta=m,this}set(o,h,m){return this.radius=o,this.phi=h,this.theta=m,this}copy(o){return this.radius=o.radius,this.phi=o.phi,this.theta=o.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(o){return this.setFromCartesianCoords(o.x,o.y,o.z)}setFromCartesianCoords(o,h,m){return this.radius=Math.sqrt(o*o+h*h+m*m),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(o,m),this.phi=Math.acos(Ts(h/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ag{constructor(o=1,h=0,m=0){return this.radius=o,this.theta=h,this.y=m,this}set(o,h,m){return this.radius=o,this.theta=h,this.y=m,this}copy(o){return this.radius=o.radius,this.theta=o.theta,this.y=o.y,this}setFromVector3(o){return this.setFromCartesianCoords(o.x,o.y,o.z)}setFromCartesianCoords(o,h,m){return this.radius=Math.sqrt(o*o+m*m),this.theta=Math.atan2(o,m),this.y=h,this}clone(){return new this.constructor().copy(this)}}const XA=new vi;class lg{constructor(o=new vi(1/0,1/0),h=new vi(-1/0,-1/0)){this.isBox2=!0,this.min=o,this.max=h}set(o,h){return this.min.copy(o),this.max.copy(h),this}setFromPoints(o){this.makeEmpty();for(let h=0,m=o.length;h<m;h++)this.expandByPoint(o[h]);return this}setFromCenterAndSize(o,h){const m=XA.copy(h).multiplyScalar(.5);return this.min.copy(o).sub(m),this.max.copy(o).add(m),this}clone(){return new this.constructor().copy(this)}copy(o){return this.min.copy(o.min),this.max.copy(o.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(o){return this.isEmpty()?o.set(0,0):o.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(o){return this.isEmpty()?o.set(0,0):o.subVectors(this.max,this.min)}expandByPoint(o){return this.min.min(o),this.max.max(o),this}expandByVector(o){return this.min.sub(o),this.max.add(o),this}expandByScalar(o){return this.min.addScalar(-o),this.max.addScalar(o),this}containsPoint(o){return!(o.x<this.min.x||o.x>this.max.x||o.y<this.min.y||o.y>this.max.y)}containsBox(o){return this.min.x<=o.min.x&&o.max.x<=this.max.x&&this.min.y<=o.min.y&&o.max.y<=this.max.y}getParameter(o,h){return h.set((o.x-this.min.x)/(this.max.x-this.min.x),(o.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(o){return!(o.max.x<this.min.x||o.min.x>this.max.x||o.max.y<this.min.y||o.min.y>this.max.y)}clampPoint(o,h){return h.copy(o).clamp(this.min,this.max)}distanceToPoint(o){return this.clampPoint(o,XA).distanceTo(o)}intersect(o){return this.min.max(o.min),this.max.min(o.max),this.isEmpty()&&this.makeEmpty(),this}union(o){return this.min.min(o.min),this.max.max(o.max),this}translate(o){return this.min.add(o),this.max.add(o),this}equals(o){return o.min.equals(this.min)&&o.max.equals(this.max)}}const YA=new nt,a2=new nt;class cg{constructor(o=new nt,h=new nt){this.start=o,this.end=h}set(o,h){return this.start.copy(o),this.end.copy(h),this}copy(o){return this.start.copy(o.start),this.end.copy(o.end),this}getCenter(o){return o.addVectors(this.start,this.end).multiplyScalar(.5)}delta(o){return o.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(o,h){return this.delta(h).multiplyScalar(o).add(this.start)}closestPointToPointParameter(o,h){YA.subVectors(o,this.start),a2.subVectors(this.end,this.start);const m=a2.dot(a2);let C=a2.dot(YA)/m;return h&&(C=Ts(C,0,1)),C}closestPointToPoint(o,h,m){const v=this.closestPointToPointParameter(o,h);return this.delta(m).multiplyScalar(v).add(this.start)}applyMatrix4(o){return this.start.applyMatrix4(o),this.end.applyMatrix4(o),this}equals(o){return o.start.equals(this.start)&&o.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const qA=new nt;class ug extends Nr{constructor(o,h){super(),this.light=o,this.matrixAutoUpdate=!1,this.color=h,this.type="SpotLightHelper";const m=new rr,v=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let b=0,L=1,W=32;b<W;b++,L++){const J=b/W*Math.PI*2,re=L/W*Math.PI*2;v.push(Math.cos(J),Math.sin(J),1,Math.cos(re),Math.sin(re),1)}m.setAttribute("position",new Ai(v,3));const C=new la({fog:!1,toneMapped:!1});this.cone=new m1(m,C),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const o=this.light.distance?this.light.distance:1e3,h=o*Math.tan(this.light.angle);this.cone.scale.set(h,h,o),qA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(qA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qc=new nt,l2=new on,ip=new on;class hg extends m1{constructor(o){const h=JA(o),m=new rr,v=[],C=[],b=new un(0,0,1),L=new un(0,1,0);for(let J=0;J<h.length;J++){const re=h[J];re.parent&&re.parent.isBone&&(v.push(0,0,0),v.push(0,0,0),C.push(b.r,b.g,b.b),C.push(L.r,L.g,L.b))}m.setAttribute("position",new Ai(v,3)),m.setAttribute("color",new Ai(C,3));const W=new la({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(m,W),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=o,this.bones=h,this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(o){const h=this.bones,m=this.geometry,v=m.getAttribute("position");ip.copy(this.root.matrixWorld).invert();for(let C=0,b=0;C<h.length;C++){const L=h[C];L.parent&&L.parent.isBone&&(l2.multiplyMatrices(ip,L.matrixWorld),qc.setFromMatrixPosition(l2),v.setXYZ(b,qc.x,qc.y,qc.z),l2.multiplyMatrices(ip,L.parent.matrixWorld),qc.setFromMatrixPosition(l2),v.setXYZ(b+1,qc.x,qc.y,qc.z),b+=2)}m.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(o)}dispose(){this.geometry.dispose(),this.material.dispose()}}function JA(x){const o=[];x.isBone===!0&&o.push(x);for(let h=0;h<x.children.length;h++)o.push.apply(o,JA(x.children[h]));return o}class dg extends Bs{constructor(o,h,m){const v=new cf(h,4,2),C=new es({wireframe:!0,fog:!1,toneMapped:!1});super(v,C),this.light=o,this.color=m,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const fg=new nt,ZA=new un,$A=new un;class pg extends Nr{constructor(o,h,m){super(),this.light=o,this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1,this.color=m,this.type="HemisphereLightHelper";const v=new lf(h);v.rotateY(Math.PI*.5),this.material=new es({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const C=v.getAttribute("position"),b=new Float32Array(C.count*3);v.setAttribute("color",new Zr(b,3)),this.add(new Bs(v,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const o=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const h=o.geometry.getAttribute("color");ZA.copy(this.light.color),$A.copy(this.light.groundColor);for(let m=0,v=h.count;m<v;m++){const C=m<v/2?ZA:$A;h.setXYZ(m,C.r,C.g,C.b)}h.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),o.lookAt(fg.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Ag extends m1{constructor(o=10,h=10,m=4473924,v=8947848){m=new un(m),v=new un(v);const C=h/2,b=o/h,L=o/2,W=[],J=[];for(let pe=0,ve=0,xe=-L;pe<=h;pe++,xe+=b){W.push(-L,0,xe,L,0,xe),W.push(xe,0,-L,xe,0,L);const Le=pe===C?m:v;Le.toArray(J,ve),ve+=3,Le.toArray(J,ve),ve+=3,Le.toArray(J,ve),ve+=3,Le.toArray(J,ve),ve+=3}const re=new rr;re.setAttribute("position",new Ai(W,3)),re.setAttribute("color",new Ai(J,3));const ue=new la({vertexColors:!0,toneMapped:!1});super(re,ue),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class mg extends m1{constructor(o=10,h=16,m=8,v=64,C=4473924,b=8947848){C=new un(C),b=new un(b);const L=[],W=[];if(h>1)for(let ue=0;ue<h;ue++){const pe=ue/h*(Math.PI*2),ve=Math.sin(pe)*o,xe=Math.cos(pe)*o;L.push(0,0,0),L.push(ve,0,xe);const Le=ue&1?C:b;W.push(Le.r,Le.g,Le.b),W.push(Le.r,Le.g,Le.b)}for(let ue=0;ue<m;ue++){const pe=ue&1?C:b,ve=o-o/m*ue;for(let xe=0;xe<v;xe++){let Le=xe/v*(Math.PI*2),Se=Math.sin(Le)*ve,Ee=Math.cos(Le)*ve;L.push(Se,0,Ee),W.push(pe.r,pe.g,pe.b),Le=(xe+1)/v*(Math.PI*2),Se=Math.sin(Le)*ve,Ee=Math.cos(Le)*ve,L.push(Se,0,Ee),W.push(pe.r,pe.g,pe.b)}}const J=new rr;J.setAttribute("position",new Ai(L,3)),J.setAttribute("color",new Ai(W,3));const re=new la({vertexColors:!0,toneMapped:!1});super(J,re),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const jA=new nt,c2=new nt,em=new nt;class gg extends Nr{constructor(o,h,m){super(),this.light=o,this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1,this.color=m,this.type="DirectionalLightHelper",h===void 0&&(h=1);let v=new rr;v.setAttribute("position",new Ai([-h,h,0,h,h,0,h,-h,0,-h,-h,0,-h,h,0],3));const C=new la({fog:!1,toneMapped:!1});this.lightPlane=new Kc(v,C),this.add(this.lightPlane),v=new rr,v.setAttribute("position",new Ai([0,0,0,0,0,1],3)),this.targetLine=new Kc(v,C),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),jA.setFromMatrixPosition(this.light.matrixWorld),c2.setFromMatrixPosition(this.light.target.matrixWorld),em.subVectors(c2,jA),this.lightPlane.lookAt(c2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(c2),this.targetLine.scale.z=em.length()}}const u2=new nt,Oo=new Ba;class vg extends m1{constructor(o){const h=new rr,m=new la({color:16777215,vertexColors:!0,toneMapped:!1}),v=[],C=[],b={};L("n1","n2"),L("n2","n4"),L("n4","n3"),L("n3","n1"),L("f1","f2"),L("f2","f4"),L("f4","f3"),L("f3","f1"),L("n1","f1"),L("n2","f2"),L("n3","f3"),L("n4","f4"),L("p","n1"),L("p","n2"),L("p","n3"),L("p","n4"),L("u1","u2"),L("u2","u3"),L("u3","u1"),L("c","t"),L("p","c"),L("cn1","cn2"),L("cn3","cn4"),L("cf1","cf2"),L("cf3","cf4");function L(xe,Le){W(xe),W(Le)}function W(xe){v.push(0,0,0),C.push(0,0,0),b[xe]===void 0&&(b[xe]=[]),b[xe].push(v.length/3-1)}h.setAttribute("position",new Ai(v,3)),h.setAttribute("color",new Ai(C,3)),super(h,m),this.type="CameraHelper",this.camera=o,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=b,this.update();const J=new un(16755200),re=new un(16711680),ue=new un(43775),pe=new un(16777215),ve=new un(3355443);this.setColors(J,re,ue,pe,ve)}setColors(o,h,m,v,C){const L=this.geometry.getAttribute("color");L.setXYZ(0,o.r,o.g,o.b),L.setXYZ(1,o.r,o.g,o.b),L.setXYZ(2,o.r,o.g,o.b),L.setXYZ(3,o.r,o.g,o.b),L.setXYZ(4,o.r,o.g,o.b),L.setXYZ(5,o.r,o.g,o.b),L.setXYZ(6,o.r,o.g,o.b),L.setXYZ(7,o.r,o.g,o.b),L.setXYZ(8,o.r,o.g,o.b),L.setXYZ(9,o.r,o.g,o.b),L.setXYZ(10,o.r,o.g,o.b),L.setXYZ(11,o.r,o.g,o.b),L.setXYZ(12,o.r,o.g,o.b),L.setXYZ(13,o.r,o.g,o.b),L.setXYZ(14,o.r,o.g,o.b),L.setXYZ(15,o.r,o.g,o.b),L.setXYZ(16,o.r,o.g,o.b),L.setXYZ(17,o.r,o.g,o.b),L.setXYZ(18,o.r,o.g,o.b),L.setXYZ(19,o.r,o.g,o.b),L.setXYZ(20,o.r,o.g,o.b),L.setXYZ(21,o.r,o.g,o.b),L.setXYZ(22,o.r,o.g,o.b),L.setXYZ(23,o.r,o.g,o.b),L.setXYZ(24,h.r,h.g,h.b),L.setXYZ(25,h.r,h.g,h.b),L.setXYZ(26,h.r,h.g,h.b),L.setXYZ(27,h.r,h.g,h.b),L.setXYZ(28,h.r,h.g,h.b),L.setXYZ(29,h.r,h.g,h.b),L.setXYZ(30,h.r,h.g,h.b),L.setXYZ(31,h.r,h.g,h.b),L.setXYZ(32,m.r,m.g,m.b),L.setXYZ(33,m.r,m.g,m.b),L.setXYZ(34,m.r,m.g,m.b),L.setXYZ(35,m.r,m.g,m.b),L.setXYZ(36,m.r,m.g,m.b),L.setXYZ(37,m.r,m.g,m.b),L.setXYZ(38,v.r,v.g,v.b),L.setXYZ(39,v.r,v.g,v.b),L.setXYZ(40,C.r,C.g,C.b),L.setXYZ(41,C.r,C.g,C.b),L.setXYZ(42,C.r,C.g,C.b),L.setXYZ(43,C.r,C.g,C.b),L.setXYZ(44,C.r,C.g,C.b),L.setXYZ(45,C.r,C.g,C.b),L.setXYZ(46,C.r,C.g,C.b),L.setXYZ(47,C.r,C.g,C.b),L.setXYZ(48,C.r,C.g,C.b),L.setXYZ(49,C.r,C.g,C.b),L.needsUpdate=!0}update(){const o=this.geometry,h=this.pointMap,m=1,v=1;Oo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Qo("c",h,o,Oo,0,0,-1),Qo("t",h,o,Oo,0,0,1),Qo("n1",h,o,Oo,-1,-1,-1),Qo("n2",h,o,Oo,m,-1,-1),Qo("n3",h,o,Oo,-1,v,-1),Qo("n4",h,o,Oo,m,v,-1),Qo("f1",h,o,Oo,-1,-1,1),Qo("f2",h,o,Oo,m,-1,1),Qo("f3",h,o,Oo,-1,v,1),Qo("f4",h,o,Oo,m,v,1),Qo("u1",h,o,Oo,m*.7,v*1.1,-1),Qo("u2",h,o,Oo,-.7,v*1.1,-1),Qo("u3",h,o,Oo,0,v*2,-1),Qo("cf1",h,o,Oo,-1,0,1),Qo("cf2",h,o,Oo,m,0,1),Qo("cf3",h,o,Oo,0,-1,1),Qo("cf4",h,o,Oo,0,v,1),Qo("cn1",h,o,Oo,-1,0,-1),Qo("cn2",h,o,Oo,m,0,-1),Qo("cn3",h,o,Oo,0,-1,-1),Qo("cn4",h,o,Oo,0,v,-1),o.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Qo(x,o,h,m,v,C,b){u2.set(v,C,b).unproject(m);const L=o[x];if(L!==void 0){const W=h.getAttribute("position");for(let J=0,re=L.length;J<re;J++)W.setXYZ(L[J],u2.x,u2.y,u2.z)}}const h2=new jn;class Eg extends m1{constructor(o,h=16776960){const m=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),v=new Float32Array(8*3),C=new rr;C.setIndex(new Zr(m,1)),C.setAttribute("position",new Zr(v,3)),super(C,new la({color:h,toneMapped:!1})),this.object=o,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(o){if(o!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&h2.setFromObject(this.object),h2.isEmpty())return;const h=h2.min,m=h2.max,v=this.geometry.attributes.position,C=v.array;C[0]=m.x,C[1]=m.y,C[2]=m.z,C[3]=h.x,C[4]=m.y,C[5]=m.z,C[6]=h.x,C[7]=h.y,C[8]=m.z,C[9]=m.x,C[10]=h.y,C[11]=m.z,C[12]=m.x,C[13]=m.y,C[14]=h.z,C[15]=h.x,C[16]=m.y,C[17]=h.z,C[18]=h.x,C[19]=h.y,C[20]=h.z,C[21]=m.x,C[22]=h.y,C[23]=h.z,v.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(o){return this.object=o,this.update(),this}copy(o,h){return super.copy(o,h),this.object=o.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class yg extends m1{constructor(o,h=16776960){const m=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),v=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],C=new rr;C.setIndex(new Zr(m,1)),C.setAttribute("position",new Ai(v,3)),super(C,new la({color:h,toneMapped:!1})),this.box=o,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(o){const h=this.box;h.isEmpty()||(h.getCenter(this.position),h.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(o))}dispose(){this.geometry.dispose(),this.material.dispose()}}class wg extends Kc{constructor(o,h=1,m=16776960){const v=m,C=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],b=new rr;b.setAttribute("position",new Ai(C,3)),b.computeBoundingSphere(),super(b,new la({color:v,toneMapped:!1})),this.type="PlaneHelper",this.plane=o,this.size=h;const L=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],W=new rr;W.setAttribute("position",new Ai(L,3)),W.computeBoundingSphere(),this.add(new Bs(W,new es({color:v,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(o){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(o)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const tm=new nt;let d2,np;class Cg extends Nr{constructor(o=new nt(0,0,1),h=new nt(0,0,0),m=1,v=16776960,C=m*.2,b=C*.2){super(),this.type="ArrowHelper",d2===void 0&&(d2=new rr,d2.setAttribute("position",new Ai([0,0,0,0,1,0],3)),np=new Md(0,.5,1,5,1),np.translate(0,-.5,0)),this.position.copy(h),this.line=new Kc(d2,new la({color:v,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Bs(np,new es({color:v,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(o),this.setLength(m,C,b)}setDirection(o){if(o.y>.99999)this.quaternion.set(0,0,0,1);else if(o.y<-.99999)this.quaternion.set(1,0,0,0);else{tm.set(o.z,0,-o.x).normalize();const h=Math.acos(o.y);this.quaternion.setFromAxisAngle(tm,h)}}setLength(o,h=o*.2,m=h*.2){this.line.scale.set(1,Math.max(1e-4,o-h),1),this.line.updateMatrix(),this.cone.scale.set(m,h,m),this.cone.position.y=o,this.cone.updateMatrix()}setColor(o){this.line.material.color.set(o),this.cone.material.color.set(o)}copy(o){return super.copy(o,!1),this.line.copy(o.line),this.cone.copy(o.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class _g extends m1{constructor(o=1){const h=[0,0,0,o,0,0,0,0,0,0,o,0,0,0,0,0,0,o],m=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],v=new rr;v.setAttribute("position",new Ai(h,3)),v.setAttribute("color",new Ai(m,3));const C=new la({vertexColors:!0,toneMapped:!1});super(v,C),this.type="AxesHelper"}setColors(o,h,m){const v=new un,C=this.geometry.attributes.color.array;return v.set(o),v.toArray(C,0),v.toArray(C,3),v.set(h),v.toArray(C,6),v.toArray(C,9),v.set(m),v.toArray(C,12),v.toArray(C,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class xg{constructor(){this.type="ShapePath",this.color=new un,this.subPaths=[],this.currentPath=null}moveTo(o,h){return this.currentPath=new nf,this.subPaths.push(this.currentPath),this.currentPath.moveTo(o,h),this}lineTo(o,h){return this.currentPath.lineTo(o,h),this}quadraticCurveTo(o,h,m,v){return this.currentPath.quadraticCurveTo(o,h,m,v),this}bezierCurveTo(o,h,m,v,C,b){return this.currentPath.bezierCurveTo(o,h,m,v,C,b),this}splineThru(o){return this.currentPath.splineThru(o),this}toShapes(o){function h(Ee){const Ke=[];for(let Ge=0,Ue=Ee.length;Ge<Ue;Ge++){const Ct=Ee[Ge],at=new oh;at.curves=Ct.curves,Ke.push(at)}return Ke}function m(Ee,Ke){const Ge=Ke.length;let Ue=!1;for(let Ct=Ge-1,at=0;at<Ge;Ct=at++){let ft=Ke[Ct],yt=Ke[at],et=yt.x-ft.x,qe=yt.y-ft.y;if(Math.abs(qe)>Number.EPSILON){if(qe<0&&(ft=Ke[at],et=-et,yt=Ke[Ct],qe=-qe),Ee.y<ft.y||Ee.y>yt.y)continue;if(Ee.y===ft.y){if(Ee.x===ft.x)return!0}else{const wt=qe*(Ee.x-ft.x)-et*(Ee.y-ft.y);if(wt===0)return!0;if(wt<0)continue;Ue=!Ue}}else{if(Ee.y!==ft.y)continue;if(yt.x<=Ee.x&&Ee.x<=ft.x||ft.x<=Ee.x&&Ee.x<=yt.x)return!0}}return Ue}const v=g1.isClockWise,C=this.subPaths;if(C.length===0)return[];let b,L,W;const J=[];if(C.length===1)return L=C[0],W=new oh,W.curves=L.curves,J.push(W),J;let re=!v(C[0].getPoints());re=o?!re:re;const ue=[],pe=[];let ve=[],xe=0,Le;pe[xe]=void 0,ve[xe]=[];for(let Ee=0,Ke=C.length;Ee<Ke;Ee++)L=C[Ee],Le=L.getPoints(),b=v(Le),b=o?!b:b,b?(!re&&pe[xe]&&xe++,pe[xe]={s:new oh,p:Le},pe[xe].s.curves=L.curves,re&&xe++,ve[xe]=[]):ve[xe].push({h:L,p:Le[0]});if(!pe[0])return h(C);if(pe.length>1){let Ee=!1,Ke=0;for(let Ge=0,Ue=pe.length;Ge<Ue;Ge++)ue[Ge]=[];for(let Ge=0,Ue=pe.length;Ge<Ue;Ge++){const Ct=ve[Ge];for(let at=0;at<Ct.length;at++){const ft=Ct[at];let yt=!0;for(let et=0;et<pe.length;et++)m(ft.p,pe[et].p)&&(Ge!==et&&Ke++,yt?(yt=!1,ue[et].push(ft)):Ee=!0);yt&&ue[Ge].push(ft)}}Ke>0&&Ee===!1&&(ve=ue)}let Se;for(let Ee=0,Ke=pe.length;Ee<Ke;Ee++){W=pe[Ee].s,J.push(W),Se=ve[Ee];for(let Ge=0,Ue=Se.length;Ge<Ue;Ge++)W.holes.push(Se[Ge].h)}return J}}class Mg extends js{constructor(o=1,h=1,m=1,v={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(o,h,{...v,count:m}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:p}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=p)},"./node_modules/three/examples/jsm/libs/ktx-parse.module.js":(ie,we,P)=>{P.r(we),P.d(we,{KHR_DF_CHANNEL_RGBSDA_ALPHA:()=>Co,KHR_DF_CHANNEL_RGBSDA_BLUE:()=>Wn,KHR_DF_CHANNEL_RGBSDA_DEPTH:()=>ts,KHR_DF_CHANNEL_RGBSDA_GREEN:()=>mr,KHR_DF_CHANNEL_RGBSDA_RED:()=>xs,KHR_DF_CHANNEL_RGBSDA_STENCIL:()=>Ms,KHR_DF_FLAG_ALPHA_PREMULTIPLIED:()=>de,KHR_DF_FLAG_ALPHA_STRAIGHT:()=>te,KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT:()=>Q,KHR_DF_MODEL_ASTC:()=>Z,KHR_DF_MODEL_ETC1:()=>k,KHR_DF_MODEL_ETC1S:()=>ne,KHR_DF_MODEL_ETC2:()=>G,KHR_DF_MODEL_RGBSDA:()=>N,KHR_DF_MODEL_UNSPECIFIED:()=>F,KHR_DF_PRIMARIES_ACES:()=>tr,KHR_DF_PRIMARIES_ACESCC:()=>Jn,KHR_DF_PRIMARIES_ADOBERGB:()=>je,KHR_DF_PRIMARIES_BT2020:()=>In,KHR_DF_PRIMARIES_BT601_EBU:()=>Qi,KHR_DF_PRIMARIES_BT601_SMPTE:()=>sn,KHR_DF_PRIMARIES_BT709:()=>ci,KHR_DF_PRIMARIES_CIEXYZ:()=>Xn,KHR_DF_PRIMARIES_DISPLAYP3:()=>Ir,KHR_DF_PRIMARIES_NTSC1953:()=>bn,KHR_DF_PRIMARIES_PAL525:()=>cr,KHR_DF_PRIMARIES_UNSPECIFIED:()=>Ci,KHR_DF_SAMPLE_DATATYPE_EXPONENT:()=>Ti,KHR_DF_SAMPLE_DATATYPE_FLOAT:()=>Us,KHR_DF_SAMPLE_DATATYPE_LINEAR:()=>Ye,KHR_DF_SAMPLE_DATATYPE_SIGNED:()=>Jr,KHR_DF_TRANSFER_ACESCC:()=>Rt,KHR_DF_TRANSFER_ACESCCT:()=>Yt,KHR_DF_TRANSFER_ADOBERGB:()=>zt,KHR_DF_TRANSFER_BT1886:()=>ke,KHR_DF_TRANSFER_DCIP3:()=>Ve,KHR_DF_TRANSFER_HLG_EOTF:()=>fe,KHR_DF_TRANSFER_HLG_OETF:()=>Ce,KHR_DF_TRANSFER_ITU:()=>Ne,KHR_DF_TRANSFER_LINEAR:()=>ye,KHR_DF_TRANSFER_NTSC:()=>Pe,KHR_DF_TRANSFER_PAL625_EOTF:()=>dt,KHR_DF_TRANSFER_PAL_OETF:()=>st,KHR_DF_TRANSFER_PQ_EOTF:()=>Oe,KHR_DF_TRANSFER_PQ_OETF:()=>Te,KHR_DF_TRANSFER_SLOG:()=>Qe,KHR_DF_TRANSFER_SLOG2:()=>De,KHR_DF_TRANSFER_SRGB:()=>Me,KHR_DF_TRANSFER_ST240:()=>Mt,KHR_DF_TRANSFER_UNSPECIFIED:()=>oe,KHR_DF_VENDORID_KHRONOS:()=>V,KHR_DF_VERSION:()=>T,KHR_SUPERCOMPRESSION_BASISLZ:()=>z,KHR_SUPERCOMPRESSION_NONE:()=>S,KHR_SUPERCOMPRESSION_ZLIB:()=>D,KHR_SUPERCOMPRESSION_ZSTD:()=>K,KTX2Container:()=>K0,VK_FORMAT_A1R5G5B5_UNORM_PACK16:()=>He,VK_FORMAT_A2B10G10R10_SINT_PACK32:()=>Tn,VK_FORMAT_A2B10G10R10_SNORM_PACK32:()=>nn,VK_FORMAT_A2B10G10R10_UINT_PACK32:()=>hi,VK_FORMAT_A2B10G10R10_UNORM_PACK32:()=>pn,VK_FORMAT_A2R10G10B10_SINT_PACK32:()=>Ii,VK_FORMAT_A2R10G10B10_SNORM_PACK32:()=>kt,VK_FORMAT_A2R10G10B10_UINT_PACK32:()=>di,VK_FORMAT_A2R10G10B10_UNORM_PACK32:()=>si,VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT:()=>wa,VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT:()=>ya,VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT:()=>Ea,VK_FORMAT_ASTC_10x10_SRGB_BLOCK:()=>Ts,VK_FORMAT_ASTC_10x10_UNORM_BLOCK:()=>Wo,VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT:()=>Gs,VK_FORMAT_ASTC_10x5_SRGB_BLOCK:()=>uo,VK_FORMAT_ASTC_10x5_UNORM_BLOCK:()=>Qa,VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT:()=>Ka,VK_FORMAT_ASTC_10x6_SRGB_BLOCK:()=>S1,VK_FORMAT_ASTC_10x6_UNORM_BLOCK:()=>Mo,VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT:()=>$l,VK_FORMAT_ASTC_10x8_SRGB_BLOCK:()=>Va,VK_FORMAT_ASTC_10x8_UNORM_BLOCK:()=>Aa,VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT:()=>R1,VK_FORMAT_ASTC_12x10_SRGB_BLOCK:()=>hu,VK_FORMAT_ASTC_12x10_UNORM_BLOCK:()=>ma,VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT:()=>jr,VK_FORMAT_ASTC_12x12_SRGB_BLOCK:()=>Sl,VK_FORMAT_ASTC_12x12_UNORM_BLOCK:()=>du,VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT:()=>Nn,VK_FORMAT_ASTC_4x4_SRGB_BLOCK:()=>sc,VK_FORMAT_ASTC_4x4_UNORM_BLOCK:()=>rc,VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT:()=>ga,VK_FORMAT_ASTC_5x4_SRGB_BLOCK:()=>ac,VK_FORMAT_ASTC_5x4_UNORM_BLOCK:()=>oc,VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT:()=>Jl,VK_FORMAT_ASTC_5x5_SRGB_BLOCK:()=>nu,VK_FORMAT_ASTC_5x5_UNORM_BLOCK:()=>Ga,VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT:()=>T1,VK_FORMAT_ASTC_6x5_SRGB_BLOCK:()=>su,VK_FORMAT_ASTC_6x5_UNORM_BLOCK:()=>ru,VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT:()=>va,VK_FORMAT_ASTC_6x6_SRGB_BLOCK:()=>ou,VK_FORMAT_ASTC_6x6_UNORM_BLOCK:()=>lc,VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT:()=>za,VK_FORMAT_ASTC_8x5_SRGB_BLOCK:()=>lu,VK_FORMAT_ASTC_8x5_UNORM_BLOCK:()=>au,VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT:()=>Zl,VK_FORMAT_ASTC_8x6_SRGB_BLOCK:()=>uu,VK_FORMAT_ASTC_8x6_UNORM_BLOCK:()=>cu,VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT:()=>Wa,VK_FORMAT_ASTC_8x8_SRGB_BLOCK:()=>O0,VK_FORMAT_ASTC_8x8_UNORM_BLOCK:()=>M1,VK_FORMAT_B10G11R11_UFLOAT_PACK32:()=>A0,VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16:()=>fu,VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16:()=>b1,VK_FORMAT_B4G4R4A4_UNORM_PACK16:()=>ot,VK_FORMAT_B5G5R5A1_UNORM_PACK16:()=>ge,VK_FORMAT_B5G6R5_UNORM_PACK16:()=>Ie,VK_FORMAT_B8G8R8A8_SINT:()=>At,VK_FORMAT_B8G8R8A8_SNORM:()=>ua,VK_FORMAT_B8G8R8A8_SRGB:()=>Pt,VK_FORMAT_B8G8R8A8_UINT:()=>$e,VK_FORMAT_B8G8R8A8_UNORM:()=>al,VK_FORMAT_B8G8R8_SINT:()=>W0,VK_FORMAT_B8G8R8_SNORM:()=>Ps,VK_FORMAT_B8G8R8_SRGB:()=>zo,VK_FORMAT_B8G8R8_UINT:()=>Fo,VK_FORMAT_B8G8R8_UNORM:()=>Vo,VK_FORMAT_BC1_RGBA_SRGB_BLOCK:()=>$r,VK_FORMAT_BC1_RGBA_UNORM_BLOCK:()=>cl,VK_FORMAT_BC1_RGB_SRGB_BLOCK:()=>fa,VK_FORMAT_BC1_RGB_UNORM_BLOCK:()=>ll,VK_FORMAT_BC2_SRGB_BLOCK:()=>ul,VK_FORMAT_BC2_UNORM_BLOCK:()=>pa,VK_FORMAT_BC3_SRGB_BLOCK:()=>m0,VK_FORMAT_BC3_UNORM_BLOCK:()=>s0,VK_FORMAT_BC4_SNORM_BLOCK:()=>Ml,VK_FORMAT_BC4_UNORM_BLOCK:()=>E1,VK_FORMAT_BC5_SNORM_BLOCK:()=>y1,VK_FORMAT_BC5_UNORM_BLOCK:()=>$c,VK_FORMAT_BC6H_SFLOAT_BLOCK:()=>Kl,VK_FORMAT_BC6H_UFLOAT_BLOCK:()=>w1,VK_FORMAT_BC7_SRGB_BLOCK:()=>ec,VK_FORMAT_BC7_UNORM_BLOCK:()=>C1,VK_FORMAT_D16_UNORM:()=>ha,VK_FORMAT_D16_UNORM_S8_UINT:()=>co,VK_FORMAT_D24_UNORM_S8_UINT:()=>Fr,VK_FORMAT_D32_SFLOAT:()=>_o,VK_FORMAT_D32_SFLOAT_S8_UINT:()=>xo,VK_FORMAT_E5B9G9R9_UFLOAT_PACK32:()=>P0,VK_FORMAT_EAC_R11G11_SNORM_BLOCK:()=>Xl,VK_FORMAT_EAC_R11G11_UNORM_BLOCK:()=>nc,VK_FORMAT_EAC_R11_SNORM_BLOCK:()=>ic,VK_FORMAT_EAC_R11_UNORM_BLOCK:()=>tc,VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK:()=>_1,VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK:()=>tu,VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK:()=>x1,VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK:()=>iu,VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK:()=>eu,VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK:()=>jc,VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16:()=>Tl,VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16:()=>ql,VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG:()=>So,VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG:()=>dc,VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG:()=>ur,VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG:()=>fc,VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG:()=>mu,VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG:()=>pc,VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG:()=>vi,VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG:()=>Au,VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16:()=>bl,VK_FORMAT_R10X6G10X6_UNORM_2PACK16:()=>uc,VK_FORMAT_R10X6_UNORM_PACK16:()=>cc,VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16:()=>hc,VK_FORMAT_R12X4G12X4_UNORM_2PACK16:()=>pu,VK_FORMAT_R12X4_UNORM_PACK16:()=>Yl,VK_FORMAT_R16G16B16A16_SFLOAT:()=>ei,VK_FORMAT_R16G16B16A16_SINT:()=>Dt,VK_FORMAT_R16G16B16A16_SNORM:()=>it,VK_FORMAT_R16G16B16A16_UINT:()=>_t,VK_FORMAT_R16G16B16A16_UNORM:()=>We,VK_FORMAT_R16G16B16_SFLOAT:()=>Fe,VK_FORMAT_R16G16B16_SINT:()=>Re,VK_FORMAT_R16G16B16_SNORM:()=>Or,VK_FORMAT_R16G16B16_UINT:()=>_e,VK_FORMAT_R16G16B16_UNORM:()=>as,VK_FORMAT_R16G16_SFLOAT:()=>$n,VK_FORMAT_R16G16_SINT:()=>rn,VK_FORMAT_R16G16_SNORM:()=>gs,VK_FORMAT_R16G16_UINT:()=>bs,VK_FORMAT_R16G16_UNORM:()=>br,VK_FORMAT_R16_SFLOAT:()=>or,VK_FORMAT_R16_SINT:()=>Kn,VK_FORMAT_R16_SNORM:()=>Dn,VK_FORMAT_R16_UINT:()=>ns,VK_FORMAT_R16_UNORM:()=>Bn,VK_FORMAT_R32G32B32A32_SFLOAT:()=>Qr,VK_FORMAT_R32G32B32A32_SINT:()=>gr,VK_FORMAT_R32G32B32A32_UINT:()=>Ln,VK_FORMAT_R32G32B32_SFLOAT:()=>Qn,VK_FORMAT_R32G32B32_SINT:()=>nr,VK_FORMAT_R32G32B32_UINT:()=>On,VK_FORMAT_R32G32_SFLOAT:()=>mi,VK_FORMAT_R32G32_SINT:()=>an,VK_FORMAT_R32G32_UINT:()=>Ri,VK_FORMAT_R32_SFLOAT:()=>ni,VK_FORMAT_R32_SINT:()=>Ut,VK_FORMAT_R32_UINT:()=>pi,VK_FORMAT_R4G4B4A4_UNORM_PACK16:()=>tt,VK_FORMAT_R4G4_UNORM_PACK8:()=>lt,VK_FORMAT_R5G5B5A1_UNORM_PACK16:()=>ae,VK_FORMAT_R5G6B5_UNORM_PACK16:()=>ct,VK_FORMAT_R64G64B64A64_SFLOAT:()=>x0,VK_FORMAT_R64G64B64A64_SINT:()=>r0,VK_FORMAT_R64G64B64A64_UINT:()=>D0,VK_FORMAT_R64G64B64_SFLOAT:()=>p0,VK_FORMAT_R64G64B64_SINT:()=>$s,VK_FORMAT_R64G64B64_UINT:()=>Os,VK_FORMAT_R64G64_SFLOAT:()=>Zs,VK_FORMAT_R64G64_SINT:()=>vs,VK_FORMAT_R64G64_UINT:()=>Js,VK_FORMAT_R64_SFLOAT:()=>qs,VK_FORMAT_R64_SINT:()=>Vr,VK_FORMAT_R64_UINT:()=>ls,VK_FORMAT_R8G8B8A8_SINT:()=>ca,VK_FORMAT_R8G8B8A8_SNORM:()=>ir,VK_FORMAT_R8G8B8A8_SRGB:()=>L0,VK_FORMAT_R8G8B8A8_UINT:()=>Ys,VK_FORMAT_R8G8B8A8_UNORM:()=>Rs,VK_FORMAT_R8G8B8_SINT:()=>Hs,VK_FORMAT_R8G8B8_SNORM:()=>Dr,VK_FORMAT_R8G8B8_SRGB:()=>os,VK_FORMAT_R8G8B8_UINT:()=>Pr,VK_FORMAT_R8G8B8_UNORM:()=>Jt,VK_FORMAT_R8G8_SINT:()=>Ss,VK_FORMAT_R8G8_SNORM:()=>Ui,VK_FORMAT_R8G8_SRGB:()=>kn,VK_FORMAT_R8G8_UINT:()=>Ji,VK_FORMAT_R8G8_UNORM:()=>Oi,VK_FORMAT_R8_SINT:()=>Di,VK_FORMAT_R8_SNORM:()=>ht,VK_FORMAT_R8_SRGB:()=>Wi,VK_FORMAT_R8_UINT:()=>St,VK_FORMAT_R8_UNORM:()=>Ze,VK_FORMAT_S8_UINT:()=>M0,VK_FORMAT_UNDEFINED:()=>Xe,VK_FORMAT_X8_D24_UNORM_PACK32:()=>da,read:()=>zr,write:()=>hl});var p=P("./node_modules/buffer/index.js").Buffer;const S=0,z=1,K=2,D=3,Q=0,V=0,T=2,F=0,N=1,k=160,G=161,Z=162,ne=163,te=0,de=1,oe=0,ye=1,Me=2,Ne=3,Pe=4,Qe=5,De=6,ke=7,Ce=8,fe=9,Oe=10,Te=11,Ve=12,st=13,dt=14,Mt=15,Rt=16,Yt=17,zt=18,Ci=0,ci=1,Qi=2,sn=3,In=4,Xn=5,tr=6,Jn=7,bn=8,cr=9,Ir=10,je=11,xs=0,mr=1,Wn=2,Ms=13,ts=14,Co=15,Us=128,Jr=64,Ti=32,Ye=16,Xe=0,lt=1,tt=2,ot=3,ct=4,Ie=5,ae=6,ge=7,He=8,Ze=9,ht=10,St=13,Di=14,Wi=15,Oi=16,Ui=17,Ji=20,Ss=21,kn=22,Jt=23,Dr=24,Pr=27,Hs=28,os=29,Vo=30,Ps=31,Fo=34,W0=35,zo=36,Rs=37,ir=38,Ys=41,ca=42,L0=43,al=44,ua=45,$e=48,At=49,Pt=50,si=58,kt=59,di=62,Ii=63,pn=64,nn=65,hi=68,Tn=69,Bn=70,Dn=71,ns=74,Kn=75,or=76,br=77,gs=78,bs=81,rn=82,$n=83,as=84,Or=85,_e=88,Re=89,Fe=90,We=91,it=92,_t=95,Dt=96,ei=97,pi=98,Ut=99,ni=100,Ri=101,an=102,mi=103,On=104,nr=105,Qn=106,Ln=107,gr=108,Qr=109,ls=110,Vr=111,qs=112,Js=113,vs=114,Zs=115,Os=116,$s=117,p0=118,D0=119,r0=120,x0=121,A0=122,P0=123,ha=124,da=125,_o=126,M0=127,co=128,Fr=129,xo=130,ll=131,fa=132,cl=133,$r=134,pa=135,ul=136,s0=137,m0=138,E1=139,Ml=140,$c=141,y1=142,w1=143,Kl=144,C1=145,ec=146,jc=147,eu=148,tu=149,_1=150,iu=151,x1=152,tc=153,ic=154,nc=155,Xl=156,rc=157,sc=158,oc=159,ac=160,Ga=161,nu=162,ru=163,su=164,lc=165,ou=166,au=167,lu=168,cu=169,uu=170,M1=171,O0=172,Qa=173,uo=174,Mo=175,S1=176,Aa=177,Va=178,Wo=179,Ts=180,ma=181,hu=182,du=183,Sl=184,cc=1000156007,uc=1000156008,bl=1000156009,Tl=1000156010,fu=1000156011,Yl=1000156017,pu=1000156018,hc=1000156019,ql=1000156020,b1=1000156021,dc=1000054e3,fc=1000054001,pc=1000054002,Au=1000054003,So=1000054004,ur=1000054005,mu=1000054006,vi=1000054007,Nn=1000066e3,ga=1000066001,Jl=1000066002,T1=1000066003,va=1000066004,za=1000066005,Zl=1000066006,Wa=1000066007,Gs=1000066008,Ka=1000066009,$l=1000066010,Ea=1000066011,R1=1000066012,jr=1000066013,ya=100034e4,wa=1000340001;class K0{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Xa{constructor(ar,kr,xr,nt){this._dataView=new DataView(ar.buffer,ar.byteOffset+kr,xr),this._littleEndian=nt,this._offset=0}_nextUint8(){const ar=this._dataView.getUint8(this._offset);return this._offset+=1,ar}_nextUint16(){const ar=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,ar}_nextUint32(){const ar=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,ar}_nextUint64(){const ar=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,ar}_nextInt32(){const ar=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,ar}_skip(ar){return this._offset+=ar,this}_scan(ar,kr=0){const xr=this._offset;let nt=0;for(;this._dataView.getUint8(this._offset)!==kr&&nt<ar;)nt++,this._offset++;return nt<ar&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+xr,nt)}}const Rl=new Uint8Array([0]),Es=[171,75,84,88,32,50,48,187,13,10,26,10];function Il(fn){return typeof TextEncoder<"u"?new TextEncoder().encode(fn):p.from(fn)}function I1(fn){return typeof TextDecoder<"u"?new TextDecoder().decode(fn):p.from(fn).toString("utf8")}function cs(fn){let ar=0;for(const nt of fn)ar+=nt.byteLength;const kr=new Uint8Array(ar);let xr=0;for(const nt of fn)kr.set(new Uint8Array(nt),xr),xr+=nt.byteLength;return kr}function zr(fn){const ar=new Uint8Array(fn.buffer,fn.byteOffset,Es.length);if(ar[0]!==Es[0]||ar[1]!==Es[1]||ar[2]!==Es[2]||ar[3]!==Es[3]||ar[4]!==Es[4]||ar[5]!==Es[5]||ar[6]!==Es[6]||ar[7]!==Es[7]||ar[8]!==Es[8]||ar[9]!==Es[9]||ar[10]!==Es[10]||ar[11]!==Es[11])throw new Error("Missing KTX 2.0 identifier.");const kr=new K0,xr=17*Uint32Array.BYTES_PER_ELEMENT,nt=new Xa(fn,Es.length,xr,!0);kr.vkFormat=nt._nextUint32(),kr.typeSize=nt._nextUint32(),kr.pixelWidth=nt._nextUint32(),kr.pixelHeight=nt._nextUint32(),kr.pixelDepth=nt._nextUint32(),kr.layerCount=nt._nextUint32(),kr.faceCount=nt._nextUint32();const Ko=nt._nextUint32();kr.supercompressionScheme=nt._nextUint32();const ys=nt._nextUint32(),jn=nt._nextUint32(),_r=nt._nextUint32(),ho=nt._nextUint32(),g0=nt._nextUint64(),o0=nt._nextUint64(),no=new Xa(fn,Es.length+xr,3*Ko*8,!0);for(let Is=0;Is<Ko;Is++)kr.levels.push({levelData:new Uint8Array(fn.buffer,fn.byteOffset+no._nextUint64(),no._nextUint64()),uncompressedByteLength:no._nextUint64()});const qn=new Xa(fn,ys,jn,!0),Zn={vendorId:qn._skip(4)._nextUint16(),descriptorType:qn._nextUint16(),versionNumber:qn._nextUint16(),descriptorBlockSize:qn._nextUint16(),colorModel:qn._nextUint8(),colorPrimaries:qn._nextUint8(),transferFunction:qn._nextUint8(),flags:qn._nextUint8(),texelBlockDimension:[qn._nextUint8(),qn._nextUint8(),qn._nextUint8(),qn._nextUint8()],bytesPlane:[qn._nextUint8(),qn._nextUint8(),qn._nextUint8(),qn._nextUint8(),qn._nextUint8(),qn._nextUint8(),qn._nextUint8(),qn._nextUint8()],samples:[]},Qs=(Zn.descriptorBlockSize/4-6)/4;for(let Is=0;Is<Qs;Is++){const on={bitOffset:qn._nextUint16(),bitLength:qn._nextUint8(),channelType:qn._nextUint8(),samplePosition:[qn._nextUint8(),qn._nextUint8(),qn._nextUint8(),qn._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&on.channelType?(on.sampleLower=qn._nextInt32(),on.sampleUpper=qn._nextInt32()):(on.sampleLower=qn._nextUint32(),on.sampleUpper=qn._nextUint32()),Zn.samples[Is]=on}kr.dataFormatDescriptor.length=0,kr.dataFormatDescriptor.push(Zn);const fo=new Xa(fn,_r,ho,!0);for(;fo._offset<ho;){const Is=fo._nextUint32(),on=fo._scan(Is),Fs=I1(on),Kr=fo._scan(Is-on.byteLength);kr.keyValue[Fs]=Fs.match(/^ktx/i)?I1(Kr):Kr,fo._offset%4&&fo._skip(4-fo._offset%4)}if(o0<=0)return kr;const Wr=new Xa(fn,g0,o0,!0),vr=Wr._nextUint16(),Zi=Wr._nextUint16(),fr=Wr._nextUint32(),bo=Wr._nextUint32(),X0=Wr._nextUint32(),Y0=Wr._nextUint32(),qa=[];for(let Is=0;Is<Ko;Is++)qa.push({imageFlags:Wr._nextUint32(),rgbSliceByteOffset:Wr._nextUint32(),rgbSliceByteLength:Wr._nextUint32(),alphaSliceByteOffset:Wr._nextUint32(),alphaSliceByteLength:Wr._nextUint32()});const Vs=g0+Wr._offset,F0=Vs+fr,Ca=F0+bo,Bl=Ca+X0,_a=new Uint8Array(fn.buffer,fn.byteOffset+Vs,fr),Ll=new Uint8Array(fn.buffer,fn.byteOffset+F0,bo),S0=new Uint8Array(fn.buffer,fn.byteOffset+Ca,X0),Dl=new Uint8Array(fn.buffer,fn.byteOffset+Bl,Y0);return kr.globalData={endpointCount:vr,selectorCount:Zi,imageDescs:qa,endpointsData:_a,selectorsData:Ll,tablesData:S0,extendedData:Dl},kr}function Ya(){return(Ya=Object.assign||function(fn){for(var ar=1;ar<arguments.length;ar++){var kr=arguments[ar];for(var xr in kr)Object.prototype.hasOwnProperty.call(kr,xr)&&(fn[xr]=kr[xr])}return fn}).apply(this,arguments)}const js={keepWriter:!1};function hl(fn,ar={}){ar=Ya({},js,ar);let kr=new ArrayBuffer(0);if(fn.globalData){const vr=new ArrayBuffer(20+5*fn.globalData.imageDescs.length*4),Zi=new DataView(vr);Zi.setUint16(0,fn.globalData.endpointCount,!0),Zi.setUint16(2,fn.globalData.selectorCount,!0),Zi.setUint32(4,fn.globalData.endpointsData.byteLength,!0),Zi.setUint32(8,fn.globalData.selectorsData.byteLength,!0),Zi.setUint32(12,fn.globalData.tablesData.byteLength,!0),Zi.setUint32(16,fn.globalData.extendedData.byteLength,!0);for(let fr=0;fr<fn.globalData.imageDescs.length;fr++){const bo=fn.globalData.imageDescs[fr];Zi.setUint32(20+5*fr*4+0,bo.imageFlags,!0),Zi.setUint32(20+5*fr*4+4,bo.rgbSliceByteOffset,!0),Zi.setUint32(20+5*fr*4+8,bo.rgbSliceByteLength,!0),Zi.setUint32(20+5*fr*4+12,bo.alphaSliceByteOffset,!0),Zi.setUint32(20+5*fr*4+16,bo.alphaSliceByteLength,!0)}kr=cs([vr,fn.globalData.endpointsData,fn.globalData.selectorsData,fn.globalData.tablesData,fn.globalData.extendedData])}const xr=[];let nt=fn.keyValue;ar.keepWriter||(nt=Ya({},fn.keyValue,{KTXwriter:"KTX-Parse v0.3.1"}));for(const vr in nt){const Zi=nt[vr],fr=Il(vr),bo=typeof Zi=="string"?Il(Zi):Zi,X0=fr.byteLength+1+bo.byteLength+1,Y0=X0%4?4-X0%4:0;xr.push(cs([new Uint32Array([X0]),fr,Rl,bo,Rl,new Uint8Array(Y0).fill(0)]))}const Ko=cs(xr);if(fn.dataFormatDescriptor.length!==1||fn.dataFormatDescriptor[0].descriptorType!==0)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const ys=fn.dataFormatDescriptor[0],jn=new ArrayBuffer(28+16*ys.samples.length),_r=new DataView(jn),ho=24+16*ys.samples.length;if(_r.setUint32(0,jn.byteLength,!0),_r.setUint16(4,ys.vendorId,!0),_r.setUint16(6,ys.descriptorType,!0),_r.setUint16(8,ys.versionNumber,!0),_r.setUint16(10,ho,!0),_r.setUint8(12,ys.colorModel),_r.setUint8(13,ys.colorPrimaries),_r.setUint8(14,ys.transferFunction),_r.setUint8(15,ys.flags),!Array.isArray(ys.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");_r.setUint8(16,ys.texelBlockDimension[0]),_r.setUint8(17,ys.texelBlockDimension[1]),_r.setUint8(18,ys.texelBlockDimension[2]),_r.setUint8(19,ys.texelBlockDimension[3]);for(let vr=0;vr<8;vr++)_r.setUint8(20+vr,ys.bytesPlane[vr]);for(let vr=0;vr<ys.samples.length;vr++){const Zi=ys.samples[vr],fr=28+16*vr;if(Zi.channelID)throw new Error("channelID has been renamed to channelType.");_r.setUint16(fr+0,Zi.bitOffset,!0),_r.setUint8(fr+2,Zi.bitLength),_r.setUint8(fr+3,Zi.channelType),_r.setUint8(fr+4,Zi.samplePosition[0]),_r.setUint8(fr+5,Zi.samplePosition[1]),_r.setUint8(fr+6,Zi.samplePosition[2]),_r.setUint8(fr+7,Zi.samplePosition[3]),64&Zi.channelType?(_r.setInt32(fr+8,Zi.sampleLower,!0),_r.setInt32(fr+12,Zi.sampleUpper,!0)):(_r.setUint32(fr+8,Zi.sampleLower,!0),_r.setUint32(fr+12,Zi.sampleUpper,!0))}const g0=Es.length+68+3*fn.levels.length*8,o0=g0+jn.byteLength;let no=kr.byteLength>0?o0+Ko.byteLength:0;no%8&&(no+=8-no%8);const qn=[],Zn=new DataView(new ArrayBuffer(3*fn.levels.length*8));let Qs=(no||o0+Ko.byteLength)+kr.byteLength;for(let vr=0;vr<fn.levels.length;vr++){const Zi=fn.levels[vr];qn.push(Zi.levelData),Zn.setBigUint64(24*vr+0,BigInt(Qs),!0),Zn.setBigUint64(24*vr+8,BigInt(Zi.levelData.byteLength),!0),Zn.setBigUint64(24*vr+16,BigInt(Zi.uncompressedByteLength),!0),Qs+=Zi.levelData.byteLength}const fo=new ArrayBuffer(68),Wr=new DataView(fo);return Wr.setUint32(0,fn.vkFormat,!0),Wr.setUint32(4,fn.typeSize,!0),Wr.setUint32(8,fn.pixelWidth,!0),Wr.setUint32(12,fn.pixelHeight,!0),Wr.setUint32(16,fn.pixelDepth,!0),Wr.setUint32(20,fn.layerCount,!0),Wr.setUint32(24,fn.faceCount,!0),Wr.setUint32(28,fn.levels.length,!0),Wr.setUint32(32,fn.supercompressionScheme,!0),Wr.setUint32(36,g0,!0),Wr.setUint32(40,jn.byteLength,!0),Wr.setUint32(44,o0,!0),Wr.setUint32(48,Ko.byteLength,!0),Wr.setBigUint64(52,BigInt(kr.byteLength>0?no:0),!0),Wr.setBigUint64(60,BigInt(kr.byteLength),!0),new Uint8Array(cs([new Uint8Array(Es).buffer,fo,Zn.buffer,jn,Ko,no>0?new ArrayBuffer(no-(o0+Ko.byteLength)):new ArrayBuffer(0),kr,...qn]))}},"./node_modules/three/examples/jsm/libs/zstddec.module.js":(ie,we,P)=>{P.r(we),P.d(we,{ZSTDDecoder:()=>Q});var p=P("./node_modules/buffer/index.js").Buffer;let S,z,K;const D={env:{emscripten_notify_memory_growth:function(T){K=new Uint8Array(z.exports.memory.buffer)}}};class Q{init(){return S||(S=typeof fetch<"u"?fetch("data:application/wasm;base64,"+V).then(F=>F.arrayBuffer()).then(F=>WebAssembly.instantiate(F,D)).then(this._init):WebAssembly.instantiate(p.from(V,"base64"),D).then(this._init),S)}_init(F){z=F.instance,D.env.emscripten_notify_memory_growth(0)}decode(F,N=0){if(!z)throw new Error("ZSTDDecoder: Await .init() before decoding.");const k=F.byteLength,G=z.exports.malloc(k);K.set(F,G),N=N||Number(z.exports.ZSTD_findDecompressedSize(G,k));const Z=z.exports.malloc(N),ne=z.exports.ZSTD_decompress(Z,N,G,k),te=K.slice(Z,Z+ne);return z.exports.free(G),z.exports.free(Z),te}}const V="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ"},"./node_modules/three/examples/jsm/lights/LightProbeGenerator.js":(ie,we,P)=>{P.r(we),P.d(we,{LightProbeGenerator:()=>S});var p=P("./node_modules/three/build/three.module.js");class S{static fromCubeTexture(D){let Q=0;const V=new p.Vector3,T=new p.Vector3,F=new p.Color,N=[0,0,0,0,0,0,0,0,0],k=new p.SphericalHarmonics3,G=k.coefficients;for(let ne=0;ne<6;ne++){const te=D.image[ne],de=te.width,oe=te.height,ye=document.createElement("canvas");ye.width=de,ye.height=oe;const Me=ye.getContext("2d");Me.drawImage(te,0,0,de,oe);const Ne=Me.getImageData(0,0,de,oe),Pe=Ne.data,Qe=Ne.width,De=2/Qe;for(let ke=0,Ce=Pe.length;ke<Ce;ke+=4){F.setRGB(Pe[ke]/255,Pe[ke+1]/255,Pe[ke+2]/255),z(F,D.colorSpace);const fe=ke/4,Oe=-1+(fe%Qe+.5)*De,Te=1-(Math.floor(fe/Qe)+.5)*De;switch(ne){case 0:V.set(-1,Te,-Oe);break;case 1:V.set(1,Te,Oe);break;case 2:V.set(-Oe,1,-Te);break;case 3:V.set(-Oe,-1,Te);break;case 4:V.set(-Oe,Te,1);break;case 5:V.set(Oe,Te,-1);break}const Ve=V.lengthSq(),st=4/(Math.sqrt(Ve)*Ve);Q+=st,T.copy(V).normalize(),p.SphericalHarmonics3.getBasisAt(T,N);for(let dt=0;dt<9;dt++)G[dt].x+=N[dt]*F.r*st,G[dt].y+=N[dt]*F.g*st,G[dt].z+=N[dt]*F.b*st}}const Z=4*Math.PI/Q;for(let ne=0;ne<9;ne++)G[ne].x*=Z,G[ne].y*=Z,G[ne].z*=Z;return new p.LightProbe(k)}static fromCubeRenderTarget(D,Q){let V=0;const T=new p.Vector3,F=new p.Vector3,N=new p.Color,k=[0,0,0,0,0,0,0,0,0],G=new p.SphericalHarmonics3,Z=G.coefficients,ne=Q.texture.type;for(let de=0;de<6;de++){const oe=Q.width;let ye;ne===p.HalfFloatType?ye=new Uint16Array(oe*oe*4):ye=new Uint8Array(oe*oe*4),D.readRenderTargetPixels(Q,0,0,oe,oe,ye,de);const Me=2/oe;for(let Ne=0,Pe=ye.length;Ne<Pe;Ne+=4){let Qe,De,ke;ne===p.HalfFloatType?(Qe=p.DataUtils.fromHalfFloat(ye[Ne]),De=p.DataUtils.fromHalfFloat(ye[Ne+1]),ke=p.DataUtils.fromHalfFloat(ye[Ne+2])):(Qe=ye[Ne]/255,De=ye[Ne+1]/255,ke=ye[Ne+2]/255),N.setRGB(Qe,De,ke),z(N,Q.texture.colorSpace);const Ce=Ne/4,fe=-1+(Ce%oe+.5)*Me,Oe=1-(Math.floor(Ce/oe)+.5)*Me;switch(de){case 0:T.set(1,Oe,-fe);break;case 1:T.set(-1,Oe,fe);break;case 2:T.set(fe,1,-Oe);break;case 3:T.set(fe,-1,Oe);break;case 4:T.set(fe,Oe,1);break;case 5:T.set(-fe,Oe,-1);break}const Te=T.lengthSq(),Ve=4/(Math.sqrt(Te)*Te);V+=Ve,F.copy(T).normalize(),p.SphericalHarmonics3.getBasisAt(F,k);for(let st=0;st<9;st++)Z[st].x+=k[st]*N.r*Ve,Z[st].y+=k[st]*N.g*Ve,Z[st].z+=k[st]*N.b*Ve}}const te=4*Math.PI/V;for(let de=0;de<9;de++)Z[de].x*=te,Z[de].y*=te,Z[de].z*=te;return new p.LightProbe(G)}}function z(K,D){switch(D){case p.SRGBColorSpace:K.convertSRGBToLinear();break;case p.LinearSRGBColorSpace:case p.NoColorSpace:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported color space.");break}return K}},"./node_modules/three/examples/jsm/loaders/DRACOLoader.js":(ie,we,P)=>{P.r(we),P.d(we,{DRACOLoader:()=>z});var p=P("./node_modules/three/build/three.module.js");const S=new WeakMap;class z extends p.Loader{constructor(Q){super(Q),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(Q){return this.decoderPath=Q,this}setDecoderConfig(Q){return this.decoderConfig=Q,this}setWorkerLimit(Q){return this.workerLimit=Q,this}load(Q,V,T,F){const N=new p.FileLoader(this.manager);N.setPath(this.path),N.setResponseType("arraybuffer"),N.setRequestHeader(this.requestHeader),N.setWithCredentials(this.withCredentials),N.load(Q,k=>{this.parse(k,V,F)},T,F)}parse(Q,V,T=()=>{}){this.decodeDracoFile(Q,V,null,null,p.SRGBColorSpace).catch(T)}decodeDracoFile(Q,V,T,F,N=p.LinearSRGBColorSpace,k=()=>{}){const G={attributeIDs:T||this.defaultAttributeIDs,attributeTypes:F||this.defaultAttributeTypes,useUniqueIDs:!!T,vertexColorSpace:N};return this.decodeGeometry(Q,G).then(V).catch(k)}decodeGeometry(Q,V){const T=JSON.stringify(V);if(S.has(Q)){const Z=S.get(Q);if(Z.key===T)return Z.promise;if(Q.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let F;const N=this.workerNextTaskID++,k=Q.byteLength,G=this._getWorker(N,k).then(Z=>(F=Z,new Promise((ne,te)=>{F._callbacks[N]={resolve:ne,reject:te},F.postMessage({type:"decode",id:N,taskConfig:V,buffer:Q},[Q])}))).then(Z=>this._createGeometry(Z.geometry));return G.catch(()=>!0).then(()=>{F&&N&&this._releaseTask(F,N)}),S.set(Q,{key:T,promise:G}),G}_createGeometry(Q){const V=new p.BufferGeometry;Q.index&&V.setIndex(new p.BufferAttribute(Q.index.array,1));for(let T=0;T<Q.attributes.length;T++){const F=Q.attributes[T],N=F.name,k=F.array,G=F.itemSize,Z=new p.BufferAttribute(k,G);N==="color"&&(this._assignVertexColorSpace(Z,F.vertexColorSpace),Z.normalized=!(k instanceof Float32Array)),V.setAttribute(N,Z)}return V}_assignVertexColorSpace(Q,V){if(V!==p.SRGBColorSpace)return;const T=new p.Color;for(let F=0,N=Q.count;F<N;F++)T.fromBufferAttribute(Q,F).convertSRGBToLinear(),Q.setXYZ(F,T.r,T.g,T.b)}_loadLibrary(Q,V){const T=new p.FileLoader(this.manager);return T.setPath(this.decoderPath),T.setResponseType(V),T.setWithCredentials(this.withCredentials),new Promise((F,N)=>{T.load(Q,F,void 0,N)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const Q=typeof WebAssembly!="object"||this.decoderConfig.type==="js",V=[];return Q?V.push(this._loadLibrary("draco_decoder.js","text")):(V.push(this._loadLibrary("draco_wasm_wrapper.js","text")),V.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(V).then(T=>{const F=T[0];Q||(this.decoderConfig.wasmBinary=T[1]);const N=K.toString(),k=["/* draco decoder */",F,"","/* worker */",N.substring(N.indexOf("{")+1,N.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([k]))}),this.decoderPending}_getWorker(Q,V){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const F=new Worker(this.workerSourceURL);F._callbacks={},F._taskCosts={},F._taskLoad=0,F.postMessage({type:"init",decoderConfig:this.decoderConfig}),F.onmessage=function(N){const k=N.data;switch(k.type){case"decode":F._callbacks[k.id].resolve(k);break;case"error":F._callbacks[k.id].reject(k);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+k.type+'"')}},this.workerPool.push(F)}else this.workerPool.sort(function(F,N){return F._taskLoad>N._taskLoad?-1:1});const T=this.workerPool[this.workerPool.length-1];return T._taskCosts[Q]=V,T._taskLoad+=V,T})}_releaseTask(Q,V){Q._taskLoad-=Q._taskCosts[V],delete Q._callbacks[V],delete Q._taskCosts[V]}debug(){console.log("Task load: ",this.workerPool.map(Q=>Q._taskLoad))}dispose(){for(let Q=0;Q<this.workerPool.length;++Q)this.workerPool[Q].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function K(){let D,Q;onmessage=function(k){const G=k.data;switch(G.type){case"init":D=G.decoderConfig,Q=new Promise(function(te){D.onModuleLoaded=function(de){te({draco:de})},DracoDecoderModule(D)});break;case"decode":const Z=G.buffer,ne=G.taskConfig;Q.then(te=>{const de=te.draco,oe=new de.Decoder;try{const ye=V(de,oe,new Int8Array(Z),ne),Me=ye.attributes.map(Ne=>Ne.array.buffer);ye.index&&Me.push(ye.index.array.buffer),self.postMessage({type:"decode",id:G.id,geometry:ye},Me)}catch(ye){console.error(ye),self.postMessage({type:"error",id:G.id,error:ye.message})}finally{de.destroy(oe)}});break}};function V(k,G,Z,ne){const te=ne.attributeIDs,de=ne.attributeTypes;let oe,ye;const Me=G.GetEncodedGeometryType(Z);if(Me===k.TRIANGULAR_MESH)oe=new k.Mesh,ye=G.DecodeArrayToMesh(Z,Z.byteLength,oe);else if(Me===k.POINT_CLOUD)oe=new k.PointCloud,ye=G.DecodeArrayToPointCloud(Z,Z.byteLength,oe);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!ye.ok()||oe.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ye.error_msg());const Ne={index:null,attributes:[]};for(const Pe in te){const Qe=self[de[Pe]];let De,ke;if(ne.useUniqueIDs)ke=te[Pe],De=G.GetAttributeByUniqueId(oe,ke);else{if(ke=G.GetAttributeId(oe,k[te[Pe]]),ke===-1)continue;De=G.GetAttribute(oe,ke)}const Ce=F(k,G,oe,Pe,Qe,De);Pe==="color"&&(Ce.vertexColorSpace=ne.vertexColorSpace),Ne.attributes.push(Ce)}return Me===k.TRIANGULAR_MESH&&(Ne.index=T(k,G,oe)),k.destroy(oe),Ne}function T(k,G,Z){const te=Z.num_faces()*3,de=te*4,oe=k._malloc(de);G.GetTrianglesUInt32Array(Z,de,oe);const ye=new Uint32Array(k.HEAPF32.buffer,oe,te).slice();return k._free(oe),{array:ye,itemSize:1}}function F(k,G,Z,ne,te,de){const oe=de.num_components(),Me=Z.num_points()*oe,Ne=Me*te.BYTES_PER_ELEMENT,Pe=N(k,te),Qe=k._malloc(Ne);G.GetAttributeDataArrayForAllPoints(Z,de,Pe,Ne,Qe);const De=new te(k.HEAPF32.buffer,Qe,Me).slice();return k._free(Qe),{name:ne,array:De,itemSize:oe}}function N(k,G){switch(G){case Float32Array:return k.DT_FLOAT32;case Int8Array:return k.DT_INT8;case Int16Array:return k.DT_INT16;case Int32Array:return k.DT_INT32;case Uint8Array:return k.DT_UINT8;case Uint16Array:return k.DT_UINT16;case Uint32Array:return k.DT_UINT32}}}},"./node_modules/three/examples/jsm/loaders/GLTFLoader.js":(ie,we,P)=>{P.r(we),P.d(we,{GLTFLoader:()=>z});var p=P("./node_modules/three/build/three.module.js"),S=P("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js");class z extends p.Loader{constructor(Ye){super(Ye),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(Xe){return new F(Xe)}),this.register(function(Xe){return new N(Xe)}),this.register(function(Xe){return new Me(Xe)}),this.register(function(Xe){return new Ne(Xe)}),this.register(function(Xe){return new Pe(Xe)}),this.register(function(Xe){return new G(Xe)}),this.register(function(Xe){return new Z(Xe)}),this.register(function(Xe){return new ne(Xe)}),this.register(function(Xe){return new te(Xe)}),this.register(function(Xe){return new T(Xe)}),this.register(function(Xe){return new de(Xe)}),this.register(function(Xe){return new k(Xe)}),this.register(function(Xe){return new ye(Xe)}),this.register(function(Xe){return new oe(Xe)}),this.register(function(Xe){return new Q(Xe)}),this.register(function(Xe){return new Qe(Xe)}),this.register(function(Xe){return new De(Xe)})}load(Ye,Xe,lt,tt){const ot=this;let ct;if(this.resourcePath!=="")ct=this.resourcePath;else if(this.path!==""){const ge=p.LoaderUtils.extractUrlBase(Ye);ct=p.LoaderUtils.resolveURL(ge,this.path)}else ct=p.LoaderUtils.extractUrlBase(Ye);this.manager.itemStart(Ye);const Ie=function(ge){tt?tt(ge):console.error(ge),ot.manager.itemError(Ye),ot.manager.itemEnd(Ye)},ae=new p.FileLoader(this.manager);ae.setPath(this.path),ae.setResponseType("arraybuffer"),ae.setRequestHeader(this.requestHeader),ae.setWithCredentials(this.withCredentials),ae.load(Ye,function(ge){try{ot.parse(ge,ct,function(He){Xe(He),ot.manager.itemEnd(Ye)},Ie)}catch(He){Ie(He)}},lt,Ie)}setDRACOLoader(Ye){return this.dracoLoader=Ye,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(Ye){return this.ktx2Loader=Ye,this}setMeshoptDecoder(Ye){return this.meshoptDecoder=Ye,this}register(Ye){return this.pluginCallbacks.indexOf(Ye)===-1&&this.pluginCallbacks.push(Ye),this}unregister(Ye){return this.pluginCallbacks.indexOf(Ye)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(Ye),1),this}parse(Ye,Xe,lt,tt){let ot;const ct={},Ie={},ae=new TextDecoder;if(typeof Ye=="string")ot=JSON.parse(Ye);else if(Ye instanceof ArrayBuffer)if(ae.decode(new Uint8Array(Ye,0,4))===ke){try{ct[D.KHR_BINARY_GLTF]=new Oe(Ye)}catch(Ze){tt&&tt(Ze);return}ot=JSON.parse(ct[D.KHR_BINARY_GLTF].content)}else ot=JSON.parse(ae.decode(Ye));else ot=Ye;if(ot.asset===void 0||ot.asset.version[0]<2){tt&&tt(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const ge=new Co(ot,{path:Xe||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});ge.fileLoader.setRequestHeader(this.requestHeader);for(let He=0;He<this.pluginCallbacks.length;He++){const Ze=this.pluginCallbacks[He](ge);Ze.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),Ie[Ze.name]=Ze,ct[Ze.name]=!0}if(ot.extensionsUsed)for(let He=0;He<ot.extensionsUsed.length;++He){const Ze=ot.extensionsUsed[He],ht=ot.extensionsRequired||[];switch(Ze){case D.KHR_MATERIALS_UNLIT:ct[Ze]=new V;break;case D.KHR_DRACO_MESH_COMPRESSION:ct[Ze]=new Te(ot,this.dracoLoader);break;case D.KHR_TEXTURE_TRANSFORM:ct[Ze]=new Ve;break;case D.KHR_MESH_QUANTIZATION:ct[Ze]=new st;break;default:ht.indexOf(Ze)>=0&&Ie[Ze]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Ze+'".')}}ge.setExtensions(ct),ge.setPlugins(Ie),ge.parse(lt,tt)}parseAsync(Ye,Xe){const lt=this;return new Promise(function(tt,ot){lt.parse(Ye,Xe,tt,ot)})}}function K(){let Ti={};return{get:function(Ye){return Ti[Ye]},add:function(Ye,Xe){Ti[Ye]=Xe},remove:function(Ye){delete Ti[Ye]},removeAll:function(){Ti={}}}}const D={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Q{constructor(Ye){this.parser=Ye,this.name=D.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const Ye=this.parser,Xe=this.parser.json.nodes||[];for(let lt=0,tt=Xe.length;lt<tt;lt++){const ot=Xe[lt];ot.extensions&&ot.extensions[this.name]&&ot.extensions[this.name].light!==void 0&&Ye._addNodeRef(this.cache,ot.extensions[this.name].light)}}_loadLight(Ye){const Xe=this.parser,lt="light:"+Ye;let tt=Xe.cache.get(lt);if(tt)return tt;const ot=Xe.json,ae=((ot.extensions&&ot.extensions[this.name]||{}).lights||[])[Ye];let ge;const He=new p.Color(16777215);ae.color!==void 0&&He.setRGB(ae.color[0],ae.color[1],ae.color[2],p.LinearSRGBColorSpace);const Ze=ae.range!==void 0?ae.range:0;switch(ae.type){case"directional":ge=new p.DirectionalLight(He),ge.target.position.set(0,0,-1),ge.add(ge.target);break;case"point":ge=new p.PointLight(He),ge.distance=Ze;break;case"spot":ge=new p.SpotLight(He),ge.distance=Ze,ae.spot=ae.spot||{},ae.spot.innerConeAngle=ae.spot.innerConeAngle!==void 0?ae.spot.innerConeAngle:0,ae.spot.outerConeAngle=ae.spot.outerConeAngle!==void 0?ae.spot.outerConeAngle:Math.PI/4,ge.angle=ae.spot.outerConeAngle,ge.penumbra=1-ae.spot.innerConeAngle/ae.spot.outerConeAngle,ge.target.position.set(0,0,-1),ge.add(ge.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ae.type)}return ge.position.set(0,0,0),ge.decay=2,cr(ge,ae),ae.intensity!==void 0&&(ge.intensity=ae.intensity),ge.name=Xe.createUniqueName(ae.name||"light_"+Ye),tt=Promise.resolve(ge),Xe.cache.add(lt,tt),tt}getDependency(Ye,Xe){if(Ye==="light")return this._loadLight(Xe)}createNodeAttachment(Ye){const Xe=this,lt=this.parser,ot=lt.json.nodes[Ye],Ie=(ot.extensions&&ot.extensions[this.name]||{}).light;return Ie===void 0?null:this._loadLight(Ie).then(function(ae){return lt._getNodeRef(Xe.cache,Ie,ae)})}}class V{constructor(){this.name=D.KHR_MATERIALS_UNLIT}getMaterialType(){return p.MeshBasicMaterial}extendParams(Ye,Xe,lt){const tt=[];Ye.color=new p.Color(1,1,1),Ye.opacity=1;const ot=Xe.pbrMetallicRoughness;if(ot){if(Array.isArray(ot.baseColorFactor)){const ct=ot.baseColorFactor;Ye.color.setRGB(ct[0],ct[1],ct[2],p.LinearSRGBColorSpace),Ye.opacity=ct[3]}ot.baseColorTexture!==void 0&&tt.push(lt.assignTexture(Ye,"map",ot.baseColorTexture,p.SRGBColorSpace))}return Promise.all(tt)}}class T{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(Ye,Xe){const tt=this.parser.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=tt.extensions[this.name].emissiveStrength;return ot!==void 0&&(Xe.emissiveIntensity=ot),Promise.resolve()}}class F{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_CLEARCOAT}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const lt=this.parser,tt=lt.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=[],ct=tt.extensions[this.name];if(ct.clearcoatFactor!==void 0&&(Xe.clearcoat=ct.clearcoatFactor),ct.clearcoatTexture!==void 0&&ot.push(lt.assignTexture(Xe,"clearcoatMap",ct.clearcoatTexture)),ct.clearcoatRoughnessFactor!==void 0&&(Xe.clearcoatRoughness=ct.clearcoatRoughnessFactor),ct.clearcoatRoughnessTexture!==void 0&&ot.push(lt.assignTexture(Xe,"clearcoatRoughnessMap",ct.clearcoatRoughnessTexture)),ct.clearcoatNormalTexture!==void 0&&(ot.push(lt.assignTexture(Xe,"clearcoatNormalMap",ct.clearcoatNormalTexture)),ct.clearcoatNormalTexture.scale!==void 0)){const Ie=ct.clearcoatNormalTexture.scale;Xe.clearcoatNormalScale=new p.Vector2(Ie,Ie)}return Promise.all(ot)}}class N{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_DISPERSION}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const tt=this.parser.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=tt.extensions[this.name];return Xe.dispersion=ot.dispersion!==void 0?ot.dispersion:0,Promise.resolve()}}class k{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_IRIDESCENCE}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const lt=this.parser,tt=lt.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=[],ct=tt.extensions[this.name];return ct.iridescenceFactor!==void 0&&(Xe.iridescence=ct.iridescenceFactor),ct.iridescenceTexture!==void 0&&ot.push(lt.assignTexture(Xe,"iridescenceMap",ct.iridescenceTexture)),ct.iridescenceIor!==void 0&&(Xe.iridescenceIOR=ct.iridescenceIor),Xe.iridescenceThicknessRange===void 0&&(Xe.iridescenceThicknessRange=[100,400]),ct.iridescenceThicknessMinimum!==void 0&&(Xe.iridescenceThicknessRange[0]=ct.iridescenceThicknessMinimum),ct.iridescenceThicknessMaximum!==void 0&&(Xe.iridescenceThicknessRange[1]=ct.iridescenceThicknessMaximum),ct.iridescenceThicknessTexture!==void 0&&ot.push(lt.assignTexture(Xe,"iridescenceThicknessMap",ct.iridescenceThicknessTexture)),Promise.all(ot)}}class G{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_SHEEN}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const lt=this.parser,tt=lt.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=[];Xe.sheenColor=new p.Color(0,0,0),Xe.sheenRoughness=0,Xe.sheen=1;const ct=tt.extensions[this.name];if(ct.sheenColorFactor!==void 0){const Ie=ct.sheenColorFactor;Xe.sheenColor.setRGB(Ie[0],Ie[1],Ie[2],p.LinearSRGBColorSpace)}return ct.sheenRoughnessFactor!==void 0&&(Xe.sheenRoughness=ct.sheenRoughnessFactor),ct.sheenColorTexture!==void 0&&ot.push(lt.assignTexture(Xe,"sheenColorMap",ct.sheenColorTexture,p.SRGBColorSpace)),ct.sheenRoughnessTexture!==void 0&&ot.push(lt.assignTexture(Xe,"sheenRoughnessMap",ct.sheenRoughnessTexture)),Promise.all(ot)}}class Z{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_TRANSMISSION}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const lt=this.parser,tt=lt.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=[],ct=tt.extensions[this.name];return ct.transmissionFactor!==void 0&&(Xe.transmission=ct.transmissionFactor),ct.transmissionTexture!==void 0&&ot.push(lt.assignTexture(Xe,"transmissionMap",ct.transmissionTexture)),Promise.all(ot)}}class ne{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_VOLUME}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const lt=this.parser,tt=lt.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=[],ct=tt.extensions[this.name];Xe.thickness=ct.thicknessFactor!==void 0?ct.thicknessFactor:0,ct.thicknessTexture!==void 0&&ot.push(lt.assignTexture(Xe,"thicknessMap",ct.thicknessTexture)),Xe.attenuationDistance=ct.attenuationDistance||1/0;const Ie=ct.attenuationColor||[1,1,1];return Xe.attenuationColor=new p.Color().setRGB(Ie[0],Ie[1],Ie[2],p.LinearSRGBColorSpace),Promise.all(ot)}}class te{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_IOR}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const tt=this.parser.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=tt.extensions[this.name];return Xe.ior=ot.ior!==void 0?ot.ior:1.5,Promise.resolve()}}class de{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_SPECULAR}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const lt=this.parser,tt=lt.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=[],ct=tt.extensions[this.name];Xe.specularIntensity=ct.specularFactor!==void 0?ct.specularFactor:1,ct.specularTexture!==void 0&&ot.push(lt.assignTexture(Xe,"specularIntensityMap",ct.specularTexture));const Ie=ct.specularColorFactor||[1,1,1];return Xe.specularColor=new p.Color().setRGB(Ie[0],Ie[1],Ie[2],p.LinearSRGBColorSpace),ct.specularColorTexture!==void 0&&ot.push(lt.assignTexture(Xe,"specularColorMap",ct.specularColorTexture,p.SRGBColorSpace)),Promise.all(ot)}}class oe{constructor(Ye){this.parser=Ye,this.name=D.EXT_MATERIALS_BUMP}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const lt=this.parser,tt=lt.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=[],ct=tt.extensions[this.name];return Xe.bumpScale=ct.bumpFactor!==void 0?ct.bumpFactor:1,ct.bumpTexture!==void 0&&ot.push(lt.assignTexture(Xe,"bumpMap",ct.bumpTexture)),Promise.all(ot)}}class ye{constructor(Ye){this.parser=Ye,this.name=D.KHR_MATERIALS_ANISOTROPY}getMaterialType(Ye){const lt=this.parser.json.materials[Ye];return!lt.extensions||!lt.extensions[this.name]?null:p.MeshPhysicalMaterial}extendMaterialParams(Ye,Xe){const lt=this.parser,tt=lt.json.materials[Ye];if(!tt.extensions||!tt.extensions[this.name])return Promise.resolve();const ot=[],ct=tt.extensions[this.name];return ct.anisotropyStrength!==void 0&&(Xe.anisotropy=ct.anisotropyStrength),ct.anisotropyRotation!==void 0&&(Xe.anisotropyRotation=ct.anisotropyRotation),ct.anisotropyTexture!==void 0&&ot.push(lt.assignTexture(Xe,"anisotropyMap",ct.anisotropyTexture)),Promise.all(ot)}}class Me{constructor(Ye){this.parser=Ye,this.name=D.KHR_TEXTURE_BASISU}loadTexture(Ye){const Xe=this.parser,lt=Xe.json,tt=lt.textures[Ye];if(!tt.extensions||!tt.extensions[this.name])return null;const ot=tt.extensions[this.name],ct=Xe.options.ktx2Loader;if(!ct){if(lt.extensionsRequired&&lt.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return Xe.loadTextureImage(Ye,ot.source,ct)}}class Ne{constructor(Ye){this.parser=Ye,this.name=D.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(Ye){const Xe=this.name,lt=this.parser,tt=lt.json,ot=tt.textures[Ye];if(!ot.extensions||!ot.extensions[Xe])return null;const ct=ot.extensions[Xe],Ie=tt.images[ct.source];let ae=lt.textureLoader;if(Ie.uri){const ge=lt.options.manager.getHandler(Ie.uri);ge!==null&&(ae=ge)}return this.detectSupport().then(function(ge){if(ge)return lt.loadTextureImage(Ye,ct.source,ae);if(tt.extensionsRequired&&tt.extensionsRequired.indexOf(Xe)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return lt.loadTexture(Ye)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(Ye){const Xe=new Image;Xe.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",Xe.onload=Xe.onerror=function(){Ye(Xe.height===1)}})),this.isSupported}}class Pe{constructor(Ye){this.parser=Ye,this.name=D.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(Ye){const Xe=this.name,lt=this.parser,tt=lt.json,ot=tt.textures[Ye];if(!ot.extensions||!ot.extensions[Xe])return null;const ct=ot.extensions[Xe],Ie=tt.images[ct.source];let ae=lt.textureLoader;if(Ie.uri){const ge=lt.options.manager.getHandler(Ie.uri);ge!==null&&(ae=ge)}return this.detectSupport().then(function(ge){if(ge)return lt.loadTextureImage(Ye,ct.source,ae);if(tt.extensionsRequired&&tt.extensionsRequired.indexOf(Xe)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return lt.loadTexture(Ye)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(Ye){const Xe=new Image;Xe.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",Xe.onload=Xe.onerror=function(){Ye(Xe.height===1)}})),this.isSupported}}class Qe{constructor(Ye){this.name=D.EXT_MESHOPT_COMPRESSION,this.parser=Ye}loadBufferView(Ye){const Xe=this.parser.json,lt=Xe.bufferViews[Ye];if(lt.extensions&&lt.extensions[this.name]){const tt=lt.extensions[this.name],ot=this.parser.getDependency("buffer",tt.buffer),ct=this.parser.options.meshoptDecoder;if(!ct||!ct.supported){if(Xe.extensionsRequired&&Xe.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return ot.then(function(Ie){const ae=tt.byteOffset||0,ge=tt.byteLength||0,He=tt.count,Ze=tt.byteStride,ht=new Uint8Array(Ie,ae,ge);return ct.decodeGltfBufferAsync?ct.decodeGltfBufferAsync(He,Ze,ht,tt.mode,tt.filter).then(function(St){return St.buffer}):ct.ready.then(function(){const St=new ArrayBuffer(He*Ze);return ct.decodeGltfBuffer(new Uint8Array(St),He,Ze,ht,tt.mode,tt.filter),St})})}else return null}}class De{constructor(Ye){this.name=D.EXT_MESH_GPU_INSTANCING,this.parser=Ye}createNodeMesh(Ye){const Xe=this.parser.json,lt=Xe.nodes[Ye];if(!lt.extensions||!lt.extensions[this.name]||lt.mesh===void 0)return null;const tt=Xe.meshes[lt.mesh];for(const ge of tt.primitives)if(ge.mode!==Yt.TRIANGLES&&ge.mode!==Yt.TRIANGLE_STRIP&&ge.mode!==Yt.TRIANGLE_FAN&&ge.mode!==void 0)return null;const ct=lt.extensions[this.name].attributes,Ie=[],ae={};for(const ge in ct)Ie.push(this.parser.getDependency("accessor",ct[ge]).then(He=>(ae[ge]=He,ae[ge])));return Ie.length<1?null:(Ie.push(this.parser.createNodeMesh(Ye)),Promise.all(Ie).then(ge=>{const He=ge.pop(),Ze=He.isGroup?He.children:[He],ht=ge[0].count,St=[];for(const Di of Ze){const Wi=new p.Matrix4,Oi=new p.Vector3,Ui=new p.Quaternion,Ji=new p.Vector3(1,1,1),Ss=new p.InstancedMesh(Di.geometry,Di.material,ht);for(let kn=0;kn<ht;kn++)ae.TRANSLATION&&Oi.fromBufferAttribute(ae.TRANSLATION,kn),ae.ROTATION&&Ui.fromBufferAttribute(ae.ROTATION,kn),ae.SCALE&&Ji.fromBufferAttribute(ae.SCALE,kn),Ss.setMatrixAt(kn,Wi.compose(Oi,Ui,Ji));for(const kn in ae)if(kn==="_COLOR_0"){const Jt=ae[kn];Ss.instanceColor=new p.InstancedBufferAttribute(Jt.array,Jt.itemSize,Jt.normalized)}else kn!=="TRANSLATION"&&kn!=="ROTATION"&&kn!=="SCALE"&&Di.geometry.setAttribute(kn,ae[kn]);p.Object3D.prototype.copy.call(Ss,Di),this.parser.assignFinalMaterial(Ss),St.push(Ss)}return He.isGroup?(He.clear(),He.add(...St),He):St[0]}))}}const ke="glTF",Ce=12,fe={JSON:1313821514,BIN:5130562};class Oe{constructor(Ye){this.name=D.KHR_BINARY_GLTF,this.content=null,this.body=null;const Xe=new DataView(Ye,0,Ce),lt=new TextDecoder;if(this.header={magic:lt.decode(new Uint8Array(Ye.slice(0,4))),version:Xe.getUint32(4,!0),length:Xe.getUint32(8,!0)},this.header.magic!==ke)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const tt=this.header.length-Ce,ot=new DataView(Ye,Ce);let ct=0;for(;ct<tt;){const Ie=ot.getUint32(ct,!0);ct+=4;const ae=ot.getUint32(ct,!0);if(ct+=4,ae===fe.JSON){const ge=new Uint8Array(Ye,Ce+ct,Ie);this.content=lt.decode(ge)}else if(ae===fe.BIN){const ge=Ce+ct;this.body=Ye.slice(ge,ge+Ie)}ct+=Ie}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Te{constructor(Ye,Xe){if(!Xe)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=D.KHR_DRACO_MESH_COMPRESSION,this.json=Ye,this.dracoLoader=Xe,this.dracoLoader.preload()}decodePrimitive(Ye,Xe){const lt=this.json,tt=this.dracoLoader,ot=Ye.extensions[this.name].bufferView,ct=Ye.extensions[this.name].attributes,Ie={},ae={},ge={};for(const He in ct){const Ze=sn[He]||He.toLowerCase();Ie[Ze]=ct[He]}for(const He in Ye.attributes){const Ze=sn[He]||He.toLowerCase();if(ct[He]!==void 0){const ht=lt.accessors[Ye.attributes[He]],St=zt[ht.componentType];ge[Ze]=St.name,ae[Ze]=ht.normalized===!0}}return Xe.getDependency("bufferView",ot).then(function(He){return new Promise(function(Ze,ht){tt.decodeDracoFile(He,function(St){for(const Di in St.attributes){const Wi=St.attributes[Di],Oi=ae[Di];Oi!==void 0&&(Wi.normalized=Oi)}Ze(St)},Ie,ge,p.LinearSRGBColorSpace,ht)})})}}class Ve{constructor(){this.name=D.KHR_TEXTURE_TRANSFORM}extendTexture(Ye,Xe){return(Xe.texCoord===void 0||Xe.texCoord===Ye.channel)&&Xe.offset===void 0&&Xe.rotation===void 0&&Xe.scale===void 0||(Ye=Ye.clone(),Xe.texCoord!==void 0&&(Ye.channel=Xe.texCoord),Xe.offset!==void 0&&Ye.offset.fromArray(Xe.offset),Xe.rotation!==void 0&&(Ye.rotation=Xe.rotation),Xe.scale!==void 0&&Ye.repeat.fromArray(Xe.scale),Ye.needsUpdate=!0),Ye}}class st{constructor(){this.name=D.KHR_MESH_QUANTIZATION}}class dt extends p.Interpolant{constructor(Ye,Xe,lt,tt){super(Ye,Xe,lt,tt)}copySampleValue_(Ye){const Xe=this.resultBuffer,lt=this.sampleValues,tt=this.valueSize,ot=Ye*tt*3+tt;for(let ct=0;ct!==tt;ct++)Xe[ct]=lt[ot+ct];return Xe}interpolate_(Ye,Xe,lt,tt){const ot=this.resultBuffer,ct=this.sampleValues,Ie=this.valueSize,ae=Ie*2,ge=Ie*3,He=tt-Xe,Ze=(lt-Xe)/He,ht=Ze*Ze,St=ht*Ze,Di=Ye*ge,Wi=Di-ge,Oi=-2*St+3*ht,Ui=St-ht,Ji=1-Oi,Ss=Ui-ht+Ze;for(let kn=0;kn!==Ie;kn++){const Jt=ct[Wi+kn+Ie],Dr=ct[Wi+kn+ae]*He,Pr=ct[Di+kn+Ie],Hs=ct[Di+kn]*He;ot[kn]=Ji*Jt+Ss*Dr+Oi*Pr+Ui*Hs}return ot}}const Mt=new p.Quaternion;class Rt extends dt{interpolate_(Ye,Xe,lt,tt){const ot=super.interpolate_(Ye,Xe,lt,tt);return Mt.fromArray(ot).normalize().toArray(ot),ot}}const Yt={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},zt={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ci={9728:p.NearestFilter,9729:p.LinearFilter,9984:p.NearestMipmapNearestFilter,9985:p.LinearMipmapNearestFilter,9986:p.NearestMipmapLinearFilter,9987:p.LinearMipmapLinearFilter},ci={33071:p.ClampToEdgeWrapping,33648:p.MirroredRepeatWrapping,10497:p.RepeatWrapping},Qi={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},sn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},In={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Xn={CUBICSPLINE:void 0,LINEAR:p.InterpolateLinear,STEP:p.InterpolateDiscrete},tr={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function Jn(Ti){return Ti.DefaultMaterial===void 0&&(Ti.DefaultMaterial=new p.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:p.FrontSide})),Ti.DefaultMaterial}function bn(Ti,Ye,Xe){for(const lt in Xe.extensions)Ti[lt]===void 0&&(Ye.userData.gltfExtensions=Ye.userData.gltfExtensions||{},Ye.userData.gltfExtensions[lt]=Xe.extensions[lt])}function cr(Ti,Ye){Ye.extras!==void 0&&(typeof Ye.extras=="object"?Object.assign(Ti.userData,Ye.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+Ye.extras))}function Ir(Ti,Ye,Xe){let lt=!1,tt=!1,ot=!1;for(let ge=0,He=Ye.length;ge<He;ge++){const Ze=Ye[ge];if(Ze.POSITION!==void 0&&(lt=!0),Ze.NORMAL!==void 0&&(tt=!0),Ze.COLOR_0!==void 0&&(ot=!0),lt&&tt&&ot)break}if(!lt&&!tt&&!ot)return Promise.resolve(Ti);const ct=[],Ie=[],ae=[];for(let ge=0,He=Ye.length;ge<He;ge++){const Ze=Ye[ge];if(lt){const ht=Ze.POSITION!==void 0?Xe.getDependency("accessor",Ze.POSITION):Ti.attributes.position;ct.push(ht)}if(tt){const ht=Ze.NORMAL!==void 0?Xe.getDependency("accessor",Ze.NORMAL):Ti.attributes.normal;Ie.push(ht)}if(ot){const ht=Ze.COLOR_0!==void 0?Xe.getDependency("accessor",Ze.COLOR_0):Ti.attributes.color;ae.push(ht)}}return Promise.all([Promise.all(ct),Promise.all(Ie),Promise.all(ae)]).then(function(ge){const He=ge[0],Ze=ge[1],ht=ge[2];return lt&&(Ti.morphAttributes.position=He),tt&&(Ti.morphAttributes.normal=Ze),ot&&(Ti.morphAttributes.color=ht),Ti.morphTargetsRelative=!0,Ti})}function je(Ti,Ye){if(Ti.updateMorphTargets(),Ye.weights!==void 0)for(let Xe=0,lt=Ye.weights.length;Xe<lt;Xe++)Ti.morphTargetInfluences[Xe]=Ye.weights[Xe];if(Ye.extras&&Array.isArray(Ye.extras.targetNames)){const Xe=Ye.extras.targetNames;if(Ti.morphTargetInfluences.length===Xe.length){Ti.morphTargetDictionary={};for(let lt=0,tt=Xe.length;lt<tt;lt++)Ti.morphTargetDictionary[Xe[lt]]=lt}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function xs(Ti){let Ye;const Xe=Ti.extensions&&Ti.extensions[D.KHR_DRACO_MESH_COMPRESSION];if(Xe?Ye="draco:"+Xe.bufferView+":"+Xe.indices+":"+mr(Xe.attributes):Ye=Ti.indices+":"+mr(Ti.attributes)+":"+Ti.mode,Ti.targets!==void 0)for(let lt=0,tt=Ti.targets.length;lt<tt;lt++)Ye+=":"+mr(Ti.targets[lt]);return Ye}function mr(Ti){let Ye="";const Xe=Object.keys(Ti).sort();for(let lt=0,tt=Xe.length;lt<tt;lt++)Ye+=Xe[lt]+":"+Ti[Xe[lt]]+";";return Ye}function Wn(Ti){switch(Ti){case Int8Array:return .007874015748031496;case Uint8Array:return .00392156862745098;case Int16Array:return 3051850947599719e-20;case Uint16Array:return 15259021896696422e-21;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function Ms(Ti){return Ti.search(/\.jpe?g($|\?)/i)>0||Ti.search(/^data\:image\/jpeg/)===0?"image/jpeg":Ti.search(/\.webp($|\?)/i)>0||Ti.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ts=new p.Matrix4;class Co{constructor(Ye={},Xe={}){this.json=Ye,this.extensions={},this.plugins={},this.options=Xe,this.cache=new K,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let lt=!1,tt=!1,ot=-1;typeof navigator<"u"&&(lt=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,tt=navigator.userAgent.indexOf("Firefox")>-1,ot=tt?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||lt||tt&&ot<98?this.textureLoader=new p.TextureLoader(this.options.manager):this.textureLoader=new p.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new p.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(Ye){this.extensions=Ye}setPlugins(Ye){this.plugins=Ye}parse(Ye,Xe){const lt=this,tt=this.json,ot=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(ct){return ct._markDefs&&ct._markDefs()}),Promise.all(this._invokeAll(function(ct){return ct.beforeRoot&&ct.beforeRoot()})).then(function(){return Promise.all([lt.getDependencies("scene"),lt.getDependencies("animation"),lt.getDependencies("camera")])}).then(function(ct){const Ie={scene:ct[0][tt.scene||0],scenes:ct[0],animations:ct[1],cameras:ct[2],asset:tt.asset,parser:lt,userData:{}};return bn(ot,Ie,tt),cr(Ie,tt),Promise.all(lt._invokeAll(function(ae){return ae.afterRoot&&ae.afterRoot(Ie)})).then(function(){for(const ae of Ie.scenes)ae.updateMatrixWorld();Ye(Ie)})}).catch(Xe)}_markDefs(){const Ye=this.json.nodes||[],Xe=this.json.skins||[],lt=this.json.meshes||[];for(let tt=0,ot=Xe.length;tt<ot;tt++){const ct=Xe[tt].joints;for(let Ie=0,ae=ct.length;Ie<ae;Ie++)Ye[ct[Ie]].isBone=!0}for(let tt=0,ot=Ye.length;tt<ot;tt++){const ct=Ye[tt];ct.mesh!==void 0&&(this._addNodeRef(this.meshCache,ct.mesh),ct.skin!==void 0&&(lt[ct.mesh].isSkinnedMesh=!0)),ct.camera!==void 0&&this._addNodeRef(this.cameraCache,ct.camera)}}_addNodeRef(Ye,Xe){Xe!==void 0&&(Ye.refs[Xe]===void 0&&(Ye.refs[Xe]=Ye.uses[Xe]=0),Ye.refs[Xe]++)}_getNodeRef(Ye,Xe,lt){if(Ye.refs[Xe]<=1)return lt;const tt=lt.clone(),ot=(ct,Ie)=>{const ae=this.associations.get(ct);ae!=null&&this.associations.set(Ie,ae);for(const[ge,He]of ct.children.entries())ot(He,Ie.children[ge])};return ot(lt,tt),tt.name+="_instance_"+Ye.uses[Xe]++,tt}_invokeOne(Ye){const Xe=Object.values(this.plugins);Xe.push(this);for(let lt=0;lt<Xe.length;lt++){const tt=Ye(Xe[lt]);if(tt)return tt}return null}_invokeAll(Ye){const Xe=Object.values(this.plugins);Xe.unshift(this);const lt=[];for(let tt=0;tt<Xe.length;tt++){const ot=Ye(Xe[tt]);ot&&lt.push(ot)}return lt}getDependency(Ye,Xe){const lt=Ye+":"+Xe;let tt=this.cache.get(lt);if(!tt){switch(Ye){case"scene":tt=this.loadScene(Xe);break;case"node":tt=this._invokeOne(function(ot){return ot.loadNode&&ot.loadNode(Xe)});break;case"mesh":tt=this._invokeOne(function(ot){return ot.loadMesh&&ot.loadMesh(Xe)});break;case"accessor":tt=this.loadAccessor(Xe);break;case"bufferView":tt=this._invokeOne(function(ot){return ot.loadBufferView&&ot.loadBufferView(Xe)});break;case"buffer":tt=this.loadBuffer(Xe);break;case"material":tt=this._invokeOne(function(ot){return ot.loadMaterial&&ot.loadMaterial(Xe)});break;case"texture":tt=this._invokeOne(function(ot){return ot.loadTexture&&ot.loadTexture(Xe)});break;case"skin":tt=this.loadSkin(Xe);break;case"animation":tt=this._invokeOne(function(ot){return ot.loadAnimation&&ot.loadAnimation(Xe)});break;case"camera":tt=this.loadCamera(Xe);break;default:if(tt=this._invokeOne(function(ot){return ot!=this&&ot.getDependency&&ot.getDependency(Ye,Xe)}),!tt)throw new Error("Unknown type: "+Ye);break}this.cache.add(lt,tt)}return tt}getDependencies(Ye){let Xe=this.cache.get(Ye);if(!Xe){const lt=this,tt=this.json[Ye+(Ye==="mesh"?"es":"s")]||[];Xe=Promise.all(tt.map(function(ot,ct){return lt.getDependency(Ye,ct)})),this.cache.add(Ye,Xe)}return Xe}loadBuffer(Ye){const Xe=this.json.buffers[Ye],lt=this.fileLoader;if(Xe.type&&Xe.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+Xe.type+" buffer type is not supported.");if(Xe.uri===void 0&&Ye===0)return Promise.resolve(this.extensions[D.KHR_BINARY_GLTF].body);const tt=this.options;return new Promise(function(ot,ct){lt.load(p.LoaderUtils.resolveURL(Xe.uri,tt.path),ot,void 0,function(){ct(new Error('THREE.GLTFLoader: Failed to load buffer "'+Xe.uri+'".'))})})}loadBufferView(Ye){const Xe=this.json.bufferViews[Ye];return this.getDependency("buffer",Xe.buffer).then(function(lt){const tt=Xe.byteLength||0,ot=Xe.byteOffset||0;return lt.slice(ot,ot+tt)})}loadAccessor(Ye){const Xe=this,lt=this.json,tt=this.json.accessors[Ye];if(tt.bufferView===void 0&&tt.sparse===void 0){const ct=Qi[tt.type],Ie=zt[tt.componentType],ae=tt.normalized===!0,ge=new Ie(tt.count*ct);return Promise.resolve(new p.BufferAttribute(ge,ct,ae))}const ot=[];return tt.bufferView!==void 0?ot.push(this.getDependency("bufferView",tt.bufferView)):ot.push(null),tt.sparse!==void 0&&(ot.push(this.getDependency("bufferView",tt.sparse.indices.bufferView)),ot.push(this.getDependency("bufferView",tt.sparse.values.bufferView))),Promise.all(ot).then(function(ct){const Ie=ct[0],ae=Qi[tt.type],ge=zt[tt.componentType],He=ge.BYTES_PER_ELEMENT,Ze=He*ae,ht=tt.byteOffset||0,St=tt.bufferView!==void 0?lt.bufferViews[tt.bufferView].byteStride:void 0,Di=tt.normalized===!0;let Wi,Oi;if(St&&St!==Ze){const Ui=Math.floor(ht/St),Ji="InterleavedBuffer:"+tt.bufferView+":"+tt.componentType+":"+Ui+":"+tt.count;let Ss=Xe.cache.get(Ji);Ss||(Wi=new ge(Ie,Ui*St,tt.count*St/He),Ss=new p.InterleavedBuffer(Wi,St/He),Xe.cache.add(Ji,Ss)),Oi=new p.InterleavedBufferAttribute(Ss,ae,ht%St/He,Di)}else Ie===null?Wi=new ge(tt.count*ae):Wi=new ge(Ie,ht,tt.count*ae),Oi=new p.BufferAttribute(Wi,ae,Di);if(tt.sparse!==void 0){const Ui=Qi.SCALAR,Ji=zt[tt.sparse.indices.componentType],Ss=tt.sparse.indices.byteOffset||0,kn=tt.sparse.values.byteOffset||0,Jt=new Ji(ct[1],Ss,tt.sparse.count*Ui),Dr=new ge(ct[2],kn,tt.sparse.count*ae);Ie!==null&&(Oi=new p.BufferAttribute(Oi.array.slice(),Oi.itemSize,Oi.normalized));for(let Pr=0,Hs=Jt.length;Pr<Hs;Pr++){const os=Jt[Pr];if(Oi.setX(os,Dr[Pr*ae]),ae>=2&&Oi.setY(os,Dr[Pr*ae+1]),ae>=3&&Oi.setZ(os,Dr[Pr*ae+2]),ae>=4&&Oi.setW(os,Dr[Pr*ae+3]),ae>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Oi})}loadTexture(Ye){const Xe=this.json,lt=this.options,ot=Xe.textures[Ye].source,ct=Xe.images[ot];let Ie=this.textureLoader;if(ct.uri){const ae=lt.manager.getHandler(ct.uri);ae!==null&&(Ie=ae)}return this.loadTextureImage(Ye,ot,Ie)}loadTextureImage(Ye,Xe,lt){const tt=this,ot=this.json,ct=ot.textures[Ye],Ie=ot.images[Xe],ae=(Ie.uri||Ie.bufferView)+":"+ct.sampler;if(this.textureCache[ae])return this.textureCache[ae];const ge=this.loadImageSource(Xe,lt).then(function(He){He.flipY=!1,He.name=ct.name||Ie.name||"",He.name===""&&typeof Ie.uri=="string"&&Ie.uri.startsWith("data:image/")===!1&&(He.name=Ie.uri);const ht=(ot.samplers||{})[ct.sampler]||{};return He.magFilter=Ci[ht.magFilter]||p.LinearFilter,He.minFilter=Ci[ht.minFilter]||p.LinearMipmapLinearFilter,He.wrapS=ci[ht.wrapS]||p.RepeatWrapping,He.wrapT=ci[ht.wrapT]||p.RepeatWrapping,tt.associations.set(He,{textures:Ye}),He}).catch(function(){return null});return this.textureCache[ae]=ge,ge}loadImageSource(Ye,Xe){const lt=this,tt=this.json,ot=this.options;if(this.sourceCache[Ye]!==void 0)return this.sourceCache[Ye].then(Ze=>Ze.clone());const ct=tt.images[Ye],Ie=self.URL||self.webkitURL;let ae=ct.uri||"",ge=!1;if(ct.bufferView!==void 0)ae=lt.getDependency("bufferView",ct.bufferView).then(function(Ze){ge=!0;const ht=new Blob([Ze],{type:ct.mimeType});return ae=Ie.createObjectURL(ht),ae});else if(ct.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+Ye+" is missing URI and bufferView");const He=Promise.resolve(ae).then(function(Ze){return new Promise(function(ht,St){let Di=ht;Xe.isImageBitmapLoader===!0&&(Di=function(Wi){const Oi=new p.Texture(Wi);Oi.needsUpdate=!0,ht(Oi)}),Xe.load(p.LoaderUtils.resolveURL(Ze,ot.path),Di,void 0,St)})}).then(function(Ze){return ge===!0&&Ie.revokeObjectURL(ae),Ze.userData.mimeType=ct.mimeType||Ms(ct.uri),Ze}).catch(function(Ze){throw console.error("THREE.GLTFLoader: Couldn't load texture",ae),Ze});return this.sourceCache[Ye]=He,He}assignTexture(Ye,Xe,lt,tt){const ot=this;return this.getDependency("texture",lt.index).then(function(ct){if(!ct)return null;if(lt.texCoord!==void 0&&lt.texCoord>0&&(ct=ct.clone(),ct.channel=lt.texCoord),ot.extensions[D.KHR_TEXTURE_TRANSFORM]){const Ie=lt.extensions!==void 0?lt.extensions[D.KHR_TEXTURE_TRANSFORM]:void 0;if(Ie){const ae=ot.associations.get(ct);ct=ot.extensions[D.KHR_TEXTURE_TRANSFORM].extendTexture(ct,Ie),ot.associations.set(ct,ae)}}return tt!==void 0&&(ct.colorSpace=tt),Ye[Xe]=ct,ct})}assignFinalMaterial(Ye){const Xe=Ye.geometry;let lt=Ye.material;const tt=Xe.attributes.tangent===void 0,ot=Xe.attributes.color!==void 0,ct=Xe.attributes.normal===void 0;if(Ye.isPoints){const Ie="PointsMaterial:"+lt.uuid;let ae=this.cache.get(Ie);ae||(ae=new p.PointsMaterial,p.Material.prototype.copy.call(ae,lt),ae.color.copy(lt.color),ae.map=lt.map,ae.sizeAttenuation=!1,this.cache.add(Ie,ae)),lt=ae}else if(Ye.isLine){const Ie="LineBasicMaterial:"+lt.uuid;let ae=this.cache.get(Ie);ae||(ae=new p.LineBasicMaterial,p.Material.prototype.copy.call(ae,lt),ae.color.copy(lt.color),ae.map=lt.map,this.cache.add(Ie,ae)),lt=ae}if(tt||ot||ct){let Ie="ClonedMaterial:"+lt.uuid+":";tt&&(Ie+="derivative-tangents:"),ot&&(Ie+="vertex-colors:"),ct&&(Ie+="flat-shading:");let ae=this.cache.get(Ie);ae||(ae=lt.clone(),ot&&(ae.vertexColors=!0),ct&&(ae.flatShading=!0),tt&&(ae.normalScale&&(ae.normalScale.y*=-1),ae.clearcoatNormalScale&&(ae.clearcoatNormalScale.y*=-1)),this.cache.add(Ie,ae),this.associations.set(ae,this.associations.get(lt))),lt=ae}Ye.material=lt}getMaterialType(){return p.MeshStandardMaterial}loadMaterial(Ye){const Xe=this,lt=this.json,tt=this.extensions,ot=lt.materials[Ye];let ct;const Ie={},ae=ot.extensions||{},ge=[];if(ae[D.KHR_MATERIALS_UNLIT]){const Ze=tt[D.KHR_MATERIALS_UNLIT];ct=Ze.getMaterialType(),ge.push(Ze.extendParams(Ie,ot,Xe))}else{const Ze=ot.pbrMetallicRoughness||{};if(Ie.color=new p.Color(1,1,1),Ie.opacity=1,Array.isArray(Ze.baseColorFactor)){const ht=Ze.baseColorFactor;Ie.color.setRGB(ht[0],ht[1],ht[2],p.LinearSRGBColorSpace),Ie.opacity=ht[3]}Ze.baseColorTexture!==void 0&&ge.push(Xe.assignTexture(Ie,"map",Ze.baseColorTexture,p.SRGBColorSpace)),Ie.metalness=Ze.metallicFactor!==void 0?Ze.metallicFactor:1,Ie.roughness=Ze.roughnessFactor!==void 0?Ze.roughnessFactor:1,Ze.metallicRoughnessTexture!==void 0&&(ge.push(Xe.assignTexture(Ie,"metalnessMap",Ze.metallicRoughnessTexture)),ge.push(Xe.assignTexture(Ie,"roughnessMap",Ze.metallicRoughnessTexture))),ct=this._invokeOne(function(ht){return ht.getMaterialType&&ht.getMaterialType(Ye)}),ge.push(Promise.all(this._invokeAll(function(ht){return ht.extendMaterialParams&&ht.extendMaterialParams(Ye,Ie)})))}ot.doubleSided===!0&&(Ie.side=p.DoubleSide);const He=ot.alphaMode||tr.OPAQUE;if(He===tr.BLEND?(Ie.transparent=!0,Ie.depthWrite=!1):(Ie.transparent=!1,He===tr.MASK&&(Ie.alphaTest=ot.alphaCutoff!==void 0?ot.alphaCutoff:.5)),ot.normalTexture!==void 0&&ct!==p.MeshBasicMaterial&&(ge.push(Xe.assignTexture(Ie,"normalMap",ot.normalTexture)),Ie.normalScale=new p.Vector2(1,1),ot.normalTexture.scale!==void 0)){const Ze=ot.normalTexture.scale;Ie.normalScale.set(Ze,Ze)}if(ot.occlusionTexture!==void 0&&ct!==p.MeshBasicMaterial&&(ge.push(Xe.assignTexture(Ie,"aoMap",ot.occlusionTexture)),ot.occlusionTexture.strength!==void 0&&(Ie.aoMapIntensity=ot.occlusionTexture.strength)),ot.emissiveFactor!==void 0&&ct!==p.MeshBasicMaterial){const Ze=ot.emissiveFactor;Ie.emissive=new p.Color().setRGB(Ze[0],Ze[1],Ze[2],p.LinearSRGBColorSpace)}return ot.emissiveTexture!==void 0&&ct!==p.MeshBasicMaterial&&ge.push(Xe.assignTexture(Ie,"emissiveMap",ot.emissiveTexture,p.SRGBColorSpace)),Promise.all(ge).then(function(){const Ze=new ct(Ie);return ot.name&&(Ze.name=ot.name),cr(Ze,ot),Xe.associations.set(Ze,{materials:Ye}),ot.extensions&&bn(tt,Ze,ot),Ze})}createUniqueName(Ye){const Xe=p.PropertyBinding.sanitizeNodeName(Ye||"");return Xe in this.nodeNamesUsed?Xe+"_"+ ++this.nodeNamesUsed[Xe]:(this.nodeNamesUsed[Xe]=0,Xe)}loadGeometries(Ye){const Xe=this,lt=this.extensions,tt=this.primitiveCache;function ot(Ie){return lt[D.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(Ie,Xe).then(function(ae){return Jr(ae,Ie,Xe)})}const ct=[];for(let Ie=0,ae=Ye.length;Ie<ae;Ie++){const ge=Ye[Ie],He=xs(ge),Ze=tt[He];if(Ze)ct.push(Ze.promise);else{let ht;ge.extensions&&ge.extensions[D.KHR_DRACO_MESH_COMPRESSION]?ht=ot(ge):ht=Jr(new p.BufferGeometry,ge,Xe),tt[He]={primitive:ge,promise:ht},ct.push(ht)}}return Promise.all(ct)}loadMesh(Ye){const Xe=this,lt=this.json,tt=this.extensions,ot=lt.meshes[Ye],ct=ot.primitives,Ie=[];for(let ae=0,ge=ct.length;ae<ge;ae++){const He=ct[ae].material===void 0?Jn(this.cache):this.getDependency("material",ct[ae].material);Ie.push(He)}return Ie.push(Xe.loadGeometries(ct)),Promise.all(Ie).then(function(ae){const ge=ae.slice(0,ae.length-1),He=ae[ae.length-1],Ze=[];for(let St=0,Di=He.length;St<Di;St++){const Wi=He[St],Oi=ct[St];let Ui;const Ji=ge[St];if(Oi.mode===Yt.TRIANGLES||Oi.mode===Yt.TRIANGLE_STRIP||Oi.mode===Yt.TRIANGLE_FAN||Oi.mode===void 0)Ui=ot.isSkinnedMesh===!0?new p.SkinnedMesh(Wi,Ji):new p.Mesh(Wi,Ji),Ui.isSkinnedMesh===!0&&Ui.normalizeSkinWeights(),Oi.mode===Yt.TRIANGLE_STRIP?Ui.geometry=(0,S.toTrianglesDrawMode)(Ui.geometry,p.TriangleStripDrawMode):Oi.mode===Yt.TRIANGLE_FAN&&(Ui.geometry=(0,S.toTrianglesDrawMode)(Ui.geometry,p.TriangleFanDrawMode));else if(Oi.mode===Yt.LINES)Ui=new p.LineSegments(Wi,Ji);else if(Oi.mode===Yt.LINE_STRIP)Ui=new p.Line(Wi,Ji);else if(Oi.mode===Yt.LINE_LOOP)Ui=new p.LineLoop(Wi,Ji);else if(Oi.mode===Yt.POINTS)Ui=new p.Points(Wi,Ji);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Oi.mode);Object.keys(Ui.geometry.morphAttributes).length>0&&je(Ui,ot),Ui.name=Xe.createUniqueName(ot.name||"mesh_"+Ye),cr(Ui,ot),Oi.extensions&&bn(tt,Ui,Oi),Xe.assignFinalMaterial(Ui),Ze.push(Ui)}for(let St=0,Di=Ze.length;St<Di;St++)Xe.associations.set(Ze[St],{meshes:Ye,primitives:St});if(Ze.length===1)return ot.extensions&&bn(tt,Ze[0],ot),Ze[0];const ht=new p.Group;ot.extensions&&bn(tt,ht,ot),Xe.associations.set(ht,{meshes:Ye});for(let St=0,Di=Ze.length;St<Di;St++)ht.add(Ze[St]);return ht})}loadCamera(Ye){let Xe;const lt=this.json.cameras[Ye],tt=lt[lt.type];if(!tt){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return lt.type==="perspective"?Xe=new p.PerspectiveCamera(p.MathUtils.radToDeg(tt.yfov),tt.aspectRatio||1,tt.znear||1,tt.zfar||2e6):lt.type==="orthographic"&&(Xe=new p.OrthographicCamera(-tt.xmag,tt.xmag,tt.ymag,-tt.ymag,tt.znear,tt.zfar)),lt.name&&(Xe.name=this.createUniqueName(lt.name)),cr(Xe,lt),Promise.resolve(Xe)}loadSkin(Ye){const Xe=this.json.skins[Ye],lt=[];for(let tt=0,ot=Xe.joints.length;tt<ot;tt++)lt.push(this._loadNodeShallow(Xe.joints[tt]));return Xe.inverseBindMatrices!==void 0?lt.push(this.getDependency("accessor",Xe.inverseBindMatrices)):lt.push(null),Promise.all(lt).then(function(tt){const ot=tt.pop(),ct=tt,Ie=[],ae=[];for(let ge=0,He=ct.length;ge<He;ge++){const Ze=ct[ge];if(Ze){Ie.push(Ze);const ht=new p.Matrix4;ot!==null&&ht.fromArray(ot.array,ge*16),ae.push(ht)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',Xe.joints[ge])}return new p.Skeleton(Ie,ae)})}loadAnimation(Ye){const Xe=this.json,lt=this,tt=Xe.animations[Ye],ot=tt.name?tt.name:"animation_"+Ye,ct=[],Ie=[],ae=[],ge=[],He=[];for(let Ze=0,ht=tt.channels.length;Ze<ht;Ze++){const St=tt.channels[Ze],Di=tt.samplers[St.sampler],Wi=St.target,Oi=Wi.node,Ui=tt.parameters!==void 0?tt.parameters[Di.input]:Di.input,Ji=tt.parameters!==void 0?tt.parameters[Di.output]:Di.output;Wi.node!==void 0&&(ct.push(this.getDependency("node",Oi)),Ie.push(this.getDependency("accessor",Ui)),ae.push(this.getDependency("accessor",Ji)),ge.push(Di),He.push(Wi))}return Promise.all([Promise.all(ct),Promise.all(Ie),Promise.all(ae),Promise.all(ge),Promise.all(He)]).then(function(Ze){const ht=Ze[0],St=Ze[1],Di=Ze[2],Wi=Ze[3],Oi=Ze[4],Ui=[];for(let Ji=0,Ss=ht.length;Ji<Ss;Ji++){const kn=ht[Ji],Jt=St[Ji],Dr=Di[Ji],Pr=Wi[Ji],Hs=Oi[Ji];if(kn===void 0)continue;kn.updateMatrix&&kn.updateMatrix();const os=lt._createAnimationTracks(kn,Jt,Dr,Pr,Hs);if(os)for(let Vo=0;Vo<os.length;Vo++)Ui.push(os[Vo])}return new p.AnimationClip(ot,void 0,Ui)})}createNodeMesh(Ye){const Xe=this.json,lt=this,tt=Xe.nodes[Ye];return tt.mesh===void 0?null:lt.getDependency("mesh",tt.mesh).then(function(ot){const ct=lt._getNodeRef(lt.meshCache,tt.mesh,ot);return tt.weights!==void 0&&ct.traverse(function(Ie){if(Ie.isMesh)for(let ae=0,ge=tt.weights.length;ae<ge;ae++)Ie.morphTargetInfluences[ae]=tt.weights[ae]}),ct})}loadNode(Ye){const Xe=this.json,lt=this,tt=Xe.nodes[Ye],ot=lt._loadNodeShallow(Ye),ct=[],Ie=tt.children||[];for(let ge=0,He=Ie.length;ge<He;ge++)ct.push(lt.getDependency("node",Ie[ge]));const ae=tt.skin===void 0?Promise.resolve(null):lt.getDependency("skin",tt.skin);return Promise.all([ot,Promise.all(ct),ae]).then(function(ge){const He=ge[0],Ze=ge[1],ht=ge[2];ht!==null&&He.traverse(function(St){St.isSkinnedMesh&&St.bind(ht,ts)});for(let St=0,Di=Ze.length;St<Di;St++)He.add(Ze[St]);return He})}_loadNodeShallow(Ye){const Xe=this.json,lt=this.extensions,tt=this;if(this.nodeCache[Ye]!==void 0)return this.nodeCache[Ye];const ot=Xe.nodes[Ye],ct=ot.name?tt.createUniqueName(ot.name):"",Ie=[],ae=tt._invokeOne(function(ge){return ge.createNodeMesh&&ge.createNodeMesh(Ye)});return ae&&Ie.push(ae),ot.camera!==void 0&&Ie.push(tt.getDependency("camera",ot.camera).then(function(ge){return tt._getNodeRef(tt.cameraCache,ot.camera,ge)})),tt._invokeAll(function(ge){return ge.createNodeAttachment&&ge.createNodeAttachment(Ye)}).forEach(function(ge){Ie.push(ge)}),this.nodeCache[Ye]=Promise.all(Ie).then(function(ge){let He;if(ot.isBone===!0?He=new p.Bone:ge.length>1?He=new p.Group:ge.length===1?He=ge[0]:He=new p.Object3D,He!==ge[0])for(let Ze=0,ht=ge.length;Ze<ht;Ze++)He.add(ge[Ze]);if(ot.name&&(He.userData.name=ot.name,He.name=ct),cr(He,ot),ot.extensions&&bn(lt,He,ot),ot.matrix!==void 0){const Ze=new p.Matrix4;Ze.fromArray(ot.matrix),He.applyMatrix4(Ze)}else ot.translation!==void 0&&He.position.fromArray(ot.translation),ot.rotation!==void 0&&He.quaternion.fromArray(ot.rotation),ot.scale!==void 0&&He.scale.fromArray(ot.scale);return tt.associations.has(He)||tt.associations.set(He,{}),tt.associations.get(He).nodes=Ye,He}),this.nodeCache[Ye]}loadScene(Ye){const Xe=this.extensions,lt=this.json.scenes[Ye],tt=this,ot=new p.Group;lt.name&&(ot.name=tt.createUniqueName(lt.name)),cr(ot,lt),lt.extensions&&bn(Xe,ot,lt);const ct=lt.nodes||[],Ie=[];for(let ae=0,ge=ct.length;ae<ge;ae++)Ie.push(tt.getDependency("node",ct[ae]));return Promise.all(Ie).then(function(ae){for(let He=0,Ze=ae.length;He<Ze;He++)ot.add(ae[He]);const ge=He=>{const Ze=new Map;for(const[ht,St]of tt.associations)(ht instanceof p.Material||ht instanceof p.Texture)&&Ze.set(ht,St);return He.traverse(ht=>{const St=tt.associations.get(ht);St!=null&&Ze.set(ht,St)}),Ze};return tt.associations=ge(ot),ot})}_createAnimationTracks(Ye,Xe,lt,tt,ot){const ct=[],Ie=Ye.name?Ye.name:Ye.uuid,ae=[];In[ot.path]===In.weights?Ye.traverse(function(ht){ht.morphTargetInfluences&&ae.push(ht.name?ht.name:ht.uuid)}):ae.push(Ie);let ge;switch(In[ot.path]){case In.weights:ge=p.NumberKeyframeTrack;break;case In.rotation:ge=p.QuaternionKeyframeTrack;break;case In.position:case In.scale:ge=p.VectorKeyframeTrack;break;default:switch(lt.itemSize){case 1:ge=p.NumberKeyframeTrack;break;case 2:case 3:default:ge=p.VectorKeyframeTrack;break}break}const He=tt.interpolation!==void 0?Xn[tt.interpolation]:p.InterpolateLinear,Ze=this._getArrayFromAccessor(lt);for(let ht=0,St=ae.length;ht<St;ht++){const Di=new ge(ae[ht]+"."+In[ot.path],Xe.array,Ze,He);tt.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(Di),ct.push(Di)}return ct}_getArrayFromAccessor(Ye){let Xe=Ye.array;if(Ye.normalized){const lt=Wn(Xe.constructor),tt=new Float32Array(Xe.length);for(let ot=0,ct=Xe.length;ot<ct;ot++)tt[ot]=Xe[ot]*lt;Xe=tt}return Xe}_createCubicSplineTrackInterpolant(Ye){Ye.createInterpolant=function(lt){const tt=this instanceof p.QuaternionKeyframeTrack?Rt:dt;return new tt(this.times,this.values,this.getValueSize()/3,lt)},Ye.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function Us(Ti,Ye,Xe){const lt=Ye.attributes,tt=new p.Box3;if(lt.POSITION!==void 0){const Ie=Xe.json.accessors[lt.POSITION],ae=Ie.min,ge=Ie.max;if(ae!==void 0&&ge!==void 0){if(tt.set(new p.Vector3(ae[0],ae[1],ae[2]),new p.Vector3(ge[0],ge[1],ge[2])),Ie.normalized){const He=Wn(zt[Ie.componentType]);tt.min.multiplyScalar(He),tt.max.multiplyScalar(He)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const ot=Ye.targets;if(ot!==void 0){const Ie=new p.Vector3,ae=new p.Vector3;for(let ge=0,He=ot.length;ge<He;ge++){const Ze=ot[ge];if(Ze.POSITION!==void 0){const ht=Xe.json.accessors[Ze.POSITION],St=ht.min,Di=ht.max;if(St!==void 0&&Di!==void 0){if(ae.setX(Math.max(Math.abs(St[0]),Math.abs(Di[0]))),ae.setY(Math.max(Math.abs(St[1]),Math.abs(Di[1]))),ae.setZ(Math.max(Math.abs(St[2]),Math.abs(Di[2]))),ht.normalized){const Wi=Wn(zt[ht.componentType]);ae.multiplyScalar(Wi)}Ie.max(ae)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}tt.expandByVector(Ie)}Ti.boundingBox=tt;const ct=new p.Sphere;tt.getCenter(ct.center),ct.radius=tt.min.distanceTo(tt.max)/2,Ti.boundingSphere=ct}function Jr(Ti,Ye,Xe){const lt=Ye.attributes,tt=[];function ot(ct,Ie){return Xe.getDependency("accessor",ct).then(function(ae){Ti.setAttribute(Ie,ae)})}for(const ct in lt){const Ie=sn[ct]||ct.toLowerCase();Ie in Ti.attributes||tt.push(ot(lt[ct],Ie))}if(Ye.indices!==void 0&&!Ti.index){const ct=Xe.getDependency("accessor",Ye.indices).then(function(Ie){Ti.setIndex(Ie)});tt.push(ct)}return p.ColorManagement.workingColorSpace!==p.LinearSRGBColorSpace&&"COLOR_0"in lt&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${p.ColorManagement.workingColorSpace}" not supported.`),cr(Ti,Ye),Us(Ti,Ye,Xe),Promise.all(tt).then(function(){return Ye.targets!==void 0?Ir(Ti,Ye.targets,Xe):Ti})}},"./node_modules/three/examples/jsm/loaders/KTX2Loader.js":(ie,we,P)=>{P.r(we),P.d(we,{KTX2Loader:()=>T});var p=P("./node_modules/three/build/three.module.js"),S=P("./node_modules/three/examples/jsm/utils/WorkerPool.js"),z=P("./node_modules/three/examples/jsm/libs/ktx-parse.module.js"),K=P("./node_modules/three/examples/jsm/libs/zstddec.module.js");const D=new WeakMap;let Q=0,V;class T extends p.Loader{constructor(te){super(te),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new S.WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(te){return this.transcoderPath=te,this}setWorkerLimit(te){return this.workerPool.setWorkerLimit(te),this}async detectSupportAsync(te){return this.workerConfig={astcSupported:await te.hasFeatureAsync("texture-compression-astc"),etc1Supported:await te.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await te.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await te.hasFeatureAsync("texture-compression-bc"),bptcSupported:await te.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await te.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(te){return te.isWebGPURenderer===!0?this.workerConfig={astcSupported:te.hasFeature("texture-compression-astc"),etc1Supported:te.hasFeature("texture-compression-etc1"),etc2Supported:te.hasFeature("texture-compression-etc2"),dxtSupported:te.hasFeature("texture-compression-bc"),bptcSupported:te.hasFeature("texture-compression-bptc"),pvrtcSupported:te.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:te.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:te.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:te.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:te.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:te.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:te.extensions.has("WEBGL_compressed_texture_pvrtc")||te.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const te=new p.FileLoader(this.manager);te.setPath(this.transcoderPath),te.setWithCredentials(this.withCredentials);const de=te.loadAsync("basis_transcoder.js"),oe=new p.FileLoader(this.manager);oe.setPath(this.transcoderPath),oe.setResponseType("arraybuffer"),oe.setWithCredentials(this.withCredentials);const ye=oe.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([de,ye]).then(([Me,Ne])=>{const Pe=T.BasisWorker.toString(),Qe=["/* constants */","let _EngineFormat = "+JSON.stringify(T.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(T.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(T.BasisFormat),"/* basis_transcoder.js */",Me,"/* worker */",Pe.substring(Pe.indexOf("{")+1,Pe.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([Qe])),this.transcoderBinary=Ne,this.workerPool.setWorkerCreator(()=>{const De=new Worker(this.workerSourceURL),ke=this.transcoderBinary.slice(0);return De.postMessage({type:"init",config:this.workerConfig,transcoderBinary:ke},[ke]),De})}),Q>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),Q++}return this.transcoderPending}load(te,de,oe,ye){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const Me=new p.FileLoader(this.manager);Me.setResponseType("arraybuffer"),Me.setWithCredentials(this.withCredentials),Me.load(te,Ne=>{if(D.has(Ne))return D.get(Ne).promise.then(de).catch(ye);this._createTexture(Ne).then(Pe=>de?de(Pe):null).catch(ye)},oe,ye)}_createTextureFrom(te,de){const{faces:oe,width:ye,height:Me,format:Ne,type:Pe,error:Qe,dfdFlags:De}=te;if(Pe==="error")return Promise.reject(Qe);let ke;if(de.faceCount===6)ke=new p.CompressedCubeTexture(oe,Ne,p.UnsignedByteType);else{const Ce=oe[0].mipmaps;ke=de.layerCount>1?new p.CompressedArrayTexture(Ce,ye,Me,de.layerCount,Ne,p.UnsignedByteType):new p.CompressedTexture(Ce,ye,Me,Ne,p.UnsignedByteType)}return ke.minFilter=oe[0].mipmaps.length===1?p.LinearFilter:p.LinearMipmapLinearFilter,ke.magFilter=p.LinearFilter,ke.generateMipmaps=!1,ke.needsUpdate=!0,ke.colorSpace=Z(de),ke.premultiplyAlpha=!!(De&z.KHR_DF_FLAG_ALPHA_PREMULTIPLIED),ke}async _createTexture(te,de={}){const oe=(0,z.read)(new Uint8Array(te));if(oe.vkFormat!==z.VK_FORMAT_UNDEFINED)return G(oe);const ye=de,Me=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:te,taskConfig:ye},[te])).then(Ne=>this._createTextureFrom(Ne.data,oe));return D.set(te,{promise:Me}),Me}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),Q--,this}}T.BasisFormat={ETC1S:0,UASTC_4x4:1},T.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},T.EngineFormat={RGBAFormat:p.RGBAFormat,RGBA_ASTC_4x4_Format:p.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:p.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:p.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:p.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:p.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:p.RGB_ETC1_Format,RGB_ETC2_Format:p.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:p.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:p.RGBA_S3TC_DXT1_Format},T.BasisWorker=function(){let ne,te,de;const oe=_EngineFormat,ye=_TranscoderFormat,Me=_BasisFormat;self.addEventListener("message",function(Te){const Ve=Te.data;switch(Ve.type){case"init":ne=Ve.config,Ne(Ve.transcoderBinary);break;case"transcode":te.then(()=>{try{const{faces:st,buffers:dt,width:Mt,height:Rt,hasAlpha:Yt,format:zt,dfdFlags:Ci}=Pe(Ve.buffer);self.postMessage({type:"transcode",id:Ve.id,faces:st,width:Mt,height:Rt,hasAlpha:Yt,format:zt,dfdFlags:Ci},dt)}catch(st){console.error(st),self.postMessage({type:"error",id:Ve.id,error:st.message})}});break}});function Ne(Te){te=new Promise(Ve=>{de={wasmBinary:Te,onRuntimeInitialized:Ve},BASIS(de)}).then(()=>{de.initializeBasis(),de.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function Pe(Te){const Ve=new de.KTX2File(new Uint8Array(Te));function st(){Ve.close(),Ve.delete()}if(!Ve.isValid())throw st(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const dt=Ve.isUASTC()?Me.UASTC_4x4:Me.ETC1S,Mt=Ve.getWidth(),Rt=Ve.getHeight(),Yt=Ve.getLayers()||1,zt=Ve.getLevels(),Ci=Ve.getFaces(),ci=Ve.getHasAlpha(),Qi=Ve.getDFDFlags(),{transcoderFormat:sn,engineFormat:In}=Ce(dt,Mt,Rt,ci);if(!Mt||!Rt||!zt)throw st(),new Error("THREE.KTX2Loader:	Invalid texture");if(!Ve.startTranscoding())throw st(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Xn=[],tr=[];for(let Jn=0;Jn<Ci;Jn++){const bn=[];for(let cr=0;cr<zt;cr++){const Ir=[];let je,xs;for(let Wn=0;Wn<Yt;Wn++){const Ms=Ve.getImageLevelInfo(cr,Wn,Jn);Jn===0&&cr===0&&Wn===0&&(Ms.origWidth%4!==0||Ms.origHeight%4!==0)&&console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),zt>1?(je=Ms.origWidth,xs=Ms.origHeight):(je=Ms.width,xs=Ms.height);const ts=new Uint8Array(Ve.getImageTranscodedSizeInBytes(cr,Wn,0,sn));if(!Ve.transcodeImage(ts,cr,Wn,Jn,sn,0,-1,-1))throw st(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Ir.push(ts)}const mr=Oe(Ir);bn.push({data:mr,width:je,height:xs}),tr.push(mr.buffer)}Xn.push({mipmaps:bn,width:Mt,height:Rt,format:In})}return st(),{faces:Xn,buffers:tr,width:Mt,height:Rt,hasAlpha:ci,format:In,dfdFlags:Qi}}const Qe=[{if:"astcSupported",basisFormat:[Me.UASTC_4x4],transcoderFormat:[ye.ASTC_4x4,ye.ASTC_4x4],engineFormat:[oe.RGBA_ASTC_4x4_Format,oe.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[Me.ETC1S,Me.UASTC_4x4],transcoderFormat:[ye.BC7_M5,ye.BC7_M5],engineFormat:[oe.RGBA_BPTC_Format,oe.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[Me.ETC1S,Me.UASTC_4x4],transcoderFormat:[ye.BC1,ye.BC3],engineFormat:[oe.RGBA_S3TC_DXT1_Format,oe.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[Me.ETC1S,Me.UASTC_4x4],transcoderFormat:[ye.ETC1,ye.ETC2],engineFormat:[oe.RGB_ETC2_Format,oe.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[Me.ETC1S,Me.UASTC_4x4],transcoderFormat:[ye.ETC1],engineFormat:[oe.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[Me.ETC1S,Me.UASTC_4x4],transcoderFormat:[ye.PVRTC1_4_RGB,ye.PVRTC1_4_RGBA],engineFormat:[oe.RGB_PVRTC_4BPPV1_Format,oe.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],De=Qe.sort(function(Te,Ve){return Te.priorityETC1S-Ve.priorityETC1S}),ke=Qe.sort(function(Te,Ve){return Te.priorityUASTC-Ve.priorityUASTC});function Ce(Te,Ve,st,dt){let Mt,Rt;const Yt=Te===Me.ETC1S?De:ke;for(let zt=0;zt<Yt.length;zt++){const Ci=Yt[zt];if(ne[Ci.if]&&Ci.basisFormat.includes(Te)&&!(dt&&Ci.transcoderFormat.length<2)&&!(Ci.needsPowerOfTwo&&!(fe(Ve)&&fe(st))))return Mt=Ci.transcoderFormat[dt?1:0],Rt=Ci.engineFormat[dt?1:0],{transcoderFormat:Mt,engineFormat:Rt}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),Mt=ye.RGBA32,Rt=oe.RGBAFormat,{transcoderFormat:Mt,engineFormat:Rt}}function fe(Te){return Te<=2?!0:(Te&Te-1)===0&&Te!==0}function Oe(Te){if(Te.length===1)return Te[0];let Ve=0;for(let Mt=0;Mt<Te.length;Mt++){const Rt=Te[Mt];Ve+=Rt.byteLength}const st=new Uint8Array(Ve);let dt=0;for(let Mt=0;Mt<Te.length;Mt++){const Rt=Te[Mt];st.set(Rt,dt),dt+=Rt.byteLength}return st}};const F=new Set([p.RGBAFormat,p.RGFormat,p.RedFormat]),N={[z.VK_FORMAT_R32G32B32A32_SFLOAT]:p.RGBAFormat,[z.VK_FORMAT_R16G16B16A16_SFLOAT]:p.RGBAFormat,[z.VK_FORMAT_R8G8B8A8_UNORM]:p.RGBAFormat,[z.VK_FORMAT_R8G8B8A8_SRGB]:p.RGBAFormat,[z.VK_FORMAT_R32G32_SFLOAT]:p.RGFormat,[z.VK_FORMAT_R16G16_SFLOAT]:p.RGFormat,[z.VK_FORMAT_R8G8_UNORM]:p.RGFormat,[z.VK_FORMAT_R8G8_SRGB]:p.RGFormat,[z.VK_FORMAT_R32_SFLOAT]:p.RedFormat,[z.VK_FORMAT_R16_SFLOAT]:p.RedFormat,[z.VK_FORMAT_R8_SRGB]:p.RedFormat,[z.VK_FORMAT_R8_UNORM]:p.RedFormat,[z.VK_FORMAT_ASTC_6x6_SRGB_BLOCK]:p.RGBA_ASTC_6x6_Format,[z.VK_FORMAT_ASTC_6x6_UNORM_BLOCK]:p.RGBA_ASTC_6x6_Format},k={[z.VK_FORMAT_R32G32B32A32_SFLOAT]:p.FloatType,[z.VK_FORMAT_R16G16B16A16_SFLOAT]:p.HalfFloatType,[z.VK_FORMAT_R8G8B8A8_UNORM]:p.UnsignedByteType,[z.VK_FORMAT_R8G8B8A8_SRGB]:p.UnsignedByteType,[z.VK_FORMAT_R32G32_SFLOAT]:p.FloatType,[z.VK_FORMAT_R16G16_SFLOAT]:p.HalfFloatType,[z.VK_FORMAT_R8G8_UNORM]:p.UnsignedByteType,[z.VK_FORMAT_R8G8_SRGB]:p.UnsignedByteType,[z.VK_FORMAT_R32_SFLOAT]:p.FloatType,[z.VK_FORMAT_R16_SFLOAT]:p.HalfFloatType,[z.VK_FORMAT_R8_SRGB]:p.UnsignedByteType,[z.VK_FORMAT_R8_UNORM]:p.UnsignedByteType,[z.VK_FORMAT_ASTC_6x6_SRGB_BLOCK]:p.UnsignedByteType,[z.VK_FORMAT_ASTC_6x6_UNORM_BLOCK]:p.UnsignedByteType};async function G(ne){const{vkFormat:te}=ne;if(N[te]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let de;ne.supercompressionScheme===z.KHR_SUPERCOMPRESSION_ZSTD&&(V||(V=new Promise(async Me=>{const Ne=new K.ZSTDDecoder;await Ne.init(),Me(Ne)})),de=await V);const oe=[];for(let Me=0;Me<ne.levels.length;Me++){const Ne=Math.max(1,ne.pixelWidth>>Me),Pe=Math.max(1,ne.pixelHeight>>Me),Qe=ne.pixelDepth?Math.max(1,ne.pixelDepth>>Me):0,De=ne.levels[Me];let ke;if(ne.supercompressionScheme===z.KHR_SUPERCOMPRESSION_NONE)ke=De.levelData;else if(ne.supercompressionScheme===z.KHR_SUPERCOMPRESSION_ZSTD)ke=de.decode(De.levelData,De.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");let Ce;k[te]===p.FloatType?Ce=new Float32Array(ke.buffer,ke.byteOffset,ke.byteLength/Float32Array.BYTES_PER_ELEMENT):k[te]===p.HalfFloatType?Ce=new Uint16Array(ke.buffer,ke.byteOffset,ke.byteLength/Uint16Array.BYTES_PER_ELEMENT):Ce=ke,oe.push({data:Ce,width:Ne,height:Pe,depth:Qe})}let ye;if(F.has(N[te]))ye=ne.pixelDepth===0?new p.DataTexture(oe[0].data,ne.pixelWidth,ne.pixelHeight):new p.Data3DTexture(oe[0].data,ne.pixelWidth,ne.pixelHeight,ne.pixelDepth);else{if(ne.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");ye=new p.CompressedTexture(oe,ne.pixelWidth,ne.pixelHeight)}return ye.mipmaps=oe,ye.type=k[te],ye.format=N[te],ye.colorSpace=Z(ne),ye.needsUpdate=!0,Promise.resolve(ye)}function Z(ne){const te=ne.dataFormatDescriptor[0];return te.colorPrimaries===z.KHR_DF_PRIMARIES_BT709?te.transferFunction===z.KHR_DF_TRANSFER_SRGB?p.SRGBColorSpace:p.LinearSRGBColorSpace:te.colorPrimaries===z.KHR_DF_PRIMARIES_DISPLAYP3?te.transferFunction===z.KHR_DF_TRANSFER_SRGB?p.DisplayP3ColorSpace:p.LinearDisplayP3ColorSpace:(te.colorPrimaries===z.KHR_DF_PRIMARIES_UNSPECIFIED||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${te.colorPrimaries}"`),p.NoColorSpace)}},"./node_modules/three/examples/jsm/loaders/MTLLoader.js":(ie,we,P)=>{P.r(we),P.d(we,{MTLLoader:()=>S});var p=P("./node_modules/three/build/three.module.js");class S extends p.Loader{constructor(D){super(D)}load(D,Q,V,T){const F=this,N=this.path===""?p.LoaderUtils.extractUrlBase(D):this.path,k=new p.FileLoader(this.manager);k.setPath(this.path),k.setRequestHeader(this.requestHeader),k.setWithCredentials(this.withCredentials),k.load(D,function(G){try{Q(F.parse(G,N))}catch(Z){T?T(Z):console.error(Z),F.manager.itemError(D)}},V,T)}setMaterialOptions(D){return this.materialOptions=D,this}parse(D,Q){const V=D.split(`
`);let T={};const F=/\s+/,N={};for(let G=0;G<V.length;G++){let Z=V[G];if(Z=Z.trim(),Z.length===0||Z.charAt(0)==="#")continue;const ne=Z.indexOf(" ");let te=ne>=0?Z.substring(0,ne):Z;te=te.toLowerCase();let de=ne>=0?Z.substring(ne+1):"";if(de=de.trim(),te==="newmtl")T={name:de},N[de]=T;else if(te==="ka"||te==="kd"||te==="ks"||te==="ke"){const oe=de.split(F,3);T[te]=[parseFloat(oe[0]),parseFloat(oe[1]),parseFloat(oe[2])]}else T[te]=de}const k=new z(this.resourcePath||Q,this.materialOptions);return k.setCrossOrigin(this.crossOrigin),k.setManager(this.manager),k.setMaterials(N),k}}class z{constructor(D="",Q={}){this.baseUrl=D,this.options=Q,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.crossOrigin="anonymous",this.side=this.options.side!==void 0?this.options.side:p.FrontSide,this.wrap=this.options.wrap!==void 0?this.options.wrap:p.RepeatWrapping}setCrossOrigin(D){return this.crossOrigin=D,this}setManager(D){this.manager=D}setMaterials(D){this.materialsInfo=this.convert(D),this.materials={},this.materialsArray=[],this.nameLookup={}}convert(D){if(!this.options)return D;const Q={};for(const V in D){const T=D[V],F={};Q[V]=F;for(const N in T){let k=!0,G=T[N];const Z=N.toLowerCase();switch(Z){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(G=[G[0]/255,G[1]/255,G[2]/255]),this.options&&this.options.ignoreZeroRGBs&&G[0]===0&&G[1]===0&&G[2]===0&&(k=!1);break}k&&(F[Z]=G)}}return Q}preload(){for(const D in this.materialsInfo)this.create(D)}getIndex(D){return this.nameLookup[D]}getAsArray(){let D=0;for(const Q in this.materialsInfo)this.materialsArray[D]=this.create(Q),this.nameLookup[Q]=D,D++;return this.materialsArray}create(D){return this.materials[D]===void 0&&this.createMaterial_(D),this.materials[D]}createMaterial_(D){const Q=this,V=this.materialsInfo[D],T={name:D,side:this.side};function F(k,G){return typeof G!="string"||G===""?"":/^https?:\/\//i.test(G)?G:k+G}function N(k,G){if(T[k])return;const Z=Q.getTextureParams(G,T),ne=Q.loadTexture(F(Q.baseUrl,Z.url));ne.repeat.copy(Z.scale),ne.offset.copy(Z.offset),ne.wrapS=Q.wrap,ne.wrapT=Q.wrap,(k==="map"||k==="emissiveMap")&&(ne.colorSpace=p.SRGBColorSpace),T[k]=ne}for(const k in V){const G=V[k];let Z;if(G!=="")switch(k.toLowerCase()){case"kd":T.color=new p.Color().fromArray(G).convertSRGBToLinear();break;case"ks":T.specular=new p.Color().fromArray(G).convertSRGBToLinear();break;case"ke":T.emissive=new p.Color().fromArray(G).convertSRGBToLinear();break;case"map_kd":N("map",G);break;case"map_ks":N("specularMap",G);break;case"map_ke":N("emissiveMap",G);break;case"norm":N("normalMap",G);break;case"map_bump":case"bump":N("bumpMap",G);break;case"map_d":N("alphaMap",G),T.transparent=!0;break;case"ns":T.shininess=parseFloat(G);break;case"d":Z=parseFloat(G),Z<1&&(T.opacity=Z,T.transparent=!0);break;case"tr":Z=parseFloat(G),this.options&&this.options.invertTrProperty&&(Z=1-Z),Z>0&&(T.opacity=1-Z,T.transparent=!0);break}}return this.materials[D]=new p.MeshPhongMaterial(T),this.materials[D]}getTextureParams(D,Q){const V={scale:new p.Vector2(1,1),offset:new p.Vector2(0,0)},T=D.split(/\s+/);let F;return F=T.indexOf("-bm"),F>=0&&(Q.bumpScale=parseFloat(T[F+1]),T.splice(F,2)),F=T.indexOf("-s"),F>=0&&(V.scale.set(parseFloat(T[F+1]),parseFloat(T[F+2])),T.splice(F,4)),F=T.indexOf("-o"),F>=0&&(V.offset.set(parseFloat(T[F+1]),parseFloat(T[F+2])),T.splice(F,4)),V.url=T.join(" ").trim(),V}loadTexture(D,Q,V,T,F){const N=this.manager!==void 0?this.manager:p.DefaultLoadingManager;let k=N.getHandler(D);k===null&&(k=new p.TextureLoader(N)),k.setCrossOrigin&&k.setCrossOrigin(this.crossOrigin);const G=k.load(D,V,T,F);return Q!==void 0&&(G.mapping=Q),G}}},"./node_modules/three/examples/jsm/loaders/OBJLoader.js":(ie,we,P)=>{P.r(we),P.d(we,{OBJLoader:()=>ne});var p=P("./node_modules/three/build/three.module.js");const S=/^[og]\s*(.+)?/,z=/^mtllib /,K=/^usemtl /,D=/^usemap /,Q=/\s+/,V=new p.Vector3,T=new p.Vector3,F=new p.Vector3,N=new p.Vector3,k=new p.Vector3,G=new p.Color;function Z(){const te={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(de,oe){if(this.object&&this.object.fromDeclaration===!1){this.object.name=de,this.object.fromDeclaration=oe!==!1;return}const ye=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:de||"",fromDeclaration:oe!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(Me,Ne){const Pe=this._finalize(!1);Pe&&(Pe.inherited||Pe.groupCount<=0)&&this.materials.splice(Pe.index,1);const Qe={index:this.materials.length,name:Me||"",mtllib:Array.isArray(Ne)&&Ne.length>0?Ne[Ne.length-1]:"",smooth:Pe!==void 0?Pe.smooth:this.smooth,groupStart:Pe!==void 0?Pe.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(De){const ke={index:typeof De=="number"?De:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return ke.clone=this.clone.bind(ke),ke}};return this.materials.push(Qe),Qe},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(Me){const Ne=this.currentMaterial();if(Ne&&Ne.groupEnd===-1&&(Ne.groupEnd=this.geometry.vertices.length/3,Ne.groupCount=Ne.groupEnd-Ne.groupStart,Ne.inherited=!1),Me&&this.materials.length>1)for(let Pe=this.materials.length-1;Pe>=0;Pe--)this.materials[Pe].groupCount<=0&&this.materials.splice(Pe,1);return Me&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),Ne}},ye&&ye.name&&typeof ye.clone=="function"){const Me=ye.clone(0);Me.inherited=!0,this.object.materials.push(Me)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(de,oe){const ye=parseInt(de,10);return(ye>=0?ye-1:ye+oe/3)*3},parseNormalIndex:function(de,oe){const ye=parseInt(de,10);return(ye>=0?ye-1:ye+oe/3)*3},parseUVIndex:function(de,oe){const ye=parseInt(de,10);return(ye>=0?ye-1:ye+oe/2)*2},addVertex:function(de,oe,ye){const Me=this.vertices,Ne=this.object.geometry.vertices;Ne.push(Me[de+0],Me[de+1],Me[de+2]),Ne.push(Me[oe+0],Me[oe+1],Me[oe+2]),Ne.push(Me[ye+0],Me[ye+1],Me[ye+2])},addVertexPoint:function(de){const oe=this.vertices;this.object.geometry.vertices.push(oe[de+0],oe[de+1],oe[de+2])},addVertexLine:function(de){const oe=this.vertices;this.object.geometry.vertices.push(oe[de+0],oe[de+1],oe[de+2])},addNormal:function(de,oe,ye){const Me=this.normals,Ne=this.object.geometry.normals;Ne.push(Me[de+0],Me[de+1],Me[de+2]),Ne.push(Me[oe+0],Me[oe+1],Me[oe+2]),Ne.push(Me[ye+0],Me[ye+1],Me[ye+2])},addFaceNormal:function(de,oe,ye){const Me=this.vertices,Ne=this.object.geometry.normals;V.fromArray(Me,de),T.fromArray(Me,oe),F.fromArray(Me,ye),k.subVectors(F,T),N.subVectors(V,T),k.cross(N),k.normalize(),Ne.push(k.x,k.y,k.z),Ne.push(k.x,k.y,k.z),Ne.push(k.x,k.y,k.z)},addColor:function(de,oe,ye){const Me=this.colors,Ne=this.object.geometry.colors;Me[de]!==void 0&&Ne.push(Me[de+0],Me[de+1],Me[de+2]),Me[oe]!==void 0&&Ne.push(Me[oe+0],Me[oe+1],Me[oe+2]),Me[ye]!==void 0&&Ne.push(Me[ye+0],Me[ye+1],Me[ye+2])},addUV:function(de,oe,ye){const Me=this.uvs,Ne=this.object.geometry.uvs;Ne.push(Me[de+0],Me[de+1]),Ne.push(Me[oe+0],Me[oe+1]),Ne.push(Me[ye+0],Me[ye+1])},addDefaultUV:function(){const de=this.object.geometry.uvs;de.push(0,0),de.push(0,0),de.push(0,0)},addUVLine:function(de){const oe=this.uvs;this.object.geometry.uvs.push(oe[de+0],oe[de+1])},addFace:function(de,oe,ye,Me,Ne,Pe,Qe,De,ke){const Ce=this.vertices.length;let fe=this.parseVertexIndex(de,Ce),Oe=this.parseVertexIndex(oe,Ce),Te=this.parseVertexIndex(ye,Ce);if(this.addVertex(fe,Oe,Te),this.addColor(fe,Oe,Te),Qe!==void 0&&Qe!==""){const Ve=this.normals.length;fe=this.parseNormalIndex(Qe,Ve),Oe=this.parseNormalIndex(De,Ve),Te=this.parseNormalIndex(ke,Ve),this.addNormal(fe,Oe,Te)}else this.addFaceNormal(fe,Oe,Te);if(Me!==void 0&&Me!==""){const Ve=this.uvs.length;fe=this.parseUVIndex(Me,Ve),Oe=this.parseUVIndex(Ne,Ve),Te=this.parseUVIndex(Pe,Ve),this.addUV(fe,Oe,Te),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(de){this.object.geometry.type="Points";const oe=this.vertices.length;for(let ye=0,Me=de.length;ye<Me;ye++){const Ne=this.parseVertexIndex(de[ye],oe);this.addVertexPoint(Ne),this.addColor(Ne)}},addLineGeometry:function(de,oe){this.object.geometry.type="Line";const ye=this.vertices.length,Me=this.uvs.length;for(let Ne=0,Pe=de.length;Ne<Pe;Ne++)this.addVertexLine(this.parseVertexIndex(de[Ne],ye));for(let Ne=0,Pe=oe.length;Ne<Pe;Ne++)this.addUVLine(this.parseUVIndex(oe[Ne],Me))}};return te.startObject("",!1),te}class ne extends p.Loader{constructor(de){super(de),this.materials=null}load(de,oe,ye,Me){const Ne=this,Pe=new p.FileLoader(this.manager);Pe.setPath(this.path),Pe.setRequestHeader(this.requestHeader),Pe.setWithCredentials(this.withCredentials),Pe.load(de,function(Qe){try{oe(Ne.parse(Qe))}catch(De){Me?Me(De):console.error(De),Ne.manager.itemError(de)}},ye,Me)}setMaterials(de){return this.materials=de,this}parse(de){const oe=new Z;de.indexOf(`\r
`)!==-1&&(de=de.replace(/\r\n/g,`
`)),de.indexOf(`\\
`)!==-1&&(de=de.replace(/\\\n/g,""));const ye=de.split(`
`);let Me=[];for(let Qe=0,De=ye.length;Qe<De;Qe++){const ke=ye[Qe].trimStart();if(ke.length===0)continue;const Ce=ke.charAt(0);if(Ce!=="#")if(Ce==="v"){const fe=ke.split(Q);switch(fe[0]){case"v":oe.vertices.push(parseFloat(fe[1]),parseFloat(fe[2]),parseFloat(fe[3])),fe.length>=7?(G.setRGB(parseFloat(fe[4]),parseFloat(fe[5]),parseFloat(fe[6])).convertSRGBToLinear(),oe.colors.push(G.r,G.g,G.b)):oe.colors.push(void 0,void 0,void 0);break;case"vn":oe.normals.push(parseFloat(fe[1]),parseFloat(fe[2]),parseFloat(fe[3]));break;case"vt":oe.uvs.push(parseFloat(fe[1]),parseFloat(fe[2]));break}}else if(Ce==="f"){const Oe=ke.slice(1).trim().split(Q),Te=[];for(let st=0,dt=Oe.length;st<dt;st++){const Mt=Oe[st];if(Mt.length>0){const Rt=Mt.split("/");Te.push(Rt)}}const Ve=Te[0];for(let st=1,dt=Te.length-1;st<dt;st++){const Mt=Te[st],Rt=Te[st+1];oe.addFace(Ve[0],Mt[0],Rt[0],Ve[1],Mt[1],Rt[1],Ve[2],Mt[2],Rt[2])}}else if(Ce==="l"){const fe=ke.substring(1).trim().split(" ");let Oe=[];const Te=[];if(ke.indexOf("/")===-1)Oe=fe;else for(let Ve=0,st=fe.length;Ve<st;Ve++){const dt=fe[Ve].split("/");dt[0]!==""&&Oe.push(dt[0]),dt[1]!==""&&Te.push(dt[1])}oe.addLineGeometry(Oe,Te)}else if(Ce==="p"){const Oe=ke.slice(1).trim().split(" ");oe.addPointGeometry(Oe)}else if((Me=S.exec(ke))!==null){const fe=(" "+Me[0].slice(1).trim()).slice(1);oe.startObject(fe)}else if(K.test(ke))oe.object.startMaterial(ke.substring(7).trim(),oe.materialLibraries);else if(z.test(ke))oe.materialLibraries.push(ke.substring(7).trim());else if(D.test(ke))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(Ce==="s"){if(Me=ke.split(" "),Me.length>1){const Oe=Me[1].trim().toLowerCase();oe.object.smooth=Oe!=="0"&&Oe!=="off"}else oe.object.smooth=!0;const fe=oe.object.currentMaterial();fe&&(fe.smooth=oe.object.smooth)}else{if(ke==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+ke+'"')}}oe.finalize();const Ne=new p.Group;if(Ne.materialLibraries=[].concat(oe.materialLibraries),!(oe.objects.length===1&&oe.objects[0].geometry.vertices.length===0)===!0)for(let Qe=0,De=oe.objects.length;Qe<De;Qe++){const ke=oe.objects[Qe],Ce=ke.geometry,fe=ke.materials,Oe=Ce.type==="Line",Te=Ce.type==="Points";let Ve=!1;if(Ce.vertices.length===0)continue;const st=new p.BufferGeometry;st.setAttribute("position",new p.Float32BufferAttribute(Ce.vertices,3)),Ce.normals.length>0&&st.setAttribute("normal",new p.Float32BufferAttribute(Ce.normals,3)),Ce.colors.length>0&&(Ve=!0,st.setAttribute("color",new p.Float32BufferAttribute(Ce.colors,3))),Ce.hasUVIndices===!0&&st.setAttribute("uv",new p.Float32BufferAttribute(Ce.uvs,2));const dt=[];for(let Rt=0,Yt=fe.length;Rt<Yt;Rt++){const zt=fe[Rt],Ci=zt.name+"_"+zt.smooth+"_"+Ve;let ci=oe.materials[Ci];if(this.materials!==null){if(ci=this.materials.create(zt.name),Oe&&ci&&!(ci instanceof p.LineBasicMaterial)){const Qi=new p.LineBasicMaterial;p.Material.prototype.copy.call(Qi,ci),Qi.color.copy(ci.color),ci=Qi}else if(Te&&ci&&!(ci instanceof p.PointsMaterial)){const Qi=new p.PointsMaterial({size:10,sizeAttenuation:!1});p.Material.prototype.copy.call(Qi,ci),Qi.color.copy(ci.color),Qi.map=ci.map,ci=Qi}}ci===void 0&&(Oe?ci=new p.LineBasicMaterial:Te?ci=new p.PointsMaterial({size:1,sizeAttenuation:!1}):ci=new p.MeshPhongMaterial,ci.name=zt.name,ci.flatShading=!zt.smooth,ci.vertexColors=Ve,oe.materials[Ci]=ci),dt.push(ci)}let Mt;if(dt.length>1){for(let Rt=0,Yt=fe.length;Rt<Yt;Rt++){const zt=fe[Rt];st.addGroup(zt.groupStart,zt.groupCount,Rt)}Oe?Mt=new p.LineSegments(st,dt):Te?Mt=new p.Points(st,dt):Mt=new p.Mesh(st,dt)}else Oe?Mt=new p.LineSegments(st,dt[0]):Te?Mt=new p.Points(st,dt[0]):Mt=new p.Mesh(st,dt[0]);Mt.name=ke.name,Ne.add(Mt)}else if(oe.vertices.length>0){const Qe=new p.PointsMaterial({size:1,sizeAttenuation:!1}),De=new p.BufferGeometry;De.setAttribute("position",new p.Float32BufferAttribute(oe.vertices,3)),oe.colors.length>0&&oe.colors[0]!==void 0&&(De.setAttribute("color",new p.Float32BufferAttribute(oe.colors,3)),Qe.vertexColors=!0);const ke=new p.Points(De,Qe);Ne.add(ke)}return Ne}}},"./node_modules/three/examples/jsm/math/OBB.js":(ie,we,P)=>{P.r(we),P.d(we,{OBB:()=>ye});var p=P("./node_modules/three/build/three.module.js");const S={c:null,u:[new p.Vector3,new p.Vector3,new p.Vector3],e:[]},z={c:null,u:[new p.Vector3,new p.Vector3,new p.Vector3],e:[]},K=[[],[],[]],D=[[],[],[]],Q=[],V=new p.Vector3,T=new p.Vector3,F=new p.Vector3,N=new p.Vector3,k=new p.Vector3,G=new p.Vector3,Z=new p.Matrix3,ne=new p.Box3,te=new p.Matrix4,de=new p.Matrix4,oe=new p.Ray;class ye{constructor(Pe=new p.Vector3,Qe=new p.Vector3,De=new p.Matrix3){this.center=Pe,this.halfSize=Qe,this.rotation=De}set(Pe,Qe,De){return this.center=Pe,this.halfSize=Qe,this.rotation=De,this}copy(Pe){return this.center.copy(Pe.center),this.halfSize.copy(Pe.halfSize),this.rotation.copy(Pe.rotation),this}clone(){return new this.constructor().copy(this)}getSize(Pe){return Pe.copy(this.halfSize).multiplyScalar(2)}clampPoint(Pe,Qe){const De=this.halfSize;N.subVectors(Pe,this.center),this.rotation.extractBasis(V,T,F),Qe.copy(this.center);const ke=p.MathUtils.clamp(N.dot(V),-De.x,De.x);Qe.add(V.multiplyScalar(ke));const Ce=p.MathUtils.clamp(N.dot(T),-De.y,De.y);Qe.add(T.multiplyScalar(Ce));const fe=p.MathUtils.clamp(N.dot(F),-De.z,De.z);return Qe.add(F.multiplyScalar(fe)),Qe}containsPoint(Pe){return N.subVectors(Pe,this.center),this.rotation.extractBasis(V,T,F),Math.abs(N.dot(V))<=this.halfSize.x&&Math.abs(N.dot(T))<=this.halfSize.y&&Math.abs(N.dot(F))<=this.halfSize.z}intersectsBox3(Pe){return this.intersectsOBB(Me.fromBox3(Pe))}intersectsSphere(Pe){return this.clampPoint(Pe.center,G),G.distanceToSquared(Pe.center)<=Pe.radius*Pe.radius}intersectsOBB(Pe,Qe=Number.EPSILON){S.c=this.center,S.e[0]=this.halfSize.x,S.e[1]=this.halfSize.y,S.e[2]=this.halfSize.z,this.rotation.extractBasis(S.u[0],S.u[1],S.u[2]),z.c=Pe.center,z.e[0]=Pe.halfSize.x,z.e[1]=Pe.halfSize.y,z.e[2]=Pe.halfSize.z,Pe.rotation.extractBasis(z.u[0],z.u[1],z.u[2]);for(let Ce=0;Ce<3;Ce++)for(let fe=0;fe<3;fe++)K[Ce][fe]=S.u[Ce].dot(z.u[fe]);N.subVectors(z.c,S.c),Q[0]=N.dot(S.u[0]),Q[1]=N.dot(S.u[1]),Q[2]=N.dot(S.u[2]);for(let Ce=0;Ce<3;Ce++)for(let fe=0;fe<3;fe++)D[Ce][fe]=Math.abs(K[Ce][fe])+Qe;let De,ke;for(let Ce=0;Ce<3;Ce++)if(De=S.e[Ce],ke=z.e[0]*D[Ce][0]+z.e[1]*D[Ce][1]+z.e[2]*D[Ce][2],Math.abs(Q[Ce])>De+ke)return!1;for(let Ce=0;Ce<3;Ce++)if(De=S.e[0]*D[0][Ce]+S.e[1]*D[1][Ce]+S.e[2]*D[2][Ce],ke=z.e[Ce],Math.abs(Q[0]*K[0][Ce]+Q[1]*K[1][Ce]+Q[2]*K[2][Ce])>De+ke)return!1;return De=S.e[1]*D[2][0]+S.e[2]*D[1][0],ke=z.e[1]*D[0][2]+z.e[2]*D[0][1],!(Math.abs(Q[2]*K[1][0]-Q[1]*K[2][0])>De+ke||(De=S.e[1]*D[2][1]+S.e[2]*D[1][1],ke=z.e[0]*D[0][2]+z.e[2]*D[0][0],Math.abs(Q[2]*K[1][1]-Q[1]*K[2][1])>De+ke)||(De=S.e[1]*D[2][2]+S.e[2]*D[1][2],ke=z.e[0]*D[0][1]+z.e[1]*D[0][0],Math.abs(Q[2]*K[1][2]-Q[1]*K[2][2])>De+ke)||(De=S.e[0]*D[2][0]+S.e[2]*D[0][0],ke=z.e[1]*D[1][2]+z.e[2]*D[1][1],Math.abs(Q[0]*K[2][0]-Q[2]*K[0][0])>De+ke)||(De=S.e[0]*D[2][1]+S.e[2]*D[0][1],ke=z.e[0]*D[1][2]+z.e[2]*D[1][0],Math.abs(Q[0]*K[2][1]-Q[2]*K[0][1])>De+ke)||(De=S.e[0]*D[2][2]+S.e[2]*D[0][2],ke=z.e[0]*D[1][1]+z.e[1]*D[1][0],Math.abs(Q[0]*K[2][2]-Q[2]*K[0][2])>De+ke)||(De=S.e[0]*D[1][0]+S.e[1]*D[0][0],ke=z.e[1]*D[2][2]+z.e[2]*D[2][1],Math.abs(Q[1]*K[0][0]-Q[0]*K[1][0])>De+ke)||(De=S.e[0]*D[1][1]+S.e[1]*D[0][1],ke=z.e[0]*D[2][2]+z.e[2]*D[2][0],Math.abs(Q[1]*K[0][1]-Q[0]*K[1][1])>De+ke)||(De=S.e[0]*D[1][2]+S.e[1]*D[0][2],ke=z.e[0]*D[2][1]+z.e[1]*D[2][0],Math.abs(Q[1]*K[0][2]-Q[0]*K[1][2])>De+ke))}intersectsPlane(Pe){this.rotation.extractBasis(V,T,F);const Qe=this.halfSize.x*Math.abs(Pe.normal.dot(V))+this.halfSize.y*Math.abs(Pe.normal.dot(T))+this.halfSize.z*Math.abs(Pe.normal.dot(F)),De=Pe.normal.dot(this.center)-Pe.constant;return Math.abs(De)<=Qe}intersectRay(Pe,Qe){return this.getSize(k),ne.setFromCenterAndSize(N.set(0,0,0),k),te.setFromMatrix3(this.rotation),te.setPosition(this.center),de.copy(te).invert(),oe.copy(Pe).applyMatrix4(de),oe.intersectBox(ne,Qe)?Qe.applyMatrix4(te):null}intersectsRay(Pe){return this.intersectRay(Pe,N)!==null}fromBox3(Pe){return Pe.getCenter(this.center),Pe.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this}equals(Pe){return Pe.center.equals(this.center)&&Pe.halfSize.equals(this.halfSize)&&Pe.rotation.equals(this.rotation)}applyMatrix4(Pe){const Qe=Pe.elements;let De=N.set(Qe[0],Qe[1],Qe[2]).length();const ke=N.set(Qe[4],Qe[5],Qe[6]).length(),Ce=N.set(Qe[8],Qe[9],Qe[10]).length();Pe.determinant()<0&&(De=-De),Z.setFromMatrix4(Pe);const Oe=1/De,Te=1/ke,Ve=1/Ce;return Z.elements[0]*=Oe,Z.elements[1]*=Oe,Z.elements[2]*=Oe,Z.elements[3]*=Te,Z.elements[4]*=Te,Z.elements[5]*=Te,Z.elements[6]*=Ve,Z.elements[7]*=Ve,Z.elements[8]*=Ve,this.rotation.multiply(Z),this.halfSize.x*=De,this.halfSize.y*=ke,this.halfSize.z*=Ce,N.setFromMatrixPosition(Pe),this.center.add(N),this}}const Me=new ye},"./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js":(ie,we,P)=>{P.r(we),P.d(we,{computeMikkTSpaceTangents:()=>S,computeMorphedAttributes:()=>G,deepCloneAttribute:()=>D,deinterleaveAttribute:()=>V,deinterleaveGeometry:()=>T,estimateBytesUsed:()=>F,interleaveAttributes:()=>Q,mergeAttributes:()=>K,mergeGeometries:()=>z,mergeGroups:()=>Z,mergeVertices:()=>N,toCreasedNormals:()=>ne,toTrianglesDrawMode:()=>k});var p=P("./node_modules/three/build/three.module.js");function S(te,de,oe=!0){if(!de||!de.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!te.hasAttribute("position")||!te.hasAttribute("normal")||!te.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function ye(Pe){if(Pe.normalized||Pe.isInterleavedBufferAttribute){const Qe=new Float32Array(Pe.count*Pe.itemSize);for(let De=0,ke=0;De<Pe.count;De++)Qe[ke++]=Pe.getX(De),Qe[ke++]=Pe.getY(De),Pe.itemSize>2&&(Qe[ke++]=Pe.getZ(De));return Qe}return Pe.array instanceof Float32Array?Pe.array:new Float32Array(Pe.array)}const Me=te.index?te.toNonIndexed():te,Ne=de.generateTangents(ye(Me.attributes.position),ye(Me.attributes.normal),ye(Me.attributes.uv));if(oe)for(let Pe=3;Pe<Ne.length;Pe+=4)Ne[Pe]*=-1;return Me.setAttribute("tangent",new p.BufferAttribute(Ne,4)),te!==Me&&te.copy(Me),te}function z(te,de=!1){const oe=te[0].index!==null,ye=new Set(Object.keys(te[0].attributes)),Me=new Set(Object.keys(te[0].morphAttributes)),Ne={},Pe={},Qe=te[0].morphTargetsRelative,De=new p.BufferGeometry;let ke=0;for(let Ce=0;Ce<te.length;++Ce){const fe=te[Ce];let Oe=0;if(oe!==(fe.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ce+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const Te in fe.attributes){if(!ye.has(Te))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ce+'. All geometries must have compatible attributes; make sure "'+Te+'" attribute exists among all geometries, or in none of them.'),null;Ne[Te]===void 0&&(Ne[Te]=[]),Ne[Te].push(fe.attributes[Te]),Oe++}if(Oe!==ye.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ce+". Make sure all geometries have the same number of attributes."),null;if(Qe!==fe.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ce+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const Te in fe.morphAttributes){if(!Me.has(Te))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ce+".  .morphAttributes must be consistent throughout all geometries."),null;Pe[Te]===void 0&&(Pe[Te]=[]),Pe[Te].push(fe.morphAttributes[Te])}if(de){let Te;if(oe)Te=fe.index.count;else if(fe.attributes.position!==void 0)Te=fe.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ce+". The geometry must have either an index or a position attribute"),null;De.addGroup(ke,Te,Ce),ke+=Te}}if(oe){let Ce=0;const fe=[];for(let Oe=0;Oe<te.length;++Oe){const Te=te[Oe].index;for(let Ve=0;Ve<Te.count;++Ve)fe.push(Te.getX(Ve)+Ce);Ce+=te[Oe].attributes.position.count}De.setIndex(fe)}for(const Ce in Ne){const fe=K(Ne[Ce]);if(!fe)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+Ce+" attribute."),null;De.setAttribute(Ce,fe)}for(const Ce in Pe){const fe=Pe[Ce][0].length;if(fe===0)break;De.morphAttributes=De.morphAttributes||{},De.morphAttributes[Ce]=[];for(let Oe=0;Oe<fe;++Oe){const Te=[];for(let st=0;st<Pe[Ce].length;++st)Te.push(Pe[Ce][st][Oe]);const Ve=K(Te);if(!Ve)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+Ce+" morphAttribute."),null;De.morphAttributes[Ce].push(Ve)}}return De}function K(te){let de,oe,ye,Me=-1,Ne=0;for(let ke=0;ke<te.length;++ke){const Ce=te[ke];if(de===void 0&&(de=Ce.array.constructor),de!==Ce.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(oe===void 0&&(oe=Ce.itemSize),oe!==Ce.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(ye===void 0&&(ye=Ce.normalized),ye!==Ce.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(Me===-1&&(Me=Ce.gpuType),Me!==Ce.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;Ne+=Ce.count*oe}const Pe=new de(Ne),Qe=new p.BufferAttribute(Pe,oe,ye);let De=0;for(let ke=0;ke<te.length;++ke){const Ce=te[ke];if(Ce.isInterleavedBufferAttribute){const fe=De/oe;for(let Oe=0,Te=Ce.count;Oe<Te;Oe++)for(let Ve=0;Ve<oe;Ve++){const st=Ce.getComponent(Oe,Ve);Qe.setComponent(Oe+fe,Ve,st)}}else Pe.set(Ce.array,De);De+=Ce.count*oe}return Me!==void 0&&(Qe.gpuType=Me),Qe}function D(te){return te.isInstancedInterleavedBufferAttribute||te.isInterleavedBufferAttribute?V(te):te.isInstancedBufferAttribute?new p.InstancedBufferAttribute().copy(te):new p.BufferAttribute().copy(te)}function Q(te){let de,oe=0,ye=0;for(let ke=0,Ce=te.length;ke<Ce;++ke){const fe=te[ke];if(de===void 0&&(de=fe.array.constructor),de!==fe.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;oe+=fe.array.length,ye+=fe.itemSize}const Me=new p.InterleavedBuffer(new de(oe),ye);let Ne=0;const Pe=[],Qe=["getX","getY","getZ","getW"],De=["setX","setY","setZ","setW"];for(let ke=0,Ce=te.length;ke<Ce;ke++){const fe=te[ke],Oe=fe.itemSize,Te=fe.count,Ve=new p.InterleavedBufferAttribute(Me,Oe,Ne,fe.normalized);Pe.push(Ve),Ne+=Oe;for(let st=0;st<Te;st++)for(let dt=0;dt<Oe;dt++)Ve[De[dt]](st,fe[Qe[dt]](st))}return Pe}function V(te){const de=te.data.array.constructor,oe=te.count,ye=te.itemSize,Me=te.normalized,Ne=new de(oe*ye);let Pe;te.isInstancedInterleavedBufferAttribute?Pe=new p.InstancedBufferAttribute(Ne,ye,Me,te.meshPerAttribute):Pe=new p.BufferAttribute(Ne,ye,Me);for(let Qe=0;Qe<oe;Qe++)Pe.setX(Qe,te.getX(Qe)),ye>=2&&Pe.setY(Qe,te.getY(Qe)),ye>=3&&Pe.setZ(Qe,te.getZ(Qe)),ye>=4&&Pe.setW(Qe,te.getW(Qe));return Pe}function T(te){const de=te.attributes,oe=te.morphTargets,ye=new Map;for(const Me in de){const Ne=de[Me];Ne.isInterleavedBufferAttribute&&(ye.has(Ne)||ye.set(Ne,V(Ne)),de[Me]=ye.get(Ne))}for(const Me in oe){const Ne=oe[Me];Ne.isInterleavedBufferAttribute&&(ye.has(Ne)||ye.set(Ne,V(Ne)),oe[Me]=ye.get(Ne))}}function F(te){let de=0;for(const ye in te.attributes){const Me=te.getAttribute(ye);de+=Me.count*Me.itemSize*Me.array.BYTES_PER_ELEMENT}const oe=te.getIndex();return de+=oe?oe.count*oe.itemSize*oe.array.BYTES_PER_ELEMENT:0,de}function N(te,de=1e-4){de=Math.max(de,Number.EPSILON);const oe={},ye=te.getIndex(),Me=te.getAttribute("position"),Ne=ye?ye.count:Me.count;let Pe=0;const Qe=Object.keys(te.attributes),De={},ke={},Ce=[],fe=["getX","getY","getZ","getW"],Oe=["setX","setY","setZ","setW"];for(let Rt=0,Yt=Qe.length;Rt<Yt;Rt++){const zt=Qe[Rt],Ci=te.attributes[zt];De[zt]=new p.BufferAttribute(new Ci.array.constructor(Ci.count*Ci.itemSize),Ci.itemSize,Ci.normalized);const ci=te.morphAttributes[zt];ci&&(ke[zt]=new p.BufferAttribute(new ci.array.constructor(ci.count*ci.itemSize),ci.itemSize,ci.normalized))}const Te=de*.5,Ve=Math.log10(1/de),st=Math.pow(10,Ve),dt=Te*st;for(let Rt=0;Rt<Ne;Rt++){const Yt=ye?ye.getX(Rt):Rt;let zt="";for(let Ci=0,ci=Qe.length;Ci<ci;Ci++){const Qi=Qe[Ci],sn=te.getAttribute(Qi),In=sn.itemSize;for(let Xn=0;Xn<In;Xn++)zt+=`${~~(sn[fe[Xn]](Yt)*st+dt)},`}if(zt in oe)Ce.push(oe[zt]);else{for(let Ci=0,ci=Qe.length;Ci<ci;Ci++){const Qi=Qe[Ci],sn=te.getAttribute(Qi),In=te.morphAttributes[Qi],Xn=sn.itemSize,tr=De[Qi],Jn=ke[Qi];for(let bn=0;bn<Xn;bn++){const cr=fe[bn],Ir=Oe[bn];if(tr[Ir](Pe,sn[cr](Yt)),In)for(let je=0,xs=In.length;je<xs;je++)Jn[je][Ir](Pe,In[je][cr](Yt))}}oe[zt]=Pe,Ce.push(Pe),Pe++}}const Mt=te.clone();for(const Rt in te.attributes){const Yt=De[Rt];if(Mt.setAttribute(Rt,new p.BufferAttribute(Yt.array.slice(0,Pe*Yt.itemSize),Yt.itemSize,Yt.normalized)),Rt in ke)for(let zt=0;zt<ke[Rt].length;zt++){const Ci=ke[Rt][zt];Mt.morphAttributes[Rt][zt]=new p.BufferAttribute(Ci.array.slice(0,Pe*Ci.itemSize),Ci.itemSize,Ci.normalized)}}return Mt.setIndex(Ce),Mt}function k(te,de){if(de===p.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),te;if(de===p.TriangleFanDrawMode||de===p.TriangleStripDrawMode){let oe=te.getIndex();if(oe===null){const Pe=[],Qe=te.getAttribute("position");if(Qe!==void 0){for(let De=0;De<Qe.count;De++)Pe.push(De);te.setIndex(Pe),oe=te.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),te}const ye=oe.count-2,Me=[];if(de===p.TriangleFanDrawMode)for(let Pe=1;Pe<=ye;Pe++)Me.push(oe.getX(0)),Me.push(oe.getX(Pe)),Me.push(oe.getX(Pe+1));else for(let Pe=0;Pe<ye;Pe++)Pe%2===0?(Me.push(oe.getX(Pe)),Me.push(oe.getX(Pe+1)),Me.push(oe.getX(Pe+2))):(Me.push(oe.getX(Pe+2)),Me.push(oe.getX(Pe+1)),Me.push(oe.getX(Pe)));Me.length/3!==ye&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const Ne=te.clone();return Ne.setIndex(Me),Ne.clearGroups(),Ne}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",de),te}function G(te){const de=new p.Vector3,oe=new p.Vector3,ye=new p.Vector3,Me=new p.Vector3,Ne=new p.Vector3,Pe=new p.Vector3,Qe=new p.Vector3,De=new p.Vector3,ke=new p.Vector3;function Ce(Wn,Ms,ts,Co,Us,Jr,Ti,Ye){de.fromBufferAttribute(Ms,Us),oe.fromBufferAttribute(Ms,Jr),ye.fromBufferAttribute(Ms,Ti);const Xe=Wn.morphTargetInfluences;if(ts&&Xe){Qe.set(0,0,0),De.set(0,0,0),ke.set(0,0,0);for(let lt=0,tt=ts.length;lt<tt;lt++){const ot=Xe[lt],ct=ts[lt];ot!==0&&(Me.fromBufferAttribute(ct,Us),Ne.fromBufferAttribute(ct,Jr),Pe.fromBufferAttribute(ct,Ti),Co?(Qe.addScaledVector(Me,ot),De.addScaledVector(Ne,ot),ke.addScaledVector(Pe,ot)):(Qe.addScaledVector(Me.sub(de),ot),De.addScaledVector(Ne.sub(oe),ot),ke.addScaledVector(Pe.sub(ye),ot)))}de.add(Qe),oe.add(De),ye.add(ke)}Wn.isSkinnedMesh&&(Wn.applyBoneTransform(Us,de),Wn.applyBoneTransform(Jr,oe),Wn.applyBoneTransform(Ti,ye)),Ye[Us*3+0]=de.x,Ye[Us*3+1]=de.y,Ye[Us*3+2]=de.z,Ye[Jr*3+0]=oe.x,Ye[Jr*3+1]=oe.y,Ye[Jr*3+2]=oe.z,Ye[Ti*3+0]=ye.x,Ye[Ti*3+1]=ye.y,Ye[Ti*3+2]=ye.z}const fe=te.geometry,Oe=te.material;let Te,Ve,st;const dt=fe.index,Mt=fe.attributes.position,Rt=fe.morphAttributes.position,Yt=fe.morphTargetsRelative,zt=fe.attributes.normal,Ci=fe.morphAttributes.position,ci=fe.groups,Qi=fe.drawRange;let sn,In,Xn,tr,Jn,bn,cr;const Ir=new Float32Array(Mt.count*Mt.itemSize),je=new Float32Array(zt.count*zt.itemSize);if(dt!==null)if(Array.isArray(Oe))for(sn=0,Xn=ci.length;sn<Xn;sn++)for(Jn=ci[sn],bn=Math.max(Jn.start,Qi.start),cr=Math.min(Jn.start+Jn.count,Qi.start+Qi.count),In=bn,tr=cr;In<tr;In+=3)Te=dt.getX(In),Ve=dt.getX(In+1),st=dt.getX(In+2),Ce(te,Mt,Rt,Yt,Te,Ve,st,Ir),Ce(te,zt,Ci,Yt,Te,Ve,st,je);else for(bn=Math.max(0,Qi.start),cr=Math.min(dt.count,Qi.start+Qi.count),sn=bn,Xn=cr;sn<Xn;sn+=3)Te=dt.getX(sn),Ve=dt.getX(sn+1),st=dt.getX(sn+2),Ce(te,Mt,Rt,Yt,Te,Ve,st,Ir),Ce(te,zt,Ci,Yt,Te,Ve,st,je);else if(Array.isArray(Oe))for(sn=0,Xn=ci.length;sn<Xn;sn++)for(Jn=ci[sn],bn=Math.max(Jn.start,Qi.start),cr=Math.min(Jn.start+Jn.count,Qi.start+Qi.count),In=bn,tr=cr;In<tr;In+=3)Te=In,Ve=In+1,st=In+2,Ce(te,Mt,Rt,Yt,Te,Ve,st,Ir),Ce(te,zt,Ci,Yt,Te,Ve,st,je);else for(bn=Math.max(0,Qi.start),cr=Math.min(Mt.count,Qi.start+Qi.count),sn=bn,Xn=cr;sn<Xn;sn+=3)Te=sn,Ve=sn+1,st=sn+2,Ce(te,Mt,Rt,Yt,Te,Ve,st,Ir),Ce(te,zt,Ci,Yt,Te,Ve,st,je);const xs=new p.Float32BufferAttribute(Ir,3),mr=new p.Float32BufferAttribute(je,3);return{positionAttribute:Mt,normalAttribute:zt,morphedPositionAttribute:xs,morphedNormalAttribute:mr}}function Z(te){if(te.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),te;let de=te.groups;if(de=de.sort((Pe,Qe)=>Pe.materialIndex!==Qe.materialIndex?Pe.materialIndex-Qe.materialIndex:Pe.start-Qe.start),te.getIndex()===null){const Pe=te.getAttribute("position"),Qe=[];for(let De=0;De<Pe.count;De+=3)Qe.push(De,De+1,De+2);te.setIndex(Qe)}const oe=te.getIndex(),ye=[];for(let Pe=0;Pe<de.length;Pe++){const Qe=de[Pe],De=Qe.start,ke=De+Qe.count;for(let Ce=De;Ce<ke;Ce++)ye.push(oe.getX(Ce))}te.dispose(),te.setIndex(ye);let Me=0;for(let Pe=0;Pe<de.length;Pe++){const Qe=de[Pe];Qe.start=Me,Me+=Qe.count}let Ne=de[0];te.groups=[Ne];for(let Pe=1;Pe<de.length;Pe++){const Qe=de[Pe];Ne.materialIndex===Qe.materialIndex?Ne.count+=Qe.count:(Ne=Qe,te.groups.push(Ne))}return te}function ne(te,de=Math.PI/3){const oe=Math.cos(de),ye=(1+1e-10)*100,Me=[new p.Vector3,new p.Vector3,new p.Vector3],Ne=new p.Vector3,Pe=new p.Vector3,Qe=new p.Vector3,De=new p.Vector3;function ke(st){const dt=~~(st.x*ye),Mt=~~(st.y*ye),Rt=~~(st.z*ye);return`${dt},${Mt},${Rt}`}const Ce=te.index?te.toNonIndexed():te,fe=Ce.attributes.position,Oe={};for(let st=0,dt=fe.count/3;st<dt;st++){const Mt=3*st,Rt=Me[0].fromBufferAttribute(fe,Mt+0),Yt=Me[1].fromBufferAttribute(fe,Mt+1),zt=Me[2].fromBufferAttribute(fe,Mt+2);Ne.subVectors(zt,Yt),Pe.subVectors(Rt,Yt);const Ci=new p.Vector3().crossVectors(Ne,Pe).normalize();for(let ci=0;ci<3;ci++){const Qi=Me[ci],sn=ke(Qi);sn in Oe||(Oe[sn]=[]),Oe[sn].push(Ci)}}const Te=new Float32Array(fe.count*3),Ve=new p.BufferAttribute(Te,3,!1);for(let st=0,dt=fe.count/3;st<dt;st++){const Mt=3*st,Rt=Me[0].fromBufferAttribute(fe,Mt+0),Yt=Me[1].fromBufferAttribute(fe,Mt+1),zt=Me[2].fromBufferAttribute(fe,Mt+2);Ne.subVectors(zt,Yt),Pe.subVectors(Rt,Yt),Qe.crossVectors(Ne,Pe).normalize();for(let Ci=0;Ci<3;Ci++){const ci=Me[Ci],Qi=ke(ci),sn=Oe[Qi];De.set(0,0,0);for(let In=0,Xn=sn.length;In<Xn;In++){const tr=sn[In];Qe.dot(tr)>oe&&De.add(tr)}De.normalize(),Ve.setXYZ(Mt+Ci,De.x,De.y,De.z)}}return Ce.setAttribute("normal",Ve),Ce}},"./node_modules/three/examples/jsm/utils/WorkerPool.js":(ie,we,P)=>{P.r(we),P.d(we,{WorkerPool:()=>p});class p{constructor(z=4){this.pool=z,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(z){if(!this.workers[z]){const K=this.workerCreator();K.addEventListener("message",this._onMessage.bind(this,z)),this.workers[z]=K}}_getIdleWorker(){for(let z=0;z<this.pool;z++)if(!(this.workerStatus&1<<z))return z;return-1}_onMessage(z,K){const D=this.workersResolve[z];if(D&&D(K),this.queue.length){const{resolve:Q,msg:V,transfer:T}=this.queue.shift();this.workersResolve[z]=Q,this.workers[z].postMessage(V,T)}else this.workerStatus^=1<<z}setWorkerCreator(z){this.workerCreator=z}setWorkerLimit(z){this.pool=z}postMessage(z,K){return new Promise(D=>{const Q=this._getIdleWorker();Q!==-1?(this._initWorker(Q),this.workerStatus|=1<<Q,this.workersResolve[Q]=D,this.workers[Q].postMessage(z,K)):this.queue.push({resolve:D,msg:z,transfer:K})})}dispose(){this.workers.forEach(z=>z.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}},"./src/lib/three.mjs":(ie,we,P)=>{P.r(we),P.d(we,{default:()=>k});var p=P("./node_modules/three/build/three.module.js"),S=P("./node_modules/three/examples/jsm/loaders/DRACOLoader.js"),z=P("./node_modules/three/examples/jsm/loaders/GLTFLoader.js"),K=P("./node_modules/three/examples/jsm/loaders/KTX2Loader.js"),D=P("./node_modules/three/examples/jsm/math/OBB.js"),Q=P("./node_modules/three/examples/jsm/loaders/OBJLoader.js"),V=P("./node_modules/three/examples/jsm/loaders/MTLLoader.js"),T=P("./node_modules/three/examples/jsm/utils/BufferGeometryUtils.js"),F=P("./node_modules/three/examples/jsm/lights/LightProbeGenerator.js"),N={...p};N.DRACOLoader=S.DRACOLoader,N.GLTFLoader=z.GLTFLoader,N.KTX2Loader=K.KTX2Loader,N.OBJLoader=Q.OBJLoader,N.MTLLoader=V.MTLLoader,N.OBB=D.OBB,N.BufferGeometryUtils=T,N.LightProbeGenerator=F.LightProbeGenerator;const k=N},"./package.json":ie=>{ie.exports=JSON.parse('{"name":"aframe","version":"1.6.0","description":"A web framework for building virtual reality experiences.","homepage":"https://aframe.io/","main":"dist/aframe-master.js","scripts":{"dev":"cross-env INSPECTOR_VERSION=dev webpack serve --port 8080","dist":"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"webpack --config webpack.config.js","dist:min":"webpack --config webpack.prod.config.js","docs":"markserv --dir docs --port 9001","preghpages":"node ./scripts/preghpages.js","ghpages":"ghpages -p gh-pages/","lint":"standardx -v | snazzy","lint:fix":"standardx --fix","precommit":"npm run lint","prepush":"node scripts/testOnlyCheck.js","prerelease":"node scripts/release.js 1.5.0 1.6.0","start":"npm run dev","start:https":"npm run dev -- --server-type https","test":"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:nobrowser":"NO_BROWSER=true npm test","test:node":"node --experimental-require-module ./node_modules/mocha/bin/mocha --ui tdd tests/node"},"repository":"aframevr/aframe","license":"MIT","files":["dist/*","docs/**/*","src/**/*","vendor/**/*"],"dependencies":{"buffer":"^6.0.3","debug":"^4.3.4","deep-assign":"^2.0.0","load-bmfont":"^1.2.3","super-animejs":"^3.1.0","three":"npm:super-three@0.164.0","three-bmfont-text":"dmarcos/three-bmfont-text#eed4878795be9b3e38cf6aec6b903f56acd1f695","webvr-polyfill":"^0.10.12"},"devDependencies":{"@babel/core":"^7.17.10","babel-loader":"^8.2.5","babel-plugin-istanbul":"^6.1.1","chai":"^4.3.6","chai-shallow-deep-equal":"^1.4.0","chalk":"^1.1.3","cross-env":"^7.0.3","css-loader":"^6.7.1","eslint":"^8.45.0","eslint-config-semistandard":"^17.0.0","eslint-config-standard-jsx":"^11.0.0","ghpages":"0.0.8","git-rev":"^0.2.1","glob":"^8.0.3","husky":"^0.11.7","jsdom":"^24.0.0","jsdom-global":"^3.0.2","karma":"^6.4.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^3.1.1","karma-coverage":"^2.2.0","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^2.1.2","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sinon-chai":"^2.0.2","karma-webpack":"^5.0.0","markserv":"github:sukima/markserv#feature/fix-broken-websoketio-link","mocha":"^10.0.0","replace-in-file":"^2.5.3","shelljs":"^0.7.7","shx":"^0.2.2","sinon":"<12.0.0","sinon-chai":"^3.7.0","snazzy":"^5.0.0","standardx":"^7.0.0","style-loader":"^3.3.1","too-wordy":"ngokevin/too-wordy","webpack":"^5.73.0","webpack-cli":"^4.10.0","webpack-dev-server":"^4.11.0","webpack-merge":"^5.8.0","write-good":"^1.0.8"},"link":true,"standardx":{"ignore":["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},"keywords":["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","quest","meta","web-components","webvr","webxr"],"engines":{"node":">= 4.6.0","npm":">= 2.15.9"}}')}},w={};function e(ie){var we=w[ie];if(we!==void 0)return we.exports;var P=w[ie]={id:ie,exports:{}};return U[ie].call(P.exports,P,P.exports,e),P.exports}e.m=U,e.n=ie=>{var we=ie&&ie.__esModule?()=>ie.default:()=>ie;return e.d(we,{a:we}),we},e.d=(ie,we)=>{for(var P in we)e.o(we,P)&&!e.o(ie,P)&&Object.defineProperty(ie,P,{enumerable:!0,get:we[P]})},e.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),e.o=(ie,we)=>Object.prototype.hasOwnProperty.call(ie,we),e.r=ie=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ie,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ie,"__esModule",{value:!0})},e.b=document.baseURI||self.location.href,e.nc=void 0;var me=e("./src/index.js");return me})())}(aframeMaster)),aframeMaster.exports}requireAframeMaster();function commonjsRequire(_){throw new Error('Could not dynamically require "'+_+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var aframeAr_min={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(__viteBrowserExternal$1);aframeAr_min.exports;var hasRequiredAframeAr_min;function requireAframeAr_min(){return hasRequiredAframeAr_min||(hasRequiredAframeAr_min=1,function(module){(function(){var _=function(T,F,N){var k=T,G=F;if(this.orientation="landscape",this.listeners={},typeof T!="number"){var Z=T;N=F,k=Z.videoWidth||Z.width,G=Z.videoHeight||Z.height,this.image=Z}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=k,this.canvas.height=G,this.ctx=this.canvas.getContext("2d"),this.videoWidth=k,this.videoHeight=G,typeof N=="string"){var ne=this;this.cameraParam=new R(N,function(){ne._initialize()},function(te){console.error("ARController: Failed to load ARCameraParam",te)})}else this.cameraParam=N,this._initialize()};_.prototype.dispose=function(){O.teardown(this.id);for(var T in this)this[T]=null},_.prototype.process=function(T){this.detectMarker(T);var F=this.getMarkerNum(),N,k;for(N in this.patternMarkers)k=this.patternMarkers[N],k.inPrevious=k.inCurrent,k.inCurrent=!1;for(N in this.barcodeMarkers)k=this.barcodeMarkers[N],k.inPrevious=k.inCurrent,k.inCurrent=!1;for(var G=0;G<F;G++){var Z=this.getMarker(G),ne=O.UNKNOWN_MARKER,te=this.trackPatternMarkerId(-1);Z.idPatt>-1&&(Z.id===Z.idPatt||Z.idMatrix===-1)?(te=this.trackPatternMarkerId(Z.idPatt),ne=O.PATTERN_MARKER,Z.dir!==Z.dirPatt&&this.setMarkerInfoDir(G,Z.dirPatt)):Z.idMatrix>-1&&(te=this.trackBarcodeMarkerId(Z.idMatrix),ne=O.BARCODE_MARKER,Z.dir!==Z.dirMatrix&&this.setMarkerInfoDir(G,Z.dirMatrix)),ne!==O.UNKNOWN_MARKER&&te.inPrevious?this.getTransMatSquareCont(G,te.markerWidth,te.matrix,te.matrix):this.getTransMatSquare(G,te.markerWidth,te.matrix),te.inCurrent=!0,this.transMatToGLMat(te.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:G,type:ne,marker:Z,matrix:this.transform_mat}})}for(var de=this.getMultiMarkerCount(),G=0;G<de;G++){var oe=this.getMultiMarkerPatternCount(G),te=!1;O.getTransMatMultiSquareRobust(this.id,G),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var ye=0;ye<oe;ye++){var Me=this.getMultiEachMarker(G,ye);if(Me.visible>=0){te=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:G,matrix:this.transform_mat}});break}}if(te)for(var ye=0;ye<oe;ye++){var Me=this.getMultiEachMarker(G,ye);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:G,markerIndex:ye,marker:Me,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},_.prototype.trackPatternMarkerId=function(T,F){var N=this.patternMarkers[T];return N||(this.patternMarkers[T]=N={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:F||this.defaultMarkerWidth}),F&&(N.markerWidth=F),N},_.prototype.trackBarcodeMarkerId=function(T,F){var N=this.barcodeMarkers[T];return N||(this.barcodeMarkers[T]=N={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:F||this.defaultMarkerWidth}),F&&(N.markerWidth=F),N},_.prototype.getMultiMarkerCount=function(){return O.getMultiMarkerCount(this.id)},_.prototype.getMultiMarkerPatternCount=function(T){return O.getMultiMarkerNum(this.id,T)},_.prototype.addEventListener=function(T,F){this.listeners[T]||(this.listeners[T]=[]),this.listeners[T].push(F)},_.prototype.removeEventListener=function(T,F){if(this.listeners[T]){var N=this.listeners[T].indexOf(F);N>-1&&this.listeners[T].splice(N,1)}},_.prototype.dispatchEvent=function(T){var F=this.listeners[T.name];if(F)for(var N=0;N<F.length;N++)F[N].call(this,T)},_.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},_.prototype.loadMarker=function(T,F,N){return O.addMarker(this.id,T,F,N)},_.prototype.loadMultiMarker=function(T,F,N){return O.addMultiMarker(this.id,T,F,N)},_.prototype.getTransMatSquare=function(T,F,N){return O.getTransMatSquare(this.id,T,F),N.set(this.marker_transform_mat),N},_.prototype.getTransMatSquareCont=function(T,F,N,k){return this.marker_transform_mat.set(N),O.getTransMatSquareCont(this.id,T,F),k.set(this.marker_transform_mat),k},_.prototype.getTransMatMultiSquare=function(T,F){return O.getTransMatMultiSquare(this.id,T),F.set(this.marker_transform_mat),F},_.prototype.getTransMatMultiSquareRobust=function(T,F){return O.getTransMatMultiSquare(this.id,T),F.set(this.marker_transform_mat),F},_.prototype.transMatToGLMat=function(T,F,N){return F[0+0*4]=T[0],F[0+1*4]=T[1],F[0+2*4]=T[2],F[0+3*4]=T[3],F[1+0*4]=T[4],F[1+1*4]=T[5],F[1+2*4]=T[6],F[1+3*4]=T[7],F[2+0*4]=T[8],F[2+1*4]=T[9],F[2+2*4]=T[10],F[2+3*4]=T[11],F[3+0*4]=0,F[3+1*4]=0,F[3+2*4]=0,F[3+3*4]=1,N!=null&&N!==0&&(F[12]*=N,F[13]*=N,F[14]*=N),F},_.prototype.detectMarker=function(T){return this._copyImageToHeap(T)?O.detectMarker(this.id):-99},_.prototype.getMarkerNum=function(){return O.getMarkerNum(this.id)},_.prototype.getMarker=function(T){if(O.getMarker(this.id,T)===0)return O.markerInfo},_.prototype.setMarkerInfoVertex=function(T,F){for(var N=0;N<F.length;N++)this.marker_transform_mat[N*2+0]=F[N][0],this.marker_transform_mat[N*2+1]=F[N][1];return O.setMarkerInfoVertex(this.id,T)},_.prototype.cloneMarkerInfo=function(T){return JSON.parse(JSON.stringify(T))},_.prototype.getMultiEachMarker=function(T,F){if(O.getMultiEachMarker(this.id,T,F)===0)return O.multiEachMarkerInfo},_.prototype.getTransformationMatrix=function(){return this.transform_mat},_.prototype.getCameraMatrix=function(){return this.camera_mat},_.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},_.prototype.setDebugMode=function(T){return O.setDebugMode(this.id,T)},_.prototype.getDebugMode=function(){return O.getDebugMode(this.id)},_.prototype.getProcessingImage=function(){return O.getProcessingImage(this.id)},_.prototype.setLogLevel=function(T){return O.setLogLevel(T)},_.prototype.getLogLevel=function(){return O.getLogLevel()},_.prototype.setMarkerInfoDir=function(T,F){return O.setMarkerInfoDir(this.id,T,F)},_.prototype.setProjectionNearPlane=function(T){return O.setProjectionNearPlane(this.id,T)},_.prototype.getProjectionNearPlane=function(){return O.getProjectionNearPlane(this.id)},_.prototype.setProjectionFarPlane=function(T){return O.setProjectionFarPlane(this.id,T)},_.prototype.getProjectionFarPlane=function(){return O.getProjectionFarPlane(this.id)},_.prototype.setThresholdMode=function(T){return O.setThresholdMode(this.id,T)},_.prototype.getThresholdMode=function(){return O.getThresholdMode(this.id)},_.prototype.setThreshold=function(T){return O.setThreshold(this.id,T)},_.prototype.getThreshold=function(){return O.getThreshold(this.id)},_.prototype.setPatternDetectionMode=function(T){return O.setPatternDetectionMode(this.id,T)},_.prototype.getPatternDetectionMode=function(){return O.getPatternDetectionMode(this.id)},_.prototype.setMatrixCodeType=function(T){return O.setMatrixCodeType(this.id,T)},_.prototype.getMatrixCodeType=function(){return O.getMatrixCodeType(this.id)},_.prototype.setLabelingMode=function(T){return O.setLabelingMode(this.id,T)},_.prototype.getLabelingMode=function(){return O.getLabelingMode(this.id)},_.prototype.setPattRatio=function(T){return O.setPattRatio(this.id,T)},_.prototype.getPattRatio=function(){return O.getPattRatio(this.id)},_.prototype.setImageProcMode=function(T){return O.setImageProcMode(this.id,T)},_.prototype.getImageProcMode=function(){return O.getImageProcMode(this.id)},_.prototype.debugDraw=function(){var T=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),F=new ImageData(T,this.canvas.width,this.canvas.height);this.ctx.putImageData(F,0,0);for(var N=this.getMarkerNum(),k=0;k<N;k++)this._debugMarker(this.getMarker(k))},_.prototype._initialize=function(){this.id=O.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var T=O.frameMalloc;this.framepointer=T.framepointer,this.framesize=T.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,T.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,T.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var F=this;setTimeout(function(){F.onload&&F.onload(),F.dispatchEvent({name:"load",target:F})},1)},_.prototype._copyImageToHeap=function(T){T||(T=this.image),this.ctx.save(),this.orientation==="portrait"?(this.ctx.translate(this.canvas.width,0),this.ctx.rotate(Math.PI/2),this.ctx.drawImage(T,0,0,this.canvas.height,this.canvas.width)):this.ctx.drawImage(T,0,0,this.canvas.width,this.canvas.height),this.ctx.restore();var F=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),N=F.data;return this.dataHeap?(this.dataHeap.set(N),!0):!1},_.prototype._debugMarker=function(T){var F,N;F=T.vertex;var k=this.ctx;k.strokeStyle="red",k.beginPath(),k.moveTo(F[0][0],F[0][1]),k.lineTo(F[1][0],F[1][1]),k.stroke(),k.beginPath(),k.moveTo(F[2][0],F[2][1]),k.lineTo(F[3][0],F[3][1]),k.stroke(),k.strokeStyle="green",k.beginPath(),k.lineTo(F[1][0],F[1][1]),k.lineTo(F[2][0],F[2][1]),k.stroke(),k.beginPath(),k.moveTo(F[3][0],F[3][1]),k.lineTo(F[0][0],F[0][1]),k.stroke(),N=T.pos,k.beginPath(),k.arc(N[0],N[1],8,0,Math.PI*2),k.fillStyle="red",k.fill()},_.getUserMedia=function(T){T.facingMode;var F=T.onSuccess,N=T.onError||function(Me){console.error("ARController.getUserMedia",Me)},k=document.createElement("video"),G=function(){this.videoWidth!==0&&F(k)},Z=!1,ne=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],te=function(Me){Z&&(k.play(),k.paused||ne.forEach(function(Ne){window.removeEventListener(Ne,te,!0)}))};ne.forEach(function(Me){window.addEventListener(Me,te,!0)});var de=function(Me){k.addEventListener("loadedmetadata",G,!1),k.src=window.URL.createObjectURL(Me),Z=!0,te()},oe={};T.width&&(T.width,typeof T.width=="object"?(T.width.max&&(oe.maxWidth=T.width.max),T.width.min&&(oe.minWidth=T.width.max)):oe.maxWidth=T.width),T.height&&(T.height,typeof T.height=="object"?(T.height.max&&(oe.maxHeight=T.height.max),T.height.min&&(oe.minHeight=T.height.max)):oe.maxHeight=T.height),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var ye={audio:!1,video:{mandatory:oe}};return navigator.getUserMedia?navigator.getUserMedia(ye,de,N):N("navigator.getUserMedia is not supported on your browser"),k},_.getUserMediaARController=function(T){var F={};for(var N in T)F[N]=T[N];var k=T.onSuccess,G=T.cameraParam;F.onSuccess=function(){new R(G,function(){var ne=this,te=T.maxARVideoSize||Math.max(Z.videoWidth,Z.videoHeight),de=te/Math.max(Z.videoWidth,Z.videoHeight),oe=de*Z.videoWidth,ye=de*Z.videoHeight;if(Z.videoWidth<Z.videoHeight){var Me=oe;oe=ye,ye=Me}var Ne=new _(oe,ye,ne);Ne.image=Z,Z.videoWidth<Z.videoHeight?(Ne.orientation="portrait",Ne.videoWidth=Z.videoHeight,Ne.videoHeight=Z.videoWidth):(Ne.orientation="landscape",Ne.videoWidth=Z.videoWidth,Ne.videoHeight=Z.videoHeight),k(Ne,ne)},function(ne){console.error("ARController: Failed to load ARCameraParam",ne)})};var Z=this.getUserMedia(F);return Z};var R=function(T,F,N){this.id=-1,this._src="",this.complete=!1,this.onload=F,this.onerror=N,T&&this.load(T)};R.prototype.load=function(T){if(this._src!=="")throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=T,T){var F=this;O.loadCamera(T,function(N){F.id=N,F.complete=!0,F.onload()},function(N){F.onerror(N)})}},Object.defineProperty(R.prototype,"src",{set:function(T){this.load(T)},get:function(){return this._src}}),R.prototype.dispose=function(){this.id!==-1&&O.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var O={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:z,addMarker:me,addMultiMarker:p},U=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function w(){U.forEach(function(F){O[F]=Module[F]});for(var T in Module)T.match(/^AR/)&&(O[T]=Module[T])}var e=0;function me(T,F,N){var k="/marker_"+e++;Q(F,k,function(){var G=Module._addMarker(T,k);N&&N(G)})}function ie(T){return String.fromCharCode.apply(String,T)}function we(T){var F=ie(T),N=F.split(`
`),k=[],G=0;return N.forEach(function(Z){if(Z=Z.trim(),!(!Z||Z.startsWith("#")))switch(G){case 0:G=1;return;case 1:Z.match(/^\d+$/)||k.push(Z);case 2:case 3:case 4:G++;return;case 5:G=1;return}}),k}var P=0;function p(T,F,N){var k="/multi_marker_"+P++;Q(F,k,function(G){var Z=we(G);function ne(){var de=Module._addMultiMarker(T,k),oe=Module.getMultiMarkerNum(T,de);N&&N(de,oe)}if(!Z.length)return ne();var te=F.split("/").slice(0,-1).join("/");Z=Z.map(function(de){return[te+"/"+de,de]}),V(Z,ne)})}var S=0;function z(T,F){var N="/camera_param_"+S++,k=function(){var G=Module._loadCamera(N);F&&F(G)};typeof T=="object"?D(N,T,k):T.indexOf(`
`)>-1?K(N,T,k):Q(T,N,k)}function K(T,F,N){for(var k=new Uint8Array(F.length),G=0;G<k.length;G++)k[G]=F.charCodeAt(G)&255;D(T,k,N)}function D(T,F,N){FS.writeFile(T,F,{encoding:"binary"}),N(F)}function Q(T,F,N){var k=new XMLHttpRequest;k.open("GET",T,!0),k.responseType="arraybuffer",k.onload=function(G){var Z=k.response,ne=new Uint8Array(Z);D(F,ne,N)},k.send()}function V(T,F){var N=T.pop();N?Q(N[0],N[1],function(){V(T,F)}):F()}window.artoolkit=O,window.ARController=_,window.ARCameraParam=R,window.Module?w():window.Module={onRuntimeInitialized:function(){w()}}})();var Module;Module||(Module=(typeof Module<"u"?Module:null)||{});var moduleOverrides={};for(var key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof commonjsRequire=="function"&&!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_WORKER,ENVIRONMENT_IS_SHELL=!ENVIRONMENT_IS_WEB&&!ENVIRONMENT_IS_NODE&&!ENVIRONMENT_IS_WORKER;if(ENVIRONMENT_IS_NODE){Module.print||(Module.print=function(R){process.stdout.write(R+`
`)}),Module.printErr||(Module.printErr=function(R){process.stderr.write(R+`
`)});var nodeFS=require$$1,nodePath=require$$1;Module.read=function(R,O){R=nodePath.normalize(R);var U=nodeFS.readFileSync(R);return!U&&R!=nodePath.resolve(R)&&(R=path.join(__dirname,"..","src",R),U=nodeFS.readFileSync(R)),U&&!O&&(U=U.toString()),U},Module.readBinary=function(R){var O=Module.read(R,!0);return O.buffer||(O=new Uint8Array(O)),assert(O.buffer),O},Module.load=function(R){globalEval(read(R))},Module.thisProgram||(process.argv.length>1?Module.thisProgram=process.argv[1].replace(/\\/g,"/"):Module.thisProgram="unknown-program"),Module.arguments=process.argv.slice(2),module.exports=Module,process.on("uncaughtException",function(_){if(!(_ instanceof ExitStatus))throw _}),Module.inspect=function(){return"[Emscripten Module object]"}}else if(ENVIRONMENT_IS_SHELL)Module.print||(Module.print=print),typeof printErr<"u"&&(Module.printErr=printErr),typeof read<"u"?Module.read=read:Module.read=function(){throw"no read() available (jsc?)"},Module.readBinary=function(R){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(R));var O=read(R,"binary");return assert(typeof O=="object"),O},typeof scriptArgs<"u"?Module.arguments=scriptArgs:typeof arguments<"u"&&(Module.arguments=arguments);else if(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER){if(Module.read=function(R){var O=new XMLHttpRequest;return O.open("GET",R,!1),O.send(null),O.responseText},typeof arguments<"u"&&(Module.arguments=arguments),typeof console<"u")Module.print||(Module.print=function(R){console.log(R)}),Module.printErr||(Module.printErr=function(R){console.log(R)});else{var TRY_USE_DUMP=!1;Module.print||(Module.print=TRY_USE_DUMP&&typeof dump<"u"?function(_){dump(_)}:function(_){})}ENVIRONMENT_IS_WORKER&&(Module.load=importScripts),typeof Module.setWindowTitle>"u"&&(Module.setWindowTitle=function(_){document.title=_})}else throw"Unknown runtime environment. Where are we?";function globalEval(_){eval.call(null,_)}!Module.load&&Module.read&&(Module.load=function(R){globalEval(Module.read(R))}),Module.print||(Module.print=function(){}),Module.printErr||(Module.printErr=Module.print),Module.arguments||(Module.arguments=[]),Module.thisProgram||(Module.thisProgram="./this.program"),Module.print=Module.print,Module.printErr=Module.printErr,Module.preRun=[],Module.postRun=[];for(var key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);var Runtime={setTempRet0:function(_){tempRet0=_},getTempRet0:function(){return tempRet0},stackSave:function(){return STACKTOP},stackRestore:function(_){STACKTOP=_},getNativeTypeSize:function(_){switch(_){case"i1":case"i8":return 1;case"i16":return 2;case"i32":return 4;case"i64":return 8;case"float":return 4;case"double":return 8;default:{if(_[_.length-1]==="*")return Runtime.QUANTUM_SIZE;if(_[0]==="i"){var R=parseInt(_.substr(1));return assert(R%8===0),R/8}else return 0}}},getNativeFieldSize:function(_){return Math.max(Runtime.getNativeTypeSize(_),Runtime.QUANTUM_SIZE)},STACK_ALIGN:16,prepVararg:function(_,R){return R==="double"||R==="i64"?_&7&&(assert((_&7)===4),_+=4):assert((_&3)===0),_},getAlignSize:function(_,R,O){return!O&&(_=="i64"||_=="double")?8:_?Math.min(R||(_?Runtime.getNativeFieldSize(_):0),Runtime.QUANTUM_SIZE):Math.min(R,8)},dynCall:function(_,R,O){return O&&O.length?(O.splice||(O=Array.prototype.slice.call(O)),O.splice(0,0,R),Module["dynCall_"+_].apply(null,O)):Module["dynCall_"+_].call(null,R)},functionPointers:[],addFunction:function(_){for(var R=0;R<Runtime.functionPointers.length;R++)if(!Runtime.functionPointers[R])return Runtime.functionPointers[R]=_,2*(1+R);throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},removeFunction:function(_){Runtime.functionPointers[(_-2)/2]=null},warnOnce:function(_){Runtime.warnOnce.shown||(Runtime.warnOnce.shown={}),Runtime.warnOnce.shown[_]||(Runtime.warnOnce.shown[_]=1,Module.printErr(_))},funcWrappers:{},getFuncWrapper:function(_,R){assert(R),Runtime.funcWrappers[R]||(Runtime.funcWrappers[R]={});var O=Runtime.funcWrappers[R];return O[_]||(O[_]=function(){return Runtime.dynCall(R,_,arguments)}),O[_]},getCompilerSetting:function(_){throw"You must build with -s RETAIN_COMPILER_SETTINGS=1 for Runtime.getCompilerSetting or emscripten_get_compiler_setting to work"},stackAlloc:function(_){var R=STACKTOP;return STACKTOP=STACKTOP+_|0,STACKTOP=STACKTOP+15&-16,R},staticAlloc:function(_){var R=STATICTOP;return STATICTOP=STATICTOP+_|0,STATICTOP=STATICTOP+15&-16,R},dynamicAlloc:function(_){var R=DYNAMICTOP;if(DYNAMICTOP=DYNAMICTOP+_|0,DYNAMICTOP=DYNAMICTOP+15&-16,DYNAMICTOP>=TOTAL_MEMORY){var O=enlargeMemory();if(!O)return DYNAMICTOP=R,0}return R},alignMemory:function(_,R){var O=_=Math.ceil(_/(R||16))*(R||16);return O},makeBigInt:function(_,R,O){var U=O?+(_>>>0)+ +(R>>>0)*4294967296:+(_>>>0)+ +(R|0)*4294967296;return U},GLOBAL_BASE:8,QUANTUM_SIZE:4,__dummy__:0};Module.Runtime=Runtime;var ABORT=!1,tempDouble,tempI64,tempRet0;function assert(_,R){_||abort("Assertion failed: "+R)}function getCFunc(ident){var func=Module["_"+ident];if(!func)try{func=eval("_"+ident)}catch(_){}return assert(func,"Cannot call unknown function "+ident+" (perhaps LLVM optimizations or closure removed it?)"),func}var cwrap,ccall;(function(){var JSfuncs={stackSave:function(){Runtime.stackSave()},stackRestore:function(){Runtime.stackRestore()},arrayToC:function(_){var R=Runtime.stackAlloc(_.length);return writeArrayToMemory(_,R),R},stringToC:function(_){var R=0;return _!=null&&_!==0&&(R=Runtime.stackAlloc((_.length<<2)+1),writeStringToMemory(_,R)),R}},toC={string:JSfuncs.stringToC,array:JSfuncs.arrayToC};ccall=function(R,O,U,w,e){var me=getCFunc(R),ie=[],we=0;if(w)for(var P=0;P<w.length;P++){var p=toC[U[P]];p?(we===0&&(we=Runtime.stackSave()),ie[P]=p(w[P])):ie[P]=w[P]}var S=me.apply(null,ie);if(O==="string"&&(S=Pointer_stringify(S)),we!==0){if(e&&e.async){EmterpreterAsync.asyncFinalizers.push(function(){Runtime.stackRestore(we)});return}Runtime.stackRestore(we)}return S};var sourceRegex=/^function\s*\(([^)]*)\)\s*{\s*([^*]*?)[\s;]*(?:return\s*(.*?)[;\s]*)?}$/;function parseJSFunc(_){var R=_.toString().match(sourceRegex).slice(1);return{arguments:R[0],body:R[1],returnValue:R[2]}}var JSsource={};for(var fun in JSfuncs)JSfuncs.hasOwnProperty(fun)&&(JSsource[fun]=parseJSFunc(JSfuncs[fun]));cwrap=function cwrap(ident,returnType,argTypes){argTypes=argTypes||[];var cfunc=getCFunc(ident),numericArgs=argTypes.every(function(_){return _==="number"}),numericRet=returnType!=="string";if(numericRet&&numericArgs)return cfunc;var argNames=argTypes.map(function(_,R){return"$"+R}),funcstr="(function("+argNames.join(",")+") {",nargs=argTypes.length;if(!numericArgs){funcstr+="var stack = "+JSsource.stackSave.body+";";for(var i=0;i<nargs;i++){var arg=argNames[i],type=argTypes[i];if(type!=="number"){var convertCode=JSsource[type+"ToC"];funcstr+="var "+convertCode.arguments+" = "+arg+";",funcstr+=convertCode.body+";",funcstr+=arg+"="+convertCode.returnValue+";"}}}var cfuncname=parseJSFunc(function(){return cfunc}).returnValue;if(funcstr+="var ret = "+cfuncname+"("+argNames.join(",")+");",!numericRet){var strgfy=parseJSFunc(function(){return Pointer_stringify}).returnValue;funcstr+="ret = "+strgfy+"(ret);"}return numericArgs||(funcstr+=JSsource.stackRestore.body.replace("()","(stack)")+";"),funcstr+="return ret})",eval(funcstr)}})(),Module.ccall=ccall,Module.cwrap=cwrap;function setValue(_,R,O,U){switch(O=O||"i8",O.charAt(O.length-1)==="*"&&(O="i32"),O){case"i1":HEAP8[_>>0]=R;break;case"i8":HEAP8[_>>0]=R;break;case"i16":HEAP16[_>>1]=R;break;case"i32":HEAP32[_>>2]=R;break;case"i64":tempI64=[R>>>0,(tempDouble=R,+Math_abs(tempDouble)>=1?tempDouble>0?(Math_min(+Math_floor(tempDouble/4294967296),4294967295)|0)>>>0:~~+Math_ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[_>>2]=tempI64[0],HEAP32[_+4>>2]=tempI64[1];break;case"float":HEAPF32[_>>2]=R;break;case"double":HEAPF64[_>>3]=R;break;default:abort("invalid type for setValue: "+O)}}Module.setValue=setValue;function getValue(_,R,O){switch(R=R||"i8",R.charAt(R.length-1)==="*"&&(R="i32"),R){case"i1":return HEAP8[_>>0];case"i8":return HEAP8[_>>0];case"i16":return HEAP16[_>>1];case"i32":return HEAP32[_>>2];case"i64":return HEAP32[_>>2];case"float":return HEAPF32[_>>2];case"double":return HEAPF64[_>>3];default:abort("invalid type for setValue: "+R)}return null}Module.getValue=getValue;var ALLOC_NORMAL=0,ALLOC_STACK=1,ALLOC_STATIC=2,ALLOC_DYNAMIC=3,ALLOC_NONE=4;Module.ALLOC_NORMAL=ALLOC_NORMAL,Module.ALLOC_STACK=ALLOC_STACK,Module.ALLOC_STATIC=ALLOC_STATIC,Module.ALLOC_DYNAMIC=ALLOC_DYNAMIC,Module.ALLOC_NONE=ALLOC_NONE;function allocate(_,R,O,U){var w,e;typeof _=="number"?(w=!0,e=_):(w=!1,e=_.length);var me=typeof R=="string"?R:null,ie;if(O==ALLOC_NONE?ie=U:ie=[_malloc,Runtime.stackAlloc,Runtime.staticAlloc,Runtime.dynamicAlloc][O===void 0?ALLOC_STATIC:O](Math.max(e,me?1:R.length)),w){var U=ie,we;for(assert((ie&3)==0),we=ie+(e&-4);U<we;U+=4)HEAP32[U>>2]=0;for(we=ie+e;U<we;)HEAP8[U++>>0]=0;return ie}if(me==="i8")return _.subarray||_.slice?HEAPU8.set(_,ie):HEAPU8.set(new Uint8Array(_),ie),ie;for(var P=0,p,S,z;P<e;){var K=_[P];if(typeof K=="function"&&(K=Runtime.getFunctionIndex(K)),p=me||R[P],p===0){P++;continue}p=="i64"&&(p="i32"),setValue(ie+P,K,p),z!==p&&(S=Runtime.getNativeTypeSize(p),z=p),P+=S}return ie}Module.allocate=allocate;function getMemory(_){return staticSealed?typeof _sbrk<"u"&&!_sbrk.called||!runtimeInitialized?Runtime.dynamicAlloc(_):_malloc(_):Runtime.staticAlloc(_)}Module.getMemory=getMemory;function Pointer_stringify(_,R){if(R===0||!_)return"";for(var O=0,U,w=0;U=HEAPU8[_+w>>0],O|=U,!(U==0&&!R||(w++,R&&w==R)););R||(R=w);var e="";if(O<128){for(var me=1024,ie;R>0;)ie=String.fromCharCode.apply(String,HEAPU8.subarray(_,_+Math.min(R,me))),e=e?e+ie:ie,_+=me,R-=me;return e}return Module.UTF8ToString(_)}Module.Pointer_stringify=Pointer_stringify;function AsciiToString(_){for(var R="";;){var O=HEAP8[_++>>0];if(!O)return R;R+=String.fromCharCode(O)}}Module.AsciiToString=AsciiToString;function stringToAscii(_,R){return writeAsciiToMemory(_,R,!1)}Module.stringToAscii=stringToAscii;function UTF8ArrayToString(_,R){for(var O,U,w,e,me,ie,we="";;){if(O=_[R++],!O)return we;if(!(O&128)){we+=String.fromCharCode(O);continue}if(U=_[R++]&63,(O&224)==192){we+=String.fromCharCode((O&31)<<6|U);continue}if(w=_[R++]&63,(O&240)==224?O=(O&15)<<12|U<<6|w:(e=_[R++]&63,(O&248)==240?O=(O&7)<<18|U<<12|w<<6|e:(me=_[R++]&63,(O&252)==248?O=(O&3)<<24|U<<18|w<<12|e<<6|me:(ie=_[R++]&63,O=(O&1)<<30|U<<24|w<<18|e<<12|me<<6|ie))),O<65536)we+=String.fromCharCode(O);else{var P=O-65536;we+=String.fromCharCode(55296|P>>10,56320|P&1023)}}}Module.UTF8ArrayToString=UTF8ArrayToString;function UTF8ToString(_){return UTF8ArrayToString(HEAPU8,_)}Module.UTF8ToString=UTF8ToString;function stringToUTF8Array(_,R,O,U){if(!(U>0))return 0;for(var w=O,e=O+U-1,me=0;me<_.length;++me){var ie=_.charCodeAt(me);if(ie>=55296&&ie<=57343&&(ie=65536+((ie&1023)<<10)|_.charCodeAt(++me)&1023),ie<=127){if(O>=e)break;R[O++]=ie}else if(ie<=2047){if(O+1>=e)break;R[O++]=192|ie>>6,R[O++]=128|ie&63}else if(ie<=65535){if(O+2>=e)break;R[O++]=224|ie>>12,R[O++]=128|ie>>6&63,R[O++]=128|ie&63}else if(ie<=2097151){if(O+3>=e)break;R[O++]=240|ie>>18,R[O++]=128|ie>>12&63,R[O++]=128|ie>>6&63,R[O++]=128|ie&63}else if(ie<=67108863){if(O+4>=e)break;R[O++]=248|ie>>24,R[O++]=128|ie>>18&63,R[O++]=128|ie>>12&63,R[O++]=128|ie>>6&63,R[O++]=128|ie&63}else{if(O+5>=e)break;R[O++]=252|ie>>30,R[O++]=128|ie>>24&63,R[O++]=128|ie>>18&63,R[O++]=128|ie>>12&63,R[O++]=128|ie>>6&63,R[O++]=128|ie&63}}return R[O]=0,O-w}Module.stringToUTF8Array=stringToUTF8Array;function stringToUTF8(_,R,O){return stringToUTF8Array(_,HEAPU8,R,O)}Module.stringToUTF8=stringToUTF8;function lengthBytesUTF8(_){for(var R=0,O=0;O<_.length;++O){var U=_.charCodeAt(O);U>=55296&&U<=57343&&(U=65536+((U&1023)<<10)|_.charCodeAt(++O)&1023),U<=127?++R:U<=2047?R+=2:U<=65535?R+=3:U<=2097151?R+=4:U<=67108863?R+=5:R+=6}return R}Module.lengthBytesUTF8=lengthBytesUTF8;function UTF16ToString(_){for(var R=0,O="";;){var U=HEAP16[_+R*2>>1];if(U==0)return O;++R,O+=String.fromCharCode(U)}}Module.UTF16ToString=UTF16ToString;function stringToUTF16(_,R,O){if(O===void 0&&(O=2147483647),O<2)return 0;O-=2;for(var U=R,w=O<_.length*2?O/2:_.length,e=0;e<w;++e){var me=_.charCodeAt(e);HEAP16[R>>1]=me,R+=2}return HEAP16[R>>1]=0,R-U}Module.stringToUTF16=stringToUTF16;function lengthBytesUTF16(_){return _.length*2}Module.lengthBytesUTF16=lengthBytesUTF16;function UTF32ToString(_){for(var R=0,O="";;){var U=HEAP32[_+R*4>>2];if(U==0)return O;if(++R,U>=65536){var w=U-65536;O+=String.fromCharCode(55296|w>>10,56320|w&1023)}else O+=String.fromCharCode(U)}}Module.UTF32ToString=UTF32ToString;function stringToUTF32(_,R,O){if(O===void 0&&(O=2147483647),O<4)return 0;for(var U=R,w=U+O-4,e=0;e<_.length;++e){var me=_.charCodeAt(e);if(me>=55296&&me<=57343){var ie=_.charCodeAt(++e);me=65536+((me&1023)<<10)|ie&1023}if(HEAP32[R>>2]=me,R+=4,R+4>w)break}return HEAP32[R>>2]=0,R-U}Module.stringToUTF32=stringToUTF32;function lengthBytesUTF32(_){for(var R=0,O=0;O<_.length;++O){var U=_.charCodeAt(O);U>=55296&&U<=57343&&++O,R+=4}return R}Module.lengthBytesUTF32=lengthBytesUTF32;function demangle(_){var R=!!Module.___cxa_demangle;if(R)try{var O=_malloc(_.length);writeStringToMemory(_.substr(1),O);var U=_malloc(4),w=Module.___cxa_demangle(O,0,0,U);if(getValue(U,"i32")===0&&w)return Pointer_stringify(w)}catch{}finally{O&&_free(O),U&&_free(U),w&&_free(w)}var e=3,me={v:"void",b:"bool",c:"char",s:"short",i:"int",l:"long",f:"float",d:"double",w:"wchar_t",a:"signed char",h:"unsigned char",t:"unsigned short",j:"unsigned int",m:"unsigned long",x:"long long",y:"unsigned long long",z:"..."},ie=[],we=!0;function P(){e++,_[e]==="K"&&e++;for(var z=[];_[e]!=="E";){if(_[e]==="S"){e++;var K=_.indexOf("_",e),D=_.substring(e,K)||0;z.push(ie[D]||"?"),e=K+1;continue}if(_[e]==="C"){z.push(z[z.length-1]),e+=2;continue}var Q=parseInt(_.substr(e)),V=Q.toString().length;if(!Q||!V){e--;break}var T=_.substr(e+V,Q);z.push(T),ie.push(T),e+=V+Q}return e++,z}function p(z,K,D){K=K||1/0;var Q="",V=[];function T(){return"("+V.join(", ")+")"}var F;if(_[e]==="N"){if(F=P().join("::"),K--,K===0)return z?[F]:F}else{(_[e]==="K"||we&&_[e]==="L")&&e++;var N=parseInt(_.substr(e));if(N){var k=N.toString().length;F=_.substr(e+k,N),e+=k+N}}if(we=!1,_[e]==="I"){e++;var G=p(!0),Z=p(!0,1,!0);Q+=Z[0]+" "+F+"<"+G.join(", ")+">"}else Q=F;e:for(;e<_.length&&K-- >0;){var ne=_[e++];if(ne in me)V.push(me[ne]);else switch(ne){case"P":V.push(p(!0,1,!0)[0]+"*");break;case"R":V.push(p(!0,1,!0)[0]+"&");break;case"L":{e++;var te=_.indexOf("E",e),N=te-e;V.push(_.substr(e,N)),e+=N+2;break}case"A":{var N=parseInt(_.substr(e));if(e+=N.toString().length,_[e]!=="_")throw"?";e++,V.push(p(!0,1,!0)[0]+" ["+N+"]");break}case"E":break e;default:Q+="?"+ne;break e}}return!D&&V.length===1&&V[0]==="void"&&(V=[]),z?(Q&&V.push(Q+"?"),V):Q+T()}var S=_;try{if(_=="Object._main"||_=="_main")return"main()";if(typeof _=="number"&&(_=Pointer_stringify(_)),_[0]!=="_"||_[1]!=="_"||_[2]!=="Z")return _;switch(_[3]){case"n":return"operator new()";case"d":return"operator delete()"}S=p()}catch{S+="?"}return S.indexOf("?")>=0&&!R&&Runtime.warnOnce("warning: a problem occurred in builtin C++ name demangling; build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),S}function demangleAll(_){return _.replace(/__Z[\w\d_]+/g,function(R){var O=demangle(R);return R===O?R:R+" ["+O+"]"})}function jsStackTrace(){var _=new Error;if(!_.stack){try{throw new Error(0)}catch(R){_=R}if(!_.stack)return"(no stack trace available)"}return _.stack.toString()}function stackTrace(){return demangleAll(jsStackTrace())}Module.stackTrace=stackTrace;var PAGE_SIZE=4096;function alignMemoryPage(_){return _%4096>0&&(_+=4096-_%4096),_}var HEAP,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,STATIC_BASE=0,STATICTOP=0,staticSealed=!1,STACK_BASE=0,STACKTOP=0,STACK_MAX=0,DYNAMIC_BASE=0,DYNAMICTOP=0;function abortOnCannotGrowMemory(){abort("Cannot enlarge memory arrays. Either (1) compile with  -s TOTAL_MEMORY=X  with X higher than the current value "+TOTAL_MEMORY+", (2) compile with  -s ALLOW_MEMORY_GROWTH=1  which adjusts the size at runtime but prevents some optimizations, (3) set Module.TOTAL_MEMORY to a higher value before the program runs, or if you want malloc to return NULL (0) instead of this abort, compile with  -s ABORTING_MALLOC=0 ")}function enlargeMemory(){abortOnCannotGrowMemory()}for(var TOTAL_STACK=Module.TOTAL_STACK||5242880,TOTAL_MEMORY=Module.TOTAL_MEMORY||268435456,totalMemory=64*1024;totalMemory<TOTAL_MEMORY||totalMemory<2*TOTAL_STACK;)totalMemory<16*1024*1024?totalMemory*=2:totalMemory+=16*1024*1024;totalMemory!==TOTAL_MEMORY&&(TOTAL_MEMORY=totalMemory),assert(typeof Int32Array<"u"&&typeof Float64Array<"u"&&!!new Int32Array(1).subarray&&!!new Int32Array(1).set,"JS engine does not provide full typed array support");var buffer;buffer=new ArrayBuffer(TOTAL_MEMORY),HEAP8=new Int8Array(buffer),HEAP16=new Int16Array(buffer),HEAP32=new Int32Array(buffer),HEAPU8=new Uint8Array(buffer),HEAPU16=new Uint16Array(buffer),HEAPU32=new Uint32Array(buffer),HEAPF32=new Float32Array(buffer),HEAPF64=new Float64Array(buffer),HEAP32[0]=255,assert(HEAPU8[0]===255&&HEAPU8[3]===0,"Typed arrays 2 must be run on a little-endian system"),Module.HEAP=HEAP,Module.buffer=buffer,Module.HEAP8=HEAP8,Module.HEAP16=HEAP16,Module.HEAP32=HEAP32,Module.HEAPU8=HEAPU8,Module.HEAPU16=HEAPU16,Module.HEAPU32=HEAPU32,Module.HEAPF32=HEAPF32,Module.HEAPF64=HEAPF64;function callRuntimeCallbacks(_){for(;_.length>0;){var R=_.shift();if(typeof R=="function"){R();continue}var O=R.func;typeof O=="number"?R.arg===void 0?Runtime.dynCall("v",O):Runtime.dynCall("vi",O,[R.arg]):O(R.arg===void 0?null:R.arg)}}var __ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1;function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function ensureInitRuntime(){runtimeInitialized||(runtimeInitialized=!0,callRuntimeCallbacks(__ATINIT__))}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){callRuntimeCallbacks(__ATEXIT__)}function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(_){__ATPRERUN__.unshift(_)}Module.addOnPreRun=addOnPreRun;function addOnInit(_){__ATINIT__.unshift(_)}Module.addOnInit=addOnInit;function addOnPreMain(_){__ATMAIN__.unshift(_)}Module.addOnPreMain=addOnPreMain;function addOnExit(_){__ATEXIT__.unshift(_)}Module.addOnExit=addOnExit;function addOnPostRun(_){__ATPOSTRUN__.unshift(_)}Module.addOnPostRun=addOnPostRun;function intArrayFromString(_,R,O){var U=O>0?O:lengthBytesUTF8(_)+1,w=new Array(U),e=stringToUTF8Array(_,w,0,w.length);return R&&(w.length=e),w}Module.intArrayFromString=intArrayFromString;function intArrayToString(_){for(var R=[],O=0;O<_.length;O++){var U=_[O];U>255&&(U&=255),R.push(String.fromCharCode(U))}return R.join("")}Module.intArrayToString=intArrayToString;function writeStringToMemory(_,R,O){for(var U=intArrayFromString(_,O),w=0;w<U.length;){var e=U[w];HEAP8[R+w>>0]=e,w=w+1}}Module.writeStringToMemory=writeStringToMemory;function writeArrayToMemory(_,R){for(var O=0;O<_.length;O++)HEAP8[R++>>0]=_[O]}Module.writeArrayToMemory=writeArrayToMemory;function writeAsciiToMemory(_,R,O){for(var U=0;U<_.length;++U)HEAP8[R++>>0]=_.charCodeAt(U);O||(HEAP8[R>>0]=0)}Module.writeAsciiToMemory=writeAsciiToMemory,(!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function _(R,O){var U=R>>>16,w=R&65535,e=O>>>16,me=O&65535;return w*me+(U*me+w*e<<16)|0}),Math.imul=Math.imul,Math.clz32||(Math.clz32=function(_){_=_>>>0;for(var R=0;R<32;R++)if(_&1<<31-R)return R;return 32}),Math.clz32=Math.clz32;var Math_abs=Math.abs,Math_cos=Math.cos,Math_sin=Math.sin,Math_sqrt=Math.sqrt,Math_ceil=Math.ceil,Math_floor=Math.floor,Math_min=Math.min,runDependencies=0,dependenciesFulfilled=null;function addRunDependency(_){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}Module.addRunDependency=addRunDependency;function removeRunDependency(_){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&dependenciesFulfilled){var R=dependenciesFulfilled;dependenciesFulfilled=null,R()}}Module.removeRunDependency=removeRunDependency,Module.preloadedImages={},Module.preloadedAudios={};var ASM_CONSTS=[function(_,R,O,U){{artoolkit.multiEachMarkerInfo||(artoolkit.multiEachMarkerInfo={});var w=artoolkit.multiEachMarkerInfo;w.visible=_,w.pattId=R,w.pattType=O,w.width=U}},function(_,R,O,U,w,e,me,ie,we,P,p,S,z,K,D,Q,V,T,F,N,k,G,Z,ne,te,de,oe,ye,Me,Ne,Pe,Qe,De){{var ke=arguments,Ce=12;artoolkit.markerInfo||(artoolkit.markerInfo={pos:[0,0],line:[[0,0,0],[0,0,0],[0,0,0],[0,0,0]],vertex:[[0,0],[0,0],[0,0],[0,0]]});var fe=artoolkit.markerInfo;fe.area=_,fe.id=R,fe.idPatt=O,fe.idMatrix=U,fe.dir=w,fe.dirPatt=e,fe.dirMatrix=me,fe.cf=ie,fe.cfPatt=we,fe.cfMatrix=P,fe.pos[0]=p,fe.pos[1]=S,fe.line[0][0]=ke[Ce++],fe.line[0][1]=ke[Ce++],fe.line[0][2]=ke[Ce++],fe.line[1][0]=ke[Ce++],fe.line[1][1]=ke[Ce++],fe.line[1][2]=ke[Ce++],fe.line[2][0]=ke[Ce++],fe.line[2][1]=ke[Ce++],fe.line[2][2]=ke[Ce++],fe.line[3][0]=ke[Ce++],fe.line[3][1]=ke[Ce++],fe.line[3][2]=ke[Ce++],fe.vertex[0][0]=ke[Ce++],fe.vertex[0][1]=ke[Ce++],fe.vertex[1][0]=ke[Ce++],fe.vertex[1][1]=ke[Ce++],fe.vertex[2][0]=ke[Ce++],fe.vertex[2][1]=ke[Ce++],fe.vertex[3][0]=ke[Ce++],fe.vertex[3][1]=ke[Ce++],fe.errorCorrected=ke[Ce++]}},function(_,R,O,U,w){{artoolkit.frameMalloc||(artoolkit.frameMalloc={});var e=artoolkit.frameMalloc;e.framepointer=R,e.framesize=O,e.camera=U,e.transform=w}}];function _emscripten_asm_const_33(_,R,O,U,w,e,me,ie,we,P,p,S,z,K,D,Q,V,T,F,N,k,G,Z,ne,te,de,oe,ye,Me,Ne,Pe,Qe,De,ke){return ASM_CONSTS[_](R,O,U,w,e,me,ie,we,P,p,S,z,K,D,Q,V,T,F,N,k,G,Z,ne,te,de,oe,ye,Me,Ne,Pe,Qe,De,ke)}function _emscripten_asm_const_4(_,R,O,U,w){return ASM_CONSTS[_](R,O,U,w)}function _emscripten_asm_const_5(_,R,O,U,w,e){return ASM_CONSTS[_](R,O,U,w,e)}STATIC_BASE=8,STATICTOP=STATIC_BASE+16496,__ATINIT__.push({func:function(){__GLOBAL__sub_I_ARToolKitJS_cpp()}},{func:function(){__GLOBAL__sub_I_bind_cpp()}}),allocate([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,52,9,0,0,53,42,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,116,42,0,0,52,9,0,0,136,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,52,9,0,0,73,47,0,0,0,0,0,0,1,0,0,0,128,1,0,0,0,0,0,0,228,8,0,0,54,47,0,0,228,8,0,0,23,47,0,0,228,8,0,0,62,46,0,0,228,8,0,0,31,46,0,0,228,8,0,0,0,46,0,0,228,8,0,0,225,45,0,0,228,8,0,0,194,45,0,0,228,8,0,0,93,46,0,0,228,8,0,0,124,46,0,0,228,8,0,0,155,46,0,0,228,8,0,0,186,46,0,0,228,8,0,0,217,46,0,0,228,8,0,0,248,46,0,0,12,9,0,0,199,47,0,0,48,2,0,0,0,0,0,0,228,8,0,0,212,47,0,0,228,8,0,0,225,47,0,0,12,9,0,0,238,47,0,0,56,2,0,0,0,0,0,0,12,9,0,0,15,48,0,0,64,2,0,0,0,0,0,0,12,9,0,0,49,48,0,0,64,2,0,0,0,0,0,0,200,8,0,0,89,48,0,0,200,8,0,0,91,48,0,0,200,8,0,0,93,48,0,0,200,8,0,0,95,48,0,0,200,8,0,0,97,48,0,0,200,8,0,0,99,48,0,0,200,8,0,0,101,48,0,0,200,8,0,0,103,48,0,0,200,8,0,0,105,48,0,0,200,8,0,0,107,48,0,0,200,8,0,0,109,48,0,0,200,8,0,0,111,48,0,0,200,8,0,0,113,48,0,0,12,9,0,0,115,48,0,0,80,2,0,0,0,0,0,0,12,9,0,0,152,48,0,0,80,2,0,0,0,0,0,0,255,15,0,0,6,16,0,0,18,16,0,0,28,16,0,0,255,255,255,255,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,11,0,0,0,5,0,0,0,10,0,0,0,7,0,0,0,14,0,0,0,15,0,0,0,13,0,0,0,9,0,0,0,1,0,0,0,2,0,0,0,4,0,0,0,8,0,0,0,16,0,0,0,32,0,0,0,64,0,0,0,3,0,0,0,6,0,0,0,12,0,0,0,24,0,0,0,48,0,0,0,96,0,0,0,67,0,0,0,5,0,0,0,10,0,0,0,20,0,0,0,40,0,0,0,80,0,0,0,35,0,0,0,70,0,0,0,15,0,0,0,30,0,0,0,60,0,0,0,120,0,0,0,115,0,0,0,101,0,0,0,73,0,0,0,17,0,0,0,34,0,0,0,68,0,0,0,11,0,0,0,22,0,0,0,44,0,0,0,88,0,0,0,51,0,0,0,102,0,0,0,79,0,0,0,29,0,0,0,58,0,0,0,116,0,0,0,107,0,0,0,85,0,0,0,41,0,0,0,82,0,0,0,39,0,0,0,78,0,0,0,31,0,0,0,62,0,0,0,124,0,0,0,123,0,0,0,117,0,0,0,105,0,0,0,81,0,0,0,33,0,0,0,66,0,0,0,7,0,0,0,14,0,0,0,28,0,0,0,56,0,0,0,112,0,0,0,99,0,0,0,69,0,0,0,9,0,0,0,18,0,0,0,36,0,0,0,72,0,0,0,19,0,0,0,38,0,0,0,76,0,0,0,27,0,0,0,54,0,0,0,108,0,0,0,91,0,0,0,53,0,0,0,106,0,0,0,87,0,0,0,45,0,0,0,90,0,0,0,55,0,0,0,110,0,0,0,95,0,0,0,61,0,0,0,122,0,0,0,119,0,0,0,109,0,0,0,89,0,0,0,49,0,0,0,98,0,0,0,71,0,0,0,13,0,0,0,26,0,0,0,52,0,0,0,104,0,0,0,83,0,0,0,37,0,0,0,74,0,0,0,23,0,0,0,46,0,0,0,92,0,0,0,59,0,0,0,118,0,0,0,111,0,0,0,93,0,0,0,57,0,0,0,114,0,0,0,103,0,0,0,77,0,0,0,25,0,0,0,50,0,0,0,100,0,0,0,75,0,0,0,21,0,0,0,42,0,0,0,84,0,0,0,43,0,0,0,86,0,0,0,47,0,0,0,94,0,0,0,63,0,0,0,126,0,0,0,127,0,0,0,125,0,0,0,121,0,0,0,113,0,0,0,97,0,0,0,65,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,4,0,0,0,2,0,0,0,8,0,0,0,5,0,0,0,10,0,0,0,3,0,0,0,14,0,0,0,9,0,0,0,7,0,0,0,6,0,0,0,13,0,0,0,11,0,0,0,12,0,0,0,255,255,255,255,0,0,0,0,1,0,0,0,7,0,0,0,2,0,0,0,14,0,0,0,8,0,0,0,56,0,0,0,3,0,0,0,63,0,0,0,15,0,0,0,31,0,0,0,9,0,0,0,90,0,0,0,57,0,0,0,21,0,0,0,4,0,0,0,28,0,0,0,64,0,0,0,67,0,0,0,16,0,0,0,112,0,0,0,32,0,0,0,97,0,0,0,10,0,0,0,108,0,0,0,91,0,0,0,70,0,0,0,58,0,0,0,38,0,0,0,22,0,0,0,47,0,0,0,5,0,0,0,54,0,0,0,29,0,0,0,19,0,0,0,65,0,0,0,95,0,0,0,68,0,0,0,45,0,0,0,17,0,0,0,43,0,0,0,113,0,0,0,115,0,0,0,33,0,0,0,77,0,0,0,98,0,0,0,117,0,0,0,11,0,0,0,87,0,0,0,109,0,0,0,35,0,0,0,92,0,0,0,74,0,0,0,71,0,0,0,79,0,0,0,59,0,0,0,104,0,0,0,39,0,0,0,100,0,0,0,23,0,0,0,82,0,0,0,48,0,0,0,119,0,0,0,6,0,0,0,126,0,0,0,55,0,0,0,13,0,0,0,30,0,0,0,62,0,0,0,20,0,0,0,89,0,0,0,66,0,0,0,27,0,0,0,96,0,0,0,111,0,0,0,69,0,0,0,107,0,0,0,46,0,0,0,37,0,0,0,18,0,0,0,53,0,0,0,44,0,0,0,94,0,0,0,114,0,0,0,42,0,0,0,116,0,0,0,76,0,0,0,34,0,0,0,86,0,0,0,78,0,0,0,73,0,0,0,99,0,0,0,103,0,0,0,118,0,0,0,81,0,0,0,12,0,0,0,125,0,0,0,88,0,0,0,61,0,0,0,110,0,0,0,26,0,0,0,36,0,0,0,106,0,0,0,93,0,0,0,52,0,0,0,75,0,0,0,41,0,0,0,72,0,0,0,85,0,0,0,80,0,0,0,102,0,0,0,60,0,0,0,124,0,0,0,105,0,0,0,25,0,0,0,40,0,0,0,51,0,0,0,101,0,0,0,84,0,0,0,24,0,0,0,123,0,0,0,83,0,0,0,50,0,0,0,49,0,0,0,122,0,0,0,120,0,0,0,121,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,136,0,0,0,5,0,0,0,144,0,0,0,6,0,0,0,152,0,0,0,9,0,0,0,176,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,253,255,255,255,254,255,255,255,0,0,0,0,112,2,0,0,168,2,0,0,200,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,208,2,0,0,168,2,0,0,112,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,104,1,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,168,2,0,0,0,0,0,0,32,2,0,0,1,0,0,0,2,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,96,2,0,0,3,0,0,0,4,0,0,0,5,0,0,0,6,0,0,0,1,0,0,0,0,0,0,0,80,2,0,0,3,0,0,0,7,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,216,2,0,0,3,0,0,0,8,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,232,2,0,0,3,0,0,0,9,0,0,0,5,0,0,0,6,0,0,0,2,0,0,0,3,0,0,0,3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,192,3,0,0,192,4,0,0,192,5,0,0,192,6,0,0,192,7,0,0,192,8,0,0,192,9,0,0,192,10,0,0,192,11,0,0,192,12,0,0,192,13,0,0,192,14,0,0,192,15,0,0,192,16,0,0,192,17,0,0,192,18,0,0,192,19,0,0,192,20,0,0,192,21,0,0,192,22,0,0,192,23,0,0,192,24,0,0,192,25,0,0,192,26,0,0,192,27,0,0,192,28,0,0,192,29,0,0,192,30,0,0,192,31,0,0,192,0,0,0,179,1,0,0,195,2,0,0,195,3,0,0,195,4,0,0,195,5,0,0,195,6,0,0,195,7,0,0,195,8,0,0,195,9,0,0,195,10,0,0,195,11,0,0,195,12,0,0,195,13,0,0,211,14,0,0,195,15,0,0,195,0,0,12,187,1,0,12,195,2,0,12,195,3,0,12,195,4,0,12,211,240,10,0,0,96,11,0,0,0,0,0,0,10,0,0,0,100,0,0,0,232,3,0,0,16,39,0,0,160,134,1,0,64,66,15,0,128,150,152,0,0,225,245,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,0,0,0,5,0,0,0,81,62,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6,0,0,0,5,0,0,0,73,58,0,0,0,4,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,10,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,5,0,0,0,7,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,211,0,0,0,1,0,0,0,11,0,0,0,13,0,0,0,17,0,0,0,19,0,0,0,23,0,0,0,29,0,0,0,31,0,0,0,37,0,0,0,41,0,0,0,43,0,0,0,47,0,0,0,53,0,0,0,59,0,0,0,61,0,0,0,67,0,0,0,71,0,0,0,73,0,0,0,79,0,0,0,83,0,0,0,89,0,0,0,97,0,0,0,101,0,0,0,103,0,0,0,107,0,0,0,109,0,0,0,113,0,0,0,121,0,0,0,127,0,0,0,131,0,0,0,137,0,0,0,139,0,0,0,143,0,0,0,149,0,0,0,151,0,0,0,157,0,0,0,163,0,0,0,167,0,0,0,169,0,0,0,173,0,0,0,179,0,0,0,181,0,0,0,187,0,0,0,191,0,0,0,193,0,0,0,197,0,0,0,199,0,0,0,209,0,0,0,69,114,114,111,114,58,32,108,97,98,101,108,105,110,103,32,119,111,114,107,32,111,118,101,114,102,108,111,119,46,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,40,37,100,41,32,114,101,113,117,101,115,116,101,100,46,10,0,85,110,107,110,111,119,110,32,111,114,32,117,110,115,117,112,112,111,114,116,101,100,32,108,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,114,101,113,117,101,115,116,101,100,46,32,83,101,116,32,116,111,32,109,97,110,117,97,108,46,10,0,76,97,98,101,108,105,110,103,32,116,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,46,10,0,77,65,78,85,65,76,0,65,85,84,79,95,77,69,68,73,65,78,0,65,85,84,79,95,79,84,83,85,0,65,85,84,79,95,65,68,65,80,84,73,86,69,65,85,84,79,95,66,82,65,67,75,69,84,73,78,71,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,109,97,114,107,101,114,32,99,111,117,110,116,115,32,45,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,32,91,37,51,100,58,32,37,51,100,93,43,46,10,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,98,114,97,99,107,101,116,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,109,101,100,105,97,110,0,79,116,115,117,0,65,117,116,111,32,116,104,114,101,115,104,111,108,100,32,40,37,115,41,32,97,100,106,117,115,116,101,100,32,116,104,114,101,115,104,111,108,100,32,116,111,32,37,100,46,10,0,63,63,63,32,49,10,0,63,63,63,32,50,10,0,63,63,63,32,51,10,0,69,114,114,111,114,58,32,85,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,32,112,97,115,115,101,100,32,116,111,32,97,114,73,109,97,103,101,80,114,111,99,72,105,115,116,40,41,46,10,0,0,0,0,1,0,1,1,1,0,2,4,255,255,5,3,1,0,2,255,6,7,255,3,1,2,2,3,2,3,2,3,3,0,255,4,6,7,5,255,1,4,5,4,4,5,5,4,5,7,6,6,6,7,7,7,6,255,2,4,6,7,5,3,255,0,1,1,1,1,1,1,0,1,1,1,0,0,1,1,1,1,1,0,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,1,1,1,1,0,1,1,1,0,1,1,0,1,1,1,1,1,0,0,1,1,1,0,1,1,1,1,1,1,0,0,255,255,3,255,5,6,255,255,9,10,255,12,255,255,15,255,17,18,255,20,255,255,23,24,255,255,27,255,29,30,255,255,1,2,255,4,255,255,7,8,255,255,11,255,13,14,255,16,255,255,19,255,21,22,255,255,25,26,255,28,255,255,31,69,114,114,111,114,58,32,117,110,115,117,112,112,111,114,116,101,100,32,112,105,120,101,108,32,102,111,114,109,97,116,46,10,0,69,114,114,111,114,58,32,78,85,76,76,32,112,97,116,116,72,97,110,100,108,101,46,10,0,69,114,114,111,114,58,32,99,97,110,39,116,32,108,111,97,100,32,112,97,116,116,101,114,110,32,102,114,111,109,32,78,85,76,76,32,98,117,102,102,101,114,46,10,0,69,114,114,111,114,58,32,111,117,116,32,111,102,32,109,101,109,111,114,121,46,10,0,32,9,10,13,0,80,97,116,116,101,114,110,32,68,97,116,97,32,114,101,97,100,32,101,114,114,111,114,33,33,10,0,69,114,114,111,114,32,111,112,101,110,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,114,101,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,39,37,115,39,46,10,0,114,98,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,115,32,102,105,108,101,32,34,37,115,34,32,102,111,114,32,114,101,97,100,105,110,103,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,102,105,108,101,32,108,101,110,103,116,104,46,0,69,114,114,111,114,58,32,115,117,112,112,108,105,101,100,32,102,105,108,101,32,100,111,101,115,32,110,111,116,32,97,112,112,101,97,114,32,116,111,32,98,101,32,97,110,32,65,82,84,111,111,108,75,105,116,32,99,97,109,101,114,97,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,46,10,0,69,114,114,111,114,32,40,37,100,41,58,32,117,110,97,98,108,101,32,116,111,32,114,101,97,100,32,102,114,111,109,32,102,105,108,101,46,0,69,114,114,111,114,58,32,105,99,112,71,101,116,74,95,85,95,88,99,0,69,114,114,111,114,58,32,109,97,108,108,111,99,10,0,69,114,114,111,114,32,49,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,50,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,51,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,52,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,53,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,54,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,69,114,114,111,114,32,55,58,32,105,99,112,71,101,116,73,110,105,116,88,119,50,88,99,10,0,114,0,69,114,114,111,114,58,32,117,110,97,98,108,101,32,116,111,32,111,112,101,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,46,10,0,37,115,37,115,10,0,0,37,100,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,110,117,109,98,101,114,32,111,102,32,109,97,114,107,101,114,32,99,111,110,102,105,103,115,32,116,111,32,114,101,97,100,46,10,0,79,117,116,32,111,102,32,109,101,109,111,114,121,33,33,10,0,37,108,108,117,37,99,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,112,97,116,116,101,114,110,32,39,37,115,39,32,115,112,101,99,105,102,105,101,100,32,105,110,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,117,114,97,116,105,111,110,32,119,104,105,108,101,32,105,110,32,98,97,114,99,111,100,101,45,111,110,108,121,32,109,111,100,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,100,101,116,101,114,109,105,110,101,32,100,105,114,101,99,116,111,114,121,32,110,97,109,101,46,10,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,58,32,85,110,97,98,108,101,32,116,111,32,108,111,97,100,32,112,97,116,116,101,114,110,32,39,37,115,39,46,10,0,37,108,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,70,105,114,115,116,32,108,105,110,101,32,109,117,115,116,32,98,101,32,112,97,116,116,101,114,110,32,119,105,100,116,104,46,10,0,37,108,102,32,37,108,102,32,37,108,102,32,37,108,102,0,37,102,32,37,102,0,69,114,114,111,114,32,112,114,111,99,101,115,115,105,110,103,32,109,117,108,116,105,109,97,114,107,101,114,32,99,111,110,102,105,103,32,102,105,108,101,32,39,37,115,39,44,32,109,97,114,107,101,114,32,100,101,102,105,110,105,116,105,111,110,32,37,51,100,58,32,76,105,110,101,115,32,50,32,45,32,52,32,109,117,115,116,32,98,101,32,109,97,114,107,101,114,32,116,114,97,110,115,102,111,114,109,46,10,0,97,114,103,108,67,97,109,101,114,97,70,114,117,115,116,117,109,40,41,58,32,97,114,80,97,114,97,109,68,101,99,111,109,112,77,97,116,40,41,32,105,110,100,105,99,97,116,101,100,32,112,97,114,97,109,101,116,101,114,32,101,114,114,111,114,46,10,0,108,111,97,100,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,114,97,109,101,116,101,114,32,102,105,108,101,32,37,115,32,102,111,114,32,99,97,109,101,114,97,46,10,0,42,42,42,32,67,97,109,101,114,97,32,80,97,114,97,109,101,116,101,114,32,114,101,115,105,122,101,100,32,102,114,111,109,32,37,100,44,32,37,100,46,32,42,42,42,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,114,97,109,76,84,67,114,101,97,116,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,58,32,97,114,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,115,101,116,67,97,109,101,114,97,40,41,58,32,69,114,114,111,114,32,99,114,101,97,116,105,110,103,32,51,68,32,104,97,110,100,108,101,0,108,111,97,100,77,97,114,107,101,114,40,41,58,32,69,114,114,111,114,32,108,111,97,100,105,110,103,32,112,97,116,116,101,114,110,32,102,105,108,101,32,37,115,46,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,97,114,107,101,114,46,10,0,99,111,110,102,105,103,32,100,97,116,97,32,108,111,97,100,32,101,114,114,111,114,32,33,33,10,0,65,82,84,111,111,108,75,105,116,74,83,40,41,58,32,85,110,97,98,108,101,32,116,111,32,115,101,116,32,117,112,32,65,82,32,109,117,108,116,105,109,97,114,107,101,114,46,10,0,80,97,116,116,101,114,110,32,100,101,116,101,99,116,105,111,110,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,80,97,116,116,101,114,110,32,114,97,116,105,111,32,115,105,122,101,32,115,101,116,32,116,111,32,37,102,46,10,0,76,97,98,101,108,105,110,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,115,101,116,32,116,111,32,37,100,10,0,84,104,114,101,115,104,111,108,100,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,10,0,111,110,46,0,111,102,102,46,0,68,101,98,117,103,32,109,111,100,101,32,115,101,116,32,116,111,32,37,115,10,0,73,109,97,103,101,32,112,114,111,99,46,32,109,111,100,101,32,115,101,116,32,116,111,32,37,100,46,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,73,110,102,111,34,93,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,118,105,115,105,98,108,101,39,93,32,61,32,36,48,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,73,100,39,93,32,61,32,36,49,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,112,97,116,116,84,121,112,101,39,93,32,61,32,36,50,59,32,109,117,108,116,105,69,97,99,104,77,97,114,107,101,114,91,39,119,105,100,116,104,39,93,32,61,32,36,51,59,32,125,0,123,32,118,97,114,32,36,97,32,61,32,97,114,103,117,109,101,110,116,115,59,32,118,97,114,32,105,32,61,32,49,50,59,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,32,61,32,40,123,32,112,111,115,58,32,91,48,44,48,93,44,32,108,105,110,101,58,32,91,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,44,32,91,48,44,48,44,48,93,93,44,32,118,101,114,116,101,120,58,32,91,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,44,32,91,48,44,48,93,93,32,125,41,59,32,125,32,118,97,114,32,109,97,114,107,101,114,73,110,102,111,32,61,32,97,114,116,111,111,108,107,105,116,91,34,109,97,114,107,101,114,73,110,102,111,34,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,97,114,101,97,34,93,32,61,32,36,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,34,93,32,61,32,36,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,80,97,116,116,34,93,32,61,32,36,50,59,32,109,97,114,107,101,114,73,110,102,111,91,34,105,100,77,97,116,114,105,120,34,93,32,61,32,36,51,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,34,93,32,61,32,36,52,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,80,97,116,116,34,93,32,61,32,36,53,59,32,109,97,114,107,101,114,73,110,102,111,91,34,100,105,114,77,97,116,114,105,120,34,93,32,61,32,36,54,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,34,93,32,61,32,36,55,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,80,97,116,116,34,93,32,61,32,36,56,59,32,109,97,114,107,101,114,73,110,102,111,91,34,99,102,77,97,116,114,105,120,34,93,32,61,32,36,57,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,48,93,32,61,32,36,49,48,59,32,109,97,114,107,101,114,73,110,102,111,91,34,112,111,115,34,93,91,49,93,32,61,32,36,49,49,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,48,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,49,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,50,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,108,105,110,101,34,93,91,51,93,91,50,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,48,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,49,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,50,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,48,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,118,101,114,116,101,120,34,93,91,51,93,91,49,93,32,61,32,36,97,91,105,43,43,93,59,32,109,97,114,107,101,114,73,110,102,111,91,34,101,114,114,111,114,67,111,114,114,101,99,116,101,100,34,93,32,61,32,36,97,91,105,43,43,93,59,32,125,0,115,101,116,117,112,40,41,58,32,69,114,114,111,114,58,32,97,114,80,97,116,116,67,114,101,97,116,101,72,97,110,100,108,101,46,10,0,65,108,108,111,99,97,116,101,100,32,118,105,100,101,111,70,114,97,109,101,83,105,122,101,32,37,100,10,0,123,32,105,102,32,40,33,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,41,32,123,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,32,61,32,40,123,125,41,59,32,125,32,118,97,114,32,102,114,97,109,101,77,97,108,108,111,99,32,61,32,97,114,116,111,111,108,107,105,116,91,34,102,114,97,109,101,77,97,108,108,111,99,34,93,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,112,111,105,110,116,101,114,34,93,32,61,32,36,49,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,102,114,97,109,101,115,105,122,101,34,93,32,61,32,36,50,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,99,97,109,101,114,97,34,93,32,61,32,36,51,59,32,102,114,97,109,101,77,97,108,108,111,99,91,34,116,114,97,110,115,102,111,114,109,34,93,32,61,32,36,52,59,32,125,0,115,101,116,117,112,0,116,101,97,114,100,111,119,110,0,95,97,100,100,77,97,114,107,101,114,0,95,97,100,100,77,117,108,116,105,77,97,114,107,101,114,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,77,97,114,107,101,114,67,111,117,110,116,0,95,108,111,97,100,67,97,109,101,114,97,0,115,101,116,77,97,114,107,101,114,73,110,102,111,68,105,114,0,115,101,116,77,97,114,107,101,114,73,110,102,111,86,101,114,116,101,120,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,83,113,117,97,114,101,67,111,110,116,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,0,103,101,116,84,114,97,110,115,77,97,116,77,117,108,116,105,83,113,117,97,114,101,82,111,98,117,115,116,0,100,101,116,101,99,116,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,78,117,109,0,103,101,116,77,117,108,116,105,69,97,99,104,77,97,114,107,101,114,0,103,101,116,77,97,114,107,101,114,0,115,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,68,101,98,117,103,77,111,100,101,0,103,101,116,80,114,111,99,101,115,115,105,110,103,73,109,97,103,101,0,115,101,116,76,111,103,76,101,118,101,108,0,103,101,116,76,111,103,76,101,118,101,108,0,115,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,78,101,97,114,80,108,97,110,101,0,115,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,103,101,116,80,114,111,106,101,99,116,105,111,110,70,97,114,80,108,97,110,101,0,115,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,103,101,116,84,104,114,101,115,104,111,108,100,77,111,100,101,0,115,101,116,84,104,114,101,115,104,111,108,100,0,103,101,116,84,104,114,101,115,104,111,108,100,0,115,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,103,101,116,80,97,116,116,101,114,110,68,101,116,101,99,116,105,111,110,77,111,100,101,0,115,101,116,80,97,116,116,82,97,116,105,111,0,103,101,116,80,97,116,116,82,97,116,105,111,0,115,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,103,101,116,77,97,116,114,105,120,67,111,100,101,84,121,112,101,0,115,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,103,101,116,76,97,98,101,108,105,110,103,77,111,100,101,0,115,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,103,101,116,73,109,97,103,101,80,114,111,99,77,111,100,101,0,69,82,82,79,82,95,65,82,67,79,78,84,82,79,76,76,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,85,76,84,73,77,65,82,75,69,82,95,78,79,84,95,70,79,85,78,68,0,69,82,82,79,82,95,77,65,82,75,69,82,95,73,78,68,69,88,95,79,85,84,95,79,70,95,66,79,85,78,68,83,0,65,82,95,68,69,66,85,71,95,68,73,83,65,66,76,69,0,65,82,95,68,69,66,85,71,95,69,78,65,66,76,69,0,65,82,95,68,69,70,65,85,76,84,95,68,69,66,85,71,95,77,79,68,69,0,65,82,95,76,65,66,69,76,73,78,71,95,87,72,73,84,69,95,82,69,71,73,79,78,0,65,82,95,76,65,66,69,76,73,78,71,95,66,76,65,67,75,95,82,69,71,73,79,78,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,77,79,68,69,0,65,82,95,68,69,70,65,85,76,84,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,82,65,77,69,95,73,77,65,71,69,0,65,82,95,73,77,65,71,69,95,80,82,79,67,95,70,73,69,76,68,95,73,77,65,71,69,0,65,82,95,68,69,70,65,85,76,84,95,73,77,65,71,69,95,80,82,79,67,95,77,79,68,69,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,68,69,84,69,67,84,73,79,78,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,67,79,76,79,82,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,84,69,77,80,76,65,84,69,95,77,65,84,67,72,73,78,71,95,77,79,78,79,95,65,78,68,95,77,65,84,82,73,88,0,65,82,95,68,69,70,65,85,76,84,95,80,65,84,84,69,82,78,95,68,69,84,69,67,84,73,79,78,95,77,79,68,69,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,78,79,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,0,65,82,95,85,83,69,95,84,82,65,67,75,73,78,71,95,72,73,83,84,79,82,89,95,86,50,0,65,82,95,68,69,70,65,85,76,84,95,77,65,82,75,69,82,95,69,88,84,82,65,67,84,73,79,78,95,77,79,68,69,0,65,82,95,77,65,88,95,76,79,79,80,95,67,79,85,78,84,0,65,82,95,76,79,79,80,95,66,82,69,65,75,95,84,72,82,69,83,72,0,65,82,95,76,79,71,95,76,69,86,69,76,95,68,69,66,85,71,0,65,82,95,76,79,71,95,76,69,86,69,76,95,73,78,70,79,0,65,82,95,76,79,71,95,76,69,86,69,76,95,87,65,82,78,0,65,82,95,76,79,71,95,76,69,86,69,76,95,69,82,82,79,82,0,65,82,95,76,79,71,95,76,69,86,69,76,95,82,69,76,95,73,78,70,79,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,72,65,77,77,73,78,71,54,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,51,120,51,95,80,65,82,73,84,89,54,53,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,57,95,51,0,65,82,95,77,65,84,82,73,88,95,67,79,68,69,95,52,120,52,95,66,67,72,95,49,51,95,53,95,53,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,77,65,78,85,65,76,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,77,69,68,73,65,78,0,65,82,95,76,65],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE),allocate([66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,79,84,83,85,0,65,82,95,76,65,66,69,76,73,78,71,95,84,72,82,69,83,72,95,77,79,68,69,95,65,85,84,79,95,65,68,65,80,84,73,86,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,78,79,78,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,65,84,84,69,82,78,95,69,88,84,82,65,67,84,73,79,78,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,71,69,78,69,82,73,67,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,84,82,65,83,84,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,78,79,84,95,70,79,85,78,68,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,66,65,82,67,79,68,69,95,69,68,67,95,70,65,73,76,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,77,65,84,67,72,95,67,79,78,70,73,68,69,78,67,69,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,80,79,83,69,95,69,82,82,79,82,95,77,85,76,84,73,0,65,82,95,77,65,82,75,69,82,95,73,78,70,79,95,67,85,84,79,70,70,95,80,72,65,83,69,95,72,69,85,82,73,83,84,73,67,95,84,82,79,85,66,76,69,83,79,77,69,95,77,65,84,82,73,88,95,67,79,68,69,83,0,118,105,105,102,0,118,105,105,105,0,100,105,105,0,118,105,105,100,0,105,105,0,118,105,105,0,105,105,105,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,99,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,99,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,99,69,69,69,69,0,78,83,116,51,95,95,49,50,49,95,95,98,97,115,105,99,95,115,116,114,105,110,103,95,99,111,109,109,111,110,73,76,98,49,69,69,69,0,105,105,105,105,0,105,105,105,105,105,0,118,111,105,100,0,98,111,111,108,0,99,104,97,114,0,115,105,103,110,101,100,32,99,104,97,114,0,117,110,115,105,103,110,101,100,32,99,104,97,114,0,115,104,111,114,116,0,117,110,115,105,103,110,101,100,32,115,104,111,114,116,0,105,110,116,0,117,110,115,105,103,110,101,100,32,105,110,116,0,108,111,110,103,0,117,110,115,105,103,110,101,100,32,108,111,110,103,0,102,108,111,97,116,0,100,111,117,98,108,101,0,115,116,100,58,58,115,116,114,105,110,103,0,115,116,100,58,58,98,97,115,105,99,95,115,116,114,105,110,103,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,115,116,100,58,58,119,115,116,114,105,110,103,0,101,109,115,99,114,105,112,116,101,110,58,58,118,97,108,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,99,104,97,114,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,115,104,111,114,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,105,110,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,110,115,105,103,110,101,100,32,108,111,110,103,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,56,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,49,54,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,117,105,110,116,51,50,95,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,102,108,111,97,116,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,100,111,117,98,108,101,62,0,101,109,115,99,114,105,112,116,101,110,58,58,109,101,109,111,114,121,95,118,105,101,119,60,108,111,110,103,32,100,111,117,98,108,101,62,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,101,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,100,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,102,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,109,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,108,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,106,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,105,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,116,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,115,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,104,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,97,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,49,49,109,101,109,111,114,121,95,118,105,101,119,73,99,69,69,0,78,49,48,101,109,115,99,114,105,112,116,101,110,51,118,97,108,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,119,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,119,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,119,69,69,69,69,0,78,83,116,51,95,95,49,49,50,98,97,115,105,99,95,115,116,114,105,110,103,73,104,78,83,95,49,49,99,104,97,114,95,116,114,97,105,116,115,73,104,69,69,78,83,95,57,97,108,108,111,99,97,116,111,114,73,104,69,69,69,69,0,83,116,57,98,97,100,95,97,108,108,111,99,0,83,116,57,101,120,99,101,112,116,105,111,110,0,83,116,57,116,121,112,101,95,105,110,102,111,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,54,95,95,115,104,105,109,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,49,55,95,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,51,95,95,102,117,110,100,97,109,101,110,116,97,108,95,116,121,112,101,95,105,110,102,111,69,0,118,0,98,0,99,0,104,0,97,0,115,0,116,0,105,0,106,0,108,0,109,0,102,0,100,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,48,95,95,115,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,78,49,48,95,95,99,120,120,97,98,105,118,49,50,49,95,95,118,109,105,95,99,108,97,115,115,95,116,121,112,101,95,105,110,102,111,69,0,33,34,118,101,99,116,111,114,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,118,101,99,116,111,114,0,95,95,116,104,114,111,119,95,108,101,110,103,116,104,95,101,114,114,111,114,0,115,116,100,58,58,98,97,100,95,97,108,108,111,99,0,33,34,98,97,115,105,99,95,115,116,114,105,110,103,32,108,101,110,103,116,104,95,101,114,114,111,114,34,0,47,85,115,101,114,115,47,106,101,114,111,109,101,101,116,105,101,110,110,101,47,119,111,114,107,47,101,109,115,100,107,95,112,111,114,116,97,98,108,101,47,101,109,115,99,114,105,112,116,101,110,47,49,46,51,53,46,48,47,115,121,115,116,101,109,47,105,110,99,108,117,100,101,47,108,105,98,99,120,120,47,115,116,114,105,110,103,0,84,33,34,25,13,1,2,3,17,75,28,12,16,4,11,29,18,30,39,104,110,111,112,113,98,32,5,6,15,19,20,21,26,8,22,7,40,36,23,24,9,10,14,27,31,37,35,131,130,125,38,42,43,60,61,62,63,67,71,74,77,88,89,90,91,92,93,94,95,96,97,99,100,101,102,103,105,106,107,108,114,115,116,121,122,123,124,0,73,108,108,101,103,97,108,32,98,121,116,101,32,115,101,113,117,101,110,99,101,0,68,111,109,97,105,110,32,101,114,114,111,114,0,82,101,115,117,108,116,32,110,111,116,32,114,101,112,114,101,115,101,110,116,97,98,108,101,0,78,111,116,32,97,32,116,116,121,0,80,101,114,109,105,115,115,105,111,110,32,100,101,110,105,101,100,0,79,112,101,114,97,116,105,111,110,32,110,111,116,32,112,101,114,109,105,116,116,101,100,0,78,111,32,115,117,99,104,32,102,105,108,101,32,111,114,32,100,105,114,101,99,116,111,114,121,0,78,111,32,115,117,99,104,32,112,114,111,99,101,115,115,0,70,105,108,101,32,101,120,105,115,116,115,0,86,97,108,117,101,32,116,111,111,32,108,97,114,103,101,32,102,111,114,32,100,97,116,97,32,116,121,112,101,0,78,111,32,115,112,97,99,101,32,108,101,102,116,32,111,110,32,100,101,118,105,99,101,0,79,117,116,32,111,102,32,109,101,109,111,114,121,0,82,101,115,111,117,114,99,101,32,98,117,115,121,0,73,110,116,101,114,114,117,112,116,101,100,32,115,121,115,116,101,109,32,99,97,108,108,0,82,101,115,111,117,114,99,101,32,116,101,109,112,111,114,97,114,105,108,121,32,117,110,97,118,97,105,108,97,98,108,101,0,73,110,118,97,108,105,100,32,115,101,101,107,0,67,114,111,115,115,45,100,101,118,105,99,101,32,108,105,110,107,0,82,101,97,100,45,111,110,108,121,32,102,105,108,101,32,115,121,115,116,101,109,0,68,105,114,101,99,116,111,114,121,32,110,111,116,32,101,109,112,116,121,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,112,101,101,114,0,79,112,101,114,97,116,105,111,110,32,116,105,109,101,100,32,111,117,116,0,67,111,110,110,101,99,116,105,111,110,32,114,101,102,117,115,101,100,0,72,111,115,116,32,105,115,32,100,111,119,110,0,72,111,115,116,32,105,115,32,117,110,114,101,97,99,104,97,98,108,101,0,65,100,100,114,101,115,115,32,105,110,32,117,115,101,0,66,114,111,107,101,110,32,112,105,112,101,0,73,47,79,32,101,114,114,111,114,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,32,111,114,32,97,100,100,114,101,115,115,0,66,108,111,99,107,32,100,101,118,105,99,101,32,114,101,113,117,105,114,101,100,0,78,111,32,115,117,99,104,32,100,101,118,105,99,101,0,78,111,116,32,97,32,100,105,114,101,99,116,111,114,121,0,73,115,32,97,32,100,105,114,101,99,116,111,114,121,0,84,101,120,116,32,102,105,108,101,32,98,117,115,121,0,69,120,101,99,32,102,111,114,109,97,116,32,101,114,114,111,114,0,73,110,118,97,108,105,100,32,97,114,103,117,109,101,110,116,0,65,114,103,117,109,101,110,116,32,108,105,115,116,32,116,111,111,32,108,111,110,103,0,83,121,109,98,111,108,105,99,32,108,105,110,107,32,108,111,111,112,0,70,105,108,101,110,97,109,101,32,116,111,111,32,108,111,110,103,0,84,111,111,32,109,97,110,121,32,111,112,101,110,32,102,105,108,101,115,32,105,110,32,115,121,115,116,101,109,0,78,111,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,115,32,97,118,97,105,108,97,98,108,101,0,66,97,100,32,102,105,108,101,32,100,101,115,99,114,105,112,116,111,114,0,78,111,32,99,104,105,108,100,32,112,114,111,99,101,115,115,0,66,97,100,32,97,100,100,114,101,115,115,0,70,105,108,101,32,116,111,111,32,108,97,114,103,101,0,84,111,111,32,109,97,110,121,32,108,105,110,107,115,0,78,111,32,108,111,99,107,115,32,97,118,97,105,108,97,98,108,101,0,82,101,115,111,117,114,99,101,32,100,101,97,100,108,111,99,107,32,119,111,117,108,100,32,111,99,99,117,114,0,83,116,97,116,101,32,110,111,116,32,114,101,99,111,118,101,114,97,98,108,101,0,80,114,101,118,105,111,117,115,32,111,119,110,101,114,32,100,105,101,100,0,79,112,101,114,97,116,105,111,110,32,99,97,110,99,101,108,101,100,0,70,117,110,99,116,105,111,110,32,110,111,116,32,105,109,112,108,101,109,101,110,116,101,100,0,78,111,32,109,101,115,115,97,103,101,32,111,102,32,100,101,115,105,114,101,100,32,116,121,112,101,0,73,100,101,110,116,105,102,105,101,114,32,114,101,109,111,118,101,100,0,68,101,118,105,99,101,32,110,111,116,32,97,32,115,116,114,101,97,109,0,78,111,32,100,97,116,97,32,97,118,97,105,108,97,98,108,101,0,68,101,118,105,99,101,32,116,105,109,101,111,117,116,0,79,117,116,32,111,102,32,115,116,114,101,97,109,115,32,114,101,115,111,117,114,99,101,115,0,76,105,110,107,32,104,97,115,32,98,101,101,110,32,115,101,118,101,114,101,100,0,80,114,111,116,111,99,111,108,32,101,114,114,111,114,0,66,97,100,32,109,101,115,115,97,103,101,0,70,105,108,101,32,100,101,115,99,114,105,112,116,111,114,32,105,110,32,98,97,100,32,115,116,97,116,101,0,78,111,116,32,97,32,115,111,99,107,101,116,0,68,101,115,116,105,110,97,116,105,111,110,32,97,100,100,114,101,115,115,32,114,101,113,117,105,114,101,100,0,77,101,115,115,97,103,101,32,116,111,111,32,108,97,114,103,101,0,80,114,111,116,111,99,111,108,32,119,114,111,110,103,32,116,121,112,101,32,102,111,114,32,115,111,99,107,101,116,0,80,114,111,116,111,99,111,108,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,80,114,111,116,111,99,111,108,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,83,111,99,107,101,116,32,116,121,112,101,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,78,111,116,32,115,117,112,112,111,114,116,101,100,0,80,114,111,116,111,99,111,108,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,0,65,100,100,114,101,115,115,32,102,97,109,105,108,121,32,110,111,116,32,115,117,112,112,111,114,116,101,100,32,98,121,32,112,114,111,116,111,99,111,108,0,65,100,100,114,101,115,115,32,110,111,116,32,97,118,97,105,108,97,98,108,101,0,78,101,116,119,111,114,107,32,105,115,32,100,111,119,110,0,78,101,116,119,111,114,107,32,117,110,114,101,97,99,104,97,98,108,101,0,67,111,110,110,101,99,116,105,111,110,32,114,101,115,101,116,32,98,121,32,110,101,116,119,111,114,107,0,67,111,110,110,101,99,116,105,111,110,32,97,98,111,114,116,101,100,0,78,111,32,98,117,102,102,101,114,32,115,112,97,99,101,32,97,118,97,105,108,97,98,108,101,0,83,111,99,107,101,116,32,105,115,32,99,111,110,110,101,99,116,101,100,0,83,111,99,107,101,116,32,110,111,116,32,99,111,110,110,101,99,116,101,100,0,67,97,110,110,111,116,32,115,101,110,100,32,97,102,116,101,114,32,115,111,99,107,101,116,32,115,104,117,116,100,111,119,110,0,79,112,101,114,97,116,105,111,110,32,97,108,114,101,97,100,121,32,105,110,32,112,114,111,103,114,101,115,115,0,79,112,101,114,97,116,105,111,110,32,105,110,32,112,114,111,103,114,101,115,115,0,83,116,97,108,101,32,102,105,108,101,32,104,97,110,100,108,101,0,82,101,109,111,116,101,32,73,47,79,32,101,114,114,111,114,0,81,117,111,116,97,32,101,120,99,101,101,100,101,100,0,78,111,32,109,101,100,105,117,109,32,102,111,117,110,100,0,87,114,111,110,103,32,109,101,100,105,117,109,32,116,121,112,101,0,78,111,32,101,114,114,111,114,32,105,110,102,111,114,109,97,116,105,111,110,0,0,105,110,102,105,110,105,116,121,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,3,4,5,6,7,8,9,255,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,1,2,4,7,3,6,5,0,114,119,97],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+10240),allocate([17,0,10,0,17,17,17,0,0,0,0,5,0,0,0,0,0,0,9,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,15,10,17,17,17,3,10,7,0,1,19,9,11,11,0,0,9,6,11,0,0,11,0,6,17,0,0,0,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,17,0,10,10,17,17,17,0,10,0,0,2,0,9,11,0,0,0,9,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,14,0,0,0,0,0,0,0,0,0,0,0,13,0,0,0,4,13,0,0,0,0,9,14,0,0,0,0,0,14,0,0,14,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,0,15,0,0,0,0,15,0,0,0,0,9,16,0,0,0,0,0,16,0,0,16,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,18,18,18,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,11,0,0,0,0,0,0,0,0,0,0,0,10,0,0,0,0,10,0,0,0,0,9,11,0,0,0,0,0,11,0,0,11,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,12,0,0,0,0,9,12,0,0,0,0,0,12,0,0,12,0,0,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,45,43,32,32,32,48,88,48,120,0,40,110,117,108,108,41,0,45,48,88,43,48,88,32,48,88,45,48,120,43,48,120,32,48,120,0,105,110,102,0,73,78,70,0,110,97,110,0,78,65,78,0,46,0],"i8",ALLOC_NONE,Runtime.GLOBAL_BASE+15945);var tempDoublePtr=Runtime.alignMemory(allocate(12,"i8",ALLOC_STATIC),8);assert(tempDoublePtr%8==0);function _atexit(_,R){__ATEXIT__.unshift({func:_,arg:R})}function ___cxa_atexit(){return _atexit.apply(null,arguments)}Module._i64Subtract=_i64Subtract;function ___assert_fail(_,R,O,U){throw ABORT=!0,"Assertion failed: "+Pointer_stringify(_)+", at: "+[R?Pointer_stringify(R):"unknown filename",O,U?Pointer_stringify(U):"unknown function"]+" at "+stackTrace()}function embind_init_charCodes(){for(var _=new Array(256),R=0;R<256;++R)_[R]=String.fromCharCode(R);embind_charCodes=_}var embind_charCodes=void 0;function readLatin1String(_){for(var R="",O=_;HEAPU8[O];)R+=embind_charCodes[HEAPU8[O++]];return R}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName(_){if(_===void 0)return"_unknown";_=_.replace(/[^a-zA-Z0-9_]/g,"$");var R=_.charCodeAt(0);return R>=char_0&&R<=char_9?"_"+_:_}function createNamedFunction(_,R){return _=makeLegalFunctionName(_),new Function("body","return function "+_+`() {
    "use strict";    return body.apply(this, arguments);
};
`)(R)}function extendError(_,R){var O=createNamedFunction(R,function(U){this.name=R,this.message=U;var w=new Error(U).stack;w!==void 0&&(this.stack=this.toString()+`
`+w.replace(/^Error(:[^\n]*)?\n/,""))});return O.prototype=Object.create(_.prototype),O.prototype.constructor=O,O.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},O}var BindingError=void 0;function throwBindingError(_){throw new BindingError(_)}var InternalError=void 0;function throwInternalError(_){throw new InternalError(_)}function whenDependentTypesAreResolved(_,R,O){_.forEach(function(ie){typeDependencies[ie]=R});function U(ie){var we=O(ie);we.length!==_.length&&throwInternalError("Mismatched type converter count");for(var P=0;P<_.length;++P)registerType(_[P],we[P])}var w=new Array(R.length),e=[],me=0;R.forEach(function(ie,we){registeredTypes.hasOwnProperty(ie)?w[we]=registeredTypes[ie]:(e.push(ie),awaitingDependencies.hasOwnProperty(ie)||(awaitingDependencies[ie]=[]),awaitingDependencies[ie].push(function(){w[we]=registeredTypes[ie],++me,me===e.length&&U(w)}))}),e.length===0&&U(w)}function registerType(_,R,O){if(O=O||{},!("argPackAdvance"in R))throw new TypeError("registerType registeredInstance requires argPackAdvance");var U=R.name;if(_||throwBindingError('type "'+U+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(_)){if(O.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+U+"' twice")}if(registeredTypes[_]=R,delete typeDependencies[_],awaitingDependencies.hasOwnProperty(_)){var w=awaitingDependencies[_];delete awaitingDependencies[_],w.forEach(function(e){e()})}}function __embind_register_void(_,R){R=readLatin1String(R),registerType(_,{isVoid:!0,name:R,argPackAdvance:0,fromWireType:function(){},toWireType:function(O,U){}})}function __ZSt18uncaught_exceptionv(){return!!__ZSt18uncaught_exceptionv.uncaught_exception}var EXCEPTIONS={last:0,caught:[],infos:{},deAdjust:function(_){if(!_||EXCEPTIONS.infos[_])return _;for(var R in EXCEPTIONS.infos){var O=EXCEPTIONS.infos[R];if(O.adjusted===_)return R}return _},addRef:function(_){if(_){var R=EXCEPTIONS.infos[_];R.refcount++}},decRef:function(_){if(_){var R=EXCEPTIONS.infos[_];assert(R.refcount>0),R.refcount--,R.refcount===0&&(R.destructor&&Runtime.dynCall("vi",R.destructor,[_]),delete EXCEPTIONS.infos[_],___cxa_free_exception(_))}},clearRef:function(_){if(_){var R=EXCEPTIONS.infos[_];R.refcount=0}}};function ___resumeException(_){throw EXCEPTIONS.last||(EXCEPTIONS.last=_),EXCEPTIONS.clearRef(EXCEPTIONS.deAdjust(_)),_+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}function ___cxa_find_matching_catch(){var _=EXCEPTIONS.last;if(!_)return asm.setTempRet0(0),0|0;var R=EXCEPTIONS.infos[_],O=R.type;if(!O)return asm.setTempRet0(0),_|0;var U=Array.prototype.slice.call(arguments);Module.___cxa_is_pointer_type(O),___cxa_find_matching_catch.buffer||(___cxa_find_matching_catch.buffer=_malloc(4)),HEAP32[___cxa_find_matching_catch.buffer>>2]=_,_=___cxa_find_matching_catch.buffer;for(var w=0;w<U.length;w++)if(U[w]&&Module.___cxa_can_catch(U[w],O,_))return _=HEAP32[_>>2],R.adjusted=_,asm.setTempRet0(U[w]),_|0;return _=HEAP32[_>>2],asm.setTempRet0(O),_|0}function ___cxa_throw(_,R,O){throw EXCEPTIONS.infos[_]={ptr:_,adjusted:_,type:R,destructor:O,refcount:0},EXCEPTIONS.last=_,"uncaught_exception"in __ZSt18uncaught_exceptionv?__ZSt18uncaught_exceptionv.uncaught_exception++:__ZSt18uncaught_exceptionv.uncaught_exception=1,_+" - Exception catching is disabled, this exception cannot be caught. Compile with -s DISABLE_EXCEPTION_CATCHING=0 or DISABLE_EXCEPTION_CATCHING=2 to catch."}Module._memset=_memset;function getShiftFromSize(_){switch(_){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+_)}}function __embind_register_bool(_,R,O,U,w){var e=getShiftFromSize(O);R=readLatin1String(R),registerType(_,{name:R,fromWireType:function(me){return!!me},toWireType:function(me,ie){return ie?U:w},argPackAdvance:8,readValueFromPointer:function(me){var ie;if(O===1)ie=HEAP8;else if(O===2)ie=HEAP16;else if(O===4)ie=HEAP32;else throw new TypeError("Unknown boolean type size: "+R);return this.fromWireType(ie[me>>e])},destructorFunction:null})}Module._bitshift64Shl=_bitshift64Shl;function _abort(){Module.abort()}function _free(){}Module._free=_free;function _malloc(_){var R=Runtime.dynamicAlloc(_+8);return R+8&4294967288}Module._malloc=_malloc;function simpleReadValueFromPointer(_){return this.fromWireType(HEAPU32[_>>2])}function __embind_register_std_string(_,R){R=readLatin1String(R),registerType(_,{name:R,fromWireType:function(O){for(var U=HEAPU32[O>>2],w=new Array(U),e=0;e<U;++e)w[e]=String.fromCharCode(HEAPU8[O+4+e]);return _free(O),w.join("")},toWireType:function(O,U){U instanceof ArrayBuffer&&(U=new Uint8Array(U));function w(S,z){return S[z]}function e(S,z){return S.charCodeAt(z)}var me;U instanceof Uint8Array||U instanceof Int8Array?me=w:typeof U=="string"?me=e:throwBindingError("Cannot pass non-string to std::string");var ie=U.length,we=_malloc(4+ie);HEAPU32[we>>2]=ie;for(var P=0;P<ie;++P){var p=me(U,P);p>255&&(_free(we),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[we+4+P]=p}return O!==null&&O.push(_free,we),we},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(O){_free(O)}})}function __embind_register_std_wstring(_,R,O){O=readLatin1String(O);var U,w;R===2?(U=function(){return HEAPU16},w=1):R===4&&(U=function(){return HEAPU32},w=2),registerType(_,{name:O,fromWireType:function(e){for(var me=U(),ie=HEAPU32[e>>2],we=new Array(ie),P=e+4>>w,p=0;p<ie;++p)we[p]=String.fromCharCode(me[P+p]);return _free(e),we.join("")},toWireType:function(e,me){var ie=U(),we=me.length,P=_malloc(4+we*R);HEAPU32[P>>2]=we;for(var p=P+4>>w,S=0;S<we;++S)ie[p+S]=me.charCodeAt(S);return e!==null&&e.push(_free,P),P},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(e){_free(e)}})}function ___lock(){}function ___unlock(){}Module._i64Add=_i64Add;var _fabs=Math_abs,_sqrt=Math_sqrt;function _embind_repr(_){if(_===null)return"null";var R=typeof _;return R==="object"||R==="array"||R==="function"?_.toString():""+_}function integerReadValueFromPointer(_,R,O){switch(R){case 0:return O?function(w){return HEAP8[w]}:function(w){return HEAPU8[w]};case 1:return O?function(w){return HEAP16[w>>1]}:function(w){return HEAPU16[w>>1]};case 2:return O?function(w){return HEAP32[w>>2]}:function(w){return HEAPU32[w>>2]};default:throw new TypeError("Unknown integer type: "+_)}}function __embind_register_integer(_,R,O,U,w){R=readLatin1String(R),w===-1&&(w=4294967295);var e=getShiftFromSize(O),me=function(we){return we};if(U===0){var ie=32-8*O;me=function(we){return we<<ie>>>ie}}registerType(_,{name:R,fromWireType:me,toWireType:function(we,P){if(typeof P!="number"&&typeof P!="boolean")throw new TypeError('Cannot convert "'+_embind_repr(P)+'" to '+this.name);if(P<U||P>w)throw new TypeError('Passing a number "'+_embind_repr(P)+'" from JS side to C/C++ side to an argument of type "'+R+'", which is outside the valid range ['+U+", "+w+"]!");return P|0},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(R,e,U!==0),destructorFunction:null})}var emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref(_){_>4&&--emval_handle_array[_].refcount===0&&(emval_handle_array[_]=void 0,emval_free_list.push(_))}function count_emval_handles(){for(var _=0,R=5;R<emval_handle_array.length;++R)emval_handle_array[R]!==void 0&&++_;return _}function get_first_emval(){for(var _=5;_<emval_handle_array.length;++_)if(emval_handle_array[_]!==void 0)return emval_handle_array[_];return null}function init_emval(){Module.count_emval_handles=count_emval_handles,Module.get_first_emval=get_first_emval}function __emval_register(_){switch(_){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var R=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[R]={refcount:1,value:_},R}}}function __embind_register_emval(_,R){R=readLatin1String(R),registerType(_,{name:R,fromWireType:function(O){var U=emval_handle_array[O].value;return __emval_decref(O),U},toWireType:function(O,U){return __emval_register(U)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function ___cxa_allocate_exception(_){return _malloc(_)}var _sin=Math_sin;function ___setErrNo(_){return Module.___errno_location&&(HEAP32[Module.___errno_location()>>2]=_),_}var ERRNO_CODES={EPERM:1,ENOENT:2,ESRCH:3,EINTR:4,EIO:5,ENXIO:6,E2BIG:7,ENOEXEC:8,EBADF:9,ECHILD:10,EAGAIN:11,EWOULDBLOCK:11,ENOMEM:12,EACCES:13,EFAULT:14,ENOTBLK:15,EBUSY:16,EEXIST:17,EXDEV:18,ENODEV:19,ENOTDIR:20,EISDIR:21,EINVAL:22,ENFILE:23,EMFILE:24,ENOTTY:25,ETXTBSY:26,EFBIG:27,ENOSPC:28,ESPIPE:29,EROFS:30,EMLINK:31,EPIPE:32,EDOM:33,ERANGE:34,ENOMSG:42,EIDRM:43,ECHRNG:44,EL2NSYNC:45,EL3HLT:46,EL3RST:47,ELNRNG:48,EUNATCH:49,ENOCSI:50,EL2HLT:51,EDEADLK:35,ENOLCK:37,EBADE:52,EBADR:53,EXFULL:54,ENOANO:55,EBADRQC:56,EBADSLT:57,EDEADLOCK:35,EBFONT:59,ENOSTR:60,ENODATA:61,ETIME:62,ENOSR:63,ENONET:64,ENOPKG:65,EREMOTE:66,ENOLINK:67,EADV:68,ESRMNT:69,ECOMM:70,EPROTO:71,EMULTIHOP:72,EDOTDOT:73,EBADMSG:74,ENOTUNIQ:76,EBADFD:77,EREMCHG:78,ELIBACC:79,ELIBBAD:80,ELIBSCN:81,ELIBMAX:82,ELIBEXEC:83,ENOSYS:38,ENOTEMPTY:39,ENAMETOOLONG:36,ELOOP:40,EOPNOTSUPP:95,EPFNOSUPPORT:96,ECONNRESET:104,ENOBUFS:105,EAFNOSUPPORT:97,EPROTOTYPE:91,ENOTSOCK:88,ENOPROTOOPT:92,ESHUTDOWN:108,ECONNREFUSED:111,EADDRINUSE:98,ECONNABORTED:103,ENETUNREACH:101,ENETDOWN:100,ETIMEDOUT:110,EHOSTDOWN:112,EHOSTUNREACH:113,EINPROGRESS:115,EALREADY:114,EDESTADDRREQ:89,EMSGSIZE:90,EPROTONOSUPPORT:93,ESOCKTNOSUPPORT:94,EADDRNOTAVAIL:99,ENETRESET:102,EISCONN:106,ENOTCONN:107,ETOOMANYREFS:109,EUSERS:87,EDQUOT:122,ESTALE:116,ENOTSUP:95,ENOMEDIUM:123,EILSEQ:84,EOVERFLOW:75,ECANCELED:125,ENOTRECOVERABLE:131,EOWNERDEAD:130,ESTRPIPE:86};function _sysconf(_){switch(_){case 30:return PAGE_SIZE;case 85:return totalMemory/PAGE_SIZE;case 132:case 133:case 12:case 137:case 138:case 15:case 235:case 16:case 17:case 18:case 19:case 20:case 149:case 13:case 10:case 236:case 153:case 9:case 21:case 22:case 159:case 154:case 14:case 77:case 78:case 139:case 80:case 81:case 82:case 68:case 67:case 164:case 11:case 29:case 47:case 48:case 95:case 52:case 51:case 46:return 200809;case 79:return 0;case 27:case 246:case 127:case 128:case 23:case 24:case 160:case 161:case 181:case 182:case 242:case 183:case 184:case 243:case 244:case 245:case 165:case 178:case 179:case 49:case 50:case 168:case 169:case 175:case 170:case 171:case 172:case 97:case 76:case 32:case 173:case 35:return-1;case 176:case 177:case 7:case 155:case 8:case 157:case 125:case 126:case 92:case 93:case 129:case 130:case 131:case 94:case 91:return 1;case 74:case 60:case 69:case 70:case 4:return 1024;case 31:case 42:case 72:return 32;case 87:case 26:case 33:return 2147483647;case 34:case 1:return 47839;case 38:case 36:return 99;case 43:case 37:return 2048;case 0:return 2097152;case 3:return 65536;case 28:return 32768;case 44:return 32767;case 75:return 16384;case 39:return 1e3;case 89:return 700;case 71:return 256;case 40:return 255;case 2:return 100;case 180:return 64;case 25:return 20;case 5:return 16;case 6:return 6;case 73:return 4;case 84:return typeof navigator=="object"&&navigator.hardwareConcurrency||1}return ___setErrNo(ERRNO_CODES.EINVAL),-1}Module._bitshift64Lshr=_bitshift64Lshr;function __exit(_){Module.exit(_)}function _exit(_){__exit(_)}function floatReadValueFromPointer(_,R){switch(R){case 2:return function(O){return this.fromWireType(HEAPF32[O>>2])};case 3:return function(O){return this.fromWireType(HEAPF64[O>>3])};default:throw new TypeError("Unknown float type: "+_)}}function __embind_register_float(_,R,O){var U=getShiftFromSize(O);R=readLatin1String(R),registerType(_,{name:R,fromWireType:function(w){return w},toWireType:function(w,e){if(typeof e!="number"&&typeof e!="boolean")throw new TypeError('Cannot convert "'+_embind_repr(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(R,U),destructorFunction:null})}function _pthread_cleanup_push(_,R){__ATEXIT__.push(function(){Runtime.dynCall("vi",_,[R])}),_pthread_cleanup_push.level=__ATEXIT__.length}function new_(_,R){if(!(_ instanceof Function))throw new TypeError("new_ called with constructor type "+typeof _+" which is not a function");var O=createNamedFunction(_.name||"unknownFunctionName",function(){});O.prototype=_.prototype;var U=new O,w=_.apply(U,R);return w instanceof Object?w:U}function runDestructors(_){for(;_.length;){var R=_.pop(),O=_.pop();O(R)}}function craftInvokerFunction(_,R,O,U,w){var e=R.length;e<2&&throwBindingError("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var me=R[1]!==null&&O!==null,ie="",we="",P=0;P<e-2;++P)ie+=(P!==0?", ":"")+"arg"+P,we+=(P!==0?", ":"")+"arg"+P+"Wired";for(var p="return function "+makeLegalFunctionName(_)+"("+ie+`) {
if (arguments.length !== `+(e-2)+`) {
throwBindingError('function `+_+" called with ' + arguments.length + ' arguments, expected "+(e-2)+` args!');
}
`,S=!1,P=1;P<R.length;++P)if(R[P]!==null&&R[P].destructorFunction===void 0){S=!0;break}S&&(p+=`var destructors = [];
`);var z=S?"destructors":"null",K=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],D=[throwBindingError,U,w,runDestructors,R[0],R[1]];me&&(p+="var thisWired = classParam.toWireType("+z+`, this);
`);for(var P=0;P<e-2;++P)p+="var arg"+P+"Wired = argType"+P+".toWireType("+z+", arg"+P+"); // "+R[P+2].name+`
`,K.push("argType"+P),D.push(R[P+2]);me&&(we="thisWired"+(we.length>0?", ":"")+we);var Q=R[0].name!=="void";if(p+=(Q?"var rv = ":"")+"invoker(fn"+(we.length>0?", ":"")+we+`);
`,S)p+=`runDestructors(destructors);
`;else for(var P=me?1:2;P<R.length;++P){var V=P===1?"thisWired":"arg"+(P-2)+"Wired";R[P].destructorFunction!==null&&(p+=V+"_dtor("+V+"); // "+R[P].name+`
`,K.push(V+"_dtor"),D.push(R[P].destructorFunction))}Q&&(p+=`var ret = retType.fromWireType(rv);
return ret;
`),p+=`}
`,K.push(p);var T=new_(Function,K).apply(null,D);return T}function ensureOverloadTable(_,R,O){if(_[R].overloadTable===void 0){var U=_[R];_[R]=function(){return _[R].overloadTable.hasOwnProperty(arguments.length)||throwBindingError("Function '"+O+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+_[R].overloadTable+")!"),_[R].overloadTable[arguments.length].apply(this,arguments)},_[R].overloadTable=[],_[R].overloadTable[U.argCount]=U}}function exposePublicSymbol(_,R,O){Module.hasOwnProperty(_)?((O===void 0||Module[_].overloadTable!==void 0&&Module[_].overloadTable[O]!==void 0)&&throwBindingError("Cannot register public name '"+_+"' twice"),ensureOverloadTable(Module,_,_),Module.hasOwnProperty(O)&&throwBindingError("Cannot register multiple overloads of a function with the same number of arguments ("+O+")!"),Module[_].overloadTable[O]=R):(Module[_]=R,O!==void 0&&(Module[_].numArguments=O))}function heap32VectorToArray(_,R){for(var O=[],U=0;U<_;U++)O.push(HEAP32[(R>>2)+U]);return O}function replacePublicSymbol(_,R,O){Module.hasOwnProperty(_)||throwInternalError("Replacing nonexistant public symbol"),Module[_].overloadTable!==void 0&&O!==void 0?Module[_].overloadTable[O]=R:Module[_]=R}function requireFunction(_,R){_=readLatin1String(_);function O(e){for(var me=[],ie=1;ie<_.length;++ie)me.push("a"+ie);var we="dynCall_"+_+"_"+R,P="return function "+we+"("+me.join(", ")+`) {
`;return P+="    return dynCall(rawFunction"+(me.length?", ":"")+me.join(", ")+`);
`,P+=`};
`,new Function("dynCall","rawFunction",P)(e,R)}var U;if(Module["FUNCTION_TABLE_"+_]!==void 0)U=Module["FUNCTION_TABLE_"+_][R];else if(typeof FUNCTION_TABLE<"u")U=FUNCTION_TABLE[R];else{var w=asm["dynCall_"+_];w===void 0&&(w=asm["dynCall_"+_.replace(/f/g,"d")],w===void 0&&throwBindingError("No dynCall invoker for signature: "+_)),U=O(w)}return typeof U!="function"&&throwBindingError("unknown function pointer with signature "+_+": "+R),U}var UnboundTypeError=void 0;function getTypeName(_){var R=___getTypeName(_),O=readLatin1String(R);return _free(R),O}function throwUnboundTypeError(_,R){var O=[],U={};function w(e){if(!U[e]&&!registeredTypes[e]){if(typeDependencies[e]){typeDependencies[e].forEach(w);return}O.push(e),U[e]=!0}}throw R.forEach(w),new UnboundTypeError(_+": "+O.map(getTypeName).join([", "]))}function __embind_register_function(_,R,O,U,w,e){var me=heap32VectorToArray(R,O);_=readLatin1String(_),w=requireFunction(U,w),exposePublicSymbol(_,function(){throwUnboundTypeError("Cannot call "+_+" due to unbound types",me)},R-1),whenDependentTypesAreResolved([],me,function(ie){var we=[ie[0],null].concat(ie.slice(1));return replacePublicSymbol(_,craftInvokerFunction(_,we,null,w,e),R-1),[]})}function __embind_register_constant(_,R,O){_=readLatin1String(_),whenDependentTypesAreResolved([],[R],function(U){return U=U[0],Module[_]=U.fromWireType(O),[]})}function _pthread_cleanup_pop(){assert(_pthread_cleanup_push.level==__ATEXIT__.length,"cannot pop if something else added meanwhile!"),__ATEXIT__.pop(),_pthread_cleanup_push.level=__ATEXIT__.length}var ERRNO_MESSAGES={0:"Success",1:"Not super-user",2:"No such file or directory",3:"No such process",4:"Interrupted system call",5:"I/O error",6:"No such device or address",7:"Arg list too long",8:"Exec format error",9:"Bad file number",10:"No children",11:"No more processes",12:"Not enough core",13:"Permission denied",14:"Bad address",15:"Block device required",16:"Mount device busy",17:"File exists",18:"Cross-device link",19:"No such device",20:"Not a directory",21:"Is a directory",22:"Invalid argument",23:"Too many open files in system",24:"Too many open files",25:"Not a typewriter",26:"Text file busy",27:"File too large",28:"No space left on device",29:"Illegal seek",30:"Read only file system",31:"Too many links",32:"Broken pipe",33:"Math arg out of domain of func",34:"Math result not representable",35:"File locking deadlock error",36:"File or path name too long",37:"No record locks available",38:"Function not implemented",39:"Directory not empty",40:"Too many symbolic links",42:"No message of desired type",43:"Identifier removed",44:"Channel number out of range",45:"Level 2 not synchronized",46:"Level 3 halted",47:"Level 3 reset",48:"Link number out of range",49:"Protocol driver not attached",50:"No CSI structure available",51:"Level 2 halted",52:"Invalid exchange",53:"Invalid request descriptor",54:"Exchange full",55:"No anode",56:"Invalid request code",57:"Invalid slot",59:"Bad font file fmt",60:"Device not a stream",61:"No data (for no delay io)",62:"Timer expired",63:"Out of streams resources",64:"Machine is not on the network",65:"Package not installed",66:"The object is remote",67:"The link has been severed",68:"Advertise error",69:"Srmount error",70:"Communication error on send",71:"Protocol error",72:"Multihop attempted",73:"Cross mount point (not really error)",74:"Trying to read unreadable message",75:"Value too large for defined data type",76:"Given log. name not unique",77:"f.d. invalid for this operation",78:"Remote address changed",79:"Can   access a needed shared lib",80:"Accessing a corrupted shared lib",81:".lib section in a.out corrupted",82:"Attempting to link in too many libs",83:"Attempting to exec a shared library",84:"Illegal byte sequence",86:"Streams pipe error",87:"Too many users",88:"Socket operation on non-socket",89:"Destination address required",90:"Message too long",91:"Protocol wrong type for socket",92:"Protocol not available",93:"Unknown protocol",94:"Socket type not supported",95:"Not supported",96:"Protocol family not supported",97:"Address family not supported by protocol family",98:"Address already in use",99:"Address not available",100:"Network interface is not configured",101:"Network is unreachable",102:"Connection reset by network",103:"Connection aborted",104:"Connection reset by peer",105:"No buffer space available",106:"Socket is already connected",107:"Socket is not connected",108:"Can't send after socket shutdown",109:"Too many references",110:"Connection timed out",111:"Connection refused",112:"Host is down",113:"Host is unreachable",114:"Socket already connected",115:"Connection already in progress",116:"Stale file handle",122:"Quota exceeded",123:"No medium (in tape drive)",125:"Operation canceled",130:"Previous owner died",131:"State not recoverable"},PATH={splitPath:function(_){var R=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return R.exec(_).slice(1)},normalizeArray:function(_,R){for(var O=0,U=_.length-1;U>=0;U--){var w=_[U];w==="."?_.splice(U,1):w===".."?(_.splice(U,1),O++):O&&(_.splice(U,1),O--)}if(R)for(;O--;O)_.unshift("..");return _},normalize:function(_){var R=_.charAt(0)==="/",O=_.substr(-1)==="/";return _=PATH.normalizeArray(_.split("/").filter(function(U){return!!U}),!R).join("/"),!_&&!R&&(_="."),_&&O&&(_+="/"),(R?"/":"")+_},dirname:function(_){var R=PATH.splitPath(_),O=R[0],U=R[1];return!O&&!U?".":(U&&(U=U.substr(0,U.length-1)),O+U)},basename:function(_){if(_==="/")return"/";var R=_.lastIndexOf("/");return R===-1?_:_.substr(R+1)},extname:function(_){return PATH.splitPath(_)[3]},join:function(){var _=Array.prototype.slice.call(arguments,0);return PATH.normalize(_.join("/"))},join2:function(_,R){return PATH.normalize(_+"/"+R)},resolve:function(){for(var _="",R=!1,O=arguments.length-1;O>=-1&&!R;O--){var U=O>=0?arguments[O]:FS.cwd();if(typeof U!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!U)return"";_=U+"/"+_,R=U.charAt(0)==="/"}return _=PATH.normalizeArray(_.split("/").filter(function(w){return!!w}),!R).join("/"),(R?"/":"")+_||"."},relative:function(_,R){_=PATH.resolve(_).substr(1),R=PATH.resolve(R).substr(1);function O(P){for(var p=0;p<P.length&&P[p]==="";p++);for(var S=P.length-1;S>=0&&P[S]==="";S--);return p>S?[]:P.slice(p,S-p+1)}for(var U=O(_.split("/")),w=O(R.split("/")),e=Math.min(U.length,w.length),me=e,ie=0;ie<e;ie++)if(U[ie]!==w[ie]){me=ie;break}for(var we=[],ie=me;ie<U.length;ie++)we.push("..");return we=we.concat(w.slice(me)),we.join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(_,R){TTY.ttys[_]={input:[],output:[],ops:R},FS.registerDevice(_,TTY.stream_ops)},stream_ops:{open:function(_){var R=TTY.ttys[_.node.rdev];if(!R)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);_.tty=R,_.seekable=!1},close:function(_){_.tty.ops.flush(_.tty)},flush:function(_){_.tty.ops.flush(_.tty)},read:function(_,R,O,U,w){if(!_.tty||!_.tty.ops.get_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var e=0,me=0;me<U;me++){var ie;try{ie=_.tty.ops.get_char(_.tty)}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(ie===void 0&&e===0)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(ie==null)break;e++,R[O+me]=ie}return e&&(_.node.timestamp=Date.now()),e},write:function(_,R,O,U,w){if(!_.tty||!_.tty.ops.put_char)throw new FS.ErrnoError(ERRNO_CODES.ENXIO);for(var e=0;e<U;e++)try{_.tty.ops.put_char(_.tty,R[O+e])}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}return U&&(_.node.timestamp=Date.now()),e}},default_tty_ops:{get_char:function(_){if(!_.input.length){var R=null;if(ENVIRONMENT_IS_NODE){var O=256,U=new Buffer(O),w=0,e=process.stdin.fd,me=!1;try{e=fs.openSync("/dev/stdin","r"),me=!0}catch{}w=fs.readSync(e,U,0,O,null),me&&fs.closeSync(e),w>0?R=U.slice(0,w).toString("utf-8"):R=null}else typeof window<"u"&&typeof window.prompt=="function"?(R=window.prompt("Input: "),R!==null&&(R+=`
`)):typeof readline=="function"&&(R=readline(),R!==null&&(R+=`
`));if(!R)return null;_.input=intArrayFromString(R,!0)}return _.input.shift()},put_char:function(_,R){R===null||R===10?(Module.print(UTF8ArrayToString(_.output,0)),_.output=[]):R!=0&&_.output.push(R)},flush:function(_){_.output&&_.output.length>0&&(Module.print(UTF8ArrayToString(_.output,0)),_.output=[])}},default_tty1_ops:{put_char:function(_,R){R===null||R===10?(Module.printErr(UTF8ArrayToString(_.output,0)),_.output=[]):R!=0&&_.output.push(R)},flush:function(_){_.output&&_.output.length>0&&(Module.printErr(UTF8ArrayToString(_.output,0)),_.output=[])}}},MEMFS={ops_table:null,mount:function(_){return MEMFS.createNode(null,"/",16895,0)},createNode:function(_,R,O,U){if(FS.isBlkdev(O)||FS.isFIFO(O))throw new FS.ErrnoError(ERRNO_CODES.EPERM);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var w=FS.createNode(_,R,O,U);return FS.isDir(w.mode)?(w.node_ops=MEMFS.ops_table.dir.node,w.stream_ops=MEMFS.ops_table.dir.stream,w.contents={}):FS.isFile(w.mode)?(w.node_ops=MEMFS.ops_table.file.node,w.stream_ops=MEMFS.ops_table.file.stream,w.usedBytes=0,w.contents=null):FS.isLink(w.mode)?(w.node_ops=MEMFS.ops_table.link.node,w.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(w.mode)&&(w.node_ops=MEMFS.ops_table.chrdev.node,w.stream_ops=MEMFS.ops_table.chrdev.stream),w.timestamp=Date.now(),_&&(_.contents[R]=w),w},getFileDataAsRegularArray:function(_){if(_.contents&&_.contents.subarray){for(var R=[],O=0;O<_.usedBytes;++O)R.push(_.contents[O]);return R}return _.contents},getFileDataAsTypedArray:function(_){return _.contents?_.contents.subarray?_.contents.subarray(0,_.usedBytes):new Uint8Array(_.contents):new Uint8Array},expandFileStorage:function(_,R){if(_.contents&&_.contents.subarray&&R>_.contents.length&&(_.contents=MEMFS.getFileDataAsRegularArray(_),_.usedBytes=_.contents.length),!_.contents||_.contents.subarray){var O=_.contents?_.contents.buffer.byteLength:0;if(O>=R)return;var U=1024*1024;R=Math.max(R,O*(O<U?2:1.125)|0),O!=0&&(R=Math.max(R,256));var w=_.contents;_.contents=new Uint8Array(R),_.usedBytes>0&&_.contents.set(w.subarray(0,_.usedBytes),0);return}for(!_.contents&&R>0&&(_.contents=[]);_.contents.length<R;)_.contents.push(0)},resizeFileStorage:function(_,R){if(_.usedBytes!=R){if(R==0){_.contents=null,_.usedBytes=0;return}if(!_.contents||_.contents.subarray){var O=_.contents;_.contents=new Uint8Array(new ArrayBuffer(R)),O&&_.contents.set(O.subarray(0,Math.min(R,_.usedBytes))),_.usedBytes=R;return}if(_.contents||(_.contents=[]),_.contents.length>R)_.contents.length=R;else for(;_.contents.length<R;)_.contents.push(0);_.usedBytes=R}},node_ops:{getattr:function(_){var R={};return R.dev=FS.isChrdev(_.mode)?_.id:1,R.ino=_.id,R.mode=_.mode,R.nlink=1,R.uid=0,R.gid=0,R.rdev=_.rdev,FS.isDir(_.mode)?R.size=4096:FS.isFile(_.mode)?R.size=_.usedBytes:FS.isLink(_.mode)?R.size=_.link.length:R.size=0,R.atime=new Date(_.timestamp),R.mtime=new Date(_.timestamp),R.ctime=new Date(_.timestamp),R.blksize=4096,R.blocks=Math.ceil(R.size/R.blksize),R},setattr:function(_,R){R.mode!==void 0&&(_.mode=R.mode),R.timestamp!==void 0&&(_.timestamp=R.timestamp),R.size!==void 0&&MEMFS.resizeFileStorage(_,R.size)},lookup:function(_,R){throw FS.genericErrors[ERRNO_CODES.ENOENT]},mknod:function(_,R,O,U){return MEMFS.createNode(_,R,O,U)},rename:function(_,R,O){if(FS.isDir(_.mode)){var U;try{U=FS.lookupNode(R,O)}catch{}if(U)for(var w in U.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY)}delete _.parent.contents[_.name],_.name=O,R.contents[O]=_,_.parent=R},unlink:function(_,R){delete _.contents[R]},rmdir:function(_,R){var O=FS.lookupNode(_,R);for(var U in O.contents)throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);delete _.contents[R]},readdir:function(_){var R=[".",".."];for(var O in _.contents)_.contents.hasOwnProperty(O)&&R.push(O);return R},symlink:function(_,R,O){var U=MEMFS.createNode(_,R,41471,0);return U.link=O,U},readlink:function(_){if(!FS.isLink(_.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return _.link}},stream_ops:{read:function(_,R,O,U,w){var e=_.node.contents;if(w>=_.node.usedBytes)return 0;var me=Math.min(_.node.usedBytes-w,U);if(assert(me>=0),me>8&&e.subarray)R.set(e.subarray(w,w+me),O);else for(var ie=0;ie<me;ie++)R[O+ie]=e[w+ie];return me},write:function(_,R,O,U,w,e){if(!U)return 0;var me=_.node;if(me.timestamp=Date.now(),R.subarray&&(!me.contents||me.contents.subarray)){if(e)return me.contents=R.subarray(O,O+U),me.usedBytes=U,U;if(me.usedBytes===0&&w===0)return me.contents=new Uint8Array(R.subarray(O,O+U)),me.usedBytes=U,U;if(w+U<=me.usedBytes)return me.contents.set(R.subarray(O,O+U),w),U}if(MEMFS.expandFileStorage(me,w+U),me.contents.subarray&&R.subarray)me.contents.set(R.subarray(O,O+U),w);else for(var ie=0;ie<U;ie++)me.contents[w+ie]=R[O+ie];return me.usedBytes=Math.max(me.usedBytes,w+U),U},llseek:function(_,R,O){var U=R;if(O===1?U+=_.position:O===2&&FS.isFile(_.node.mode)&&(U+=_.node.usedBytes),U<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return U},allocate:function(_,R,O){MEMFS.expandFileStorage(_.node,R+O),_.node.usedBytes=Math.max(_.node.usedBytes,R+O)},mmap:function(_,R,O,U,w,e,me){if(!FS.isFile(_.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);var ie,we,P=_.node.contents;if(!(me&2)&&(P.buffer===R||P.buffer===R.buffer))we=!1,ie=P.byteOffset;else{if((w>0||w+U<_.node.usedBytes)&&(P.subarray?P=P.subarray(w,w+U):P=Array.prototype.slice.call(P,w,w+U)),we=!0,ie=_malloc(U),!ie)throw new FS.ErrnoError(ERRNO_CODES.ENOMEM);R.set(P,ie)}return{ptr:ie,allocated:we}},msync:function(_,R,O,U,w){if(!FS.isFile(_.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return w&2||MEMFS.stream_ops.write(_,R,0,U,O,!1),0}}},IDBFS={dbs:{},indexedDB:function(){if(typeof indexedDB<"u")return indexedDB;var _=null;return typeof window=="object"&&(_=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(_,"IDBFS used, but indexedDB not supported"),_},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(_){return MEMFS.mount.apply(null,arguments)},syncfs:function(_,R,O){IDBFS.getLocalSet(_,function(U,w){if(U)return O(U);IDBFS.getRemoteSet(_,function(e,me){if(e)return O(e);var ie=R?me:w,we=R?w:me;IDBFS.reconcile(ie,we,O)})})},getDB:function(_,R){var O=IDBFS.dbs[_];if(O)return R(null,O);var U;try{U=IDBFS.indexedDB().open(_,IDBFS.DB_VERSION)}catch(w){return R(w)}U.onupgradeneeded=function(w){var e=w.target.result,me=w.target.transaction,ie;e.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?ie=me.objectStore(IDBFS.DB_STORE_NAME):ie=e.createObjectStore(IDBFS.DB_STORE_NAME),ie.indexNames.contains("timestamp")||ie.createIndex("timestamp","timestamp",{unique:!1})},U.onsuccess=function(){O=U.result,IDBFS.dbs[_]=O,R(null,O)},U.onerror=function(w){R(this.error),w.preventDefault()}},getLocalSet:function(_,R){var O={};function U(we){return we!=="."&&we!==".."}function w(we){return function(P){return PATH.join2(we,P)}}for(var e=FS.readdir(_.mountpoint).filter(U).map(w(_.mountpoint));e.length;){var me=e.pop(),ie;try{ie=FS.stat(me)}catch(we){return R(we)}FS.isDir(ie.mode)&&e.push.apply(e,FS.readdir(me).filter(U).map(w(me))),O[me]={timestamp:ie.mtime}}return R(null,{type:"local",entries:O})},getRemoteSet:function(_,R){var O={};IDBFS.getDB(_.mountpoint,function(U,w){if(U)return R(U);var e=w.transaction([IDBFS.DB_STORE_NAME],"readonly");e.onerror=function(we){R(this.error),we.preventDefault()};var me=e.objectStore(IDBFS.DB_STORE_NAME),ie=me.index("timestamp");ie.openKeyCursor().onsuccess=function(we){var P=we.target.result;if(!P)return R(null,{type:"remote",db:w,entries:O});O[P.primaryKey]={timestamp:P.key},P.continue()}})},loadLocalEntry:function(_,R){var O,U;try{var w=FS.lookupPath(_);U=w.node,O=FS.stat(_)}catch(e){return R(e)}return FS.isDir(O.mode)?R(null,{timestamp:O.mtime,mode:O.mode}):FS.isFile(O.mode)?(U.contents=MEMFS.getFileDataAsTypedArray(U),R(null,{timestamp:O.mtime,mode:O.mode,contents:U.contents})):R(new Error("node type not supported"))},storeLocalEntry:function(_,R,O){try{if(FS.isDir(R.mode))FS.mkdir(_,R.mode);else if(FS.isFile(R.mode))FS.writeFile(_,R.contents,{encoding:"binary",canOwn:!0});else return O(new Error("node type not supported"));FS.chmod(_,R.mode),FS.utime(_,R.timestamp,R.timestamp)}catch(U){return O(U)}O(null)},removeLocalEntry:function(_,R){try{var O=FS.lookupPath(_),U=FS.stat(_);FS.isDir(U.mode)?FS.rmdir(_):FS.isFile(U.mode)&&FS.unlink(_)}catch(w){return R(w)}R(null)},loadRemoteEntry:function(_,R,O){var U=_.get(R);U.onsuccess=function(w){O(null,w.target.result)},U.onerror=function(w){O(this.error),w.preventDefault()}},storeRemoteEntry:function(_,R,O,U){var w=_.put(O,R);w.onsuccess=function(){U(null)},w.onerror=function(e){U(this.error),e.preventDefault()}},removeRemoteEntry:function(_,R,O){var U=_.delete(R);U.onsuccess=function(){O(null)},U.onerror=function(w){O(this.error),w.preventDefault()}},reconcile:function(_,R,O){var U=0,w=[];Object.keys(_.entries).forEach(function(S){var z=_.entries[S],K=R.entries[S];(!K||z.timestamp>K.timestamp)&&(w.push(S),U++)});var e=[];if(Object.keys(R.entries).forEach(function(S){R.entries[S];var z=_.entries[S];z||(e.push(S),U++)}),!U)return O(null);var me=0,ie=_.type==="remote"?_.db:R.db,we=ie.transaction([IDBFS.DB_STORE_NAME],"readwrite"),P=we.objectStore(IDBFS.DB_STORE_NAME);function p(S){if(S)return p.errored?void 0:(p.errored=!0,O(S));if(++me>=U)return O(null)}we.onerror=function(S){p(this.error),S.preventDefault()},w.sort().forEach(function(S){R.type==="local"?IDBFS.loadRemoteEntry(P,S,function(z,K){if(z)return p(z);IDBFS.storeLocalEntry(S,K,p)}):IDBFS.loadLocalEntry(S,function(z,K){if(z)return p(z);IDBFS.storeRemoteEntry(P,S,K,p)})}),e.sort().reverse().forEach(function(S){R.type==="local"?IDBFS.removeLocalEntry(S,p):IDBFS.removeRemoteEntry(P,S,p)})}},NODEFS={isWindows:!1,staticInit:function(){NODEFS.isWindows=!!process.platform.match(/^win/)},mount:function(_){return assert(ENVIRONMENT_IS_NODE),NODEFS.createNode(null,"/",NODEFS.getMode(_.opts.root),0)},createNode:function(_,R,O,U){if(!FS.isDir(O)&&!FS.isFile(O)&&!FS.isLink(O))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var w=FS.createNode(_,R,O);return w.node_ops=NODEFS.node_ops,w.stream_ops=NODEFS.stream_ops,w},getMode:function(_){var R;try{R=fs.lstatSync(_),NODEFS.isWindows&&(R.mode=R.mode|(R.mode&146)>>1)}catch(O){throw O.code?new FS.ErrnoError(ERRNO_CODES[O.code]):O}return R.mode},realPath:function(_){for(var R=[];_.parent!==_;)R.push(_.name),_=_.parent;return R.push(_.mount.opts.root),R.reverse(),PATH.join.apply(null,R)},flagsToPermissionStringMap:{0:"r",1:"r+",2:"r+",64:"r",65:"r+",66:"r+",129:"rx+",193:"rx+",514:"w+",577:"w",578:"w+",705:"wx",706:"wx+",1024:"a",1025:"a",1026:"a+",1089:"a",1090:"a+",1153:"ax",1154:"ax+",1217:"ax",1218:"ax+",4096:"rs",4098:"rs+"},flagsToPermissionString:function(_){if(_&=-32769,_ in NODEFS.flagsToPermissionStringMap)return NODEFS.flagsToPermissionStringMap[_];throw new FS.ErrnoError(ERRNO_CODES.EINVAL)},node_ops:{getattr:function(_){var R=NODEFS.realPath(_),O;try{O=fs.lstatSync(R)}catch(U){throw U.code?new FS.ErrnoError(ERRNO_CODES[U.code]):U}return NODEFS.isWindows&&!O.blksize&&(O.blksize=4096),NODEFS.isWindows&&!O.blocks&&(O.blocks=(O.size+O.blksize-1)/O.blksize|0),{dev:O.dev,ino:O.ino,mode:O.mode,nlink:O.nlink,uid:O.uid,gid:O.gid,rdev:O.rdev,size:O.size,atime:O.atime,mtime:O.mtime,ctime:O.ctime,blksize:O.blksize,blocks:O.blocks}},setattr:function(_,R){var O=NODEFS.realPath(_);try{if(R.mode!==void 0&&(fs.chmodSync(O,R.mode),_.mode=R.mode),R.timestamp!==void 0){var U=new Date(R.timestamp);fs.utimesSync(O,U,U)}R.size!==void 0&&fs.truncateSync(O,R.size)}catch(w){throw w.code?new FS.ErrnoError(ERRNO_CODES[w.code]):w}},lookup:function(_,R){var O=PATH.join2(NODEFS.realPath(_),R),U=NODEFS.getMode(O);return NODEFS.createNode(_,R,U)},mknod:function(_,R,O,U){var w=NODEFS.createNode(_,R,O,U),e=NODEFS.realPath(w);try{FS.isDir(w.mode)?fs.mkdirSync(e,w.mode):fs.writeFileSync(e,"",{mode:w.mode})}catch(me){throw me.code?new FS.ErrnoError(ERRNO_CODES[me.code]):me}return w},rename:function(_,R,O){var U=NODEFS.realPath(_),w=PATH.join2(NODEFS.realPath(R),O);try{fs.renameSync(U,w)}catch(e){throw e.code?new FS.ErrnoError(ERRNO_CODES[e.code]):e}},unlink:function(_,R){var O=PATH.join2(NODEFS.realPath(_),R);try{fs.unlinkSync(O)}catch(U){throw U.code?new FS.ErrnoError(ERRNO_CODES[U.code]):U}},rmdir:function(_,R){var O=PATH.join2(NODEFS.realPath(_),R);try{fs.rmdirSync(O)}catch(U){throw U.code?new FS.ErrnoError(ERRNO_CODES[U.code]):U}},readdir:function(_){var R=NODEFS.realPath(_);try{return fs.readdirSync(R)}catch(O){throw O.code?new FS.ErrnoError(ERRNO_CODES[O.code]):O}},symlink:function(_,R,O){var U=PATH.join2(NODEFS.realPath(_),R);try{fs.symlinkSync(O,U)}catch(w){throw w.code?new FS.ErrnoError(ERRNO_CODES[w.code]):w}},readlink:function(_){var R=NODEFS.realPath(_);try{return R=fs.readlinkSync(R),R=NODEJS_PATH.relative(NODEJS_PATH.resolve(_.mount.opts.root),R),R}catch(O){throw O.code?new FS.ErrnoError(ERRNO_CODES[O.code]):O}}},stream_ops:{open:function(_){var R=NODEFS.realPath(_.node);try{FS.isFile(_.node.mode)&&(_.nfd=fs.openSync(R,NODEFS.flagsToPermissionString(_.flags)))}catch(O){throw O.code?new FS.ErrnoError(ERRNO_CODES[O.code]):O}},close:function(_){try{FS.isFile(_.node.mode)&&_.nfd&&fs.closeSync(_.nfd)}catch(R){throw R.code?new FS.ErrnoError(ERRNO_CODES[R.code]):R}},read:function(_,R,O,U,w){if(U===0)return 0;var e=new Buffer(U),me;try{me=fs.readSync(_.nfd,e,0,U,w)}catch(we){throw new FS.ErrnoError(ERRNO_CODES[we.code])}if(me>0)for(var ie=0;ie<me;ie++)R[O+ie]=e[ie];return me},write:function(_,R,O,U,w){var e=new Buffer(R.subarray(O,O+U)),me;try{me=fs.writeSync(_.nfd,e,0,U,w)}catch(ie){throw new FS.ErrnoError(ERRNO_CODES[ie.code])}return me},llseek:function(_,R,O){var U=R;if(O===1)U+=_.position;else if(O===2&&FS.isFile(_.node.mode))try{var w=fs.fstatSync(_.nfd);U+=w.size}catch(e){throw new FS.ErrnoError(ERRNO_CODES[e.code])}if(U<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return U}}},WORKERFS={DIR_MODE:16895,FILE_MODE:33279,reader:null,mount:function(_){assert(ENVIRONMENT_IS_WORKER),WORKERFS.reader||(WORKERFS.reader=new FileReaderSync);var R=WORKERFS.createNode(null,"/",WORKERFS.DIR_MODE,0),O={};function U(e){for(var me=e.split("/"),ie=R,we=0;we<me.length-1;we++){var P=me.slice(0,we+1).join("/");O[P]||(O[P]=WORKERFS.createNode(ie,P,WORKERFS.DIR_MODE,0)),ie=O[P]}return ie}function w(e){var me=e.split("/");return me[me.length-1]}return Array.prototype.forEach.call(_.opts.files||[],function(e){WORKERFS.createNode(U(e.name),w(e.name),WORKERFS.FILE_MODE,0,e,e.lastModifiedDate)}),(_.opts.blobs||[]).forEach(function(e){WORKERFS.createNode(U(e.name),w(e.name),WORKERFS.FILE_MODE,0,e.data)}),(_.opts.packages||[]).forEach(function(e){e.metadata.files.forEach(function(me){var ie=me.filename.substr(1);WORKERFS.createNode(U(ie),w(ie),WORKERFS.FILE_MODE,0,e.blob.slice(me.start,me.end))})}),R},createNode:function(_,R,O,U,w,e){var me=FS.createNode(_,R,O);return me.mode=O,me.node_ops=WORKERFS.node_ops,me.stream_ops=WORKERFS.stream_ops,me.timestamp=(e||new Date).getTime(),assert(WORKERFS.FILE_MODE!==WORKERFS.DIR_MODE),O===WORKERFS.FILE_MODE?(me.size=w.size,me.contents=w):(me.size=4096,me.contents={}),_&&(_.contents[R]=me),me},node_ops:{getattr:function(_){return{dev:1,ino:void 0,mode:_.mode,nlink:1,uid:0,gid:0,rdev:void 0,size:_.size,atime:new Date(_.timestamp),mtime:new Date(_.timestamp),ctime:new Date(_.timestamp),blksize:4096,blocks:Math.ceil(_.size/4096)}},setattr:function(_,R){R.mode!==void 0&&(_.mode=R.mode),R.timestamp!==void 0&&(_.timestamp=R.timestamp)},lookup:function(_,R){throw new FS.ErrnoError(ERRNO_CODES.ENOENT)},mknod:function(_,R,O,U){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rename:function(_,R,O){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},unlink:function(_,R){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},rmdir:function(_,R){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readdir:function(_){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},symlink:function(_,R,O){throw new FS.ErrnoError(ERRNO_CODES.EPERM)},readlink:function(_){throw new FS.ErrnoError(ERRNO_CODES.EPERM)}},stream_ops:{read:function(_,R,O,U,w){if(w>=_.node.size)return 0;var e=_.node.contents.slice(w,w+U),me=WORKERFS.reader.readAsArrayBuffer(e);return R.set(new Uint8Array(me),O),e.size},write:function(_,R,O,U,w){throw new FS.ErrnoError(ERRNO_CODES.EIO)},llseek:function(_,R,O){var U=R;if(O===1?U+=_.position:O===2&&FS.isFile(_.node.mode)&&(U+=_.node.size),U<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return U}}};allocate(1,"i32*",ALLOC_STATIC),allocate(1,"i32*",ALLOC_STATIC),allocate(1,"i32*",ALLOC_STATIC);var FS={root:null,mounts:[],devices:[null],streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,handleFSError:function(_){if(!(_ instanceof FS.ErrnoError))throw _+" : "+stackTrace();return ___setErrNo(_.errno)},lookupPath:function(_,R){if(_=PATH.resolve(FS.cwd(),_),R=R||{},!_)return{path:"",node:null};var O={follow_mount:!0,recurse_count:0};for(var U in O)R[U]===void 0&&(R[U]=O[U]);if(R.recurse_count>8)throw new FS.ErrnoError(ERRNO_CODES.ELOOP);for(var w=PATH.normalizeArray(_.split("/").filter(function(z){return!!z}),!1),e=FS.root,me="/",ie=0;ie<w.length;ie++){var we=ie===w.length-1;if(we&&R.parent)break;if(e=FS.lookupNode(e,w[ie]),me=PATH.join2(me,w[ie]),FS.isMountpoint(e)&&(!we||we&&R.follow_mount)&&(e=e.mounted.root),!we||R.follow)for(var P=0;FS.isLink(e.mode);){var p=FS.readlink(me);me=PATH.resolve(PATH.dirname(me),p);var S=FS.lookupPath(me,{recurse_count:R.recurse_count});if(e=S.node,P++>40)throw new FS.ErrnoError(ERRNO_CODES.ELOOP)}}return{path:me,node:e}},getPath:function(_){for(var R;;){if(FS.isRoot(_)){var O=_.mount.mountpoint;return R?O[O.length-1]!=="/"?O+"/"+R:O+R:O}R=R?_.name+"/"+R:_.name,_=_.parent}},hashName:function(_,R){for(var O=0,U=0;U<R.length;U++)O=(O<<5)-O+R.charCodeAt(U)|0;return(_+O>>>0)%FS.nameTable.length},hashAddNode:function(_){var R=FS.hashName(_.parent.id,_.name);_.name_next=FS.nameTable[R],FS.nameTable[R]=_},hashRemoveNode:function(_){var R=FS.hashName(_.parent.id,_.name);if(FS.nameTable[R]===_)FS.nameTable[R]=_.name_next;else for(var O=FS.nameTable[R];O;){if(O.name_next===_){O.name_next=_.name_next;break}O=O.name_next}},lookupNode:function(_,R){var O=FS.mayLookup(_);if(O)throw new FS.ErrnoError(O,_);for(var U=FS.hashName(_.id,R),w=FS.nameTable[U];w;w=w.name_next){var e=w.name;if(w.parent.id===_.id&&e===R)return w}return FS.lookup(_,R)},createNode:function(_,R,O,U){if(!FS.FSNode){FS.FSNode=function(ie,we,P,p){ie||(ie=this),this.parent=ie,this.mount=ie.mount,this.mounted=null,this.id=FS.nextInode++,this.name=we,this.mode=P,this.node_ops={},this.stream_ops={},this.rdev=p},FS.FSNode.prototype={};var w=365,e=146;Object.defineProperties(FS.FSNode.prototype,{read:{get:function(){return(this.mode&w)===w},set:function(ie){ie?this.mode|=w:this.mode&=~w}},write:{get:function(){return(this.mode&e)===e},set:function(ie){ie?this.mode|=e:this.mode&=~e}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}})}var me=new FS.FSNode(_,R,O,U);return FS.hashAddNode(me),me},destroyNode:function(_){FS.hashRemoveNode(_)},isRoot:function(_){return _===_.parent},isMountpoint:function(_){return!!_.mounted},isFile:function(_){return(_&61440)===32768},isDir:function(_){return(_&61440)===16384},isLink:function(_){return(_&61440)===40960},isChrdev:function(_){return(_&61440)===8192},isBlkdev:function(_){return(_&61440)===24576},isFIFO:function(_){return(_&61440)===4096},isSocket:function(_){return(_&49152)===49152},flagModes:{r:0,rs:1052672,"r+":2,w:577,wx:705,xw:705,"w+":578,"wx+":706,"xw+":706,a:1089,ax:1217,xa:1217,"a+":1090,"ax+":1218,"xa+":1218},modeStringToFlags:function(_){var R=FS.flagModes[_];if(typeof R>"u")throw new Error("Unknown file open mode: "+_);return R},flagsToPermissionString:function(_){var R=["r","w","rw"][_&3];return _&512&&(R+="w"),R},nodePermissions:function(_,R){return FS.ignorePermissions?0:R.indexOf("r")!==-1&&!(_.mode&292)||R.indexOf("w")!==-1&&!(_.mode&146)||R.indexOf("x")!==-1&&!(_.mode&73)?ERRNO_CODES.EACCES:0},mayLookup:function(_){var R=FS.nodePermissions(_,"x");return R||(_.node_ops.lookup?0:ERRNO_CODES.EACCES)},mayCreate:function(_,R){try{var O=FS.lookupNode(_,R);return ERRNO_CODES.EEXIST}catch{}return FS.nodePermissions(_,"wx")},mayDelete:function(_,R,O){var U;try{U=FS.lookupNode(_,R)}catch(e){return e.errno}var w=FS.nodePermissions(_,"wx");if(w)return w;if(O){if(!FS.isDir(U.mode))return ERRNO_CODES.ENOTDIR;if(FS.isRoot(U)||FS.getPath(U)===FS.cwd())return ERRNO_CODES.EBUSY}else if(FS.isDir(U.mode))return ERRNO_CODES.EISDIR;return 0},mayOpen:function(_,R){return _?FS.isLink(_.mode)?ERRNO_CODES.ELOOP:FS.isDir(_.mode)&&(R&2097155||R&512)?ERRNO_CODES.EISDIR:FS.nodePermissions(_,FS.flagsToPermissionString(R)):ERRNO_CODES.ENOENT},MAX_OPEN_FDS:4096,nextfd:function(_,R){_=_||0,R=R||FS.MAX_OPEN_FDS;for(var O=_;O<=R;O++)if(!FS.streams[O])return O;throw new FS.ErrnoError(ERRNO_CODES.EMFILE)},getStream:function(_){return FS.streams[_]},createStream:function(_,R,O){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={},Object.defineProperties(FS.FSStream.prototype,{object:{get:function(){return this.node},set:function(me){this.node=me}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}}));var U=new FS.FSStream;for(var w in _)U[w]=_[w];_=U;var e=FS.nextfd(R,O);return _.fd=e,FS.streams[e]=_,_},closeStream:function(_){FS.streams[_]=null},chrdev_stream_ops:{open:function(_){var R=FS.getDevice(_.node.rdev);_.stream_ops=R.stream_ops,_.stream_ops.open&&_.stream_ops.open(_)},llseek:function(){throw new FS.ErrnoError(ERRNO_CODES.ESPIPE)}},major:function(_){return _>>8},minor:function(_){return _&255},makedev:function(_,R){return _<<8|R},registerDevice:function(_,R){FS.devices[_]={stream_ops:R}},getDevice:function(_){return FS.devices[_]},getMounts:function(_){for(var R=[],O=[_];O.length;){var U=O.pop();R.push(U),O.push.apply(O,U.mounts)}return R},syncfs:function(_,R){typeof _=="function"&&(R=_,_=!1);var O=FS.getMounts(FS.root.mount),U=0;function w(e){if(e)return w.errored?void 0:(w.errored=!0,R(e));++U>=O.length&&R(null)}O.forEach(function(e){if(!e.type.syncfs)return w(null);e.type.syncfs(e,_,w)})},mount:function(_,R,O){var U=O==="/",w=!O,e;if(U&&FS.root)throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!U&&!w){var me=FS.lookupPath(O,{follow_mount:!1});if(O=me.path,e=me.node,FS.isMountpoint(e))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(!FS.isDir(e.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR)}var ie={type:_,opts:R,mountpoint:O,mounts:[]},we=_.mount(ie);return we.mount=ie,ie.root=we,U?FS.root=we:e&&(e.mounted=ie,e.mount&&e.mount.mounts.push(ie)),we},unmount:function(_){var R=FS.lookupPath(_,{follow_mount:!1});if(!FS.isMountpoint(R.node))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var O=R.node,U=O.mounted,w=FS.getMounts(U);Object.keys(FS.nameTable).forEach(function(me){for(var ie=FS.nameTable[me];ie;){var we=ie.name_next;w.indexOf(ie.mount)!==-1&&FS.destroyNode(ie),ie=we}}),O.mounted=null;var e=O.mount.mounts.indexOf(U);assert(e!==-1),O.mount.mounts.splice(e,1)},lookup:function(_,R){return _.node_ops.lookup(_,R)},mknod:function(_,R,O){var U=FS.lookupPath(_,{parent:!0}),w=U.node,e=PATH.basename(_);if(!e||e==="."||e==="..")throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var me=FS.mayCreate(w,e);if(me)throw new FS.ErrnoError(me);if(!w.node_ops.mknod)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return w.node_ops.mknod(w,e,R,O)},create:function(_,R){return R=R!==void 0?R:438,R&=4095,R|=32768,FS.mknod(_,R,0)},mkdir:function(_,R){return R=R!==void 0?R:511,R&=1023,R|=16384,FS.mknod(_,R,0)},mkdev:function(_,R,O){return typeof O>"u"&&(O=R,R=438),R|=8192,FS.mknod(_,R,O)},symlink:function(_,R){if(!PATH.resolve(_))throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var O=FS.lookupPath(R,{parent:!0}),U=O.node;if(!U)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);var w=PATH.basename(R),e=FS.mayCreate(U,w);if(e)throw new FS.ErrnoError(e);if(!U.node_ops.symlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return U.node_ops.symlink(U,w,_)},rename:function(_,R){var O=PATH.dirname(_),U=PATH.dirname(R),w=PATH.basename(_),e=PATH.basename(R),me,ie,we;try{me=FS.lookupPath(_,{parent:!0}),ie=me.node,me=FS.lookupPath(R,{parent:!0}),we=me.node}catch{throw new FS.ErrnoError(ERRNO_CODES.EBUSY)}if(!ie||!we)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(ie.mount!==we.mount)throw new FS.ErrnoError(ERRNO_CODES.EXDEV);var P=FS.lookupNode(ie,w),p=PATH.relative(_,U);if(p.charAt(0)!==".")throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(p=PATH.relative(R,O),p.charAt(0)!==".")throw new FS.ErrnoError(ERRNO_CODES.ENOTEMPTY);var S;try{S=FS.lookupNode(we,e)}catch{}if(P!==S){var z=FS.isDir(P.mode),K=FS.mayDelete(ie,w,z);if(K)throw new FS.ErrnoError(K);if(K=S?FS.mayDelete(we,e,z):FS.mayCreate(we,e),K)throw new FS.ErrnoError(K);if(!ie.node_ops.rename)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(P)||S&&FS.isMountpoint(S))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);if(we!==ie&&(K=FS.nodePermissions(ie,"w"),K))throw new FS.ErrnoError(K);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(_,R)}catch(D){console.log("FS.trackingDelegate['willMovePath']('"+_+"', '"+R+"') threw an exception: "+D.message)}FS.hashRemoveNode(P);try{ie.node_ops.rename(P,we,e)}catch(D){throw D}finally{FS.hashAddNode(P)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(_,R)}catch(D){console.log("FS.trackingDelegate['onMovePath']('"+_+"', '"+R+"') threw an exception: "+D.message)}}},rmdir:function(_){var R=FS.lookupPath(_,{parent:!0}),O=R.node,U=PATH.basename(_),w=FS.lookupNode(O,U),e=FS.mayDelete(O,U,!0);if(e)throw new FS.ErrnoError(e);if(!O.node_ops.rmdir)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(w))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(_)}catch(me){console.log("FS.trackingDelegate['willDeletePath']('"+_+"') threw an exception: "+me.message)}O.node_ops.rmdir(O,U),FS.destroyNode(w);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(_)}catch(me){console.log("FS.trackingDelegate['onDeletePath']('"+_+"') threw an exception: "+me.message)}},readdir:function(_){var R=FS.lookupPath(_,{follow:!0}),O=R.node;if(!O.node_ops.readdir)throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);return O.node_ops.readdir(O)},unlink:function(_){var R=FS.lookupPath(_,{parent:!0}),O=R.node,U=PATH.basename(_),w=FS.lookupNode(O,U),e=FS.mayDelete(O,U,!1);if(e)throw e===ERRNO_CODES.EISDIR&&(e=ERRNO_CODES.EPERM),new FS.ErrnoError(e);if(!O.node_ops.unlink)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isMountpoint(w))throw new FS.ErrnoError(ERRNO_CODES.EBUSY);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(_)}catch(me){console.log("FS.trackingDelegate['willDeletePath']('"+_+"') threw an exception: "+me.message)}O.node_ops.unlink(O,U),FS.destroyNode(w);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(_)}catch(me){console.log("FS.trackingDelegate['onDeletePath']('"+_+"') threw an exception: "+me.message)}},readlink:function(_){var R=FS.lookupPath(_),O=R.node;if(!O)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!O.node_ops.readlink)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);return PATH.resolve(FS.getPath(O.parent),O.node_ops.readlink(O))},stat:function(_,R){var O=FS.lookupPath(_,{follow:!R}),U=O.node;if(!U)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(!U.node_ops.getattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);return U.node_ops.getattr(U)},lstat:function(_){return FS.stat(_,!0)},chmod:function(_,R,O){var U;if(typeof _=="string"){var w=FS.lookupPath(_,{follow:!O});U=w.node}else U=_;if(!U.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);U.node_ops.setattr(U,{mode:R&4095|U.mode&-4096,timestamp:Date.now()})},lchmod:function(_,R){FS.chmod(_,R,!0)},fchmod:function(_,R){var O=FS.getStream(_);if(!O)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chmod(O.node,R)},chown:function(_,R,O,U){var w;if(typeof _=="string"){var e=FS.lookupPath(_,{follow:!U});w=e.node}else w=_;if(!w.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);w.node_ops.setattr(w,{timestamp:Date.now()})},lchown:function(_,R,O){FS.chown(_,R,O,!0)},fchown:function(_,R,O){var U=FS.getStream(_);if(!U)throw new FS.ErrnoError(ERRNO_CODES.EBADF);FS.chown(U.node,R,O)},truncate:function(_,R){if(R<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var O;if(typeof _=="string"){var U=FS.lookupPath(_,{follow:!0});O=U.node}else O=_;if(!O.node_ops.setattr)throw new FS.ErrnoError(ERRNO_CODES.EPERM);if(FS.isDir(O.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!FS.isFile(O.mode))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var w=FS.nodePermissions(O,"w");if(w)throw new FS.ErrnoError(w);O.node_ops.setattr(O,{size:R,timestamp:Date.now()})},ftruncate:function(_,R){var O=FS.getStream(_);if(!O)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!(O.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EINVAL);FS.truncate(O.node,R)},utime:function(_,R,O){var U=FS.lookupPath(_,{follow:!0}),w=U.node;w.node_ops.setattr(w,{timestamp:Math.max(R,O)})},open:function(_,R,O,U,w){if(_==="")throw new FS.ErrnoError(ERRNO_CODES.ENOENT);R=typeof R=="string"?FS.modeStringToFlags(R):R,O=typeof O>"u"?438:O,R&64?O=O&4095|32768:O=0;var e;if(typeof _=="object")e=_;else{_=PATH.normalize(_);try{var me=FS.lookupPath(_,{follow:!(R&131072)});e=me.node}catch{}}var ie=!1;if(R&64)if(e){if(R&128)throw new FS.ErrnoError(ERRNO_CODES.EEXIST)}else e=FS.mknod(_,O,0),ie=!0;if(!e)throw new FS.ErrnoError(ERRNO_CODES.ENOENT);if(FS.isChrdev(e.mode)&&(R&=-513),R&65536&&!FS.isDir(e.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);if(!ie){var we=FS.mayOpen(e,R);if(we)throw new FS.ErrnoError(we)}R&512&&FS.truncate(e,0),R&=-641;var P=FS.createStream({node:e,path:FS.getPath(e),flags:R,seekable:!0,position:0,stream_ops:e.stream_ops,ungotten:[],error:!1},U,w);P.stream_ops.open&&P.stream_ops.open(P),Module.logReadFiles&&!(R&1)&&(FS.readFiles||(FS.readFiles={}),_ in FS.readFiles||(FS.readFiles[_]=1,Module.printErr("read file: "+_)));try{if(FS.trackingDelegate.onOpenFile){var p=0;(R&2097155)!==1&&(p|=FS.tracking.openFlags.READ),R&2097155&&(p|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(_,p)}}catch(S){console.log("FS.trackingDelegate['onOpenFile']('"+_+"', flags) threw an exception: "+S.message)}return P},close:function(_){_.getdents&&(_.getdents=null);try{_.stream_ops.close&&_.stream_ops.close(_)}catch(R){throw R}finally{FS.closeStream(_.fd)}},llseek:function(_,R,O){if(!_.seekable||!_.stream_ops.llseek)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);return _.position=_.stream_ops.llseek(_,R,O),_.ungotten=[],_.position},read:function(_,R,O,U,w){if(U<0||w<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if((_.flags&2097155)===1)throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(_.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!_.stream_ops.read)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);var e=!0;if(typeof w>"u")w=_.position,e=!1;else if(!_.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var me=_.stream_ops.read(_,R,O,U,w);return e||(_.position+=me),me},write:function(_,R,O,U,w,e){if(U<0||w<0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(!(_.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(FS.isDir(_.node.mode))throw new FS.ErrnoError(ERRNO_CODES.EISDIR);if(!_.stream_ops.write)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);_.flags&1024&&FS.llseek(_,0,2);var me=!0;if(typeof w>"u")w=_.position,me=!1;else if(!_.seekable)throw new FS.ErrnoError(ERRNO_CODES.ESPIPE);var ie=_.stream_ops.write(_,R,O,U,w,e);me||(_.position+=ie);try{_.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(_.path)}catch(we){console.log("FS.trackingDelegate['onWriteToFile']('"+path+"') threw an exception: "+we.message)}return ie},allocate:function(_,R,O){if(R<0||O<=0)throw new FS.ErrnoError(ERRNO_CODES.EINVAL);if(!(_.flags&2097155))throw new FS.ErrnoError(ERRNO_CODES.EBADF);if(!FS.isFile(_.node.mode)&&!FS.isDir(node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENODEV);if(!_.stream_ops.allocate)throw new FS.ErrnoError(ERRNO_CODES.EOPNOTSUPP);_.stream_ops.allocate(_,R,O)},mmap:function(_,R,O,U,w,e,me){if((_.flags&2097155)===1)throw new FS.ErrnoError(ERRNO_CODES.EACCES);if(!_.stream_ops.mmap)throw new FS.ErrnoError(ERRNO_CODES.ENODEV);return _.stream_ops.mmap(_,R,O,U,w,e,me)},msync:function(_,R,O,U,w){return!_||!_.stream_ops.msync?0:_.stream_ops.msync(_,R,O,U,w)},munmap:function(_){return 0},ioctl:function(_,R,O){if(!_.stream_ops.ioctl)throw new FS.ErrnoError(ERRNO_CODES.ENOTTY);return _.stream_ops.ioctl(_,R,O)},readFile:function(_,R){if(R=R||{},R.flags=R.flags||"r",R.encoding=R.encoding||"binary",R.encoding!=="utf8"&&R.encoding!=="binary")throw new Error('Invalid encoding type "'+R.encoding+'"');var O,U=FS.open(_,R.flags),w=FS.stat(_),e=w.size,me=new Uint8Array(e);return FS.read(U,me,0,e,0),R.encoding==="utf8"?O=UTF8ArrayToString(me,0):R.encoding==="binary"&&(O=me),FS.close(U),O},writeFile:function(_,R,O){if(O=O||{},O.flags=O.flags||"w",O.encoding=O.encoding||"utf8",O.encoding!=="utf8"&&O.encoding!=="binary")throw new Error('Invalid encoding type "'+O.encoding+'"');var U=FS.open(_,O.flags,O.mode);if(O.encoding==="utf8"){var w=new Uint8Array(lengthBytesUTF8(R)+1),e=stringToUTF8Array(R,w,0,w.length);FS.write(U,w,0,e,0,O.canOwn)}else O.encoding==="binary"&&FS.write(U,R,0,R.length,0,O.canOwn);FS.close(U)},cwd:function(){return FS.currentPath},chdir:function(_){var R=FS.lookupPath(_,{follow:!0});if(!FS.isDir(R.node.mode))throw new FS.ErrnoError(ERRNO_CODES.ENOTDIR);var O=FS.nodePermissions(R.node,"x");if(O)throw new FS.ErrnoError(O);FS.currentPath=R.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(O,U,w,e,me){return e}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var _;if(typeof crypto<"u"){var R=new Uint8Array(1);_=function(){return crypto.getRandomValues(R),R[0]}}else ENVIRONMENT_IS_NODE?_=function(){return require$$1.randomBytes(1)[0]}:_=function(){return Math.random()*256|0};FS.createDevice("/dev","random",_),FS.createDevice("/dev","urandom",_),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc"),FS.mkdir("/proc/self"),FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var _=FS.createNode("/proc/self","fd",16895,73);return _.node_ops={lookup:function(R,O){var U=+O,w=FS.getStream(U);if(!w)throw new FS.ErrnoError(ERRNO_CODES.EBADF);var e={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return w.path}}};return e.parent=e,e}},_}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");var _=FS.open("/dev/stdin","r");assert(_.fd===0,"invalid handle for stdin ("+_.fd+")");var R=FS.open("/dev/stdout","w");assert(R.fd===1,"invalid handle for stdout ("+R.fd+")");var O=FS.open("/dev/stderr","w");assert(O.fd===2,"invalid handle for stderr ("+O.fd+")")},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(R,O){this.node=O,this.setErrno=function(U){this.errno=U;for(var w in ERRNO_CODES)if(ERRNO_CODES[w]===U){this.code=w;break}},this.setErrno(R),this.message=ERRNO_MESSAGES[R]},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[ERRNO_CODES.ENOENT].forEach(function(_){FS.genericErrors[_]=new FS.ErrnoError(_),FS.genericErrors[_].stack="<generic error, no stack>"}))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS,IDBFS,NODEFS,WORKERFS}},init:function(_,R,O){assert(!FS.init.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=_||Module.stdin,Module.stdout=R||Module.stdout,Module.stderr=O||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var _=Module._fflush;_&&_(0);for(var R=0;R<FS.streams.length;R++){var O=FS.streams[R];O&&FS.close(O)}},getMode:function(_,R){var O=0;return _&&(O|=365),R&&(O|=146),O},joinPath:function(_,R){var O=PATH.join.apply(null,_);return R&&O[0]=="/"&&(O=O.substr(1)),O},absolutePath:function(_,R){return PATH.resolve(R,_)},standardizePath:function(_){return PATH.normalize(_)},findObject:function(_,R){var O=FS.analyzePath(_,R);return O.exists?O.object:(___setErrNo(O.error),null)},analyzePath:function(_,R){try{var O=FS.lookupPath(_,{follow:!R});_=O.path}catch{}var U={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var O=FS.lookupPath(_,{parent:!0});U.parentExists=!0,U.parentPath=O.path,U.parentObject=O.node,U.name=PATH.basename(_),O=FS.lookupPath(_,{follow:!R}),U.exists=!0,U.path=O.path,U.object=O.node,U.name=O.node.name,U.isRoot=O.path==="/"}catch(w){U.error=w.errno}return U},createFolder:function(_,R,O,U){var w=PATH.join2(typeof _=="string"?_:FS.getPath(_),R),e=FS.getMode(O,U);return FS.mkdir(w,e)},createPath:function(_,R,O,U){_=typeof _=="string"?_:FS.getPath(_);for(var w=R.split("/").reverse();w.length;){var e=w.pop();if(e){var me=PATH.join2(_,e);try{FS.mkdir(me)}catch{}_=me}}return me},createFile:function(_,R,O,U,w){var e=PATH.join2(typeof _=="string"?_:FS.getPath(_),R),me=FS.getMode(U,w);return FS.create(e,me)},createDataFile:function(_,R,O,U,w,e){var me=R?PATH.join2(typeof _=="string"?_:FS.getPath(_),R):_,ie=FS.getMode(U,w),we=FS.create(me,ie);if(O){if(typeof O=="string"){for(var P=new Array(O.length),p=0,S=O.length;p<S;++p)P[p]=O.charCodeAt(p);O=P}FS.chmod(we,ie|146);var z=FS.open(we,"w");FS.write(z,O,0,O.length,0,e),FS.close(z),FS.chmod(we,ie)}return we},createDevice:function(_,R,O,U){var w=PATH.join2(typeof _=="string"?_:FS.getPath(_),R),e=FS.getMode(!!O,!!U);FS.createDevice.major||(FS.createDevice.major=64);var me=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(me,{open:function(ie){ie.seekable=!1},close:function(ie){U&&U.buffer&&U.buffer.length&&U(10)},read:function(ie,we,P,p,S){for(var z=0,K=0;K<p;K++){var D;try{D=O()}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}if(D===void 0&&z===0)throw new FS.ErrnoError(ERRNO_CODES.EAGAIN);if(D==null)break;z++,we[P+K]=D}return z&&(ie.node.timestamp=Date.now()),z},write:function(ie,we,P,p,S){for(var z=0;z<p;z++)try{U(we[P+z])}catch{throw new FS.ErrnoError(ERRNO_CODES.EIO)}return p&&(ie.node.timestamp=Date.now()),z}}),FS.mkdev(w,e,me)},createLink:function(_,R,O,U,w){var e=PATH.join2(typeof _=="string"?_:FS.getPath(_),R);return FS.symlink(O,e)},forceLoadFile:function(_){if(_.isDevice||_.isFolder||_.link||_.contents)return!0;var R=!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Module.read)try{_.contents=intArrayFromString(Module.read(_.url),!0),_.usedBytes=_.contents.length}catch{R=!1}else throw new Error("Cannot load without read() or XMLHttpRequest.");return R||___setErrNo(ERRNO_CODES.EIO),R},createLazyFile:function(_,R,O,U,w){function e(){this.lengthKnown=!1,this.chunks=[]}if(e.prototype.get=function(z){if(!(z>this.length-1||z<0)){var K=z%this.chunkSize,D=z/this.chunkSize|0;return this.getter(D)[K]}},e.prototype.setDataGetter=function(z){this.getter=z},e.prototype.cacheLength=function(){var z=new XMLHttpRequest;if(z.open("HEAD",O,!1),z.send(null),!(z.status>=200&&z.status<300||z.status===304))throw new Error("Couldn't load "+O+". Status: "+z.status);var K=Number(z.getResponseHeader("Content-length")),D,Q=(D=z.getResponseHeader("Accept-Ranges"))&&D==="bytes",V=1024*1024;Q||(V=K);var T=function(N,k){if(N>k)throw new Error("invalid range ("+N+", "+k+") or no bytes requested!");if(k>K-1)throw new Error("only "+K+" bytes available! programmer error!");var G=new XMLHttpRequest;if(G.open("GET",O,!1),K!==V&&G.setRequestHeader("Range","bytes="+N+"-"+k),typeof Uint8Array<"u"&&(G.responseType="arraybuffer"),G.overrideMimeType&&G.overrideMimeType("text/plain; charset=x-user-defined"),G.send(null),!(G.status>=200&&G.status<300||G.status===304))throw new Error("Couldn't load "+O+". Status: "+G.status);return G.response!==void 0?new Uint8Array(G.response||[]):intArrayFromString(G.responseText||"",!0)},F=this;F.setDataGetter(function(N){var k=N*V,G=(N+1)*V-1;if(G=Math.min(G,K-1),typeof F.chunks[N]>"u"&&(F.chunks[N]=T(k,G)),typeof F.chunks[N]>"u")throw new Error("doXHR failed!");return F.chunks[N]}),this._length=K,this._chunkSize=V,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var me=new e;Object.defineProperty(me,"length",{get:function(){return this.lengthKnown||this.cacheLength(),this._length}}),Object.defineProperty(me,"chunkSize",{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}});var ie={isDevice:!1,contents:me}}else var ie={isDevice:!1,url:O};var we=FS.createFile(_,R,ie,U,w);ie.contents?we.contents=ie.contents:ie.url&&(we.contents=null,we.url=ie.url),Object.defineProperty(we,"usedBytes",{get:function(){return this.contents.length}});var P={},p=Object.keys(we.stream_ops);return p.forEach(function(S){var z=we.stream_ops[S];P[S]=function(){if(!FS.forceLoadFile(we))throw new FS.ErrnoError(ERRNO_CODES.EIO);return z.apply(null,arguments)}}),P.read=function(z,K,D,Q,V){if(!FS.forceLoadFile(we))throw new FS.ErrnoError(ERRNO_CODES.EIO);var T=z.node.contents;if(V>=T.length)return 0;var F=Math.min(T.length-V,Q);if(assert(F>=0),T.slice)for(var N=0;N<F;N++)K[D+N]=T[V+N];else for(var N=0;N<F;N++)K[D+N]=T.get(V+N);return F},we.stream_ops=P,we},createPreloadedFile:function(_,R,O,U,w,e,me,ie,we,P){Browser.init();var p=R?PATH.resolve(PATH.join2(_,R)):_;function S(z){function K(Q){P&&P(),ie||FS.createDataFile(_,R,Q,U,w,we),e&&e(),removeRunDependency()}var D=!1;Module.preloadPlugins.forEach(function(Q){D||Q.canHandle(p)&&(Q.handle(z,p,K,function(){me&&me(),removeRunDependency()}),D=!0)}),D||K(z)}addRunDependency(),typeof O=="string"?Browser.asyncLoad(O,function(z){S(z)},me):S(O)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(_,R,O){R=R||function(){},O=O||function(){};var U=FS.indexedDB();try{var w=U.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return O(e)}w.onupgradeneeded=function(){console.log("creating db");var me=w.result;me.createObjectStore(FS.DB_STORE_NAME)},w.onsuccess=function(){var me=w.result,ie=me.transaction([FS.DB_STORE_NAME],"readwrite"),we=ie.objectStore(FS.DB_STORE_NAME),P=0,p=0,S=_.length;function z(){p==0?R():O()}_.forEach(function(K){var D=we.put(FS.analyzePath(K).object.contents,K);D.onsuccess=function(){P++,P+p==S&&z()},D.onerror=function(){p++,P+p==S&&z()}}),ie.onerror=O},w.onerror=O},loadFilesFromDB:function(_,R,O){R=R||function(){},O=O||function(){};var U=FS.indexedDB();try{var w=U.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return O(e)}w.onupgradeneeded=O,w.onsuccess=function(){var me=w.result;try{var ie=me.transaction([FS.DB_STORE_NAME],"readonly")}catch(K){O(K);return}var we=ie.objectStore(FS.DB_STORE_NAME),P=0,p=0,S=_.length;function z(){p==0?R():O()}_.forEach(function(K){var D=we.get(K);D.onsuccess=function(){FS.analyzePath(K).exists&&FS.unlink(K),FS.createDataFile(PATH.dirname(K),PATH.basename(K),D.result,!0,!0,!0),P++,P+p==S&&z()},D.onerror=function(){p++,P+p==S&&z()}}),ie.onerror=O},w.onerror=O}},SYSCALLS={DEFAULT_POLLMASK:5,mappings:{},umask:511,calculateAt:function(_,R){if(R[0]!=="/"){var O;if(_===-100)O=FS.cwd();else{var U=FS.getStream(_);if(!U)throw new FS.ErrnoError(ERRNO_CODES.EBADF);O=U.path}R=PATH.join2(O,R)}return R},doStat:function(_,R,O){try{var U=_(R)}catch(w){if(w&&w.node&&PATH.normalize(R)!==PATH.normalize(FS.getPath(w.node)))return-20;throw w}return HEAP32[O>>2]=U.dev,HEAP32[O+4>>2]=0,HEAP32[O+8>>2]=U.ino,HEAP32[O+12>>2]=U.mode,HEAP32[O+16>>2]=U.nlink,HEAP32[O+20>>2]=U.uid,HEAP32[O+24>>2]=U.gid,HEAP32[O+28>>2]=U.rdev,HEAP32[O+32>>2]=0,HEAP32[O+36>>2]=U.size,HEAP32[O+40>>2]=4096,HEAP32[O+44>>2]=U.blocks,HEAP32[O+48>>2]=U.atime.getTime()/1e3|0,HEAP32[O+52>>2]=0,HEAP32[O+56>>2]=U.mtime.getTime()/1e3|0,HEAP32[O+60>>2]=0,HEAP32[O+64>>2]=U.ctime.getTime()/1e3|0,HEAP32[O+68>>2]=0,HEAP32[O+72>>2]=U.ino,0},doMsync:function(_,R,O,U){var w=new Uint8Array(HEAPU8.subarray(_,_+O));FS.msync(R,w,0,O,U)},doMkdir:function(_,R){return _=PATH.normalize(_),_[_.length-1]==="/"&&(_=_.substr(0,_.length-1)),FS.mkdir(_,R,0),0},doMknod:function(_,R,O){switch(R&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-22}return FS.mknod(_,R,O),0},doReadlink:function(_,R,O){if(O<=0)return-22;var U=FS.readlink(_);return U=U.slice(0,Math.max(0,O)),writeStringToMemory(U,R,!0),U.length},doAccess:function(_,R){if(R&-8)return-22;var O,U=FS.lookupPath(_,{follow:!0});O=U.node;var w="";return R&4&&(w+="r"),R&2&&(w+="w"),R&1&&(w+="x"),w&&FS.nodePermissions(O,w)?-13:0},doDup:function(_,R,O){var U=FS.getStream(O);return U&&FS.close(U),FS.open(_,R,0,O,O).fd},doReadv:function(_,R,O,U){for(var w=0,e=0;e<O;e++){var me=HEAP32[R+e*8>>2],ie=HEAP32[R+(e*8+4)>>2],we=FS.read(_,HEAP8,me,ie,U);if(we<0)return-1;if(w+=we,we<ie)break}return w},doWritev:function(_,R,O,U){for(var w=0,e=0;e<O;e++){var me=HEAP32[R+e*8>>2],ie=HEAP32[R+(e*8+4)>>2],we=FS.write(_,HEAP8,me,ie,U);if(we<0)return-1;w+=we}return w},varargs:0,get:function(_){SYSCALLS.varargs+=4;var R=HEAP32[SYSCALLS.varargs-4>>2];return R},getStr:function(){var _=Pointer_stringify(SYSCALLS.get());return _},getStreamFromFD:function(){var _=FS.getStream(SYSCALLS.get());if(!_)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return _},getSocketFromFD:function(){var _=SOCKFS.getSocket(SYSCALLS.get());if(!_)throw new FS.ErrnoError(ERRNO_CODES.EBADF);return _},getSocketAddress:function(_){var R=SYSCALLS.get(),O=SYSCALLS.get();if(_&&R===0)return null;var U=__read_sockaddr(R,O);if(U.errno)throw new FS.ErrnoError(U.errno);return U.addr=DNS.lookup_addr(U.addr)||U.addr,U},get64:function(){var _=SYSCALLS.get(),R=SYSCALLS.get();return _>=0?assert(R===0):assert(R===-1),_},getZero:function(){assert(SYSCALLS.get()===0)}};function ___syscall5(_,R){SYSCALLS.varargs=R;try{var O=SYSCALLS.getStr(),U=SYSCALLS.get(),w=SYSCALLS.get(),e=FS.open(O,U,w);return e.fd}catch(me){return(typeof FS>"u"||!(me instanceof FS.ErrnoError))&&abort(me),-me.errno}}function _emscripten_memcpy_big(_,R,O){return HEAPU8.set(HEAPU8.subarray(R,R+O),_),_}Module._memcpy=_memcpy;function ___syscall6(_,R){SYSCALLS.varargs=R;try{var O=SYSCALLS.getStreamFromFD();return FS.close(O),0}catch(U){return(typeof FS>"u"||!(U instanceof FS.ErrnoError))&&abort(U),-U.errno}}var _cos=Math_cos;function _sbrk(_){var R=_sbrk;R.called||(DYNAMICTOP=alignMemoryPage(DYNAMICTOP),R.called=!0,assert(Runtime.dynamicAlloc),R.alloc=Runtime.dynamicAlloc,Runtime.dynamicAlloc=function(){abort("cannot dynamically allocate, sbrk now has control")});var O=DYNAMICTOP;if(_!=0){var U=R.alloc(_);if(!U)return-1>>>0}return O}function ___syscall54(_,R){SYSCALLS.varargs=R;try{var O=SYSCALLS.getStreamFromFD(),U=SYSCALLS.get();switch(U){case 21505:return O.tty?0:-ERRNO_CODES.ENOTTY;case 21506:return O.tty?0:-ERRNO_CODES.ENOTTY;case 21519:{if(!O.tty)return-ERRNO_CODES.ENOTTY;var w=SYSCALLS.get();return HEAP32[w>>2]=0,0}case 21520:return O.tty?-ERRNO_CODES.EINVAL:-ERRNO_CODES.ENOTTY;case 21531:{var w=SYSCALLS.get();return FS.ioctl(O,U,w)}default:abort("bad ioctl syscall "+U)}}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}var _ceilf=Math_ceil;function __embind_register_memory_view(_,R,O){var U=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],w=U[R];function e(me){me=me>>2;var ie=HEAPU32,we=ie[me],P=ie[me+1];return new w(ie.buffer,P,we)}O=readLatin1String(O),registerType(_,{name:O,fromWireType:e,argPackAdvance:8,readValueFromPointer:e},{ignoreDuplicateRegistrations:!0})}function _time(_){var R=Date.now()/1e3|0;return _&&(HEAP32[_>>2]=R),R}function _pthread_self(){return 0}function ___syscall140(_,R){SYSCALLS.varargs=R;try{var O=SYSCALLS.getStreamFromFD(),U=SYSCALLS.get(),w=SYSCALLS.get(),e=SYSCALLS.get(),me=SYSCALLS.get(),ie=w;return assert(U===0),FS.llseek(O,ie,me),HEAP32[e>>2]=O.position,O.getdents&&ie===0&&me===0&&(O.getdents=null),0}catch(we){return(typeof FS>"u"||!(we instanceof FS.ErrnoError))&&abort(we),-we.errno}}function ___syscall146(_,R){SYSCALLS.varargs=R;try{var O=SYSCALLS.getStreamFromFD(),U=SYSCALLS.get(),w=SYSCALLS.get();return SYSCALLS.doWritev(O,U,w)}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}function ___syscall221(_,R){SYSCALLS.varargs=R;try{var O=SYSCALLS.getStreamFromFD(),U=SYSCALLS.get();switch(U){case 0:{var w=SYSCALLS.get();if(w<0)return-ERRNO_CODES.EINVAL;var e;return e=FS.open(O.path,O.flags,0,w),e.fd}case 1:case 2:return 0;case 3:return O.flags;case 4:{var w=SYSCALLS.get();return O.flags|=w,0}case 12:case 12:{var w=SYSCALLS.get(),me=0;return HEAP16[w+me>>1]=2,0}case 13:case 14:case 13:case 14:return 0;case 16:case 8:return-ERRNO_CODES.EINVAL;case 9:return ___setErrNo(ERRNO_CODES.EINVAL),-1;default:return-ERRNO_CODES.EINVAL}}catch(ie){return(typeof FS>"u"||!(ie instanceof FS.ErrnoError))&&abort(ie),-ie.errno}}function ___syscall145(_,R){SYSCALLS.varargs=R;try{var O=SYSCALLS.getStreamFromFD(),U=SYSCALLS.get(),w=SYSCALLS.get();return SYSCALLS.doReadv(O,U,w)}catch(e){return(typeof FS>"u"||!(e instanceof FS.ErrnoError))&&abort(e),-e.errno}}var ___dso_handle=allocate(1,"i32*",ALLOC_STATIC);if(embind_init_charCodes(),BindingError=Module.BindingError=extendError(Error,"BindingError"),InternalError=Module.InternalError=extendError(Error,"InternalError"),init_emval(),UnboundTypeError=Module.UnboundTypeError=extendError(Error,"UnboundTypeError"),FS.staticInit(),__ATINIT__.unshift(function(){!Module.noFSInit&&!FS.init.initialized&&FS.init()}),__ATMAIN__.push(function(){FS.ignorePermissions=!1}),__ATEXIT__.push(function(){FS.quit()}),Module.FS_createFolder=FS.createFolder,Module.FS_createPath=FS.createPath,Module.FS_createDataFile=FS.createDataFile,Module.FS_createPreloadedFile=FS.createPreloadedFile,Module.FS_createLazyFile=FS.createLazyFile,Module.FS_createLink=FS.createLink,Module.FS_createDevice=FS.createDevice,Module.FS_unlink=FS.unlink,__ATINIT__.unshift(function(){}),__ATEXIT__.push(function(){}),ENVIRONMENT_IS_NODE){var fs=require$$1,NODEJS_PATH=require$$1;NODEFS.staticInit()}STACK_BASE=STACKTOP=Runtime.alignMemory(STATICTOP),staticSealed=!0,STACK_MAX=STACK_BASE+TOTAL_STACK,DYNAMIC_BASE=DYNAMICTOP=Runtime.alignMemory(STACK_MAX),assert(DYNAMIC_BASE<TOTAL_MEMORY,"TOTAL_MEMORY not big enough for stack");var cttz_i8=allocate([8,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,7,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,6,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,5,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0,4,0,1,0,2,0,1,0,3,0,1,0,2,0,1,0],"i8",ALLOC_DYNAMIC);function invoke_iiii(_,R,O,U){try{return Module.dynCall_iiii(_,R,O,U)}catch(w){if(typeof w!="number"&&w!=="longjmp")throw w;asm.setThrew(1,0)}}function invoke_viiiii(_,R,O,U,w,e){try{Module.dynCall_viiiii(_,R,O,U,w,e)}catch(me){if(typeof me!="number"&&me!=="longjmp")throw me;asm.setThrew(1,0)}}function invoke_dii(_,R,O){try{return Module.dynCall_dii(_,R,O)}catch(U){if(typeof U!="number"&&U!=="longjmp")throw U;asm.setThrew(1,0)}}function invoke_vid(_,R,O){try{Module.dynCall_vid(_,R,O)}catch(U){if(typeof U!="number"&&U!=="longjmp")throw U;asm.setThrew(1,0)}}function invoke_di(_,R){try{return Module.dynCall_di(_,R)}catch(O){if(typeof O!="number"&&O!=="longjmp")throw O;asm.setThrew(1,0)}}function invoke_i(_){try{return Module.dynCall_i(_)}catch(R){if(typeof R!="number"&&R!=="longjmp")throw R;asm.setThrew(1,0)}}function invoke_vi(_,R){try{Module.dynCall_vi(_,R)}catch(O){if(typeof O!="number"&&O!=="longjmp")throw O;asm.setThrew(1,0)}}function invoke_vii(_,R,O){try{Module.dynCall_vii(_,R,O)}catch(U){if(typeof U!="number"&&U!=="longjmp")throw U;asm.setThrew(1,0)}}function invoke_ii(_,R){try{return Module.dynCall_ii(_,R)}catch(O){if(typeof O!="number"&&O!=="longjmp")throw O;asm.setThrew(1,0)}}function invoke_viii(_,R,O,U){try{Module.dynCall_viii(_,R,O,U)}catch(w){if(typeof w!="number"&&w!=="longjmp")throw w;asm.setThrew(1,0)}}function invoke_v(_){try{Module.dynCall_v(_)}catch(R){if(typeof R!="number"&&R!=="longjmp")throw R;asm.setThrew(1,0)}}function invoke_viid(_,R,O,U){try{Module.dynCall_viid(_,R,O,U)}catch(w){if(typeof w!="number"&&w!=="longjmp")throw w;asm.setThrew(1,0)}}function invoke_iiiii(_,R,O,U,w){try{return Module.dynCall_iiiii(_,R,O,U,w)}catch(e){if(typeof e!="number"&&e!=="longjmp")throw e;asm.setThrew(1,0)}}function invoke_viiiiii(_,R,O,U,w,e,me){try{Module.dynCall_viiiiii(_,R,O,U,w,e,me)}catch(ie){if(typeof ie!="number"&&ie!=="longjmp")throw ie;asm.setThrew(1,0)}}function invoke_iii(_,R,O){try{return Module.dynCall_iii(_,R,O)}catch(U){if(typeof U!="number"&&U!=="longjmp")throw U;asm.setThrew(1,0)}}function invoke_viiii(_,R,O,U,w){try{Module.dynCall_viiii(_,R,O,U,w)}catch(e){if(typeof e!="number"&&e!=="longjmp")throw e;asm.setThrew(1,0)}}Module.asmGlobalArg={Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Float32Array,Float64Array,NaN:NaN,Infinity:1/0},Module.asmLibraryArg={abort,assert,invoke_iiii,invoke_viiiii,invoke_dii,invoke_vid,invoke_di,invoke_i,invoke_vi,invoke_vii,invoke_ii,invoke_viii,invoke_v,invoke_viid,invoke_iiiii,invoke_viiiiii,invoke_iii,invoke_viiii,_fabs,___syscall221,_sin,floatReadValueFromPointer,simpleReadValueFromPointer,integerReadValueFromPointer,__embind_register_memory_view,throwInternalError,get_first_emval,_abort,count_emval_handles,_pthread_cleanup_push,__embind_register_integer,extendError,___assert_fail,init_emval,__embind_register_void,___cxa_find_matching_catch,_ceilf,getShiftFromSize,__embind_register_function,embind_init_charCodes,_emscripten_asm_const_33,throwBindingError,___setErrNo,__emval_register,_sbrk,readLatin1String,___cxa_allocate_exception,_emscripten_memcpy_big,__embind_register_bool,___resumeException,__ZSt18uncaught_exceptionv,_sysconf,_embind_repr,__embind_register_std_wstring,createNamedFunction,__embind_register_emval,_cos,throwUnboundTypeError,_pthread_self,craftInvokerFunction,__emval_decref,_sqrt,__embind_register_float,makeLegalFunctionName,___syscall54,___unlock,heap32VectorToArray,_pthread_cleanup_pop,whenDependentTypesAreResolved,_exit,__embind_register_std_string,new_,___cxa_atexit,registerType,___cxa_throw,__exit,___lock,___syscall6,___syscall5,ensureOverloadTable,__embind_register_constant,_time,requireFunction,runDestructors,getTypeName,_atexit,___syscall140,exposePublicSymbol,_emscripten_asm_const_5,_emscripten_asm_const_4,replacePublicSymbol,___syscall145,___syscall146,STACKTOP,STACK_MAX,tempDoublePtr,ABORT,cttz_i8,___dso_handle};var asm=function(_,R,O){var U=new _.Int8Array(O),w=new _.Int16Array(O),e=new _.Int32Array(O),me=new _.Uint8Array(O),ie=new _.Uint16Array(O),we=new _.Uint32Array(O),P=new _.Float32Array(O),p=new _.Float64Array(O),S=R.STACKTOP|0,z=R.STACK_MAX|0,K=R.tempDoublePtr|0,D=R.ABORT|0,Q=R.cttz_i8|0,V=R.___dso_handle|0,T=0,F=0,N=0,k=0,G=_.NaN,Z=_.Infinity,ne=0,te=0,de=0,oe=0,ye=0,Me=0,Ne=0,Pe=0,Qe=0,De=0,ke=0,Ce=0,fe=0,Oe=0,Te=0,Ve=0,st=0,dt=0,Mt=0,Rt=_.Math.floor,Yt=_.Math.abs,zt=_.Math.sqrt,Ci=_.Math.pow,ci=_.Math.cos,Qi=_.Math.sin,sn=_.Math.tan,In=_.Math.acos,Xn=_.Math.asin,tr=_.Math.atan,Jn=_.Math.atan2,bn=_.Math.exp,cr=_.Math.log,Ir=_.Math.ceil,je=_.Math.imul,xs=_.Math.min,mr=_.Math.clz32,Wn=R.abort,Ms=R.assert,ts=R.invoke_iiii,Co=R.invoke_viiiii,Us=R.invoke_dii,Jr=R.invoke_vid,Ti=R.invoke_di,Ye=R.invoke_i,Xe=R.invoke_vi,lt=R.invoke_vii,tt=R.invoke_ii,ot=R.invoke_viii,ct=R.invoke_v,Ie=R.invoke_viid,ae=R.invoke_iiiii,ge=R.invoke_viiiiii,He=R.invoke_iii,Ze=R.invoke_viiii,ht=R._fabs,St=R.___syscall221,Di=R._sin,Wi=R.floatReadValueFromPointer,Oi=R.simpleReadValueFromPointer,Ui=R.integerReadValueFromPointer,Ji=R.__embind_register_memory_view,Ss=R.throwInternalError,kn=R.get_first_emval,Jt=R._abort,Dr=R.count_emval_handles,Pr=R._pthread_cleanup_push,Hs=R.__embind_register_integer,os=R.extendError,Vo=R.___assert_fail,Ps=R.init_emval,Fo=R.__embind_register_void,W0=R.___cxa_find_matching_catch,zo=R._ceilf,Rs=R.getShiftFromSize,ir=R.__embind_register_function,Ys=R.embind_init_charCodes,ca=R._emscripten_asm_const_33,L0=R.throwBindingError,al=R.___setErrNo,ua=R.__emval_register,$e=R._sbrk,At=R.readLatin1String,Pt=R.___cxa_allocate_exception,si=R._emscripten_memcpy_big,kt=R.__embind_register_bool,di=R.___resumeException,Ii=R.__ZSt18uncaught_exceptionv,pn=R._sysconf,nn=R._embind_repr,hi=R.__embind_register_std_wstring,Tn=R.createNamedFunction,Bn=R.__embind_register_emval,Dn=R._cos,ns=R.throwUnboundTypeError,Kn=R._pthread_self,or=R.craftInvokerFunction,br=R.__emval_decref,gs=R._sqrt,bs=R.__embind_register_float,rn=R.makeLegalFunctionName,$n=R.___syscall54,as=R.___unlock,Or=R.heap32VectorToArray,_e=R._pthread_cleanup_pop,Re=R.whenDependentTypesAreResolved,Fe=R._exit,We=R.__embind_register_std_string,it=R.new_,_t=R.___cxa_atexit,Dt=R.registerType,ei=R.___cxa_throw,pi=R.__exit,Ut=R.___lock,ni=R.___syscall6,Ri=R.___syscall5,an=R.ensureOverloadTable,mi=R.__embind_register_constant,On=R._time,nr=R.requireFunction,Qn=R.runDestructors,Ln=R.getTypeName,gr=R._atexit,Qr=R.___syscall140,ls=R.exposePublicSymbol,Vr=R._emscripten_asm_const_5,qs=R._emscripten_asm_const_4,Js=R.replacePublicSymbol,vs=R.___syscall145,Zs=R.___syscall146,Os=0;function $s(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(se=X+-1|0,(c|0)>1)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)u=u+(X<<1)|0,l=l+(X<<1)|0;l=n+1179664|0,u=X+1|0,ee=0-X|0,H=1-X|0,le=~X,B=a+4|0;e:do if((Ae|0)>1){Y=(se|0)>1,t=(e[n+4>>2]|0)+u|0,q=1,c=r+((a<<1)+2)|0,r=d+(u<<1)|0,u=0;t:for(;;){if(Y)for(M=1,E=c,A=u;;){do if((me[E>>0]|0|0)>(s|0))w[r>>1]=0,U[t>>0]=0,u=A;else{if(U[t>>0]=-1,u=w[r+(ee<<1)>>1]|0,u<<16>>16>0){w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(a=w[r+(H<<1)>>1]|0,d=a<<16>>16,u=w[r+(le<<1)>>1]|0,f=u<<16>>16,c=u<<16>>16>0,a<<16>>16<=0){if(c){w[r>>1]=u,u=f*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-3<<2)|0,(e[c>>2]|0)<(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=w[r+-2>>1]|0,u<<16>>16>0){if(w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(M|0)){u=A;break}e[u>>2]=M,u=A;break}else{if(u=A+1|0,(A|0)>32767)break t;w[r>>1]=u,e[n+1179664+(A<<2)>>2]=u<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=q,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=q,e[n+1310736+(A+6<<2)>>2]=q;break}}if(c){if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(c=w[r+-2>>1]|0,c<<16>>16<=0){w[r>>1]=a,u=d*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-4<<2)|0,(e[c>>2]|0)>(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=A}while(!1);if(M=M+1|0,c=E+2|0,r=r+2|0,t=t+1|0,(M|0)>=(se|0))break;E=c,A=u}if(q=q+1|0,(q|0)>=(Ae|0)){d=u,$=52;break e}else t=t+2|0,c=c+B|0,r=r+4|0}Ot(3,3904,ce),t=-1}else d=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function p0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(se=X+-1|0,(c|0)>1)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)u=u+(X<<1)|0,l=l+(X<<1)|0;l=n+1179664|0,u=X+1|0,ee=0-X|0,H=1-X|0,le=~X,B=(a<<1)+8|0;e:do if((Ae|0)>1){Y=(se|0)>1,t=(e[n+4>>2]|0)+u|0,q=1,c=r+((a<<2)+4)|0,r=d+(u<<1)|0,u=0;t:for(;;){if(Y)for(M=1,E=c,A=u;;){do if((me[E+1>>0]|0|0)>(s|0))w[r>>1]=0,U[t>>0]=0,u=A;else{if(U[t>>0]=-1,u=w[r+(ee<<1)>>1]|0,u<<16>>16>0){w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(a=w[r+(H<<1)>>1]|0,d=a<<16>>16,u=w[r+(le<<1)>>1]|0,f=u<<16>>16,c=u<<16>>16>0,a<<16>>16<=0){if(c){w[r>>1]=u,u=f*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-3<<2)|0,(e[c>>2]|0)<(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=w[r+-2>>1]|0,u<<16>>16>0){if(w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(M|0)){u=A;break}e[u>>2]=M,u=A;break}else{if(u=A+1|0,(A|0)>32767)break t;w[r>>1]=u,e[n+1179664+(A<<2)>>2]=u<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=q,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=q,e[n+1310736+(A+6<<2)>>2]=q;break}}if(c){if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(c=w[r+-2>>1]|0,c<<16>>16<=0){w[r>>1]=a,u=d*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-4<<2)|0,(e[c>>2]|0)>(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=A}while(!1);if(M=M+1|0,c=E+4|0,r=r+2|0,t=t+1|0,(M|0)>=(se|0))break;E=c,A=u}if(q=q+1|0,(q|0)>=(Ae|0)){d=u,$=52;break e}else t=t+2|0,c=c+B|0,r=r+4|0}Ot(3,3904,ce),t=-1}else d=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function D0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(se=X+-1|0,(c|0)>1)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)u=u+(X<<1)|0,l=l+(X<<1)|0;l=n+1179664|0,u=X+1|0,ee=0-X|0,H=1-X|0,le=~X,B=(a<<1)+8|0;e:do if((Ae|0)>1){Y=(se|0)>1,t=(e[n+4>>2]|0)+u|0,q=1,c=r+((a<<2)+4)|0,r=d+(u<<1)|0,u=0;t:for(;;){if(Y)for(M=1,E=c,A=u;;){do if((me[E>>0]|0|0)>(s|0))w[r>>1]=0,U[t>>0]=0,u=A;else{if(U[t>>0]=-1,u=w[r+(ee<<1)>>1]|0,u<<16>>16>0){w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(a=w[r+(H<<1)>>1]|0,d=a<<16>>16,u=w[r+(le<<1)>>1]|0,f=u<<16>>16,c=u<<16>>16>0,a<<16>>16<=0){if(c){w[r>>1]=u,u=f*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-3<<2)|0,(e[c>>2]|0)<(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=w[r+-2>>1]|0,u<<16>>16>0){if(w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(M|0)){u=A;break}e[u>>2]=M,u=A;break}else{if(u=A+1|0,(A|0)>32767)break t;w[r>>1]=u,e[n+1179664+(A<<2)>>2]=u<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=q,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=q,e[n+1310736+(A+6<<2)>>2]=q;break}}if(c){if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(c=w[r+-2>>1]|0,c<<16>>16<=0){w[r>>1]=a,u=d*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-4<<2)|0,(e[c>>2]|0)>(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=A}while(!1);if(M=M+1|0,c=E+4|0,r=r+2|0,t=t+1|0,(M|0)>=(se|0))break;E=c,A=u}if(q=q+1|0,(q|0)>=(Ae|0)){d=u,$=52;break e}else t=t+2|0,c=c+B|0,r=r+4|0}Ot(3,3904,ce),t=-1}else d=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function r0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t*3|0)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){do if(((me[M+1>>0]|0)+(me[M>>0]|0)+(me[M+2>>0]|0)|0)>(Ae|0))w[r>>1]=0,U[t>>0]=0,s=E;else{if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}while(!1);if(B=B+1|0,l=M+3|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+6|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function x0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<1)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){f=me[M>>0]|0,A=me[M+1>>0]|0;do if(((f&248)+10+(f<<5&224)+(A>>>3&28)+(A<<3&248)|0)>(Ae|0))w[r>>1]=0,U[t>>0]=0,s=E;else{if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}while(!1);if(B=B+1|0,l=M+2|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+4|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function A0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<2)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){do if(((me[M+1>>0]|0)+(me[M>>0]|0)+(me[M+2>>0]|0)|0)>(Ae|0))w[r>>1]=0,U[t>>0]=0,s=E;else{if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}while(!1);if(B=B+1|0,l=M+4|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+8|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function P0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<1)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){A=me[M>>0]|0;do if(((A&240)+24+(A<<4&240)+((me[M+1>>0]|0)&240)|0)>(Ae|0))w[r>>1]=0,U[t>>0]=0,s=E;else{if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}while(!1);if(B=B+1|0,l=M+2|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+4|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function ha(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<1)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){f=me[M>>0]|0,A=me[M+1>>0]|0;do if(((f&248)+12+(f<<5&224)+(A>>>3&24)+(A<<2&248)|0)>(Ae|0))w[r>>1]=0,U[t>>0]=0,s=E;else{if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}while(!1);if(B=B+1|0,l=M+2|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+4|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function da(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<2)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){do if(((me[M+2>>0]|0)+(me[M+1>>0]|0)+(me[M+3>>0]|0)|0)>(Ae|0))w[r>>1]=0,U[t>>0]=0,s=E;else{if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}while(!1);if(B=B+1|0,l=M+4|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+8|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function _o(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,d=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(Ae<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,Y=0-a|0,le=1-a|0,ee=~a;e:do if((ce|0)>1){q=(Ae|0)>1,f=(e[n+4>>2]|0)+t|0,se=1,r=r+t|0,d=d+(t<<1)|0,u=0;t:for(;;){if(q)for(t=f,H=1,B=r,M=u;;){do if((me[B>>0]|0|0)>(s|0))w[d>>1]=0,U[t>>0]=0,u=M;else{if(U[t>>0]=-1,u=w[d+(Y<<1)>>1]|0,u<<16>>16>0){w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(f=w[d+(le<<1)>>1]|0,A=f<<16>>16,u=w[d+(ee<<1)>>1]|0,E=u<<16>>16,r=u<<16>>16>0,f<<16>>16<=0){if(r){w[d>>1]=u,u=E*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-3<<2)|0,(e[r>>2]|0)<(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=w[d+-2>>1]|0,u<<16>>16>0){if(w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(H|0)){u=M;break}e[u>>2]=H,u=M;break}else{if(u=M+1|0,(M|0)>32767)break t;w[d>>1]=u,e[n+1179664+(M<<2)>>2]=u<<16>>16,M=M*7|0,e[n+1310736+(M<<2)>>2]=1,e[n+1310736+(M+1<<2)>>2]=H,e[n+1310736+(M+2<<2)>>2]=se,e[n+1310736+(M+3<<2)>>2]=H,e[n+1310736+(M+4<<2)>>2]=H,e[n+1310736+(M+5<<2)>>2]=se,e[n+1310736+(M+6<<2)>>2]=se;break}}if(r){if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+(E+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(r=w[d+-2>>1]|0,r<<16>>16<=0){w[d>>1]=f,u=A*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-4<<2)|0,(e[r>>2]|0)>(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+se,u=M}while(!1);if(H=H+1|0,r=B+1|0,d=d+2|0,t=t+1|0,(H|0)>=(Ae|0))break;B=r,M=u}else t=f;if(se=se+1|0,(se|0)>=(ce|0)){A=u,X=52;break e}else f=t+2|0,r=r+2|0,d=d+4|0}Ot(3,3904,$),t=-1}else A=0,X=52;while(!1);if((X|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function M0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,d=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(Ae<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,Y=0-a|0,le=1-a|0,ee=~a;e:do if((ce|0)>1){q=(Ae|0)>1,f=(e[n+4>>2]|0)+t|0,se=1,r=r+(t<<1)|0,d=d+(t<<1)|0,u=0;t:for(;;){if(q)for(t=f,H=1,B=r,M=u;;){do if((me[B+1>>0]|0|0)>(s|0))w[d>>1]=0,U[t>>0]=0,u=M;else{if(U[t>>0]=-1,u=w[d+(Y<<1)>>1]|0,u<<16>>16>0){w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(f=w[d+(le<<1)>>1]|0,A=f<<16>>16,u=w[d+(ee<<1)>>1]|0,E=u<<16>>16,r=u<<16>>16>0,f<<16>>16<=0){if(r){w[d>>1]=u,u=E*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-3<<2)|0,(e[r>>2]|0)<(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=w[d+-2>>1]|0,u<<16>>16>0){if(w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(H|0)){u=M;break}e[u>>2]=H,u=M;break}else{if(u=M+1|0,(M|0)>32767)break t;w[d>>1]=u,e[n+1179664+(M<<2)>>2]=u<<16>>16,M=M*7|0,e[n+1310736+(M<<2)>>2]=1,e[n+1310736+(M+1<<2)>>2]=H,e[n+1310736+(M+2<<2)>>2]=se,e[n+1310736+(M+3<<2)>>2]=H,e[n+1310736+(M+4<<2)>>2]=H,e[n+1310736+(M+5<<2)>>2]=se,e[n+1310736+(M+6<<2)>>2]=se;break}}if(r){if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+(E+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(r=w[d+-2>>1]|0,r<<16>>16<=0){w[d>>1]=f,u=A*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-4<<2)|0,(e[r>>2]|0)>(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+se,u=M}while(!1);if(H=H+1|0,r=B+2|0,d=d+2|0,t=t+1|0,(H|0)>=(Ae|0))break;B=r,M=u}else t=f;if(se=se+1|0,(se|0)>=(ce|0)){A=u,X=52;break e}else f=t+2|0,r=r+4|0,d=d+4|0}Ot(3,3904,$),t=-1}else A=0,X=52;while(!1);if((X|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function co(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,d=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(Ae<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,Y=0-a|0,le=1-a|0,ee=~a;e:do if((ce|0)>1){q=(Ae|0)>1,f=(e[n+4>>2]|0)+t|0,se=1,r=r+(t<<1)|0,d=d+(t<<1)|0,u=0;t:for(;;){if(q)for(t=f,H=1,B=r,M=u;;){do if((me[B>>0]|0|0)>(s|0))w[d>>1]=0,U[t>>0]=0,u=M;else{if(U[t>>0]=-1,u=w[d+(Y<<1)>>1]|0,u<<16>>16>0){w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(f=w[d+(le<<1)>>1]|0,A=f<<16>>16,u=w[d+(ee<<1)>>1]|0,E=u<<16>>16,r=u<<16>>16>0,f<<16>>16<=0){if(r){w[d>>1]=u,u=E*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-3<<2)|0,(e[r>>2]|0)<(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=w[d+-2>>1]|0,u<<16>>16>0){if(w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(H|0)){u=M;break}e[u>>2]=H,u=M;break}else{if(u=M+1|0,(M|0)>32767)break t;w[d>>1]=u,e[n+1179664+(M<<2)>>2]=u<<16>>16,M=M*7|0,e[n+1310736+(M<<2)>>2]=1,e[n+1310736+(M+1<<2)>>2]=H,e[n+1310736+(M+2<<2)>>2]=se,e[n+1310736+(M+3<<2)>>2]=H,e[n+1310736+(M+4<<2)>>2]=H,e[n+1310736+(M+5<<2)>>2]=se,e[n+1310736+(M+6<<2)>>2]=se;break}}if(r){if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+(E+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(r=w[d+-2>>1]|0,r<<16>>16<=0){w[d>>1]=f,u=A*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-4<<2)|0,(e[r>>2]|0)>(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+se,u=M}while(!1);if(H=H+1|0,r=B+2|0,d=d+2|0,t=t+1|0,(H|0)>=(Ae|0))break;B=r,M=u}else t=f;if(se=se+1|0,(se|0)>=(ce|0)){A=u,X=52;break e}else f=t+2|0,r=r+4|0,d=d+4|0}Ot(3,3904,$),t=-1}else A=0,X=52;while(!1);if((X|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function Fr(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,d=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(Ae<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,u=a+1|0,Y=0-a|0,le=1-a|0,ee=~a;e:do if((ce|0)>1){q=(Ae|0)>1,t=(e[n+4>>2]|0)+u|0,se=1,r=r+u|0,d=d+(u<<1)|0,s=s+u|0,u=0;t:for(;;){if(q)for(H=1,B=r,M=u;;){do if((me[B>>0]|0)>(me[s>>0]|0))w[d>>1]=0,U[t>>0]=0,u=M;else{if(U[t>>0]=-1,u=w[d+(Y<<1)>>1]|0,u<<16>>16>0){w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(f=w[d+(le<<1)>>1]|0,A=f<<16>>16,u=w[d+(ee<<1)>>1]|0,E=u<<16>>16,r=u<<16>>16>0,f<<16>>16<=0){if(r){w[d>>1]=u,u=E*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-3<<2)|0,(e[r>>2]|0)<(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=w[d+-2>>1]|0,u<<16>>16>0){if(w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(H|0)){u=M;break}e[u>>2]=H,u=M;break}else{if(u=M+1|0,(M|0)>32767)break t;w[d>>1]=u,e[n+1179664+(M<<2)>>2]=u<<16>>16,M=M*7|0,e[n+1310736+(M<<2)>>2]=1,e[n+1310736+(M+1<<2)>>2]=H,e[n+1310736+(M+2<<2)>>2]=se,e[n+1310736+(M+3<<2)>>2]=H,e[n+1310736+(M+4<<2)>>2]=H,e[n+1310736+(M+5<<2)>>2]=se,e[n+1310736+(M+6<<2)>>2]=se;break}}if(r){if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+(E+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(r=w[d+-2>>1]|0,r<<16>>16<=0){w[d>>1]=f,u=A*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-4<<2)|0,(e[r>>2]|0)>(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+se,u=M}while(!1);if(H=H+1|0,r=B+1|0,s=s+1|0,d=d+2|0,t=t+1|0,(H|0)>=(Ae|0))break;B=r,M=u}if(se=se+1|0,(se|0)>=(ce|0)){f=u,X=52;break e}else t=t+2|0,r=r+2|0,d=d+4|0,s=s+2|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(d=n+12|0,(f|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(f|0);)r=r+1|0,l=l+4|0;if(s=n+8|0,t=u+-1|0,e[s>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((f|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(f|0))}if((e[s>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function xo(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a*3|0)+12|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a*6|0)+6)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){do if(((me[A+1>>0]|0)+(me[A>>0]|0)+(me[A+2>>0]|0)|0)>(q|0)){if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}else w[c>>1]=0,U[t>>0]=0,s=f;while(!1);if(E=E+1|0,l=A+6|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function ll(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<1)+8|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<2)+4)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){a=me[A>>0]|0,d=me[A+1>>0]|0;do if(((a&248)+10+(a<<5&224)+(d>>>3&28)+(d<<3&248)|0)>(q|0)){if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}else w[c>>1]=0,U[t>>0]=0,s=f;while(!1);if(E=E+1|0,l=A+4|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function fa(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<2)+16|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<3)+8)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){do if(((me[A+1>>0]|0)+(me[A>>0]|0)+(me[A+2>>0]|0)|0)>(q|0)){if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}else w[c>>1]=0,U[t>>0]=0,s=f;while(!1);if(E=E+1|0,l=A+8|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function cl(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<1)+8|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<2)+4)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){d=me[A>>0]|0;do if(((d&240)+24+(d<<4&240)+((me[A+1>>0]|0)&240)|0)>(q|0)){if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}else w[c>>1]=0,U[t>>0]=0,s=f;while(!1);if(E=E+1|0,l=A+4|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function $r(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<1)+8|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<2)+4)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){a=me[A>>0]|0,d=me[A+1>>0]|0;do if(((a&248)+12+(a<<5&224)+(d>>>3&24)+(d<<2&248)|0)>(q|0)){if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}else w[c>>1]=0,U[t>>0]=0,s=f;while(!1);if(E=E+1|0,l=A+4|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function pa(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<2)+16|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<3)+8)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){do if(((me[A+2>>0]|0)+(me[A+1>>0]|0)+(me[A+3>>0]|0)|0)>(q|0)){if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}else w[c>>1]=0,U[t>>0]=0,s=f;while(!1);if(E=E+1|0,l=A+8|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function ul(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(se=X+-1|0,(c|0)>1)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)u=u+(X<<1)|0,l=l+(X<<1)|0;l=n+1179664|0,u=X+1|0,ee=0-X|0,H=1-X|0,le=~X,B=a+4|0;e:do if((Ae|0)>1){Y=(se|0)>1,t=(e[n+4>>2]|0)+u|0,q=1,c=r+((a<<1)+2)|0,r=d+(u<<1)|0,u=0;t:for(;;){if(Y)for(M=1,E=c,A=u;;){do if((me[E>>0]|0|0)>(s|0)){if(U[t>>0]=-1,u=w[r+(ee<<1)>>1]|0,u<<16>>16>0){w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(a=w[r+(H<<1)>>1]|0,d=a<<16>>16,u=w[r+(le<<1)>>1]|0,f=u<<16>>16,c=u<<16>>16>0,a<<16>>16<=0){if(c){w[r>>1]=u,u=f*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-3<<2)|0,(e[c>>2]|0)<(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=w[r+-2>>1]|0,u<<16>>16>0){if(w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(M|0)){u=A;break}e[u>>2]=M,u=A;break}else{if(u=A+1|0,(A|0)>32767)break t;w[r>>1]=u,e[n+1179664+(A<<2)>>2]=u<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=q,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=q,e[n+1310736+(A+6<<2)>>2]=q;break}}if(c){if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(c=w[r+-2>>1]|0,c<<16>>16<=0){w[r>>1]=a,u=d*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-4<<2)|0,(e[c>>2]|0)>(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=A}else w[r>>1]=0,U[t>>0]=0,u=A;while(!1);if(M=M+1|0,c=E+2|0,r=r+2|0,t=t+1|0,(M|0)>=(se|0))break;E=c,A=u}if(q=q+1|0,(q|0)>=(Ae|0)){d=u,$=52;break e}else t=t+2|0,c=c+B|0,r=r+4|0}Ot(3,3904,ce),t=-1}else d=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function s0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(se=X+-1|0,(c|0)>1)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)u=u+(X<<1)|0,l=l+(X<<1)|0;l=n+1179664|0,u=X+1|0,ee=0-X|0,H=1-X|0,le=~X,B=(a<<1)+8|0;e:do if((Ae|0)>1){Y=(se|0)>1,t=(e[n+4>>2]|0)+u|0,q=1,c=r+((a<<2)+4)|0,r=d+(u<<1)|0,u=0;t:for(;;){if(Y)for(M=1,E=c,A=u;;){do if((me[E+1>>0]|0|0)>(s|0)){if(U[t>>0]=-1,u=w[r+(ee<<1)>>1]|0,u<<16>>16>0){w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(a=w[r+(H<<1)>>1]|0,d=a<<16>>16,u=w[r+(le<<1)>>1]|0,f=u<<16>>16,c=u<<16>>16>0,a<<16>>16<=0){if(c){w[r>>1]=u,u=f*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-3<<2)|0,(e[c>>2]|0)<(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=w[r+-2>>1]|0,u<<16>>16>0){if(w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(M|0)){u=A;break}e[u>>2]=M,u=A;break}else{if(u=A+1|0,(A|0)>32767)break t;w[r>>1]=u,e[n+1179664+(A<<2)>>2]=u<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=q,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=q,e[n+1310736+(A+6<<2)>>2]=q;break}}if(c){if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(c=w[r+-2>>1]|0,c<<16>>16<=0){w[r>>1]=a,u=d*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-4<<2)|0,(e[c>>2]|0)>(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=A}else w[r>>1]=0,U[t>>0]=0,u=A;while(!1);if(M=M+1|0,c=E+4|0,r=r+2|0,t=t+1|0,(M|0)>=(se|0))break;E=c,A=u}if(q=q+1|0,(q|0)>=(Ae|0)){d=u,$=52;break e}else t=t+2|0,c=c+B|0,r=r+4|0}Ot(3,3904,ce),t=-1}else d=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function m0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(se=X+-1|0,(c|0)>1)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)u=u+(X<<1)|0,l=l+(X<<1)|0;l=n+1179664|0,u=X+1|0,ee=0-X|0,H=1-X|0,le=~X,B=(a<<1)+8|0;e:do if((Ae|0)>1){Y=(se|0)>1,t=(e[n+4>>2]|0)+u|0,q=1,c=r+((a<<2)+4)|0,r=d+(u<<1)|0,u=0;t:for(;;){if(Y)for(M=1,E=c,A=u;;){do if((me[E>>0]|0|0)>(s|0)){if(U[t>>0]=-1,u=w[r+(ee<<1)>>1]|0,u<<16>>16>0){w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(a=w[r+(H<<1)>>1]|0,d=a<<16>>16,u=w[r+(le<<1)>>1]|0,f=u<<16>>16,c=u<<16>>16>0,a<<16>>16<=0){if(c){w[r>>1]=u,u=f*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-3<<2)|0,(e[c>>2]|0)<(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=w[r+-2>>1]|0,u<<16>>16>0){if(w[r>>1]=u,u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(M|0)){u=A;break}e[u>>2]=M,u=A;break}else{if(u=A+1|0,(A|0)>32767)break t;w[r>>1]=u,e[n+1179664+(A<<2)>>2]=u<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=q,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=q,e[n+1310736+(A+6<<2)>>2]=q;break}}if(c){if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(u+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+q,e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(c=w[r+-2>>1]|0,c<<16>>16<=0){w[r>>1]=a,u=d*7|0,c=n+1310736+(u+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(u+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+M,c=n+1310736+(u+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+q,c=n+1310736+(u+-4<<2)|0,(e[c>>2]|0)>(M|0)&&(e[c>>2]=M),e[n+1310736+(u+-1<<2)>>2]=q,u=A;break}if(u=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(u|0)>(d|0))if(w[r>>1]=d,(A|0)>0)for(c=0,a=l;;)if((e[a>>2]|0)==(u|0)&&(e[a>>2]=d),c=c+1|0,(c|0)>=(A|0)){u=d;break}else a=a+4|0;else u=d;else if(w[r>>1]=u,(u|0)<(d|0)&(A|0)>0)for(c=0,a=l;(e[a>>2]|0)==(d|0)&&(e[a>>2]=u),c=c+1|0,!((c|0)>=(A|0));)a=a+4|0;u=(u<<16>>16)*7|0,f=n+1310736+(u+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(u+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=A}else w[r>>1]=0,U[t>>0]=0,u=A;while(!1);if(M=M+1|0,c=E+4|0,r=r+2|0,t=t+1|0,(M|0)>=(se|0))break;E=c,A=u}if(q=q+1|0,(q|0)>=(Ae|0)){d=u,$=52;break e}else t=t+2|0,c=c+B|0,r=r+4|0}Ot(3,3904,ce),t=-1}else d=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function E1(r){r=r|0;var a=0;return a=S,S=S+r|0,S=S+15&-16,a|0}function Ml(){return S|0}function $c(r){r=r|0,S=r}function y1(r,a){r=r|0,a=a|0,S=r,z=a}function w1(r,a){r=r|0,a=a|0,T||(T=r,F=a)}function Kl(r){r=r|0,U[K>>0]=U[r>>0],U[K+1>>0]=U[r+1>>0],U[K+2>>0]=U[r+2>>0],U[K+3>>0]=U[r+3>>0]}function C1(r){r=r|0,U[K>>0]=U[r>>0],U[K+1>>0]=U[r+1>>0],U[K+2>>0]=U[r+2>>0],U[K+3>>0]=U[r+3>>0],U[K+4>>0]=U[r+4>>0],U[K+5>>0]=U[r+5>>0],U[K+6>>0]=U[r+6>>0],U[K+7>>0]=U[r+7>>0]}function ec(r){r=r|0,De=r}function jc(){return De|0}function eu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a*3|0)+12|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a*6|0)+6)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){do if(((me[s+1>>0]|0)+(me[s>>0]|0)+(me[s+2>>0]|0)|0)>(Y|0))w[f>>1]=0,t=d;else{if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}while(!1);if(A=A+1|0,s=s+6|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function tu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<1)+8|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<2)+4)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){r=me[s>>0]|0,a=me[s+1>>0]|0;do if(((r&248)+10+(r<<5&224)+(a>>>3&28)+(a<<3&248)|0)>(Y|0))w[f>>1]=0,t=d;else{if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}while(!1);if(A=A+1|0,s=s+4|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function _1(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<2)+16|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<3)+8)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){do if(((me[s+1>>0]|0)+(me[s>>0]|0)+(me[s+2>>0]|0)|0)>(Y|0))w[f>>1]=0,t=d;else{if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}while(!1);if(A=A+1|0,s=s+8|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function iu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<1)+8|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<2)+4)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){a=me[s>>0]|0;do if(((a&240)+24+(a<<4&240)+((me[s+1>>0]|0)&240)|0)>(Y|0))w[f>>1]=0,t=d;else{if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}while(!1);if(A=A+1|0,s=s+4|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function x1(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<1)+8|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<2)+4)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){r=me[s>>0]|0,a=me[s+1>>0]|0;do if(((r&248)+12+(r<<5&224)+(a>>>3&24)+(a<<2&248)|0)>(Y|0))w[f>>1]=0,t=d;else{if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}while(!1);if(A=A+1|0,s=s+4|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function tc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<2)+16|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<3)+8)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){do if(((me[s+2>>0]|0)+(me[s+1>>0]|0)+(me[s+3>>0]|0)|0)>(Y|0))w[f>>1]=0,t=d;else{if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}while(!1);if(A=A+1|0,s=s+8|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function ic(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(q=$+-1|0,(c|0)>1)for(t=0,u=d,l=d+(q<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+($<<1)|0,l=l+($<<1)|0;l=n+1179664|0,le=0-$|0,B=1-$|0,H=~$,M=a+4|0;e:do if((se|0)>1){ee=(q|0)>1,Y=1,u=r+((a<<1)+2)|0,c=d+($+1<<1)|0,t=0;t:for(;;){if(ee)for(E=1,A=c,f=t;;){do if((me[u>>0]|0|0)>(s|0))w[A>>1]=0,t=f;else{if(t=w[A+(le<<1)>>1]|0,t<<16>>16>0){w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(r=w[A+(B<<1)>>1]|0,a=r<<16>>16,t=w[A+(H<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,r<<16>>16<=0){if(c){w[A>>1]=t,t=d*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=w[A+-2>>1]|0,t<<16>>16>0){if(w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(E|0)){t=f;break}e[t>>2]=E,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;w[A>>1]=t,e[n+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(c){if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(c=w[A+-2>>1]|0,c<<16>>16<=0){w[A>>1]=r,t=a*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=f}while(!1);if(E=E+1|0,u=u+2|0,c=A+2|0,(E|0)>=(q|0))break;A=c,f=t}if(Y=Y+1|0,(Y|0)>=(se|0)){d=t,ce=52;break e}else u=u+M|0,c=c+4|0}Ot(3,3904,Ae),t=-1}else d=0,ce=52;while(!1);if((ce|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function nc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(q=$+-1|0,(c|0)>1)for(t=0,u=d,l=d+(q<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+($<<1)|0,l=l+($<<1)|0;l=n+1179664|0,le=0-$|0,B=1-$|0,H=~$,M=(a<<1)+8|0;e:do if((se|0)>1){ee=(q|0)>1,Y=1,u=r+((a<<2)+4)|0,c=d+($+1<<1)|0,t=0;t:for(;;){if(ee)for(E=1,A=c,f=t;;){do if((me[u+1>>0]|0|0)>(s|0))w[A>>1]=0,t=f;else{if(t=w[A+(le<<1)>>1]|0,t<<16>>16>0){w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(r=w[A+(B<<1)>>1]|0,a=r<<16>>16,t=w[A+(H<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,r<<16>>16<=0){if(c){w[A>>1]=t,t=d*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=w[A+-2>>1]|0,t<<16>>16>0){if(w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(E|0)){t=f;break}e[t>>2]=E,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;w[A>>1]=t,e[n+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(c){if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(c=w[A+-2>>1]|0,c<<16>>16<=0){w[A>>1]=r,t=a*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=f}while(!1);if(E=E+1|0,u=u+4|0,c=A+2|0,(E|0)>=(q|0))break;A=c,f=t}if(Y=Y+1|0,(Y|0)>=(se|0)){d=t,ce=52;break e}else u=u+M|0,c=c+4|0}Ot(3,3904,Ae),t=-1}else d=0,ce=52;while(!1);if((ce|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function Xl(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(q=$+-1|0,(c|0)>1)for(t=0,u=d,l=d+(q<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+($<<1)|0,l=l+($<<1)|0;l=n+1179664|0,le=0-$|0,B=1-$|0,H=~$,M=(a<<1)+8|0;e:do if((se|0)>1){ee=(q|0)>1,Y=1,u=r+((a<<2)+4)|0,c=d+($+1<<1)|0,t=0;t:for(;;){if(ee)for(E=1,A=c,f=t;;){do if((me[u>>0]|0|0)>(s|0))w[A>>1]=0,t=f;else{if(t=w[A+(le<<1)>>1]|0,t<<16>>16>0){w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(r=w[A+(B<<1)>>1]|0,a=r<<16>>16,t=w[A+(H<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,r<<16>>16<=0){if(c){w[A>>1]=t,t=d*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=w[A+-2>>1]|0,t<<16>>16>0){if(w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(E|0)){t=f;break}e[t>>2]=E,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;w[A>>1]=t,e[n+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(c){if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(c=w[A+-2>>1]|0,c<<16>>16<=0){w[A>>1]=r,t=a*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=f}while(!1);if(E=E+1|0,u=u+4|0,c=A+2|0,(E|0)>=(q|0))break;A=c,f=t}if(Y=Y+1|0,(Y|0)>=(se|0)){d=t,ce=52;break e}else u=u+M|0,c=c+4|0}Ot(3,3904,Ae),t=-1}else d=0,ce=52;while(!1);if((ce|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function rc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t*3|0)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){do if(((me[s+1>>0]|0)+(me[s>>0]|0)+(me[s+2>>0]|0)|0)>(se|0))w[E>>1]=0,t=A;else{if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}while(!1);if(M=M+1|0,s=s+3|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+6|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function sc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){d=me[s>>0]|0,f=me[s+1>>0]|0;do if(((d&248)+10+(d<<5&224)+(f>>>3&28)+(f<<3&248)|0)>(se|0))w[E>>1]=0,t=A;else{if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}while(!1);if(M=M+1|0,s=s+2|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+4|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function oc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<2)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){do if(((me[s+1>>0]|0)+(me[s>>0]|0)+(me[s+2>>0]|0)|0)>(se|0))w[E>>1]=0,t=A;else{if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}while(!1);if(M=M+1|0,s=s+4|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+8|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function ac(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){f=me[s>>0]|0;do if(((f&240)+24+(f<<4&240)+((me[s+1>>0]|0)&240)|0)>(se|0))w[E>>1]=0,t=A;else{if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}while(!1);if(M=M+1|0,s=s+2|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+4|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function Ga(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){d=me[s>>0]|0,f=me[s+1>>0]|0;do if(((d&248)+12+(d<<5&224)+(f>>>3&24)+(f<<2&248)|0)>(se|0))w[E>>1]=0,t=A;else{if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}while(!1);if(M=M+1|0,s=s+2|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+4|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function nu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<2)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){do if(((me[s+2>>0]|0)+(me[s+1>>0]|0)+(me[s+3>>0]|0)|0)>(se|0))w[E>>1]=0,t=A;else{if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}while(!1);if(M=M+1|0,s=s+4|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+8|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function ru(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((Ae|0)>1){Y=(se|0)>1,q=1,u=r+t|0,r=d+(t<<1)|0,t=0;t:for(;;){if(Y)for(B=1,M=r,E=t;;){do if((me[u>>0]|0|0)>(s|0))w[M>>1]=0,t=E;else{if(t=w[M+(ee<<1)>>1]|0,t<<16>>16>0){w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(d=w[M+(H<<1)>>1]|0,f=d<<16>>16,t=w[M+(le<<1)>>1]|0,A=t<<16>>16,r=t<<16>>16>0,d<<16>>16<=0){if(r){w[M>>1]=t,t=A*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-3<<2)|0,(e[r>>2]|0)<(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16>0){if(w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(B|0)){t=E;break}e[t>>2]=B,t=E;break}else{if(t=E+1|0,(E|0)>32767)break t;w[M>>1]=t,e[n+1179664+(E<<2)>>2]=t<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(r){if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(t|0)>(f|0))if(w[M>>1]=f,(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;else if(w[M>>1]=t,(t|0)<(f|0)&(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16<=0){w[M>>1]=d,t=f*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-4<<2)|0,(e[r>>2]|0)>(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(f=e[n+1179664+(f+-1<<2)>>2]|0,t=e[n+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(w[M>>1]=t,(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0}else if(w[M>>1]=f,(f|0)<(t|0)&(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=E}while(!1);if(B=B+1|0,u=u+1|0,r=M+2|0,(B|0)>=(se|0))break;M=r,E=t}if(q=q+1|0,(q|0)>=(Ae|0)){A=t,$=52;break e}else u=u+2|0,r=r+4|0}Ot(3,3904,ce),t=-1}else A=0,$=52;while(!1);if(($|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function su(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((Ae|0)>1){Y=(se|0)>1,q=1,u=r+(t<<1)|0,r=d+(t<<1)|0,t=0;t:for(;;){if(Y)for(B=1,M=r,E=t;;){do if((me[u+1>>0]|0|0)>(s|0))w[M>>1]=0,t=E;else{if(t=w[M+(ee<<1)>>1]|0,t<<16>>16>0){w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(d=w[M+(H<<1)>>1]|0,f=d<<16>>16,t=w[M+(le<<1)>>1]|0,A=t<<16>>16,r=t<<16>>16>0,d<<16>>16<=0){if(r){w[M>>1]=t,t=A*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-3<<2)|0,(e[r>>2]|0)<(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16>0){if(w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(B|0)){t=E;break}e[t>>2]=B,t=E;break}else{if(t=E+1|0,(E|0)>32767)break t;w[M>>1]=t,e[n+1179664+(E<<2)>>2]=t<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(r){if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(t|0)>(f|0))if(w[M>>1]=f,(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;else if(w[M>>1]=t,(t|0)<(f|0)&(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(r=w[M+-2>>1]|0,r<<16>>16<=0){w[M>>1]=d,t=f*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-4<<2)|0,(e[r>>2]|0)>(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(t|0)>(f|0))if(w[M>>1]=f,(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;else if(w[M>>1]=t,(t|0)<(f|0)&(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=E}while(!1);if(B=B+1|0,u=u+2|0,r=M+2|0,(B|0)>=(se|0))break;M=r,E=t}if(q=q+1|0,(q|0)>=(Ae|0)){A=t,$=52;break e}else u=u+4|0,r=r+4|0}Ot(3,3904,ce),t=-1}else A=0,$=52;while(!1);if(($|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function lc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((Ae|0)>1){Y=(se|0)>1,q=1,u=r+(t<<1)|0,r=d+(t<<1)|0,t=0;t:for(;;){if(Y)for(B=1,M=r,E=t;;){do if((me[u>>0]|0|0)>(s|0))w[M>>1]=0,t=E;else{if(t=w[M+(ee<<1)>>1]|0,t<<16>>16>0){w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(d=w[M+(H<<1)>>1]|0,f=d<<16>>16,t=w[M+(le<<1)>>1]|0,A=t<<16>>16,r=t<<16>>16>0,d<<16>>16<=0){if(r){w[M>>1]=t,t=A*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-3<<2)|0,(e[r>>2]|0)<(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16>0){if(w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(B|0)){t=E;break}e[t>>2]=B,t=E;break}else{if(t=E+1|0,(E|0)>32767)break t;w[M>>1]=t,e[n+1179664+(E<<2)>>2]=t<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(r){if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(t|0)>(f|0))if(w[M>>1]=f,(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;else if(w[M>>1]=t,(t|0)<(f|0)&(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16<=0){w[M>>1]=d,t=f*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-4<<2)|0,(e[r>>2]|0)>(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(f=e[n+1179664+(f+-1<<2)>>2]|0,t=e[n+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(w[M>>1]=t,(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0}else if(w[M>>1]=f,(f|0)<(t|0)&(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=E}while(!1);if(B=B+1|0,u=u+2|0,r=M+2|0,(B|0)>=(se|0))break;M=r,E=t}if(q=q+1|0,(q|0)>=(Ae|0)){A=t,$=52;break e}else u=u+4|0,r=r+4|0}Ot(3,3904,ce),t=-1}else A=0,$=52;while(!1);if(($|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function ou(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((Ae|0)>1){Y=(se|0)>1,q=1,u=r+t|0,r=d+(t<<1)|0,d=s+t|0,t=0;t:for(;;){if(Y)for(B=1,M=u,E=t;;){do if((me[M>>0]|0)>(me[d>>0]|0))w[r>>1]=0,t=E;else{if(t=w[r+(ee<<1)>>1]|0,t<<16>>16>0){w[r>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(s=w[r+(H<<1)>>1]|0,f=s<<16>>16,t=w[r+(le<<1)>>1]|0,A=t<<16>>16,u=t<<16>>16>0,s<<16>>16<=0){if(u){w[r>>1]=t,t=A*7|0,u=n+1310736+(t+-7<<2)|0,e[u>>2]=(e[u>>2]|0)+1,u=n+1310736+(t+-6<<2)|0,e[u>>2]=(e[u>>2]|0)+B,u=n+1310736+(t+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=n+1310736+(t+-3<<2)|0,(e[u>>2]|0)<(B|0)&&(e[u>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[r+-2>>1]|0,t<<16>>16>0){if(w[r>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(B|0)){t=E;break}e[t>>2]=B,t=E;break}else{if(t=E+1|0,(E|0)>32767)break t;w[r>>1]=t,e[n+1179664+(E<<2)>>2]=t<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(u){if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(t|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(u=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=f),u=u+1|0,(u|0)>=(E|0)){t=f;break}else s=s+4|0;else t=f;else if(w[r>>1]=t,(t|0)<(f|0)&(E|0)>0)for(u=0,s=l;(e[s>>2]|0)==(f|0)&&(e[s>>2]=t),u=u+1|0,!((u|0)>=(E|0));)s=s+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[r+-2>>1]|0,t<<16>>16<=0){w[r>>1]=s,t=f*7|0,u=n+1310736+(t+-7<<2)|0,e[u>>2]=(e[u>>2]|0)+1,u=n+1310736+(t+-6<<2)|0,e[u>>2]=(e[u>>2]|0)+B,u=n+1310736+(t+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=n+1310736+(t+-4<<2)|0,(e[u>>2]|0)>(B|0)&&(e[u>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(f=e[n+1179664+(f+-1<<2)>>2]|0,t=e[n+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(w[r>>1]=t,(E|0)>0)for(u=0,s=l;(e[s>>2]|0)==(f|0)&&(e[s>>2]=t),u=u+1|0,!((u|0)>=(E|0));)s=s+4|0}else if(w[r>>1]=f,(f|0)<(t|0)&(E|0)>0)for(u=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=f),u=u+1|0,(u|0)>=(E|0)){t=f;break}else s=s+4|0;else t=f;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=E}while(!1);if(B=B+1|0,u=M+1|0,d=d+1|0,r=r+2|0,(B|0)>=(se|0))break;M=u,E=t}if(q=q+1|0,(q|0)>=(Ae|0)){f=t,$=52;break e}else u=u+2|0,r=r+4|0,d=d+2|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(d=n+12|0,(f|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(f|0);)r=r+1|0,l=l+4|0;if(s=n+8|0,t=u+-1|0,e[s>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((f|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(f|0))}if((e[s>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function au(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a*3|0)+12|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a*6|0)+6)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){do if(((me[s+1>>0]|0)+(me[s>>0]|0)+(me[s+2>>0]|0)|0)>(Y|0)){if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}else w[f>>1]=0,t=d;while(!1);if(A=A+1|0,s=s+6|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function lu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<1)+8|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<2)+4)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){r=me[s>>0]|0,a=me[s+1>>0]|0;do if(((r&248)+10+(r<<5&224)+(a>>>3&28)+(a<<3&248)|0)>(Y|0)){if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}else w[f>>1]=0,t=d;while(!1);if(A=A+1|0,s=s+4|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function cu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<2)+16|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<3)+8)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){do if(((me[s+1>>0]|0)+(me[s>>0]|0)+(me[s+2>>0]|0)|0)>(Y|0)){if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}else w[f>>1]=0,t=d;while(!1);if(A=A+1|0,s=s+8|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function uu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<1)+8|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<2)+4)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){a=me[s>>0]|0;do if(((a&240)+24+(a<<4&240)+((me[s+1>>0]|0)&240)|0)>(Y|0)){if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}else w[f>>1]=0,t=d;while(!1);if(A=A+1|0,s=s+4|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function M1(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<1)+8|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<2)+4)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){r=me[s>>0]|0,a=me[s+1>>0]|0;do if(((r&248)+12+(r<<5&224)+(a>>>3&24)+(a<<2&248)|0)>(Y|0)){if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}else w[f>>1]=0,t=d;while(!1);if(A=A+1|0,s=s+4|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function O0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(Y=s*3|0,q=$+-1|0,(c|0)>1)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(X|0));)s=s+($<<1)|0,u=u+($<<1)|0;u=n+1179664|0,H=0-$|0,M=1-$|0,B=~$,E=(a<<2)+16|0;e:do if((se|0)>1){le=(q|0)>1,ee=1,s=r+((a<<3)+8)|0,l=d+($+1<<1)|0,t=0;t:for(;;){if(le)for(A=1,f=l,d=t;;){do if(((me[s+2>>0]|0)+(me[s+1>>0]|0)+(me[s+3>>0]|0)|0)>(Y|0)){if(t=w[f+(H<<1)>>1]|0,t<<16>>16>0){w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(c=w[f+(M<<1)>>1]|0,r=c<<16>>16,t=w[f+(B<<1)>>1]|0,a=t<<16>>16,l=t<<16>>16>0,c<<16>>16<=0){if(l){w[f>>1]=t,t=a*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=w[f+-2>>1]|0,t<<16>>16>0){if(w[f>>1]=t,t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(A|0)){t=d;break}e[t>>2]=A,t=d;break}else{if(t=d+1|0,(d|0)>32767)break t;w[f>>1]=t,e[n+1179664+(d<<2)>>2]=t<<16>>16,d=d*7|0,e[n+1310736+(d<<2)>>2]=1,e[n+1310736+(d+1<<2)>>2]=A,e[n+1310736+(d+2<<2)>>2]=ee,e[n+1310736+(d+3<<2)>>2]=A,e[n+1310736+(d+4<<2)>>2]=A,e[n+1310736+(d+5<<2)>>2]=ee,e[n+1310736+(d+6<<2)>>2]=ee;break}}if(l){if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+(a+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,a=n+1310736+(t+-5<<2)|0,e[a>>2]=(e[a>>2]|0)+ee,e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(l=w[f+-2>>1]|0,l<<16>>16<=0){w[f>>1]=c,t=r*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+A,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+ee,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(A|0)&&(e[l>>2]=A),e[n+1310736+(t+-1<<2)>>2]=ee,t=d;break}if(t=e[n+1179664+(r+-1<<2)>>2]|0,r=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(r|0))if(w[f>>1]=r,(d|0)>0)for(l=0,c=u;;)if((e[c>>2]|0)==(t|0)&&(e[c>>2]=r),l=l+1|0,(l|0)>=(d|0)){t=r;break}else c=c+4|0;else t=r;else if(w[f>>1]=t,(t|0)<(r|0)&(d|0)>0)for(l=0,c=u;(e[c>>2]|0)==(r|0)&&(e[c>>2]=t),l=l+1|0,!((l|0)>=(d|0));)c=c+4|0;t=(t<<16>>16)*7|0,a=n+1310736+(t+-7<<2)|0,e[a>>2]=(e[a>>2]|0)+1,a=n+1310736+(t+-6<<2)|0,e[a>>2]=(e[a>>2]|0)+A,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+ee,t=d}else w[f>>1]=0,t=d;while(!1);if(A=A+1|0,s=s+8|0,l=f+2|0,(A|0)>=(q|0))break;f=l,d=t}if(ee=ee+1|0,(ee|0)>=(se|0)){a=t,ce=52;break e}else s=s+E|0,l=l+4|0}Ot(3,3904,Ae),t=-1}else a=0,ce=52;while(!1);if((ce|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function Qa(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(q=$+-1|0,(c|0)>1)for(t=0,u=d,l=d+(q<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+($<<1)|0,l=l+($<<1)|0;l=n+1179664|0,le=0-$|0,B=1-$|0,H=~$,M=a+4|0;e:do if((se|0)>1){ee=(q|0)>1,Y=1,u=r+((a<<1)+2)|0,c=d+($+1<<1)|0,t=0;t:for(;;){if(ee)for(E=1,A=c,f=t;;){do if((me[u>>0]|0|0)>(s|0)){if(t=w[A+(le<<1)>>1]|0,t<<16>>16>0){w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(r=w[A+(B<<1)>>1]|0,a=r<<16>>16,t=w[A+(H<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,r<<16>>16<=0){if(c){w[A>>1]=t,t=d*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=w[A+-2>>1]|0,t<<16>>16>0){if(w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(E|0)){t=f;break}e[t>>2]=E,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;w[A>>1]=t,e[n+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(c){if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(c=w[A+-2>>1]|0,c<<16>>16<=0){w[A>>1]=r,t=a*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=f}else w[A>>1]=0,t=f;while(!1);if(E=E+1|0,u=u+2|0,c=A+2|0,(E|0)>=(q|0))break;A=c,f=t}if(Y=Y+1|0,(Y|0)>=(se|0)){d=t,ce=52;break e}else u=u+M|0,c=c+4|0}Ot(3,3904,Ae),t=-1}else d=0,ce=52;while(!1);if((ce|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function uo(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(q=$+-1|0,(c|0)>1)for(t=0,u=d,l=d+(q<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+($<<1)|0,l=l+($<<1)|0;l=n+1179664|0,le=0-$|0,B=1-$|0,H=~$,M=(a<<1)+8|0;e:do if((se|0)>1){ee=(q|0)>1,Y=1,u=r+((a<<2)+4)|0,c=d+($+1<<1)|0,t=0;t:for(;;){if(ee)for(E=1,A=c,f=t;;){do if((me[u+1>>0]|0|0)>(s|0)){if(t=w[A+(le<<1)>>1]|0,t<<16>>16>0){w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(r=w[A+(B<<1)>>1]|0,a=r<<16>>16,t=w[A+(H<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,r<<16>>16<=0){if(c){w[A>>1]=t,t=d*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=w[A+-2>>1]|0,t<<16>>16>0){if(w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(E|0)){t=f;break}e[t>>2]=E,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;w[A>>1]=t,e[n+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(c){if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(c=w[A+-2>>1]|0,c<<16>>16<=0){w[A>>1]=r,t=a*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=f}else w[A>>1]=0,t=f;while(!1);if(E=E+1|0,u=u+4|0,c=A+2|0,(E|0)>=(q|0))break;A=c,f=t}if(Y=Y+1|0,(Y|0)>=(se|0)){d=t,ce=52;break e}else u=u+M|0,c=c+4|0}Ot(3,3904,Ae),t=-1}else d=0,ce=52;while(!1);if((ce|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function Mo(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,Ae=Be,$=(a|0)/2|0,X=(c|0)/2|0,d=e[n>>2]|0,se=X+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(se,$)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=($|0));)u=u+2|0,l=l+2|0;if(q=$+-1|0,(c|0)>1)for(t=0,u=d,l=d+(q<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+($<<1)|0,l=l+($<<1)|0;l=n+1179664|0,le=0-$|0,B=1-$|0,H=~$,M=(a<<1)+8|0;e:do if((se|0)>1){ee=(q|0)>1,Y=1,u=r+((a<<2)+4)|0,c=d+($+1<<1)|0,t=0;t:for(;;){if(ee)for(E=1,A=c,f=t;;){do if((me[u>>0]|0|0)>(s|0)){if(t=w[A+(le<<1)>>1]|0,t<<16>>16>0){w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(r=w[A+(B<<1)>>1]|0,a=r<<16>>16,t=w[A+(H<<1)>>1]|0,d=t<<16>>16,c=t<<16>>16>0,r<<16>>16<=0){if(c){w[A>>1]=t,t=d*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-3<<2)|0,(e[c>>2]|0)<(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=w[A+-2>>1]|0,t<<16>>16>0){if(w[A>>1]=t,t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(E|0)){t=f;break}e[t>>2]=E,t=f;break}else{if(t=f+1|0,(f|0)>32767)break t;w[A>>1]=t,e[n+1179664+(f<<2)>>2]=t<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(c){if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(t+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(c=w[A+-2>>1]|0,c<<16>>16<=0){w[A>>1]=r,t=a*7|0,c=n+1310736+(t+-7<<2)|0,e[c>>2]=(e[c>>2]|0)+1,c=n+1310736+(t+-6<<2)|0,e[c>>2]=(e[c>>2]|0)+E,c=n+1310736+(t+-5<<2)|0,e[c>>2]=(e[c>>2]|0)+Y,c=n+1310736+(t+-4<<2)|0,(e[c>>2]|0)>(E|0)&&(e[c>>2]=E),e[n+1310736+(t+-1<<2)>>2]=Y,t=f;break}if(t=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((c<<16>>16)+-1<<2)>>2]|0,(t|0)>(a|0))if(w[A>>1]=a,(f|0)>0)for(c=0,r=l;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=a),c=c+1|0,(c|0)>=(f|0)){t=a;break}else r=r+4|0;else t=a;else if(w[A>>1]=t,(t|0)<(a|0)&(f|0)>0)for(c=0,r=l;(e[r>>2]|0)==(a|0)&&(e[r>>2]=t),c=c+1|0,!((c|0)>=(f|0));)r=r+4|0;t=(t<<16>>16)*7|0,d=n+1310736+(t+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(t+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=f}else w[A>>1]=0,t=f;while(!1);if(E=E+1|0,u=u+4|0,c=A+2|0,(E|0)>=(q|0))break;A=c,f=t}if(Y=Y+1|0,(Y|0)>=(se|0)){d=t,ce=52;break e}else u=u+M|0,c=c+4|0}Ot(3,3904,Ae),t=-1}else d=0,ce=52;while(!1);if((ce|0)==52){if(r=n+12|0,(d|0)<1)u=1;else for(c=1,u=1;t=e[l>>2]|0,(t|0)==(c|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(c|0)<(d|0);)c=c+1|0,l=l+4|0;if(a=n+8|0,t=u+-1|0,e[a>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do ce=t<<2,e[n+131084+(ce<<2)>>2]=$,e[n+131084+((ce|1)<<2)>>2]=0,e[n+131084+((ce|2)<<2)>>2]=X,e[n+131084+((ce|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[a>>2]|0))}if((d|0)>0){r=0;do l=(e[n+1179664+(r<<2)>>2]|0)+-1|0,c=r*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(c<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(c+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(c+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(c+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(c+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(c+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(c+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),r=r+1|0;while((r|0)<(d|0))}if((e[a>>2]|0)>0){t=0;do $=n+12+(t<<2)|0,X=t<<1,ce=n+655376+(X<<3)|0,p[ce>>3]=+p[ce>>3]/+(e[$>>2]|0),X=n+655376+((X|1)<<3)|0,p[X>>3]=+p[X>>3]/+(e[$>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function S1(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t*3|0)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){do if(((me[s+1>>0]|0)+(me[s>>0]|0)+(me[s+2>>0]|0)|0)>(se|0)){if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}else w[E>>1]=0,t=A;while(!1);if(M=M+1|0,s=s+3|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+6|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function Aa(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){d=me[s>>0]|0,f=me[s+1>>0]|0;do if(((d&248)+10+(d<<5&224)+(f>>>3&28)+(f<<3&248)|0)>(se|0)){if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}else w[E>>1]=0,t=A;while(!1);if(M=M+1|0,s=s+2|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+4|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function Va(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<2)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){do if(((me[s+1>>0]|0)+(me[s>>0]|0)+(me[s+2>>0]|0)|0)>(se|0)){if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}else w[E>>1]=0,t=A;while(!1);if(M=M+1|0,s=s+4|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+8|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function Wo(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){f=me[s>>0]|0;do if(((f&240)+24+(f<<4&240)+((me[s+1>>0]|0)&240)|0)>(se|0)){if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}else w[E>>1]=0,t=A;while(!1);if(M=M+1|0,s=s+2|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+4|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function Ts(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<1)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){d=me[s>>0]|0,f=me[s+1>>0]|0;do if(((d&248)+12+(d<<5&224)+(f>>>3&24)+(f<<2&248)|0)>(se|0)){if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}else w[E>>1]=0,t=A;while(!1);if(M=M+1|0,s=s+2|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+4|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function ma(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=s*3|0,q=a+-1|0,(c|0)>0)for(t=0,s=d,u=d+(q<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,le=0-a|0,B=1-a|0,H=~a;e:do if((Ae|0)>1){ee=(q|0)>1,Y=1,s=r+(t<<2)|0,l=d+(t<<1)|0,t=0;t:for(;;){if(ee)for(M=1,E=l,A=t;;){do if(((me[s+2>>0]|0)+(me[s+1>>0]|0)+(me[s+3>>0]|0)|0)>(se|0)){if(t=w[E+(le<<1)>>1]|0,t<<16>>16>0){w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(r=w[E+(B<<1)>>1]|0,d=r<<16>>16,t=w[E+(H<<1)>>1]|0,f=t<<16>>16,l=t<<16>>16>0,r<<16>>16<=0){if(l){w[E>>1]=t,t=f*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-3<<2)|0,(e[l>>2]|0)<(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=w[E+-2>>1]|0,t<<16>>16>0){if(w[E>>1]=t,t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(M|0)){t=A;break}e[t>>2]=M,t=A;break}else{if(t=A+1|0,(A|0)>32767)break t;w[E>>1]=t,e[n+1179664+(A<<2)>>2]=t<<16>>16,A=A*7|0,e[n+1310736+(A<<2)>>2]=1,e[n+1310736+(A+1<<2)>>2]=M,e[n+1310736+(A+2<<2)>>2]=Y,e[n+1310736+(A+3<<2)>>2]=M,e[n+1310736+(A+4<<2)>>2]=M,e[n+1310736+(A+5<<2)>>2]=Y,e[n+1310736+(A+6<<2)>>2]=Y;break}}if(l){if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+(f+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,f=n+1310736+(t+-5<<2)|0,e[f>>2]=(e[f>>2]|0)+Y,e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(l=w[E+-2>>1]|0,l<<16>>16<=0){w[E>>1]=r,t=d*7|0,l=n+1310736+(t+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(t+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+M,l=n+1310736+(t+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(t+-4<<2)|0,(e[l>>2]|0)>(M|0)&&(e[l>>2]=M),e[n+1310736+(t+-1<<2)>>2]=Y,t=A;break}if(t=e[n+1179664+(d+-1<<2)>>2]|0,d=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(t|0)>(d|0))if(w[E>>1]=d,(A|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(t|0)&&(e[r>>2]=d),l=l+1|0,(l|0)>=(A|0)){t=d;break}else r=r+4|0;else t=d;else if(w[E>>1]=t,(t|0)<(d|0)&(A|0)>0)for(l=0,r=u;(e[r>>2]|0)==(d|0)&&(e[r>>2]=t),l=l+1|0,!((l|0)>=(A|0));)r=r+4|0;t=(t<<16>>16)*7|0,f=n+1310736+(t+-7<<2)|0,e[f>>2]=(e[f>>2]|0)+1,f=n+1310736+(t+-6<<2)|0,e[f>>2]=(e[f>>2]|0)+M,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+Y,t=A}else w[E>>1]=0,t=A;while(!1);if(M=M+1|0,s=s+4|0,l=E+2|0,(M|0)>=(q|0))break;E=l,A=t}if(Y=Y+1|0,(Y|0)>=(Ae|0)){f=t,$=52;break e}else s=s+8|0,l=l+4|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function hu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((Ae|0)>1){Y=(se|0)>1,q=1,u=r+t|0,r=d+(t<<1)|0,t=0;t:for(;;){if(Y)for(B=1,M=r,E=t;;){do if((me[u>>0]|0|0)>(s|0)){if(t=w[M+(ee<<1)>>1]|0,t<<16>>16>0){w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(d=w[M+(H<<1)>>1]|0,f=d<<16>>16,t=w[M+(le<<1)>>1]|0,A=t<<16>>16,r=t<<16>>16>0,d<<16>>16<=0){if(r){w[M>>1]=t,t=A*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-3<<2)|0,(e[r>>2]|0)<(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16>0){if(w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(B|0)){t=E;break}e[t>>2]=B,t=E;break}else{if(t=E+1|0,(E|0)>32767)break t;w[M>>1]=t,e[n+1179664+(E<<2)>>2]=t<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(r){if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(t|0)>(f|0))if(w[M>>1]=f,(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;else if(w[M>>1]=t,(t|0)<(f|0)&(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16<=0){w[M>>1]=d,t=f*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-4<<2)|0,(e[r>>2]|0)>(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(f=e[n+1179664+(f+-1<<2)>>2]|0,t=e[n+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(w[M>>1]=t,(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0}else if(w[M>>1]=f,(f|0)<(t|0)&(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=E}else w[M>>1]=0,t=E;while(!1);if(B=B+1|0,u=u+1|0,r=M+2|0,(B|0)>=(se|0))break;M=r,E=t}if(q=q+1|0,(q|0)>=(Ae|0)){A=t,$=52;break e}else u=u+2|0,r=r+4|0}Ot(3,3904,ce),t=-1}else A=0,$=52;while(!1);if(($|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function du(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((Ae|0)>1){Y=(se|0)>1,q=1,u=r+(t<<1)|0,r=d+(t<<1)|0,t=0;t:for(;;){if(Y)for(B=1,M=r,E=t;;){do if((me[u+1>>0]|0|0)>(s|0)){if(t=w[M+(ee<<1)>>1]|0,t<<16>>16>0){w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(d=w[M+(H<<1)>>1]|0,f=d<<16>>16,t=w[M+(le<<1)>>1]|0,A=t<<16>>16,r=t<<16>>16>0,d<<16>>16<=0){if(r){w[M>>1]=t,t=A*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-3<<2)|0,(e[r>>2]|0)<(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16>0){if(w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(B|0)){t=E;break}e[t>>2]=B,t=E;break}else{if(t=E+1|0,(E|0)>32767)break t;w[M>>1]=t,e[n+1179664+(E<<2)>>2]=t<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(r){if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(t|0)>(f|0))if(w[M>>1]=f,(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;else if(w[M>>1]=t,(t|0)<(f|0)&(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(r=w[M+-2>>1]|0,r<<16>>16<=0){w[M>>1]=d,t=f*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-4<<2)|0,(e[r>>2]|0)>(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(t|0)>(f|0))if(w[M>>1]=f,(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;else if(w[M>>1]=t,(t|0)<(f|0)&(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=E}else w[M>>1]=0,t=E;while(!1);if(B=B+1|0,u=u+2|0,r=M+2|0,(B|0)>=(se|0))break;M=r,E=t}if(q=q+1|0,(q|0)>=(Ae|0)){A=t,$=52;break e}else u=u+4|0,r=r+4|0}Ot(3,3904,ce),t=-1}else A=0,$=52;while(!1);if(($|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function Sl(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((Ae|0)>1){Y=(se|0)>1,q=1,u=r+(t<<1)|0,r=d+(t<<1)|0,t=0;t:for(;;){if(Y)for(B=1,M=r,E=t;;){do if((me[u>>0]|0|0)>(s|0)){if(t=w[M+(ee<<1)>>1]|0,t<<16>>16>0){w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(d=w[M+(H<<1)>>1]|0,f=d<<16>>16,t=w[M+(le<<1)>>1]|0,A=t<<16>>16,r=t<<16>>16>0,d<<16>>16<=0){if(r){w[M>>1]=t,t=A*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-3<<2)|0,(e[r>>2]|0)<(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16>0){if(w[M>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(B|0)){t=E;break}e[t>>2]=B,t=E;break}else{if(t=E+1|0,(E|0)>32767)break t;w[M>>1]=t,e[n+1179664+(E<<2)>>2]=t<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(r){if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(t|0)>(f|0))if(w[M>>1]=f,(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;else if(w[M>>1]=t,(t|0)<(f|0)&(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[M+-2>>1]|0,t<<16>>16<=0){w[M>>1]=d,t=f*7|0,r=n+1310736+(t+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(t+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+B,r=n+1310736+(t+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+q,r=n+1310736+(t+-4<<2)|0,(e[r>>2]|0)>(B|0)&&(e[r>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(f=e[n+1179664+(f+-1<<2)>>2]|0,t=e[n+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(w[M>>1]=t,(E|0)>0)for(r=0,d=l;(e[d>>2]|0)==(f|0)&&(e[d>>2]=t),r=r+1|0,!((r|0)>=(E|0));)d=d+4|0}else if(w[M>>1]=f,(f|0)<(t|0)&(E|0)>0)for(r=0,d=l;;)if((e[d>>2]|0)==(t|0)&&(e[d>>2]=f),r=r+1|0,(r|0)>=(E|0)){t=f;break}else d=d+4|0;else t=f;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=E}else w[M>>1]=0,t=E;while(!1);if(B=B+1|0,u=u+2|0,r=M+2|0,(B|0)>=(se|0))break;M=r,E=t}if(q=q+1|0,(q|0)>=(Ae|0)){A=t,$=52;break e}else u=u+4|0,r=r+4|0}Ot(3,3904,ce),t=-1}else A=0,$=52;while(!1);if(($|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function cc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;if(X=S,S=S+16|0,ce=X,d=e[n>>2]|0,Ae=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(Ae,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(se=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(se<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((Ae|0)>1){Y=(se|0)>1,q=1,u=r+t|0,r=d+(t<<1)|0,d=s+t|0,t=0;t:for(;;){if(Y)for(B=1,M=u,E=t;;){do if((me[M>>0]|0)>(me[d>>0]|0)){if(t=w[r+(ee<<1)>>1]|0,t<<16>>16>0){w[r>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(s=w[r+(H<<1)>>1]|0,f=s<<16>>16,t=w[r+(le<<1)>>1]|0,A=t<<16>>16,u=t<<16>>16>0,s<<16>>16<=0){if(u){w[r>>1]=t,t=A*7|0,u=n+1310736+(t+-7<<2)|0,e[u>>2]=(e[u>>2]|0)+1,u=n+1310736+(t+-6<<2)|0,e[u>>2]=(e[u>>2]|0)+B,u=n+1310736+(t+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=n+1310736+(t+-3<<2)|0,(e[u>>2]|0)<(B|0)&&(e[u>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[r+-2>>1]|0,t<<16>>16>0){if(w[r>>1]=t,t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,t=n+1310736+(t+-3<<2)|0,(e[t>>2]|0)>=(B|0)){t=E;break}e[t>>2]=B,t=E;break}else{if(t=E+1|0,(E|0)>32767)break t;w[r>>1]=t,e[n+1179664+(E<<2)>>2]=t<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(u){if(t=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(t|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(u=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=f),u=u+1|0,(u|0)>=(E|0)){t=f;break}else s=s+4|0;else t=f;else if(w[r>>1]=t,(t|0)<(f|0)&(E|0)>0)for(u=0,s=l;(e[s>>2]|0)==(f|0)&&(e[s>>2]=t),u=u+1|0,!((u|0)>=(E|0));)s=s+4|0;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(t+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(t=w[r+-2>>1]|0,t<<16>>16<=0){w[r>>1]=s,t=f*7|0,u=n+1310736+(t+-7<<2)|0,e[u>>2]=(e[u>>2]|0)+1,u=n+1310736+(t+-6<<2)|0,e[u>>2]=(e[u>>2]|0)+B,u=n+1310736+(t+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+q,u=n+1310736+(t+-4<<2)|0,(e[u>>2]|0)>(B|0)&&(e[u>>2]=B),e[n+1310736+(t+-1<<2)>>2]=q,t=E;break}if(f=e[n+1179664+(f+-1<<2)>>2]|0,t=e[n+1179664+((t<<16>>16)+-1<<2)>>2]|0,(f|0)>(t|0)){if(w[r>>1]=t,(E|0)>0)for(u=0,s=l;(e[s>>2]|0)==(f|0)&&(e[s>>2]=t),u=u+1|0,!((u|0)>=(E|0));)s=s+4|0}else if(w[r>>1]=f,(f|0)<(t|0)&(E|0)>0)for(u=0,s=l;;)if((e[s>>2]|0)==(t|0)&&(e[s>>2]=f),u=u+1|0,(u|0)>=(E|0)){t=f;break}else s=s+4|0;else t=f;t=(t<<16>>16)*7|0,A=n+1310736+(t+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(t+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,t=n+1310736+(t+-5<<2)|0,e[t>>2]=(e[t>>2]|0)+q,t=E}else w[r>>1]=0,t=E;while(!1);if(B=B+1|0,u=M+1|0,d=d+1|0,r=r+2|0,(B|0)>=(se|0))break;M=u,E=t}if(q=q+1|0,(q|0)>=(Ae|0)){f=t,$=52;break e}else u=u+2|0,r=r+4|0,d=d+2|0}Ot(3,3904,ce),t=-1}else f=0,$=52;while(!1);if(($|0)==52){if(d=n+12|0,(f|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(f|0);)r=r+1|0,l=l+4|0;if(s=n+8|0,t=u+-1|0,e[s>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=a,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=c,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((f|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(f|0))}if((e[s>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,$=n+655376+(c<<3)|0,p[$>>3]=+p[$>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return S=X,t|0}function uc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a*3|0)+12|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a*6|0)+6)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){do if(((me[A+1>>0]|0)+(me[A>>0]|0)+(me[A+2>>0]|0)|0)>(q|0))w[c>>1]=0,U[t>>0]=0,s=f;else{if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}while(!1);if(E=E+1|0,l=A+6|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function bl(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<1)+8|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<2)+4)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){a=me[A>>0]|0,d=me[A+1>>0]|0;do if(((a&248)+10+(a<<5&224)+(d>>>3&28)+(d<<3&248)|0)>(q|0))w[c>>1]=0,U[t>>0]=0,s=f;else{if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}while(!1);if(E=E+1|0,l=A+4|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function Tl(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<2)+16|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<3)+8)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){do if(((me[A+1>>0]|0)+(me[A>>0]|0)+(me[A+2>>0]|0)|0)>(q|0))w[c>>1]=0,U[t>>0]=0,s=f;else{if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}while(!1);if(E=E+1|0,l=A+8|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function fu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<1)+8|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<2)+4)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){d=me[A>>0]|0;do if(((d&240)+24+(d<<4&240)+((me[A+1>>0]|0)&240)|0)>(q|0))w[c>>1]=0,U[t>>0]=0,s=f;else{if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}while(!1);if(E=E+1|0,l=A+4|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function Yl(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<1)+8|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<2)+4)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){a=me[A>>0]|0,d=me[A+1>>0]|0;do if(((a&248)+12+(a<<5&224)+(d>>>3&24)+(d<<2&248)|0)>(q|0))w[c>>1]=0,U[t>>0]=0,s=f;else{if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}while(!1);if(E=E+1|0,l=A+4|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function pu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;if(gt=S,S=S+16|0,ce=gt,X=(a|0)/2|0,Be=(c|0)/2|0,d=e[n>>2]|0,Ae=Be+-1|0,(a|0)>1)for(t=0,u=d,l=d+((je(Ae,X)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(X|0));)u=u+2|0,l=l+2|0;if(q=s*3|0,se=X+-1|0,(c|0)>1)for(t=0,s=d,u=d+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(Be|0));)s=s+(X<<1)|0,u=u+(X<<1)|0;u=n+1179664|0,s=X+1|0,le=0-X|0,B=1-X|0,H=~X,M=(a<<2)+16|0;e:do if((Ae|0)>1){ee=(se|0)>1,t=(e[n+4>>2]|0)+s|0,Y=1,l=r+((a<<3)+8)|0,c=d+(s<<1)|0,s=0;t:for(;;){if(ee)for(E=1,A=l,f=s;;){do if(((me[A+2>>0]|0)+(me[A+1>>0]|0)+(me[A+3>>0]|0)|0)>(q|0))w[c>>1]=0,U[t>>0]=0,s=f;else{if(U[t>>0]=-1,s=w[c+(le<<1)>>1]|0,s<<16>>16>0){w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(r=w[c+(B<<1)>>1]|0,a=r<<16>>16,s=w[c+(H<<1)>>1]|0,d=s<<16>>16,l=s<<16>>16>0,r<<16>>16<=0){if(l){w[c>>1]=s,s=d*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=w[c+-2>>1]|0,s<<16>>16>0){if(w[c>>1]=s,s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(E|0)){s=f;break}e[s>>2]=E,s=f;break}else{if(s=f+1|0,(f|0)>32767)break t;w[c>>1]=s,e[n+1179664+(f<<2)>>2]=s<<16>>16,f=f*7|0,e[n+1310736+(f<<2)>>2]=1,e[n+1310736+(f+1<<2)>>2]=E,e[n+1310736+(f+2<<2)>>2]=Y,e[n+1310736+(f+3<<2)>>2]=E,e[n+1310736+(f+4<<2)>>2]=E,e[n+1310736+(f+5<<2)>>2]=Y,e[n+1310736+(f+6<<2)>>2]=Y;break}}if(l){if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+(d+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,d=n+1310736+(s+-5<<2)|0,e[d>>2]=(e[d>>2]|0)+Y,e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(l=w[c+-2>>1]|0,l<<16>>16<=0){w[c>>1]=r,s=a*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+E,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+Y,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(E|0)&&(e[l>>2]=E),e[n+1310736+(s+-1<<2)>>2]=Y,s=f;break}if(s=e[n+1179664+(a+-1<<2)>>2]|0,a=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(a|0))if(w[c>>1]=a,(f|0)>0)for(l=0,r=u;;)if((e[r>>2]|0)==(s|0)&&(e[r>>2]=a),l=l+1|0,(l|0)>=(f|0)){s=a;break}else r=r+4|0;else s=a;else if(w[c>>1]=s,(s|0)<(a|0)&(f|0)>0)for(l=0,r=u;(e[r>>2]|0)==(a|0)&&(e[r>>2]=s),l=l+1|0,!((l|0)>=(f|0));)r=r+4|0;s=(s<<16>>16)*7|0,d=n+1310736+(s+-7<<2)|0,e[d>>2]=(e[d>>2]|0)+1,d=n+1310736+(s+-6<<2)|0,e[d>>2]=(e[d>>2]|0)+E,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+Y,s=f}while(!1);if(E=E+1|0,l=A+8|0,c=c+2|0,t=t+1|0,(E|0)>=(se|0))break;A=l,f=s}if(Y=Y+1|0,(Y|0)>=(Ae|0)){a=s,$=52;break e}else t=t+2|0,l=l+M|0,c=c+4|0}Ot(3,3904,ce),t=-1}else a=0,$=52;while(!1);if(($|0)==52){if(c=n+12|0,(a|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(a|0);)l=l+1|0,u=u+4|0;if(r=n+8|0,t=s+-1|0,e[r>>2]=t,t){if(Ht(c|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do $=t<<2,e[n+131084+($<<2)>>2]=X,e[n+131084+(($|1)<<2)>>2]=0,e[n+131084+(($|2)<<2)>>2]=Be,e[n+131084+(($|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[r>>2]|0))}if((a|0)>0){c=0;do u=(e[n+1179664+(c<<2)>>2]|0)+-1|0,l=c*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),c=c+1|0;while((c|0)<(a|0))}if((e[r>>2]|0)>0){t=0;do X=n+12+(t<<2)|0,Be=t<<1,$=n+655376+(Be<<3)|0,p[$>>3]=+p[$>>3]/+(e[X>>2]|0),Be=n+655376+((Be|1)<<3)|0,p[Be>>3]=+p[Be>>3]/+(e[X>>2]|0),t=t+1|0;while((t|0)<(e[r>>2]|0));t=0}else t=0}else t=0}return S=gt,t|0}function hc(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;(a|0)!=1?a+-1&a&&(a=ka(a)|0):a=2,n=e[r+4>>2]|0,a>>>0<=n>>>0?a>>>0<n>>>0&&(n>>>0>2?s=(n+-1&n|0)==0:s=0,c=~~+Ir(+(+((e[r+12>>2]|0)>>>0)/+P[r+16>>2]))>>>0,s?c=1<<32-(mr(c+-1|0)|0):c=ka(c)|0,a=a>>>0<c>>>0?c:a,a>>>0<n>>>0&&ql(r,a)):ql(r,a)}function ql(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0;s=r+4|0;e:do if(a){if(E=Wa(a<<2)|0,c=e[r>>2]|0,e[r>>2]=E,c&&Gs(c),e[s>>2]=a,a){c=0;do e[(e[r>>2]|0)+(c<<2)>>2]=0,c=c+1|0;while((c|0)!=(a|0))}if(s=r+8|0,n=e[s>>2]|0,n&&(c=e[n+4>>2]|0,A=a+-1|0,E=(A&a|0)==0,E?u=c&A:u=(c>>>0)%(a>>>0)|0,e[(e[r>>2]|0)+(u<<2)>>2]=s,c=e[n>>2]|0,c))for(t=n,s=n;;){f=s;t:for(;;){for(;;){if(s=e[c+4>>2]|0,E?d=s&A:d=(s>>>0)%(a>>>0)|0,(d|0)==(u|0)){s=c;break}if(s=(e[r>>2]|0)+(d<<2)|0,!(e[s>>2]|0)){u=d,n=c;break t}for(l=c+8|0,s=c;n=e[s>>2]|0,!!n;)if((e[l>>2]|0)==(e[n+8>>2]|0))s=n;else break;if(e[t>>2]=n,e[s>>2]=e[e[(e[r>>2]|0)+(d<<2)>>2]>>2],e[e[(e[r>>2]|0)+(d<<2)>>2]>>2]=c,c=e[f>>2]|0,!c)break e}if(c=e[s>>2]|0,c)t=s,f=s;else break e}if(e[s>>2]=t,c=e[n>>2]|0,c)t=n,s=n;else break}}else c=e[r>>2]|0,e[r>>2]=0,c&&Gs(c),e[s>>2]=0;while(!1)}function b1(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0;return n=S,S=S+32|0,t=n+16|0,s=n+4|0,u=n,a=e[a>>2]|0,c=e[a>>2]|0,e[u>>2]=a,e[t>>2]=e[u>>2],dc(s,r,t),a=e[s>>2]|0,e[s>>2]=0,a&&(U[s+8>>0]|0&&u1(a+264|0),Gs(a)),S=n,c|0}function dc(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0;for(M=e[c>>2]|0,f=e[a+4>>2]|0,c=e[M+4>>2]|0,A=f+-1|0,E=(A&f|0)==0,E?d=A&c:d=(c>>>0)%(f>>>0)|0,n=(e[a>>2]|0)+(d<<2)|0,s=e[n>>2]|0;;)if(c=e[s>>2]|0,(c|0)==(M|0)){l=s;break}else s=c;u=a+8|0,(l|0)!=(u|0)?(c=e[l+4>>2]|0,E?c=c&A:c=(c>>>0)%(f>>>0)|0,(c|0)==(d|0)?n=M:t=12):t=12;do if((t|0)==12){if(c=e[M>>2]|0,c&&(c=e[c+4>>2]|0,E?c=c&A:c=(c>>>0)%(f>>>0)|0,(c|0)==(d|0))){n=M;break}e[n>>2]=0,n=M}while(!1);s=e[n>>2]|0,c=s,s&&(s=e[s+4>>2]|0,E?s=s&A:s=(s>>>0)%(f>>>0)|0,(s|0)!=(d|0)&&(e[(e[a>>2]|0)+(s<<2)>>2]=l,c=e[M>>2]|0)),e[l>>2]=c,e[n>>2]=0,a=a+12|0,e[a>>2]=(e[a>>2]|0)+-1,e[r>>2]=M,e[r+4>>2]=u,U[r+8>>0]=1}function fc(r,a,c){r=r|0,a=a|0,c=c|0;var s=0;s=Wa(408)|0,e[s+8>>2]=e[c>>2],Ht(s+16|0,0,392)|0,p[s+248>>3]=1e-4,p[s+256>>3]=1e3,c=s+264|0,e[c>>2]=0,e[c+4>>2]=0,e[c+8>>2]=0,e[c+12>>2]=0,e[r>>2]=s,r=r+4|0,e[r>>2]=a+8,e[r+4>>2]=257}function pc(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0;f=e[c+8>>2]|0,le=c+4|0,e[le>>2]=f,H=a+4|0,d=e[H>>2]|0,B=(d|0)==0;e:do if(B)n=0,M=12;else if(A=d+-1|0,E=(A&d|0)==0,E?n=A&f:n=(f>>>0)%(d>>>0)|0,s=e[(e[a>>2]|0)+(n<<2)>>2]|0,!s)M=12;else for(;;){if(t=e[s>>2]|0,!t){M=12;break e}if(s=e[t+4>>2]|0,E?s=s&A:s=(s>>>0)%(d>>>0)|0,(s|0)!=(n|0)){M=12;break e}if((e[t+8>>2]|0)==(f|0)){s=0,c=t;break}else s=t}while(!1);if((M|0)==12){f=a+12|0,u=+(((e[f>>2]|0)+1|0)>>>0),l=+P[a+16>>2];do if(B|u>+(d>>>0)*l)if(d>>>0>2?s=(d+-1&d|0)==0:s=0,t=(s&1|d<<1)^1,s=~~+Ir(+(u/l))>>>0,Au(a,t>>>0<s>>>0?s:t),t=e[H>>2]|0,s=e[le>>2]|0,n=t+-1|0,n&t){d=t,n=(s>>>0)%(t>>>0)|0;break}else{d=t,n=n&s;break}while(!1);s=e[(e[a>>2]|0)+(n<<2)>>2]|0,s?(e[c>>2]=e[s>>2],e[s>>2]=c):(s=a+8|0,e[c>>2]=e[s>>2],e[s>>2]=c,e[(e[a>>2]|0)+(n<<2)>>2]=s,s=e[c>>2]|0,s&&(s=e[s+4>>2]|0,n=d+-1|0,n&d?s=(s>>>0)%(d>>>0)|0:s=s&n,e[(e[a>>2]|0)+(s<<2)>>2]=c)),e[f>>2]=(e[f>>2]|0)+1,s=1}e[r>>2]=c,U[r+4>>0]=s}function Au(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;(a|0)!=1?a+-1&a&&(a=ka(a)|0):a=2,n=e[r+4>>2]|0,a>>>0<=n>>>0?a>>>0<n>>>0&&(n>>>0>2?s=(n+-1&n|0)==0:s=0,c=~~+Ir(+(+((e[r+12>>2]|0)>>>0)/+P[r+16>>2]))>>>0,s?c=1<<32-(mr(c+-1|0)|0):c=ka(c)|0,a=a>>>0<c>>>0?c:a,a>>>0<n>>>0&&So(r,a)):So(r,a)}function So(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0;s=r+4|0;e:do if(a){if(E=Wa(a<<2)|0,c=e[r>>2]|0,e[r>>2]=E,c&&Gs(c),e[s>>2]=a,a){c=0;do e[(e[r>>2]|0)+(c<<2)>>2]=0,c=c+1|0;while((c|0)!=(a|0))}if(s=r+8|0,n=e[s>>2]|0,n&&(c=e[n+4>>2]|0,A=a+-1|0,E=(A&a|0)==0,E?u=c&A:u=(c>>>0)%(a>>>0)|0,e[(e[r>>2]|0)+(u<<2)>>2]=s,c=e[n>>2]|0,c))for(t=n,s=n;;){f=s;t:for(;;){for(;;){if(s=e[c+4>>2]|0,E?d=s&A:d=(s>>>0)%(a>>>0)|0,(d|0)==(u|0)){s=c;break}if(s=(e[r>>2]|0)+(d<<2)|0,!(e[s>>2]|0)){u=d,n=c;break t}for(l=c+8|0,s=c;n=e[s>>2]|0,!!n;)if((e[l>>2]|0)==(e[n+8>>2]|0))s=n;else break;if(e[t>>2]=n,e[s>>2]=e[e[(e[r>>2]|0)+(d<<2)>>2]>>2],e[e[(e[r>>2]|0)+(d<<2)>>2]>>2]=c,c=e[f>>2]|0,!c)break e}if(c=e[s>>2]|0,c)t=s,f=s;else break e}if(e[s>>2]=t,c=e[n>>2]|0,c)t=n,s=n;else break}}else c=e[r>>2]|0,e[r>>2]=0,c&&Gs(c),e[s>>2]=0;while(!1)}function ur(r){return r=r|0,Ao(e[r+4>>2]|0)|0}function mu(r){r=r|0,Fo(624,10917),kt(632,10922,1,1,0),Hs(640,10927,1,-128,127),Hs(656,10932,1,-128,127),Hs(648,10944,1,0,255),Hs(664,10958,2,-32768,32767),Hs(672,10964,2,0,65535),Hs(680,10979,4,-2147483648,2147483647),Hs(688,10983,4,0,-1),Hs(696,10996,4,-2147483648,2147483647),Hs(704,11001,4,0,-1),bs(712,11015,4),bs(720,11021,8),We(360,11028),We(392,11040),hi(416,4,11073),Bn(440,11086),Ji(448,0,11102),Nn(11132),ga(11169),Jl(11208),T1(11239),va(11279),za(11308),Ji(456,4,11346),Ji(464,5,11376),Nn(11415),ga(11447),Jl(11480),T1(11513),va(11547),za(11580),Ji(472,6,11614),Ji(480,7,11645),Ji(488,7,11677)}function vi(){mu(0)}function Nn(r){r=r|0,Ji(536,0,r|0)}function ga(r){r=r|0,Ji(528,1,r|0)}function Jl(r){r=r|0,Ji(520,2,r|0)}function T1(r){r=r|0,Ji(512,3,r|0)}function va(r){r=r|0,Ji(504,4,r|0)}function za(r){r=r|0,Ji(496,5,r|0)}function Zl(r){r=r|0,Vo(12478,12501,303,12589)}function Wa(r){r=r|0;var a=0;a=r|0?r:1,r=Ai(a)|0;e:do if(!r){for(;r=R1()|0,!!r;)if(Ws[r&0](),r=Ai(a)|0,r)break e;a=Pt(4)|0,e[a>>2]=2224,ei(a|0,544,1)}while(!1);return r|0}function Gs(r){r=r|0,Xi(r)}function Ka(r){r=r|0}function $l(r){r=r|0,Gs(r)}function Ea(r){return r=r|0,12610}function R1(){var r=0;return r=e[559]|0,e[559]=r+0,r|0}function jr(r){r=r|0}function ya(r){r=r|0}function wa(r){r=r|0}function K0(r){r=r|0}function Xa(r){r=r|0}function Rl(r){r=r|0,Gs(r)}function Es(r){r=r|0,Gs(r)}function Il(r){r=r|0,Gs(r)}function I1(r){r=r|0,Gs(r)}function cs(r,a,c){return r=r|0,a=a|0,c=c|0,(r|0)==(a|0)|0}function zr(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0;if(u=S,S=S+64|0,t=u,(r|0)!=(a|0))if(a|0&&(n=kr(a,576,592,0)|0,(n|0)!=0)){a=t,s=a+56|0;do e[a>>2]=0,a=a+4|0;while((a|0)<(s|0));e[t>>2]=n,e[t+8>>2]=r,e[t+12>>2]=-1,e[t+48>>2]=1,Mn[e[(e[n>>2]|0)+28>>2]&3](n,t,e[c>>2]|0,1),(e[t+24>>2]|0)==1?(e[c>>2]=e[t+16>>2],a=1):a=0}else a=0;else a=1;return S=u,a|0}function Ya(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0;r=a+16|0,n=e[r>>2]|0;do if(n){if((n|0)!=(c|0)){s=a+36|0,e[s>>2]=(e[s>>2]|0)+1,e[a+24>>2]=2,U[a+54>>0]=1;break}r=a+24|0,(e[r>>2]|0)==2&&(e[r>>2]=s)}else e[r>>2]=c,e[a+24>>2]=s,e[a+36>>2]=1;while(!1)}function js(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0,(r|0)==(e[a+8>>2]|0)&&Ya(0,a,c,s)}function hl(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0,(r|0)==(e[a+8>>2]|0)?Ya(0,a,c,s):(r=e[r+8>>2]|0,Mn[e[(e[r>>2]|0)+28>>2]&3](r,a,c,s))}function fn(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0;t=e[r+4>>2]|0,n=t>>8,t&1&&(n=e[(e[c>>2]|0)+n>>2]|0),r=e[r>>2]|0,Mn[e[(e[r>>2]|0)+28>>2]&3](r,a,c+n|0,t&2|0?s:2)}function ar(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0;e:do if((r|0)!=(e[a+8>>2]|0)){if(t=e[r+12>>2]|0,n=r+16+(t<<3)|0,fn(r+16|0,a,c,s),(t|0)>1){t=a+54|0,r=r+24|0;do{if(fn(r,a,c,s),U[t>>0]|0)break e;r=r+8|0}while(r>>>0<n>>>0)}}else Ya(0,a,c,s);while(!1)}function kr(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0;B=S,S=S+64|0,M=B,E=e[r>>2]|0,A=r+(e[E+-8>>2]|0)|0,E=e[E+-4>>2]|0,e[M>>2]=c,e[M+4>>2]=r,e[M+8>>2]=a,e[M+12>>2]=s,s=M+16|0,r=M+20|0,a=M+24|0,n=M+28|0,t=M+32|0,u=M+40|0,l=(E|0)==(c|0),d=s,f=d+36|0;do e[d>>2]=0,d=d+4|0;while((d|0)<(f|0));w[s+36>>1]=0,U[s+38>>0]=0;e:do if(l)e[M+48>>2]=1,Xt[e[(e[c>>2]|0)+20>>2]&3](c,M,A,A,1,0),s=(e[a>>2]|0)==1?A:0;else{switch(pt[e[(e[E>>2]|0)+24>>2]&3](E,M,A,1,0),e[M+36>>2]|0){case 0:{s=(e[u>>2]|0)==1&(e[n>>2]|0)==1&(e[t>>2]|0)==1?e[r>>2]|0:0;break e}case 1:break;default:{s=0;break e}}if((e[a>>2]|0)!=1&&!((e[u>>2]|0)==0&(e[n>>2]|0)==1&(e[t>>2]|0)==1)){s=0;break}s=e[s>>2]|0}while(!1);return S=B,s|0}function xr(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,U[a+53>>0]=1;do if((e[a+4>>2]|0)==(s|0)){if(U[a+52>>0]=1,s=a+16|0,r=e[s>>2]|0,!r){if(e[s>>2]=c,e[a+24>>2]=n,e[a+36>>2]=1,!((n|0)==1&&(e[a+48>>2]|0)==1))break;U[a+54>>0]=1;break}if((r|0)!=(c|0)){n=a+36|0,e[n>>2]=(e[n>>2]|0)+1,U[a+54>>0]=1;break}r=a+24|0,s=e[r>>2]|0,(s|0)==2&&(e[r>>2]=n,s=n),(s|0)==1&&(e[a+48>>2]|0)==1&&(U[a+54>>0]=1)}while(!1)}function nt(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0;e:do if((r|0)==(e[a+8>>2]|0))(e[a+4>>2]|0)==(c|0)&&(t=a+28|0,(e[t>>2]|0)!=1)&&(e[t>>2]=s);else{if((r|0)!=(e[a>>2]|0)){if(H=e[r+12>>2]|0,l=r+16+(H<<3)|0,ys(r+16|0,a,c,s,n),t=r+24|0,(H|0)<=1)break;if(u=e[r+8>>2]|0,!(u&2|0)&&(d=a+36|0,(e[d>>2]|0)!=1)){if(!(u&1)){for(u=a+54|0;;)if(U[u>>0]|0||(e[d>>2]|0)==1||(ys(t,a,c,s,n),t=t+8|0,t>>>0>=l>>>0))break e}for(u=a+24|0,r=a+54|0;;)if(U[r>>0]|0||(e[d>>2]|0)==1&&(e[u>>2]|0)==1||(ys(t,a,c,s,n),t=t+8|0,t>>>0>=l>>>0))break e}for(u=a+54|0;;)if(U[u>>0]|0||(ys(t,a,c,s,n),t=t+8|0,t>>>0>=l>>>0))break e}if((e[a+16>>2]|0)!=(c|0)&&(B=a+20|0,(e[B>>2]|0)!=(c|0))){if(e[a+32>>2]=s,A=a+44|0,(e[A>>2]|0)==4)break;u=e[r+12>>2]|0,l=r+16+(u<<3)|0,d=a+52|0,s=a+53|0,E=a+54|0,f=r+8|0,M=a+24|0;t:do if((u|0)>0)for(u=0,t=0,r=r+16|0;;){if(U[d>>0]=0,U[s>>0]=0,Ko(r,a,c,c,1,n),U[E>>0]|0){H=20;break t}do if(U[s>>0]|0){if(!(U[d>>0]|0))if(e[f>>2]&1){t=1;break}else{t=1,H=20;break t}if((e[M>>2]|0)==1)break t;if(e[f>>2]&2)u=1,t=1;else break t}while(!1);if(r=r+8|0,r>>>0>=l>>>0){H=20;break}}else u=0,t=0,H=20;while(!1);do if((H|0)==20){if(!u&&(e[B>>2]=c,c=a+40|0,e[c>>2]=(e[c>>2]|0)+1,(e[a+36>>2]|0)==1)&&(e[M>>2]|0)==2){if(U[E>>0]=1,t)break}else H=24;if((H|0)==24&&t)break;e[A>>2]=4;break e}while(!1);e[A>>2]=3;break}(s|0)==1&&(e[a+32>>2]=1)}while(!1)}function Ko(r,a,c,s,n,t){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0;var u=0,l=0;l=e[r+4>>2]|0,u=l>>8,l&1&&(u=e[(e[s>>2]|0)+u>>2]|0),r=e[r>>2]|0,Xt[e[(e[r>>2]|0)+20>>2]&3](r,a,c,s+u|0,l&2|0?n:2,t)}function ys(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0;u=e[r+4>>2]|0,t=u>>8,u&1&&(t=e[(e[c>>2]|0)+t>>2]|0),r=e[r>>2]|0,pt[e[(e[r>>2]|0)+24>>2]&3](r,a,c+t|0,u&2|0?s:2,n)}function jn(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0;e:do if((r|0)==(e[a+8>>2]|0))(e[a+4>>2]|0)==(c|0)&&(t=a+28|0,(e[t>>2]|0)!=1)&&(e[t>>2]=s);else{if((r|0)!=(e[a>>2]|0)){l=e[r+8>>2]|0,pt[e[(e[l>>2]|0)+24>>2]&3](l,a,c,s,n);break}if((e[a+16>>2]|0)!=(c|0)&&(u=a+20|0,(e[u>>2]|0)!=(c|0))){if(e[a+32>>2]=s,s=a+44|0,(e[s>>2]|0)==4)break;t=a+52|0,U[t>>0]=0,d=a+53|0,U[d>>0]=0,r=e[r+8>>2]|0,Xt[e[(e[r>>2]|0)+20>>2]&3](r,a,c,c,1,n),U[d>>0]|0?U[t>>0]|0||(t=1,l=13):(t=0,l=13);do if((l|0)==13){if(e[u>>2]=c,d=a+40|0,e[d>>2]=(e[d>>2]|0)+1,(e[a+36>>2]|0)==1&&(e[a+24>>2]|0)==2){if(U[a+54>>0]=1,t)break}else l=16;if((l|0)==16&&t)break;e[s>>2]=4;break e}while(!1);e[s>>2]=3;break}(s|0)==1&&(e[a+32>>2]=1)}while(!1)}function _r(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0;do if((r|0)==(e[a+8>>2]|0))(e[a+4>>2]|0)==(c|0)&&(u=a+28|0,(e[u>>2]|0)!=1)&&(e[u>>2]=s);else if((r|0)==(e[a>>2]|0)){if((e[a+16>>2]|0)!=(c|0)&&(t=a+20|0,(e[t>>2]|0)!=(c|0))){e[a+32>>2]=s,e[t>>2]=c,n=a+40|0,e[n>>2]=(e[n>>2]|0)+1,(e[a+36>>2]|0)==1&&(e[a+24>>2]|0)==2&&(U[a+54>>0]=1),e[a+44>>2]=4;break}(s|0)==1&&(e[a+32>>2]=1)}while(!1)}function ho(r,a,c,s,n,t){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0;var u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0;if((r|0)==(e[a+8>>2]|0))xr(0,a,c,s,n);else{A=a+52|0,E=U[A>>0]|0,M=a+53|0,B=U[M>>0]|0,f=e[r+12>>2]|0,u=r+16+(f<<3)|0,U[A>>0]=0,U[M>>0]=0,Ko(r+16|0,a,c,s,n,t);e:do if((f|0)>1){l=a+24|0,d=r+8|0,f=a+54|0,r=r+24|0;do{if(U[f>>0]|0)break e;if(U[A>>0]|0){if((e[l>>2]|0)==1||!(e[d>>2]&2))break e}else if(U[M>>0]|0&&!(e[d>>2]&1|0))break e;U[A>>0]=0,U[M>>0]=0,Ko(r,a,c,s,n,t),r=r+8|0}while(r>>>0<u>>>0)}while(!1);U[A>>0]=E,U[M>>0]=B}}function g0(r,a,c,s,n,t){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,(r|0)==(e[a+8>>2]|0)?xr(0,a,c,s,n):(r=e[r+8>>2]|0,Xt[e[(e[r>>2]|0)+20>>2]&3](r,a,c,s,n,t))}function o0(r,a,c,s,n,t){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,(r|0)==(e[a+8>>2]|0)&&xr(0,a,c,s,n)}function no(r){r=r|0,Vo(12625,12654,1164,12589)}function qn(r){return r=r|0,((r|0)==32|(r+-9|0)>>>0<5)&1|0}function Zn(){var r=0;return e[597]|0?r=e[(Kn()|0)+60>>2]|0:r=2644,r|0}function Qs(r){r=r|0;var a=0,c=0;for(a=0;;){if((me[12742+a>>0]|0)==(r|0)){c=2;break}if(a=a+1|0,(a|0)==87){a=87,r=12830,c=5;break}}if((c|0)==2&&(a?(r=12830,c=5):r=12830),(c|0)==5)for(;;){for(c=r;r=c+1|0,U[c>>0]|0;)c=r;if(a=a+-1|0,a)c=5;else break}return r|0}function fo(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0;switch(gi=S,S=S+512|0,xt=gi,a|0){case 0:{Et=24,Nt=-149,Ae=4;break}case 1:{Et=53,Nt=-1074,Ae=4;break}case 2:{Et=53,Nt=-1074,Ae=4;break}default:s=0}e:do if((Ae|0)==4){X=r+4|0,$=r+100|0;do a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0;while(qn(a)|0);t:do switch(a|0){case 43:case 45:if(n=1-(((a|0)==45&1)<<1)|0,a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0){e[X>>2]=a+1,a=me[a>>0]|0,It=n;break t}else{a=Zi(r)|0,It=n;break t}default:It=1}while(!1);n=a,a=0;do{if((n|32|0)!=(U[14634+a>>0]|0))break;do if(a>>>0<7)if(n=e[X>>2]|0,n>>>0<(e[$>>2]|0)>>>0){e[X>>2]=n+1,n=me[n>>0]|0;break}else{n=Zi(r)|0;break}while(!1);a=a+1|0}while(a>>>0<8);t:do switch(a|0){case 8:break;case 3:{Ae=23;break}default:{if(u=(c|0)!=0,u&a>>>0>3){if((a|0)==8)break t;Ae=23;break t}i:do if(!a){a=0;do{if((n|32|0)!=(U[16477+a>>0]|0))break i;do if(a>>>0<2)if(n=e[X>>2]|0,n>>>0<(e[$>>2]|0)>>>0){e[X>>2]=n+1,n=me[n>>0]|0;break}else{n=Zi(r)|0;break}while(!1);a=a+1|0}while(a>>>0<3)}while(!1);switch(a|0){case 3:{if(a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,(a|0)==40)a=1;else{if(!(e[$>>2]|0)){s=G;break e}e[X>>2]=(e[X>>2]|0)+-1,s=G;break e}for(;n=e[X>>2]|0,n>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=n+1,n=me[n>>0]|0):n=Zi(r)|0,!(!((n+-48|0)>>>0<10|(n+-65|0)>>>0<26)&&!((n|0)==95|(n+-97|0)>>>0<26));)a=a+1|0;if((n|0)==41){s=G;break e}if(n=(e[$>>2]|0)==0,n||(e[X>>2]=(e[X>>2]|0)+-1),!u){e[(Zn()|0)>>2]=22,vr(r,0),s=0;break e}if(!a){s=G;break e}for(;;)if(a=a+-1|0,n||(e[X>>2]=(e[X>>2]|0)+-1),!a){s=G;break e}}case 0:{do if((n|0)==48){if(a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,(a|32|0)!=120){if(!(e[$>>2]|0)){a=48;break}e[X>>2]=(e[X>>2]|0)+-1,a=48;break}a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0,u=0):(a=Zi(r)|0,u=0);i:for(;;){switch(a|0){case 46:{Ae=74;break i}case 48:break;default:{q=0,l=0,Y=0,n=0,f=u,A=0,ee=0,d=1,u=0,s=0;break i}}if(a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0){e[X>>2]=a+1,a=me[a>>0]|0,u=1;continue}else{a=Zi(r)|0,u=1;continue}}if((Ae|0)==74)if(a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,(a|0)==48){u=0,n=0;do a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,u=er(u|0,n|0,-1,-1)|0,n=De;while((a|0)==48);q=0,l=0,Y=u,f=1,A=1,ee=0,d=1,u=0,s=0}else q=0,l=0,Y=0,n=0,f=u,A=1,ee=0,d=1,u=0,s=0;for(;;){if(H=a+-48|0,E=a|32,H>>>0>=10){if(le=(a|0)==46,!(le|(E+-97|0)>>>0<6)){E=Y,H=q;break}if(le)if(!A)le=l,n=q,H=q,A=1,E=ee,t=d;else{E=Y,H=q,a=46;break}else Ae=86}else Ae=86;if((Ae|0)==86){Ae=0,a=(a|0)>57?E+-87|0:H;do if((q|0)<0|(q|0)==0&l>>>0<8)E=ee,t=d,u=a+(u<<4)|0;else{if((q|0)<0|(q|0)==0&l>>>0<14){B=d*.0625,E=ee,t=B,s=s+B*+(a|0);break}(ee|0)!=0|(a|0)==0?(E=ee,t=d):(E=1,t=d,s=s+d*.5)}while(!1);l=er(l|0,q|0,1,0)|0,le=Y,H=De,f=1}if(a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0){e[X>>2]=a+1,q=H,Y=le,a=me[a>>0]|0,ee=E,d=t;continue}else{q=H,Y=le,a=Zi(r)|0,ee=E,d=t;continue}}if(!f){a=(e[$>>2]|0)==0,a||(e[X>>2]=(e[X>>2]|0)+-1),c?!a&&(se=e[X>>2]|0,e[X>>2]=se+-1,(A|0)!=0)&&(e[X>>2]=se+-2):vr(r,0),s=+(It|0)*0;break e}if(f=(A|0)==0,A=f?l:E,f=f?H:n,(H|0)<0|(H|0)==0&l>>>0<8){n=H;do u=u<<4,l=er(l|0,n|0,1,0)|0,n=De;while((n|0)<0|(n|0)==0&l>>>0<8)}if((a|32|0)==112){if(n=fl(r,c)|0,a=De,(n|0)==0&(a|0)==-2147483648){if(!c){vr(r,0),s=0;break e}e[$>>2]|0?(e[X>>2]=(e[X>>2]|0)+-1,n=0,a=0):(n=0,a=0)}}else e[$>>2]|0?(e[X>>2]=(e[X>>2]|0)+-1,n=0,a=0):(n=0,a=0);if(xt=rs(A|0,f|0,2)|0,xt=er(xt|0,De|0,-32,-1)|0,a=er(xt|0,De|0,n|0,a|0)|0,n=De,!u){s=+(It|0)*0;break e}if((n|0)>0|(n|0)==0&a>>>0>(0-Nt|0)>>>0){e[(Zn()|0)>>2]=34,s=+(It|0)*17976931348623157e292*17976931348623157e292;break e}if(xt=Nt+-106|0,gt=((xt|0)<0)<<31>>31,(n|0)<(gt|0)|(n|0)==(gt|0)&a>>>0<xt>>>0){e[(Zn()|0)>>2]=34,s=+(It|0)*22250738585072014e-324*22250738585072014e-324;break e}if((u|0)>-1){do gt=!(s>=.5),xt=gt&1|u<<1,u=xt^1,s=s+(gt?s:s+-1),a=er(a|0,n|0,-1,-1)|0,n=De;while((xt|0)>-1);l=a,d=s}else l=a,d=s;a=Go(32,0,Nt|0,((Nt|0)<0)<<31>>31|0)|0,a=er(l|0,n|0,a|0,De|0)|0,Nt=De,0>(Nt|0)|(Nt|0)==0&Et>>>0>a>>>0?(a|0)<0?(a=0,Ae=127):Ae=125:(a=Et,Ae=125),(Ae|0)==125&&((a|0)<53?Ae=127:(n=a,t=+(It|0),s=0)),(Ae|0)==127&&(s=+(It|0),n=a,t=s,s=+X0(+Ca(1,84-a|0),s)),Et=(u&1|0)==0&(d!=0&(n|0)<32),s=t*(Et?0:d)+(s+t*+(((Et&1)+u|0)>>>0))-s,s==0&&(e[(Zn()|0)>>2]=34),s=+Bl(s,l);break e}else a=n;while(!1);Be=Nt+Et|0,gt=0-Be|0,u=0;i:for(;;){switch(a|0){case 46:{Ae=138;break i}case 48:break;default:{n=0,E=0,A=0;break i}}if(a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0){e[X>>2]=a+1,a=me[a>>0]|0,u=1;continue}else{a=Zi(r)|0,u=1;continue}}if((Ae|0)==138)if(a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,(a|0)==48)for(n=0,a=0;;)if(n=er(n|0,a|0,-1,-1)|0,u=De,a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,(a|0)==48)a=u;else{E=u,u=1,A=1;break}else n=0,E=0,A=1;e[xt>>2]=0,f=a+-48|0,l=(a|0)==46;i:do if(l|f>>>0<10){ce=xt+496|0,q=0,le=0,ee=l,Ae=E,H=u,se=A,u=0,l=0,A=0;s:for(;;){do if(ee)if(!se)n=q,E=le,se=1;else{E=Ae,a=q,f=le;break s}else{if(ee=er(q|0,le|0,1,0)|0,le=De,Y=(a|0)!=48,(l|0)>=125){if(!Y){E=Ae,q=ee;break}e[ce>>2]=e[ce>>2]|1,E=Ae,q=ee;break}E=xt+(l<<2)|0,u&&(f=a+-48+((e[E>>2]|0)*10|0)|0),e[E>>2]=f,u=u+1|0,f=(u|0)==9,E=Ae,q=ee,H=1,u=f?0:u,l=(f&1)+l|0,A=Y?ee:A}while(!1);if(a=e[X>>2]|0,a>>>0<(e[$>>2]|0)>>>0?(e[X>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,f=a+-48|0,ee=(a|0)==46,ee|f>>>0<10)Ae=E;else{f=se,Ae=161;break i}}H=(H|0)!=0,Ae=169}else q=0,le=0,H=u,f=A,u=0,l=0,A=0,Ae=161;while(!1);do if((Ae|0)==161){if(ce=(f|0)==0,n=ce?q:n,E=ce?le:E,H=(H|0)!=0,!((a|32|0)==101&H))if((a|0)>-1){a=q,f=le,Ae=169;break}else{a=q,f=le,Ae=171;break}if(f=fl(r,c)|0,a=De,(f|0)==0&(a|0)==-2147483648){if(!c){vr(r,0),s=0;break}e[$>>2]|0?(e[X>>2]=(e[X>>2]|0)+-1,f=0,a=0):(f=0,a=0)}n=er(f|0,a|0,n|0,E|0)|0,H=q,E=De,f=le,Ae=173}while(!1);(Ae|0)==169&&(e[$>>2]|0?(e[X>>2]=(e[X>>2]|0)+-1,H?(H=a,Ae=173):Ae=172):Ae=171),(Ae|0)==171&&(H?(H=a,Ae=173):Ae=172);do if((Ae|0)==172)e[(Zn()|0)>>2]=22,vr(r,0),s=0;else if((Ae|0)==173){if(a=e[xt>>2]|0,!a){s=+(It|0)*0;break}if(((f|0)<0|(f|0)==0&H>>>0<10)&((n|0)==(H|0)&(E|0)==(f|0))&&Et>>>0>30|(a>>>Et|0)==0){s=+(It|0)*+(a>>>0);break}if(r=(Nt|0)/-2|0,X=((r|0)<0)<<31>>31,(E|0)>(X|0)|(E|0)==(X|0)&n>>>0>r>>>0){e[(Zn()|0)>>2]=34,s=+(It|0)*17976931348623157e292*17976931348623157e292;break}if(r=Nt+-106|0,X=((r|0)<0)<<31>>31,(E|0)<(X|0)|(E|0)==(X|0)&n>>>0<r>>>0){e[(Zn()|0)>>2]=34,s=+(It|0)*22250738585072014e-324*22250738585072014e-324;break}if(u){if((u|0)<9){f=xt+(l<<2)|0,a=e[f>>2]|0;do a=a*10|0,u=u+1|0;while((u|0)!=9);e[f>>2]=a}l=l+1|0}if((A|0)<9&&(A|0)<=(n|0)&(n|0)<18){if((n|0)==9){s=+(It|0)*+((e[xt>>2]|0)>>>0);break}if((n|0)<9){s=+(It|0)*+((e[xt>>2]|0)>>>0)/+(e[2648+(8-n<<2)>>2]|0);break}if(r=Et+27+(je(n,-3)|0)|0,a=e[xt>>2]|0,(r|0)>30|(a>>>r|0)==0){s=+(It|0)*+(a>>>0)*+(e[2648+(n+-10<<2)>>2]|0);break}}if(a=(n|0)%9|0,!a)u=0,a=0;else{if(H=(n|0)>-1?a:a+9|0,f=e[2648+(8-H<<2)>>2]|0,l){A=1e9/(f|0)|0,u=0,a=0,E=0;do $=xt+(E<<2)|0,X=e[$>>2]|0,r=((X>>>0)/(f>>>0)|0)+a|0,e[$>>2]=r,a=je((X>>>0)%(f>>>0)|0,A)|0,r=(E|0)==(u|0)&(r|0)==0,E=E+1|0,n=r?n+-9|0:n,u=r?E&127:u;while((E|0)!=(l|0));a&&(e[xt+(l<<2)>>2]=a,l=l+1|0)}else u=0,l=0;a=0,n=9-H+n|0}i:for(;;){le=(n|0)<18,ee=(n|0)==18,Y=xt+(u<<2)|0;do{if(!le){if(!ee)break i;if((e[Y>>2]|0)>>>0>=9007199){n=18;break i}}for(f=0,A=l+127|0;H=A&127,E=xt+(H<<2)|0,A=rs(e[E>>2]|0,0,29)|0,A=er(A|0,De|0,f|0,0)|0,f=De,f>>>0>0|(f|0)==0&A>>>0>1e9?(r=wl(A|0,f|0,1e9,0)|0,A=qu(A|0,f|0,1e9,0)|0,f=r):f=0,e[E>>2]=A,r=(H|0)==(u|0),l=(H|0)!=(l+127&127|0)|r||A|0?l:H,!r;)A=H+-1|0;a=a+-29|0}while(!(f|0));u=u+127&127,(u|0)==(l|0)&&(r=l+127&127,l=xt+((l+126&127)<<2)|0,e[l>>2]=e[l>>2]|e[xt+(r<<2)>>2],l=r),e[xt+(u<<2)>>2]=f,n=n+9|0}i:for(;;){for(q=l+1&127,Y=xt+((l+127&127)<<2)|0;;){for(le=(n|0)==18,ee=(n|0)>27?9:1,H=le^1;;){A=u&127,E=(A|0)==(l|0);do if(E)Ae=219;else{if(f=e[xt+(A<<2)>>2]|0,f>>>0<9007199){Ae=219;break}if(f>>>0>9007199)break;if(f=u+1&127,(f|0)==(l|0)){Ae=219;break}if(f=e[xt+(f<<2)>>2]|0,f>>>0<254740991){Ae=219;break}if(!(f>>>0>254740991|H)){n=A;break i}}while(!1);if((Ae|0)==219&&(Ae=0,le)){Ae=220;break i}if(a=a+ee|0,(u|0)==(l|0))u=l;else break}for(H=(1<<ee)+-1|0,le=1e9>>>ee,A=u,f=0,E=u;X=xt+(E<<2)|0,r=e[X>>2]|0,u=(r>>>ee)+f|0,e[X>>2]=u,f=je(r&H,le)|0,u=(E|0)==(A|0)&(u|0)==0,E=E+1&127,n=u?n+-9|0:n,u=u?E:A,(E|0)!=(l|0);)A=u;if(f){if((q|0)!=(u|0))break;e[Y>>2]=e[Y>>2]|1}}e[xt+(l<<2)>>2]=f,l=q}(Ae|0)==220&&(E?(e[xt+(q+-1<<2)>>2]=0,n=l,l=q):n=A),s=+((e[xt+(n<<2)>>2]|0)>>>0),n=u+1&127,(n|0)==(l|0)&&(l=u+2&127,e[xt+(l+-1<<2)>>2]=0),B=+(It|0),t=B*(s*1e9+ +((e[xt+(n<<2)>>2]|0)>>>0)),le=a+53|0,E=le-Nt|0,H=(E|0)<(Et|0),n=H&1,A=H?(E|0)<0?0:E:Et,(A|0)<53?(qt=+X0(+Ca(1,105-A|0),t),d=+qa(t,+Ca(1,53-A|0)),M=qt,s=d,d=qt+(t-d)):(M=0,s=0,d=t),f=u+2&127;do if((f|0)==(l|0))t=s;else{f=e[xt+(f<<2)>>2]|0;do if(f>>>0>=5e8){if(f>>>0>5e8){s=B*.75+s;break}if((u+3&127|0)==(l|0)){s=B*.5+s;break}else{s=B*.75+s;break}}else{if(!(f|0)&&(u+3&127|0)==(l|0))break;s=B*.25+s}while(!1);if((53-A|0)<=1){t=s;break}if(+qa(s,1)!=0){t=s;break}t=s+1}while(!1);s=d+t-M;do if((le&2147483647|0)>(-2-Be|0)){if(+Yt(+s)>=9007199254740992&&(n=H&(A|0)==(E|0)?0:n,a=a+1|0,s=s*.5),(a+50|0)<=(gt|0)&&!(t!=0&(n|0)!=0))break;e[(Zn()|0)>>2]=34}while(!1);s=+Bl(s,a)}while(!1);break e}default:{e[$>>2]|0&&(e[X>>2]=(e[X>>2]|0)+-1),e[(Zn()|0)>>2]=22,vr(r,0),s=0;break e}}}}while(!1);if((Ae|0)==23&&(n=(e[$>>2]|0)==0,n||(e[X>>2]=(e[X>>2]|0)+-1),(c|0)!=0&a>>>0>3))do n||(e[X>>2]=(e[X>>2]|0)+-1),a=a+-1|0;while(a>>>0>3);s=+(It|0)*Z}while(!1);return S=gi,+s}function Wr(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0;e:do if(a>>>0>36)e[(Zn()|0)>>2]=22,n=0,s=0;else{H=r+4|0,B=r+100|0;do t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0;while(qn(t)|0);t:do switch(t|0){case 43:case 45:if(u=((t|0)==45)<<31>>31,t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0){e[H>>2]=t+1,t=me[t>>0]|0,M=u;break t}else{t=Zi(r)|0,M=u;break t}default:M=0}while(!1);u=(a|0)==0;do if((a&-17|0)==0&(t|0)==48){if(t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0,(t|32|0)!=120)if(u){a=8,A=46;break}else{A=32;break}if(a=e[H>>2]|0,a>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=a+1,t=me[a>>0]|0):t=Zi(r)|0,(me[14643+(t+1)>>0]|0)>15){if(s=(e[B>>2]|0)==0,s||(e[H>>2]=(e[H>>2]|0)+-1),!c){vr(r,0),n=0,s=0;break e}if(s){n=0,s=0;break e}e[H>>2]=(e[H>>2]|0)+-1,n=0,s=0;break e}else a=16,A=46}else if(a=u?10:a,(me[14643+(t+1)>>0]|0)>>>0<a>>>0)A=32;else{e[B>>2]|0&&(e[H>>2]=(e[H>>2]|0)+-1),vr(r,0),e[(Zn()|0)>>2]=22,n=0,s=0;break e}while(!1);if((A|0)==32)if((a|0)==10){if(a=t+-48|0,a>>>0<10){for(t=0;;)if(u=(t*10|0)+a|0,a=e[H>>2]|0,a>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=a+1,t=me[a>>0]|0):t=Zi(r)|0,a=t+-48|0,a>>>0<10&u>>>0<429496729)t=u;else{a=u;break}u=0}else a=0,u=0;if(c=t+-48|0,c>>>0<10){for(;;){if(l=t0(a|0,u|0,10,0)|0,d=De,f=((c|0)<0)<<31>>31,E=~f,d>>>0>E>>>0|(d|0)==(E|0)&l>>>0>~c>>>0){l=a;break}if(a=er(l|0,d|0,c|0,f|0)|0,u=De,t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0,c=t+-48|0,!(c>>>0<10&(u>>>0<429496729|(u|0)==429496729&a>>>0<2576980378))){l=a;break}}c>>>0>9?(t=l,a=M):(a=10,A=72)}else t=a,a=M}else A=46;t:do if((A|0)==46){if(!(a+-1&a)){if(A=U[14900+((a*23|0)>>>5&7)>>0]|0,u=U[14643+(t+1)>>0]|0,c=u&255,c>>>0<a>>>0){for(t=0;l=c|t<<A,t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0,u=U[14643+(t+1)>>0]|0,c=u&255,l>>>0<134217728&c>>>0<a>>>0;)t=l;c=0}else c=0,l=0;if(d=Na(-1,-1,A|0)|0,f=De,(u&255)>>>0>=a>>>0|(c>>>0>f>>>0|(c|0)==(f|0)&l>>>0>d>>>0)){u=c,A=72;break}else t=c;for(;;)if(l=rs(l|0,t|0,A|0)|0,c=De,l=u&255|l,t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0,u=U[14643+(t+1)>>0]|0,(u&255)>>>0>=a>>>0|(c>>>0>f>>>0|(c|0)==(f|0)&l>>>0>d>>>0)){u=c,A=72;break t}else t=c}if(u=U[14643+(t+1)>>0]|0,c=u&255,c>>>0<a>>>0){for(t=0;l=c+(je(t,a)|0)|0,t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0,u=U[14643+(t+1)>>0]|0,c=u&255,l>>>0<119304647&c>>>0<a>>>0;)t=l;c=0}else l=0,c=0;if((u&255)>>>0<a>>>0)for(A=wl(-1,-1,a|0,0)|0,E=De,f=c;;){if(f>>>0>E>>>0|(f|0)==(E|0)&l>>>0>A>>>0){u=f,A=72;break t}if(c=t0(l|0,f|0,a|0,0)|0,d=De,u=u&255,d>>>0>4294967295|(d|0)==-1&c>>>0>~u>>>0){u=f,A=72;break t}if(l=er(u|0,0,c|0,d|0)|0,c=De,t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0,u=U[14643+(t+1)>>0]|0,(u&255)>>>0>=a>>>0){u=c,A=72;break}else f=c}else u=c,A=72}while(!1);if((A|0)==72)if((me[14643+(t+1)>>0]|0)>>>0<a>>>0){do t=e[H>>2]|0,t>>>0<(e[B>>2]|0)>>>0?(e[H>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0;while((me[14643+(t+1)>>0]|0)>>>0<a>>>0);e[(Zn()|0)>>2]=34,u=n,t=s,a=(s&1|0)==0&!0?M:0}else t=l,a=M;if(e[B>>2]|0&&(e[H>>2]=(e[H>>2]|0)+-1),!(u>>>0<n>>>0|(u|0)==(n|0)&t>>>0<s>>>0)){if(!((s&1|0)!=0|!1|(a|0)!=0)){e[(Zn()|0)>>2]=34,s=er(s|0,n|0,-1,-1)|0,n=De;break}if(u>>>0>n>>>0|(u|0)==(n|0)&t>>>0>s>>>0){e[(Zn()|0)>>2]=34;break}}s=((a|0)<0)<<31>>31,s=Go(t^a|0,u^s|0,a|0,s|0)|0,n=De}while(!1);return De=n,s|0}function vr(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;e[r+104>>2]=a,c=e[r+4>>2]|0,s=e[r+8>>2]|0,n=s-c|0,e[r+108>>2]=n,(a|0)!=0&(n|0)>(a|0)?e[r+100>>2]=c+a:e[r+100>>2]=s}function Zi(r){r=r|0;var a=0,c=0,s=0,n=0,t=0,u=0;return c=r+104|0,t=e[c>>2]|0,t|0&&(e[r+108>>2]|0)>=(t|0)?u=4:(a=xa(r)|0,(a|0)>=0?(n=e[c>>2]|0,c=r+8|0,n?(s=e[c>>2]|0,t=e[r+4>>2]|0,c=s,n=n-(e[r+108>>2]|0)+-1|0,(c-t|0)>(n|0)?e[r+100>>2]=t+n:u=9):(s=e[c>>2]|0,c=s,u=9),(u|0)==9&&(e[r+100>>2]=c),c=e[r+4>>2]|0,s&&(r=r+108|0,e[r>>2]=s+1-c+(e[r>>2]|0)),c=c+-1|0,(me[c>>0]|0|0)!=(a|0)&&(U[c>>0]=a)):u=4),(u|0)==4&&(e[r+100>>2]=0,a=-1),a|0}function fr(r){return r=r|0,r>>>0>4294963200&&(e[(Zn()|0)>>2]=0-r,r=-1),r|0}function bo(r,a){r=+r,a=+a;var c=0,s=0;return p[K>>3]=r,s=e[K>>2]|0,c=e[K+4>>2]|0,p[K>>3]=a,c=e[K+4>>2]&-2147483648|c&2147483647,e[K>>2]=s,e[K+4>>2]=c,+ +p[K>>3]}function X0(r,a){return r=+r,a=+a,+ +bo(r,a)}function Y0(r,a){r=+r,a=+a;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0;p[K>>3]=r,c=e[K>>2]|0,f=e[K+4>>2]|0,p[K>>3]=a,A=e[K>>2]|0,E=e[K+4>>2]|0,s=Na(c|0,f|0,52)|0,s=s&2047,l=Na(A|0,E|0,52)|0,l=l&2047,M=f&-2147483648,u=rs(A|0,E|0,1)|0,d=De;e:do if(!((u|0)==0&(d|0)==0)&&(t=E&2147483647,!(t>>>0>2146435072|(t|0)==2146435072&A>>>0>0|(s|0)==2047))){if(n=rs(c|0,f|0,1)|0,t=De,!(t>>>0>d>>>0|(t|0)==(d|0)&n>>>0>u>>>0))return+((n|0)==(u|0)&(t|0)==(d|0)?r*0:r);if(s)n=f&1048575|1048576;else{if(s=rs(c|0,f|0,12)|0,n=De,(n|0)>-1|(n|0)==-1&s>>>0>4294967295){t=s,s=0;do s=s+-1|0,t=rs(t|0,n|0,1)|0,n=De;while((n|0)>-1|(n|0)==-1&t>>>0>4294967295)}else s=0;c=rs(c|0,f|0,1-s|0)|0,n=De}if(l)f=E&1048575|1048576;else{if(t=rs(A|0,E|0,12)|0,u=De,(u|0)>-1|(u|0)==-1&t>>>0>4294967295){l=0;do l=l+-1|0,t=rs(t|0,u|0,1)|0,u=De;while((u|0)>-1|(u|0)==-1&t>>>0>4294967295)}else l=0;A=rs(A|0,E|0,1-l|0)|0,f=De}d=Go(c|0,n|0,A|0,f|0)|0,u=De,t=(u|0)>-1|(u|0)==-1&d>>>0>4294967295;t:do if((s|0)>(l|0)){for(;;){if(t){if((c|0)==(A|0)&(n|0)==(f|0))break;c=d,n=u}if(c=rs(c|0,n|0,1)|0,n=De,s=s+-1|0,d=Go(c|0,n|0,A|0,f|0)|0,u=De,t=(u|0)>-1|(u|0)==-1&d>>>0>4294967295,(s|0)<=(l|0))break t}a=r*0;break e}while(!1);if(t)if((c|0)==(A|0)&(n|0)==(f|0)){a=r*0;break}else n=u,c=d;if(n>>>0<1048576|(n|0)==1048576&c>>>0<0)do c=rs(c|0,n|0,1)|0,n=De,s=s+-1|0;while(n>>>0<1048576|(n|0)==1048576&c>>>0<0);(s|0)>0?(E=er(c|0,n|0,0,-1048576)|0,c=De,s=rs(s|0,0,52)|0,c=c|De,s=E|s):(s=Na(c|0,n|0,1-s|0)|0,c=De),e[K>>2]=s,e[K+4>>2]=c|M,a=+p[K>>3]}else B=3;while(!1);return(B|0)==3&&(a=r*a,a=a/a),+a}function qa(r,a){return r=+r,a=+a,+ +Y0(r,a)}function Vs(r,a){r=+r,a=a|0;var c=0,s=0,n=0;switch(p[K>>3]=r,c=e[K>>2]|0,s=e[K+4>>2]|0,n=Na(c|0,s|0,52)|0,n=n&2047,n|0){case 0:{r!=0?(r=+Vs(r*18446744073709552e3,a),c=(e[a>>2]|0)+-64|0):c=0,e[a>>2]=c;break}case 2047:break;default:e[a>>2]=n+-1022,e[K>>2]=c,e[K+4>>2]=s&-2146435073|1071644672,r=+p[K>>3]}return+r}function F0(r,a){return r=+r,a=a|0,+ +Vs(r,a)}function Ca(r,a){r=+r,a=a|0;var c=0;return(a|0)>1023?(r=r*898846567431158e293,c=a+-1023|0,(c|0)>1023&&(c=a+-2046|0,c=(c|0)>1023?1023:c,r=r*898846567431158e293)):(a|0)<-1022?(r=r*22250738585072014e-324,c=a+1022|0,(c|0)<-1022&&(c=a+2044|0,c=(c|0)<-1022?-1022:c,r=r*22250738585072014e-324)):c=a,c=rs(c+1023|0,0,52)|0,a=De,e[K>>2]=c,e[K+4>>2]=a,+(r*+p[K>>3])}function Bl(r,a){return r=+r,a=a|0,+ +Ca(r,a)}function _a(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0;d=S,S=S+16|0,n=d,u=s|0?s:2680,s=e[u>>2]|0;e:do if(!a)s?l=15:s=0;else if(t=r|0?r:n,!c)s=-2;else{if(s)n=c,l=9;else{if(s=U[a>>0]|0,n=s&255,s<<24>>24>-1){e[t>>2]=n,s=s<<24>>24!=0&1;break}if(s=n+-194|0,s>>>0>50){l=15;break}s=e[2432+(s<<2)>>2]|0,n=c+-1|0,n&&(a=a+1|0,l=9)}t:do if((l|0)==9){if(r=U[a>>0]|0,f=(r&255)>>>3,(f+-16|f+(s>>26))>>>0>7){l=15;break e}for(;a=a+1|0,s=(r&255)+-128|s<<6,n=n+-1|0,!((s|0)>=0);){if(!n)break t;if(r=U[a>>0]|0,(r&-64)<<24>>24!=-128){l=15;break e}}e[u>>2]=0,e[t>>2]=s,s=c-n|0;break e}while(!1);e[u>>2]=s,s=-2}while(!1);return(l|0)==15&&(e[u>>2]=0,e[(Zn()|0)>>2]=84,s=-1),S=d,s|0}function Ll(r){return r=r|0,r?r=(e[r>>2]|0)==0:r=1,r&1|0}function S0(r,a,c){r=r|0,a=a|0,c=c|0;do if(r){if(a>>>0<128){U[r>>0]=a,r=1;break}if(a>>>0<2048){U[r>>0]=a>>>6|192,U[r+1>>0]=a&63|128,r=2;break}if(a>>>0<55296|(a&-8192|0)==57344){U[r>>0]=a>>>12|224,U[r+1>>0]=a>>>6&63|128,U[r+2>>0]=a&63|128,r=3;break}if((a+-65536|0)>>>0<1048576){U[r>>0]=a>>>18|240,U[r+1>>0]=a>>>12&63|128,U[r+2>>0]=a>>>6&63|128,U[r+3>>0]=a&63|128,r=4;break}else{e[(Zn()|0)>>2]=84,r=-1;break}}else r=1;while(!1);return r|0}function Dl(r,a){return r=r|0,a=a|0,r?r=S0(r,a,0)|0:r=0,r|0}function Is(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0;if(E=S,S=S+112|0,A=E+40|0,d=E+24|0,l=E+16|0,n=E,f=E+52|0,s=U[a>>0]|0,Io(14909,s<<24>>24,4)|0)if(c=Ai(1144)|0,!c)c=0;else{t=c,u=t+112|0;do e[t>>2]=0,t=t+4|0;while((t|0)<(u|0));ro(a,43)|0||(e[c>>2]=s<<24>>24==114?8:4),ro(a,101)|0&&(e[n>>2]=r,e[n+4>>2]=2,e[n+8>>2]=1,St(221,n|0)|0,s=U[a>>0]|0),s<<24>>24==97?(e[l>>2]=r,e[l+4>>2]=3,s=St(221,l|0)|0,s&1024||(e[d>>2]=r,e[d+4>>2]=4,e[d+8>>2]=s|1024,St(221,d|0)|0),a=e[c>>2]|128,e[c>>2]=a):a=e[c>>2]|0,e[c+60>>2]=r,e[c+44>>2]=c+120,e[c+48>>2]=1024,s=c+75|0,U[s>>0]=-1,!(a&8|0)&&(e[A>>2]=r,e[A+4>>2]=21505,e[A+8>>2]=f,($n(54,A|0)|0)==0)&&(U[s>>0]=10),e[c+32>>2]=14,e[c+36>>2]=4,e[c+40>>2]=5,e[c+12>>2]=2,e[598]|0||(e[c+76>>2]=-1),Ut(2416),s=e[603]|0,e[c+56>>2]=s,s&&(e[s+52>>2]=c),e[603]=c,as(2416)}else e[(Zn()|0)>>2]=22,c=0;return S=E,c|0}function on(r){r=r|0;var a=0,c=0,s=0;return c=(ro(r,43)|0)==0,a=U[r>>0]|0,c=c?a<<24>>24!=114&1:2,s=(ro(r,120)|0)==0,c=s?c:c|128,r=(ro(r,101)|0)==0,r=r?c:c|524288,r=a<<24>>24==114?r:r|64,r=a<<24>>24==119?r|512:r,(a<<24>>24==97?r|1024:r)|0}function Fs(r){return r=r|0,0}function Kr(r){r=r|0}function gu(r){r=r|0;var a=0,c=0;return a=S,S=S+16|0,c=a,e[c>>2]=e[r+60>>2],r=fr(ni(6,c|0)|0)|0,S=a,r|0}function Td(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0;return f=S,S=S+48|0,t=f+16|0,n=f,s=f+32|0,e[s>>2]=a,u=s+4|0,d=r+48|0,A=e[d>>2]|0,e[u>>2]=c-((A|0)!=0&1),l=r+44|0,e[s+8>>2]=e[l>>2],e[s+12>>2]=A,e[597]|0?(Pr(13,r|0),e[n>>2]=e[r+60>>2],e[n+4>>2]=s,e[n+8>>2]=2,s=fr(vs(145,n|0)|0)|0,_e(0)):(e[t>>2]=e[r+60>>2],e[t+4>>2]=s,e[t+8>>2]=2,s=fr(vs(145,t|0)|0)|0),(s|0)>=1?(u=e[u>>2]|0,s>>>0>u>>>0&&(t=e[l>>2]|0,n=r+4|0,e[n>>2]=t,e[r+8>>2]=t+(s-u),e[d>>2]|0&&(e[n>>2]=t+1,U[a+(c+-1)>>0]=U[t>>0]|0),s=c)):(e[r>>2]=e[r>>2]|s&48^16,e[r+8>>2]=0,e[r+4>>2]=0),S=f,s|0}function dl(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0;return n=S,S=S+32|0,t=n,s=n+20|0,e[t>>2]=e[r+60>>2],e[t+4>>2]=0,e[t+8>>2]=a,e[t+12>>2]=s,e[t+16>>2]=c,(fr(Qr(140,t|0)|0)|0)<0?(e[s>>2]=-1,r=-1):r=e[s>>2]|0,S=n,r|0}function q0(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0;for(H=S,S=S+48|0,E=H+16|0,A=H,s=H+32|0,M=r+28|0,n=e[M>>2]|0,e[s>>2]=n,B=r+20|0,n=(e[B>>2]|0)-n|0,e[s+4>>2]=n,e[s+8>>2]=a,e[s+12>>2]=c,d=r+60|0,f=r+44|0,a=2,n=n+c|0;;){if(e[597]|0?(Pr(14,r|0),e[A>>2]=e[d>>2],e[A+4>>2]=s,e[A+8>>2]=a,u=fr(Zs(146,A|0)|0)|0,_e(0)):(e[E>>2]=e[d>>2],e[E+4>>2]=s,e[E+8>>2]=a,u=fr(Zs(146,E|0)|0)|0),(n|0)==(u|0)){n=6;break}if((u|0)<0){n=8;break}n=n-u|0,t=e[s+4>>2]|0,u>>>0<=t>>>0?(a|0)==2?(e[M>>2]=(e[M>>2]|0)+u,l=t,a=2):l=t:(l=e[f>>2]|0,e[M>>2]=l,e[B>>2]=l,l=e[s+12>>2]|0,u=u-t|0,s=s+8|0,a=a+-1|0),e[s>>2]=(e[s>>2]|0)+u,e[s+4>>2]=l-u}return(n|0)==6?(E=e[f>>2]|0,e[r+16>>2]=E+(e[r+48>>2]|0),r=E,e[M>>2]=r,e[B>>2]=r):(n|0)==8&&(e[r+16>>2]=0,e[M>>2]=0,e[B>>2]=0,e[r>>2]=e[r>>2]|32,(a|0)==2?c=0:c=c-(e[s+4>>2]|0)|0),S=H,c|0}function ko(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;return n=S,S=S+80|0,s=n,e[r+36>>2]=4,!(e[r>>2]&64|0)&&(e[s>>2]=e[r+60>>2],e[s+4>>2]=21505,e[s+8>>2]=n+12,($n(54,s|0)|0)!=0)&&(U[r+75>>0]=-1),s=q0(r,a,c)|0,S=n,s|0}function Pl(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0;return s=r+84|0,t=e[s>>2]|0,u=c+256|0,n=Io(t,0,u)|0,n=n|0?n-t|0:u,c=n>>>0<c>>>0?n:c,Cs(a|0,t|0,c|0)|0,e[r+4>>2]=t+c,a=t+n|0,e[r+8>>2]=a,e[s>>2]=a,c|0}function jl(r){r=r|0;var a=0,c=0;return a=r+74|0,c=U[a>>0]|0,U[a>>0]=c+255|c,a=r+20|0,c=r+44|0,(e[a>>2]|0)>>>0>(e[c>>2]|0)>>>0&&ze[e[r+36>>2]&15](r,0,0)|0,e[r+16>>2]=0,e[r+28>>2]=0,e[a>>2]=0,a=e[r>>2]|0,a&20?(a&4&&(e[r>>2]=a|32),a=-1):(a=e[c>>2]|0,e[r+8>>2]=a,e[r+4>>2]=a,a=0),a|0}function a0(r){r=r|0;var a=0,c=0;return a=r+74|0,c=U[a>>0]|0,U[a>>0]=c+255|c,a=e[r>>2]|0,a&8?(e[r>>2]=a|32,a=-1):(e[r+8>>2]=0,e[r+4>>2]=0,a=e[r+44>>2]|0,e[r+28>>2]=a,e[r+20>>2]=a,e[r+16>>2]=a+(e[r+48>>2]|0),a=0),a|0}function xa(r){r=r|0;var a=0,c=0;return c=S,S=S+16|0,a=c,!(e[r+8>>2]|0)&&jl(r)|0?a=-1:(ze[e[r+32>>2]&15](r,a,1)|0)==1?a=me[a>>0]|0:a=-1,S=c,a|0}function b0(r){r=r|0;var a=0,c=0,s=0;return s=(e[r>>2]&1|0)!=0,s||(Ut(2416),c=e[r+52>>2]|0,a=r+56|0,c&&(e[c+56>>2]=e[a>>2]),a=e[a>>2]|0,a&&(e[a+52>>2]=c),(e[603]|0)==(r|0)&&(e[603]=a),as(2416)),a=Yr(r)|0,a=mn[e[r+12>>2]&31](r)|0|a,c=e[r+92>>2]|0,c&&Xi(c),s||Xi(r),a|0}function ws(r){r=r|0;var a=0;return(e[r+76>>2]|0)>-1&&(a=(Fs(r)|0)==0),r=(e[r>>2]|0)>>>5&1,r|0}function Yr(r){r=r|0;var a=0,c=0;do if(r){if((e[r+76>>2]|0)<=-1){a=$a(r)|0;break}c=(Fs(r)|0)==0,a=$a(r)|0,c||Kr(r)}else{if(e[660]|0?a=Yr(e[660]|0)|0:a=0,Ut(2416),r=e[603]|0,r)do(e[r+76>>2]|0)>-1?c=Fs(r)|0:c=0,(e[r+20>>2]|0)>>>0>(e[r+28>>2]|0)>>>0&&(a=$a(r)|0|a),c&&Kr(r),r=e[r+56>>2]|0;while(r|0);as(2416)}while(!1);return a|0}function No(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0;if((e[c+76>>2]|0)>-1?E=Fs(c)|0:E=0,s=a+-1|0,(a|0)<2)M=c+74|0,A=U[M>>0]|0,U[M>>0]=A+255|A,E&&Kr(c),s?r=0:U[r>>0]=0;else{e:do if(s){for(f=c+4|0,A=c+8|0,n=r;;){if(t=e[f>>2]|0,B=t,l=(e[A>>2]|0)-B|0,u=Io(t,10,l)|0,H=(u|0)==0,u=H?l:1-B+u|0,B=u>>>0<s>>>0,u=B?u:s,Cs(n|0,t|0,u|0)|0,t=e[f>>2]|0,l=t+u|0,e[f>>2]=l,a=n+u|0,d=s-u|0,!(H&B)){M=18;break e}if(l>>>0<(e[A>>2]|0)>>>0)u=u+1|0,e[f>>2]=t+u,t=me[l>>0]|0;else{if(s=xa(c)|0,(s|0)<0)break;u=u+1|0,t=s}if(s=d+-1|0,n=n+u|0,U[a>>0]=t,!((s|0)!=0&(t&255|0)!=10)){a=n,M=18;break e}}(a|0)!=(r|0)&&e[c>>2]&16|0?M=18:r=0}else a=r,M=18;while(!1);(M|0)==18&&(r?U[a>>0]=0:r=0),E&&Kr(c)}return r|0}function eo(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;return n=S,S=S+32|0,s=n+16|0,c=n,Io(14909,U[a>>0]|0,4)|0?(t=on(a)|0|32768,e[c>>2]=r,e[c+4>>2]=t,e[c+8>>2]=438,c=fr(Ri(5,c|0)|0)|0,(c|0)>=0?(r=Is(c,a)|0,r||(e[s>>2]=c,ni(6,s|0)|0,r=0)):r=0):(e[(Zn()|0)>>2]=22,r=0),S=n,r|0}function To(r,a){return r=r|0,a=a|0,(J0(r,mo(r)|0,1,a)|0)+-1|0}function Ja(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0;l=je(c,a)|0,(e[s+76>>2]|0)>-1?d=Fs(s)|0:d=0,n=s+74|0,t=U[n>>0]|0,U[n>>0]=t+255|t,n=s+4|0,t=e[n>>2]|0,u=(e[s+8>>2]|0)-t|0,(u|0)>0?(u=u>>>0<l>>>0?u:l,Cs(r|0,t|0,u|0)|0,e[n>>2]=t+u,r=r+u|0,n=l-u|0):n=l;e:do if(!n)f=13;else{for(u=s+32|0,t=n;;){if(jl(s)|0){c=t;break}if(n=ze[e[u>>2]&15](s,r,t)|0,(n+1|0)>>>0<2){c=t;break}if((t|0)==(n|0)){f=13;break e}else r=r+n|0,t=t-n|0}d&&Kr(s),c=((l-c|0)>>>0)/(a>>>0)|0}while(!1);return(f|0)==13&&d&&Kr(s),c|0}function Za(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;return(c|0)==1&&(a=a-(e[r+8>>2]|0)+(e[r+4>>2]|0)|0),n=r+20|0,s=r+28|0,(e[n>>2]|0)>>>0>(e[s>>2]|0)>>>0&&(ze[e[r+36>>2]&15](r,0,0)|0,(e[n>>2]|0)==0)?a=-1:(e[r+16>>2]=0,e[s>>2]=0,e[n>>2]=0,(ze[e[r+40>>2]&15](r,a,c)|0)<0?a=-1:(e[r+8>>2]=0,e[r+4>>2]=0,e[r>>2]=e[r>>2]&-17,a=0)),a|0}function l0(r,a,c){r=r|0,a=a|0,c=c|0;var s=0;return(e[r+76>>2]|0)>-1?(s=(Fs(r)|0)==0,a=Za(r,a,c)|0,s||Kr(r)):a=Za(r,a,c)|0,a|0}function Ol(r,a,c){return r=r|0,a=a|0,c=c|0,l0(r,a,c)|0}function Ac(r){r=r|0;var a=0;return e[r>>2]&128?a=(e[r+20>>2]|0)>>>0>(e[r+28>>2]|0)>>>0?2:1:a=1,a=ze[e[r+40>>2]&15](r,0,a)|0,(a|0)>=0&&(a=a-(e[r+8>>2]|0)+(e[r+4>>2]|0)+(e[r+20>>2]|0)-(e[r+28>>2]|0)|0),a|0}function vu(r){r=r|0;var a=0;return(e[r+76>>2]|0)>-1&&(a=(Fs(r)|0)==0),r=Ac(r)|0,r|0}function B1(r){return r=r|0,vu(r)|0}function ps(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0;s=c+16|0,n=e[s>>2]|0,n?t=4:a0(c)|0?s=0:(n=e[s>>2]|0,t=4);e:do if((t|0)==4){if(u=c+20|0,t=e[u>>2]|0,(n-t|0)>>>0<a>>>0){s=ze[e[c+36>>2]&15](c,r,a)|0;break}t:do if((U[c+75>>0]|0)>-1){for(s=a;;){if(!s){n=t,s=0;break t}if(n=s+-1|0,(U[r+n>>0]|0)==10)break;s=n}if((ze[e[c+36>>2]&15](c,r,s)|0)>>>0<s>>>0)break e;a=a-s|0,r=r+s|0,n=e[u>>2]|0}else n=t,s=0;while(!1);Cs(n|0,r|0,a|0)|0,e[u>>2]=(e[u>>2]|0)+a,s=s+a|0}while(!1);return s|0}function J0(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0;return n=je(c,a)|0,(e[s+76>>2]|0)>-1?(t=(Fs(s)|0)==0,r=ps(r,n,s)|0,t||Kr(s)):r=ps(r,n,s)|0,(r|0)!=(n|0)&&(c=(r>>>0)/(a>>>0)|0),c|0}function Nr(r){r=r|0;var a=0;(e[r+76>>2]|0)>-1?(a=(Fs(r)|0)==0,Za(r,0,0)|0,e[r>>2]=e[r>>2]&-33,a||Kr(r)):(Za(r,0,0)|0,e[r>>2]=e[r>>2]&-33)}function Ro(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;return s=S,S=S+16|0,n=s,e[n>>2]=c,c=Z0(r,a,n)|0,S=s,c|0}function Ma(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0;l=S,S=S+16|0,s=l,n=Ai(240)|0;do if(n){if(e[s>>2]=e[c>>2],s=k0(n,240,a,s)|0,s>>>0<240){a=ba(n,s+1|0)|0,e[r>>2]=a|0?a:n;break}Xi(n),(s|0)>=0&&(u=s+1|0,t=Ai(u)|0,e[r>>2]=t,(t|0)!=0)?s=k0(t,u,a,c)|0:s=-1}else s=-1;while(!1);return S=l,s|0}function Eu(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0;le=S,S=S+224|0,E=le+80|0,H=le+96|0,B=le,M=le+136|0,s=H,n=s+40|0;do e[s>>2]=0,s=s+4|0;while((s|0)<(n|0));return e[E>>2]=e[c>>2],(Zr(0,a,E,B,H)|0)<0?c=-1:((e[r+76>>2]|0)>-1?f=Fs(r)|0:f=0,c=e[r>>2]|0,A=c&32,(U[r+74>>0]|0)<1&&(e[r>>2]=c&-33),c=r+48|0,e[c>>2]|0?s=Zr(r,a,E,B,H)|0:(n=r+44|0,t=e[n>>2]|0,e[n>>2]=M,u=r+28|0,e[u>>2]=M,l=r+20|0,e[l>>2]=M,e[c>>2]=80,d=r+16|0,e[d>>2]=M+80,s=Zr(r,a,E,B,H)|0,t&&(ze[e[r+36>>2]&15](r,0,0)|0,s=e[l>>2]|0?s:-1,e[n>>2]=t,e[c>>2]=0,e[d>>2]=0,e[u>>2]=0,e[l>>2]=0)),c=e[r>>2]|0,e[r>>2]=c|A,f&&Kr(r),c=c&32|0?-1:s),S=le,c|0}function Xo(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0;yi=S,S=S+304|0,gt=yi+16|0,It=yi+8|0,xt=yi+33|0,Nt=yi,Y=yi+32|0,(e[r+76>>2]|0)>-1?ui=Fs(r)|0:ui=0,s=U[a>>0]|0;e:do if(s<<24>>24){Et=r+4|0,gi=r+100|0,Be=r+108|0,q=r+8|0,se=xt+10|0,Ae=xt+33|0,ce=It+4|0,$=xt+46|0,X=xt+94|0,t=s,s=0,u=a,E=0,n=0,a=0;t:for(;;){i:do if(qn(t&255)|0){for(;t=u+1|0,qn(me[t>>0]|0)|0;)u=t;vr(r,0);do t=e[Et>>2]|0,t>>>0<(e[gi>>2]|0)>>>0?(e[Et>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0;while(qn(t)|0);t=e[Et>>2]|0,e[gi>>2]|0&&(t=t+-1|0,e[Et>>2]=t),l=(e[Be>>2]|0)+E+t-(e[q>>2]|0)|0}else{t=(U[u>>0]|0)==37;s:do if(t){f=u+1|0,l=U[f>>0]|0;n:do switch(l<<24>>24){case 37:break s;case 42:{ee=0,l=u+2|0;break}default:{if(l=(l&255)+-48|0,l>>>0<10&&(U[u+2>>0]|0)==36){for(e[gt>>2]=e[c>>2];ee=(e[gt>>2]|0)+3&-4,t=e[ee>>2]|0,e[gt>>2]=ee+4,l>>>0>1;)l=l+-1|0;ee=t,l=u+3|0;break n}l=(e[c>>2]|0)+3&-4,ee=e[l>>2]|0,e[c>>2]=l+4,l=f}}while(!1);if(t=U[l>>0]|0,u=t&255,(u+-48|0)>>>0<10)for(t=0;f=(t*10|0)+-48+u|0,l=l+1|0,t=U[l>>0]|0,u=t&255,!((u+-48|0)>>>0>=10);)t=f;else f=0;switch(t<<24>>24==109?(l=l+1|0,A=U[l>>0]|0,t=(ee|0)!=0&1,n=0,a=0):(A=t,t=0),u=l+1|0,A&255|0){case 104:{le=(U[u>>0]|0)==104,u=le?l+2|0:u,l=le?-2:-1;break}case 108:{le=(U[u>>0]|0)==108,u=le?l+2|0:u,l=le?3:1;break}case 106:{l=3;break}case 116:case 122:{l=1;break}case 76:{l=2;break}case 110:case 112:case 67:case 83:case 91:case 99:case 115:case 88:case 71:case 70:case 69:case 65:case 103:case 102:case 101:case 97:case 120:case 117:case 111:case 105:case 100:{u=l,l=0;break}default:{qt=152;break t}}switch(A=me[u>>0]|0,M=(A&47|0)==3,A=M?A|32:A,M=M?1:l,A|0){case 99:{le=E,H=(f|0)<1?1:f;break}case 91:{le=E,H=f;break}case 110:{if(!ee){l=E;break i}switch(M|0){case-2:{U[ee>>0]=E,l=E;break i}case-1:{w[ee>>1]=E,l=E;break i}case 0:{e[ee>>2]=E,l=E;break i}case 1:{e[ee>>2]=E,l=E;break i}case 3:{l=ee,e[l>>2]=E,e[l+4>>2]=((E|0)<0)<<31>>31,l=E;break i}default:{l=E;break i}}}default:{vr(r,0);do l=e[Et>>2]|0,l>>>0<(e[gi>>2]|0)>>>0?(e[Et>>2]=l+1,l=me[l>>0]|0):l=Zi(r)|0;while(qn(l)|0);l=e[Et>>2]|0,e[gi>>2]|0&&(l=l+-1|0,e[Et>>2]=l),le=(e[Be>>2]|0)+E+l-(e[q>>2]|0)|0,H=f}}if(vr(r,H),l=e[Et>>2]|0,f=e[gi>>2]|0,l>>>0<f>>>0)e[Et>>2]=l+1;else{if((Zi(r)|0)<0){qt=152;break t}f=e[gi>>2]|0}f&&(e[Et>>2]=(e[Et>>2]|0)+-1);n:do switch(A|0){case 91:case 99:case 115:{B=(A|0)==99;r:do if((A&239|0)==99)Ht(xt|0,-1,257)|0,U[xt>>0]=0,(A|0)==115&&(U[Ae>>0]=0,U[se>>0]=0,U[se+1>>0]=0,U[se+2>>0]=0,U[se+3>>0]=0,U[se+4>>0]=0);else{switch(oi=u+1|0,E=(U[oi>>0]|0)==94,l=E&1,A=E?oi:u,u=E?u+2|0:oi,Ht(xt|0,E&1|0,257)|0,U[xt>>0]=0,U[u>>0]|0){case 45:{E=(l^1)&255,U[$>>0]=E,u=A+2|0;break}case 93:{E=(l^1)&255,U[X>>0]=E,u=A+2|0;break}default:E=(l^1)&255}for(;;){l=U[u>>0]|0;o:do switch(l<<24>>24){case 0:{qt=152;break t}case 93:break r;case 45:{switch(A=u+1|0,l=U[A>>0]|0,l<<24>>24){case 93:case 0:{l=45;break o}default:}if(u=U[u+-1>>0]|0,(u&255)<(l&255)){u=u&255;do u=u+1|0,U[xt+u>>0]=E,l=U[A>>0]|0;while((u|0)<(l&255|0));u=A}else u=A;break}default:}while(!1);U[xt+((l&255)+1)>>0]=E,u=u+1|0}}while(!1);A=B?H+1|0:31,E=(M|0)==1,M=(t|0)!=0;r:do if(E){if(M){if(a=Ai(A<<2)|0,!a){n=0,qt=152;break t}}else a=ee;e[It>>2]=0,e[ce>>2]=0,n=0;o:for(;;){f=(a|0)==0;do{a:for(;;){if(l=e[Et>>2]|0,l>>>0<(e[gi>>2]|0)>>>0?(e[Et>>2]=l+1,l=me[l>>0]|0):l=Zi(r)|0,!(U[xt+(l+1)>>0]|0))break o;switch(U[Y>>0]=l,_a(Nt,Y,1,It)|0){case-1:{n=0,qt=152;break t}case-2:break;default:break a}}f||(e[a+(n<<2)>>2]=e[Nt>>2],n=n+1|0)}while(!(M&(n|0)==(A|0)));if(n=A<<1|1,l=ba(a,n<<2)|0,!l){n=0,qt=152;break t}oi=A,A=n,a=l,n=oi}if(Ll(It)|0)f=n,n=0;else{n=0,qt=152;break t}}else{if(M){if(n=Ai(A)|0,n)l=0;else{n=0,a=0,qt=152;break t}for(;;){do{if(a=e[Et>>2]|0,a>>>0<(e[gi>>2]|0)>>>0?(e[Et>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,!(U[xt+(a+1)>>0]|0)){f=l,a=0;break r}U[n+l>>0]=a,l=l+1|0}while((l|0)!=(A|0));if(a=A<<1|1,l=ba(n,a)|0,l)oi=A,A=a,n=l,l=oi;else{a=0,qt=152;break t}}}if(ee)for(n=0;;){if(a=e[Et>>2]|0,a>>>0<f>>>0?(e[Et>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,!(U[xt+(a+1)>>0]|0)){f=n,n=ee,a=0;break r}U[ee+n>>0]=a,f=e[gi>>2]|0,n=n+1|0}else for(n=f;;){if(a=e[Et>>2]|0,a>>>0<n>>>0?(e[Et>>2]=a+1,a=me[a>>0]|0):a=Zi(r)|0,!(U[xt+(a+1)>>0]|0)){f=0,n=0,a=0;break r}n=e[gi>>2]|0}}while(!1);if(l=e[Et>>2]|0,e[gi>>2]|0&&(l=l+-1|0,e[Et>>2]=l),l=l-(e[q>>2]|0)+(e[Be>>2]|0)|0,!l||!((l|0)==(H|0)|B^1))break t;do if(M)if(E){e[ee>>2]=a;break}else{e[ee>>2]=n;break}while(!1);if(!B){if(a&&(e[a+(f<<2)>>2]=0),!n){n=0;break n}U[n+f>>0]=0}break}case 120:case 88:case 112:{l=16,qt=134;break}case 111:{l=8,qt=134;break}case 117:case 100:{l=10,qt=134;break}case 105:{l=0,qt=134;break}case 71:case 103:case 70:case 102:case 69:case 101:case 65:case 97:{if(d=+fo(r,M,0),(e[Be>>2]|0)==((e[q>>2]|0)-(e[Et>>2]|0)|0))break t;if(ee)switch(M|0){case 0:{P[ee>>2]=d;break n}case 1:{p[ee>>3]=d;break n}case 2:{p[ee>>3]=d;break n}default:break n}break}default:}while(!1);n:do if((qt|0)==134){if(qt=0,l=Wr(r,l,0,-1,-1)|0,(e[Be>>2]|0)==((e[q>>2]|0)-(e[Et>>2]|0)|0))break t;if((ee|0)!=0&(A|0)==112){e[ee>>2]=l;break}if(ee)switch(M|0){case-2:{U[ee>>0]=l;break n}case-1:{w[ee>>1]=l;break n}case 0:{e[ee>>2]=l;break n}case 1:{e[ee>>2]=l;break n}case 3:{oi=ee,e[oi>>2]=l,e[oi+4>>2]=De;break n}default:break n}}while(!1);s=((ee|0)!=0&1)+s|0,l=(e[Be>>2]|0)+le+(e[Et>>2]|0)-(e[q>>2]|0)|0;break i}while(!1);if(u=u+(t&1)|0,vr(r,0),t=e[Et>>2]|0,t>>>0<(e[gi>>2]|0)>>>0?(e[Et>>2]=t+1,t=me[t>>0]|0):t=Zi(r)|0,(t|0)!=(me[u>>0]|0)){qt=21;break t}l=E+1|0}while(!1);if(u=u+1|0,t=U[u>>0]|0,t<<24>>24)E=l;else break e}if((qt|0)==21){if(e[gi>>2]|0&&(e[Et>>2]=(e[Et>>2]|0)+-1),(s|0)!=0|(t|0)>-1)break;s=0,qt=153}else(qt|0)==152&&(s||(s=t,qt=153));(qt|0)==153&&(t=s,s=-1),t&&(Xi(n),Xi(a))}else s=0;while(!1);return ui&&Kr(r),S=yi,s|0}function k0(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0;A=S,S=S+128|0,n=A+112|0,f=A,t=f,u=2684,l=t+112|0;do e[t>>2]=e[u>>2],t=t+4|0,u=u+4|0;while((t|0)<(l|0));return(a+-1|0)>>>0>2147483646?a?(e[(Zn()|0)>>2]=75,a=-1):(a=1,d=4):(n=r,d=4),(d|0)==4&&(d=-2-n|0,d=a>>>0>d>>>0?d:a,e[f+48>>2]=d,r=f+20|0,e[r>>2]=n,e[f+44>>2]=n,a=n+d|0,n=f+16|0,e[n>>2]=a,e[f+28>>2]=a,a=Eu(f,c,s)|0,d&&(c=e[r>>2]|0,U[c+(((c|0)==(e[n>>2]|0))<<31>>31)>>0]=0)),S=A,a|0}function Z0(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0;t=S,S=S+112|0,s=t,n=s,u=n+112|0;do e[n>>2]=0,n=n+4|0;while((n|0)<(u|0));return e[s+32>>2]=15,e[s+44>>2]=r,e[s+76>>2]=-1,e[s+84>>2]=r,u=Xo(s,a,c)|0,S=t,u|0}function L1(r){r=r|0;for(var a=0,c=0,s=0,n=0;a=r+1|0,qn(U[r>>0]|0)|0;)r=a;switch(c=U[r>>0]|0,c<<24>>24|0){case 45:{s=1,n=5;break}case 43:{s=0,n=5;break}default:s=0}if((n|0)==5&&(r=a,c=U[a>>0]|0),a=(c<<24>>24)+-48|0,a>>>0<10){c=r,r=0;do c=c+1|0,r=(r*10|0)-a|0,a=(U[c>>0]|0)+-48|0;while(a>>>0<10)}else r=0;return(s|0?r:0-r|0)|0}function e1(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0;if(le=S,S=S+208|0,M=le+8|0,B=le,n=je(c,a)|0,E=B,e[E>>2]=1,e[E+4>>2]=0,n){for(l=n-c|0,e[M+4>>2]=c,e[M>>2]=c,t=c,a=c,u=2;a=a+c+t|0,e[M+(u<<2)>>2]=a,a>>>0<n>>>0;)E=t,t=a,u=u+1|0,a=E;if(E=0-c|0,d=r+l|0,A=B+4|0,(l|0)>0)for(l=d,n=1,u=1;;){do if((n&3|0)==3)D1(r,c,s,u,M),f=e[A>>2]|0,a=f<<30|(e[B>>2]|0)>>>2,e[B>>2]=a,e[A>>2]=f>>>2,u=u+2|0;else{if(a=u+-1|0,(e[M+(a<<2)>>2]|0)>>>0<(l-r|0)>>>0?D1(r,c,s,u,M):gc(r,c,s,B,u,0,M),(u|0)==1){a=e[B>>2]|0,e[A>>2]=a>>>31|e[A>>2]<<1,a=a<<1,e[B>>2]=a,u=0;break}a>>>0>31?(n=e[B>>2]|0,e[A>>2]=n,e[B>>2]=0,a=u+-33|0,t=0):(n=e[A>>2]|0,t=e[B>>2]|0),e[A>>2]=t>>>(32-a|0)|n<<a,a=t<<a,e[B>>2]=a,u=1}while(!1);if(n=a|1,e[B>>2]=n,a=r+c|0,a>>>0>=d>>>0){n=a;break}else r=a}else n=r,u=1;if(gc(n,c,s,B,u,0,M),f=B+4|0,a=e[B>>2]|0,!((u|0)==1&(a|0)==1&(e[f>>2]|0)==0))for(t=n;;){if((u|0)<2){n=a+-1|0;do if(n){if(n&1)H=24;else{l=n,n=0;do n=n+1|0,l=l>>>1;while(!(l&1|0));n||(H=24)}if((H|0)==24){if(H=0,d=e[A>>2]|0,!d){n=64,H=30;break}if(!(d&1))l=d,n=0;else{r=0,l=d,n=0;break}for(;;)if(r=n+1|0,l=l>>>1,l&1){l=r;break}else n=r;if(l)n=n+33|0;else{r=0,l=d,n=0;break}}n>>>0>31?H=30:(r=n,l=e[A>>2]|0)}else n=32,H=30;while(!1);(H|0)==30&&(H=0,a=e[A>>2]|0,e[B>>2]=a,e[A>>2]=0,r=n+-32|0,l=0),e[B>>2]=l<<32-r|a>>>r,e[A>>2]=l>>>r,t=t+E|0,n=n+u|0}else r=a>>>30,d=r|e[A>>2]<<2,n=u+-2|0,e[B>>2]=(a<<1&2147483646|r<<31)^3,e[A>>2]=d>>>1,gc(t+(0-((e[M+(n<<2)>>2]|0)+c))|0,c,s,B,u+-1|0,1,M),d=e[B>>2]|0,e[A>>2]=d>>>31|e[A>>2]<<1,e[B>>2]=d<<1|1,t=t+E|0,gc(t,c,s,B,n,1,M);if(a=e[B>>2]|0,(n|0)==1&(a|0)==1&(e[f>>2]|0)==0)break;u=n}}S=le}function Io(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0;t=a&255,s=(c|0)!=0;e:do if(s&(r&3|0)!=0)for(n=a&255;;){if((U[r>>0]|0)==n<<24>>24){u=6;break e}if(r=r+1|0,c=c+-1|0,s=(c|0)!=0,!(s&(r&3|0)!=0)){u=5;break}}else u=5;while(!1);(u|0)==5&&(s?u=6:c=0);e:do if((u|0)==6&&(n=a&255,(U[r>>0]|0)!=n<<24>>24)){s=je(t,16843009)|0;t:do if(c>>>0>3){for(;t=e[r>>2]^s,!((t&-2139062144^-2139062144)&t+-16843009);)if(r=r+4|0,c=c+-4|0,c>>>0<=3){u=11;break t}}else u=11;while(!1);if((u|0)==11&&!c){c=0;break}for(;;){if((U[r>>0]|0)==n<<24>>24)break e;if(r=r+1|0,c=c+-1|0,!c){c=0;break}}}while(!1);return(c|0?r:0)|0}function v0(r,a,c){r=r|0,a=a|0,c=c|0;var s=0;s=a&255;do{if(!c){a=0;break}c=c+-1|0,a=r+c|0}while((U[a>>0]|0)!=s<<24>>24);return a|0}function po(r,a){r=r|0,a=a|0;var c=0,s=0;c=a;e:do if((c^r)&3)s=8;else{if(c&3)do{if(c=U[a>>0]|0,U[r>>0]=c,!(c<<24>>24))break e;a=a+1|0,r=r+1|0}while(a&3|0);if(c=e[a>>2]|0,!((c&-2139062144^-2139062144)&c+-16843009))for(s=r;a=a+4|0,r=s+4|0,e[s>>2]=c,c=e[a>>2]|0,!((c&-2139062144^-2139062144)&c+-16843009);)s=r;s=8}while(!1);if((s|0)==8&&(s=U[a>>0]|0,U[r>>0]=s,s<<24>>24))do a=a+1|0,r=r+1|0,s=U[a>>0]|0,U[r>>0]=s;while(s<<24>>24);return r|0}function Sa(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0;n=a;do if((n^r)&3)t=11;else{s=(c|0)!=0;e:do if(s&(n&3|0)!=0)for(;;){if(n=U[a>>0]|0,U[r>>0]=n,!(n<<24>>24))break e;if(c=c+-1|0,a=a+1|0,r=r+1|0,s=(c|0)!=0,!(s&(a&3|0)!=0)){t=5;break}}else t=5;while(!1);if((t|0)==5&&!s){c=0;break}if(U[a>>0]|0){e:do if(c>>>0>3)do{if(s=e[a>>2]|0,(s&-2139062144^-2139062144)&s+-16843009)break e;e[r>>2]=s,c=c+-4|0,a=a+4|0,r=r+4|0}while(c>>>0>3);while(!1);t=11}}while(!1);e:do if((t|0)==11)if(!c)c=0;else for(;;){if(t=U[a>>0]|0,U[r>>0]=t,!(t<<24>>24))break e;if(c=c+-1|0,r=r+1|0,c)a=a+1|0;else{c=0;break}}while(!1);return Ht(r|0,0,c|0)|0,r|0}function ro(r,a){return r=r|0,a=a|0,r=$0(r,a)|0,((U[r>>0]|0)==(a&255)<<24>>24?r:0)|0}function $0(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;s=a&255;e:do if(!s)r=r+(mo(r)|0)|0;else{if(r&3){c=a&255;do{if(n=U[r>>0]|0,!(n<<24>>24)||n<<24>>24==c<<24>>24)break e;r=r+1|0}while(r&3|0)}s=je(s,16843009)|0,c=e[r>>2]|0;t:do if(!((c&-2139062144^-2139062144)&c+-16843009))do{if(n=c^s,(n&-2139062144^-2139062144)&n+-16843009)break t;r=r+4|0,c=e[r>>2]|0}while(!((c&-2139062144^-2139062144)&c+-16843009|0));while(!1);for(c=a&255;n=U[r>>0]|0,!(!(n<<24>>24)||n<<24>>24==c<<24>>24);)r=r+1|0}while(!1);return r|0}function mc(r,a){return r=r|0,a=a|0,po(r,a)|0,r|0}function un(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;if(n=S,S=S+32|0,s=n,c=U[a>>0]|0,c<<24>>24&&U[a+1>>0]|0){e[s>>2]=0,e[s+4>>2]=0,e[s+8>>2]=0,e[s+12>>2]=0,e[s+16>>2]=0,e[s+20>>2]=0,e[s+24>>2]=0,e[s+28>>2]=0;do t=s+(((c&255)>>>5&255)<<2)|0,e[t>>2]=e[t>>2]|1<<(c&31),a=a+1|0,c=U[a>>0]|0;while(c<<24>>24);a=U[r>>0]|0;e:do if(!(a<<24>>24))c=r;else{c=r;do{if(e[s+(((a&255)>>>5&255)<<2)>>2]&1<<(a&31))break e;c=c+1|0,a=U[c>>0]|0}while(a<<24>>24)}while(!1);c=c-r|0}else c=($0(r,c<<24>>24)|0)-r|0;return S=n,c|0}function Ao(r){r=r|0;var a=0,c=0;return c=(mo(r)|0)+1|0,a=Ai(c)|0,a?Cs(a|0,r|0,c|0)|0:a=0,a|0}function mo(r){r=r|0;var a=0,c=0,s=0;s=r;e:do if(!(s&3))c=4;else for(a=r,r=s;;){if(!(U[a>>0]|0))break e;if(a=a+1|0,r=a,!(r&3)){r=a,c=4;break}}while(!1);if((c|0)==4){for(;a=e[r>>2]|0,!((a&-2139062144^-2139062144)&a+-16843009);)r=r+4|0;if((a&255)<<24>>24)do r=r+1|0;while(U[r>>0]|0)}return r-s|0}function us(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0;s=r+(mo(r)|0)|0;e:do if(c)for(;;){if(n=U[a>>0]|0,!(n<<24>>24))break e;if(c=c+-1|0,t=s+1|0,U[s>>0]=n,c)a=a+1|0,s=t;else{s=t;break}}while(!1);return U[s>>0]=0,r|0}function es(r,a,c){return r=r|0,a=a|0,c=c|0,Sa(r,a,c)|0,r|0}function go(r,a){return r=r|0,a=a|0,v0(r,a,(mo(r)|0)+1|0)|0}function gh(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;t=S,S=S+32|0,n=t,e[n>>2]=0,e[n+4>>2]=0,e[n+8>>2]=0,e[n+12>>2]=0,e[n+16>>2]=0,e[n+20>>2]=0,e[n+24>>2]=0,e[n+28>>2]=0,s=U[a>>0]|0;do if(!(s<<24>>24))a=0;else{if(U[a+1>>0]|0)c=a,a=s;else{for(a=r;(U[a>>0]|0)==s<<24>>24;)a=a+1|0;a=a-r|0;break}do s=n+(((a&255)>>>5&255)<<2)|0,e[s>>2]=e[s>>2]|1<<(a&31),c=c+1|0,a=U[c>>0]|0;while(a<<24>>24);c=U[r>>0]|0;e:do if(!(c<<24>>24))a=r;else{a=r;do{if(!(e[n+(((c&255)>>>5&255)<<2)>>2]&1<<(c&31)))break e;a=a+1|0,c=U[a>>0]|0}while(c<<24>>24)}while(!1);a=a-r|0}while(!1);return S=t,a|0}function Yo(r,a){r=r|0,a=a|0;var c=0,s=0;r?(s=r,c=3):(r=e[699]|0,r?(s=r,c=3):r=0);do if((c|0)==3){if(c=gh(s,a)|0,r=s+c|0,!(U[r>>0]|0)){e[699]=0,r=0;break}if(c=(un(r,a)|0)+c|0,a=s+c|0,e[699]=a,U[a>>0]|0){e[699]=s+(c+1),U[a>>0]=0;break}else{e[699]=0;break}}while(!1);return r|0}function fl(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0;switch(u=r+4|0,c=e[u>>2]|0,l=r+100|0,c>>>0<(e[l>>2]|0)>>>0?(e[u>>2]=c+1,c=me[c>>0]|0):c=Zi(r)|0,c|0){case 43:case 45:{s=(c|0)==45&1,c=e[u>>2]|0,c>>>0<(e[l>>2]|0)>>>0?(e[u>>2]=c+1,c=me[c>>0]|0):c=Zi(r)|0,(a|0)!=0&(c+-48|0)>>>0>9&&e[l>>2]|0&&(e[u>>2]=(e[u>>2]|0)+-1),t=s;break}default:t=0}if((c+-48|0)>>>0>9)e[l>>2]|0?(e[u>>2]=(e[u>>2]|0)+-1,s=-2147483648,c=0):(s=-2147483648,c=0);else{s=0;do s=c+-48+(s*10|0)|0,c=e[u>>2]|0,c>>>0<(e[l>>2]|0)>>>0?(e[u>>2]=c+1,c=me[c>>0]|0):c=Zi(r)|0;while((c+-48|0)>>>0<10&(s|0)<214748364);if(a=((s|0)<0)<<31>>31,(c+-48|0)>>>0<10){do a=t0(s|0,a|0,10,0)|0,s=De,c=er(c|0,((c|0)<0)<<31>>31|0,-48,-1)|0,s=er(c|0,De|0,a|0,s|0)|0,a=De,c=e[u>>2]|0,c>>>0<(e[l>>2]|0)>>>0?(e[u>>2]=c+1,c=me[c>>0]|0):c=Zi(r)|0;while((c+-48|0)>>>0<10&((a|0)<21474836|(a|0)==21474836&s>>>0<2061584302));n=s}else n=s;if((c+-48|0)>>>0<10)do c=e[u>>2]|0,c>>>0<(e[l>>2]|0)>>>0?(e[u>>2]=c+1,c=me[c>>0]|0):c=Zi(r)|0;while((c+-48|0)>>>0<10);e[l>>2]|0&&(e[u>>2]=(e[u>>2]|0)+-1),r=(t|0)!=0,c=Go(0,0,n|0,a|0)|0,s=r?De:a,c=r?c:n}return De=s,c|0}function yu(r){r=r|0,e[r+68>>2]|0||Kr(r)}function to(r){r=r|0,e[r+68>>2]|0||Kr(r)}function $a(r){r=r|0;var a=0,c=0,s=0,n=0,t=0,u=0;return a=r+20|0,t=r+28|0,(e[a>>2]|0)>>>0>(e[t>>2]|0)>>>0&&(ze[e[r+36>>2]&15](r,0,0)|0,(e[a>>2]|0)==0)?a=-1:(u=r+4|0,c=e[u>>2]|0,s=r+8|0,n=e[s>>2]|0,c>>>0<n>>>0&&ze[e[r+40>>2]&15](r,c-n|0,1)|0,e[r+16>>2]=0,e[t>>2]=0,e[a>>2]=0,e[s>>2]=0,e[u>>2]=0,a=0),a|0}function Zr(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0,ut=0,Kt=0,mt=0,gn=0,Ki=0,hr=0,Ur=0,Ar=0,ai=0,Si=0,Vi=0,Mr=0,Fn=0,Ua=0,Q0=0,md=0,gd=0,_l=0;_l=S,S=S+624|0,Fn=_l+24|0,Q0=_l+16|0,Ua=_l+588|0,Ar=_l+576|0,Mr=_l,Ki=_l+536|0,gd=_l+8|0,md=_l+528|0,gi=(r|0)!=0,qt=Ki+40|0,gn=qt,Ki=Ki+39|0,hr=gd+4|0,Ur=Ar+12|0,Ar=Ar+11|0,ai=Ua,Si=Ur,Vi=Si-ai|0,ui=-2-ai|0,yi=Si+2|0,oi=Fn+288|0,ut=Ua+9|0,Kt=ut,mt=Ua+8|0,t=0,le=a,u=0,a=0;e:for(;;){do if((t|0)>-1)if((u|0)>(2147483647-t|0)){e[(Zn()|0)>>2]=75,t=-1;break}else{t=u+t|0;break}while(!1);if(u=U[le>>0]|0,u<<24>>24)l=le;else{Et=245;break}t:for(;;){switch(u<<24>>24){case 37:{u=l,Et=9;break t}case 0:{u=l;break t}default:}Nt=l+1|0,u=U[Nt>>0]|0,l=Nt}t:do if((Et|0)==9)for(;;){if(Et=0,(U[u+1>>0]|0)!=37)break t;if(l=l+1|0,u=u+2|0,(U[u>>0]|0)==37)Et=9;else break}while(!1);if(Y=l-le|0,gi&&!(e[r>>2]&32|0)&&ps(le,Y,r)|0,(l|0)!=(le|0)){le=u,u=Y;continue}A=u+1|0,l=U[A>>0]|0,d=(l<<24>>24)+-48|0,d>>>0<10?(Nt=(U[u+2>>0]|0)==36,A=Nt?u+3|0:A,l=U[A>>0]|0,B=Nt?d:-1,a=Nt?1:a):B=-1,u=l<<24>>24;t:do if((u&-32|0)==32)for(d=0;;){if(!(1<<u+-32&75913)){E=d,u=A;break t}if(d=1<<(l<<24>>24)+-32|d,A=A+1|0,l=U[A>>0]|0,u=l<<24>>24,(u&-32|0)!=32){E=d,u=A;break}}else E=0,u=A;while(!1);do if(l<<24>>24==42){if(d=u+1|0,l=(U[d>>0]|0)+-48|0,l>>>0<10&&(U[u+2>>0]|0)==36)e[n+(l<<2)>>2]=10,a=1,u=u+3|0,l=e[s+((U[d>>0]|0)+-48<<3)>>2]|0;else{if(a){t=-1;break e}if(!gi){ee=E,u=d,a=0,Nt=0;break}a=(e[c>>2]|0)+3&-4,l=e[a>>2]|0,e[c>>2]=a+4,a=0,u=d}(l|0)<0?(ee=E|8192,Nt=0-l|0):(ee=E,Nt=l)}else if(d=(l<<24>>24)+-48|0,d>>>0<10){l=0;do l=(l*10|0)+d|0,u=u+1|0,d=(U[u>>0]|0)+-48|0;while(d>>>0<10);if((l|0)<0){t=-1;break e}else ee=E,Nt=l}else ee=E,Nt=0;while(!1);t:do if((U[u>>0]|0)==46){if(d=u+1|0,l=U[d>>0]|0,l<<24>>24!=42){if(A=(l<<24>>24)+-48|0,A>>>0<10)u=d,l=0;else{u=d,A=0;break}for(;;)if(l=(l*10|0)+A|0,u=u+1|0,A=(U[u>>0]|0)+-48|0,A>>>0>=10){A=l;break t}}if(d=u+2|0,l=(U[d>>0]|0)+-48|0,l>>>0<10&&(U[u+3>>0]|0)==36){e[n+(l<<2)>>2]=10,u=u+4|0,A=e[s+((U[d>>0]|0)+-48<<3)>>2]|0;break}if(a){t=-1;break e}gi?(u=(e[c>>2]|0)+3&-4,A=e[u>>2]|0,e[c>>2]=u+4,u=d):(u=d,A=0)}else A=-1;while(!1);for(M=0;;){if(l=(U[u>>0]|0)+-65|0,l>>>0>57){t=-1;break e}if(d=u+1|0,l=U[15953+(M*58|0)+l>>0]|0,E=l&255,(E+-1|0)>>>0<8)u=d,M=E;else{It=d;break}}if(!(l<<24>>24)){t=-1;break}d=(B|0)>-1;do if(l<<24>>24==19)if(d){t=-1;break e}else Et=52;else{if(d){e[n+(B<<2)>>2]=E,gt=s+(B<<3)|0,xt=e[gt+4>>2]|0,Et=Mr,e[Et>>2]=e[gt>>2],e[Et+4>>2]=xt,Et=52;break}if(!gi){t=0;break e}wu(Mr,E,c)}while(!1);if((Et|0)==52&&(Et=0,!gi)){le=It,u=Y;continue}B=U[u>>0]|0,B=(M|0)!=0&(B&15|0)==3?B&-33:B,d=ee&-65537,xt=ee&8192|0?d:ee;t:do switch(B|0){case 110:switch(M|0){case 0:{e[e[Mr>>2]>>2]=t,le=It,u=Y;continue e}case 1:{e[e[Mr>>2]>>2]=t,le=It,u=Y;continue e}case 2:{le=e[Mr>>2]|0,e[le>>2]=t,e[le+4>>2]=((t|0)<0)<<31>>31,le=It,u=Y;continue e}case 3:{w[e[Mr>>2]>>1]=t,le=It,u=Y;continue e}case 4:{U[e[Mr>>2]>>0]=t,le=It,u=Y;continue e}case 6:{e[e[Mr>>2]>>2]=t,le=It,u=Y;continue e}case 7:{le=e[Mr>>2]|0,e[le>>2]=t,e[le+4>>2]=((t|0)<0)<<31>>31,le=It,u=Y;continue e}default:{le=It,u=Y;continue e}}case 112:{M=xt|8,A=A>>>0>8?A:8,B=120,Et=64;break}case 88:case 120:{M=xt,Et=64;break}case 111:{if(d=Mr,l=e[d>>2]|0,d=e[d+4>>2]|0,(l|0)==0&(d|0)==0)u=qt;else{u=qt;do u=u+-1|0,U[u>>0]=l&7|48,l=Na(l|0,d|0,3)|0,d=De;while(!((l|0)==0&(d|0)==0))}xt&8?(M=gn-u+1|0,l=xt,A=(A|0)<(M|0)?M:A,M=0,E=16433,Et=77):(l=xt,M=0,E=16433,Et=77);break}case 105:case 100:{if(l=Mr,u=e[l>>2]|0,l=e[l+4>>2]|0,(l|0)<0){u=Go(0,0,u|0,l|0)|0,l=De,d=Mr,e[d>>2]=u,e[d+4>>2]=l,d=1,E=16433,Et=76;break t}xt&2048?(d=1,E=16434,Et=76):(E=xt&1,d=E,E=E|0?16435:16433,Et=76);break}case 117:{l=Mr,u=e[l>>2]|0,l=e[l+4>>2]|0,d=0,E=16433,Et=76;break}case 99:{U[Ki>>0]=e[Mr>>2],le=Ki,l=1,M=0,B=16433,u=qt;break}case 109:{u=Qs(e[(Zn()|0)>>2]|0)|0,Et=82;break}case 115:{u=e[Mr>>2]|0,u=u|0?u:16443,Et=82;break}case 67:{e[gd>>2]=e[Mr>>2],e[hr>>2]=0,e[Mr>>2]=gd,A=-1,Et=86;break}case 83:{A?Et=86:(ks(r,32,Nt,0,xt),u=0,Et=98);break}case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:{f=+p[Mr>>3],e[Q0>>2]=0,p[K>>3]=f,(e[K+4>>2]|0)>=0?xt&2048?(Be=1,gt=16453):(gt=xt&1,Be=gt,gt=gt|0?16456:16451):(f=-f,Be=1,gt=16450),p[K>>3]=f,X=e[K+4>>2]&2146435072;do if(X>>>0<2146435072|(X|0)==2146435072&!1){if(H=+F0(f,Q0)*2,l=H!=0,l&&(e[Q0>>2]=(e[Q0>>2]|0)+-1),ce=B|32,(ce|0)==97){le=B&32,Y=le|0?gt+9|0:gt,ee=Be|2,u=12-A|0;do if(A>>>0>11|(u|0)==0)f=H;else{f=8;do u=u+-1|0,f=f*16;while(u|0);if((U[Y>>0]|0)==45){f=-(f+(-H-f));break}else{f=H+f-f;break}}while(!1);for(l=e[Q0>>2]|0,u=(l|0)<0?0-l|0:l,u=ja(u,((u|0)<0)<<31>>31,Ur)|0,(u|0)==(Ur|0)&&(U[Ar>>0]=48,u=Ar),U[u+-1>>0]=(l>>31&2)+43,M=u+-2|0,U[M>>0]=B+15,E=(A|0)<1,d=(xt&8|0)==0,l=Ua;;){gt=~~f,u=l+1|0,U[l>>0]=me[16417+gt>>0]|le,f=(f-+(gt|0))*16;do if((u-ai|0)==1){if(d&(E&f==0))break;U[u>>0]=46,u=l+2|0}while(!1);if(f==0)break;l=u}A=(A|0)!=0&(ui+u|0)<(A|0)?yi+A-M|0:Vi-M+u|0,d=A+ee|0,ks(r,32,Nt,d,xt),e[r>>2]&32||ps(Y,ee,r)|0,ks(r,48,Nt,d,xt^65536),u=u-ai|0,e[r>>2]&32||ps(Ua,u,r)|0,l=Si-M|0,ks(r,48,A-(u+l)|0,0,0),e[r>>2]&32||ps(M,l,r)|0,ks(r,32,Nt,d,xt^8192),u=(d|0)<(Nt|0)?Nt:d;break}u=(A|0)<0?6:A,l?(l=(e[Q0>>2]|0)+-28|0,e[Q0>>2]=l,f=H*268435456):(f=H,l=e[Q0>>2]|0),X=(l|0)<0?Fn:oi,$=X,l=X;do Ae=~~f>>>0,e[l>>2]=Ae,l=l+4|0,f=(f-+(Ae>>>0))*1e9;while(f!=0);if(d=l,l=e[Q0>>2]|0,(l|0)>0)for(E=X;;){M=(l|0)>29?29:l,A=d+-4|0;do if(A>>>0<E>>>0)A=E;else{l=0;do Ae=rs(e[A>>2]|0,0,M|0)|0,Ae=er(Ae|0,De|0,l|0,0)|0,l=De,se=qu(Ae|0,l|0,1e9,0)|0,e[A>>2]=se,l=wl(Ae|0,l|0,1e9,0)|0,A=A+-4|0;while(A>>>0>=E>>>0);if(!l){A=E;break}A=E+-4|0,e[A>>2]=l}while(!1);for(;!(d>>>0<=A>>>0);)if(l=d+-4|0,!(e[l>>2]|0))d=l;else break;if(l=(e[Q0>>2]|0)-M|0,e[Q0>>2]=l,(l|0)>0)E=A;else break}else A=X;if((l|0)<0)for(Y=((u+25|0)/9|0)+1|0,q=(ce|0)==102,le=A;;){ee=0-l|0,ee=(ee|0)>9?9:ee;do if(le>>>0<d>>>0){l=(1<<ee)+-1|0,E=1e9>>>ee,A=0,M=le;do Ae=e[M>>2]|0,e[M>>2]=(Ae>>>ee)+A,A=je(Ae&l,E)|0,M=M+4|0;while(M>>>0<d>>>0);if(l=e[le>>2]|0?le:le+4|0,!A){A=l;break}e[d>>2]=A,A=l,d=d+4|0}else A=e[le>>2]|0?le:le+4|0;while(!1);if(l=q?X:A,d=(d-l>>2|0)>(Y|0)?l+(Y<<2)|0:d,l=(e[Q0>>2]|0)+ee|0,e[Q0>>2]=l,(l|0)>=0){le=A;break}else le=A}else le=A;do if(le>>>0<d>>>0){if(l=($-le>>2)*9|0,E=e[le>>2]|0,E>>>0<10)break;A=10;do A=A*10|0,l=l+1|0;while(E>>>0>=A>>>0)}else l=0;while(!1);if(se=(ce|0)==103,Ae=(u|0)!=0,A=u-((ce|0)!=102?l:0)+((Ae&se)<<31>>31)|0,(A|0)<(((d-$>>2)*9|0)+-9|0)){if(M=A+9216|0,q=(M|0)/9|0,A=X+(q+-1023<<2)|0,M=((M|0)%9|0)+1|0,(M|0)<9){E=10;do E=E*10|0,M=M+1|0;while((M|0)!=9)}else E=10;ee=e[A>>2]|0,Y=(ee>>>0)%(E>>>0)|0,!(Y|0)&&(X+(q+-1022<<2)|0)==(d|0)?E=le:Et=163;do if((Et|0)==163){Et=0,H=((ee>>>0)/(E>>>0)|0)&1|0?9007199254740994:9007199254740992,M=(E|0)/2|0;do if(Y>>>0<M>>>0)f=.5;else{if((Y|0)==(M|0)&&(X+(q+-1022<<2)|0)==(d|0)){f=1;break}f=1.5}while(!1);do if(Be){if((U[gt>>0]|0)!=45)break;H=-H,f=-f}while(!1);if(M=ee-Y|0,e[A>>2]=M,H+f==H){E=le;break}if(ce=M+E|0,e[A>>2]=ce,ce>>>0>999999999)for(l=le;;)if(E=A+-4|0,e[A>>2]=0,E>>>0<l>>>0&&(l=l+-4|0,e[l>>2]=0),ce=(e[E>>2]|0)+1|0,e[E>>2]=ce,ce>>>0>999999999)A=E;else{le=l,A=E;break}if(l=($-le>>2)*9|0,M=e[le>>2]|0,M>>>0<10){E=le;break}else E=10;do E=E*10|0,l=l+1|0;while(M>>>0>=E>>>0);E=le}while(!1);ce=A+4|0,le=E,d=d>>>0>ce>>>0?ce:d}for(Y=0-l|0;;){if(d>>>0<=le>>>0){q=0,ce=d;break}if(A=d+-4|0,!(e[A>>2]|0))d=A;else{q=1,ce=d;break}}do if(se){if(u=(Ae&1^1)+u|0,(u|0)>(l|0)&(l|0)>-5?(B=B+-1|0,u=u+-1-l|0):(B=B+-2|0,u=u+-1|0),d=xt&8,d)break;do if(q){if(d=e[ce+-4>>2]|0,!d){A=9;break}if(!((d>>>0)%10|0))E=10,A=0;else{A=0;break}do E=E*10|0,A=A+1|0;while(!((d>>>0)%(E>>>0)|0|0))}else A=9;while(!1);if(d=((ce-$>>2)*9|0)+-9|0,(B|32|0)==102){d=d-A|0,d=(d|0)<0?0:d,u=(u|0)<(d|0)?u:d,d=0;break}else{d=d+l-A|0,d=(d|0)<0?0:d,u=(u|0)<(d|0)?u:d,d=0;break}}else d=xt&8;while(!1);if(ee=u|d,E=(ee|0)!=0&1,M=(B|32|0)==102,M)l=(l|0)>0?l:0,B=0;else{if(A=(l|0)<0?Y:l,A=ja(A,((A|0)<0)<<31>>31,Ur)|0,(Si-A|0)<2)do A=A+-1|0,U[A>>0]=48;while((Si-A|0)<2);U[A+-1>>0]=(l>>31&2)+43,$=A+-2|0,U[$>>0]=B,l=Si-$|0,B=$}Y=Be+1+u+E+l|0,ks(r,32,Nt,Y,xt),e[r>>2]&32||ps(gt,Be,r)|0,ks(r,48,Nt,Y,xt^65536);do if(M){A=le>>>0>X>>>0?X:le,l=A;do{d=ja(e[l>>2]|0,0,ut)|0;do if((l|0)==(A|0)){if((d|0)!=(ut|0))break;U[mt>>0]=48,d=mt}else{if(d>>>0<=Ua>>>0)break;do d=d+-1|0,U[d>>0]=48;while(d>>>0>Ua>>>0)}while(!1);e[r>>2]&32||ps(d,Kt-d|0,r)|0,l=l+4|0}while(l>>>0<=X>>>0);do if(ee){if(e[r>>2]&32)break;ps(16485,1,r)|0}while(!1);if((u|0)>0&l>>>0<ce>>>0)for(d=l;;){if(l=ja(e[d>>2]|0,0,ut)|0,l>>>0>Ua>>>0)do l=l+-1|0,U[l>>0]=48;while(l>>>0>Ua>>>0);if(e[r>>2]&32||ps(l,(u|0)>9?9:u,r)|0,d=d+4|0,l=u+-9|0,(u|0)>9&d>>>0<ce>>>0)u=l;else{u=l;break}}ks(r,48,u+9|0,9,0)}else{if(M=q?ce:le+4|0,(u|0)>-1){E=(d|0)==0,A=le;do{l=ja(e[A>>2]|0,0,ut)|0,(l|0)==(ut|0)&&(U[mt>>0]=48,l=mt);do if((A|0)==(le|0)){if(d=l+1|0,e[r>>2]&32||ps(l,1,r)|0,E&(u|0)<1){l=d;break}if(e[r>>2]&32){l=d;break}ps(16485,1,r)|0,l=d}else{if(l>>>0<=Ua>>>0)break;do l=l+-1|0,U[l>>0]=48;while(l>>>0>Ua>>>0)}while(!1);d=Kt-l|0,e[r>>2]&32||ps(l,(u|0)>(d|0)?d:u,r)|0,u=u-d|0,A=A+4|0}while(A>>>0<M>>>0&(u|0)>-1)}if(ks(r,48,u+18|0,18,0),e[r>>2]&32)break;ps(B,Si-B|0,r)|0}while(!1);ks(r,32,Nt,Y,xt^8192),u=(Y|0)<(Nt|0)?Nt:Y}else M=(B&32|0)!=0,E=f!=f|!1,l=E?0:Be,A=l+3|0,ks(r,32,Nt,A,d),u=e[r>>2]|0,u&32||(ps(gt,l,r)|0,u=e[r>>2]|0),u&32||ps(E?M?16477:16481:M?16469:16473,3,r)|0,ks(r,32,Nt,A,xt^8192),u=(A|0)<(Nt|0)?Nt:A;while(!1);le=It;continue e}default:d=xt,l=A,M=0,B=16433,u=qt}while(!1);t:do if((Et|0)==64)if(d=Mr,l=e[d>>2]|0,d=e[d+4>>2]|0,E=B&32,(l|0)==0&(d|0)==0)u=qt,l=M,M=0,E=16433,Et=77;else{u=qt;do u=u+-1|0,U[u>>0]=me[16417+(l&15)>>0]|E,l=Na(l|0,d|0,4)|0,d=De;while(!((l|0)==0&(d|0)==0));Et=Mr,(M&8|0)==0|(e[Et>>2]|0)==0&(e[Et+4>>2]|0)==0?(l=M,M=0,E=16433,Et=77):(l=M,M=2,E=16433+(B>>4)|0,Et=77)}else if((Et|0)==76)u=ja(u,l,qt)|0,l=xt,M=d,Et=77;else if((Et|0)==82)Et=0,xt=Io(u,0,A)|0,gt=(xt|0)==0,le=u,l=gt?A:xt-u|0,M=0,B=16433,u=gt?u+A|0:xt;else if((Et|0)==86){for(Et=0,l=0,u=0,E=e[Mr>>2]|0;d=e[E>>2]|0,!(!d||(u=Dl(md,d)|0,(u|0)<0|u>>>0>(A-l|0)>>>0));)if(l=u+l|0,A>>>0>l>>>0)E=E+4|0;else break;if((u|0)<0){t=-1;break e}if(ks(r,32,Nt,l,xt),!l)u=0,Et=98;else for(d=0,A=e[Mr>>2]|0;;){if(u=e[A>>2]|0,!u){u=l,Et=98;break t}if(u=Dl(md,u)|0,d=u+d|0,(d|0)>(l|0)){u=l,Et=98;break t}if(e[r>>2]&32||ps(md,u,r)|0,d>>>0>=l>>>0){u=l,Et=98;break}else A=A+4|0}}while(!1);if((Et|0)==98){Et=0,ks(r,32,Nt,u,xt^8192),le=It,u=(Nt|0)>(u|0)?Nt:u;continue}(Et|0)==77&&(Et=0,d=(A|0)>-1?l&-65537:l,l=Mr,l=(e[l>>2]|0)!=0|(e[l+4>>2]|0)!=0,(A|0)!=0|l?(l=(l&1^1)+(gn-u)|0,le=u,l=(A|0)>(l|0)?A:l,B=E,u=qt):(le=qt,l=0,B=E,u=qt)),E=u-le|0,l=(l|0)<(E|0)?E:l,A=M+l|0,u=(Nt|0)<(A|0)?A:Nt,ks(r,32,u,A,d),e[r>>2]&32||ps(B,M,r)|0,ks(r,48,u,A,d^65536),ks(r,48,l,E,0),e[r>>2]&32||ps(le,E,r)|0,ks(r,32,u,A,d^8192),le=It}e:do if((Et|0)==245&&!r)if(a){for(t=1;a=e[n+(t<<2)>>2]|0,!!a;)if(wu(s+(t<<3)|0,a,c),t=t+1|0,(t|0)>=10){t=1;break e}if((t|0)<10)for(;;){if(e[n+(t<<2)>>2]|0){t=-1;break e}if(t=t+1|0,(t|0)>=10){t=1;break}}else t=1}else t=0;while(!1);return S=_l,t|0}function t1(r,a,c){return r=r|0,a=a|0,c=c|0,Pl(r,a,c)|0}function D1(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0;B=S,S=S+240|0,M=B,e[M>>2]=r;e:do if((s|0)>1)for(E=0-a|0,t=s,u=r,d=r,f=1;;){if(r=u+E|0,A=t+-2|0,l=u+(0-((e[n+(A<<2)>>2]|0)+a))|0,(Pi[c&15](d,l)|0)>-1&&(Pi[c&15](d,r)|0)>-1){s=f;break e}if(s=f+1|0,u=M+(f<<2)|0,(Pi[c&15](l,r)|0)>-1?(e[u>>2]=l,r=l,t=t+-1|0):(e[u>>2]=r,t=A),(t|0)<=1)break e;u=r,d=e[M>>2]|0,f=s}else s=1;while(!1);i1(a,M,s),S=B}function gc(r,a,c,s,n,t,u){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0;var l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0;le=S,S=S+240|0,B=le,d=e[s>>2]|0,s=e[s+4>>2]|0,e[B>>2]=r,M=0-a|0;e:do if((s|0)!=0|(d|0)!=1&&(l=r+(0-(e[u+(n<<2)>>2]|0))|0,(Pi[c&15](l,r)|0)>=1))for(t=(t|0)==0,E=l,f=d,A=s,l=1;;){if(t&(n|0)>1){if(s=e[u+(n+-2<<2)>>2]|0,(Pi[c&15](r+M|0,E)|0)>-1){t=n,s=l,H=20;break e}if((Pi[c&15](r+(0-(s+a))|0,E)|0)>-1){t=n,s=l,H=20;break e}}s=l+1|0,e[B+(l<<2)>>2]=E,t=f+-1|0;do if(t){if(t&1)H=11;else{r=t,t=0;do t=t+1|0,r=r>>>1;while(!(r&1|0));t||(H=11)}if((H|0)==11){if(H=0,!A){t=64,H=16;break}if(!(A&1))r=A,t=0;else{d=0,r=f,l=A,t=0;break}for(;;)if(l=t+1|0,r=r>>>1,r&1){r=l;break}else t=l;if(r)t=t+33|0;else{d=0,r=f,l=A,t=0;break}}t>>>0>31?H=16:(d=t,r=f,l=A)}else t=32,H=16;while(!1);if((H|0)==16&&(H=0,d=t+-32|0,r=A,l=0),f=l<<32-d|r>>>d,A=l>>>d,t=t+n|0,!((A|0)!=0|(f|0)!=1)){r=E,H=20;break e}if(r=E+(0-(e[u+(t<<2)>>2]|0))|0,(Pi[c&15](r,e[B>>2]|0)|0)<1){r=E,n=t,t=0,H=19;break}else d=E,n=t,t=1,E=r,l=s,r=d}else s=1,H=19;while(!1);(H|0)==19&&!(t|0)&&(t=n,H=20),(H|0)==20&&(i1(a,B,s),D1(r,a,c,t,u)),S=le}function i1(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0;u=S,S=S+256|0,s=u;e:do if((c|0)>=2&&(t=a+(c<<2)|0,e[t>>2]=s,(r|0)!=0))for(;;){n=r>>>0>256?256:r,Cs(s|0,e[a>>2]|0,n|0)|0,s=0;do l=a+(s<<2)|0,s=s+1|0,Cs(e[l>>2]|0,e[a+(s<<2)>>2]|0,n|0)|0,e[l>>2]=(e[l>>2]|0)+n;while((s|0)!=(c|0));if((r|0)==(n|0))break e;r=r-n|0,s=e[t>>2]|0}while(!1);S=u}function n1(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;return s=r+20|0,n=e[s>>2]|0,r=(e[r+16>>2]|0)-n|0,r=r>>>0>c>>>0?c:r,Cs(n|0,a|0,r|0)|0,e[s>>2]=(e[s>>2]|0)+r,c|0}function wu(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0;e:do if(a>>>0<=20)do switch(a|0){case 9:{s=(e[c>>2]|0)+3&-4,a=e[s>>2]|0,e[c>>2]=s+4,e[r>>2]=a;break e}case 10:{s=(e[c>>2]|0)+3&-4,a=e[s>>2]|0,e[c>>2]=s+4,s=r,e[s>>2]=a,e[s+4>>2]=((a|0)<0)<<31>>31;break e}case 11:{s=(e[c>>2]|0)+3&-4,a=e[s>>2]|0,e[c>>2]=s+4,s=r,e[s>>2]=a,e[s+4>>2]=0;break e}case 12:{s=(e[c>>2]|0)+7&-8,a=s,n=e[a>>2]|0,a=e[a+4>>2]|0,e[c>>2]=s+8,s=r,e[s>>2]=n,e[s+4>>2]=a;break e}case 13:{n=(e[c>>2]|0)+3&-4,s=e[n>>2]|0,e[c>>2]=n+4,s=(s&65535)<<16>>16,n=r,e[n>>2]=s,e[n+4>>2]=((s|0)<0)<<31>>31;break e}case 14:{n=(e[c>>2]|0)+3&-4,s=e[n>>2]|0,e[c>>2]=n+4,n=r,e[n>>2]=s&65535,e[n+4>>2]=0;break e}case 15:{n=(e[c>>2]|0)+3&-4,s=e[n>>2]|0,e[c>>2]=n+4,s=(s&255)<<24>>24,n=r,e[n>>2]=s,e[n+4>>2]=((s|0)<0)<<31>>31;break e}case 16:{n=(e[c>>2]|0)+3&-4,s=e[n>>2]|0,e[c>>2]=n+4,n=r,e[n>>2]=s&255,e[n+4>>2]=0;break e}case 17:{n=(e[c>>2]|0)+7&-8,t=+p[n>>3],e[c>>2]=n+8,p[r>>3]=t;break e}case 18:{n=(e[c>>2]|0)+7&-8,t=+p[n>>3],e[c>>2]=n+8,p[r>>3]=t;break e}default:break e}while(!1);while(!1)}function ja(r,a,c){r=r|0,a=a|0,c=c|0;var s=0;if(a>>>0>0|(a|0)==0&r>>>0>4294967295)for(;;)if(s=qu(r|0,a|0,10,0)|0,c=c+-1|0,U[c>>0]=s|48,s=wl(r|0,a|0,10,0)|0,a>>>0>9|(a|0)==9&r>>>0>4294967295)r=s,a=De;else{r=s;break}if(r)for(;c=c+-1|0,U[c>>0]=(r>>>0)%10|0|48,!(r>>>0<10);)r=(r>>>0)/10|0;return c|0}function ks(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0;l=S,S=S+256|0,u=l;do if((c|0)>(s|0)&(n&73728|0)==0){if(n=c-s|0,Ht(u|0,a|0,(n>>>0>256?256:n)|0)|0,a=e[r>>2]|0,t=(a&32|0)==0,n>>>0>255){s=c-s|0;do t&&(ps(u,256,r)|0,a=e[r>>2]|0),n=n+-256|0,t=(a&32|0)==0;while(n>>>0>255);if(t)n=s&255;else break}else if(!t)break;ps(u,n,r)|0}while(!1);S=l}function Ai(r){r=r|0;var a=0,c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0,ut=0,Kt=0,mt=0;do if(r>>>0<245){if(B=r>>>0<11?16:r+11&-8,r=B>>>3,l=e[756]|0,c=l>>>r,c&3){r=(c&1^1)+r|0,s=r<<1,c=3064+(s<<2)|0,s=3064+(s+2<<2)|0,n=e[s>>2]|0,t=n+8|0,u=e[t>>2]|0;do if((c|0)!=(u|0))if(u>>>0<(e[760]|0)>>>0&&Jt(),a=u+12|0,(e[a>>2]|0)==(n|0)){e[a>>2]=c,e[s>>2]=u;break}else Jt();else e[756]=l&~(1<<r);while(!1);return mt=r<<3,e[n+4>>2]=mt|3,mt=n+(mt|4)|0,e[mt>>2]=e[mt>>2]|1,mt=t,mt|0}if(u=e[758]|0,B>>>0>u>>>0){if(c){s=2<<r,s=c<<r&(s|0-s),s=(s&0-s)+-1|0,d=s>>>12&16,s=s>>>d,n=s>>>5&8,s=s>>>n,t=s>>>2&4,s=s>>>t,c=s>>>1&2,s=s>>>c,r=s>>>1&1,r=(n|d|t|c|r)+(s>>>r)|0,s=r<<1,c=3064+(s<<2)|0,s=3064+(s+2<<2)|0,t=e[s>>2]|0,d=t+8|0,n=e[d>>2]|0;do if((c|0)!=(n|0))if(n>>>0<(e[760]|0)>>>0&&Jt(),a=n+12|0,(e[a>>2]|0)==(t|0)){e[a>>2]=c,e[s>>2]=n,f=e[758]|0;break}else Jt();else e[756]=l&~(1<<r),f=u;while(!1);return mt=r<<3,u=mt-B|0,e[t+4>>2]=B|3,l=t+B|0,e[t+(B|4)>>2]=u|1,e[t+mt>>2]=u,f&&(n=e[761]|0,c=f>>>3,a=c<<1,s=3064+(a<<2)|0,r=e[756]|0,c=1<<c,r&c?(r=3064+(a+2<<2)|0,a=e[r>>2]|0,a>>>0<(e[760]|0)>>>0?Jt():(A=r,E=a)):(e[756]=r|c,A=3064+(a+2<<2)|0,E=s),e[A>>2]=n,e[E+12>>2]=n,e[n+8>>2]=E,e[n+12>>2]=s),e[758]=u,e[761]=l,mt=d,mt|0}if(r=e[757]|0,r){for(c=(r&0-r)+-1|0,Kt=c>>>12&16,c=c>>>Kt,ut=c>>>5&8,c=c>>>ut,mt=c>>>2&4,c=c>>>mt,r=c>>>1&2,c=c>>>r,s=c>>>1&1,s=e[3328+((ut|Kt|mt|r|s)+(c>>>s)<<2)>>2]|0,c=(e[s+4>>2]&-8)-B|0,r=s;;){if(a=e[r+16>>2]|0,!a&&(a=e[r+20>>2]|0,!a)){d=c;break}r=(e[a+4>>2]&-8)-B|0,mt=r>>>0<c>>>0,c=mt?r:c,r=a,s=mt?a:s}t=e[760]|0,s>>>0<t>>>0&&Jt(),l=s+B|0,s>>>0>=l>>>0&&Jt(),u=e[s+24>>2]|0,c=e[s+12>>2]|0;do if((c|0)==(s|0)){if(r=s+20|0,a=e[r>>2]|0,!a&&(r=s+16|0,a=e[r>>2]|0,!a)){M=0;break}for(;;){if(c=a+20|0,n=e[c>>2]|0,n){a=n,r=c;continue}if(c=a+16|0,n=e[c>>2]|0,n)a=n,r=c;else break}if(r>>>0<t>>>0)Jt();else{e[r>>2]=0,M=a;break}}else if(n=e[s+8>>2]|0,n>>>0<t>>>0&&Jt(),a=n+12|0,(e[a>>2]|0)!=(s|0)&&Jt(),r=c+8|0,(e[r>>2]|0)==(s|0)){e[a>>2]=c,e[r>>2]=n,M=c;break}else Jt();while(!1);do if(u){if(a=e[s+28>>2]|0,r=3328+(a<<2)|0,(s|0)==(e[r>>2]|0)){if(e[r>>2]=M,!M){e[757]=e[757]&~(1<<a);break}}else if(u>>>0<(e[760]|0)>>>0&&Jt(),a=u+16|0,(e[a>>2]|0)==(s|0)?e[a>>2]=M:e[u+20>>2]=M,!M)break;r=e[760]|0,M>>>0<r>>>0&&Jt(),e[M+24>>2]=u,a=e[s+16>>2]|0;do if(a)if(a>>>0<r>>>0)Jt();else{e[M+16>>2]=a,e[a+24>>2]=M;break}while(!1);if(a=e[s+20>>2]|0,a)if(a>>>0<(e[760]|0)>>>0)Jt();else{e[M+20>>2]=a,e[a+24>>2]=M;break}}while(!1);return d>>>0<16?(mt=d+B|0,e[s+4>>2]=mt|3,mt=s+(mt+4)|0,e[mt>>2]=e[mt>>2]|1):(e[s+4>>2]=B|3,e[s+(B|4)>>2]=d|1,e[s+(d+B)>>2]=d,a=e[758]|0,a&&(t=e[761]|0,c=a>>>3,a=c<<1,n=3064+(a<<2)|0,r=e[756]|0,c=1<<c,r&c?(a=3064+(a+2<<2)|0,r=e[a>>2]|0,r>>>0<(e[760]|0)>>>0?Jt():(H=a,le=r)):(e[756]=r|c,H=3064+(a+2<<2)|0,le=n),e[H>>2]=t,e[le+12>>2]=t,e[t+8>>2]=le,e[t+12>>2]=n),e[758]=d,e[761]=l),mt=s+8|0,mt|0}else le=B}else le=B}else if(r>>>0<=4294967231)if(r=r+11|0,E=r&-8,A=e[757]|0,A){c=0-E|0,r=r>>>8,r?E>>>0>16777215?f=31:(le=(r+1048320|0)>>>16&8,Ae=r<<le,H=(Ae+520192|0)>>>16&4,Ae=Ae<<H,f=(Ae+245760|0)>>>16&2,f=14-(H|le|f)+(Ae<<f>>>15)|0,f=E>>>(f+7|0)&1|f<<1):f=0,r=e[3328+(f<<2)>>2]|0;e:do if(!r)n=0,r=0,Ae=86;else for(u=c,n=0,l=E<<((f|0)==31?0:25-(f>>>1)|0),d=r,r=0;;){if(t=e[d+4>>2]&-8,c=t-E|0,c>>>0<u>>>0)if((t|0)==(E|0)){t=d,r=d,Ae=90;break e}else r=d;else c=u;if(Ae=e[d+20>>2]|0,d=e[d+16+(l>>>31<<2)>>2]|0,n=(Ae|0)==0|(Ae|0)==(d|0)?n:Ae,d)u=c,l=l<<1;else{Ae=86;break}}while(!1);if((Ae|0)==86){if((n|0)==0&(r|0)==0){if(r=2<<f,r=A&(r|0-r),!r){le=E;break}r=(r&0-r)+-1|0,M=r>>>12&16,r=r>>>M,A=r>>>5&8,r=r>>>A,H=r>>>2&4,r=r>>>H,le=r>>>1&2,r=r>>>le,n=r>>>1&1,n=e[3328+((A|M|H|le|n)+(r>>>n)<<2)>>2]|0,r=0}n?(t=n,Ae=90):(l=c,d=r)}if((Ae|0)==90)for(;;){if(Ae=0,le=(e[t+4>>2]&-8)-E|0,n=le>>>0<c>>>0,c=n?le:c,r=n?t:r,n=e[t+16>>2]|0,n){t=n,Ae=90;continue}if(t=e[t+20>>2]|0,t)Ae=90;else{l=c,d=r;break}}if(d|0&&l>>>0<((e[758]|0)-E|0)>>>0){n=e[760]|0,d>>>0<n>>>0&&Jt(),u=d+E|0,d>>>0>=u>>>0&&Jt(),t=e[d+24>>2]|0,c=e[d+12>>2]|0;do if((c|0)==(d|0)){if(r=d+20|0,a=e[r>>2]|0,!a&&(r=d+16|0,a=e[r>>2]|0,!a)){B=0;break}for(;;){if(c=a+20|0,s=e[c>>2]|0,s){a=s,r=c;continue}if(c=a+16|0,s=e[c>>2]|0,s)a=s,r=c;else break}if(r>>>0<n>>>0)Jt();else{e[r>>2]=0,B=a;break}}else if(s=e[d+8>>2]|0,s>>>0<n>>>0&&Jt(),a=s+12|0,(e[a>>2]|0)!=(d|0)&&Jt(),r=c+8|0,(e[r>>2]|0)==(d|0)){e[a>>2]=c,e[r>>2]=s,B=c;break}else Jt();while(!1);do if(t){if(a=e[d+28>>2]|0,r=3328+(a<<2)|0,(d|0)==(e[r>>2]|0)){if(e[r>>2]=B,!B){e[757]=e[757]&~(1<<a);break}}else if(t>>>0<(e[760]|0)>>>0&&Jt(),a=t+16|0,(e[a>>2]|0)==(d|0)?e[a>>2]=B:e[t+20>>2]=B,!B)break;r=e[760]|0,B>>>0<r>>>0&&Jt(),e[B+24>>2]=t,a=e[d+16>>2]|0;do if(a)if(a>>>0<r>>>0)Jt();else{e[B+16>>2]=a,e[a+24>>2]=B;break}while(!1);if(a=e[d+20>>2]|0,a)if(a>>>0<(e[760]|0)>>>0)Jt();else{e[B+20>>2]=a,e[a+24>>2]=B;break}}while(!1);e:do if(l>>>0>=16){if(e[d+4>>2]=E|3,e[d+(E|4)>>2]=l|1,e[d+(l+E)>>2]=l,a=l>>>3,l>>>0<256){r=a<<1,s=3064+(r<<2)|0,c=e[756]|0,a=1<<a,c&a?(a=3064+(r+2<<2)|0,r=e[a>>2]|0,r>>>0<(e[760]|0)>>>0?Jt():(Y=a,q=r)):(e[756]=c|a,Y=3064+(r+2<<2)|0,q=s),e[Y>>2]=u,e[q+12>>2]=u,e[d+(E+8)>>2]=q,e[d+(E+12)>>2]=s;break}if(a=l>>>8,a?l>>>0>16777215?s=31:(Kt=(a+1048320|0)>>>16&8,mt=a<<Kt,ut=(mt+520192|0)>>>16&4,mt=mt<<ut,s=(mt+245760|0)>>>16&2,s=14-(ut|Kt|s)+(mt<<s>>>15)|0,s=l>>>(s+7|0)&1|s<<1):s=0,a=3328+(s<<2)|0,e[d+(E+28)>>2]=s,e[d+(E+20)>>2]=0,e[d+(E+16)>>2]=0,r=e[757]|0,c=1<<s,!(r&c)){e[757]=r|c,e[a>>2]=u,e[d+(E+24)>>2]=a,e[d+(E+12)>>2]=u,e[d+(E+8)>>2]=u;break}a=e[a>>2]|0;t:do if((e[a+4>>2]&-8|0)!=(l|0)){for(s=l<<((s|0)==31?0:25-(s>>>1)|0);r=a+16+(s>>>31<<2)|0,c=e[r>>2]|0,!!c;)if((e[c+4>>2]&-8|0)==(l|0)){X=c;break t}else s=s<<1,a=c;if(r>>>0<(e[760]|0)>>>0)Jt();else{e[r>>2]=u,e[d+(E+24)>>2]=a,e[d+(E+12)>>2]=u,e[d+(E+8)>>2]=u;break e}}else X=a;while(!1);if(a=X+8|0,r=e[a>>2]|0,mt=e[760]|0,r>>>0>=mt>>>0&X>>>0>=mt>>>0){e[r+12>>2]=u,e[a>>2]=u,e[d+(E+8)>>2]=r,e[d+(E+12)>>2]=X,e[d+(E+24)>>2]=0;break}else Jt()}else mt=l+E|0,e[d+4>>2]=mt|3,mt=d+(mt+4)|0,e[mt>>2]=e[mt>>2]|1;while(!1);return mt=d+8|0,mt|0}else le=E}else le=E;else le=-1;while(!1);if(c=e[758]|0,c>>>0>=le>>>0)return a=c-le|0,r=e[761]|0,a>>>0>15?(e[761]=r+le,e[758]=a,e[r+(le+4)>>2]=a|1,e[r+c>>2]=a,e[r+4>>2]=le|3):(e[758]=0,e[761]=0,e[r+4>>2]=c|3,mt=r+(c+4)|0,e[mt>>2]=e[mt>>2]|1),mt=r+8|0,mt|0;if(r=e[759]|0,r>>>0>le>>>0)return Kt=r-le|0,e[759]=Kt,mt=e[762]|0,e[762]=mt+le,e[mt+(le+4)>>2]=Kt|1,e[mt+4>>2]=le|3,mt=mt+8|0,mt|0;do if(!(e[874]|0))if(r=pn(30)|0,r+-1&r)Jt();else{e[876]=r,e[875]=r,e[877]=-1,e[878]=-1,e[879]=0,e[867]=0,e[874]=(On(0)|0)&-16^1431655768;break}while(!1);if(d=le+48|0,l=e[876]|0,f=le+47|0,u=l+f|0,l=0-l|0,A=u&l,A>>>0<=le>>>0||(r=e[866]|0,r|0&&(q=e[864]|0,X=q+A|0,X>>>0<=q>>>0|X>>>0>r>>>0)))return mt=0,mt|0;e:do if(e[867]&4)r=0,Ae=191;else{r=e[762]|0;t:do if(r){for(n=3472;;){if(c=e[n>>2]|0,c>>>0<=r>>>0&&(ee=n+4|0,(c+(e[ee>>2]|0)|0)>>>0>r>>>0)){t=n,r=ee;break}if(n=e[n+8>>2]|0,!n){Ae=174;break t}}if(c=u-(e[759]|0)&l,c>>>0<2147483647)if(n=$e(c|0)|0,X=(n|0)==((e[t>>2]|0)+(e[r>>2]|0)|0),r=X?c:0,X){if((n|0)!=-1){ce=n,H=r,Ae=194;break e}}else Ae=184;else r=0}else Ae=174;while(!1);do if((Ae|0)==174)if(t=$e(0)|0,(t|0)!=-1)if(r=t,c=e[875]|0,n=c+-1|0,n&r?c=A-r+(n+r&0-c)|0:c=A,r=e[864]|0,n=r+c|0,c>>>0>le>>>0&c>>>0<2147483647){if(X=e[866]|0,X|0&&n>>>0<=r>>>0|n>>>0>X>>>0){r=0;break}if(n=$e(c|0)|0,X=(n|0)==(t|0),r=X?c:0,X){ce=t,H=r,Ae=194;break e}else Ae=184}else r=0;else r=0;while(!1);t:do if((Ae|0)==184){t=0-c|0;do if(d>>>0>c>>>0&(c>>>0<2147483647&(n|0)!=-1)&&(se=e[876]|0,se=f-c+se&0-se,se>>>0<2147483647))if(($e(se|0)|0)==-1){$e(t|0)|0;break t}else{c=se+c|0;break}while(!1);if((n|0)!=-1){ce=n,H=c,Ae=194;break e}}while(!1);e[867]=e[867]|4,Ae=191}while(!1);if((Ae|0)==191&&A>>>0<2147483647&&(ce=$e(A|0)|0,$=$e(0)|0,ce>>>0<$>>>0&((ce|0)!=-1&($|0)!=-1))&&(Be=$-ce|0,gt=Be>>>0>(le+40|0)>>>0,gt)&&(H=gt?Be:r,Ae=194),(Ae|0)==194){r=(e[864]|0)+H|0,e[864]=r,r>>>0>(e[865]|0)>>>0&&(e[865]=r),u=e[762]|0;e:do if(u){t=3472;do{if(r=e[t>>2]|0,c=t+4|0,n=e[c>>2]|0,(ce|0)==(r+n|0)){xt=r,It=c,Nt=n,Et=t,Ae=204;break}t=e[t+8>>2]|0}while(t|0);if((Ae|0)==204&&!(e[Et+12>>2]&8|0)&&u>>>0<ce>>>0&u>>>0>=xt>>>0){e[It>>2]=Nt+H,mt=(e[759]|0)+H|0,Kt=u+8|0,Kt=Kt&7|0?0-Kt&7:0,ut=mt-Kt|0,e[762]=u+Kt,e[759]=ut,e[u+(Kt+4)>>2]=ut|1,e[u+(mt+4)>>2]=40,e[763]=e[878];break}for(r=e[760]|0,ce>>>0<r>>>0&&(e[760]=ce,r=ce),c=ce+H|0,t=3472;;){if((e[t>>2]|0)==(c|0)){n=t,c=t,Ae=212;break}if(t=e[t+8>>2]|0,!t){c=3472;break}}if((Ae|0)==212)if(e[c+12>>2]&8)c=3472;else{e[n>>2]=ce,M=c+4|0,e[M>>2]=(e[M>>2]|0)+H,M=ce+8|0,M=M&7|0?0-M&7:0,f=ce+(H+8)|0,f=f&7|0?0-f&7:0,a=ce+(f+H)|0,E=M+le|0,B=ce+E|0,A=a-(ce+M)-le|0,e[ce+(M+4)>>2]=le|3;t:do if((a|0)!=(u|0)){if((a|0)==(e[761]|0)){mt=(e[758]|0)+A|0,e[758]=mt,e[761]=B,e[ce+(E+4)>>2]=mt|1,e[ce+(mt+E)>>2]=mt;break}if(l=H+4|0,c=e[ce+(l+f)>>2]|0,(c&3|0)==1){d=c&-8,t=c>>>3;i:do if(c>>>0>=256){u=e[ce+((f|24)+H)>>2]|0,s=e[ce+(H+12+f)>>2]|0;do if((s|0)==(a|0)){if(n=f|16,s=ce+(l+n)|0,c=e[s>>2]|0,!c&&(s=ce+(n+H)|0,c=e[s>>2]|0,!c)){oi=0;break}for(;;){if(n=c+20|0,t=e[n>>2]|0,t){c=t,s=n;continue}if(n=c+16|0,t=e[n>>2]|0,t)c=t,s=n;else break}if(s>>>0<r>>>0)Jt();else{e[s>>2]=0,oi=c;break}}else if(n=e[ce+((f|8)+H)>>2]|0,n>>>0<r>>>0&&Jt(),r=n+12|0,(e[r>>2]|0)!=(a|0)&&Jt(),c=s+8|0,(e[c>>2]|0)==(a|0)){e[r>>2]=s,e[c>>2]=n,oi=s;break}else Jt();while(!1);if(!u)break;r=e[ce+(H+28+f)>>2]|0,c=3328+(r<<2)|0;do if((a|0)!=(e[c>>2]|0)){if(u>>>0<(e[760]|0)>>>0&&Jt(),r=u+16|0,(e[r>>2]|0)==(a|0)?e[r>>2]=oi:e[u+20>>2]=oi,!oi)break i}else{if(e[c>>2]=oi,oi)break;e[757]=e[757]&~(1<<r);break i}while(!1);c=e[760]|0,oi>>>0<c>>>0&&Jt(),e[oi+24>>2]=u,a=f|16,r=e[ce+(a+H)>>2]|0;do if(r)if(r>>>0<c>>>0)Jt();else{e[oi+16>>2]=r,e[r+24>>2]=oi;break}while(!1);if(a=e[ce+(l+a)>>2]|0,!a)break;if(a>>>0<(e[760]|0)>>>0)Jt();else{e[oi+20>>2]=a,e[a+24>>2]=oi;break}}else{s=e[ce+((f|8)+H)>>2]|0,n=e[ce+(H+12+f)>>2]|0,c=3064+(t<<1<<2)|0;do if((s|0)!=(c|0)){if(s>>>0<r>>>0&&Jt(),(e[s+12>>2]|0)==(a|0))break;Jt()}while(!1);if((n|0)==(s|0)){e[756]=e[756]&~(1<<t);break}do if((n|0)==(c|0))gi=n+8|0;else{if(n>>>0<r>>>0&&Jt(),r=n+8|0,(e[r>>2]|0)==(a|0)){gi=r;break}Jt()}while(!1);e[s+12>>2]=n,e[gi>>2]=s}while(!1);a=ce+((d|f)+H)|0,n=d+A|0}else n=A;if(a=a+4|0,e[a>>2]=e[a>>2]&-2,e[ce+(E+4)>>2]=n|1,e[ce+(n+E)>>2]=n,a=n>>>3,n>>>0<256){r=a<<1,s=3064+(r<<2)|0,c=e[756]|0,a=1<<a;do if(!(c&a))e[756]=c|a,ut=3064+(r+2<<2)|0,Kt=s;else{if(a=3064+(r+2<<2)|0,r=e[a>>2]|0,r>>>0>=(e[760]|0)>>>0){ut=a,Kt=r;break}Jt()}while(!1);e[ut>>2]=B,e[Kt+12>>2]=B,e[ce+(E+8)>>2]=Kt,e[ce+(E+12)>>2]=s;break}a=n>>>8;do if(!a)s=0;else{if(n>>>0>16777215){s=31;break}ut=(a+1048320|0)>>>16&8,Kt=a<<ut,oi=(Kt+520192|0)>>>16&4,Kt=Kt<<oi,s=(Kt+245760|0)>>>16&2,s=14-(oi|ut|s)+(Kt<<s>>>15)|0,s=n>>>(s+7|0)&1|s<<1}while(!1);if(a=3328+(s<<2)|0,e[ce+(E+28)>>2]=s,e[ce+(E+20)>>2]=0,e[ce+(E+16)>>2]=0,r=e[757]|0,c=1<<s,!(r&c)){e[757]=r|c,e[a>>2]=B,e[ce+(E+24)>>2]=a,e[ce+(E+12)>>2]=B,e[ce+(E+8)>>2]=B;break}a=e[a>>2]|0;i:do if((e[a+4>>2]&-8|0)!=(n|0)){for(s=n<<((s|0)==31?0:25-(s>>>1)|0);r=a+16+(s>>>31<<2)|0,c=e[r>>2]|0,!!c;)if((e[c+4>>2]&-8|0)==(n|0)){mt=c;break i}else s=s<<1,a=c;if(r>>>0<(e[760]|0)>>>0)Jt();else{e[r>>2]=B,e[ce+(E+24)>>2]=a,e[ce+(E+12)>>2]=B,e[ce+(E+8)>>2]=B;break t}}else mt=a;while(!1);if(a=mt+8|0,r=e[a>>2]|0,Kt=e[760]|0,r>>>0>=Kt>>>0&mt>>>0>=Kt>>>0){e[r+12>>2]=B,e[a>>2]=B,e[ce+(E+8)>>2]=r,e[ce+(E+12)>>2]=mt,e[ce+(E+24)>>2]=0;break}else Jt()}else mt=(e[759]|0)+A|0,e[759]=mt,e[762]=B,e[ce+(E+4)>>2]=mt|1;while(!1);return mt=ce+(M|8)|0,mt|0}for(;r=e[c>>2]|0,!(r>>>0<=u>>>0&&(a=e[c+4>>2]|0,s=r+a|0,s>>>0>u>>>0));)c=e[c+8>>2]|0;if(n=r+(a+-39)|0,r=r+(a+-47+(n&7|0?0-n&7:0))|0,n=u+16|0,r=r>>>0<n>>>0?u:r,a=r+8|0,c=ce+8|0,c=c&7|0?0-c&7:0,mt=H+-40-c|0,e[762]=ce+c,e[759]=mt,e[ce+(c+4)>>2]=mt|1,e[ce+(H+-36)>>2]=40,e[763]=e[878],c=r+4|0,e[c>>2]=27,e[a>>2]=e[868],e[a+4>>2]=e[869],e[a+8>>2]=e[870],e[a+12>>2]=e[871],e[868]=ce,e[869]=H,e[871]=0,e[870]=a,a=r+28|0,e[a>>2]=7,(r+32|0)>>>0<s>>>0)do mt=a,a=a+4|0,e[a>>2]=7;while((mt+8|0)>>>0<s>>>0);if((r|0)!=(u|0)){if(t=r-u|0,e[c>>2]=e[c>>2]&-2,e[u+4>>2]=t|1,e[r>>2]=t,a=t>>>3,t>>>0<256){r=a<<1,s=3064+(r<<2)|0,c=e[756]|0,a=1<<a,c&a?(a=3064+(r+2<<2)|0,r=e[a>>2]|0,r>>>0<(e[760]|0)>>>0?Jt():(qt=a,ui=r)):(e[756]=c|a,qt=3064+(r+2<<2)|0,ui=s),e[qt>>2]=u,e[ui+12>>2]=u,e[u+8>>2]=ui,e[u+12>>2]=s;break}if(a=t>>>8,a?t>>>0>16777215?s=31:(Kt=(a+1048320|0)>>>16&8,mt=a<<Kt,ut=(mt+520192|0)>>>16&4,mt=mt<<ut,s=(mt+245760|0)>>>16&2,s=14-(ut|Kt|s)+(mt<<s>>>15)|0,s=t>>>(s+7|0)&1|s<<1):s=0,c=3328+(s<<2)|0,e[u+28>>2]=s,e[u+20>>2]=0,e[n>>2]=0,a=e[757]|0,r=1<<s,!(a&r)){e[757]=a|r,e[c>>2]=u,e[u+24>>2]=c,e[u+12>>2]=u,e[u+8>>2]=u;break}a=e[c>>2]|0;t:do if((e[a+4>>2]&-8|0)!=(t|0)){for(s=t<<((s|0)==31?0:25-(s>>>1)|0);r=a+16+(s>>>31<<2)|0,c=e[r>>2]|0,!!c;)if((e[c+4>>2]&-8|0)==(t|0)){yi=c;break t}else s=s<<1,a=c;if(r>>>0<(e[760]|0)>>>0)Jt();else{e[r>>2]=u,e[u+24>>2]=a,e[u+12>>2]=u,e[u+8>>2]=u;break e}}else yi=a;while(!1);if(a=yi+8|0,r=e[a>>2]|0,mt=e[760]|0,r>>>0>=mt>>>0&yi>>>0>=mt>>>0){e[r+12>>2]=u,e[a>>2]=u,e[u+8>>2]=r,e[u+12>>2]=yi,e[u+24>>2]=0;break}else Jt()}}else{mt=e[760]|0,(mt|0)==0|ce>>>0<mt>>>0&&(e[760]=ce),e[868]=ce,e[869]=H,e[871]=0,e[765]=e[874],e[764]=-1,a=0;do mt=a<<1,Kt=3064+(mt<<2)|0,e[3064+(mt+3<<2)>>2]=Kt,e[3064+(mt+2<<2)>>2]=Kt,a=a+1|0;while((a|0)!=32);mt=ce+8|0,mt=mt&7|0?0-mt&7:0,Kt=H+-40-mt|0,e[762]=ce+mt,e[759]=Kt,e[ce+(mt+4)>>2]=Kt|1,e[ce+(H+-36)>>2]=40,e[763]=e[878]}while(!1);if(a=e[759]|0,a>>>0>le>>>0)return Kt=a-le|0,e[759]=Kt,mt=e[762]|0,e[762]=mt+le,e[mt+(le+4)>>2]=Kt|1,e[mt+4>>2]=le|3,mt=mt+8|0,mt|0}return e[(Zn()|0)>>2]=12,mt=0,mt|0}function Xi(r){r=r|0;var a=0,c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0;if(r){a=r+-8|0,l=e[760]|0,a>>>0<l>>>0&&Jt(),c=e[r+-4>>2]|0,s=c&3,(s|0)==1&&Jt(),B=c&-8,le=r+(B+-8)|0;do if(c&1)se=a,t=B;else{if(a=e[a>>2]|0,!s)return;if(d=-8-a|0,A=r+d|0,E=a+B|0,A>>>0<l>>>0&&Jt(),(A|0)==(e[761]|0)){if(a=r+(B+-4)|0,c=e[a>>2]|0,(c&3|0)!=3){se=A,t=E;break}e[758]=E,e[a>>2]=c&-2,e[r+(d+4)>>2]=E|1,e[le>>2]=E;return}if(n=a>>>3,a>>>0<256){if(s=e[r+(d+8)>>2]|0,c=e[r+(d+12)>>2]|0,a=3064+(n<<1<<2)|0,(s|0)!=(a|0)&&(s>>>0<l>>>0&&Jt(),(e[s+12>>2]|0)!=(A|0)&&Jt()),(c|0)==(s|0)){e[756]=e[756]&~(1<<n),se=A,t=E;break}(c|0)!=(a|0)?(c>>>0<l>>>0&&Jt(),a=c+8|0,(e[a>>2]|0)==(A|0)?u=a:Jt()):u=c+8|0,e[s+12>>2]=c,e[u>>2]=s,se=A,t=E;break}u=e[r+(d+24)>>2]|0,s=e[r+(d+12)>>2]|0;do if((s|0)==(A|0)){if(c=r+(d+20)|0,a=e[c>>2]|0,!a&&(c=r+(d+16)|0,a=e[c>>2]|0,!a)){f=0;break}for(;;){if(s=a+20|0,n=e[s>>2]|0,n){a=n,c=s;continue}if(s=a+16|0,n=e[s>>2]|0,n)a=n,c=s;else break}if(c>>>0<l>>>0)Jt();else{e[c>>2]=0,f=a;break}}else if(n=e[r+(d+8)>>2]|0,n>>>0<l>>>0&&Jt(),a=n+12|0,(e[a>>2]|0)!=(A|0)&&Jt(),c=s+8|0,(e[c>>2]|0)==(A|0)){e[a>>2]=s,e[c>>2]=n,f=s;break}else Jt();while(!1);if(u){if(a=e[r+(d+28)>>2]|0,c=3328+(a<<2)|0,(A|0)==(e[c>>2]|0)){if(e[c>>2]=f,!f){e[757]=e[757]&~(1<<a),se=A,t=E;break}}else if(u>>>0<(e[760]|0)>>>0&&Jt(),a=u+16|0,(e[a>>2]|0)==(A|0)?e[a>>2]=f:e[u+20>>2]=f,!f){se=A,t=E;break}c=e[760]|0,f>>>0<c>>>0&&Jt(),e[f+24>>2]=u,a=e[r+(d+16)>>2]|0;do if(a)if(a>>>0<c>>>0)Jt();else{e[f+16>>2]=a,e[a+24>>2]=f;break}while(!1);if(a=e[r+(d+20)>>2]|0,a)if(a>>>0<(e[760]|0)>>>0)Jt();else{e[f+20>>2]=a,e[a+24>>2]=f,se=A,t=E;break}else se=A,t=E}else se=A,t=E}while(!1);if(se>>>0>=le>>>0&&Jt(),a=r+(B+-4)|0,c=e[a>>2]|0,c&1||Jt(),c&2)e[a>>2]=c&-2,e[se+4>>2]=t|1,e[se+t>>2]=t;else{if((le|0)==(e[762]|0)){if(q=(e[759]|0)+t|0,e[759]=q,e[762]=se,e[se+4>>2]=q|1,(se|0)!=(e[761]|0))return;e[761]=0,e[758]=0;return}if((le|0)==(e[761]|0)){q=(e[758]|0)+t|0,e[758]=q,e[761]=se,e[se+4>>2]=q|1,e[se+q>>2]=q;return}t=(c&-8)+t|0,n=c>>>3;do if(c>>>0>=256){u=e[r+(B+16)>>2]|0,a=e[r+(B|4)>>2]|0;do if((a|0)==(le|0)){if(c=r+(B+12)|0,a=e[c>>2]|0,!a&&(c=r+(B+8)|0,a=e[c>>2]|0,!a)){H=0;break}for(;;){if(s=a+20|0,n=e[s>>2]|0,n){a=n,c=s;continue}if(s=a+16|0,n=e[s>>2]|0,n)a=n,c=s;else break}if(c>>>0<(e[760]|0)>>>0)Jt();else{e[c>>2]=0,H=a;break}}else if(c=e[r+B>>2]|0,c>>>0<(e[760]|0)>>>0&&Jt(),s=c+12|0,(e[s>>2]|0)!=(le|0)&&Jt(),n=a+8|0,(e[n>>2]|0)==(le|0)){e[s>>2]=a,e[n>>2]=c,H=a;break}else Jt();while(!1);if(u){if(a=e[r+(B+20)>>2]|0,c=3328+(a<<2)|0,(le|0)==(e[c>>2]|0)){if(e[c>>2]=H,!H){e[757]=e[757]&~(1<<a);break}}else if(u>>>0<(e[760]|0)>>>0&&Jt(),a=u+16|0,(e[a>>2]|0)==(le|0)?e[a>>2]=H:e[u+20>>2]=H,!H)break;c=e[760]|0,H>>>0<c>>>0&&Jt(),e[H+24>>2]=u,a=e[r+(B+8)>>2]|0;do if(a)if(a>>>0<c>>>0)Jt();else{e[H+16>>2]=a,e[a+24>>2]=H;break}while(!1);if(a=e[r+(B+12)>>2]|0,a)if(a>>>0<(e[760]|0)>>>0)Jt();else{e[H+20>>2]=a,e[a+24>>2]=H;break}}}else{if(s=e[r+B>>2]|0,c=e[r+(B|4)>>2]|0,a=3064+(n<<1<<2)|0,(s|0)!=(a|0)&&(s>>>0<(e[760]|0)>>>0&&Jt(),(e[s+12>>2]|0)!=(le|0)&&Jt()),(c|0)==(s|0)){e[756]=e[756]&~(1<<n);break}(c|0)!=(a|0)?(c>>>0<(e[760]|0)>>>0&&Jt(),a=c+8|0,(e[a>>2]|0)==(le|0)?M=a:Jt()):M=c+8|0,e[s+12>>2]=c,e[M>>2]=s}while(!1);if(e[se+4>>2]=t|1,e[se+t>>2]=t,(se|0)==(e[761]|0)){e[758]=t;return}}if(a=t>>>3,t>>>0<256){c=a<<1,n=3064+(c<<2)|0,s=e[756]|0,a=1<<a,s&a?(a=3064+(c+2<<2)|0,c=e[a>>2]|0,c>>>0<(e[760]|0)>>>0?Jt():(ee=a,Y=c)):(e[756]=s|a,ee=3064+(c+2<<2)|0,Y=n),e[ee>>2]=se,e[Y+12>>2]=se,e[se+8>>2]=Y,e[se+12>>2]=n;return}a=t>>>8,a?t>>>0>16777215?n=31:(ee=(a+1048320|0)>>>16&8,Y=a<<ee,le=(Y+520192|0)>>>16&4,Y=Y<<le,n=(Y+245760|0)>>>16&2,n=14-(le|ee|n)+(Y<<n>>>15)|0,n=t>>>(n+7|0)&1|n<<1):n=0,a=3328+(n<<2)|0,e[se+28>>2]=n,e[se+20>>2]=0,e[se+16>>2]=0,c=e[757]|0,s=1<<n;e:do if(c&s){a=e[a>>2]|0;t:do if((e[a+4>>2]&-8|0)!=(t|0)){for(n=t<<((n|0)==31?0:25-(n>>>1)|0);c=a+16+(n>>>31<<2)|0,s=e[c>>2]|0,!!s;)if((e[s+4>>2]&-8|0)==(t|0)){q=s;break t}else n=n<<1,a=s;if(c>>>0<(e[760]|0)>>>0)Jt();else{e[c>>2]=se,e[se+24>>2]=a,e[se+12>>2]=se,e[se+8>>2]=se;break e}}else q=a;while(!1);if(a=q+8|0,c=e[a>>2]|0,Y=e[760]|0,c>>>0>=Y>>>0&q>>>0>=Y>>>0){e[c+12>>2]=se,e[a>>2]=se,e[se+8>>2]=c,e[se+12>>2]=q,e[se+24>>2]=0;break}else Jt()}else e[757]=c|s,e[a>>2]=se,e[se+24>>2]=a,e[se+12>>2]=se,e[se+8>>2]=se;while(!1);if(se=(e[764]|0)+-1|0,e[764]=se,!se)a=3480;else return;for(;a=e[a>>2]|0,a;)a=a+8|0;e[764]=-1}}function qo(r,a){r=r|0,a=a|0;var c=0;return r?(c=je(a,r)|0,(a|r)>>>0>65535&&(c=((c>>>0)/(r>>>0)|0|0)==(a|0)?c:-1)):c=0,a=Ai(c)|0,!a||!(e[a+-4>>2]&3)||Ht(a|0,0,c|0)|0,a|0}function ba(r,a){r=r|0,a=a|0;var c=0,s=0;return r?a>>>0>4294967231?(e[(Zn()|0)>>2]=12,r=0,r|0):(c=pl(r+-8|0,a>>>0<11?16:a+11&-8)|0,c?(r=c+8|0,r|0):(c=Ai(a)|0,c?(s=e[r+-4>>2]|0,s=(s&-8)-(s&3|0?4:8)|0,Cs(c|0,r|0,(s>>>0<a>>>0?s:a)|0)|0,Xi(r),r=c,r|0):(r=0,r|0))):(r=Ai(a)|0,r|0)}function pl(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0;if(B=r+4|0,H=e[B>>2]|0,d=H&-8,A=r+d|0,l=e[760]|0,c=H&3,(c|0)!=1&r>>>0>=l>>>0&r>>>0<A>>>0||Jt(),s=r+(d|4)|0,n=e[s>>2]|0,n&1||Jt(),!c)return a>>>0<256?(r=0,r|0):(d>>>0>=(a+4|0)>>>0&&(d-a|0)>>>0<=e[876]<<1>>>0||(r=0),r|0);if(d>>>0>=a>>>0)return c=d-a|0,c>>>0<=15||(e[B>>2]=H&1|a|2,e[r+(a+4)>>2]=c|3,e[s>>2]=e[s>>2]|1,Jo(r+a|0,c)),r|0;if((A|0)==(e[762]|0))return c=(e[759]|0)+d|0,c>>>0<=a>>>0?(r=0,r|0):(M=c-a|0,e[B>>2]=H&1|a|2,e[r+(a+4)>>2]=M|1,e[762]=r+a,e[759]=M,r|0);if((A|0)==(e[761]|0))return s=(e[758]|0)+d|0,s>>>0<a>>>0?(r=0,r|0):(c=s-a|0,c>>>0>15?(e[B>>2]=H&1|a|2,e[r+(a+4)>>2]=c|1,e[r+s>>2]=c,s=r+(s+4)|0,e[s>>2]=e[s>>2]&-2,s=r+a|0):(e[B>>2]=H&1|s|2,s=r+(s+4)|0,e[s>>2]=e[s>>2]|1,s=0,c=0),e[758]=c,e[761]=s,r|0);if(n&2||(E=(n&-8)+d|0,E>>>0<a>>>0))return r=0,r|0;M=E-a|0,t=n>>>3;do if(n>>>0>=256){u=e[r+(d+24)>>2]|0,t=e[r+(d+12)>>2]|0;do if((t|0)==(A|0)){if(s=r+(d+20)|0,c=e[s>>2]|0,!c&&(s=r+(d+16)|0,c=e[s>>2]|0,!c)){f=0;break}for(;;){if(n=c+20|0,t=e[n>>2]|0,t){c=t,s=n;continue}if(n=c+16|0,t=e[n>>2]|0,t)c=t,s=n;else break}if(s>>>0<l>>>0)Jt();else{e[s>>2]=0,f=c;break}}else if(n=e[r+(d+8)>>2]|0,n>>>0<l>>>0&&Jt(),c=n+12|0,(e[c>>2]|0)!=(A|0)&&Jt(),s=t+8|0,(e[s>>2]|0)==(A|0)){e[c>>2]=t,e[s>>2]=n,f=t;break}else Jt();while(!1);if(u){if(c=e[r+(d+28)>>2]|0,s=3328+(c<<2)|0,(A|0)==(e[s>>2]|0)){if(e[s>>2]=f,!f){e[757]=e[757]&~(1<<c);break}}else if(u>>>0<(e[760]|0)>>>0&&Jt(),c=u+16|0,(e[c>>2]|0)==(A|0)?e[c>>2]=f:e[u+20>>2]=f,!f)break;s=e[760]|0,f>>>0<s>>>0&&Jt(),e[f+24>>2]=u,c=e[r+(d+16)>>2]|0;do if(c)if(c>>>0<s>>>0)Jt();else{e[f+16>>2]=c,e[c+24>>2]=f;break}while(!1);if(c=e[r+(d+20)>>2]|0,c)if(c>>>0<(e[760]|0)>>>0)Jt();else{e[f+20>>2]=c,e[c+24>>2]=f;break}}}else{if(n=e[r+(d+8)>>2]|0,s=e[r+(d+12)>>2]|0,c=3064+(t<<1<<2)|0,(n|0)!=(c|0)&&(n>>>0<l>>>0&&Jt(),(e[n+12>>2]|0)!=(A|0)&&Jt()),(s|0)==(n|0)){e[756]=e[756]&~(1<<t);break}(s|0)!=(c|0)?(s>>>0<l>>>0&&Jt(),c=s+8|0,(e[c>>2]|0)==(A|0)?u=c:Jt()):u=s+8|0,e[n+12>>2]=s,e[u>>2]=n}while(!1);return M>>>0<16?(e[B>>2]=E|H&1|2,a=r+(E|4)|0,e[a>>2]=e[a>>2]|1,r|0):(e[B>>2]=H&1|a|2,e[r+(a+4)>>2]=M|3,H=r+(E|4)|0,e[H>>2]=e[H>>2]|1,Jo(r+a|0,M),r|0)}function Jo(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0;le=r+a|0,c=e[r+4>>2]|0;do if(c&1)q=r,u=a;else{if(f=e[r>>2]|0,!(c&3))return;if(M=r+(0-f)|0,E=f+a|0,d=e[760]|0,M>>>0<d>>>0&&Jt(),(M|0)==(e[761]|0)){if(s=r+(a+4)|0,c=e[s>>2]|0,(c&3|0)!=3){q=M,u=E;break}e[758]=E,e[s>>2]=c&-2,e[r+(4-f)>>2]=E|1,e[le>>2]=E;return}if(t=f>>>3,f>>>0<256){if(n=e[r+(8-f)>>2]|0,s=e[r+(12-f)>>2]|0,c=3064+(t<<1<<2)|0,(n|0)!=(c|0)&&(n>>>0<d>>>0&&Jt(),(e[n+12>>2]|0)!=(M|0)&&Jt()),(s|0)==(n|0)){e[756]=e[756]&~(1<<t),q=M,u=E;break}(s|0)!=(c|0)?(s>>>0<d>>>0&&Jt(),c=s+8|0,(e[c>>2]|0)==(M|0)?l=c:Jt()):l=s+8|0,e[n+12>>2]=s,e[l>>2]=n,q=M,u=E;break}l=e[r+(24-f)>>2]|0,n=e[r+(12-f)>>2]|0;do if((n|0)==(M|0)){if(n=16-f|0,s=r+(n+4)|0,c=e[s>>2]|0,!c&&(s=r+n|0,c=e[s>>2]|0,!c)){A=0;break}for(;;){if(n=c+20|0,t=e[n>>2]|0,t){c=t,s=n;continue}if(n=c+16|0,t=e[n>>2]|0,t)c=t,s=n;else break}if(s>>>0<d>>>0)Jt();else{e[s>>2]=0,A=c;break}}else if(t=e[r+(8-f)>>2]|0,t>>>0<d>>>0&&Jt(),c=t+12|0,(e[c>>2]|0)!=(M|0)&&Jt(),s=n+8|0,(e[s>>2]|0)==(M|0)){e[c>>2]=n,e[s>>2]=t,A=n;break}else Jt();while(!1);if(l){if(c=e[r+(28-f)>>2]|0,s=3328+(c<<2)|0,(M|0)==(e[s>>2]|0)){if(e[s>>2]=A,!A){e[757]=e[757]&~(1<<c),q=M,u=E;break}}else if(l>>>0<(e[760]|0)>>>0&&Jt(),c=l+16|0,(e[c>>2]|0)==(M|0)?e[c>>2]=A:e[l+20>>2]=A,!A){q=M,u=E;break}n=e[760]|0,A>>>0<n>>>0&&Jt(),e[A+24>>2]=l,c=16-f|0,s=e[r+c>>2]|0;do if(s)if(s>>>0<n>>>0)Jt();else{e[A+16>>2]=s,e[s+24>>2]=A;break}while(!1);if(c=e[r+(c+4)>>2]|0,c)if(c>>>0<(e[760]|0)>>>0)Jt();else{e[A+20>>2]=c,e[c+24>>2]=A,q=M,u=E;break}else q=M,u=E}else q=M,u=E}while(!1);if(d=e[760]|0,le>>>0<d>>>0&&Jt(),c=r+(a+4)|0,s=e[c>>2]|0,s&2)e[c>>2]=s&-2,e[q+4>>2]=u|1,e[q+u>>2]=u;else{if((le|0)==(e[762]|0)){if(Y=(e[759]|0)+u|0,e[759]=Y,e[762]=q,e[q+4>>2]=Y|1,(q|0)!=(e[761]|0))return;e[761]=0,e[758]=0;return}if((le|0)==(e[761]|0)){Y=(e[758]|0)+u|0,e[758]=Y,e[761]=q,e[q+4>>2]=Y|1,e[q+Y>>2]=Y;return}u=(s&-8)+u|0,t=s>>>3;do if(s>>>0>=256){l=e[r+(a+24)>>2]|0,n=e[r+(a+12)>>2]|0;do if((n|0)==(le|0)){if(s=r+(a+20)|0,c=e[s>>2]|0,!c&&(s=r+(a+16)|0,c=e[s>>2]|0,!c)){H=0;break}for(;;){if(n=c+20|0,t=e[n>>2]|0,t){c=t,s=n;continue}if(n=c+16|0,t=e[n>>2]|0,t)c=t,s=n;else break}if(s>>>0<d>>>0)Jt();else{e[s>>2]=0,H=c;break}}else if(t=e[r+(a+8)>>2]|0,t>>>0<d>>>0&&Jt(),c=t+12|0,(e[c>>2]|0)!=(le|0)&&Jt(),s=n+8|0,(e[s>>2]|0)==(le|0)){e[c>>2]=n,e[s>>2]=t,H=n;break}else Jt();while(!1);if(l){if(c=e[r+(a+28)>>2]|0,s=3328+(c<<2)|0,(le|0)==(e[s>>2]|0)){if(e[s>>2]=H,!H){e[757]=e[757]&~(1<<c);break}}else if(l>>>0<(e[760]|0)>>>0&&Jt(),c=l+16|0,(e[c>>2]|0)==(le|0)?e[c>>2]=H:e[l+20>>2]=H,!H)break;s=e[760]|0,H>>>0<s>>>0&&Jt(),e[H+24>>2]=l,c=e[r+(a+16)>>2]|0;do if(c)if(c>>>0<s>>>0)Jt();else{e[H+16>>2]=c,e[c+24>>2]=H;break}while(!1);if(c=e[r+(a+20)>>2]|0,c)if(c>>>0<(e[760]|0)>>>0)Jt();else{e[H+20>>2]=c,e[c+24>>2]=H;break}}}else{if(n=e[r+(a+8)>>2]|0,s=e[r+(a+12)>>2]|0,c=3064+(t<<1<<2)|0,(n|0)!=(c|0)&&(n>>>0<d>>>0&&Jt(),(e[n+12>>2]|0)!=(le|0)&&Jt()),(s|0)==(n|0)){e[756]=e[756]&~(1<<t);break}(s|0)!=(c|0)?(s>>>0<d>>>0&&Jt(),c=s+8|0,(e[c>>2]|0)==(le|0)?B=c:Jt()):B=s+8|0,e[n+12>>2]=s,e[B>>2]=n}while(!1);if(e[q+4>>2]=u|1,e[q+u>>2]=u,(q|0)==(e[761]|0)){e[758]=u;return}}if(c=u>>>3,u>>>0<256){s=c<<1,t=3064+(s<<2)|0,n=e[756]|0,c=1<<c,n&c?(c=3064+(s+2<<2)|0,s=e[c>>2]|0,s>>>0<(e[760]|0)>>>0?Jt():(ee=c,Y=s)):(e[756]=n|c,ee=3064+(s+2<<2)|0,Y=t),e[ee>>2]=q,e[Y+12>>2]=q,e[q+8>>2]=Y,e[q+12>>2]=t;return}if(c=u>>>8,c?u>>>0>16777215?t=31:(ee=(c+1048320|0)>>>16&8,Y=c<<ee,le=(Y+520192|0)>>>16&4,Y=Y<<le,t=(Y+245760|0)>>>16&2,t=14-(le|ee|t)+(Y<<t>>>15)|0,t=u>>>(t+7|0)&1|t<<1):t=0,c=3328+(t<<2)|0,e[q+28>>2]=t,e[q+20>>2]=0,e[q+16>>2]=0,s=e[757]|0,n=1<<t,!(s&n)){e[757]=s|n,e[c>>2]=q,e[q+24>>2]=c,e[q+12>>2]=q,e[q+8>>2]=q;return}c=e[c>>2]|0;e:do if((e[c+4>>2]&-8|0)!=(u|0)){for(t=u<<((t|0)==31?0:25-(t>>>1)|0);s=c+16+(t>>>31<<2)|0,n=e[s>>2]|0,!!n;)if((e[n+4>>2]&-8|0)==(u|0)){c=n;break e}else t=t<<1,c=n;s>>>0<(e[760]|0)>>>0&&Jt(),e[s>>2]=q,e[q+24>>2]=c,e[q+12>>2]=q,e[q+8>>2]=q;return}while(!1);s=c+8|0,n=e[s>>2]|0,Y=e[760]|0,n>>>0>=Y>>>0&c>>>0>=Y>>>0||Jt(),e[n+12>>2]=q,e[s>>2]=q,e[q+8>>2]=n,e[q+12>>2]=c,e[q+24>>2]=0}function Ta(r,a,c,s,n,t,u,l,d,f,A,E){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0,l=l|0,d=d|0,f=f|0,A=+A,E=E|0;var M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0,ut=0,Kt=0,mt=0,gn=0,Ki=0,hr=0,Ur=0,Ar=0,ai=0,Si=0,Vi=0;if(Ki=S,S=S+240|0,Y=Ki+224|0,ee=Ki+216|0,$=Ki+208|0,ce=Ki+200|0,M=Ki+136|0,yi=Ki+72|0,ut=Ki,Kt=Ki+232|0,mt=Ki+228|0,p[M>>3]=100,p[M+8>>3]=100,p[M+16>>3]=110,p[M+24>>3]=100,p[M+32>>3]=110,p[M+40>>3]=110,p[M+48>>3]=100,p[M+56>>3]=110,p[yi>>3]=+p[f>>3],p[yi+8>>3]=+p[f+8>>3],p[yi+16>>3]=+p[f+16>>3],p[yi+24>>3]=+p[f+24>>3],p[yi+32>>3]=+p[f+32>>3],p[yi+40>>3]=+p[f+40>>3],p[yi+48>>3]=+p[f+48>>3],p[yi+56>>3]=+p[f+56>>3],T0(M,yi,ut),Ae=+p[yi>>3],Ur=+p[yi+16>>3],q=Ae-Ur,Et=+p[yi+8>>3],hr=+p[yi+24>>3],H=Et-hr,M=~~(q*q+H*H),H=+p[yi+32>>3],q=+p[yi+48>>3],ai=H-q,le=+p[yi+40>>3],se=+p[yi+56>>3],Ar=le-se,yi=~~(ai*ai+Ar*Ar),H=Ur-H,le=hr-le,B=~~(H*H+le*le),Ae=q-Ae,Et=se-Et,oi=~~(Ae*Ae+Et*Et),M=~~(+(((yi|0)>(M|0)?yi:M)|0)*A*A),B=~~(+(((oi|0)>(B|0)?oi:B)|0)*A*A),r){for(f=c;(f|0)<(s|0)&(je(f<<2,f)|0)<(M|0);)f=f<<1;for(M=c;(M|0)<(s|0)&(je(M<<2,M)|0)<(B|0);)M=M<<1}else{for(f=c;(f|0)<(s|0)&(je(f,f)|0)<(M|0);)f=f<<1;for(M=c;(M|0)<(s|0)&(je(M,M)|0)<(B|0);)M=M<<1}oi=(f|0)>(s|0)?s:f,ui=(M|0)>(s|0)?s:M,qt=(oi|0)/(c|0)|0,gi=(ui|0)/(c|0)|0,H=(1-A)*.5*10,Et=A*10,yi=je(c,c)|0;e:do if(a){f=qo(yi,4)|0,f||(Ot(3,5472,ee),Fe(1));t:do if(l>>>0<2){if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=((je(B,t)|0)+M|0)*3|0,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+((((me[n+(Si+1)>>0]|0)+(me[n+Si>>0]|0)+(me[n+(Si+2)>>0]|0)|0)>>>0)/3|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}}else{if((l&-2|0)==2){if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)<=0)break;for(a=(oi|0)>0,Y=0;;){if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=(je(B,t)|0)+M<<2,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+((((me[n+(Si|1)>>0]|0)+(me[n+Si>>0]|0)+(me[n+(Si|2)>>0]|0)|0)>>>0)/3|0)),ee=ee+1|0}while((ee|0)<(oi|0))}if(Y=Y+1|0,(Y|0)>=(ui|0))break t}}if((l&-3|0)==4){if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)<=0)break;for(a=(oi|0)>0,Y=0;;){if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=(je(B,t)|0)+M<<2,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+((((me[n+(Si|2)>>0]|0)+(me[n+(Si|1)>>0]|0)+(me[n+(Si|3)>>0]|0)|0)>>>0)/3|0)),ee=ee+1|0}while((ee|0)<(oi|0))}if(Y=Y+1|0,(Y|0)>=(ui|0))break t}}switch(l|0){case 5:case 12:case 13:case 14:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)<=0)break t;a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=me[n+((je(B,t)|0)+M)>>0]|0,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+Si),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0));break}case 7:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)<=0)break t;a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=me[n+((je(B,t)|0)+M<<1|1)>>0]|0,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+Si),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0));break}case 8:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)<=0)break t;a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=me[n+((je(B,t)|0)+M<<1)>>0]|0,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+Si),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0));break}case 9:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)<=0)break t;a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=(je(B,t)|0)+M<<1,Nt=me[n+Si>>0]|0,Si=me[n+(Si|1)>>0]|0,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+((((Si<<3&248|4)+(Nt&248|4)+(Nt<<5&224|Si>>>3&28|2)|0)>>>0)/3|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0));break}case 10:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)<=0)break t;a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=(je(B,t)|0)+M<<1,Nt=me[n+Si>>0]|0,Si=me[n+(Si|1)>>0]|0,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+((((Si<<2&248|4)+(Nt&248|4)+(Nt<<5&224|Si>>>3&24|4)|0)>>>0)/3|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0));break}case 11:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)<=0)break t;a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=(je(B,t)|0)+M<<1,Nt=me[n+Si>>0]|0,Vi=f+((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)<<2)|0,e[Vi>>2]=(e[Vi>>2]|0)+((((Nt<<4&240|8)+(Nt&240|8)+((me[n+(Si|1)>>0]|0)&240|8)|0)>>>0)/3|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0));break}default:{Ot(3,4615,Y),gn=278;break e}}}while(!1);if(M=je(gi,qt)|0,yi){B=0;do U[E+B>>0]=((e[f+(B<<2)>>2]|0)>>>0)/(M>>>0)|0,B=B+1|0;while((B|0)<(yi|0))}Xi(f),f=0}else{Nt=yi*3|0,f=qo(Nt,4)|0,f||(Ot(3,5472,ce),Fe(1));do switch(l|0){case 0:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(B=((je(B,t)|0)+M|0)*3|0,r=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,M=f+(r<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B+2)>>0]|0),M=f+(r+1<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B+1)>>0]|0),r=f+(r+2<<2)|0,e[r>>2]=(e[r>>2]|0)+(me[n+B>>0]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 1:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(B=((je(B,t)|0)+M|0)*3|0,r=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,M=f+(r<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+B>>0]|0),M=f+(r+1<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B+1)>>0]|0),r=f+(r+2<<2)|0,e[r>>2]=(e[r>>2]|0)+(me[n+(B+2)>>0]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 2:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(B=(je(B,t)|0)+M<<2,r=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,M=f+(r<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B|2)>>0]|0),M=f+(r+1<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B|1)>>0]|0),r=f+(r+2<<2)|0,e[r>>2]=(e[r>>2]|0)+(me[n+B>>0]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 3:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(B=(je(B,t)|0)+M<<2,r=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,M=f+(r<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+B>>0]|0),M=f+(r+1<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B|1)>>0]|0),r=f+(r+2<<2)|0,e[r>>2]=(e[r>>2]|0)+(me[n+(B|2)>>0]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 4:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(B=(je(B,t)|0)+M<<2,r=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,M=f+(r<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B|1)>>0]|0),M=f+(r+1<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B|2)>>0]|0),r=f+(r+2<<2)|0,e[r>>2]=(e[r>>2]|0)+(me[n+(B|3)>>0]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 5:case 12:case 13:case 14:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(B=me[n+((je(B,t)|0)+M)>>0]|0,r=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,M=f+(r<<2)|0,e[M>>2]=(e[M>>2]|0)+B,M=f+(r+1<<2)|0,e[M>>2]=(e[M>>2]|0)+B,r=f+(r+2<<2)|0,e[r>>2]=(e[r>>2]|0)+B),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 6:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(B=(je(B,t)|0)+M<<2,r=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,M=f+(r<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B|3)>>0]|0),M=f+(r+1<<2)|0,e[M>>2]=(e[M>>2]|0)+(me[n+(B|2)>>0]|0),r=f+(r+2<<2)|0,e[r>>2]=(e[r>>2]|0)+(me[n+(B|1)>>0]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 7:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Vi=je(B,t)|0,Si=(M&65534)+Vi<<1,Ur=+((me[n+Si>>0]|0)+-128|0),ai=+((me[n+(Si+2)>>0]|0)+-128|0),Ar=+((me[n+(Vi+M<<1|1)>>0]|0)+-16|0)*298.0820007324219,Vi=~~(Ur*516.4110107421875+Ar)>>8,Si=~~(Ar-Ur*100.29100036621094-ai*208.1199951171875)>>8,B=~~(Ar+ai*408.5830078125)>>8,Vi=(Vi|0)>0?Vi:0,r=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,M=f+(r<<2)|0,e[M>>2]=((Vi|0)<255?Vi:255)+(e[M>>2]|0),Si=(Si|0)>0?Si:0,M=f+(r+1<<2)|0,e[M>>2]=((Si|0)<255?Si:255)+(e[M>>2]|0),B=(B|0)>0?B:0,r=f+(r+2<<2)|0,e[r>>2]=((B|0)<255?B:255)+(e[r>>2]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 8:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(B=je(B,t)|0,Si=(M&65534)+B<<1,Ur=+((me[n+(Si|1)>>0]|0)+-128|0),ai=+((me[n+(Si+3)>>0]|0)+-128|0),Ar=+((me[n+(B+M<<1)>>0]|0)+-16|0)*298.0820007324219,M=~~(Ar+Ur*516.4110107421875)>>8,B=~~(Ar-Ur*100.29100036621094-ai*208.1199951171875)>>8,Si=~~(Ar+ai*408.5830078125)>>8,M=(M|0)>0?M:0,Vi=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,r=f+(Vi<<2)|0,e[r>>2]=((M|0)<255?M:255)+(e[r>>2]|0),B=(B|0)>0?B:0,r=f+(Vi+1<<2)|0,e[r>>2]=((B|0)<255?B:255)+(e[r>>2]|0),Si=(Si|0)>0?Si:0,Vi=f+(Vi+2<<2)|0,e[Vi>>2]=((Si|0)<255?Si:255)+(e[Vi>>2]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 9:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=(je(B,t)|0)+M<<1,B=me[n+(Si|1)>>0]|0,Vi=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,r=f+(Vi<<2)|0,e[r>>2]=(B<<3&248|4)+(e[r>>2]|0),Si=me[n+Si>>0]|0,r=f+(Vi+1<<2)|0,e[r>>2]=(Si<<5&224|B>>>3&28|2)+(e[r>>2]|0),Vi=f+(Vi+2<<2)|0,e[Vi>>2]=(Si&248|4)+(e[Vi>>2]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 10:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=(je(B,t)|0)+M<<1,B=me[n+(Si|1)>>0]|0,Vi=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,r=f+(Vi<<2)|0,e[r>>2]=(B<<2&248|4)+(e[r>>2]|0),Si=me[n+Si>>0]|0,r=f+(Vi+1<<2)|0,e[r>>2]=(Si<<5&224|B>>>3&24|4)+(e[r>>2]|0),Vi=f+(Vi+2<<2)|0,e[Vi>>2]=(Si&248|4)+(e[Vi>>2]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}case 11:{if(q=H+100,se=+(ui|0),Ae=+(oi|0),ce=ut+48|0,$=ut+56|0,l=ut+64|0,X=ut+8|0,Be=ut+16|0,gt=ut+24|0,xt=ut+32|0,It=ut+40|0,s=(r|0)==1,(ui|0)>0){a=(oi|0)>0,Y=0;do{if(le=q+Et*(+(Y|0)+.5)/se,a){ee=0;do{if(H=q+Et*(+(ee|0)+.5)/Ae,A=+p[l>>3]+(+p[ce>>3]*H+le*+p[$>>3]),A==0){gn=278;break e}ai=(+p[Be>>3]+(H*+p[ut>>3]+le*+p[X>>3]))/A,P[Kt>>2]=ai,H=(+p[It>>3]+(H*+p[gt>>3]+le*+p[xt>>3]))/A,P[mt>>2]=H,Er(d,ai,H,Kt,mt)|0,H=+P[Kt>>2],s?(M=((~~(H+1)|0)/2|0)<<1,B=((~~(+P[mt>>2]+1)|0)/2|0)<<1):(M=~~(H+.5),B=~~(+P[mt>>2]+.5)),(M|0)>-1&&(B|0)<(u|0)&((B|0)>-1&(M|0)<(t|0))&&(Si=(je(B,t)|0)+M<<1,Vi=((je((Y|0)/(gi|0)|0,c)|0)+((ee|0)/(qt|0)|0)|0)*3|0,r=f+(Vi<<2)|0,e[r>>2]=(e[r>>2]|0)+((me[n+(Si|1)>>0]|0)&240|8),Si=me[n+Si>>0]|0,r=f+(Vi+1<<2)|0,e[r>>2]=(Si<<4&240|8)+(e[r>>2]|0),Vi=f+(Vi+2<<2)|0,e[Vi>>2]=(Si&240|8)+(e[Vi>>2]|0)),ee=ee+1|0}while((ee|0)<(oi|0))}Y=Y+1|0}while((Y|0)<(ui|0))}break}default:{Ot(3,4615,$),gn=278;break e}}while(!1);if(B=je(gi,qt)|0,yi){M=0;do U[E+M>>0]=((e[f+(M<<2)>>2]|0)>>>0)/(B>>>0)|0,M=M+1|0;while((M|0)<(Nt|0))}Xi(f),f=0}while(!1);return(gn|0)==278&&(Xi(f),f=-1),S=Ki,f|0}function so(r,a,c,s,n,t,u){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0;var l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0;ee=S,S=S+32|0,A=ee+24|0,f=ee+8|0,le=ee;e:do if((a+-3|0)>>>0>5)e[c>>2]=-1,e[s>>2]=0,p[n>>3]=-1,l=-1;else{if(e[f>>2]=0,H=a+-1|0,e[f+4>>2]=je(H,a)|0,M=je(a,a)|0,e[f+8>>2]=M+-1,e[f+12>>2]=H,d=U[r+(e[f>>2]|0)>>0]|0,l=(d&255)>0?d:0,d=(d&255)<255?d:-1,B=U[r+(e[f+4>>2]|0)>>0]|0,l=(B&255)>(l&255)?B:l,d=(B&255)<(d&255)?B:d,B=U[r+(e[f+8>>2]|0)>>0]|0,l=(B&255)>(l&255)?B:l,d=(B&255)<(d&255)?B:d,B=U[r+(e[f+12>>2]|0)>>0]|0,l=((B&255)>(l&255)?B:l)&255,d=((B&255)<(d&255)?B:d)&255,(l-d|0)<30){e[c>>2]=-1,e[s>>2]=0,p[n>>3]=-1,l=-2;break}for(E=(l+d|0)>>>1,U[A>>0]=(me[r+(e[f>>2]|0)>>0]|0)>>>0<E>>>0&1,U[A+1>>0]=(me[r+(e[f+4>>2]|0)>>0]|0)>>>0<E>>>0&1,U[A+2>>0]=(me[r+(e[f+8>>2]|0)>>0]|0)>>>0<E>>>0&1,U[A+3>>0]=(me[r+(e[f+12>>2]|0)>>0]|0)>>>0<E>>>0&1,d=0;;){if(l=d+1|0,(U[A+d>>0]|0)==1&&(U[A+((l|0)%4|0)>>0]|0)==1&&!(U[A+((d+2|0)%4|0)>>0]|0)){l=d,d=10;break}if((l|0)<4)d=l;else{d=12;break}}if((d|0)==10)e[s>>2]=l;else if((d|0)==12&&(l|0)==4){e[c>>2]=-1,e[s>>2]=0,p[n>>3]=-1,l=-3;break}if(!M)B=255;else{l=255,d=0;do B=r+d|0,A=me[B>>0]|0,f=A-E|0,f=(f|0)<0?0-f|0:f,l=(f|0)<(l|0)?f:l,U[B>>0]=A>>>0<E>>>0&1,d=d+1|0;while((d|0)<(M|0));B=l}switch(e[s>>2]|0){case 0:{if((a|0)>0){M=(a|0)==0,d=0,l=0,s=0;do{if(A=(s|0)==(H|0),E=je(s,a)|0,!M){f=0;do f|s|0&&!(A&((f|0)==0|(f|0)==(H|0)))&&(d=rs(d|0,l|0,1)|0,d=(U[r+(f+E)>>0]|0)!=0|d,l=De),f=f+1|0;while((f|0)!=(a|0))}s=s+1|0}while((s|0)<(a|0))}else d=0,l=0;break}case 1:{if((a|0)>0){M=(a|0)>0,d=0,l=0,s=0;do{if(A=(s|0)==0,E=(s|0)==(H|0),M)for(f=H;Y=(f|0)==(H|0),!(A&Y)&&!(E&(Y|(f|0)==0))&&(d=rs(d|0,l|0,1)|0,d=(U[r+((je(f,a)|0)+s)>>0]|0)!=0|d,l=De),(f|0)>0;)f=f+-1|0;s=s+1|0}while((s|0)<(a|0))}else d=0,l=0;break}case 2:{if((a|0)>0)for(M=(a|0)>0,d=0,l=0,s=H;;){if(E=(s|0)==(H|0)|(s|0)==0,A=je(s,a)|0,M)for(f=H;E&(f|0)==(H|0)|(f|s|0)==0||(d=rs(d|0,l|0,1)|0,d=(U[r+(f+A)>>0]|0)!=0|d,l=De),(f|0)>0;)f=f+-1|0;if((s|0)>0)s=s+-1|0;else break}else d=0,l=0;break}case 3:{if((a|0)>0)for(M=(a|0)>0,d=0,l=0,s=H;;){if(A=(s|0)==(H|0),E=(s|0)==0,M){f=0;do A&(f|0)==0|(f|s|0)==0|E&(f|0)==(H|0)||(d=rs(d|0,l|0,1)|0,d=(U[r+((je(f,a)|0)+s)>>0]|0)!=0|d,l=De),f=f+1|0;while((f|0)<(a|0))}if((s|0)>0)s=s+-1|0;else break}else d=0,l=0;break}default:d=0,l=0}switch(p[n>>3]=(B|0)>30?1:+(B|0)/30,t|0){case 259:{if(Y=U[4551+d>>0]|0,t=Y<<24>>24,u=le,e[u>>2]=t,e[u+4>>2]=((t|0)<0)<<31>>31,Y<<24>>24<0){e[c>>2]=-1,p[n>>3]=-1,l=-4;break e}break}case 515:{if(l=U[4423+d>>0]|0,t=l<<24>>24,Y=le,e[Y>>2]=t,e[Y+4>>2]=((t|0)<0)<<31>>31,u&&(e[u>>2]=me[4487+d>>0]),l<<24>>24<0){e[c>>2]=-1,p[n>>3]=-1,l=-4;break e}break}case 772:case 1028:{if(l=E0(t,d,l,0,le)|0,(l|0)<0){e[c>>2]=-1,p[n>>3]=-1,l=-4;break e}(u|0)!=0&(l|0)>0&&(e[u>>2]=l);break}default:Y=le,e[Y>>2]=d,e[Y+4>>2]=l}e[c>>2]=e[le>>2],l=0}while(!1);return S=ee,l|0}function rr(r,a,c,s,n,t,u){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0;var l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0;Be=S,S=S+16|0,l=Be+8|0,f=Be;e:do if(!r)e[n>>2]=0,e[t>>2]=0,p[u>>3]=-1,a=-1;else switch(a|0){case 0:{if(A=je(s,s)|0,ce=A*3|0,$=Ai(A*12|0)|0,$||(Ot(3,5472,f),Fe(1)),!A)a=0;else{a=0,l=0;do a=((me[c+l>>0]|0)^255)+a|0,l=l+1|0;while((l|0)<(ce|0))}if(l=(a|0)/(ce|0)|0,!A)d=0;else{f=0,a=0;do se=((me[c+f>>0]|0)^255)-l|0,e[$+(f<<2)>>2]=se,a=(je(se,se)|0)+a|0,f=f+1|0;while((f|0)<(ce|0));d=+(a|0)}if(Ae=+zt(+d),Ae/(+(s|0)*1.7320508)<15){e[n>>2]=0,e[t>>2]=0,p[u>>3]=-1,Xi($),a=-2;break e}if(Y=e[r>>2]|0,q=r+12|0,se=r+16|0,(Y|0)>0){ee=e[r+8>>2]|0,H=(A|0)==0,f=-1,le=0,d=0,l=-1,a=-1;do{t:for(;;)switch(f=f+1|0,e[ee+(f<<2)>>2]|0){case 0:break;case 2:break t;default:{X=17;break t}}if((X|0)==17){X=0,E=f<<2,M=e[se>>2]|0,B=0;do{if(r=B+E|0,H)A=0;else{c=e[(e[q>>2]|0)+(r<<2)>>2]|0,s=0,A=0;do A=(je(e[c+(s<<2)>>2]|0,e[$+(s<<2)>>2]|0)|0)+A|0,s=s+1|0;while((s|0)<(ce|0))}gt=+(A|0)/+p[M+(r<<3)>>3]/Ae,r=gt>d,l=r?B:l,a=r?f:a,d=r?gt:d,B=B+1|0}while((B|0)!=4)}le=le+1|0}while((le|0)<(Y|0))}else d=0,l=-1,a=-1;e[t>>2]=l,e[n>>2]=a,p[u>>3]=d,Xi($),a=0;break e}case 1:{if(ce=je(s,s)|0,$=Ai(ce<<2)|0,$||(Ot(3,5472,l),Fe(1)),!ce)a=0;else{a=0,l=0;do a=((me[c+l>>0]|0)^255)+a|0,l=l+1|0;while((l|0)<(ce|0))}if(l=(a|0)/(ce|0)|0,!ce)d=0;else{f=0,a=0;do se=((me[c+f>>0]|0)^255)-l|0,e[$+(f<<2)>>2]=se,a=(je(se,se)|0)+a|0,f=f+1|0;while((f|0)<(ce|0));d=+(a|0)}if(Ae=+zt(+d),Ae/+(s|0)<15){e[n>>2]=0,e[t>>2]=0,p[u>>3]=-1,Xi($),a=-2;break e}if(Y=e[r>>2]|0,q=r+20|0,se=r+24|0,(Y|0)>0){H=e[r+8>>2]|0,le=(ce|0)==0,f=-1,ee=0,d=0,l=-1,a=-1;do{t:for(;;)switch(f=f+1|0,e[H+(f<<2)>>2]|0){case 0:break;case 2:break t;default:{X=37;break t}}if((X|0)==37){X=0,E=f<<2,M=e[se>>2]|0,B=0;do{if(r=B+E|0,le)A=0;else{c=e[(e[q>>2]|0)+(r<<2)>>2]|0,s=0,A=0;do A=(je(e[c+(s<<2)>>2]|0,e[$+(s<<2)>>2]|0)|0)+A|0,s=s+1|0;while((s|0)<(ce|0))}gt=+(A|0)/+p[M+(r<<3)>>3]/Ae,r=gt>d,l=r?B:l,a=r?f:a,d=r?gt:d,B=B+1|0}while((B|0)!=4)}ee=ee+1|0}while((ee|0)<(Y|0))}else d=0,l=-1,a=-1;e[t>>2]=l,e[n>>2]=a,p[u>>3]=d,Xi($),a=0;break e}default:{a=-1;break e}}while(!1);return S=Be,a|0}function T0(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0;s=Bo(8,8)|0,n=Bo(8,1)|0,t=Bo(8,1)|0,u=e[s>>2]|0,l=e[n>>2]|0,d=0;do B=r+(d<<4)|0,f=d<<4,p[u+(f<<3)>>3]=+p[B>>3],M=r+(d<<4)+8|0,p[u+((f|1)<<3)>>3]=+p[M>>3],p[u+((f|2)<<3)>>3]=1,p[u+((f|3)<<3)>>3]=0,p[u+((f|4)<<3)>>3]=0,p[u+((f|5)<<3)>>3]=0,E=a+(d<<4)|0,p[u+((f|6)<<3)>>3]=-(+p[B>>3]*+p[E>>3]),p[u+((f|7)<<3)>>3]=-(+p[M>>3]*+p[E>>3]),p[u+((f|8)<<3)>>3]=0,p[u+((f|9)<<3)>>3]=0,p[u+((f|10)<<3)>>3]=0,p[u+((f|11)<<3)>>3]=+p[B>>3],p[u+((f|12)<<3)>>3]=+p[M>>3],p[u+((f|13)<<3)>>3]=1,A=a+(d<<4)+8|0,p[u+((f|14)<<3)>>3]=-(+p[B>>3]*+p[A>>3]),p[u+((f|15)<<3)>>3]=-(+p[M>>3]*+p[A>>3]),f=d<<1,p[l+(f<<3)>>3]=+p[E>>3],p[l+((f|1)<<3)>>3]=+p[A>>3],d=d+1|0;while((d|0)!=4);tl(s)|0,Ia(t,s,n)|0,B=e[t>>2]|0,p[c>>3]=+p[B>>3],p[c+8>>3]=+p[B+8>>3],p[c+16>>3]=+p[B+16>>3],B=e[t>>2]|0,p[c+24>>3]=+p[B+24>>3],p[c+32>>3]=+p[B+32>>3],p[c+40>>3]=+p[B+40>>3],B=e[t>>2]|0,p[c+48>>3]=+p[B+48>>3],p[c+56>>3]=+p[B+56>>3],p[c+64>>3]=1,vn(s)|0,vn(n)|0,vn(t)|0}function E0(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0;switch(Et=S,S=S+2320|0,u=Et+2304|0,Ae=Et+864|0,ee=Et+784|0,Nt=Et+704|0,q=Et+624|0,Y=Et+548|0,It=Et+40|0,gt=Et,r|0){case 772:{s=9,t=1,l=3;break}case 1028:{s=5,t=2,l=3;break}case 2830:{$=900,H=1472,Be=64,xt=120,ce=127,X=s,t=9,l=6;break}default:c=-1}if((l|0)==3){for(r=0;U[u+r>>0]=a&1,a=Na(a|0,c|0,1)|0,r=r+1|0,(r|0)!=13;)c=De;$=840,H=1408,Be=s,xt=13,ce=15,X=u,l=6}do if((l|0)==6){for(B=t<<1,u=1,c=0;;){s=Y+(u<<2)|0,e[s>>2]=0,r=0,a=0;do U[X+a>>0]|0&&(r=r^e[$+(((je(a,u)|0)%(ce|0)|0)<<2)>>2],e[s>>2]=r),a=a+1|0;while((a|0)<(xt|0));if(c=r|0?1:c,e[s>>2]=e[H+(r<<2)>>2],(u|0)<(B|0))u=u+1|0;else break}if(se=(c|0)!=0,se){if(e[ee>>2]=0,c=e[Y+4>>2]|0,e[ee+4>>2]=c,e[Ae>>2]=0,e[Ae+72>>2]=1,(B|0)>1){r=1;do e[Ae+(r<<2)>>2]=-1,e[Ae+72+(r<<2)>>2]=0,r=r+1|0;while((r|0)<(B|0))}for(e[Nt>>2]=0,e[Nt+4>>2]=0,e[q>>2]=-1,e[q+4>>2]=0,E=0,M=0;;){if(s=M,M=M+1|0,A=ee+(M<<2)|0,(c|0)==-1)if(u=s+2|0,e[Nt+(u<<2)>>2]=E,(E|0)<0)f=E;else for(c=0;;)if(A=Ae+(M*72|0)+(c<<2)|0,f=e[A>>2]|0,e[Ae+(u*72|0)+(c<<2)>>2]=f,e[A>>2]=e[H+(f<<2)>>2],(c|0)<(E|0))c=c+1|0;else{f=E;break}else{for(r=s;c=(r|0)>0,c&(e[ee+(r<<2)>>2]|0)==-1;)r=r+-1|0;if(c){a=r;do c=a,a=a+-1|0,(e[ee+(a<<2)>>2]|0)!=-1&&(r=(e[q+(r<<2)>>2]|0)<(e[q+(a<<2)>>2]|0)?a:r);while((c|0)>1)}a=Nt+(r<<2)|0,d=M-r|0,f=d+(e[a>>2]|0)|0,u=s+2|0,f=(E|0)>(f|0)?E:f,e[Nt+(u<<2)>>2]=f,c=0;do e[Ae+(u*72|0)+(c<<2)>>2]=0,c=c+1|0;while((c|0)<(B|0));if(c=e[a>>2]|0,a=ee+(r<<2)|0,(c|0)>=0)for(l=0;s=e[Ae+(r*72|0)+(l<<2)>>2]|0,(s|0)!=-1&&(e[Ae+(u*72|0)+(d+l<<2)>>2]=e[$+(((s+ce+(e[A>>2]|0)-(e[a>>2]|0)|0)%(ce|0)|0)<<2)>>2]),(l|0)<(c|0);)l=l+1|0;if((E|0)>=0)for(c=0;A=Ae+(M*72|0)+(c<<2)|0,d=e[A>>2]|0,l=Ae+(u*72|0)+(c<<2)|0,e[l>>2]=e[l>>2]^d,e[A>>2]=e[H+(d<<2)>>2],(c|0)<(E|0);)c=c+1|0}if(e[q+(u<<2)>>2]=M-f,(M|0)>=(B|0))break;if(c=e[Y+(u<<2)>>2]|0,(c|0)==-1?c=0:c=e[$+(c<<2)>>2]|0,s=ee+(u<<2)|0,e[s>>2]=c,(f|0)>=1)for(a=1;r=e[Y+(u-a<<2)>>2]|0,(r|0)!=-1&&(le=e[Ae+(u*72|0)+(a<<2)>>2]|0,(le|0)!=0)&&(c=c^e[$+((((e[H+(le<<2)>>2]|0)+r|0)%(ce|0)|0)<<2)>>2],e[s>>2]=c),(a|0)<(f|0);)a=a+1|0;if(c=e[H+(c<<2)>>2]|0,e[s>>2]=c,(f|0)>(t|0))break;E=f}if((f|0)>(t|0)){c=-1;break}if((f|0)>=0)for(c=0;q=Ae+(u*72|0)+(c<<2)|0,e[q>>2]=e[H+(e[q>>2]<<2)>>2],(c|0)<(f|0);)c=c+1|0;if((f|0)>=1)for(c=1;e[gt+(c<<2)>>2]=e[Ae+(u*72|0)+(c<<2)>>2],(c|0)<(f|0);)c=c+1|0;l=(f|0)<1,c=0,d=1;do{if(l)r=1;else for(t=1,r=1;a=gt+(t<<2)|0,s=e[a>>2]|0,(s|0)!=-1&&(Ae=(s+t|0)%(ce|0)|0,e[a>>2]=Ae,r=e[$+(Ae<<2)>>2]^r),(t|0)<(f|0);)t=t+1|0;r||(e[It+(c<<2)>>2]=ce-d,c=c+1|0),d=d+1|0}while((ce|0)>=(d|0));if((c|0)!=(f|0)){c=-1;break}if((f|0)>0){c=0;do gt=X+(e[It+(c<<2)>>2]|0)|0,U[gt>>0]=me[gt>>0]^1,c=c+1|0;while((c|0)<(f|0))}}else u=0;for(r=n,e[r>>2]=0,e[r+4>>2]=0,r=1,a=0,s=0,t=0,c=xt-Be|0;It=t0(me[X+c>>0]|0,0,r|0,a|0)|0,s=er(It|0,De|0,s|0,t|0)|0,t=De,It=n,e[It>>2]=s,e[It+4>>2]=t,r=rs(r|0,a|0,1)|0,c=c+1|0,!((c|0)>=(xt|0));)a=De;se?c=e[Nt+(u<<2)>>2]|0:c=0}while(!1);return S=Et,c|0}function r1(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;X=S,S=S+32|0,$=X+24|0,t=X+16|0,c=X+8|0;do if(r){if(!a){Ot(3,4674,c),c=-1;break}ce=r+8|0,n=e[r+4>>2]|0;e:do if((n|0)>0){s=e[ce>>2]|0,c=0;do{if(!(e[s+(c<<2)>>2]|0))break e;c=c+1|0}while((c|0)<(n|0))}else c=0;while(!1);if((c|0)!=(n|0)){if(Ae=Ao(a)|0,!Ae){Ot(3,4719,t),c=-1;break}H=r+28|0,le=c<<2,ee=r+12|0,Y=r+20|0,q=r+16|0,se=r+24|0,n=Yo(Ae,4742)|0,s=0;e:for(;;){B=s+le|0,M=0,a=0;do{if(A=(M|0)==0,E=(M|0)==2,t=e[H>>2]|0,(t|0)>0){f=0;do{if((t|0)>0){d=0;do{if(!n){s=17;break e}t=L1(n)|0,n=Yo(0,4742)|0,t=255-t|0,l=(((je(e[H>>2]|0,f)|0)+d|0)*3|0)+M|0,e[(e[(e[ee>>2]|0)+(B<<2)>>2]|0)+(l<<2)>>2]=t,l=(je(e[H>>2]|0,f)|0)+d|0,u=e[(e[Y>>2]|0)+(B<<2)>>2]|0,l=u+(l<<2)|0,A?e[l>>2]=t:(e[l>>2]=(e[l>>2]|0)+t,E&&(l=u+((je(e[H>>2]|0,f)|0)+d<<2)|0,e[l>>2]=(e[l>>2]|0)/3|0)),a=t+a|0,d=d+1|0,t=e[H>>2]|0}while((d|0)<(t|0))}f=f+1|0}while((f|0)<(t|0))}M=M+1|0}while((M|0)<3);if(t=e[H>>2]|0,d=(a|0)/(je(t*3|0,t)|0)|0,(je(t*3|0,t)|0)>0){u=e[(e[ee>>2]|0)+(B<<2)>>2]|0,l=0,a=0;do M=u+(l<<2)|0,t=(e[M>>2]|0)-d|0,e[M>>2]=t,a=(je(t,t)|0)+a|0,l=l+1|0,t=e[H>>2]|0;while((l|0)<(je(t*3|0,t)|0))}else a=0;if(Be=+zt(+ +(a|0)),p[(e[q>>2]|0)+(B<<3)>>3]=Be==0?1e-7:Be,!(je(t,t)|0))a=0;else{t=e[(e[Y>>2]|0)+(B<<2)>>2]|0,u=0,a=0;do E=t+(u<<2)|0,M=(e[E>>2]|0)-d|0,e[E>>2]=M,a=(je(M,M)|0)+a|0,u=u+1|0,M=e[H>>2]|0;while((u|0)<(je(M,M)|0))}if(Be=+zt(+ +(a|0)),p[(e[se>>2]|0)+(B<<3)>>3]=Be==0?1e-7:Be,s=s+1|0,(s|0)>=4){s=32;break}}if((s|0)==17){Ot(3,4747,$),Xi(Ae),c=-1;break}else if((s|0)==32){Xi(Ae),e[(e[ce>>2]|0)+(c<<2)>>2]=1,e[r>>2]=(e[r>>2]|0)+1;break}}else c=-1}else Ot(3,4649,X),c=-1;while(!1);return S=X,c|0}function vc(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0;l=S,S=S+32|0,u=l+16|0,t=l+8|0,c=l,n=eo(a,4854)|0;do if(n){if(Ol(n,0,2)|0,c=B1(n)|0,Ol(n,0,0)|0,s=Ai(c+1|0)|0,!s){Ot(3,5472,t),b0(n)|0,c=-1;break}if(t=Ja(s,c,1,n)|0,b0(n)|0,t){U[s+c>>0]=0,c=r1(r,s)|0,Xi(s);break}else{e[u>>2]=a,Ot(3,4820,u),Xi(s),c=-1;break}}else e[c>>2]=a,Ot(3,4774,c),c=-1;while(!1);return S=l,c|0}function y0(r,a){return r=r|0,a=a|0,a=(e[r+8>>2]|0)+(a<<2)|0,e[a>>2]|0?(e[a>>2]=0,e[r>>2]=(e[r>>2]|0)+-1,a=1):a=-1,a|0}function Ot(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0;if(u=S,S=S+32|0,t=u+16|0,s=u,e[t>>2]=0,(a|0)!=0&(e[496]|0)<=(r|0)&&U[a>>0]|0&&(e[s>>2]=c,n=Ma(t,a,s)|0,(n|0)>-1)){s=e[497]|0;do if(s){if(!(e[498]|0)){_i[s&15](e[t>>2]|0);break}if(c=Kn()|0,r=e[500]|0,(c|0)==(e[499]|0)){(r|0)>0&&(_i[s&15](e[502]|0),e[500]=0,s=e[497]|0),_i[s&15](e[t>>2]|0);break}if(s=e[501]|0,(r|0)<(s|0))if(a=(e[502]|0)+r|0,(n|0)<(-3-r+s|0)){mc(a,e[t>>2]|0)|0,e[500]=(e[500]|0)+n;break}else{U[a>>0]=46,U[a+1>>0]=46,U[a+2>>0]=46,U[a+3>>0]=0,e[500]=e[501];break}}else To(e[t>>2]|0,e[659]|0)|0;while(!1);Xi(e[t>>2]|0)}S=u}function Ra(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0;l=0;do{s=r+(l<<5)|0,n=r+(l<<5)+8|0,t=r+(l<<5)+16|0,u=0;do p[c+(l<<5)+(u<<3)>>3]=+p[s>>3]*+p[a+(u<<3)>>3]+ +p[n>>3]*+p[a+32+(u<<3)>>3]+ +p[t>>3]*+p[a+64+(u<<3)>>3],u=u+1|0;while((u|0)!=4);u=c+(l<<5)+24|0,p[u>>3]=+p[r+(l<<5)+24>>3]+ +p[u>>3],l=l+1|0}while((l|0)!=3);return 0}function Ec(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0;l=Bo(4,4)|0,c=e[l>>2]|0,s=e[l>>2]|0,n=e[l>>2]|0,t=e[l>>2]|0,u=0;do d=u<<2,p[c+(d<<3)>>3]=+p[r+(u<<5)>>3],p[s+(1+d<<3)>>3]=+p[r+(u<<5)+8>>3],p[n+(2+d<<3)>>3]=+p[r+(u<<5)+16>>3],p[t+(3+d<<3)>>3]=+p[r+(u<<5)+24>>3],u=u+1|0;while((u|0)!=3);c=e[l>>2]|0,s=c+96|0,e[s>>2]=0,e[s+4>>2]=0,e[s+8>>2]=0,e[s+12>>2]=0,e[s+16>>2]=0,e[s+20>>2]=0,p[c+120>>3]=1,tl(l)|0,c=e[l>>2]|0,s=e[l>>2]|0,n=e[l>>2]|0,t=e[l>>2]|0,u=0;do d=u<<2,p[a+(u<<5)>>3]=+p[c+(d<<3)>>3],p[a+(u<<5)+8>>3]=+p[s+(1+d<<3)>>3],p[a+(u<<5)+16>>3]=+p[n+(2+d<<3)>>3],p[a+(u<<5)+24>>3]=+p[t+(3+d<<3)>>3],u=u+1|0;while((u|0)!=3);return vn(l)|0,0}function N0(r){switch(r=r|0,r|0){case 1:case 0:{r=3;break}case 6:case 4:case 3:case 2:{r=4;break}case 14:case 13:case 12:case 5:{r=1;break}case 11:case 10:case 9:case 8:case 7:{r=2;break}default:r=0}return r|0}function j0(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0;do if((r|0)!=0&(a|0)!=0&(c|0)!=0){if(n=go(a,47)|0,!n){U[r>>0]=0;break}n=n+((s|0)!=0&1)-a|0,(n+1|0)>>>0<=c>>>0?(es(r,a,n)|0,U[r+n>>0]=0):r=0}else r=0;while(!1);return r|0}function Bo(r,a){r=r|0,a=a|0;var c=0,s=0;c=Ai(12)|0;do if(c)if(s=Ai(je(r<<3,a)|0)|0,e[c>>2]=s,s){e[c+4>>2]=r,e[c+8>>2]=a;break}else{Xi(c),c=0;break}else c=0;while(!1);return c|0}function P1(r){r=r|0;var a=0;return a=Bo(e[r+4>>2]|0,e[r+8>>2]|0)|0,a?(s1(a,r)|0)<0&&(vn(a)|0,a=0):a=0,a|0}function el(r,a){r=r|0,a=a|0;var c=0;return c=Bo(e[r+4>>2]|0,e[a+8>>2]|0)|0,c?(Ia(c,r,a)|0)<0&&(vn(c)|0,c=0):c=0,c|0}function yc(r){r=r|0;var a=0;return a=Bo(e[r+8>>2]|0,e[r+4>>2]|0)|0,a?(U0(a,r)|0)<0&&(vn(a)|0,a=0):a=0,a|0}function s1(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0;if(c=e[r+4>>2]|0,(c|0)==(e[a+4>>2]|0)&&(l=e[r+8>>2]|0,(l|0)==(e[a+8>>2]|0)))if((c|0)>0){s=(l|0)>0,f=0;do{if(n=je(l,f)|0,s){t=e[a>>2]|0,u=e[r>>2]|0,d=0;do A=n+d|0,p[u+(A<<3)>>3]=+p[t+(A<<3)>>3],d=d+1|0;while((d|0)<(l|0))}f=f+1|0}while((f|0)<(c|0));c=0}else c=0;else c=-1;return c|0}function vn(r){return r=r|0,r&&(Xi(e[r>>2]|0),Xi(r)),0}function Ia(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0;if(E=e[a+8>>2]|0,(E|0)==(e[c+4>>2]|0)&&(le=e[r+4>>2]|0,(le|0)==(e[a+4>>2]|0))&&(M=e[r+8>>2]|0,(M|0)==(e[c+8>>2]|0)))if(ee=(M|0)>0?M:0,(le|0)>0)for(B=(M|0)>0,H=(E|0)>0,d=e[r>>2]|0,A=0;;){if(r=je(E,A)|0,B)for(n=0,f=d;;){if(p[f>>3]=0,H)for(s=0,t=0,u=(e[a>>2]|0)+(r<<3)|0,l=(e[c>>2]|0)+(n<<3)|0;s=s+ +p[u>>3]*+p[l>>3],p[f>>3]=s,t=t+1|0,!((t|0)>=(E|0));)u=u+8|0,l=l+(M<<3)|0;if(n=n+1|0,(n|0)>=(M|0))break;f=f+8|0}if(A=A+1|0,(A|0)>=(le|0)){r=0;break}else d=d+(ee<<3)|0}else r=0;else r=-1;return r|0}function Bs(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0;H=e[r+4>>2]|0,ee=e[r+8>>2]|0,n=(H|0)<(ee|0)?H:ee;e:do if(!((H|0)<2|(ee|0)<2)&&(e[a+8>>2]|0)==(ee|0)&&(e[a+4>>2]|0)==(n|0)&&(Y=c+4|0,(e[Y>>2]|0)==(n|0))&&(t=s+4|0,(e[t>>2]|0)==(ee|0))&&(q=P1(r)|0,(q|0)!=0)){if(le=+zt(+ +(H|0)),M=e[q+4>>2]|0,B=e[q+8>>2]|0,!((M|0)<1|(B|0)<1)&&(e[t>>2]|0)==(B|0)){if(B){n=e[s>>2]|0,r=0;do p[n+(r<<3)>>3]=0,r=r+1|0;while((r|0)!=(B|0))}if(E=e[q>>2]|0,M)for(n=(B|0)==0,r=0,l=E;;){if(!n)for(t=0,d=l,f=e[s>>2]|0;p[f>>3]=+p[d>>3]+ +p[f>>3],t=t+1|0,(t|0)!=(B|0);)d=d+8|0,f=f+8|0;if(r=r+1|0,(r|0)==(M|0))break;l=l+(B<<3)|0}if(u=+(M|0),B){n=e[s>>2]|0,r=0;do A=n+(r<<3)|0,p[A>>3]=+p[A>>3]/u,r=r+1|0;while((r|0)!=(B|0))}if(f=(B|0)>0?B:0,(M|0)>0)for(n=(B|0)>0,r=0,l=E;;){if(n)for(t=0,d=l,A=e[s>>2]|0;p[d>>3]=+p[d>>3]-+p[A>>3],t=t+1|0,!((t|0)>=(B|0));)d=d+8|0,A=A+8|0;if(r=r+1|0,(r|0)>=(M|0))break;l=l+(f<<3)|0}if(n=je(ee,H)|0,(n|0)>0){r=0;do s=E+(r<<3)|0,p[s>>3]=+p[s>>3]/le,r=r+1|0;while((r|0)<(n|0))}if(n=Fl(q,a,c)|0,vn(q)|0,l=e[Y>>2]|0,(l|0)>0){r=e[c>>2]|0,t=0,u=0;do u=u+ +p[r+(t<<3)>>3],t=t+1|0;while((t|0)<(l|0))}else u=0;if((l|0)<=0)break;for(r=e[c>>2]|0,t=0;;)if(c=r+(t<<3)|0,p[c>>3]=+p[c>>3]/u,t=t+1|0,(t|0)>=(l|0))break e}vn(q)|0,n=-1}else n=-1;while(!1);return n|0}function Fl(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0,ut=0,Kt=0,mt=0,gn=0,Ki=0,hr=0,Ur=0,Ar=0,ai=0,Si=0,Vi=0,Mr=0;Ur=S,S=S+16|0,se=Ur,Nt=r+4|0,qt=e[Nt>>2]|0,ui=r+8|0,yi=e[ui>>2]|0,Ki=(yi|0)<(qt|0)?yi:qt;e:do if(!((qt|0)<2|(yi|0)<2)&&(gn=a+8|0,(e[gn>>2]|0)==(yi|0))&&(oi=a+4|0,(e[oi>>2]|0)==(Ki|0))&&(ut=c+4|0,(e[ut>>2]|0)==(Ki|0))){if(hr=Bo(Ki,Ki)|0,Kt=hr+4|0,(e[Kt>>2]|0)==(Ki|0)&&(mt=hr+8|0,(e[mt>>2]|0)==(Ki|0))){if(Et=(qt|0)<(yi|0),le=e[Nt>>2]|0,ee=e[ui>>2]|0,Et){if((Ki|0)!=(le|0)){vn(hr)|0,s=-1;break}if(t=e[hr>>2]|0,(Ki|0)>0)for(f=(Ki|0)==0,u=(ee|0)>0,A=0,H=t;;){if(d=je(A,ee)|0,!f)for(M=0,le=H;;){if((M|0)>=(A|0)){if(s=e[r>>2]|0,p[le>>3]=0,u)for(l=0,E=s+(d<<3)|0,s=s+((je(M,ee)|0)<<3)|0,n=0;l=l+ +p[E>>3]*+p[s>>3],p[le>>3]=l,n=n+1|0,!((n|0)>=(ee|0));)E=E+8|0,s=s+8|0}else p[le>>3]=+p[t+((je(M,Ki)|0)+A<<3)>>3];if(M=M+1|0,(M|0)==(Ki|0))break;le=le+8|0}if(A=A+1|0,(A|0)>=(Ki|0))break;H=H+(Ki<<3)|0}}else{if((Ki|0)!=(ee|0)){vn(hr)|0,s=-1;break}if(t=e[hr>>2]|0,(Ki|0)>0)for(d=(Ki|0)==0,u=(le|0)>0,f=0,M=t;;){if(!d)for(E=0,H=M;;){if((E|0)>=(f|0)){if(s=e[r>>2]|0,p[H>>3]=0,u)for(l=0,A=s+(f<<3)|0,s=s+(E<<3)|0,n=0;l=l+ +p[A>>3]*+p[s>>3],p[H>>3]=l,n=n+1|0,!((n|0)>=(le|0));)A=A+(Ki<<3)|0,s=s+(Ki<<3)|0}else p[H>>3]=+p[t+((je(E,Ki)|0)+f<<3)>>3];if(E=E+1|0,(E|0)==(Ki|0))break;H=H+8|0}if(f=f+1|0,(f|0)>=(Ki|0))break;M=M+(Ki<<3)|0}}do if((Ki|0)>=2&&(e[ut>>2]|0)==(Ki|0)&&(gi=Ls(Ki)|0,(gi|0)!=0)){if(It=Ki+-1|0,e[se+4>>2]=It,e[se>>2]=(e[gi>>2]|0)+8,(ao(hr,c,se)|0)<0){c0(gi)|0;break}if(Be=e[gi>>2]|0,p[Be>>3]=0,(It|0)>0){gt=(Ki|0)==0,xt=It;do{for(n=xt;!((n|0)<=0);)if(q=+Yt(+ +p[Be+(n<<3)>>3]),s=n+-1|0,X=e[c>>2]|0,Ae=+Yt(+ +p[X+(s<<3)>>3]),q>(Ae+ +Yt(+ +p[X+(n<<3)>>3]))*1e-6)n=s;else break;ce=xt,xt=xt+-1|0;t:do if((n|0)!=(ce|0)){E=Be+(ce<<3)|0,M=Be+(n+1<<3)|0,H=(n|0)<(ce|0),$=0;do{if(($|0)>99)break t;if($=$+1|0,le=e[c>>2]|0,ee=le+(xt<<3)|0,se=le+(ce<<3)|0,l=+p[se>>3],B=(+p[ee>>3]-l)*.5,Y=+p[E>>3],Y=Y*Y,q=+zt(+(Y+B*B)),H)for(X=n,B=+p[le+(n<<3)>>3]-l+Y/(B+(B<0?-q:q)),Y=+p[M>>3];;){l=+Yt(+B);do if(!(l>=+Yt(+Y)))q=-B/Y,Ae=1/+zt(+(q*q+1)),q=q*Ae;else{if(!(l>1e-16)){q=1,Ae=0;break}l=-Y/B,Ae=1/+zt(+(l*l+1)),q=Ae,Ae=l*Ae}while(!1);if(u=le+(X<<3)|0,Si=+p[u>>3],A=X,X=X+1|0,d=le+(X<<3)|0,ai=+p[d>>3],l=Si-ai,f=Be+(X<<3)|0,Ar=Ae*(Ae*l+q*2*+p[f>>3]),p[u>>3]=Si-Ar,p[d>>3]=ai+Ar,(A|0)>(n|0)&&(d=Be+(A<<3)|0,p[d>>3]=q*+p[d>>3]-Y*Ae),Si=+p[f>>3],p[f>>3]=Si+Ae*(q*l-Ae*2*Si),u=je(A,Ki)|0,d=je(X,Ki)|0,gt)l=Y;else{s=e[hr>>2]|0,t=0;do Mr=s+(t+u<<3)|0,B=+p[Mr>>3],Vi=s+(t+d<<3)|0,l=+p[Vi>>3],p[Mr>>3]=q*B-Ae*l,p[Vi>>3]=Ae*B+q*l,t=t+1|0;while((t|0)!=(Ki|0))}if((A|0)<(xt|0)&&(B=+p[f>>3],Mr=Be+(A+2<<3)|0,l=+p[Mr>>3],p[Mr>>3]=q*l,l=-(Ae*l)),(X|0)>=(ce|0))break;Y=l}ai=+Yt(+ +p[E>>3]),Si=+Yt(+ +p[ee>>3])}while(ai>(Si+ +Yt(+ +p[se>>3]))*1e-6)}while(!1)}while((ce|0)>1)}if(It){d=e[c>>2]|0,f=e[hr>>2]|0,A=(Ki|0)==0,E=0;do{if(t=d+(E<<3)|0,B=+p[t>>3],u=E,E=E+1|0,(E|0)<(Ki|0)){s=u,n=E,l=B;do Si=+p[d+(n<<3)>>3],Mr=Si>l,l=Mr?Si:l,s=Mr?n:s,n=n+1|0;while((n|0)<(Ki|0))}else s=u,l=B;if(p[d+(s<<3)>>3]=B,p[t>>3]=l,!A)for(t=0,n=f+((je(s,Ki)|0)<<3)|0,s=f+((je(u,Ki)|0)<<3)|0;Si=+p[n>>3],p[n>>3]=+p[s>>3],p[s>>3]=Si,t=t+1|0,(t|0)!=(Ki|0);)n=n+8|0,s=s+8|0}while((E|0)!=(It|0))}c0(gi)|0;t:do if(Et){se=e[Nt>>2]|0,ee=e[ui>>2]|0;do if(!((se|0)<1|(ee|0)<1)){if((e[Kt>>2]|0)!=(se|0)||(e[mt>>2]|0)!=(se|0)||(e[oi>>2]|0)!=(se|0)||(e[gn>>2]|0)!=(ee|0)||(e[ut>>2]|0)!=(se|0))break;n=e[a>>2]|0;i:do if((se|0)>0){M=e[c>>2]|0,le=(ee|0)==0,H=(se|0)==0,s=0;do{if(l=+p[M+(s<<3)>>3],l<1e-16)break i;if(B=1/+zt(+ +Yt(+l)),f=je(s,se)|0,!le)for(A=0,E=n;;){if(H)l=0;else for(t=0,u=(e[hr>>2]|0)+(f<<3)|0,d=(e[r>>2]|0)+(A<<3)|0,l=0;l=l+ +p[u>>3]*+p[d>>3],t=t+1|0,(t|0)!=(se|0);)u=u+8|0,d=d+(ee<<3)|0;if(p[E>>3]=B*l,A=A+1|0,(A|0)==(ee|0))break;E=E+8|0}n=n+(ee<<3)|0,s=s+1|0}while((s|0)<(se|0))}else s=0;while(!1);if(A=(ee|0)>0?ee:0,(s|0)>=(se|0))break t;for(d=e[c>>2]|0,f=(ee|0)>0,t=n;;){if(p[d+(s<<3)>>3]=0,f)for(n=0,u=t;p[u>>3]=0,n=n+1|0,!((n|0)>=(ee|0));)u=u+8|0;if(s=s+1|0,(s|0)>=(se|0))break t;t=t+(A<<3)|0}}while(!1);vn(hr)|0,s=-1;break e}else{t=e[a>>2]|0,M=(qt|0)>(yi|0)?yi:qt;i:do if((Ki|0)>0){f=e[c>>2]|0,A=(M|0)==0,s=0,E=e[hr>>2]|0;do{if(+p[f+(s<<3)>>3]<1e-16)break i;if(!A)for(n=0,u=E,d=t;p[d>>3]=+p[u>>3],n=n+1|0,(n|0)!=(M|0);)u=u+8|0,d=d+8|0;E=E+(M<<3)|0,t=t+(M<<3)|0,s=s+1|0}while((s|0)<(Ki|0))}else s=0;while(!1);if(A=(M|0)>0?M:0,(s|0)<(Ki|0))for(d=e[c>>2]|0,f=(Ki|0)>0;;){if(p[d+(s<<3)>>3]=0,f)for(n=0,u=t;p[u>>3]=0,n=n+1|0,!((n|0)>=(Ki|0));)u=u+8|0;if(s=s+1|0,(s|0)>=(Ki|0))break;t=t+(A<<3)|0}}while(!1);vn(hr)|0,s=0;break e}while(!1);vn(hr)|0,s=-1;break}vn(hr)|0,s=-1}else s=-1;while(!1);return S=Ur,s|0}function tl(r){r=r|0;var a=0,c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0;q=S,S=S+2e3|0,Y=q,a=e[r>>2]|0,ee=e[r+4>>2]|0;e:do if((ee|0)<=500){switch(ee|0){case 0:{a=0;break e}case 1:{p[a>>3]=1/+p[a>>3];break e}default:}if((ee|0)>0){r=0;do e[Y+(r<<2)>>2]=r,r=r+1|0;while((r|0)<(ee|0))}if(le=a+(ee+-1<<3)|0,(ee|0)>0)for(f=(ee|0)==0,M=(ee|0)==1,E=(ee|0)==0,A=(ee|0)==1,B=le,r=0,H=0;;){if(d=a+((je(H,ee)|0)<<3)|0,(H|0)<(ee|0))for(s=H,n=0,c=d;se=+Yt(+ +p[c>>3]),l=n<se,r=l?s:r,n=l?se:n,s=s+1|0,!((s|0)>=(ee|0));)c=c+(ee<<3)|0;else n=0;if(n<=1e-10){a=0;break e}if(t=Y+(r<<2)|0,u=e[t>>2]|0,l=Y+(H<<2)|0,e[t>>2]=e[l>>2],e[l>>2]=u,!f)for(c=0,s=a+((je(r,ee)|0)<<3)|0,t=d;se=+p[s>>3],p[s>>3]=+p[t>>3],p[t>>3]=se,c=c+1|0,(c|0)!=(ee|0);)s=s+8|0,t=t+8|0;if(n=+p[d>>3],!M){c=1,s=d;do l=s,s=s+8|0,p[l>>3]=+p[s>>3]/n,c=c+1|0;while((c|0)!=(ee|0))}if(p[B>>3]=1/n,!E)for(t=0,u=le;;){if((t|0)!=(H|0)){if(c=a+((je(t,ee)|0)<<3)|0,n=+p[c>>3],!A)for(l=1,s=d;Ae=c,c=c+8|0,p[Ae>>3]=+p[c>>3]-n*+p[s>>3],l=l+1|0,(l|0)!=(ee|0);)s=s+8|0;p[u>>3]=-(n*+p[B>>3])}if(t=t+1|0,(t|0)==(ee|0))break;u=u+(ee<<3)|0}if(H=H+1|0,(H|0)>=(ee|0))break;B=B+(ee<<3)|0}if((ee|0)>0){t=(ee|0)>0,u=0;do{r=Y+(u<<2)|0;t:do if((u|0)<(ee|0)){c=u;do{if((e[r>>2]|0)==(u|0))break t;c=c+1|0,r=Y+(c<<2)|0}while((c|0)<(ee|0))}else c=u;while(!1);if(e[r>>2]=e[Y+(u<<2)>>2],t)for(s=0,r=a+(c<<3)|0,c=a+(u<<3)|0;se=+p[r>>3],p[r>>3]=+p[c>>3],p[c>>3]=se,s=s+1|0,!((s|0)>=(ee|0));)r=r+(ee<<3)|0,c=c+(ee<<3)|0;u=u+1|0}while((u|0)<(ee|0))}}else a=0;while(!1);return S=q,((a|0)==0)<<31>>31|0}function U0(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0;if(u=e[r+4>>2]|0,(u|0)==(e[a+8>>2]|0)&&(d=e[r+8>>2]|0,(d|0)==(e[a+4>>2]|0)))if(f=(d|0)>0?d:0,(u|0)>0)for(l=(d|0)>0,s=e[r>>2]|0,t=0;;){if(l)for(r=0,c=(e[a>>2]|0)+(t<<3)|0,n=s;p[n>>3]=+p[c>>3],r=r+1|0,!((r|0)>=(d|0));)c=c+(u<<3)|0,n=n+8|0;if(t=t+1|0,(t|0)>=(u|0)){r=0;break}else s=s+(f<<3)|0}else r=0;else r=-1;return r|0}function kl(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0;n=+(a|0)/+(e[r>>2]|0),t=+(c|0)/+(e[r+4>>2]|0),e[s>>2]=a,e[s+4>>2]=c,a=0;do p[s+8+(a<<3)>>3]=n*+p[r+8+(a<<3)>>3],p[s+40+(a<<3)>>3]=t*+p[r+40+(a<<3)>>3],p[s+72+(a<<3)>>3]=+p[r+72+(a<<3)>>3],a=a+1|0;while((a|0)!=4);switch(a=e[r+176>>2]|0,a|0){case 4:{p[s+104>>3]=+p[r+104>>3],p[s+112>>3]=+p[r+112>>3],p[s+120>>3]=+p[r+120>>3],p[s+128>>3]=+p[r+128>>3],p[s+136>>3]=n*+p[r+136>>3],p[s+144>>3]=t*+p[r+144>>3],p[s+152>>3]=n*+p[r+152>>3],p[s+160>>3]=t*+p[r+160>>3],p[s+168>>3]=+p[r+168>>3],u=8;break}case 3:{p[s+104>>3]=n*+p[r+104>>3],p[s+112>>3]=t*+p[r+112>>3],p[s+120>>3]=+p[r+120>>3],p[s+128>>3]=+p[r+128>>3],p[s+136>>3]=+p[r+136>>3]/(n*t),p[s+144>>3]=+p[r+144>>3]/(t*(n*n*t)),u=8;break}case 2:{p[s+104>>3]=n*+p[r+104>>3],p[s+112>>3]=t*+p[r+112>>3],p[s+120>>3]=+p[r+120>>3],p[s+128>>3]=+p[r+128>>3]/(n*t),p[s+136>>3]=+p[r+136>>3]/(t*(n*n*t)),u=8;break}case 1:{p[s+104>>3]=n*+p[r+104>>3],p[s+112>>3]=t*+p[r+112>>3],p[s+120>>3]=+p[r+120>>3],p[s+128>>3]=+p[r+128>>3]/(n*t),u=8;break}default:a=-1}return(u|0)==8&&(e[s+176>>2]=a,a=0),a|0}function Uo(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0;if(t=S,S=S+96|0,n=t,+p[r+88>>3]>=0){s=0;do p[n+(s<<5)>>3]=+p[r+(s<<5)>>3],p[n+(s<<5)+8>>3]=+p[r+(s<<5)+8>>3],p[n+(s<<5)+16>>3]=+p[r+(s<<5)+16>>3],p[n+(s<<5)+24>>3]=+p[r+(s<<5)+24>>3],s=s+1|0;while((s|0)!=3)}else{s=0;do p[n+(s<<5)>>3]=-+p[r+(s<<5)>>3],p[n+(s<<5)+8>>3]=-+p[r+(s<<5)+8>>3],p[n+(s<<5)+16>>3]=-+p[r+(s<<5)+16>>3],p[n+(s<<5)+24>>3]=-+p[r+(s<<5)+24>>3],s=s+1|0;while((s|0)!=3)}p[a>>3]=0,p[a+8>>3]=0,p[a+16>>3]=0,p[a+24>>3]=0,p[a+32>>3]=0,p[a+40>>3]=0,p[a+48>>3]=0,p[a+56>>3]=0,p[a+64>>3]=0,p[a+72>>3]=0,p[a+80>>3]=0,p[a+88>>3]=0,u=+p[n+64>>3],M=+p[n+72>>3],B=+p[n+80>>3],ce=+zt(+(u*u+M*M+B*B)),r=a+80|0,p[r>>3]=ce,ce=u/ce,se=c+64|0,p[se>>3]=ce,M=M/+p[r>>3],Y=c+72|0,p[Y>>3]=M,B=B/+p[r>>3],H=c+80|0,p[H>>3]=B,E=c+88|0,p[E>>3]=+p[n+88>>3]/+p[r>>3],u=+p[n+32>>3],d=+p[n+40>>3],ee=+p[n+48>>3],B=ce*u+M*d+B*ee,A=a+48|0,p[A>>3]=B,u=u-B*+p[se>>3],d=d-B*+p[Y>>3],B=ee-B*+p[H>>3],ee=+zt(+(u*u+d*d+B*B)),f=a+40|0,p[f>>3]=ee,Ae=c+32|0,p[Ae>>3]=u/ee,q=c+40|0,p[q>>3]=d/+p[f>>3],le=c+48|0,p[le>>3]=B/+p[f>>3],B=+p[n>>3],d=+p[n+8>>3],ee=+p[n+16>>3],u=+p[se>>3]*B+ +p[Y>>3]*d+ +p[H>>3]*ee,s=a+16|0,p[s>>3]=u,M=+p[Ae>>3]*B+ +p[q>>3]*d+ +p[le>>3]*ee,l=a+8|0,p[l>>3]=M,B=B-M*+p[Ae>>3]-u*+p[se>>3],d=d-M*+p[q>>3]-u*+p[Y>>3],u=ee-M*+p[le>>3]-u*+p[H>>3],M=+zt(+(B*B+d*d+u*u)),p[a>>3]=M,p[c>>3]=B/M,p[c+8>>3]=d/+p[a>>3],p[c+16>>3]=u/+p[a>>3],u=+p[E>>3],d=(+p[n+56>>3]-+p[A>>3]*u)/+p[f>>3],p[c+56>>3]=d,p[c+24>>3]=(+p[n+24>>3]-d*+p[l>>3]-+p[s>>3]*u)/+p[a>>3],s=0;do Ae=a+(s<<5)|0,p[Ae>>3]=+p[Ae>>3]/+p[r>>3],Ae=a+(s<<5)+8|0,p[Ae>>3]=+p[Ae>>3]/+p[r>>3],Ae=a+(s<<5)+16|0,p[Ae>>3]=+p[Ae>>3]/+p[r>>3],s=s+1|0;while((s|0)!=3);return S=t,0}function Ns(r,a,c,s,n,t){r=r|0,a=+a,c=+c,s=s|0,n=n|0,t=t|0;var u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0;switch(t|0){case 4:{le=+p[r>>3],ee=+p[r+8>>3],Y=+p[r+16>>3],q=+p[r+24>>3],X=+p[r+32>>3],Ae=+p[r+40>>3],ce=+p[r+48>>3],$=+p[r+56>>3],se=+p[r+64>>3],H=(a-ce)/X,d=(c-$)/Ae,c=H*H,l=d*d,f=Y*2,A=q*6,E=q*2,M=Y*6;e:do if(l!=0|c!=0)for(t=1,u=H,a=d;;){if(It=l+c,xt=le*It+1+It*(ee*It),Be=c*3,gt=l*Be,u=u-(q*(It+c*2)+(a*(f*u)+u*xt)-H)/(A*u+(f*a+(le*(l+Be)+1+ee*(l*l+(c*(c*5)+gt))))),Be=E*u,a=a-(Y*(l*2+It)+a*xt+a*Be-d)/(M*a+(le*(c+l*3)+1+ee*(l*(l*5)+(c*c+gt)))+Be),(t|0)==4)break e;if(c=u*u,l=a*a,l!=0|c!=0)t=t+1|0;else{u=0,a=0;break}}else u=0,a=0;while(!1);p[s>>3]=ce+X*u/se,p[n>>3]=$+Ae*a/se,t=0;break}case 3:{H=+p[r>>3],u=(a-H)/+p[r+24>>3],B=r+8|0,a=c-+p[B>>3],d=+p[r+32>>3]/1e8,f=+p[r+40>>3]/1e8/1e5,c=u*u+a*a,A=+zt(+c),E=d*3,M=f*5;e:do if(A!=0)for(t=1,l=A;;){if(It=l-(l*(1-d*c-c*(f*c))-A)/(1-E*c-c*(M*c)),u=u*It/l,a=a*It/l,(t|0)==3)break e;if(c=u*u+a*a,l=+zt(+c),l==0){u=0,a=0;break}else t=t+1|0}else u=0,a=0;while(!1);t=r+16|0,p[s>>3]=u/+p[t>>3]+H,p[n>>3]=a/+p[t>>3]+ +p[B>>3],t=0;break}case 2:{H=+p[r>>3],u=a-H,B=r+8|0,a=c-+p[B>>3],d=+p[r+24>>3]/1e8,f=+p[r+32>>3]/1e8/1e5,c=u*u+a*a,A=+zt(+c),E=d*3,M=f*5;e:do if(A!=0)for(t=1,l=A;;){if(It=l-(l*(1-d*c-c*(f*c))-A)/(1-E*c-c*(M*c)),u=u*It/l,a=a*It/l,(t|0)==3)break e;if(c=u*u+a*a,l=+zt(+c),l==0){u=0,a=0;break}else t=t+1|0}else u=0,a=0;while(!1);t=r+16|0,p[s>>3]=u/+p[t>>3]+H,p[n>>3]=a/+p[t>>3]+ +p[B>>3],t=0;break}case 1:{E=+p[r>>3],u=a-E,B=r+8|0,a=c-+p[B>>3],d=+p[r+24>>3]/1e8,c=u*u+a*a,f=+zt(+c),A=d*3;e:do if(f!=0)for(t=1,l=f;;){if(It=l-(l*(1-d*c)-f)/(1-A*c),u=u*It/l,a=a*It/l,(t|0)==3)break e;if(c=u*u+a*a,l=+zt(+c),l==0){u=0,a=0;break}else t=t+1|0}else u=0,a=0;while(!1);t=r+16|0,p[s>>3]=u/+p[t>>3]+E,p[n>>3]=a/+p[t>>3]+ +p[B>>3],t=0;break}default:t=-1}return t|0}function O1(r,a,c,s,n,t){r=r|0,a=+a,c=+c,s=s|0,n=n|0,t=t|0;var u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0;switch(t|0){case 4:{d=+p[r+16>>3],f=+p[r+24>>3],M=+p[r+32>>3],A=+p[r+40>>3],B=+p[r+48>>3],E=+p[r+56>>3],l=+p[r+64>>3],a=(a-B)*l/M,l=(c-E)*l/A,u=a*a+l*l,c=+p[r>>3]*u+1+u*(+p[r+8>>3]*u),p[s>>3]=B+M*(f*(a*(a*2)+u)+(d*2*a*l+a*c)),p[n>>3]=E+A*(f*2*a*l+(d*(u+l*(l*2))+l*c)),t=0;break}case 3:{l=+p[r>>3],B=+p[r+16>>3],u=(a-l)*B,t=r+8|0,a=B*(c-+p[t>>3]),u==0&a==0?(p[s>>3]=l,a=+p[t>>3]):(B=u*u+a*a,B=1-B*(+p[r+32>>3]/1e8)-B*(B*(+p[r+40>>3]/1e8/1e5)),p[s>>3]=l+ +p[r+24>>3]*(u*B),a=+p[t>>3]+a*B),p[n>>3]=a,t=0;break}case 2:{l=+p[r>>3],B=+p[r+16>>3],u=(a-l)*B,t=r+8|0,a=B*(c-+p[t>>3]),u==0&a==0?(p[s>>3]=l,a=+p[t>>3]):(B=u*u+a*a,B=1-B*(+p[r+24>>3]/1e8)-B*(B*(+p[r+32>>3]/1e8/1e5)),p[s>>3]=l+u*B,a=+p[t>>3]+a*B),p[n>>3]=a,t=0;break}case 1:{l=+p[r>>3],B=+p[r+16>>3],u=(a-l)*B,t=r+8|0,a=B*(c-+p[t>>3]),u==0&a==0?(p[s>>3]=l,a=+p[t>>3]):(B=1-(u*u+a*a)*(+p[r+24>>3]/1e8),p[s>>3]=l+u*B,a=+p[t>>3]+a*B),p[n>>3]=a,t=0;break}default:t=-1}return t|0}function wc(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0;le=S,S=S+256|0,A=le+232|0,f=le+224|0,d=le+216|0,l=le+208|0,u=le+200|0,t=le+192|0,n=le+184|0,M=le+240|0,B=le;do if((r|0)!=0&(a|0)>0&(c|0)!=0){if(H=eo(r,4854)|0,!H){H=Zn()|0,e[n>>2]=e[H>>2],e[n+4>>2]=r,Ot(3,4857,n),r=Qs(e[H>>2]|0)|0,e[t>>2]=5367,e[t+4>>2]=r,Ot(3,5361,t),r=-1;break}Ol(H,0,2)|0;e:do if(ws(H)|0)r=Zn()|0,e[u>>2]=e[r>>2],Ot(3,4926,u),r=Qs(e[r>>2]|0)|0,e[l>>2]=5367,e[l+4>>2]=r,Ot(3,5361,l),r=-1;else{t=B1(H)|0,Nr(H),r=0;do{if((r|0)>=4){E=9;break}n=e[2012+(r<<3)+4>>2]|0,r=r+1|0}while((t|0)%(n|0)|0|0);do if((E|0)==9)if((r|0)==4){Ot(3,4971,d),r=-1;break e}else{n=e[504]|0,r=0;break}while(!1);if((Ja(B,n,1,H)|0)!=1){r=Zn()|0,e[f>>2]=e[r>>2],Ot(3,5051,f),r=Qs(e[r>>2]|0)|0,e[A>>2]=5367,e[A+4>>2]=r,Ot(3,5361,A),r=-1;break}if(d=B+176|0,e[d>>2]=r,Cc(B),f=(r|0)==1,A=B+120|0,f?(ee=+p[A>>3],l=B+128|0,p[A>>3]=+p[l>>3],p[l>>3]=ee):l=B+128|0,Cs(c|0,B|0,184)|0,e[M>>2]=s,n=c+176|0,(a|0)>1)for(u=1;;){if(s=(e[M>>2]|0)+3&-4,t=e[s>>2]|0,e[M>>2]=s+4,e[t+176>>2]=e[n>>2],(Ja(B,e[2012+((e[n>>2]|0)+-1<<3)+4>>2]|0,1,H)|0)!=1){r=-1;break e}if(e[d>>2]=r,Cc(B),f&&(ee=+p[A>>3],p[A>>3]=+p[l>>3],p[l>>3]=ee),Cs(t|0,B|0,184)|0,u=u+1|0,(u|0)>=(a|0)){r=0;break}}else r=0}while(!1);b0(H)|0}else r=-1;while(!1);return S=le,r|0}function Cc(r){r=r|0;var a=0,c=0,s=0,n=0,t=0;t=S,S=S+192|0,n=t,w0(r,n),w0(r+4|0,n+4|0),a=0;do Al(r+8+(a<<5)|0,n+8+(a<<5)|0),Al(r+8+(a<<5)+8|0,n+8+(a<<5)+8|0),Al(r+8+(a<<5)+16|0,n+8+(a<<5)+16|0),Al(r+8+(a<<5)+24|0,n+8+(a<<5)+24|0),a=a+1|0;while((a|0)!=3);c=r+176|0,s=0;do Al(r+104+(s<<3)|0,n+104+(s<<3)|0),s=s+1|0,a=e[c>>2]|0;while((s|0)<(e[2012+(a+-1<<3)>>2]|0));e[n+176>>2]=a,Cs(r|0,n|0,184)|0,S=t}function Al(r,a){r=r|0,a=a|0,U[a>>0]=U[r+7>>0]|0,U[a+1>>0]=U[r+6>>0]|0,U[a+2>>0]=U[r+5>>0]|0,U[a+3>>0]=U[r+4>>0]|0,U[a+4>>0]=U[r+3>>0]|0,U[a+5>>0]=U[r+2>>0]|0,U[a+6>>0]=U[r+1>>0]|0,U[a+7>>0]=U[r>>0]|0}function w0(r,a){r=r|0,a=a|0,U[a>>0]=U[r+3>>0]|0,U[a+1>>0]=U[r+2>>0]|0,U[a+2>>0]=U[r+1>>0]|0,U[a+3>>0]=U[r>>0]|0}function Ba(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0;if(se=S,S=S+64|0,le=se+24|0,ee=se+16|0,Y=se+8|0,q=se,M=Ai(208)|0,M||(Ot(3,5472,se+32|0),Fe(1)),Cs(M|0,r|0,184)|0,H=a<<1,B=(e[r>>2]|0)+H|0,e[M+192>>2]=B,H=(e[r+4>>2]|0)+H|0,e[M+196>>2]=H,e[M+200>>2]=a,e[M+204>>2]=a,c=je(B<<3,H)|0,s=Ai(c)|0,e[M+184>>2]=s,s||(Ot(3,5472,se+40|0),Fe(1)),c=Ai(c)|0,e[M+188>>2]=c,c||(Ot(3,5472,se+48|0),Fe(1)),E=r+104|0,d=e[r+176>>2]|0,f=(B|0)>0?B<<1:0,(H|0)>0)for(A=(B|0)>0,l=0;;){if(n=+(l-a|0),A)for(r=0,t=s,u=c;Ae=+(r-a|0),O1(E,Ae,n,Y,q,d)|0,P[t>>2]=+p[Y>>3],P[t+4>>2]=+p[q>>3],Ns(E,Ae,n,le,ee,d)|0,P[u>>2]=+p[le>>3],P[u+4>>2]=+p[ee>>3],r=r+1|0,!((r|0)>=(B|0));)t=t+8|0,u=u+8|0;if(c=c+(f<<2)|0,l=l+1|0,(l|0)>=(H|0))break;s=s+(f<<2)|0}return S=se,M|0}function is(r){r=r|0;var a=0;return r|0&&(a=e[r>>2]|0,(a|0)!=0)?(Xi(e[a+184>>2]|0),Xi(e[(e[r>>2]|0)+188>>2]|0),Xi(e[r>>2]|0),e[r>>2]=0,a=0):a=-1,a|0}function Er(r,a,c,s,n){r=r|0,a=+a,c=+c,s=s|0,n=n|0;var t=0,u=0,l=0;return u=(e[r+16>>2]|0)+~~(a+.5)|0,t=(e[r+20>>2]|0)+~~(c+.5)|0,(u|0)>=0&&(l=e[r+8>>2]|0,!((t|0)<0|(u|0)>=(l|0)))&&(t|0)<(e[r+12>>2]|0)?(r=e[r>>2]|0,t=(je(l,t)|0)+u<<1,e[s>>2]=e[r+(t<<2)>>2],e[n>>2]=e[r+((t|1)<<2)>>2],t=0):t=-1,t|0}function oo(r,a,c,s,n){r=r|0,a=+a,c=+c,s=s|0,n=n|0;var t=0,u=0,l=0;return u=(e[r+16>>2]|0)+~~(a+.5)|0,t=(e[r+20>>2]|0)+~~(c+.5)|0,(u|0)>=0&&(l=e[r+8>>2]|0,!((t|0)<0|(u|0)>=(l|0)))&&(t|0)<(e[r+12>>2]|0)?(r=e[r+4>>2]|0,t=(je(l,t)|0)+u<<1,e[s>>2]=e[r+(t<<2)>>2],e[n>>2]=e[r+((t|1)<<2)>>2],t=0):t=-1,t|0}function Ls(r){r=r|0;var a=0,c=0;a=Ai(8)|0;do if(a)if(c=Ai(r<<3)|0,e[a>>2]=c,c){e[a+4>>2]=r;break}else{Xi(a),a=0;break}else a=0;while(!1);return a|0}function c0(r){return r=r|0,Xi(e[r>>2]|0),Xi(r),0}function La(r){r=r|0;var a=0,c=0,s=0,n=0,t=0;if(a=+zt(+ +_c(r,r)),a!=0&&(n=e[r>>2]|0,s=+p[n>>3],a=s<0?-a:a,s=s+a,p[n>>3]=s,s=1/+zt(+(s*a)),r=e[r+4>>2]|0,(r|0)>0)){c=0;do t=n+(c<<3)|0,p[t>>3]=s*+p[t>>3],c=c+1|0;while((c|0)<(r|0))}return+-a}function _c(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;if(n=e[r+4>>2]|0,(n|0)!=(e[a+4>>2]|0)&&Fe(0),(n|0)>0){s=e[r>>2]|0,r=e[a>>2]|0,a=0,c=0;do c=c+ +p[s+(a<<3)>>3]*+p[r+(a<<3)>>3],a=a+1|0;while((a|0)<(n|0))}else c=0;return+c}function ao(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0;if(It=S,S=S+16|0,gt=It+8|0,xt=It,se=e[r+8>>2]|0,(se|0)==(e[r+4>>2]|0)&&(se|0)==(e[a+4>>2]|0)&&(se|0)==((e[c+4>>2]|0)+1|0)){if($=se+-2|0,X=gt+4|0,Be=xt+4|0,(se|0)>2){le=se+-1|0,ee=0;do if(E=je(ee,se)|0,M=e[r>>2]|0,p[(e[a>>2]|0)+(ee<<3)>>3]=+p[M+(E+ee<<3)>>3],l=se-ee+-1|0,e[X>>2]=l,Y=ee,ee=ee+1|0,d=M+(E+ee<<3)|0,e[gt>>2]=d,H=+La(gt),p[(e[c>>2]|0)+(Y<<3)>>3]=H,H!=0){if((ee|0)<(se|0)){f=e[a>>2]|0,A=ee;do{if((ee|0)<(A|0)){s=e[r>>2]|0,n=ee,u=0;do H=+p[s+((je(n,se)|0)+A<<3)>>3],u=u+H*+p[M+(n+E<<3)>>3],n=n+1|0;while((n|0)<(A|0))}else u=0;if(s=je(A,se)|0,(A|0)<(se|0)){n=e[r>>2]|0,t=A;do u=u+ +p[n+(t+s<<3)>>3]*+p[M+(t+E<<3)>>3],t=t+1|0;while((t|0)<(se|0))}p[f+(A<<3)>>3]=u,A=A+1|0}while((A|0)<(se|0))}if(e[Be>>2]=l,e[X>>2]=l,e[gt>>2]=d,e[xt>>2]=(e[a>>2]|0)+(ee<<3),u=+_c(gt,xt)*.5,(le|0)>(Y|0)){s=e[a>>2]|0,l=le;do{if(B=+p[M+(l+E<<3)>>3],n=s+(l<<3)|0,H=+p[n>>3]-u*B,p[n>>3]=H,n=je(l,se)|0,(l|0)<(se|0)){t=e[r>>2]|0,d=l;do A=t+(d+n<<3)|0,p[A>>3]=+p[A>>3]-(B*+p[s+(d<<3)>>3]+H*+p[M+(d+E<<3)>>3]),d=d+1|0;while((d|0)<(se|0))}l=l+-1|0}while((l|0)>(Y|0))}}while((ee|0)<($|0))}if((se|0)<=1?(se|0)>0&&(n=0,t=e[r>>2]|0,s=e[a>>2]|0,q=27):(q=je($,se)|0,t=e[r>>2]|0,s=e[a>>2]|0,p[s+($<<3)>>3]=+p[t+(q+$<<3)>>3],n=se+-1|0,p[(e[c>>2]|0)+($<<3)>>3]=+p[t+(n+q<<3)>>3],q=27),(q|0)==27&&(p[s+(n<<3)>>3]=+p[t+((je(n,se)|0)+n<<3)>>3]),(se|0)>0){f=(se|0)>0,M=se;do{if(c=M,M=M+-1|0,A=je(M,se)|0,E=e[r>>2]|0,(c|0)<=($|0)&&(Ae=se-M+-1|0,ce=E+(A+c<<3)|0,(c|0)<(se|0))){s=(c|0)<(se|0),l=c;do{if(e[Be>>2]=Ae,e[X>>2]=Ae,e[gt>>2]=ce,n=je(l,se)|0,e[xt>>2]=(e[r>>2]|0)+(n+c<<3),u=+_c(gt,xt),s){t=e[r>>2]|0,d=c;do q=t+(d+n<<3)|0,p[q>>3]=+p[q>>3]-u*+p[E+(d+A<<3)>>3],d=d+1|0;while((d|0)<(se|0))}l=l+1|0}while((l|0)<(se|0))}if(f){s=0;do p[E+(s+A<<3)>>3]=0,s=s+1|0;while((s|0)<(se|0))}p[E+(A+M<<3)>>3]=1}while((c|0)>1);s=0}else s=0}else s=-1;return S=It,s|0}function F1(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0;return t=+p[c>>3],u=+p[c+8>>3],n=+p[c+16>>3],s=+p[a+88>>3]+(t*+p[a+64>>3]+u*+p[a+72>>3]+n*+p[a+80>>3]),s==0?c=-1:(l=+p[a+56>>3]+(t*+p[a+32>>3]+u*+p[a+40>>3]+n*+p[a+48>>3]),p[r>>3]=(+p[a+24>>3]+(t*+p[a>>3]+u*+p[a+8>>3]+n*+p[a+16>>3]))/s,p[r+8>>3]=l/s,c=0),c|0}function o1(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0;Be=S,S=S+1072|0,ce=Be+1056|0,Ae=Be+768|0,se=Be+192|0,X=Be+48|0,$=Be,yi=+p[c>>3],Nt=+p[s>>3],le=yi*Nt,ui=+p[c+8>>3],ee=s+8|0,It=+p[ee>>3],q=ui*It,u=+p[c+16>>3],Et=+p[s+16>>3],d=u*Et,f=+p[c+24>>3],qt=+p[c+32>>3],gi=+p[c+40>>3],A=It*gi,l=+p[c+48>>3],E=Et*l,M=+p[c+56>>3],xt=+p[c+64>>3],gt=+p[c+72>>3],B=It*gt,n=+p[c+80>>3],H=Et*n,t=+p[c+88>>3],p[Ae>>3]=le,p[Ae+8>>3]=yi*It,p[Ae+16>>3]=yi*Et,p[Ae+24>>3]=Nt*ui,p[Ae+32>>3]=q,p[Ae+40>>3]=Et*ui,p[Ae+48>>3]=Nt*u,p[Ae+56>>3]=It*u,p[Ae+64>>3]=d,p[Ae+72>>3]=yi,p[Ae+80>>3]=ui,p[Ae+88>>3]=u,u=Nt*qt,p[Ae+96>>3]=u,p[Ae+104>>3]=It*qt,p[Ae+112>>3]=Et*qt,p[Ae+120>>3]=Nt*gi,p[Ae+128>>3]=A,p[Ae+136>>3]=Et*gi,p[Ae+144>>3]=Nt*l,p[Ae+152>>3]=It*l,p[Ae+160>>3]=E,p[Ae+168>>3]=qt,p[Ae+176>>3]=gi,p[Ae+184>>3]=l,l=xt*Nt,p[Ae+192>>3]=l,p[Ae+200>>3]=It*xt,p[Ae+208>>3]=Et*xt,p[Ae+216>>3]=Nt*gt,It=+p[ee>>3],p[Ae+224>>3]=gt*It,p[Ae+232>>3]=Et*gt,p[Ae+240>>3]=Nt*n,p[Ae+248>>3]=It*n,p[Ae+256>>3]=H,p[Ae+264>>3]=xt,p[Ae+272>>3]=gt,p[Ae+280>>3]=n,s=se+64|0,c=se,ee=c+64|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(ee|0));p[s>>3]=-1,s=se+72|0,e[s>>2]=0,e[s+4>>2]=0,e[s+8>>2]=0,e[s+12>>2]=0,e[s+16>>2]=0,e[s+20>>2]=0,e[s+24>>2]=0,e[s+28>>2]=0,p[se+104>>3]=1,s=se+160|0,c=se+112|0,ee=c+48|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(ee|0));p[s>>3]=1,s=se+240|0,c=se+168|0,ee=c+72|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(ee|0));p[s>>3]=-1,s=se+296|0,c=se+248|0,ee=c+48|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(ee|0));p[s>>3]=-1,s=se+304|0,e[s>>2]=0,e[s+4>>2]=0,e[s+8>>2]=0,e[s+12>>2]=0,e[s+16>>2]=0,e[s+20>>2]=0,e[s+24>>2]=0,e[s+28>>2]=0,p[se+336>>3]=1,s=se+456|0,c=se+344|0,ee=c+112|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(ee|0));p[s>>3]=1,s=se+512|0,c=se+464|0,ee=c+48|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(ee|0));p[s>>3]=1,s=se+568|0,c=se+520|0,ee=c+48|0;do e[c>>2]=0,c=c+4|0;while((c|0)<(ee|0));p[s>>3]=1,Y=0;do{ee=0;do{c=X+(Y*48|0)+(ee<<3)|0,p[c>>3]=0,n=0,s=0;do n=n+ +p[Ae+(Y*96|0)+(s<<3)>>3]*+p[se+(s*48|0)+(ee<<3)>>3],s=s+1|0;while((s|0)!=12);p[c>>3]=n,ee=ee+1|0}while((ee|0)!=6);Y=Y+1|0}while((Y|0)!=3);if(ui=f+(le+q+d),yi=M+(u+A+E),n=t+(l+B+H),t=+p[a>>3],u=+p[a+8>>3],l=+p[a+16>>3],d=+p[a+24>>3]+(ui*t+yi*u+n*l),f=+p[a+32>>3],A=+p[a+40>>3],E=+p[a+48>>3],M=+p[a+56>>3]+(ui*f+yi*A+n*E),B=+p[a+64>>3],H=+p[a+72>>3],le=+p[a+80>>3],n=+p[a+88>>3]+(ui*B+yi*H+n*le),n==0)Ot(3,5089,ce),s=-1;else{yi=n*n,p[$>>3]=(t*n-d*B)/yi,p[$+8>>3]=(n*u-d*H)/yi,p[$+16>>3]=(n*l-d*le)/yi,p[$+24>>3]=(n*f-M*B)/yi,p[$+32>>3]=(n*A-M*H)/yi,p[$+40>>3]=(n*E-M*le)/yi,c=0;do{n=+p[$+(c*24|0)>>3],t=+p[$+(c*24|0)+8>>3],u=+p[$+(c*24|0)+16>>3],s=0;do ce=r+(c*48|0)+(s<<3)|0,p[ce>>3]=0,yi=n*+p[X+(s<<3)>>3]+0,p[ce>>3]=yi,yi=yi+t*+p[X+48+(s<<3)>>3],p[ce>>3]=yi,p[ce>>3]=yi+u*+p[X+96+(s<<3)>>3],s=s+1|0;while((s|0)!=6);c=c+1|0}while((c|0)!=2);s=0}return S=Be,s|0}function xc(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0;l=S,S=S+48|0,u=l+24|0,t=l+12|0,n=l,e[u+4>>2]=6,e[u+8>>2]=1,e[u>>2]=r,e[t+4>>2]=s,e[t+8>>2]=1,e[t>>2]=a,e[n+4>>2]=s,e[n+8>>2]=6,e[n>>2]=c,a=yc(n)|0;do if(a){if(r=el(a,n)|0,!r){vn(a)|0,c=-1;break}if(c=el(a,t)|0,!c){vn(a)|0,vn(r)|0,c=-1;break}if((tl(r)|0)<0){vn(a)|0,vn(r)|0,vn(c)|0,c=-1;break}else{Ia(u,r,c)|0,vn(a)|0,vn(r)|0,vn(c)|0,c=0;break}}else c=-1;while(!1);return S=l,c|0}function ea(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0;E=S,S=S+192|0,f=E+96|0,A=E,u=+p[a>>3],d=+p[a+8>>3],s=+p[a+16>>3],c=u*u+d*d+s*s,c==0?(l=0,n=0,s=1,c=0):(c=+zt(+c),l=c,n=s/c,s=u/c,c=d/c),q=+p[a+24>>3],le=+p[a+32>>3],d=+p[a+40>>3],M=+ci(+l),u=1-M,l=+Qi(+l),p[f>>3]=M+s*s*u,Y=c*s*u,ee=n*l,p[f+8>>3]=Y-ee,H=s*n*u,B=c*l,p[f+16>>3]=H+B,p[f+24>>3]=q,p[f+32>>3]=Y+ee,p[f+40>>3]=M+c*c*u,c=c*n*u,l=s*l,p[f+48>>3]=c-l,p[f+56>>3]=le,p[f+64>>3]=H-B,p[f+72>>3]=c+l,p[f+80>>3]=M+n*n*u,p[f+88>>3]=d,t=0;do{c=+p[r+(t<<5)>>3],s=+p[r+(t<<5)+8>>3],n=+p[r+(t<<5)+16>>3],a=0;do p[A+(t<<5)+(a<<3)>>3]=c*+p[f+(a<<3)>>3]+s*+p[f+32+(a<<3)>>3]+n*+p[f+64+(a<<3)>>3],a=a+1|0;while((a|0)!=4);a=A+(t<<5)+24|0,p[a>>3]=+p[r+(t<<5)+24>>3]+ +p[a>>3],t=t+1|0}while((t|0)!=3);a=0;do p[r+(a<<5)>>3]=+p[A+(a<<5)>>3],p[r+(a<<5)+8>>3]=+p[A+(a<<5)+8>>3],p[r+(a<<5)+16>>3]=+p[A+(a<<5)+16>>3],p[r+(a<<5)+24>>3]=+p[A+(a<<5)+24>>3],a=a+1|0;while((a|0)!=3);return S=E,0}function vo(r){r=r|0;var a=0,c=0;if(a=Ai(136)|0,!a)a=0;else{c=0;do p[a+(c<<5)>>3]=+p[r+(c<<5)>>3],p[a+(c<<5)+8>>3]=+p[r+(c<<5)+8>>3],p[a+(c<<5)+16>>3]=+p[r+(c<<5)+16>>3],p[a+(c<<5)+24>>3]=+p[r+(c<<5)+24>>3],c=c+1|0;while((c|0)!=3);e[a+96>>2]=10,p[a+104>>3]=.10000000149011612,p[a+112>>3]=.9900000095367432,p[a+120>>3]=4,p[a+128>>3]=.5}return a|0}function ta(r){r=r|0;var a=0;return a=e[r>>2]|0,a?(Xi(a),e[r>>2]=0,a=0):a=-1,a|0}function R0(r,a){return r=r|0,a=+a,r?(p[r+128>>3]=a,r=0):r=-1,r|0}function il(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0;ce=S,S=S+176|0,d=ce+168|0,l=ce+160|0,Y=ce+48|0,se=ce+64|0,q=ce,le=a+8|0,t=e[le>>2]|0;do if((t|0)>=3){if(Ae=Ai(t*96|0)|0,!Ae){Ot(3,5109,l),t=-1;break}if(ee=Ai(t<<4)|0,ee)t=0;else{Ot(3,5109,d),Xi(Ae),t=-1;break}do p[s+(t<<5)>>3]=+p[c+(t<<5)>>3],p[s+(t<<5)+8>>3]=+p[c+(t<<5)+8>>3],p[s+(t<<5)+16>>3]=+p[c+(t<<5)+16>>3],p[s+(t<<5)+24>>3]=+p[c+(t<<5)+24>>3],t=t+1|0;while((t|0)!=3);B=a+4|0,d=Y+8|0,c=r+104|0,A=r+120|0,E=r+112|0,M=r+96|0,f=0,H=0;e:for(;;){if(Ra(r,s,se)|0,t=e[le>>2]|0,(t|0)>0){u=0,l=0;do{if((F1(Y,se,(e[B>>2]|0)+(l*24|0)|0)|0)<0){l=10;break e}t=e[a>>2]|0,X=+p[t+(l<<4)>>3]-+p[Y>>3],$=+p[t+(l<<4)+8>>3]-+p[d>>3],u=u+(X*X+$*$),t=l<<1,p[ee+(t<<3)>>3]=X,p[ee+((t|1)<<3)>>3]=$,l=l+1|0,t=e[le>>2]|0}while((l|0)<(t|0))}else u=0;if(u=u/+(t|0),u<+p[c>>3]){l=24;break}if((H|0)>0&&u<+p[A>>3]&&u/f>+p[E>>3]){l=24;break}if((H|0)==(e[M>>2]|0)){l=24;break}if((t|0)>0){l=0;do{if((o1(Ae+(l*12<<3)|0,r,s,(e[B>>2]|0)+(l*24|0)|0)|0)<0){l=20;break e}l=l+1|0,t=e[le>>2]|0}while((l|0)<(t|0))}if((xc(q,ee,Ae,t<<1)|0)<0){l=22;break}ea(s,q)|0,f=u,H=H+1|0}if((l|0)==10){a1(Ae,ee),t=-1;break}else if((l|0)==20){a1(Ae,ee),t=-1;break}else if((l|0)==22){a1(Ae,ee),t=-1;break}else if((l|0)==24){p[n>>3]=u,Xi(Ae),Xi(ee),t=0;break}}else t=-1;while(!1);return S=ce,t|0}function a1(r,a){r=r|0,a=a|0,Xi(r),Xi(a)}function vh(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0;Et=S,S=S+192|0,A=Et+184|0,f=Et+176|0,d=Et+168|0,t=Et+160|0,Be=Et+48|0,xt=Et+64|0,gt=Et,X=a+8|0,l=e[X>>2]|0;do if((l|0)>=4){if(E=~~(+(l|0)*+p[r+128>>3])+-1|0,E=(E|0)<3?3:E,Nt=Ai(l*96|0)|0,!Nt){Ot(3,5109,t),t=-1;break}if(It=Ai(l<<4)|0,!It){Ot(3,5109,d),Xi(Nt),t=-1;break}if(t=l<<3,$=Ai(t)|0,!$){Ot(3,5109,f),Xi(Nt),Xi(It),t=-1;break}if(ce=Ai(t)|0,ce)t=0;else{Ot(3,5109,A),Xi(Nt),Xi(It),Xi($),t=-1;break}do p[s+(t<<5)>>3]=+p[c+(t<<5)>>3],p[s+(t<<5)+8>>3]=+p[c+(t<<5)+8>>3],p[s+(t<<5)+16>>3]=+p[c+(t<<5)+16>>3],p[s+(t<<5)+24>>3]=+p[c+(t<<5)+24>>3],t=t+1|0;while((t|0)!=3);se=a+4|0,Ae=Be+8|0,A=ce+(E<<3)|0,c=r+104|0,E=r+120|0,ee=r+112|0,Y=r+96|0,H=0,q=0;e:for(;;){if(Ra(r,s,xt)|0,t=e[X>>2]|0,(t|0)>0){l=0;do{if((F1(Be,xt,(e[se>>2]|0)+(l*24|0)|0)|0)<0){l=14;break e}t=e[a>>2]|0,B=+p[t+(l<<4)>>3]-+p[Be>>3],le=+p[t+(l<<4)+8>>3]-+p[Ae>>3],t=l<<1,p[It+(t<<3)>>3]=B,p[It+((t|1)<<3)>>3]=le,le=B*B+le*le,p[ce+(l<<3)>>3]=le,p[$+(l<<3)>>3]=le,l=l+1|0,t=e[X>>2]|0}while((l|0)<(t|0))}if(e1(ce,t,8,1),le=+p[A>>3]*4,le=le<16?16:le,l=e[X>>2]|0,B=le/6,(l|0)>0){u=0,t=0;do M=+p[ce+(t<<3)>>3],M>le?M=B:(M=1-M/le,M=B*(1-M*(M*M))),u=u+M,t=t+1|0;while((t|0)<(l|0))}else u=0;if(u=u/+(l|0),u<+p[c>>3]){l=36;break}if((q|0)>0&&u<+p[E>>3]&&u/H>+p[ee>>3]){l=36;break}if((q|0)==(e[Y>>2]|0)){l=36;break}if((l|0)>0){f=0,t=0;do{if(M=+p[$+(f<<3)>>3],M<=le){if(l=t*6|0,d=Nt+(l<<3)|0,(o1(d,r,s,(e[se>>2]|0)+(f*24|0)|0)|0)<0){l=28;break e}H=1-M/le,H=H*H,p[d>>3]=+p[d>>3]*H,d=Nt+((l|1)<<3)|0,p[d>>3]=+p[d>>3]*H,d=Nt+(l+2<<3)|0,p[d>>3]=H*+p[d>>3],d=Nt+(l+3<<3)|0,p[d>>3]=H*+p[d>>3],d=Nt+(l+4<<3)|0,p[d>>3]=H*+p[d>>3],d=Nt+(l+5<<3)|0,p[d>>3]=H*+p[d>>3],d=Nt+(l+6<<3)|0,p[d>>3]=H*+p[d>>3],d=Nt+(l+7<<3)|0,p[d>>3]=H*+p[d>>3],d=Nt+(l+8<<3)|0,p[d>>3]=H*+p[d>>3],d=Nt+(l+9<<3)|0,p[d>>3]=H*+p[d>>3],d=Nt+(l+10<<3)|0,p[d>>3]=H*+p[d>>3],l=Nt+(l+11<<3)|0,p[l>>3]=H*+p[l>>3],l=f<<1,p[It+(t<<3)>>3]=H*+p[It+(l<<3)>>3],p[It+(t+1<<3)>>3]=H*+p[It+((l|1)<<3)>>3],l=e[X>>2]|0,t=t+2|0}f=f+1|0}while((f|0)<(l|0))}else t=0;if((t|0)<6){l=32;break}if((xc(gt,It,Nt,t)|0)<0){l=34;break}ea(s,gt)|0,H=u,q=q+1|0}if((l|0)==14){Da(Nt,It,$,ce),t=-1;break}else if((l|0)==28){Da(Nt,It,$,ce),t=-1;break}else if((l|0)==32){Da(Nt,It,$,ce),t=-1;break}else if((l|0)==34){Da(Nt,It,$,ce),t=-1;break}else if((l|0)==36){p[n>>3]=u,Xi(Nt),Xi(It),Xi($),Xi(ce),t=0;break}}else t=-1;while(!1);return S=Et,t|0}function Da(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0,Xi(r),Xi(a),Xi(c),Xi(s)}function Eh(r,a){r=r|0,a=a|0;var c=0;return c=+p[r>>3]-+p[a>>3],(c<0?-1:c>0&1)|0}function yh(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0,ut=0,Kt=0,mt=0,gn=0,Ki=0,hr=0,Ur=0,Ar=0,ai=0,Si=0,Vi=0,Mr=0,Fn=0;Ar=S,S=S+64|0,xt=Ar+48|0,$=Ar+40|0,ce=Ar+32|0,Ae=Ar+24|0,Y=Ar+16|0,E=Ar+8|0,d=Ar;e:do if((s|0)>=4){for(t=0;!((t|0)>=(s|0));)if(+p[c+(t*24|0)+16>>3]!=0){t=-1;break e}else t=t+1|0;if(+p[r>>3]!=0&&+p[r+32>>3]==0&&(Be=r+40|0,+p[Be>>3]!=0)&&+p[r+64>>3]==0&&+p[r+72>>3]==0&&+p[r+80>>3]==1&&+p[r+24>>3]==0&&+p[r+56>>3]==0&&+p[r+88>>3]==0){if(t=s<<1,gt=Bo(t,8)|0,!gt){Ot(3,5124,d),t=-1;break}if(se=Bo(t,1)|0,!se){vn(gt)|0,Ot(3,5150,E),t=-1;break}if(s){t=e[gt>>2]|0,d=e[se>>2]|0,E=0;do Fn=c+(E*24|0)|0,ai=E<<4,p[t+(ai<<3)>>3]=+p[Fn>>3],Mr=c+(E*24|0)+8|0,p[t+((ai|1)<<3)>>3]=+p[Mr>>3],p[t+((ai|2)<<3)>>3]=1,p[t+((ai|3)<<3)>>3]=0,p[t+((ai|4)<<3)>>3]=0,p[t+((ai|5)<<3)>>3]=0,Vi=a+(E<<4)|0,p[t+((ai|6)<<3)>>3]=-(+p[Fn>>3]*+p[Vi>>3]),p[t+((ai|7)<<3)>>3]=-(+p[Mr>>3]*+p[Vi>>3]),p[t+((ai|8)<<3)>>3]=0,p[t+((ai|9)<<3)>>3]=0,p[t+((ai|10)<<3)>>3]=0,p[t+((ai|11)<<3)>>3]=+p[Fn>>3],p[t+((ai|12)<<3)>>3]=+p[Mr>>3],p[t+((ai|13)<<3)>>3]=1,Si=a+(E<<4)+8|0,p[t+((ai|14)<<3)>>3]=-(+p[Fn>>3]*+p[Si>>3]),p[t+((ai|15)<<3)>>3]=-(+p[Mr>>3]*+p[Si>>3]),ai=E<<1,p[d+(ai<<3)>>3]=+p[Vi>>3],p[d+((ai|1)<<3)>>3]=+p[Si>>3],E=E+1|0;while((E|0)!=(s|0))}if(s=yc(gt)|0,!s){vn(gt)|0,vn(se)|0,Ot(3,5176,Y),t=-1;break}if(E=el(s,gt)|0,!E){vn(gt)|0,vn(se)|0,vn(s)|0,Ot(3,5202,Ae),t=-1;break}if(d=el(s,se)|0,!d){vn(gt)|0,vn(se)|0,vn(s)|0,vn(E)|0,Ot(3,5228,ce),t=-1;break}if((tl(E)|0)<0){vn(gt)|0,vn(se)|0,vn(s)|0,vn(E)|0,vn(d)|0,Ot(3,5254,$),t=-1;break}if(t=el(E,d)|0,!t){vn(gt)|0,vn(se)|0,vn(s)|0,vn(E)|0,vn(d)|0,Ot(3,5280,xt),t=-1;break}Fn=e[t>>2]|0,M=+p[Fn+48>>3],hr=+p[r+48>>3],ee=+p[Be>>3],u=(+p[Fn+24>>3]-M*hr)/ee,le=+p[r+16>>3],Ur=+p[r+8>>3],H=+p[r>>3],B=(+p[Fn>>3]-M*le-u*Ur)/H,l=+p[Fn+56>>3],f=(+p[Fn+32>>3]-hr*l)/ee,A=(+p[Fn+8>>3]-le*l-Ur*f)/H,ee=(+p[Fn+40>>3]-hr)/ee,H=(+p[Fn+16>>3]-le-Ur*ee)/H,vn(gt)|0,vn(se)|0,vn(s)|0,vn(E)|0,vn(d)|0,vn(t)|0,Ur=+zt(+(M*M+(u*u+B*B))),le=+zt(+(l*l+(f*f+A*A))),B=B/Ur,u=u/Ur,M=M/Ur,A=A/le,f=f/le,l=l/le,le=(Ur+le)*.5,H=H/le,Ur=1/le,Ur<0?(mt=-u,l=-l,f=-f,M=-M,A=-A,gn=-B,hr=-H,Ki=-Ur):(mt=u,gn=B,hr=H,Ki=ee/le),u=l*mt-f*M,B=A*M-l*gn,H=f*gn-A*mt,le=+zt(+(H*H+(u*u+B*B)));do if(le!=0){if(ee=u/le,B=B/le,u=H/le,Kt=l*M+(f*mt+A*gn),Kt=Kt<0?-Kt:Kt,Kt=(+zt(+(Kt+1))+ +zt(+(1-Kt)))*.5,gn*B-mt*ee!=0?(t=0,It=gn,q=mt,Nt=M,qt=ee,gi=B):(Fn=gn*u-M*ee!=0,t=Fn?1:2,It=Fn?gn:M,q=Fn?M:mt,Nt=Fn?mt:gn,qt=Fn?ee:u,gi=Fn?u:B,u=Fn?B:ee),H=It*gi,le=q*qt,B=H-le,B==0){B=mt,u=gn;break}if(Et=(q*u-Nt*gi)/B,X=Kt*gi/B,H=le-H,B=(It*u-Nt*qt)/H,H=Kt*qt/H,le=Et*Et+B*B+1,ee=Et*X+B*H,q=ee*ee-le*(X*X+H*H+-1),q<0){B=mt,u=gn;break}if(ut=+zt(+q),oi=(ut-ee)/le,Nt=X+Et*oi,yi=H+B*oi,ut=(-ee-ut)/le,Et=X+Et*ut,H=H+B*ut,Fn=(t|0)==1,B=Fn?gi:u,le=Fn?u:gi,ui=Fn?oi:yi,oi=Fn?yi:oi,yi=Fn?ut:H,gi=Fn?H:ut,Fn=(t|0)==2&(Fn^1),H=Fn?qt:B,B=Fn?B:qt,ut=Fn?oi:Nt,oi=Fn?Nt:oi,u=Fn?gi:Et,qt=Fn?Et:gi,A*le-f*B!=0?(t=0,It=A,q=f,Nt=l,gi=B,X=le):(Fn=A*H-l*B!=0,t=Fn?1:2,It=Fn?A:l,q=Fn?l:f,Nt=Fn?f:A,gi=Fn?B:H,X=Fn?H:le,H=Fn?le:B),le=It*X,ee=q*gi,B=le-ee,B==0){B=mt,u=gn;break}if(Et=(q*H-Nt*X)/B,X=Kt*X/B,B=ee-le,q=(It*H-Nt*gi)/B,B=Kt*gi/B,H=Et*Et+q*q+1,le=Et*X+q*B,ee=le*le-H*(X*X+B*B+-1),ee<0){B=mt,u=gn;break}if(ee=+zt(+ee),l=(ee-le)/H,gn=X+Et*l,mt=B+q*l,ee=(-le-ee)/H,M=X+Et*ee,A=B+q*ee,Fn=(t|0)==1,f=Fn?l:mt,l=Fn?mt:l,q=Fn?ee:A,ee=Fn?A:ee,Fn=(t|0)==2&(Fn^1),A=Fn?l:gn,l=Fn?gn:l,X=Fn?ee:M,ee=Fn?M:ee,M=oi*l+(ui*f+ut*A),M=M<0?-M:M,B=oi*ee+(ui*q+ut*X),B=B<0?-B:B,H=qt*l+(yi*f+u*A),H=H<0?-H:H,le=qt*ee+(yi*q+u*X),le=le<0?-le:le,M<B)if(M<H){if(M<le){B=ui,M=oi,u=ut;break}B=yi,l=ee,f=q,M=qt,A=X;break}else{if(H<le){B=yi,M=qt;break}B=yi,l=ee,f=q,M=qt,A=X;break}else if(B<H){if(B<le){B=ui,l=ee,f=q,M=oi,A=X,u=ut;break}B=yi,l=ee,f=q,M=qt,A=X;break}else{if(H<le){B=yi,M=qt;break}B=yi,l=ee,f=q,M=qt,A=X;break}}else B=mt,u=gn;while(!1);ut=l*B-f*M,Kt=A*M-l*u,mt=f*u-A*B,gn=+zt(+(mt*mt+(ut*ut+Kt*Kt))),p[n>>3]=u,p[n+32>>3]=B,p[n+64>>3]=M,p[n+8>>3]=A,p[n+40>>3]=f,p[n+72>>3]=l,p[n+16>>3]=ut/gn,p[n+48>>3]=Kt/gn,p[n+80>>3]=mt/gn,p[n+24>>3]=hr,p[n+56>>3]=Ki,p[n+88>>3]=Ur,t=0}else t=-1}else t=-1;while(!1);return S=Ar,t|0}function wh(r){return r=r|0,Xi(e[r>>2]|0),Xi(r),0}function Ch(r,a,c,s){return r=r|0,a=a|0,c=c|0,s=s|0,+ +l1(r,a,c,s,0)}function _h(r,a,c,s){return r=r|0,a=a|0,c=c|0,s=s|0,+ +l1(r,a,c,s,1)}function l1(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0;if(Nt=S,S=S+208|0,$=Nt+200|0,ce=Nt+192|0,X=Nt+96|0,Be=Nt,gt=s+4|0,M=e[gt>>2]|0,B=s+112|0,H=s+120|0,(M|0)>0){Y=e[s>>2]|0,q=(c|0)>0,se=(c|0)>0,Ae=0;do{if(e[Y+(Ae*320|0)+4>>2]|0){if(d=Y+(Ae*320|0)+312|0,f=Y+(Ae*320|0)|0,se){E=0,u=-1;do l=e[a+(E<<8)+12>>2]|0,!(l|0)&&(ee=a+(E<<8)+248|0,le=e[ee>>2]|0,ee=e[ee+4>>2]|0,!((le|0)==0&(ee|0)==0))?(l=d,(le|0)==(e[l>>2]|0)&&(ee|0)==(e[l+4>>2]|0)&&(It=20)):(l|0)==(e[f>>2]|0)&&(It=20),(It|0)==20&&(It=0,t=+p[a+(E<<8)+48>>3],t<+p[H>>3]||(u|0)!=-1&&!(+p[a+(u<<8)+48>>3]<t)||(u=E)),E=E+1|0;while((E|0)<(c|0))}else u=-1;e[Y+(Ae*320|0)+304>>2]=u,(u|0)>-1&&(e[a+(u<<8)+16>>2]=e[a+(u<<8)+24>>2])}else{if(q){l=e[Y+(Ae*320|0)>>2]|0,d=0,u=-1;do(e[a+(d<<8)+8>>2]|0)==(l|0)&&(A=+p[a+(d<<8)+40>>3],!(A<+p[B>>3]))&&((u|0)!=-1&&!(+p[a+(u<<8)+40>>3]<A)||(u=d)),d=d+1|0;while((d|0)<(c|0))}else u=-1;e[Y+(Ae*320|0)+304>>2]=u,(u|0)>-1&&(e[a+(u<<8)+16>>2]=e[a+(u<<8)+20>>2])}Ae=Ae+1|0}while((Ae|0)<(M|0))}if((M|0)>0)for(B=0,u=0,M=0,l=0;;){d=e[s>>2]|0,f=e[d+(B*320|0)+304>>2]|0;do if((f|0)<0)d=M;else{if(E=a+(f<<8)|0,+Oc(r,E,+p[d+(B*320|0)+8>>3],Be)>4){if(e[(e[s>>2]|0)+(B*320|0)+304>>2]=-1,d=a+(f<<8)+236|0,e[d>>2]|0){d=M;break}e[d>>2]=7,d=M;break}if(d=e[E>>2]|0,(l|0)==0|(M|0)<(d|0)){u=0;do p[X+(u<<5)>>3]=+p[Be+(u<<5)>>3],p[X+(u<<5)+8>>3]=+p[Be+(u<<5)+8>>3],p[X+(u<<5)+16>>3]=+p[Be+(u<<5)+16>>3],p[X+(u<<5)+24>>3]=+p[Be+(u<<5)+24>>3],u=u+1|0;while((u|0)!=3);u=B}else d=M;l=l+1|0}while(!1);if(B=B+1|0,(B|0)>=(e[gt>>2]|0))break;M=d}else u=0,l=0;do if(l|0&&(l|0)>=(e[s+128>>2]|0)){if(Ra(X,(e[s>>2]|0)+(u*320|0)+112|0,Be)|0,M=l<<2,H=Ai(l<<6)|0,H||(Ot(3,5472,ce),Fe(1)),B=Ai(l*96|0)|0,B||(Ot(3,5472,$),Fe(1)),d=e[gt>>2]|0,(d|0)>0){f=e[s>>2]|0,E=0,u=0;do l=e[f+(E*320|0)+304>>2]|0,(l|0)>=0&&(ce=e[a+(l<<8)+16>>2]|0,c=(4-ce|0)%4|0,$=u<<3,p[H+($<<3)>>3]=+p[a+(l<<8)+168+(c<<4)>>3],p[H+(($|1)<<3)>>3]=+p[a+(l<<8)+168+(c<<4)+8>>3],c=(5-ce|0)%4|0,p[H+(($|2)<<3)>>3]=+p[a+(l<<8)+168+(c<<4)>>3],p[H+(($|3)<<3)>>3]=+p[a+(l<<8)+168+(c<<4)+8>>3],c=(6-ce|0)%4|0,p[H+(($|4)<<3)>>3]=+p[a+(l<<8)+168+(c<<4)>>3],p[H+(($|5)<<3)>>3]=+p[a+(l<<8)+168+(c<<4)+8>>3],ce=(7-ce|0)%4|0,p[H+(($|6)<<3)>>3]=+p[a+(l<<8)+168+(ce<<4)>>3],p[H+(($|7)<<3)>>3]=+p[a+(l<<8)+168+(ce<<4)+8>>3],$=u*12|0,p[B+($<<3)>>3]=+p[f+(E*320|0)+208>>3],p[B+(($|1)<<3)>>3]=+p[f+(E*320|0)+216>>3],p[B+(($|2)<<3)>>3]=+p[f+(E*320|0)+224>>3],p[B+(($|3)<<3)>>3]=+p[f+(E*320|0)+232>>3],p[B+($+4<<3)>>3]=+p[f+(E*320|0)+240>>3],p[B+($+5<<3)>>3]=+p[f+(E*320|0)+248>>3],p[B+($+6<<3)>>3]=+p[f+(E*320|0)+256>>3],p[B+($+7<<3)>>3]=+p[f+(E*320|0)+264>>3],p[B+($+8<<3)>>3]=+p[f+(E*320|0)+272>>3],p[B+($+9<<3)>>3]=+p[f+(E*320|0)+280>>3],ce=e[s>>2]|0,p[B+($+10<<3)>>3]=+p[ce+(E*320|0)+288>>3],p[B+($+11<<3)>>3]=+p[ce+(E*320|0)+296>>3],u=u+1|0),E=E+1|0;while((E|0)<(d|0))}if(f=s+104|0,l=(n|0)!=0,!(e[f>>2]|0))u=s+8|0,t=+e0(r,Be,H,B,M,u),l&t>=20&&(R0(e[r>>2]|0,.8)|0,t=+Po(r,Be,H,B,M,u),t>=20&&(R0(e[r>>2]|0,.6)|0,t=+Po(r,Be,H,B,M,u),t>=20&&(R0(e[r>>2]|0,.4)|0,t=+Po(r,Be,H,B,M,u),t>=20&&(R0(e[r>>2]|0,0)|0,t=+Po(r,Be,H,B,M,u))))),Xi(B),Xi(H);else{t=+e0(r,Be,H,B,M,X),d=s+8|0,A=+e0(r,d,H,B,M,d),u=t<A;do if(l){if(u){u=0;do p[s+8+(u<<5)>>3]=+p[X+(u<<5)>>3],p[s+8+(u<<5)+8>>3]=+p[X+(u<<5)+8>>3],p[s+8+(u<<5)+16>>3]=+p[X+(u<<5)+16>>3],p[s+8+(u<<5)+24>>3]=+p[X+(u<<5)+24>>3],u=u+1|0;while((u|0)!=3)}else t=A;if(t>=20){if(R0(e[r>>2]|0,.8)|0,t=+Po(r,Be,H,B,M,X),A=+Po(r,d,H,B,M,d),t<A){u=0;do p[s+8+(u<<5)>>3]=+p[X+(u<<5)>>3],p[s+8+(u<<5)+8>>3]=+p[X+(u<<5)+8>>3],p[s+8+(u<<5)+16>>3]=+p[X+(u<<5)+16>>3],p[s+8+(u<<5)+24>>3]=+p[X+(u<<5)+24>>3],u=u+1|0;while((u|0)!=3)}else t=A;if(t>=20){if(R0(e[r>>2]|0,.6)|0,t=+Po(r,Be,H,B,M,X),A=+Po(r,d,H,B,M,d),t<A){u=0;do p[s+8+(u<<5)>>3]=+p[X+(u<<5)>>3],p[s+8+(u<<5)+8>>3]=+p[X+(u<<5)+8>>3],p[s+8+(u<<5)+16>>3]=+p[X+(u<<5)+16>>3],p[s+8+(u<<5)+24>>3]=+p[X+(u<<5)+24>>3],u=u+1|0;while((u|0)!=3)}else t=A;if(t>=20){if(R0(e[r>>2]|0,.4)|0,t=+Po(r,Be,H,B,M,X),A=+Po(r,d,H,B,M,d),t<A){u=0;do p[s+8+(u<<5)>>3]=+p[X+(u<<5)>>3],p[s+8+(u<<5)+8>>3]=+p[X+(u<<5)+8>>3],p[s+8+(u<<5)+16>>3]=+p[X+(u<<5)+16>>3],p[s+8+(u<<5)+24>>3]=+p[X+(u<<5)+24>>3],u=u+1|0;while((u|0)!=3)}else t=A;if(t>=20){if(R0(e[r>>2]|0,0)|0,t=+Po(r,Be,H,B,M,X),A=+Po(r,d,H,B,M,d),t<A)u=0;else{t=A;break}do p[s+8+(u<<5)>>3]=+p[X+(u<<5)>>3],p[s+8+(u<<5)+8>>3]=+p[X+(u<<5)+8>>3],p[s+8+(u<<5)+16>>3]=+p[X+(u<<5)+16>>3],p[s+8+(u<<5)+24>>3]=+p[X+(u<<5)+24>>3],u=u+1|0;while((u|0)!=3)}}}}}else if(u){u=0;do p[s+8+(u<<5)>>3]=+p[X+(u<<5)>>3],p[s+8+(u<<5)+8>>3]=+p[X+(u<<5)+8>>3],p[s+8+(u<<5)+16>>3]=+p[X+(u<<5)+16>>3],p[s+8+(u<<5)+24>>3]=+p[X+(u<<5)+24>>3],u=u+1|0;while((u|0)!=3)}else t=A;while(!1);Xi(B),Xi(H)}if(t<20){e[f>>2]=1;break}if(e[f>>2]=0,f=e[gt>>2]|0,(f|0)>0){u=e[s>>2]|0,d=0;do l=e[u+(d*320|0)+304>>2]|0,(l|0)>=0&&(xt=a+(l<<8)+236|0,(e[xt>>2]|0)==0)&&(e[xt>>2]=8),d=d+1|0;while((d|0)<(f|0))}}else It=38;while(!1);return(It|0)==38&&(e[s+104>>2]=0,t=-1),S=Nt,+t}function xh(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0,ut=0,Kt=0,mt=0,gn=0,Ki=0,hr=0,Ur=0,Ar=0,ai=0,Si=0,Vi=0;ai=S,S=S+2544|0,Ur=ai+208|0,hr=ai+200|0,Et=ai+184|0,Ki=ai+176|0,Nt=ai+168|0,It=ai+152|0,gn=ai+144|0,xt=ai+136|0,ut=ai+128|0,oi=ai+120|0,yi=ai+112|0,gt=ai+104|0,u=ai+96|0,t=ai+88|0,n=ai+80|0,s=ai+72|0,c=ai+64|0,gi=ai,qt=ai+2280|0,ui=ai+232|0,$=ai+224|0,mt=ai+220|0,X=ai+216|0,Be=ai+212|0,Ar=eo(r,5306)|0;e:do if(!Ar)e[c>>2]=r,Ot(3,5308,c),c=Qs(e[(Zn()|0)>>2]|0)|0,e[s>>2]=5367,e[s+4>>2]=c,Ot(3,5361,s),c=0;else{if(ml(qt,Ar),e[n>>2]=mt,(Ro(qt,5368,n)|0)!=1){e[t>>2]=r,Ot(3,5371,t),b0(Ar)|0,c=0;break}c=e[mt>>2]|0,Kt=Ai(c*320|0)|0,Kt||(Ot(3,5472,u),Fe(1)),H=gi+8|0,le=gi+16|0,ee=gi+24|0,Y=gi+32|0,q=gi+40|0,se=gi+48|0,Ae=gi+56|0,ce=(a|0)==0;t:do if((c|0)>0){c=0,n=0;i:for(;;){if(ml(qt,Ar),s=Kt+(c*320|0)|0,t=Kt+(c*320|0)+312|0,e[gt>>2]=t,e[gt+4>>2]=$,(Ro(qt,5489,gt)|0)==1)B=e[t>>2]|0,e[s>>2]=(B&-32768|0)==0&!0?B&32767:0,e[Kt+(c*320|0)+4>>2]=1,n=n|2;else{if(ce){s=10;break}if(!(j0(ui,r,2048,1)|0)){s=12;break}if(us(ui,qt,2047-(mo(ui)|0)|0)|0,B=vc(a,ui)|0,e[s>>2]=B,(B|0)<0){s=14;break}e[Kt+(c*320|0)+4>>2]=0,n=n|1}if(ml(qt,Ar),s=Kt+(c*320|0)+8|0,e[xt>>2]=s,(Ro(qt,5785,xt)|0)!=1){s=18;break}if(ml(qt,Ar),E=Kt+(c*320|0)+16|0,M=Kt+(c*320|0)+24|0,B=Kt+(c*320|0)+40|0,e[It>>2]=E,e[It+4>>2]=M,e[It+8>>2]=Kt+(c*320|0)+32,e[It+12>>2]=B,(Ro(qt,5894,It)|0)!=4)if(e[Nt>>2]=X,e[Nt+4>>2]=Be,(Ro(qt,5910,Nt)|0)==2)t=0;else{s=21;break}else t=1;do{if(ml(qt,Ar),e[Et>>2]=Kt+(c*320|0)+16+(t<<5),e[Et+4>>2]=Kt+(c*320|0)+16+(t<<5)+8,e[Et+8>>2]=Kt+(c*320|0)+16+(t<<5)+16,e[Et+12>>2]=Kt+(c*320|0)+16+(t<<5)+24,(Ro(qt,5894,Et)|0)!=4){s=23;break i}t=t+1|0}while((t|0)<3);Ec(E,Kt+(c*320|0)+112|0)|0,Vi=+p[s>>3],Si=Vi*-.5,p[gi>>3]=Si,Vi=Vi*.5,p[H>>3]=Vi,p[le>>3]=Vi,p[ee>>3]=Vi,p[Y>>3]=Vi,p[q>>3]=Si,p[se>>3]=Si,p[Ae>>3]=Si,s=Kt+(c*320|0)+48|0,t=Kt+(c*320|0)+56|0,u=Kt+(c*320|0)+72|0,l=Kt+(c*320|0)+80|0,d=Kt+(c*320|0)+88|0,f=Kt+(c*320|0)+104|0,A=0;do Si=+p[gi+(A<<4)>>3],Vi=+p[gi+(A<<4)+8>>3],p[Kt+(c*320|0)+208+(A*24|0)>>3]=+p[B>>3]+(+p[E>>3]*Si+ +p[M>>3]*Vi),p[Kt+(c*320|0)+208+(A*24|0)+8>>3]=+p[u>>3]+(+p[s>>3]*Si+ +p[t>>3]*Vi),p[Kt+(c*320|0)+208+(A*24|0)+16>>3]=+p[f>>3]+(+p[l>>3]*Si+ +p[d>>3]*Vi),A=A+1|0;while((A|0)!=4);if(c=c+1|0,(c|0)>=(e[mt>>2]|0))break t}(s|0)==10?(e[yi>>2]=r,e[yi+4>>2]=qt,Ot(3,5496,yi)):(s|0)==12?(e[oi>>2]=r,Ot(3,5624,oi)):(s|0)==14?(e[ut>>2]=r,e[ut+4>>2]=ui,Ot(3,5708,ut)):(s|0)==18?(e[gn>>2]=r,e[gn+4>>2]=c+1,Ot(3,5789,gn)):(s|0)==21?(e[Ki>>2]=r,e[Ki+4>>2]=c+1,Ot(3,5916,Ki)):(s|0)==23&&(e[hr>>2]=r,e[hr+4>>2]=c+1,Ot(3,5916,hr)),b0(Ar)|0,Xi(Kt),c=0;break e}else n=0;while(!1);b0(Ar)|0,c=Ai(136)|0,c||(Ot(3,5472,Ur),Fe(1)),e[c>>2]=Kt,e[c+4>>2]=e[mt>>2],e[c+104>>2]=0;do if((n&3|0)!=3)if(s=c+108|0,n&1){e[s>>2]=0;break}else{e[s>>2]=1;break}else e[c+108>>2]=2;while(!1);p[c+112>>3]=.5,p[c+120>>3]=.5}while(!1);return S=ai,c|0}function ml(r,a){r=r|0,a=a|0;var c=0,s=0;e:do if(No(r,256,a)|0)for(;;){c=mo(r)|0;t:do if(c)for(;;){switch(c=c+-1|0,s=r+c|0,U[s>>0]|0){case 13:case 10:break;default:break t}if(U[s>>0]=0,!c)break t}while(!1);switch(U[r>>0]|0){case 0:case 35:break;default:break e}if(!(No(r,256,a)|0))break e}while(!1)}function Mc(r,a,c,s){r=r|0,a=+a,c=+c,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0;if(H=S,S=S+400|0,A=H+296|0,B=H+200|0,E=H+128|0,M=H,l=e[r>>2]|0,n=e[r+4>>2]|0,!((Uo(r+8|0,A,B)|0)<0)){u=+(n+-1|0),n=A+32|0,p[n>>3]=u*+p[A+64>>3]-+p[n>>3],n=A+40|0,p[n>>3]=u*+p[A+72>>3]-+p[n>>3],n=A+48|0,p[n>>3]=u*+p[A+80>>3]-+p[n>>3],n=A+56|0,p[n>>3]=u*+p[A+88>>3]-+p[n>>3],t=+p[A+80>>3],n=0;do p[E+(n*24|0)>>3]=+p[A+(n<<5)>>3]/t,p[E+(n*24|0)+8>>3]=+p[A+(n<<5)+8>>3]/t,p[E+(n*24|0)+16>>3]=+p[A+(n<<5)+16>>3]/t,n=n+1|0;while((n|0)!=3);t=+(l+-1|0),p[M>>3]=+p[E>>3]*2/t,p[M+8>>3]=+p[E+8>>3]*2/t,p[M+16>>3]=+p[E+16>>3]*2/t+-1,l=M+24|0,e[l>>2]=0,e[l+4>>2]=0,e[l+8>>2]=0,e[l+12>>2]=0,p[M+40>>3]=+p[E+32>>3]*2/u,p[M+48>>3]=+p[E+40>>3]*2/u+-1,l=M+56|0,t=c-a,e[l>>2]=0,e[l+4>>2]=0,e[l+8>>2]=0,e[l+12>>2]=0,e[l+16>>2]=0,e[l+20>>2]=0,p[M+80>>3]=(a+c)/t,p[M+88>>3]=c*-2*a/t,l=M+96|0,e[l>>2]=0,e[l+4>>2]=0,e[l+8>>2]=0,e[l+12>>2]=0,p[M+112>>3]=1,p[M+120>>3]=0,t=+p[B+24>>3],u=+p[B+56>>3],c=+p[B+88>>3],l=0;do{a=+p[M+(l<<5)>>3],n=M+(l<<5)+8|0,r=M+(l<<5)+16|0,d=+p[n>>3],f=+p[r>>3],A=0;do p[s+((A<<2)+l<<3)>>3]=a*+p[B+(A<<3)>>3]+d*+p[B+32+(A<<3)>>3]+f*+p[B+64+(A<<3)>>3],A=A+1|0;while((A|0)!=3);p[s+(l+12<<3)>>3]=+p[M+(l<<5)+24>>3]+(a*t+ +p[n>>3]*u+ +p[r>>3]*c),l=l+1|0}while((l|0)!=4)}S=H}function Mh(r){r=r|0,e[496]=r}function Cu(){return e[496]|0}function _u(r){r=r|0;var a=0,c=0;a=r+212|0,c=e[a>>2]|0,c&&(Ql(c)|0,Eo(e[a>>2]|0)|0,e[a>>2]=0),a=r+224|0,e[a>>2]|0&&(Hu(a)|0,e[a>>2]=0),a=r+192|0,e[a>>2]|0&&(is(a)|0,e[a>>2]=0)}function Sh(r){r=r|0;var a=0,c=0,s=0,n=0,t=0;if(t=S,S=S+16|0,c=t,e[c>>2]=r,!(yr(2044,c)|0))r=-1;else{if(n=wr(2044,c)|0,r=n+196|0,a=e[r>>2]|0,a&&(Xi(a),e[r>>2]=0,e[n+200>>2]=0),_u(n),Fa(e[n+216>>2]|0)|0,Yh(2044,c)|0,c=n+248|0,s=n+252|0,r=e[c>>2]|0,(e[s>>2]|0)!=(r|0)){a=0;do wh(e[r+(a<<3)+4>>2]|0)|0,a=a+1|0,r=e[c>>2]|0;while(a>>>0<(e[s>>2]|0)-r>>3>>>0)}u1(c),Gs(c),u1(n+248|0),Gs(n),r=0}return S=t,r|0}function bh(r){r=r|0;var a=0,c=0,s=0,n=0,t=0;return t=S,S=S+208|0,n=t+192|0,s=t,c=t+196|0,U[r>>0]&1?a=e[r+8>>2]|0:a=r+1|0,(wc(a,1,s,t+184|0)|0)<0?(U[r>>0]&1?a=e[r+8>>2]|0:a=r+1|0,e[n>>2]=a,Ot(3,6093,n),a=-1):(a=e[521]|0,e[521]=a+1,e[c>>2]=a,Cs(Iu(2064,c)|0,s|0,184)|0),S=t,a|0}function Th(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0;A=S,S=S+48|0,f=A+24|0,d=A+16|0,u=A+8|0,n=A,c=A+32|0,s=A+28|0,e[c>>2]=r,e[s>>2]=a;do if(yr(2044,c)|0&&(l=wr(2044,c)|0,(Bu(2064,s)|0)!=0)){if(t=l+8|0,Cs(t|0,Iu(2064,s)|0,184)|0,s=e[t>>2]|0,c=l+204|0,a=e[l+12>>2]|0,r=l+208|0,(s|0)==(e[c>>2]|0)&&(a|0)==(e[r>>2]|0)||(e[n>>2]=s,e[n+4>>2]=a,Ot(2,6152,n),kl(t,e[c>>2]|0,e[r>>2]|0,t)|0),_u(l),c=Ba(t,15)|0,r=l+192|0,e[r>>2]=c,!c){Ot(3,6199,u),c=-1;break}if(c=ld(c)|0,a=l+212|0,e[a>>2]=c,!c){Ot(3,6237,d),c=-1;break}if(H0(c,2)|0,d=Vd(t)|0,e[l+224>>2]=d,d){Ku(e[a>>2]|0,e[l+216>>2]|0)|0,Mc(e[r>>2]|0,+p[l+232>>3],+p[l+240>>3],l+264|0),c=0;break}else{Ot(3,6274,f),c=-1;break}}else c=-1;while(!1);return S=A,c|0}function xu(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0;return u=S,S=S+16|0,t=u+8|0,n=u,c=u+12|0,e[c>>2]=r,yr(2044,c)|0?(s=wr(2044,c)|0,U[a>>0]&1?a=e[a+8>>2]|0:a=a+1|0,r=s+216|0,c=vc(e[r>>2]|0,a)|0,e[s+260>>2]=c,(c|0)<0&&(e[n>>2]=a,Ot(3,6312,n),Fa(e[r>>2]|0)|0,Ot(3,6358,t),c=-1)):c=-1,S=u,c|0}function Rh(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0;d=S,S=S+32|0,n=d+16|0,s=d+8|0,c=d+20|0,l=d,e[c>>2]=r;do if(yr(2044,c)|0){if(u=wr(2044,c)|0,U[a>>0]&1?c=e[a+8>>2]|0:c=a+1|0,r=e[u+212>>2]|0,a=u+216|0,t=u+220|0,c=xh(c,e[a>>2]|0)|0,e[t>>2]=c,!c){Ot(3,6402,s),Fa(e[a>>2]|0)|0,Ot(3,6429,n),c=-1;break}switch(e[c+108>>2]|0){case 0:{Ul(r,0)|0;break}case 1:{Ul(r,2)|0;break}default:Ul(r,3)|0}if(r=u+248|0,a=u+252|0,s=e[a>>2]|0,c=s-(e[r>>2]|0)>>3,n=l,e[n>>2]=0,e[n+4>>2]=0,e[l>>2]=c,e[l+4>>2]=e[t>>2],(s|0)==(e[u+256>>2]|0)){Lu(r,l);break}else{u=l,c=e[u>>2]|0,u=e[u+4>>2]|0,l=s,e[l>>2]=c,e[l+4>>2]=u,e[a>>2]=(e[a>>2]|0)+8;break}}else c=-1;while(!1);return S=d,c|0}function Ih(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;return t=S,S=S+16|0,c=t,e[c>>2]=r,yr(2044,c)|0&&(s=wr(2044,c)|0,(a|0)>=0)&&(n=e[s+248>>2]|0,(e[s+252>>2]|0)-n>>3>>>0>a>>>0)?c=e[(e[n+(a<<3)+4>>2]|0)+4>>2]|0:c=-1,S=t,c|0}function Bh(r){r=r|0;var a=0,c=0;return c=S,S=S+16|0,a=c,e[a>>2]=r,yr(2044,a)|0?(a=wr(2044,a)|0,a=(e[a+252>>2]|0)-(e[a+248>>2]|0)>>3):a=-1,S=c,a|0}function Rd(r,a){r=r|0,a=+a;var c=0,s=0;s=S,S=S+16|0,c=s,e[c>>2]=r,yr(2044,c)|0&&(p[(wr(2044,c)|0)+232>>3]=a),S=s}function Lh(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,c=s,e[c>>2]=r,yr(2044,c)|0?a=+p[(wr(2044,c)|0)+232>>3]:a=-1,S=s,+a}function Id(r,a){r=r|0,a=+a;var c=0,s=0;s=S,S=S+16|0,c=s,e[c>>2]=r,yr(2044,c)|0&&(p[(wr(2044,c)|0)+240>>3]=a),S=s}function Bd(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,c=s,e[c>>2]=r,yr(2044,c)|0?a=+p[(wr(2044,c)|0)+240>>3]:a=-1,S=s,+a}function Dh(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;n=S,S=S+16|0,s=n,c=n+4|0,e[c>>2]=r,yr(2044,c)|0&&!(Ul(e[(wr(2044,c)|0)+212>>2]|0,a)|0)&&(e[s>>2]=a,Ot(1,6478,s)),S=n}function Ph(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,a=s+4|0,c=s,e[a>>2]=r,yr(2044,a)|0?(r=(U1(e[(wr(2044,a)|0)+212>>2]|0,c)|0)==0,S=s,(r?e[c>>2]|0:-1)|0):(S=s,-1)}function Oh(r,a){r=r|0,a=+a;var c=0,s=0,n=0,t=0,u=0,l=0;l=S,S=S+16|0,u=l,c=l+8|0,e[c>>2]=r,yr(2044,c)|0&&(s=wr(2044,c)|0,!(a<=0|a>=1))&&(n=a,t=e[s+212>>2]|0,(t|0)!=0)&&!(vl(t,n)|0)&&(p[u>>3]=n,Ot(1,6513,u)),S=l}function Sc(r){r=r|0;var a=0,c=0,s=0,n=0;return n=S,S=S+16|0,a=n+8|0,s=n,e[a>>2]=r,yr(2044,a)|0&&(c=e[(wr(2044,a)|0)+212>>2]|0,(c|0)!=0)?(r=(Qu(c,s)|0)==0,S=n,+(r?+p[s>>3]:-1)):(S=n,-1)}function Ld(r,a){r=r|0,a=a|0;var c=0,s=0;s=S,S=S+16|0,c=s,e[c>>2]=r,yr(2044,c)|0&&B0(e[(wr(2044,c)|0)+212>>2]|0,a)|0,S=s}function Dd(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,a=s+4|0,c=s,e[a>>2]=r,yr(2044,a)|0?(ud(e[(wr(2044,a)|0)+212>>2]|0,c)|0,a=e[c>>2]|0):a=-1,S=s,a|0}function Pd(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;n=S,S=S+16|0,s=n,c=n+4|0,e[c>>2]=r,yr(2044,c)|0&&!(G0(e[(wr(2044,c)|0)+212>>2]|0,a)|0)&&(e[s>>2]=a,Ot(1,6544,s)),S=n}function ia(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,a=s+4|0,c=s,e[a>>2]=r,yr(2044,a)|0?(r=(N1(e[(wr(2044,a)|0)+212>>2]|0,c)|0)==0,S=s,(r?e[c>>2]|0:-1)|0):(S=s,-1)}function Mu(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;t=S,S=S+16|0,n=t,c=t+4|0,e[c>>2]=r,yr(2044,c)|0&&(s=wr(2044,c)|0,a>>>0<=255)&&!(Do(e[s+212>>2]|0,a)|0)&&(e[n>>2]=a,Ot(1,6569,n)),S=t}function bc(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,a=s+4|0,c=s,e[a>>2]=r,yr(2044,a)|0?(r=(Lc(e[(wr(2044,a)|0)+212>>2]|0,c)|0)==0,S=s,(r?e[c>>2]|0:-1)|0):(S=s,-1)}function Fh(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;n=S,S=S+16|0,s=n,c=n+4|0,e[c>>2]=r,yr(2044,c)|0&&!(Lo(e[(wr(2044,c)|0)+212>>2]|0,a)|0)&&(e[s>>2]=a,Ot(1,6590,s)),S=n}function kh(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,a=s+4|0,c=s,e[a>>2]=r,yr(2044,a)|0?(r=(p1(e[(wr(2044,a)|0)+212>>2]|0,c)|0)==0,S=s,(r?e[c>>2]|0:-1)|0):(S=s,-1)}function Nh(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;return n=S,S=S+16|0,s=n,c=n+4|0,e[c>>2]=r,yr(2044,c)|0?(r=(a|0)!=0,qr(e[(wr(2044,c)|0)+212>>2]|0,r&1)|0,e[s>>2]=r?6616:6620,Ot(1,6625,s)):a=0,S=n,a|0}function Su(r){r=r|0;var a=0,c=0;return c=S,S=S+16|0,a=c,e[a>>2]=r,yr(2044,a)|0?a=e[(e[(wr(2044,a)|0)+212>>2]|0)+4834148>>2]|0:a=0,S=c,a|0}function c1(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,a=s+4|0,c=s,e[a>>2]=r,yr(2044,a)|0?(jo(e[(wr(2044,a)|0)+212>>2]|0,c)|0,a=e[c>>2]|0):a=0,S=s,a|0}function bu(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;n=S,S=S+16|0,s=n,c=n+4|0,e[c>>2]=r,yr(2044,c)|0&&!(Gu(e[(wr(2044,c)|0)+212>>2]|0,a)|0)&&(e[s>>2]=a,Ot(1,6647,s)),S=n}function Tu(r){r=r|0;var a=0,c=0,s=0;return s=S,S=S+16|0,a=s+4|0,c=s,e[a>>2]=r,yr(2044,a)|0?(r=(cd(e[(wr(2044,a)|0)+212>>2]|0,c)|0)==0,S=s,(r?e[c>>2]|0:-1)|0):(S=s,-1)}function Ru(r,a){r=r|0,a=a|0;var c=0;c=0;do p[a+(c<<5)>>3]=+p[r+(c<<5)>>3],p[a+(c<<5)+8>>3]=+p[r+(c<<5)+8>>3],p[a+(c<<5)+16>>3]=+p[r+(c<<5)+16>>3],p[a+(c<<5)+24>>3]=+p[r+(c<<5)+24>>3],c=c+1|0;while((c|0)!=3)}function Uh(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;n=S,S=S+16|0,s=n,e[s>>2]=r;do if(yr(2044,s)|0)if(s=wr(2044,s)|0,r=e[s+212>>2]|0,(e[r+44>>2]|0)>(a|0)){+Oc(e[s+224>>2]|0,(a|0)<0?8:r+48+(a<<8)|0,+(c|0),264),s=0;break}else{s=e[523]|0;break}else s=e[522]|0;while(!1);return S=n,s|0}function Hh(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;n=S,S=S+16|0,s=n,e[s>>2]=r;do if(yr(2044,s)|0)if(s=wr(2044,s)|0,r=e[s+212>>2]|0,(e[r+44>>2]|0)>(a|0)){+zu(e[s+224>>2]|0,(a|0)<0?8:r+48+(a<<8)|0,264,+(c|0),264),s=0;break}else{s=e[523]|0;break}else s=e[522]|0;while(!1);return S=n,s|0}function Gh(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;n=S,S=S+16|0,s=n,e[s>>2]=r;do if(yr(2044,s)|0)if(s=e[(wr(2044,s)|0)+212>>2]|0,(e[s+44>>2]|0)>(a|0)){e[((a|0)<0?8:s+48+(a<<8)|0)+16>>2]=c,s=0;break}else{s=e[523]|0;break}else s=e[522]|0;while(!1);return S=n,s|0}function Qh(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0;s=S,S=S+16|0,c=s,e[c>>2]=r;do if(yr(2044,c)|0)if(c=e[(wr(2044,c)|0)+212>>2]|0,(e[c+44>>2]|0)>(a|0)){c=(a|0)<0?8:c+48+(a<<8)|0,E=+p[33],p[c+168>>3]=E,l=+p[34],p[c+176>>3]=l,A=+p[35],p[c+184>>3]=A,u=+p[36],p[c+192>>3]=u,f=+p[37],p[c+200>>3]=f,t=+p[38],p[c+208>>3]=t,d=+p[39],p[c+216>>3]=d,n=+p[40],p[c+224>>3]=n,p[c+56>>3]=(E+A+f+d)*.25,p[c+64>>3]=(l+u+t+n)*.25,c=0;break}else{c=e[523]|0;break}else c=e[522]|0;while(!1);return S=s,c|0}function Vh(r,a){r=r|0,a=a|0;var c=0,s=0;s=S,S=S+16|0,c=s,e[c>>2]=r;do if(yr(2044,c)|0)if(c=wr(2044,c)|0,r=e[c+248>>2]|0,(a|0)<0||(e[c+252>>2]|0)-r>>3>>>0<=a>>>0){c=e[524]|0;break}else{a=e[r+(a<<3)+4>>2]|0,r=e[c+212>>2]|0,+_h(e[c+224>>2]|0,r+48|0,e[r+44>>2]|0,a),Ru(a+8|0,264),c=0;break}else c=e[522]|0;while(!1);return S=s,c|0}function Od(r,a){r=r|0,a=a|0;var c=0,s=0;s=S,S=S+16|0,c=s,e[c>>2]=r;do if(yr(2044,c)|0)if(c=wr(2044,c)|0,r=e[c+248>>2]|0,(a|0)<0||(e[c+252>>2]|0)-r>>3>>>0<=a>>>0){c=e[524]|0;break}else{a=e[r+(a<<3)+4>>2]|0,r=e[c+212>>2]|0,+Ch(e[c+224>>2]|0,r+48|0,e[r+44>>2]|0,a),Ru(a+8|0,264),c=0;break}else c=e[522]|0;while(!1);return S=s,c|0}function C0(r){r=r|0;var a=0,c=0;return c=S,S=S+16|0,a=c,e[a>>2]=r,yr(2044,a)|0?(a=wr(2044,a)|0,a=hd(e[a+212>>2]|0,e[a+196>>2]|0)|0):a=e[522]|0,S=c,a|0}function u0(r){r=r|0;var a=0,c=0;return c=S,S=S+16|0,a=c,e[a>>2]=r,yr(2044,a)|0?a=(e[(wr(2044,a)|0)+212>>2]|0)+44|0:a=2088,S=c,e[a>>2]|0}function zh(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;n=S,S=S+16|0,s=n,e[s>>2]=r;do if(yr(2044,s)|0){if(r=wr(2044,s)|0,s=e[r+248>>2]|0,(a|0)<0||(e[r+252>>2]|0)-s>>3>>>0<=a>>>0){s=e[524]|0;break}if(s=e[s+(a<<3)+4>>2]|0,(c|0)<0||(e[s+4>>2]|0)<=(c|0)){s=e[523]|0;break}else{s=e[s>>2]|0,Ru(s+(c*320|0)+16|0,264),qs(0,e[s+(c*320|0)+304>>2]|0,e[s+(c*320|0)>>2]|0,e[s+(c*320|0)+4>>2]|0,+ +p[s+(c*320|0)+8>>3])|0,s=0;break}}else s=e[522]|0;while(!1);return S=n,s|0}function Wh(r,a){r=r|0,a=a|0;var c=0,s=0;s=S,S=S+16|0,c=s,e[c>>2]=r;do if(yr(2044,c)|0)if(c=e[(wr(2044,c)|0)+212>>2]|0,(e[c+44>>2]|0)>(a|0)){c=(a|0)<0?8:c+48+(a<<8)|0,ca(1,e[c>>2]|0,e[c+4>>2]|0,e[c+8>>2]|0,e[c+12>>2]|0,e[c+16>>2]|0,e[c+20>>2]|0,e[c+24>>2]|0,+ +p[c+32>>3],+ +p[c+40>>3],+ +p[c+48>>3],+ +p[c+56>>3],+ +p[c+64>>3],+ +p[c+72>>3],+ +p[c+80>>3],+ +p[c+88>>3],+ +p[c+96>>3],+ +p[c+104>>3],+ +p[c+112>>3],+ +p[c+120>>3],+ +p[c+128>>3],+ +p[c+136>>3],+ +p[c+144>>3],+ +p[c+152>>3],+ +p[c+160>>3],+ +p[c+168>>3],+ +p[c+176>>3],+ +p[c+184>>3],+ +p[c+192>>3],+ +p[c+200>>3],+ +p[c+208>>3],+ +p[c+216>>3],+ +p[c+224>>3],e[c+240>>2]|0)|0,c=0;break}else{c=e[523]|0;break}else c=e[522]|0;while(!1);return S=s,c|0}function Kh(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0;return u=S,S=S+16|0,t=u+8|0,n=u+12|0,s=e[525]|0,e[525]=s+1,e[n>>2]=s,n=wr(2044,n)|0,e[n>>2]=s,e[n+204>>2]=r,e[n+208>>2]=a,l=je(r<<2,a)|0,a=n+200|0,e[a>>2]=l,r=n+196|0,e[r>>2]=Ai(l)|0,l=fd()|0,e[n+216>>2]=l,l||Ot(3,8285,u),Th(s,c)|0,e[t>>2]=e[a>>2],Ot(1,8322,t),Vr(2,e[n>>2]|0,e[r>>2]|0,e[a>>2]|0,n+264|0,264)|0,S=u,e[n>>2]|0}function Xh(r){r=r|0;var a=0;r=S,S=S+16|0,a=r,Nl(8591,7),I0(8597,3),Tc(8606,2),Tc(8617,3),nl(8633,4),I0(8651,4),Fd(8671,5),Nl(8683,8),nl(8700,5),Nl(8720,9),Nl(8738,10),nl(8760,6),nl(8783,7),I0(8812,6),I0(8825,7),Nl(8838,11),nl(8857,8),nl(8867,9),I0(8880,8),I0(8893,9),qh(8912,10),Du(8924,1),Pu(8936,1),h1(8959,1),Pu(8982,2),h1(9004,2),_0(9026,1),I0(9043,10),_0(9060,2),I0(9073,11),_0(9086,3),I0(9110,12),kd(9134,3),h1(9147,3),_0(9160,4),I0(9178,13),_0(9196,5),I0(9212,14),_0(9228,6),I0(9245,15),Rc(9262,2088),Rc(9291,2096),Rc(9319,2092),mi(9352,680,0),mi(9369,680,1),mi(9385,680,0),mi(9407,680,0),mi(9432,680,1),mi(9457,680,1),mi(9482,680,100),mi(9509,680,0),mi(9535,680,1),mi(9561,680,0),mi(9588,680,0),mi(9615,680,1),mi(9641,680,2),mi(9666,680,3),mi(9704,680,4),mi(9741,680,0),mi(9775,680,0),mi(9799,680,1),mi(9825,680,2),mi(9852,680,2),mi(9886,680,5),p[a>>3]=.5,Ou(9904,a),mi(9925,680,0),mi(9944,680,1),mi(9962,680,2),mi(9980,680,3),mi(9999,680,4),mi(10021,680,3),mi(10040,680,515),mi(10069,680,259),mi(10097,680,4),mi(10116,680,772),mi(10146,680,1028),mi(10176,680,0),mi(10207,680,1),mi(10243,680,2),mi(10277,680,3),mi(10315,680,0),mi(10348,680,1),mi(10395,680,2),mi(10437,680,3),mi(10480,680,4),mi(10532,680,5),mi(10583,680,6),mi(10628,680,7),mi(10667,680,8),mi(10712,680,9),S=r}function yr(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0;c=e[a>>2]|0,n=e[r+4>>2]|0;e:do if(n)if(t=n+-1|0,u=(t&n|0)==0,u?s=t&c:s=(c>>>0)%(n>>>0)|0,a=e[(e[r>>2]|0)+(s<<2)>>2]|0,a)do{if(a=e[a>>2]|0,!a){a=0;break e}if(r=e[a+4>>2]|0,u?r=r&t:r=(r>>>0)%(n>>>0)|0,(r|0)!=(s|0)){a=0;break e}}while((e[a+8>>2]|0)!=(c|0));else a=0;else a=0;while(!1);return a|0}function wr(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;return t=S,S=S+32|0,n=t+8|0,s=t,c=yr(r,a)|0,c||(fc(n,r,a),pc(s,r,e[n>>2]|0),c=e[s>>2]|0,e[n>>2]=0),S=t,c+16|0}function Yh(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;return n=S,S=S+16|0,c=n+4|0,s=n,a=yr(r,a)|0,a?(e[s>>2]=a,e[c>>2]=e[s>>2],b1(r,c)|0,a=1):a=0,S=n,a|0}function u1(r){r=r|0;var a=0,c=0;if(c=e[r>>2]|0,c){if(a=r+4|0,r=e[a>>2]|0,(r|0)!=(c|0)){do r=r+-8|0;while((r|0)!=(c|0));e[a>>2]=r}Gs(c)}}function Iu(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;return t=S,S=S+32|0,n=t+8|0,s=t,c=Bu(r,a)|0,c||(Ho(n,r,a),na(s,r,e[n>>2]|0),c=e[s>>2]|0,e[n>>2]=0),S=t,c+16|0}function Bu(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0;c=e[a>>2]|0,n=e[r+4>>2]|0;e:do if(n)if(t=n+-1|0,u=(t&n|0)==0,u?s=t&c:s=(c>>>0)%(n>>>0)|0,a=e[(e[r>>2]|0)+(s<<2)>>2]|0,a)do{if(a=e[a>>2]|0,!a){a=0;break e}if(r=e[a+4>>2]|0,u?r=r&t:r=(r>>>0)%(n>>>0)|0,(r|0)!=(s|0)){a=0;break e}}while((e[a+8>>2]|0)!=(c|0));else a=0;else a=0;while(!1);return a|0}function Lu(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0;l=S,S=S+32|0,u=l,t=r+4|0,c=e[r>>2]|0,n=((e[t>>2]|0)-c>>3)+1|0,n>>>0>536870911&&Zl(r),s=c,c=(e[r+8>>2]|0)-s|0,c>>3>>>0<268435455?(c=c>>2,c=c>>>0<n>>>0?n:c):c=536870911,td(u,c,(e[t>>2]|0)-s>>3,r+8|0),t=u+8|0,n=e[t>>2]|0,c=a,s=e[c+4>>2]|0,a=n,e[a>>2]=e[c>>2],e[a+4>>2]=s,e[t>>2]=n+8,Nu(r,u),Uu(u),S=l}function Nl(r,a){r=r|0,a=a|0,ir(r|0,4,2200,10911,1,a|0)}function I0(r,a){r=r|0,a=a|0,ir(r|0,2,2192,10801,10,a|0)}function Tc(r,a){r=r|0,a=a|0,ir(r|0,3,2180,10906,12,a|0)}function nl(r,a){r=r|0,a=a|0,ir(r|0,3,2168,10906,13,a|0)}function Fd(r,a){r=r|0,a=a|0,ir(r|0,2,2160,10801,11,a|0)}function qh(r,a){r=r|0,a=a|0,ir(r|0,2,2152,10797,7,a|0)}function Du(r,a){r=r|0,a=a|0,ir(r|0,1,2148,10794,16,a|0)}function Pu(r,a){r=r|0,a=a|0,ir(r|0,3,2136,10789,1,a|0)}function h1(r,a){r=r|0,a=a|0,ir(r|0,2,2128,10785,1,a|0)}function _0(r,a){r=r|0,a=a|0,ir(r|0,3,2116,10780,1,a|0)}function kd(r,a){r=r|0,a=a|0,ir(r|0,3,2104,10775,2,a|0)}function Rc(r,a){r=r|0,a=a|0,mi(r|0,680,e[a>>2]|0)}function Ou(r,a){r=r|0,a=a|0,mi(r|0,720,~~+p[a>>3]>>>0|0)}function Jh(){e[511]=0,e[512]=0,e[513]=0,e[514]=0,P[515]=1,_t(11,2044,V|0)|0,e[516]=0,e[517]=0,e[518]=0,e[519]=0,P[520]=1,_t(12,2064,V|0)|0,Xh(0)}function Zh(r){r=r|0,Ud(r)}function k1(r){r=r|0,Zo(r)}function Zo(r){r=r|0;var a=0;Nd(r,e[r+8>>2]|0),a=e[r>>2]|0,e[r>>2]=0,a&&Gs(a)}function Nd(r,a){if(r=r|0,a=a|0,a)do r=a,a=e[a>>2]|0,Gs(r);while(a|0)}function Ud(r){r=r|0;var a=0;Ic(r,e[r+8>>2]|0),a=e[r>>2]|0,e[r>>2]=0,a&&Gs(a)}function Ic(r,a){if(r=r|0,a=a|0,a)do r=a,a=e[a>>2]|0,u1(r+264|0),Gs(r);while(a|0)}function $o(r,a,c){r=r|0,a=a|0,c=+c,Zt[r&3](a,c)}function Hd(r,a,c){r=r|0,a=a|0,c=c|0,cn[r&7](a,c)}function En(r,a){return r=r|0,a=a|0,+ +Bi[r&3](a)}function d1(r,a,c){r=r|0,a=a|0,c=+c,Zt[r&3](a,c)}function Fu(r){return r=r|0,Fi[r&1]()|0}function $h(r,a){r=r|0,a=a|0,_i[r&15](a)}function Gd(r,a){r=r|0,a=a|0;var c=0,s=0;return c=S,S=S+16|0,s=c,f1(s,a),r=mn[r&31](s)|0,Q1(s),S=c,r|0}function f1(r,a){r=r|0,a=a|0,Xu(r,a+4|0,e[a>>2]|0)}function Bc(r,a,c){return r=r|0,a=a|0,c=c|0,Pi[r&15](a,c)|0}function ku(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;return s=S,S=S+16|0,n=s,f1(n,c),r=Pi[r&15](a,n)|0,Q1(n),S=s,r|0}function jh(r,a){return r=r|0,a=a|0,mn[r&31](a)|0}function ed(r,a,c,s){return r=r|0,a=a|0,c=c|0,s=s|0,ze[r&15](a,c,s)|0}function td(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0,e[r+12>>2]=0,e[r+16>>2]=s,a?s=Wa(a<<3)|0:s=0,e[r>>2]=s,c=s+(c<<3)|0,e[r+8>>2]=c,e[r+4>>2]=c,e[r+12>>2]=s+(a<<3)}function Nu(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0;s=e[r>>2]|0,t=r+4|0,c=a+4|0,n=(e[t>>2]|0)-s|0,u=(e[c>>2]|0)+(0-(n>>3)<<3)|0,e[c>>2]=u,Cs(u|0,s|0,n|0)|0,n=e[r>>2]|0,e[r>>2]=e[c>>2],e[c>>2]=n,n=a+8|0,s=e[t>>2]|0,e[t>>2]=e[n>>2],e[n>>2]=s,n=r+8|0,r=a+12|0,s=e[n>>2]|0,e[n>>2]=e[r>>2],e[r>>2]=s,e[a>>2]=e[c>>2]}function Uu(r){r=r|0;var a=0,c=0,s=0;if(c=e[r+4>>2]|0,s=r+8|0,a=e[s>>2]|0,(a|0)!=(c|0)){do a=a+-8|0;while((a|0)!=(c|0));e[s>>2]=a}a=e[r>>2]|0,a&&Gs(a)}function Ho(r,a,c){r=r|0,a=a|0,c=c|0;var s=0;s=Wa(200)|0,e[s+8>>2]=e[c>>2],Ht(s+16|0,0,184)|0,e[r>>2]=s,r=r+4|0,e[r>>2]=a+8,e[r+4>>2]=257}function na(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0;f=e[c+8>>2]|0,le=c+4|0,e[le>>2]=f,H=a+4|0,d=e[H>>2]|0,B=(d|0)==0;e:do if(B)n=0,M=12;else if(A=d+-1|0,E=(A&d|0)==0,E?n=A&f:n=(f>>>0)%(d>>>0)|0,s=e[(e[a>>2]|0)+(n<<2)>>2]|0,!s)M=12;else for(;;){if(t=e[s>>2]|0,!t){M=12;break e}if(s=e[t+4>>2]|0,E?s=s&A:s=(s>>>0)%(d>>>0)|0,(s|0)!=(n|0)){M=12;break e}if((e[t+8>>2]|0)==(f|0)){s=0,c=t;break}else s=t}while(!1);if((M|0)==12){f=a+12|0,u=+(((e[f>>2]|0)+1|0)>>>0),l=+P[a+16>>2];do if(B|u>+(d>>>0)*l)if(d>>>0>2?s=(d+-1&d|0)==0:s=0,t=(s&1|d<<1)^1,s=~~+Ir(+(u/l))>>>0,hc(a,t>>>0<s>>>0?s:t),t=e[H>>2]|0,s=e[le>>2]|0,n=t+-1|0,n&t){d=t,n=(s>>>0)%(t>>>0)|0;break}else{d=t,n=n&s;break}while(!1);s=e[(e[a>>2]|0)+(n<<2)>>2]|0,s?(e[c>>2]=e[s>>2],e[s>>2]=c):(s=a+8|0,e[c>>2]=e[s>>2],e[s>>2]=c,e[(e[a>>2]|0)+(n<<2)>>2]=s,s=e[c>>2]|0,s&&(s=e[s+4>>2]|0,n=d+-1|0,n&d?s=(s>>>0)%(d>>>0)|0:s=s&n,e[(e[a>>2]|0)+(s<<2)>>2]=c)),e[f>>2]=(e[f>>2]|0)+1,s=1}e[r>>2]=c,U[r+4>>0]=s}function gl(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t*3|0)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){do if(((me[M+1>>0]|0)+(me[M>>0]|0)+(me[M+2>>0]|0)|0)>(Ae|0)){if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}else w[r>>1]=0,U[t>>0]=0,s=E;while(!1);if(B=B+1|0,l=M+3|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+6|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function id(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<1)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){f=me[M>>0]|0,A=me[M+1>>0]|0;do if(((f&248)+10+(f<<5&224)+(A>>>3&28)+(A<<3&248)|0)>(Ae|0)){if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}else w[r>>1]=0,U[t>>0]=0,s=E;while(!1);if(B=B+1|0,l=M+2|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+4|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function nd(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<2)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){do if(((me[M+1>>0]|0)+(me[M>>0]|0)+(me[M+2>>0]|0)|0)>(Ae|0)){if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}else w[r>>1]=0,U[t>>0]=0,s=E;while(!1);if(B=B+1|0,l=M+4|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+8|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function ra(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<1)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){A=me[M>>0]|0;do if(((A&240)+24+(A<<4&240)+((me[M+1>>0]|0)&240)|0)>(Ae|0)){if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}else w[r>>1]=0,U[t>>0]=0,s=E;while(!1);if(B=B+1|0,l=M+2|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+4|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function rd(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<1)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){f=me[M>>0]|0,A=me[M+1>>0]|0;do if(((f&248)+12+(f<<5&224)+(A>>>3&24)+(A<<2&248)|0)>(Ae|0)){if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}else w[r>>1]=0,U[t>>0]=0,s=E;while(!1);if(B=B+1|0,l=M+2|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+4|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function Pa(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,f=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=f,l=f+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=s*3|0,se=a+-1|0,(c|0)>0)for(t=0,s=f,u=f+(se<<1)|0;w[u>>1]=0,w[s>>1]=0,t=t+1|0,!((t|0)>=(c|0));)s=s+(a<<1)|0,u=u+(a<<1)|0;u=n+1179664|0,t=a+1|0,ee=0-a|0,H=1-a|0,le=~a;e:do if((ce|0)>1){Y=(se|0)>1,d=(e[n+4>>2]|0)+t|0,q=1,l=r+(t<<2)|0,r=f+(t<<1)|0,s=0;t:for(;;){if(Y)for(t=d,B=1,M=l,E=s;;){do if(((me[M+2>>0]|0)+(me[M+1>>0]|0)+(me[M+3>>0]|0)|0)>(Ae|0)){if(U[t>>0]=-1,s=w[r+(ee<<1)>>1]|0,s<<16>>16>0){w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(d=w[r+(H<<1)>>1]|0,f=d<<16>>16,s=w[r+(le<<1)>>1]|0,A=s<<16>>16,l=s<<16>>16>0,d<<16>>16<=0){if(l){w[r>>1]=s,s=A*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-3<<2)|0,(e[l>>2]|0)<(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=w[r+-2>>1]|0,s<<16>>16>0){if(w[r>>1]=s,s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,s=n+1310736+(s+-3<<2)|0,(e[s>>2]|0)>=(B|0)){s=E;break}e[s>>2]=B,s=E;break}else{if(s=E+1|0,(E|0)>32767)break t;w[r>>1]=s,e[n+1179664+(E<<2)>>2]=s<<16>>16,E=E*7|0,e[n+1310736+(E<<2)>>2]=1,e[n+1310736+(E+1<<2)>>2]=B,e[n+1310736+(E+2<<2)>>2]=q,e[n+1310736+(E+3<<2)>>2]=B,e[n+1310736+(E+4<<2)>>2]=B,e[n+1310736+(E+5<<2)>>2]=q,e[n+1310736+(E+6<<2)>>2]=q;break}}if(l){if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+(A+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,A=n+1310736+(s+-5<<2)|0,e[A>>2]=(e[A>>2]|0)+q,e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(l=w[r+-2>>1]|0,l<<16>>16<=0){w[r>>1]=d,s=f*7|0,l=n+1310736+(s+-7<<2)|0,e[l>>2]=(e[l>>2]|0)+1,l=n+1310736+(s+-6<<2)|0,e[l>>2]=(e[l>>2]|0)+B,l=n+1310736+(s+-5<<2)|0,e[l>>2]=(e[l>>2]|0)+q,l=n+1310736+(s+-4<<2)|0,(e[l>>2]|0)>(B|0)&&(e[l>>2]=B),e[n+1310736+(s+-1<<2)>>2]=q,s=E;break}if(s=e[n+1179664+(f+-1<<2)>>2]|0,f=e[n+1179664+((l<<16>>16)+-1<<2)>>2]|0,(s|0)>(f|0))if(w[r>>1]=f,(E|0)>0)for(l=0,d=u;;)if((e[d>>2]|0)==(s|0)&&(e[d>>2]=f),l=l+1|0,(l|0)>=(E|0)){s=f;break}else d=d+4|0;else s=f;else if(w[r>>1]=s,(s|0)<(f|0)&(E|0)>0)for(l=0,d=u;(e[d>>2]|0)==(f|0)&&(e[d>>2]=s),l=l+1|0,!((l|0)>=(E|0));)d=d+4|0;s=(s<<16>>16)*7|0,A=n+1310736+(s+-7<<2)|0,e[A>>2]=(e[A>>2]|0)+1,A=n+1310736+(s+-6<<2)|0,e[A>>2]=(e[A>>2]|0)+B,s=n+1310736+(s+-5<<2)|0,e[s>>2]=(e[s>>2]|0)+q,s=E}else w[r>>1]=0,U[t>>0]=0,s=E;while(!1);if(B=B+1|0,l=M+4|0,r=r+2|0,t=t+1|0,(B|0)>=(se|0))break;M=l,E=s}else t=d;if(q=q+1|0,(q|0)>=(ce|0)){f=s,X=52;break e}else d=t+2|0,l=l+8|0,r=r+4|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(r=n+12|0,(f|0)<1)s=1;else for(l=1,s=1;t=e[u>>2]|0,(t|0)==(l|0)?(t=s,s=s+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[u>>2]=t,(l|0)<(f|0);)l=l+1|0,u=u+4|0;if(d=n+8|0,t=s+-1|0,e[d>>2]=t,t){if(Ht(r|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(s|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[d>>2]|0))}if((f|0)>0){r=0;do u=(e[n+1179664+(r<<2)>>2]|0)+-1|0,l=r*7|0,t=n+12+(u<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(l<<2)>>2]|0),t=u<<1,s=n+655376+(t<<3)|0,p[s>>3]=+p[s>>3]+ +(e[n+1310736+(l+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(l+2<<2)>>2]|0),u=u<<2,t=n+131084+(u<<2)|0,s=e[n+1310736+(l+3<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),t=n+131084+((u|1)<<2)|0,s=e[n+1310736+(l+4<<2)>>2]|0,(e[t>>2]|0)<(s|0)&&(e[t>>2]=s),t=n+131084+((u|2)<<2)|0,s=e[n+1310736+(l+5<<2)>>2]|0,(e[t>>2]|0)>(s|0)&&(e[t>>2]=s),s=n+131084+((u|3)<<2)|0,t=e[n+1310736+(l+6<<2)>>2]|0,(e[s>>2]|0)<(t|0)&&(e[s>>2]=t),r=r+1|0;while((r|0)<(f|0))}if((e[d>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[d>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function Qd(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,d=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(Ae<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,Y=0-a|0,le=1-a|0,ee=~a;e:do if((ce|0)>1){q=(Ae|0)>1,f=(e[n+4>>2]|0)+t|0,se=1,r=r+t|0,d=d+(t<<1)|0,u=0;t:for(;;){if(q)for(t=f,H=1,B=r,M=u;;){do if((me[B>>0]|0|0)>(s|0)){if(U[t>>0]=-1,u=w[d+(Y<<1)>>1]|0,u<<16>>16>0){w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(f=w[d+(le<<1)>>1]|0,A=f<<16>>16,u=w[d+(ee<<1)>>1]|0,E=u<<16>>16,r=u<<16>>16>0,f<<16>>16<=0){if(r){w[d>>1]=u,u=E*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-3<<2)|0,(e[r>>2]|0)<(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=w[d+-2>>1]|0,u<<16>>16>0){if(w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(H|0)){u=M;break}e[u>>2]=H,u=M;break}else{if(u=M+1|0,(M|0)>32767)break t;w[d>>1]=u,e[n+1179664+(M<<2)>>2]=u<<16>>16,M=M*7|0,e[n+1310736+(M<<2)>>2]=1,e[n+1310736+(M+1<<2)>>2]=H,e[n+1310736+(M+2<<2)>>2]=se,e[n+1310736+(M+3<<2)>>2]=H,e[n+1310736+(M+4<<2)>>2]=H,e[n+1310736+(M+5<<2)>>2]=se,e[n+1310736+(M+6<<2)>>2]=se;break}}if(r){if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+(E+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(r=w[d+-2>>1]|0,r<<16>>16<=0){w[d>>1]=f,u=A*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-4<<2)|0,(e[r>>2]|0)>(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+se,u=M}else w[d>>1]=0,U[t>>0]=0,u=M;while(!1);if(H=H+1|0,r=B+1|0,d=d+2|0,t=t+1|0,(H|0)>=(Ae|0))break;B=r,M=u}else t=f;if(se=se+1|0,(se|0)>=(ce|0)){A=u,X=52;break e}else f=t+2|0,r=r+2|0,d=d+4|0}Ot(3,3904,$),t=-1}else A=0,X=52;while(!1);if((X|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function sd(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,d=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(Ae<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,Y=0-a|0,le=1-a|0,ee=~a;e:do if((ce|0)>1){q=(Ae|0)>1,f=(e[n+4>>2]|0)+t|0,se=1,r=r+(t<<1)|0,d=d+(t<<1)|0,u=0;t:for(;;){if(q)for(t=f,H=1,B=r,M=u;;){do if((me[B+1>>0]|0|0)>(s|0)){if(U[t>>0]=-1,u=w[d+(Y<<1)>>1]|0,u<<16>>16>0){w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(f=w[d+(le<<1)>>1]|0,A=f<<16>>16,u=w[d+(ee<<1)>>1]|0,E=u<<16>>16,r=u<<16>>16>0,f<<16>>16<=0){if(r){w[d>>1]=u,u=E*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-3<<2)|0,(e[r>>2]|0)<(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=w[d+-2>>1]|0,u<<16>>16>0){if(w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(H|0)){u=M;break}e[u>>2]=H,u=M;break}else{if(u=M+1|0,(M|0)>32767)break t;w[d>>1]=u,e[n+1179664+(M<<2)>>2]=u<<16>>16,M=M*7|0,e[n+1310736+(M<<2)>>2]=1,e[n+1310736+(M+1<<2)>>2]=H,e[n+1310736+(M+2<<2)>>2]=se,e[n+1310736+(M+3<<2)>>2]=H,e[n+1310736+(M+4<<2)>>2]=H,e[n+1310736+(M+5<<2)>>2]=se,e[n+1310736+(M+6<<2)>>2]=se;break}}if(r){if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+(E+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(r=w[d+-2>>1]|0,r<<16>>16<=0){w[d>>1]=f,u=A*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-4<<2)|0,(e[r>>2]|0)>(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+se,u=M}else w[d>>1]=0,U[t>>0]=0,u=M;while(!1);if(H=H+1|0,r=B+2|0,d=d+2|0,t=t+1|0,(H|0)>=(Ae|0))break;B=r,M=u}else t=f;if(se=se+1|0,(se|0)>=(ce|0)){A=u,X=52;break e}else f=t+2|0,r=r+4|0,d=d+4|0}Ot(3,3904,$),t=-1}else A=0,X=52;while(!1);if((X|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function od(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,d=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(Ae<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,t=a+1|0,Y=0-a|0,le=1-a|0,ee=~a;e:do if((ce|0)>1){q=(Ae|0)>1,f=(e[n+4>>2]|0)+t|0,se=1,r=r+(t<<1)|0,d=d+(t<<1)|0,u=0;t:for(;;){if(q)for(t=f,H=1,B=r,M=u;;){do if((me[B>>0]|0|0)>(s|0)){if(U[t>>0]=-1,u=w[d+(Y<<1)>>1]|0,u<<16>>16>0){w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(f=w[d+(le<<1)>>1]|0,A=f<<16>>16,u=w[d+(ee<<1)>>1]|0,E=u<<16>>16,r=u<<16>>16>0,f<<16>>16<=0){if(r){w[d>>1]=u,u=E*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-3<<2)|0,(e[r>>2]|0)<(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=w[d+-2>>1]|0,u<<16>>16>0){if(w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(H|0)){u=M;break}e[u>>2]=H,u=M;break}else{if(u=M+1|0,(M|0)>32767)break t;w[d>>1]=u,e[n+1179664+(M<<2)>>2]=u<<16>>16,M=M*7|0,e[n+1310736+(M<<2)>>2]=1,e[n+1310736+(M+1<<2)>>2]=H,e[n+1310736+(M+2<<2)>>2]=se,e[n+1310736+(M+3<<2)>>2]=H,e[n+1310736+(M+4<<2)>>2]=H,e[n+1310736+(M+5<<2)>>2]=se,e[n+1310736+(M+6<<2)>>2]=se;break}}if(r){if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+(E+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(r=w[d+-2>>1]|0,r<<16>>16<=0){w[d>>1]=f,u=A*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-4<<2)|0,(e[r>>2]|0)>(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+se,u=M}else w[d>>1]=0,U[t>>0]=0,u=M;while(!1);if(H=H+1|0,r=B+2|0,d=d+2|0,t=t+1|0,(H|0)>=(Ae|0))break;B=r,M=u}else t=f;if(se=se+1|0,(se|0)>=(ce|0)){A=u,X=52;break e}else f=t+2|0,r=r+4|0,d=d+4|0}Ot(3,3904,$),t=-1}else A=0,X=52;while(!1);if((X|0)==52){if(d=n+12|0,(A|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(A|0);)r=r+1|0,l=l+4|0;if(f=n+8|0,t=u+-1|0,e[f>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[f>>2]|0))}if((A|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(A|0))}if((e[f>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[f>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function ad(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0;if(Be=S,S=S+16|0,$=Be,d=e[n>>2]|0,ce=c+-1|0,(a|0)>0)for(t=0,u=d,l=d+((je(ce,a)|0)<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(a|0));)u=u+2|0,l=l+2|0;if(Ae=a+-1|0,(c|0)>0)for(t=0,u=d,l=d+(Ae<<1)|0;w[l>>1]=0,w[u>>1]=0,t=t+1|0,!((t|0)>=(c|0));)u=u+(a<<1)|0,l=l+(a<<1)|0;l=n+1179664|0,u=a+1|0,Y=0-a|0,le=1-a|0,ee=~a;e:do if((ce|0)>1){q=(Ae|0)>1,t=(e[n+4>>2]|0)+u|0,se=1,r=r+u|0,d=d+(u<<1)|0,s=s+u|0,u=0;t:for(;;){if(q)for(H=1,B=r,M=u;;){do if((me[B>>0]|0)>(me[s>>0]|0)){if(U[t>>0]=-1,u=w[d+(Y<<1)>>1]|0,u<<16>>16>0){w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(f=w[d+(le<<1)>>1]|0,A=f<<16>>16,u=w[d+(ee<<1)>>1]|0,E=u<<16>>16,r=u<<16>>16>0,f<<16>>16<=0){if(r){w[d>>1]=u,u=E*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-3<<2)|0,(e[r>>2]|0)<(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=w[d+-2>>1]|0,u<<16>>16>0){if(w[d>>1]=u,u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,u=n+1310736+(u+-3<<2)|0,(e[u>>2]|0)>=(H|0)){u=M;break}e[u>>2]=H,u=M;break}else{if(u=M+1|0,(M|0)>32767)break t;w[d>>1]=u,e[n+1179664+(M<<2)>>2]=u<<16>>16,M=M*7|0,e[n+1310736+(M<<2)>>2]=1,e[n+1310736+(M+1<<2)>>2]=H,e[n+1310736+(M+2<<2)>>2]=se,e[n+1310736+(M+3<<2)>>2]=H,e[n+1310736+(M+4<<2)>>2]=H,e[n+1310736+(M+5<<2)>>2]=se,e[n+1310736+(M+6<<2)>>2]=se;break}}if(r){if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+(E+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,E=n+1310736+(u+-5<<2)|0,e[E>>2]=(e[E>>2]|0)+se,e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(r=w[d+-2>>1]|0,r<<16>>16<=0){w[d>>1]=f,u=A*7|0,r=n+1310736+(u+-7<<2)|0,e[r>>2]=(e[r>>2]|0)+1,r=n+1310736+(u+-6<<2)|0,e[r>>2]=(e[r>>2]|0)+H,r=n+1310736+(u+-5<<2)|0,e[r>>2]=(e[r>>2]|0)+se,r=n+1310736+(u+-4<<2)|0,(e[r>>2]|0)>(H|0)&&(e[r>>2]=H),e[n+1310736+(u+-1<<2)>>2]=se,u=M;break}if(u=e[n+1179664+(A+-1<<2)>>2]|0,A=e[n+1179664+((r<<16>>16)+-1<<2)>>2]|0,(u|0)>(A|0))if(w[d>>1]=A,(M|0)>0)for(r=0,f=l;;)if((e[f>>2]|0)==(u|0)&&(e[f>>2]=A),r=r+1|0,(r|0)>=(M|0)){u=A;break}else f=f+4|0;else u=A;else if(w[d>>1]=u,(u|0)<(A|0)&(M|0)>0)for(r=0,f=l;(e[f>>2]|0)==(A|0)&&(e[f>>2]=u),r=r+1|0,!((r|0)>=(M|0));)f=f+4|0;u=(u<<16>>16)*7|0,E=n+1310736+(u+-7<<2)|0,e[E>>2]=(e[E>>2]|0)+1,E=n+1310736+(u+-6<<2)|0,e[E>>2]=(e[E>>2]|0)+H,u=n+1310736+(u+-5<<2)|0,e[u>>2]=(e[u>>2]|0)+se,u=M}else w[d>>1]=0,U[t>>0]=0,u=M;while(!1);if(H=H+1|0,r=B+1|0,s=s+1|0,d=d+2|0,t=t+1|0,(H|0)>=(Ae|0))break;B=r,M=u}if(se=se+1|0,(se|0)>=(ce|0)){f=u,X=52;break e}else t=t+2|0,r=r+2|0,d=d+4|0,s=s+2|0}Ot(3,3904,$),t=-1}else f=0,X=52;while(!1);if((X|0)==52){if(d=n+12|0,(f|0)<1)u=1;else for(r=1,u=1;t=e[l>>2]|0,(t|0)==(r|0)?(t=u,u=u+1|0):t=e[n+1179664+(t+-1<<2)>>2]|0,e[l>>2]=t,(r|0)<(f|0);)r=r+1|0,l=l+4|0;if(s=n+8|0,t=u+-1|0,e[s>>2]=t,t){if(Ht(d|0,0,t<<2|0)|0,Ht(n+655376|0,0,t<<4|0)|0,(u|0)>1){t=0;do X=t<<2,e[n+131084+(X<<2)>>2]=a,e[n+131084+((X|1)<<2)>>2]=0,e[n+131084+((X|2)<<2)>>2]=c,e[n+131084+((X|3)<<2)>>2]=0,t=t+1|0;while((t|0)<(e[s>>2]|0))}if((f|0)>0){d=0;do l=(e[n+1179664+(d<<2)>>2]|0)+-1|0,r=d*7|0,t=n+12+(l<<2)|0,e[t>>2]=(e[t>>2]|0)+(e[n+1310736+(r<<2)>>2]|0),t=l<<1,u=n+655376+(t<<3)|0,p[u>>3]=+p[u>>3]+ +(e[n+1310736+(r+1<<2)>>2]|0),t=n+655376+((t|1)<<3)|0,p[t>>3]=+p[t>>3]+ +(e[n+1310736+(r+2<<2)>>2]|0),l=l<<2,t=n+131084+(l<<2)|0,u=e[n+1310736+(r+3<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),t=n+131084+((l|1)<<2)|0,u=e[n+1310736+(r+4<<2)>>2]|0,(e[t>>2]|0)<(u|0)&&(e[t>>2]=u),t=n+131084+((l|2)<<2)|0,u=e[n+1310736+(r+5<<2)>>2]|0,(e[t>>2]|0)>(u|0)&&(e[t>>2]=u),u=n+131084+((l|3)<<2)|0,t=e[n+1310736+(r+6<<2)>>2]|0,(e[u>>2]|0)<(t|0)&&(e[u>>2]=t),d=d+1|0;while((d|0)<(f|0))}if((e[s>>2]|0)>0){t=0;do a=n+12+(t<<2)|0,c=t<<1,X=n+655376+(c<<3)|0,p[X>>3]=+p[X>>3]/+(e[a>>2]|0),c=n+655376+((c|1)<<3)|0,p[c>>3]=+p[c>>3]/+(e[a>>2]|0),t=t+1|0;while((t|0)<(e[s>>2]|0));t=0}else t=0}else t=0}return S=Be,t|0}function Vd(r){return r=r|0,gf(r+8|0)|0}function gf(r){r=r|0;var a=0,c=0;return c=S,S=S+16|0,a=Ai(4)|0,a||(Ot(3,5472,c),Fe(1)),r=vo(r)|0,e[a>>2]=r,r||(Xi(a),a=0),S=c,a|0}function Hu(r){r=r|0;var a=0;return a=e[r>>2]|0,a?(ta(a)|0,Xi(e[r>>2]|0),e[r>>2]=0,a=0):a=-1,a|0}function ld(r){r=r|0;var a=0,c=0,s=0;if(c=S,S=S+16|0,a=Ai(7062432)|0,a||(Ot(3,5472,c),Fe(1)),e[a>>2]=0,e[a+4834148>>2]=0,e[a+7062408>>2]=0,e[a+4>>2]=-1,e[a+8>>2]=0,e[a+12>>2]=1,e[a+16>>2]=100,e[a+20>>2]=0,e[a+24>>2]=0,e[a+28>>2]=2,p[a+7062416>>3]=.5,e[a+7062424>>2]=3,e[a+32>>2]=r,s=e[r>>2]|0,e[a+36>>2]=s,r=e[r+4>>2]|0,e[a+40>>2]=r,e[a+44>>2]=0,e[a+15408>>2]=0,e[a+4834152>>2]=0,e[a+4818296>>2]=0,r=Ai(je(s<<1,r)|0)|0,e[a+4834144>>2]=r,!r)Ot(3,5472,c+8|0),Fe(1);else return e[a+7062384>>2]=0,H0(a,2)|0,qr(a,0)|0,e[a+7062388>>2]=-1,Lo(a,0)|0,e[a+7062392>>2]=7,e[a+7062396>>2]=0,S=c,a|0;return 0}function H0(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;t=S,S=S+16|0,c=t;e:do if(r)if(s=r+4|0,(e[s>>2]|0)!=(a|0)){switch(a|0){case 11:case 10:case 9:case 8:case 7:case 6:case 4:case 3:case 2:case 1:case 0:{n=0;break}case 14:case 13:case 12:case 5:{n=1;break}default:{e[c>>2]=a,Ot(3,3936,c),c=-1;break e}}if(e[s>>2]=a,e[r+8>>2]=N0(a)|0,c=r+7062408|0,a=e[c>>2]|0,a&&(Un(a),e[c>>2]=sa(e[r+36>>2]|0,e[r+40>>2]|0,e[s>>2]|0,0)|0),c=r+24|0,a=e[c>>2]|0,n)switch(a|0){case 0:{e[c>>2]=1,c=0;break e}case 3:{e[c>>2]=4,c=0;break e}default:{c=0;break e}}else switch(a|0){case 1:{e[c>>2]=4,c=0;break e}case 4:{e[c>>2]=3,c=0;break e}default:{c=0;break e}}}else c=0;else c=-1;while(!1);return S=t,c|0}function qr(r,a){r=r|0,a=a|0;var c=0,s=0,n=0;n=S,S=S+16|0,s=n;do if(r)if((e[r>>2]|0)!=(a|0)){if(e[r>>2]=a,!a){c=r+4834148|0,Xi(e[c>>2]|0),e[c>>2]=0,c=0;break}a=Ai(je(e[r+40>>2]|0,e[r+36>>2]|0)|0)|0,e[r+4834148>>2]=a,a?c=0:(Ot(3,5472,s),Fe(1))}else c=0;else c=-1;while(!1);return S=n,c|0}function Lo(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0;if(l=S,S=S+16|0,u=l+8|0,n=l,r)if(t=r+7062388|0,(e[t>>2]|0)!=(a|0)){switch(c=r+7062408|0,s=e[c>>2]|0,s&&(Un(s),e[c>>2]=0),a|0){case 3:case 2:case 1:{e[c>>2]=sa(e[r+36>>2]|0,e[r+40>>2]|0,e[r+4>>2]|0,0)|0;break}case 4:{e[r+7062404>>2]=1,e[r+7062400>>2]=1,a=4;break}case 0:{a=0;break}default:Ot(3,3985,n),a=0}e[t>>2]=a,(e[r>>2]|0)==1&&(e[u>>2]=e[760+(a<<2)>>2],Ot(3,4059,u)),a=0}else a=0;else a=-1;return S=l,a|0}function Eo(r){r=r|0;var a=0,c=0;return r?(a=r+7062408|0,c=e[a>>2]|0,c&&(Un(c),e[a>>2]=0),Xi(e[r+4834144>>2]|0),Xi(e[r+4834148>>2]|0),Xi(r),a=0):a=-1,a|0}function jo(r,a){return r=r|0,a=a|0,(r|0)!=0&(a|0)!=0?(e[a>>2]=e[r>>2],r=0):r=-1,r|0}function G0(r,a){return r=r|0,a=a|0,(r|0)!=0&a>>>0<2?(e[r+12>>2]=a,r=0):r=-1,r|0}function N1(r,a){return r=r|0,a=a|0,(r|0)!=0&(a|0)!=0?(e[a>>2]=e[r+12>>2],r=0):r=-1,r|0}function Do(r,a){return r=r|0,a=a|0,(r|0)==0|a>>>0>255?r=-1:(e[r+16>>2]=a,r=0),r|0}function Lc(r,a){return r=r|0,a=a|0,(r|0)!=0&(a|0)!=0?(e[a>>2]=e[r+16>>2],r=0):r=-1,r|0}function p1(r,a){return r=r|0,a=a|0,(r|0)!=0&(a|0)!=0?(e[a>>2]=e[r+7062388>>2],r=0):r=-1,r|0}function Gu(r,a){return r=r|0,a=a|0,(r|0)!=0&a>>>0<2?(e[r+20>>2]=a,r=0):r=-1,r|0}function cd(r,a){return r=r|0,a=a|0,r?(e[a>>2]=e[r+20>>2],r=0):r=-1,r|0}function Ul(r,a){return r=r|0,a=a|0,(r|0)!=0&a>>>0<5?(e[r+24>>2]=a,r=0):r=-1,r|0}function B0(r,a){return r=r|0,a=a|0,r?(e[r+7062424>>2]=a,r=0):r=-1,r|0}function ud(r,a){return r=r|0,a=a|0,(r|0)!=0&(a|0)!=0?(e[a>>2]=e[r+7062424>>2],r=0):r=-1,r|0}function U1(r,a){return r=r|0,a=a|0,r?(e[a>>2]=e[r+24>>2],r=0):r=-1,r|0}function vl(r,a){return r=r|0,a=+a,r|0&&!(a<=0|a>=1)?(p[r+7062416>>3]=a,r=0):r=-1,r|0}function Qu(r,a){return r=r|0,a=a|0,r?(p[a>>3]=+p[r+7062416>>3],r=0):r=-1,r|0}function hd(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0,ut=0,Kt=0,mt=0,gn=0,Ki=0,hr=0;gn=S,S=S+80|0,oi=gn+32|0,Nt=gn+24|0,ce=gn,Ae=gn+52|0,gt=gn+40|0,yi=gn+64|0,mt=r+44|0,e[mt>>2]=0,qt=r+7062388|0,s=e[qt>>2]|0;e:do if((s|0)==4){gi=r+7062396|0,c=e[gi>>2]|0;do if((c|0)>0)s=4,c=c+-1|0;else{Be=r+16|0,It=e[Be>>2]|0,xt=r+7062400|0,$=(e[xt>>2]|0)+It|0,$=($|0)>255?255:$,e[Ae>>2]=$,Et=r+7062404|0,X=It-(e[Et>>2]|0)|0,X=(X|0)<0?0:X,e[Ae+4>>2]=X,e[Ae+8>>2]=It,c=r+36|0,s=r+40|0,n=r+4|0,u=r+12|0,l=r+20|0,d=r+4834144|0,E=r+15416|0,M=r+15408|0,B=r+7062384|0,H=r+24|0,le=r+32|0,ee=r+7062416|0,Y=r+48|0,q=r+7062424|0,se=0;do{if((rl(a,e[c>>2]|0,e[s>>2]|0,e[n>>2]|0,e[r>>2]|0,e[u>>2]|0,e[Ae+(se<<2)>>2]|0,e[l>>2]|0,d,0)|0)<0){c=-1;break e}(Dc(e[c>>2]|0,e[s>>2]|0,d,e[l>>2]|0,1e6,70,1,E,M)|0)<0,(Vu(a,e[c>>2]|0,e[s>>2]|0,e[n>>2]|0,E,e[M>>2]|0,e[B>>2]|0,e[l>>2]|0,e[H>>2]|0,(e[le>>2]|0)+184|0,+p[ee>>3],Y,mt,e[q>>2]|0)|0)<0,e[gt+(se<<2)>>2]=e[mt>>2],se=se+1|0}while((se|0)<3);if((e[r>>2]|0)==1?(ut=e[gt+4>>2]|0,n=e[gt+8>>2]|0,s=e[gt>>2]|0,e[ce>>2]=X,e[ce+4>>2]=ut,e[ce+8>>2]=It,e[ce+12>>2]=n,e[ce+16>>2]=$,e[ce+20>>2]=s,Ot(3,4153,ce)):(s=e[gt>>2]|0,n=e[gt+8>>2]|0),c=e[gt+4>>2]|0,(s|0)>(n|0)|(c|0)>(n|0)){s=(s|0)>=(c|0)?$:X,e[Be>>2]=s,c=s-It|0,(c|0)>0?(e[xt>>2]=c,c=1):(e[xt>>2]=1,c=0-c|0),e[Et>>2]=c,(e[r>>2]|0)==1&&(e[Nt>>2]=s,Ot(3,4229,Nt)),s=e[qt>>2]|0,c=e[r+7062392>>2]|0;break}c=e[xt>>2]|0,s=e[Et>>2]|0;do if((c|0)>=(s|0))if((c|0)>(s|0)){e[Et>>2]=s+1;break}else{c=c+1|0,e[xt>>2]=c,e[Et>>2]=s+1;break}else c=c+1|0,e[xt>>2]=c;while(!1);(c+It|0)>254&&(e[xt>>2]=1,c=1),(It|0)<=(c|0)&&(e[Et>>2]=1),e[gi>>2]=e[r+7062392>>2],ut=47;break e}while(!1);e[gi>>2]=c,ut=30}else ut=30;while(!1);e:do if((ut|0)==30){t:do switch(s|0){case 3:{if(s=r+7062408|0,c=Wu(e[s>>2]|0,a,9,-7)|0,(c|0)<0||(c=e[s>>2]|0,s=r+4834144|0,c=rl(e[c>>2]|0,e[c+8>>2]|0,e[c+12>>2]|0,5,e[r>>2]|0,e[r+12>>2]|0,0,0,s,e[c+4>>2]|0)|0,(c|0)<0))break e;c=r+36|0,n=r+40|0,u=r+20|0;break}case 2:case 1:{if(n=r+7062396|0,c=e[n>>2]|0,(c|0)>0){e[n>>2]=c+-1,ut=44;break t}if(c=e[r+7062408>>2]|0,(s|0)==1?c=yl(c,a,yi)|0:c=dd(c,a,yi)|0,(c|0)<0)break e;c=r+16|0,(e[r>>2]|0)==1&&(ui=me[yi>>0]|0,(e[c>>2]|0)!=(ui|0))&&(e[oi>>2]=(e[qt>>2]|0)==1?4281:4288,e[oi+4>>2]=ui,Ot(3,4293,oi)),e[c>>2]=me[yi>>0],e[n>>2]=e[r+7062392>>2],ut=44;break}default:ut=44}while(!1);if((ut|0)==44&&(c=r+36|0,n=r+40|0,u=r+20|0,s=r+4834144|0,(rl(a,e[c>>2]|0,e[n>>2]|0,e[r+4>>2]|0,e[r>>2]|0,e[r+12>>2]|0,e[r+16>>2]|0,e[u>>2]|0,s,0)|0)<0)){c=-1;break}l=r+15416|0,d=r+15408|0,(Dc(e[c>>2]|0,e[n>>2]|0,s,e[u>>2]|0,1e6,70,1,l,d)|0)>=0&&(Vu(a,e[c>>2]|0,e[n>>2]|0,e[r+4>>2]|0,l,e[d>>2]|0,e[r+7062384>>2]|0,e[u>>2]|0,e[r+24>>2]|0,(e[r+32>>2]|0)+184|0,+p[r+7062416>>3],r+48|0,mt,e[r+7062424>>2]|0)|0)>=0&&(ut=47)}while(!1);e:do if((ut|0)==47){if(le=r+28|0,(e[le>>2]|0)==1){El(r),c=0;break}if(ee=r+4818296|0,B=r+24|0,M=e[ee>>2]|0,(M|0)>0){H=0;do{if(s=e[mt>>2]|0,n=r+4818304+(H*264|0)+56|0,u=r+4818304+(H*264|0)+64|0,(s|0)>0)for(A=+(e[r+4818304+(H*264|0)>>2]|0),c=-1,l=0,f=.5;;)if(t=+(e[r+48+(l<<8)>>2]|0),Ki=A/t,!(Ki<.7|Ki>1.43)&&(Ki=+p[r+48+(l<<8)+56>>3]-+p[n>>3],Kt=+p[r+48+(l<<8)+64>>3]-+p[u>>3],Kt=(Ki*Ki+Kt*Kt)/t,Kt<f)?(c=l,t=Kt):t=f,l=l+1|0,(l|0)>=(s|0)){E=c;break}else f=t;else E=-1;t:do if((E|0)>-1){switch(d=e[B>>2]|0,d|0){case 2:case 1:case 0:break;case 4:case 3:{if(n=r+48+(E<<8)+40|0,t=+p[r+4818304+(H*264|0)+40>>3],+p[n>>3]<t)s=r+4818304+(H*264|0)+48|0,c=r+48+(E<<8)+48|0;else if(c=r+48+(E<<8)+48|0,s=r+4818304+(H*264|0)+48|0,!(+p[c>>3]<+p[s>>3]))break t;for(p[n>>3]=t,e[r+48+(E<<8)+8>>2]=e[r+4818304+(H*264|0)+8>>2],p[c>>3]=+p[s>>3],e[r+48+(E<<8)+12>>2]=e[r+4818304+(H*264|0)+12>>2],c=-1,f=1e8,n=0;;){t=0,s=0;do a=(s+n|0)%4|0,A=+p[r+4818304+(H*264|0)+168+(s<<4)>>3]-+p[r+48+(E<<8)+168+(a<<4)>>3],Ki=+p[r+4818304+(H*264|0)+168+(s<<4)+8>>3]-+p[r+48+(E<<8)+168+(a<<4)+8>>3],t=t+(A*A+Ki*Ki),s=s+1|0;while((s|0)!=4);if(s=t<f,c=s?n:c,n=n+1|0,(n|0)==4)break;f=s?t:f}a=4-c|0,e[r+48+(E<<8)+20>>2]=(a+(e[r+4818304+(H*264|0)+20>>2]|0)|0)%4|0,e[r+48+(E<<8)+24>>2]=(a+(e[r+4818304+(H*264|0)+24>>2]|0)|0)%4|0;break t}default:{c=-1;break e}}if(c=r+48+(E<<8)+32|0,A=+p[r+4818304+(H*264|0)+32>>3],+p[c>>3]<A){for(p[c>>3]=A,l=e[r+4818304+(H*264|0)+4>>2]|0,e[r+48+(E<<8)+4>>2]=l,n=r+4818304+(H*264|0)+16|0,c=-1,f=1e8,u=0;;){t=0,s=0;do a=(s+u|0)%4|0,hr=+p[r+4818304+(H*264|0)+168+(s<<4)>>3]-+p[r+48+(E<<8)+168+(a<<4)>>3],Ki=+p[r+4818304+(H*264|0)+168+(s<<4)+8>>3]-+p[r+48+(E<<8)+168+(a<<4)+8>>3],t=t+(hr*hr+Ki*Ki),s=s+1|0;while((s|0)!=4);if(t<f?c=(4-u+(e[n>>2]|0)|0)%4|0:t=f,u=u+1|0,(u|0)==4)break;f=t}if(e[r+48+(E<<8)+16>>2]=c,d>>>0<2){e[r+48+(E<<8)+8>>2]=l,p[r+48+(E<<8)+40>>3]=A,e[r+48+(E<<8)+20>>2]=c;break}else{e[r+48+(E<<8)+12>>2]=l,p[r+48+(E<<8)+48>>3]=A,e[r+48+(E<<8)+24>>2]=c;break}}}while(!1);H=H+1|0}while((H|0)<(M|0))}if(El(r),(e[ee>>2]|0)>0){n=0,c=0;do s=r+4818304+(n*264|0)|0,ut=r+4818304+(n*264|0)+256|0,a=(e[ut>>2]|0)+1|0,e[ut>>2]=a,(a|0)<4&&((n|0)!=(c|0)&&Cs(r+4818304+(c*264|0)|0,s|0,264)|0,c=c+1|0),n=n+1|0;while((n|0)<(e[ee>>2]|0))}else c=0;e[ee>>2]=c,c=e[mt>>2]|0;t:do if((c|0)>0){d=0;do{if(u=r+48+(d<<8)|0,n=e[r+48+(d<<8)+4>>2]|0,(n|0)>=0){l=e[ee>>2]|0;i:do if((l|0)>0){s=0;do{if((e[r+4818304+(s*264|0)+4>>2]|0)==(n|0))break i;s=s+1|0}while((s|0)<(l|0))}else s=0;while(!1);if((s|0)==(l|0)){if((l|0)==60)break t;e[ee>>2]=l+1}Cs(r+4818304+(s*264|0)|0,u|0,256)|0,e[r+4818304+(s*264|0)+256>>2]=1}d=d+1|0,c=e[mt>>2]|0}while((d|0)<(c|0))}while(!1);if((e[le>>2]|0)!=2&&(e[ee>>2]|0)>0)for(l=0;;){n=r+4818304+(l*264|0)+56|0,u=r+4818304+(l*264|0)+64|0;t:do if((c|0)>0){f=+(e[r+4818304+(l*264|0)>>2]|0),s=0;do{if(t=+(e[r+48+(s<<8)>>2]|0),hr=f/t,!(hr<.7|hr>1.43)&&(Ki=+p[r+48+(s<<8)+56>>3]-+p[n>>3],hr=+p[r+48+(s<<8)+64>>3]-+p[u>>3],(Ki*Ki+hr*hr)/t<.5))break t;s=s+1|0}while((s|0)<(c|0))}else s=0;while(!1);if((s|0)==(c|0)&&(Cs(r+48+(c<<8)|0,r+4818304+(l*264|0)|0,256)|0,c=(e[mt>>2]|0)+1|0,e[mt>>2]=c),l=l+1|0,(l|0)>=(e[ee>>2]|0)){c=0;break}}else c=0}while(!1);return S=gn,c|0}function El(r){r=r|0;var a=0,c=0,s=0,n=0;switch(e[r+24>>2]|0){case 1:case 0:{if(c=e[r+44>>2]|0,(c|0)>0){s=0;do a=r+48+(s<<8)+4|0,(e[a>>2]|0)>-1&&+p[r+48+(s<<8)+32>>3]<.5&&(e[r+48+(s<<8)+8>>2]=-1,e[a>>2]=-1,e[r+48+(s<<8)+236>>2]=6),s=s+1|0;while((s|0)<(c|0))}break}case 2:{if(c=e[r+44>>2]|0,(c|0)>0){s=0;do a=r+48+(s<<8)+4|0,(e[a>>2]|0)>-1&&+p[r+48+(s<<8)+32>>3]<.5&&(e[r+48+(s<<8)+12>>2]=-1,e[a>>2]=-1,e[r+48+(s<<8)+236>>2]=6),s=s+1|0;while((s|0)<(c|0))}break}default:if(s=e[r+44>>2]|0,(s|0)>0){n=0;do a=r+48+(n<<8)+8|0,(e[a>>2]|0)>-1&&+p[r+48+(n<<8)+40>>3]<.5?(e[a>>2]=-1,c=0):c=1,a=r+48+(n<<8)+12|0,(e[a>>2]|0)>-1&&+p[r+48+(n<<8)+48>>3]<.5&&(e[a>>2]=-1,(c|0)==0)&&(e[r+48+(n<<8)+236>>2]=6),n=n+1|0;while((n|0)<(s|0))}}}function Dc(r,a,c,s,n,t,u,l,d){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=+u,l=l|0,d=d|0;var f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0,yi=0,oi=0,ut=0;oi=S,S=S+96|0,Nt=oi+56|0,gi=oi+48|0,Et=oi+8|0,qt=oi,yi=(s|0)==1,yi&&(r=(r|0)/2|0,a=(a|0)/2|0,n=(n|0)/4|0,t=(t|0)/4|0),e[d>>2]=0,gt=c+8|0,xt=r+-2|0,$=a+-2|0,X=c+1179664|0;e:do if((e[gt>>2]|0)>0)for(Be=0;;){se=c+12+(Be<<2)|0,ce=e[se>>2]|0;t:do if(!((ce|0)<(t|0)|(ce|0)>(n|0))&&(It=c+131084+(Be<<4)|0,(e[It>>2]|0)!=1)&&(e[c+131084+(Be<<4)+4>>2]|0)!=(xt|0)&&(e[c+131084+(Be<<4)+8>>2]|0)!=1&&(e[c+131084+(Be<<4)+12>>2]|0)!=($|0)&&(Hl(e[c>>2]|0,r,0,X,Be+1|0,It,l+((e[d>>2]|0)*80048|0)|0)|0)>=0){if(ee=e[se>>2]|0,Ae=e[d>>2]|0,Y=l+(Ae*80048|0)+28|0,a=e[Y>>2]|0,q=l+(Ae*80048|0)+40028|0,A=e[q>>2]|0,ce=l+(Ae*80048|0)+24|0,E=(e[ce>>2]|0)+-1|0,(E|0)>1)for(H=0,le=1,s=0;M=(e[l+(Ae*80048|0)+28+(le<<2)>>2]|0)-a|0,M=je(M,M)|0,B=(e[l+(Ae*80048|0)+40028+(le<<2)>>2]|0)-A|0,M=(je(B,B)|0)+M|0,B=(M|0)>(H|0),s=B?le:s,le=le+1|0,!((le|0)>=(E|0));)H=B?M:H;else s=0;f=+(ee|0)/.75*.01*u,e[gi>>2]=0,e[qt>>2]=0;i:do if((Oa(Y,q,0,s,f,Nt,gi)|0)>=0&&(Oa(Y,q,s,(e[ce>>2]|0)+-1|0,f,Et,qt)|0)>=0){a=e[gi>>2]|0,A=e[qt>>2]|0;do if((a|0)==1&(A|0)==1)a=e[Et>>2]|0,A=e[Nt>>2]|0;else{if((a|0)>1&(A|0)==0){if(a=(s|0)/2|0,e[qt>>2]=0,e[gi>>2]=0,(Oa(Y,q,0,a,f,Nt,gi)|0)<0||(Oa(Y,q,a,s,f,Et,qt)|0)<0||!((e[gi>>2]|0)==1&(e[qt>>2]|0)==1))break i;a=s,A=e[Nt>>2]|0,s=e[Et>>2]|0;break}if(!((a|0)==0&(A|0)>1)||(a=(s+-1+(e[ce>>2]|0)|0)/2|0,e[qt>>2]=0,e[gi>>2]=0,(Oa(Y,q,s,a,f,Nt,gi)|0)<0)||(Oa(Y,q,a,(e[ce>>2]|0)+-1|0,f,Et,qt)|0)<0||!((e[gi>>2]|0)==1&(e[qt>>2]|0)==1))break i;a=e[Et>>2]|0,A=s,s=e[Nt>>2]|0}while(!1);if(e[l+(Ae*80048|0)+80028>>2]=0,e[l+(Ae*80048|0)+80032>>2]=A,e[l+(Ae*80048|0)+80036>>2]=s,e[l+(Ae*80048|0)+80040>>2]=a,e[l+(Ae*80048|0)+80044>>2]=(e[ce>>2]|0)+-1,e[l+((e[d>>2]|0)*80048|0)>>2]=e[se>>2],ce=e[d>>2]|0,p[l+(ce*80048|0)+8>>3]=+p[c+655376+(Be<<4)>>3],p[l+(ce*80048|0)+16>>3]=+p[c+655376+(Be<<4)+8>>3],ce=ce+1|0,e[d>>2]=ce,(ce|0)==60){s=60;break e}else break t}while(!1)}while(!1);if(Be=Be+1|0,(Be|0)>=(e[gt>>2]|0)){ui=4;break}}else ui=4;while(!1);if((ui|0)==4&&(s=e[d>>2]|0),(s|0)>0){E=0;do if(r=E,E=E+1|0,t=l+(r*80048|0)+16|0,A=l+(r*80048|0)|0,(E|0)<(s|0)){u=+p[l+(r*80048|0)+8>>3],n=E;do ut=u-+p[l+(n*80048|0)+8>>3],f=+p[t>>3]-+p[l+(n*80048|0)+16>>3],f=ut*ut+f*f,s=e[A>>2]|0,r=l+(n*80048|0)|0,a=e[r>>2]|0,(s|0)>(a|0)?f<+((s|0)/4|0|0)&&(e[r>>2]=0):f<+((a|0)/4|0|0)&&(e[A>>2]=0),n=n+1|0,s=e[d>>2]|0;while((n|0)<(s|0))}while((E|0)<(s|0))}if((s|0)>0){n=0;do{if(!(e[l+(n*80048|0)>>2]|0)){if(r=n+1|0,(r|0)<(s|0))for(s=n,a=r;Cs(l+(s*80048|0)|0,l+(a*80048|0)|0,80048)|0,s=e[d>>2]|0,r=a+1|0,(r|0)<(s|0);)s=a,a=r;s=s+-1|0,e[d>>2]=s}n=n+1|0}while((n|0)<(s|0))}if(yi&(s|0)>0)for(a=0;;){if(e[l>>2]=e[l>>2]<<2,s=l+8|0,p[s>>3]=+p[s>>3]*2,s=l+16|0,p[s>>3]=+p[s>>3]*2,s=l+24|0,(e[s>>2]|0)>0){r=0;do yi=l+28+(r<<2)|0,e[yi>>2]=e[yi>>2]<<1,yi=l+40028+(r<<2)|0,e[yi>>2]=e[yi>>2]<<1,r=r+1|0;while((r|0)<(e[s>>2]|0))}if(a=a+1|0,(a|0)>=(e[d>>2]|0))break;l=l+80048|0}return S=oi,0}function Hl(r,a,c,s,n,t,u){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0;var l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0;se=S,S=S+80032|0,M=se+16|0,E=se+8|0,d=se,Y=se+40024|0,q=se+24|0,ee=e[t+8>>2]|0,c=e[t>>2]|0,t=e[t+4>>2]|0;e:do if((c|0)<=(t|0)){for(l=c,c=r+((je(ee,a)|0)+c<<1)|0;;){if(le=w[c>>1]|0,le<<16>>16>0&&(e[s+((le<<16>>16)+-1<<2)>>2]|0)==(n|0)){A=l;break}if((l|0)<(t|0))l=l+1|0,c=c+2|0;else{Ae=6;break e}}for(B=u+24|0,e[B>>2]=1,H=u+28|0,e[H>>2]=A,le=u+40028|0,e[le>>2]=ee,s=ee,f=A,l=1,c=5;;){for(t=(c+5|0)%8|0,c=0;;){if(n=e[776+(t<<2)>>2]|0,d=e[808+(t<<2)>>2]|0,(w[r+(d+f+(je(n+s|0,a)|0)<<1)>>1]|0)>0){c=n,n=t;break}if(c=c+1|0,t=(t+1|0)%8|0,(c|0)>=8){Ae=11;break}}if((Ae|0)==11){if(Ae=0,(c|0)==8){Ae=13;break}d=e[808+(t<<2)>>2]|0,c=e[776+(t<<2)>>2]|0,n=t}if(e[u+28+(l<<2)>>2]=d+f,t=e[B>>2]|0,e[u+40028+(t<<2)>>2]=c+(e[u+40028+(t+-1<<2)>>2]|0),c=e[B>>2]|0,t=u+28+(c<<2)|0,(e[t>>2]|0)==(A|0)&&(e[u+40028+(c<<2)>>2]|0)==(ee|0)){s=c,Ae=16;break}if(l=c+1|0,e[B>>2]=l,(l|0)==9999){Ae=19;break}s=e[u+40028+(c<<2)>>2]|0,f=e[t>>2]|0,c=n}if((Ae|0)==13){Ot(3,4347,E),c=-1;break}else if((Ae|0)==16){if((s|0)>1)for(d=0,n=1,t=0;c=(e[u+28+(n<<2)>>2]|0)-A|0,c=je(c,c)|0,l=(e[u+40028+(n<<2)>>2]|0)-ee|0,c=(je(l,l)|0)+c|0,l=(c|0)>(d|0),t=l?n:t,n=n+1|0,!((n|0)>=(s|0));)d=l?c:d;else t=0;if((t|0)>0){c=0;do e[Y+(c<<2)>>2]=e[u+28+(c<<2)>>2],e[q+(c<<2)>>2]=e[u+40028+(c<<2)>>2],c=c+1|0;while((c|0)<(t|0))}if((t|0)<(s|0)){c=t;do ee=c-t|0,e[u+28+(ee<<2)>>2]=e[u+28+(c<<2)>>2],e[u+40028+(ee<<2)>>2]=e[u+40028+(c<<2)>>2],c=c+1|0;while((c|0)<(e[B>>2]|0))}if((t|0)>0){c=0;do ee=c-t|0,e[u+28+((e[B>>2]|0)+ee<<2)>>2]=e[Y+(c<<2)>>2],e[u+40028+((e[B>>2]|0)+ee<<2)>>2]=e[q+(c<<2)>>2],c=c+1|0;while((c|0)<(t|0))}e[u+28+(e[B>>2]<<2)>>2]=e[H>>2],e[u+40028+(e[B>>2]<<2)>>2]=e[le>>2],e[B>>2]=(e[B>>2]|0)+1,c=0;break}else if((Ae|0)==19){Ot(3,4354,M),c=-1;break}}else Ae=6;while(!1);return(Ae|0)==6&&(Ot(3,4340,d),c=-1),S=se,c|0}function Oa(r,a,c,s,n,t,u){r=r|0,a=a|0,c=c|0,s=s|0,n=+n,t=t|0,u=u|0;var l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0;if(l=e[a+(s<<2)>>2]|0,le=e[a+(c<<2)>>2]|0,B=+(l-le|0),A=e[r+(c<<2)>>2]|0,ee=e[r+(s<<2)>>2]|0,E=+(A-ee|0),f=+((je(ee,le)|0)-(je(A,l)|0)|0),l=c+1|0,(l|0)<(s|0)){d=0,A=l;do Y=f+(B*+(e[r+(A<<2)>>2]|0)+E*+(e[a+(A<<2)>>2]|0)),Y=Y*Y,ee=Y>d,d=ee?Y:d,l=ee?A:l,A=A+1|0;while((A|0)<(s|0))}else d=0;return d/(B*B+E*E)>n?(Oa(r,a,c,l,n,t,u)|0)>=0&&(M=e[u>>2]|0,(M|0)<=5)&&(e[t+(M<<2)>>2]=l,e[u>>2]=(e[u>>2]|0)+1,(Oa(r,a,l,s,n,t,u)|0)>=0)?H=7:l=-1:H=7,(H|0)==7&&(l=0),l|0}function Pc(r,a,c,s,n,t,u){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0;var l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0;Ae=S,S=S+16|0,le=Ae+4|0,ee=Ae,Y=Ls(2)|0,q=Ls(2)|0,se=Bo(2,2)|0,M=0;e:for(;;){if(B=M,M=M+1|0,H=e[s+(M<<2)>>2]|0,l=e[s+(B<<2)>>2]|0,E=+(H+1-l|0)*.05+.5,l=~~(+(l|0)+E),H=~~(+(H|0)-E)-l|0,f=H+1|0,c=Bo(f,2)|0,(H|0)>-1){H=0;do{if(ce=H+l|0,(oo(n,+(e[r+(ce<<2)>>2]|0),+(e[a+(ce<<2)>>2]|0),le,ee)|0)<0){l=10;break e}ce=H<<1,$=e[c>>2]|0,p[$+(ce<<3)>>3]=+P[le>>2],p[$+((ce|1)<<3)>>3]=+P[ee>>2],H=H+1|0}while((H|0)<(f|0))}if((Bs(c,se,Y,q)|0)<0){l=10;break}if($=e[se>>2]|0,A=+p[$+8>>3],p[t+(B*24|0)>>3]=A,E=-+p[$>>3],p[t+(B*24|0)+8>>3]=E,$=e[q>>2]|0,p[t+(B*24|0)+16>>3]=-(A*+p[$>>3]+ +p[$+8>>3]*E),vn(c)|0,(M|0)>=4){l=7;break}}e:do if((l|0)==7)for(vn(se)|0,c0(q)|0,c0(Y)|0,M=0;;){if(c=(M+3|0)%4|0,l=t+(c*24|0)|0,d=+p[t+(M*24|0)+8>>3],f=t+(M*24|0)|0,A=+p[t+(c*24|0)+8>>3],E=+p[l>>3]*d-+p[f>>3]*A,+Yt(+E)<1e-4){c=-1;break e}if($=t+(M*24|0)+16|0,ce=t+(c*24|0)+16|0,p[u+(M<<4)>>3]=(A*+p[$>>3]-d*+p[ce>>3])/E,p[u+(M<<4)+8>>3]=(+p[f>>3]*+p[ce>>3]-+p[l>>3]*+p[$>>3])/E,M=M+1|0,(M|0)>=4){c=0;break}}else(l|0)==10&&(vn(c)|0,vn(se)|0,c0(q)|0,c0(Y)|0,c=-1);while(!1);return S=Ae,c|0}function Vu(r,a,c,s,n,t,u,l,d,f,A,E,M,B){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0,l=l|0,d=d|0,f=f|0,A=+A,E=E|0,M=M|0,B=B|0;var H=0,le=0,ee=0,Y=0,q=0,se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0;if(It=S,S=S+16|0,gt=It+4|0,xt=It,ce=d>>>0<2,$=(d|0)==2,(t|0)>0){Be=0,H=0;do{if(e[E+(H<<8)>>2]=e[n+(Be*80048|0)>>2],(oo(f,+p[n+(Be*80048|0)+8>>3],+p[n+(Be*80048|0)+16>>3],gt,xt)|0)>=0&&(p[E+(H<<8)+56>>3]=+P[gt>>2],p[E+(H<<8)+64>>3]=+P[xt>>2],X=E+(H<<8)+168|0,(Pc(n+(Be*80048|0)+28|0,n+(Be*80048|0)+40028|0,e[n+(Be*80048|0)+24>>2]|0,n+(Be*80048|0)+80028|0,f,E+(H<<8)+72|0,X)|0)>=0)){switch(le=E+(H<<8)+8|0,ee=E+(H<<8)+20|0,Y=E+(H<<8)+40|0,q=E+(H<<8)+12|0,se=E+(H<<8)+24|0,Ae=E+(H<<8)+48|0,G1(u,l,d,r,a,c,s,f,X,A,le,ee,Y,q,se,Ae,B,E+(H<<8)+240|0,E+(H<<8)+248|0)|0){case 0:{e[E+(H<<8)+236>>2]=0;break}case-1:{e[E+(H<<8)+236>>2]=2;break}case-2:{e[E+(H<<8)+236>>2]=3;break}case-3:{e[E+(H<<8)+236>>2]=4;break}case-4:{e[E+(H<<8)+236>>2]=5;break}case-5:{e[E+(H<<8)+236>>2]=9;break}case-6:{e[E+(H<<8)+236>>2]=1;break}default:}ce?(e[E+(H<<8)+4>>2]=e[le>>2],e[E+(H<<8)+16>>2]=e[ee>>2],p[E+(H<<8)+32>>3]=+p[Y>>3]):$&&(e[E+(H<<8)+4>>2]=e[q>>2],e[E+(H<<8)+16>>2]=e[se>>2],p[E+(H<<8)+32>>3]=+p[Ae>>3]),H=H+1|0}Be=Be+1|0}while((Be|0)<(t|0))}else H=0;return e[M>>2]=H,S=It,0}function Oc(r,a,c,s){r=r|0,a=a|0,c=+c,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0;return l=S,S=S+288|0,f=l+200|0,d=l+104|0,n=l+264|0,u=l+8|0,t=l,E=e[a+16>>2]|0,M=(4-E|0)%4|0,p[f>>3]=+p[a+168+(M<<4)>>3],p[f+8>>3]=+p[a+168+(M<<4)+8>>3],M=(5-E|0)%4|0,p[f+16>>3]=+p[a+168+(M<<4)>>3],p[f+24>>3]=+p[a+168+(M<<4)+8>>3],M=(6-E|0)%4|0,p[f+32>>3]=+p[a+168+(M<<4)>>3],p[f+40>>3]=+p[a+168+(M<<4)+8>>3],E=(7-E|0)%4|0,p[f+48>>3]=+p[a+168+(E<<4)>>3],p[f+56>>3]=+p[a+168+(E<<4)+8>>3],A=c*-.5,p[d>>3]=A,c=c*.5,p[d+8>>3]=c,p[d+16>>3]=0,p[d+24>>3]=c,p[d+32>>3]=c,p[d+40>>3]=0,p[d+48>>3]=c,p[d+56>>3]=A,p[d+64>>3]=0,p[d+72>>3]=A,p[d+80>>3]=A,p[d+88>>3]=0,e[n>>2]=f,e[n+4>>2]=d,e[n+8>>2]=4,(yh(e[r>>2]|0,f,d,4,u)|0)<0?c=1e8:(M=(il(e[r>>2]|0,n,u,s,t)|0)<0,c=M?1e8:+p[t>>3]),S=l,+c}function zu(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=+s,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0;return u=S,S=S+192|0,f=u+104|0,d=u+8|0,l=u+168|0,t=u,E=e[a+16>>2]|0,M=(4-E|0)%4|0,p[f>>3]=+p[a+168+(M<<4)>>3],p[f+8>>3]=+p[a+168+(M<<4)+8>>3],M=(5-E|0)%4|0,p[f+16>>3]=+p[a+168+(M<<4)>>3],p[f+24>>3]=+p[a+168+(M<<4)+8>>3],M=(6-E|0)%4|0,p[f+32>>3]=+p[a+168+(M<<4)>>3],p[f+40>>3]=+p[a+168+(M<<4)+8>>3],E=(7-E|0)%4|0,p[f+48>>3]=+p[a+168+(E<<4)>>3],p[f+56>>3]=+p[a+168+(E<<4)+8>>3],A=s*-.5,p[d>>3]=A,s=s*.5,p[d+8>>3]=s,p[d+16>>3]=0,p[d+24>>3]=s,p[d+32>>3]=s,p[d+40>>3]=0,p[d+48>>3]=s,p[d+56>>3]=A,p[d+64>>3]=0,p[d+72>>3]=A,p[d+80>>3]=A,p[d+88>>3]=0,e[l>>2]=f,e[l+4>>2]=d,e[l+8>>2]=4,a=(il(e[r>>2]|0,l,c,n,t)|0)<0,S=u,+(a?1e8:+p[t>>3])}function e0(r,a,c,s,n,t){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0;var u=0,l=0,d=0,f=0,A=0,E=0,M=0;if(M=S,S=S+32|0,f=M+20|0,A=M,u=Ai(n<<4)|0,e[f>>2]=u,u||(Ot(3,5472,M+8|0),Fe(1)),l=Ai(n*24|0)|0,d=f+4|0,e[d>>2]=l,l||(Ot(3,5472,M+16|0),Fe(1)),(n|0)>0){E=0;do p[u+(E<<4)>>3]=+p[c+(E<<4)>>3],p[u+(E<<4)+8>>3]=+p[c+(E<<4)+8>>3],p[l+(E*24|0)>>3]=+p[s+(E*24|0)>>3],p[l+(E*24|0)+8>>3]=+p[s+(E*24|0)+8>>3],p[l+(E*24|0)+16>>3]=+p[s+(E*24|0)+16>>3],E=E+1|0;while((E|0)<(n|0))}return e[f+8>>2]=n,(il(e[r>>2]|0,f,a,t,A)|0)<0&&(p[A>>3]=1e8),Xi(e[f>>2]|0),Xi(e[d>>2]|0),S=M,+ +p[A>>3]}function Po(r,a,c,s,n,t){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0;var u=0,l=0,d=0,f=0,A=0,E=0,M=0;if(M=S,S=S+32|0,f=M+20|0,A=M,u=Ai(n<<4)|0,e[f>>2]=u,u||(Ot(3,5472,M+8|0),Fe(1)),l=Ai(n*24|0)|0,d=f+4|0,e[d>>2]=l,l||(Ot(3,5472,M+16|0),Fe(1)),(n|0)>0){E=0;do p[u+(E<<4)>>3]=+p[c+(E<<4)>>3],p[u+(E<<4)+8>>3]=+p[c+(E<<4)+8>>3],p[l+(E*24|0)>>3]=+p[s+(E*24|0)>>3],p[l+(E*24|0)+8>>3]=+p[s+(E*24|0)+8>>3],p[l+(E*24|0)+16>>3]=+p[s+(E*24|0)+16>>3],E=E+1|0;while((E|0)<(n|0))}return e[f+8>>2]=n,(vh(e[r>>2]|0,f,a,t,A)|0)<0&&(p[A>>3]=1e8),Xi(e[f>>2]|0),Xi(e[d>>2]|0),S=M,+ +p[A>>3]}function sa(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0;n=Ai(2080)|0;e:do if(n){e[n+2068>>2]=c;t:do if(s)t=4;else{switch(c|0){case 5:case 12:case 13:case 14:break;default:{t=4;break t}}e[n+2076>>2]=0}while(!1);do if((t|0)==4)if(t=Ai(je(a,r)|0)|0,e[n>>2]=t,t){e[n+2076>>2]=1;break}else{Xi(n),n=0;break e}while(!1);e[n+2072>>2]=s,e[n+4>>2]=0,e[n+8>>2]=r,e[n+12>>2]=a}while(!1);return n|0}function Un(r){r=r|0,r&&(e[r+2076>>2]|0&&Xi(e[r>>2]|0),Xi(e[r+4>>2]|0),Xi(r))}function tn(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0;u=S,S=S+16|0,s=u,c=e[r+2068>>2]|0;e:do switch(c|0){case 5:case 12:case 13:case 14:if(e[r+2072>>2]|0){Cs(e[r>>2]|0,a|0,je(e[r+12>>2]|0,e[r+8>>2]|0)|0)|0,c=0;break e}else{e[r>>2]=a,c=0;break e}default:{if((c&-2|0)==2){if(c=r+8|0,s=r+12|0,je(e[s>>2]|0,e[c>>2]|0)|0)n=0,t=0;else{c=0;break e}for(;;)if(U[(e[r>>2]|0)+n>>0]=(((me[a+(t|1)>>0]|0)+(me[a+t>>0]|0)+(me[a+(t|2)>>0]|0)|0)>>>0)/3|0,n=n+1|0,n>>>0>=(je(e[s>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break e}else t=t+4|0}if((c&-3|0)==4){if(c=r+8|0,s=r+12|0,je(e[s>>2]|0,e[c>>2]|0)|0)n=0,t=0;else{c=0;break e}for(;;)if(U[(e[r>>2]|0)+n>>0]=(((me[a+(t|2)>>0]|0)+(me[a+(t|1)>>0]|0)+(me[a+(t|3)>>0]|0)|0)>>>0)/3|0,n=n+1|0,n>>>0>=(je(e[s>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break e}else t=t+4|0}if(c>>>0<2){if(c=r+8|0,s=r+12|0,je(e[s>>2]|0,e[c>>2]|0)|0)n=0,t=0;else{c=0;break e}for(;;)if(U[(e[r>>2]|0)+n>>0]=(((me[a+(t+1)>>0]|0)+(me[a+t>>0]|0)+(me[a+(t+2)>>0]|0)|0)>>>0)/3|0,n=n+1|0,n>>>0>=(je(e[s>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break e}else t=t+3|0}switch(c|0){case 8:{if(c=r+8|0,s=r+12|0,je(e[s>>2]|0,e[c>>2]|0)|0)n=0,t=0;else{c=0;break e}for(;;)if(U[(e[r>>2]|0)+n>>0]=U[a+t>>0]|0,n=n+1|0,n>>>0>=(je(e[s>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}case 7:{if(c=r+8|0,s=r+12|0,je(e[s>>2]|0,e[c>>2]|0)|0)n=0,t=0;else{c=0;break e}for(;;)if(U[(e[r>>2]|0)+n>>0]=U[a+(t|1)>>0]|0,n=n+1|0,n>>>0>=(je(e[s>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}case 9:{if(c=r+8|0,s=r+12|0,je(e[s>>2]|0,e[c>>2]|0)|0)n=0,t=0;else{c=0;break e}for(;;)if(d=me[a+t>>0]|0,l=me[a+(t|1)>>0]|0,U[(e[r>>2]|0)+n>>0]=(((d&248)+10+(d<<5&224)+(l>>>3&28)+(l<<3&248)|0)>>>0)/3|0,n=n+1|0,n>>>0>=(je(e[s>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}case 10:{if(c=r+8|0,s=r+12|0,je(e[s>>2]|0,e[c>>2]|0)|0)n=0,t=0;else{c=0;break e}for(;;)if(l=me[a+t>>0]|0,d=me[a+(t|1)>>0]|0,U[(e[r>>2]|0)+n>>0]=(((l&248)+12+(l<<5&224)+(d>>>3&24)+(d<<2&248)|0)>>>0)/3|0,n=n+1|0,n>>>0>=(je(e[s>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}case 11:{if(c=r+8|0,s=r+12|0,je(e[s>>2]|0,e[c>>2]|0)|0)n=0,t=0;else{c=0;break e}for(;;)if(d=me[a+t>>0]|0,U[(e[r>>2]|0)+n>>0]=(((d&240)+24+(d<<4&240)+((me[a+(t|1)>>0]|0)&240)|0)>>>0)/3|0,n=n+1|0,n>>>0>=(je(e[s>>2]|0,e[c>>2]|0)|0)>>>0){c=0;break}else t=t+2|0;break}default:{Ot(3,4361,s),c=-1;break e}}}}while(!1);return S=u,c|0}function h0(r,a){r=r|0,a=a|0;var c=0,s=0;if((r|0)!=0&(a|0)!=0&&(tn(r,a)|0)>=0)if(Ht(r+16|0,0,1024)|0,a=e[r>>2]|0,s=je(e[r+12>>2]|0,e[r+8>>2]|0)|0,c=a+s|0,(s|0)>0){do s=r+16+((me[a>>0]|0)<<2)|0,e[s>>2]=(e[s>>2]|0)+1,a=a+1|0;while(a>>>0<c>>>0);a=0}else a=0;else a=-1;return a|0}function A1(r,a){r=r|0,a=a|0;var c=0;if(a=h0(r,a)|0,(a|0)>=0){a=0,c=0;do a=(e[r+16+(c<<2)>>2]|0)+a|0,e[r+1040+(c<<2)>>2]=a,c=c+1|0;while((c|0)!=256);a=0}return a|0}function Gl(r,a,c,s){r=r|0,a=a|0,c=+c,s=s|0;var n=0,t=0,u=0;if(c<0|c>1)a=-1;else if(a=A1(r,a)|0,(a|0)>=0){for(u=~~(+(je(e[r+12>>2]|0,e[r+8>>2]|0)|0)*c)>>>0,a=0;t=a&255,n=e[r+1040+(t<<2)>>2]|0,n>>>0<u>>>0;)a=a+1<<24>>24;if((n|0)==(u|0))do a=a+1<<24>>24;while((e[r+1040+((a&255)<<2)>>2]|0)==(u|0));U[s>>0]=((a&255)+t|0)>>>1,a=0}return a|0}function yl(r,a,c){return r=r|0,a=a|0,c=c|0,Gl(r,a,.5,c)|0}function dd(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0;if(a=h0(r,a)|0,(a|0)>=0){a=1,s=0;do s=s+ +((je(e[r+16+(a<<2)>>2]|0,a)|0)>>>0),a=a+1|0;while((a|0)!=256);for(d=+(je(e[r+12>>2]|0,e[r+8>>2]|0)|0),f=0,t=0,a=0,l=0,A=0;;){if(n=e[r+16+(f<<2)>>2]|0,A=A+ +(n>>>0),A!=0){if(u=d-A,u==0)break;t=t+ +((je(f,n)|0)>>>0),E=t/A-(s-t)/u,u=E*(A*u*E),u>l?a=f&255:u=l}else u=l;if((f&255)<<24>>24==-1)break;f=f+1|0,l=u}U[c>>0]=a,a=0}return a|0}function Wu(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0,ee=0,Y=0;a=h0(r,a)|0;do if((a|0)>=0){if(ee=r+4|0,e[ee>>2]|0)le=r+8|0,n=r+12|0;else if(a=r+8|0,n=r+12|0,le=Ai(je(e[n>>2]|0,e[a>>2]|0)|0)|0,e[ee>>2]=le,le)le=a;else{a=-1;break}if(B=c>>1,H=0-B|0,a=e[n>>2]|0,(a|0)>0){A=(B|0)<(H|0),E=(B|0)<(H|0),M=0;do{if(a=e[le>>2]|0,(a|0)>0){f=0;do{if(A)t=0,c=0;else for(t=0,d=H,c=0;;){if(u=d+M|0,(u|0)>=0&&(u|0)<(e[n>>2]|0)&&(Y=je(a,u)|0,!E))for(l=H;u=l+f|0,(u|0)>-1&(u|0)<(a|0)&&(t=t+1|0,c=(me[(e[r>>2]|0)+(Y+u)>>0]|0)+c|0),(l|0)<(B|0);)l=l+1|0;if((d|0)<(B|0))d=d+1|0;else break}d=(je(a,M)|0)+f|0,U[(e[ee>>2]|0)+d>>0]=(c|0)/(t|0)|0,f=f+1|0,a=e[le>>2]|0}while((f|0)<(a|0))}M=M+1|0,a=e[n>>2]|0}while((M|0)<(a|0))}if(s|0&&(je(a,e[le>>2]|0)|0)>0){a=0;do r=(e[ee>>2]|0)+a|0,U[r>>0]=(me[r>>0]|0)+s,a=a+1|0;while((a|0)<(je(e[n>>2]|0,e[le>>2]|0)|0));a=0}else a=0}while(!1);return a|0}function rl(r,a,c,s,n,t,u,l,d,f){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0,l=l|0,d=d|0,f=f|0;var A=0;e:do switch(n|0){case 0:{switch(t|0){case 1:{if(f){A=ou(r,a,c,f,d)|0;break e}switch(l|0){case 0:{if(s>>>0<2){A=rc(r,a,c,u,d)|0;break e}if((s&-2|0)==2){A=oc(r,a,c,u,d)|0;break e}if((s&-3|0)==4){A=nu(r,a,c,u,d)|0;break e}switch(s|0){case 5:case 12:case 13:case 14:{A=ru(r,a,c,u,d)|0;break e}case 8:{A=lc(r,a,c,u,d)|0;break e}case 7:{A=su(r,a,c,u,d)|0;break e}case 9:{A=sc(r,a,c,u,d)|0;break e}case 10:{A=Ga(r,a,c,u,d)|0;break e}case 11:{A=ac(r,a,c,u,d)|0;break e}default:Fe(0)}break}case 1:{if(s>>>0<2){A=eu(r,a,c,u,d)|0;break e}if((s&-2|0)==2){A=_1(r,a,c,u,d)|0;break e}if((s&-3|0)==4){A=tc(r,a,c,u,d)|0;break e}switch(s|0){case 5:case 12:case 13:case 14:{A=ic(r,a,c,u,d)|0;break e}case 8:{A=Xl(r,a,c,u,d)|0;break e}case 7:{A=nc(r,a,c,u,d)|0;break e}case 9:{A=tu(r,a,c,u,d)|0;break e}case 10:{A=x1(r,a,c,u,d)|0;break e}case 11:{A=iu(r,a,c,u,d)|0;break e}default:Fe(0)}break}default:Fe(0)}break}case 0:{if(f){A=cc(r,a,c,f,d)|0;break e}switch(l|0){case 0:{if(s>>>0<2){A=S1(r,a,c,u,d)|0;break e}if((s&-2|0)==2){A=Va(r,a,c,u,d)|0;break e}if((s&-3|0)==4){A=ma(r,a,c,u,d)|0;break e}switch(s|0){case 5:case 12:case 13:case 14:{A=hu(r,a,c,u,d)|0;break e}case 8:{A=Sl(r,a,c,u,d)|0;break e}case 7:{A=du(r,a,c,u,d)|0;break e}case 9:{A=Aa(r,a,c,u,d)|0;break e}case 10:{A=Ts(r,a,c,u,d)|0;break e}case 11:{A=Wo(r,a,c,u,d)|0;break e}default:Fe(0)}break}case 1:{if(s>>>0<2){A=au(r,a,c,u,d)|0;break e}if((s&-2|0)==2){A=cu(r,a,c,u,d)|0;break e}if((s&-3|0)==4){A=O0(r,a,c,u,d)|0;break e}switch(s|0){case 5:case 12:case 13:case 14:{A=Qa(r,a,c,u,d)|0;break e}case 8:{A=Mo(r,a,c,u,d)|0;break e}case 7:{A=uo(r,a,c,u,d)|0;break e}case 9:{A=lu(r,a,c,u,d)|0;break e}case 10:{A=M1(r,a,c,u,d)|0;break e}case 11:{A=uu(r,a,c,u,d)|0;break e}default:Fe(0)}break}default:Fe(0)}break}default:Fe(0)}break}case 1:{switch(t|0){case 1:{if(f){A=Fr(r,a,c,f,d)|0;break e}switch(l|0){case 0:{if(s>>>0<2){A=r0(r,a,c,u,d)|0;break e}if((s&-2|0)==2){A=A0(r,a,c,u,d)|0;break e}if((s&-3|0)==4){A=da(r,a,c,u,d)|0;break e}switch(s|0){case 5:case 12:case 13:case 14:{A=_o(r,a,c,u,d)|0;break e}case 8:{A=co(r,a,c,u,d)|0;break e}case 7:{A=M0(r,a,c,u,d)|0;break e}case 9:{A=x0(r,a,c,u,d)|0;break e}case 10:{A=ha(r,a,c,u,d)|0;break e}case 11:{A=P0(r,a,c,u,d)|0;break e}default:Fe(0)}break}case 1:{if(s>>>0<2){A=uc(r,a,c,u,d)|0;break e}if((s&-2|0)==2){A=Tl(r,a,c,u,d)|0;break e}if((s&-3|0)==4){A=pu(r,a,c,u,d)|0;break e}switch(s|0){case 5:case 12:case 13:case 14:{A=$s(r,a,c,u,d)|0;break e}case 8:{A=D0(r,a,c,u,d)|0;break e}case 7:{A=p0(r,a,c,u,d)|0;break e}case 9:{A=bl(r,a,c,u,d)|0;break e}case 10:{A=Yl(r,a,c,u,d)|0;break e}case 11:{A=fu(r,a,c,u,d)|0;break e}default:Fe(0)}break}default:Fe(0)}break}case 0:{if(f){A=ad(r,a,c,f,d)|0;break e}switch(l|0){case 0:{if(s>>>0<2){A=gl(r,a,c,u,d)|0;break e}if((s&-2|0)==2){A=nd(r,a,c,u,d)|0;break e}if((s&-3|0)==4){A=Pa(r,a,c,u,d)|0;break e}switch(s|0){case 5:case 12:case 13:case 14:{A=Qd(r,a,c,u,d)|0;break e}case 8:{A=od(r,a,c,u,d)|0;break e}case 7:{A=sd(r,a,c,u,d)|0;break e}case 9:{A=id(r,a,c,u,d)|0;break e}case 10:{A=rd(r,a,c,u,d)|0;break e}case 11:{A=ra(r,a,c,u,d)|0;break e}default:Fe(0)}break}case 1:{if(s>>>0<2){A=xo(r,a,c,u,d)|0;break e}if((s&-2|0)==2){A=fa(r,a,c,u,d)|0;break e}if((s&-3|0)==4){A=pa(r,a,c,u,d)|0;break e}switch(s|0){case 5:case 12:case 13:case 14:{A=ul(r,a,c,u,d)|0;break e}case 8:{A=m0(r,a,c,u,d)|0;break e}case 7:{A=s0(r,a,c,u,d)|0;break e}case 9:{A=ll(r,a,c,u,d)|0;break e}case 10:{A=$r(r,a,c,u,d)|0;break e}case 11:{A=cl(r,a,c,u,d)|0;break e}default:Fe(0)}break}default:Fe(0)}break}default:Fe(0)}break}default:Fe(0)}while(!1);return A|0}function Ku(r,a){r=r|0,a=a|0;var c=0;return r|0&&(c=r+7062384|0,(e[c>>2]|0)==0)?(e[c>>2]=a,c=0):c=-1,c|0}function Ql(r){r=r|0;var a=0;return r|0&&(a=r+7062384|0,(e[a>>2]|0)!=0)?(e[a>>2]=0,a=0):a=-1,a|0}function fd(){return H1(16,50)|0}function H1(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0,le=0;le=S,S=S+64|0,H=le+56|0,B=le+48|0,l=le+40|0,u=le+32|0,t=le+24|0,n=le+16|0,s=le+8|0,c=le;e:do if((r+-16|0)>>>0>48|(a|0)<1)M=0;else if(E=Ai(32)|0,E||(Ot(3,5472,c),Fe(1)),e[E>>2]=0,e[E+4>>2]=a,e[E+28>>2]=r,A=Ai(a<<2)|0,e[E+8>>2]=A,A||(Ot(3,5472,s),Fe(1)),c=a<<4,f=Ai(c)|0,e[E+12>>2]=f,f||(Ot(3,5472,n),Fe(1)),n=Ai(c)|0,d=E+20|0,e[d>>2]=n,n||(Ot(3,5472,t),Fe(1)),c=a<<5,t=Ai(c)|0,e[E+16>>2]=t,t||(Ot(3,5472,u),Fe(1)),u=Ai(c)|0,e[E+24>>2]=u,u||(Ot(3,5472,l),Fe(1)),s=je(r,r)|0,c=s*12|0,s=s<<2,(a|0)>0){r=0;t:for(;;){for(e[A+(r<<2)>>2]=0,n=r<<2,u=0;!((u|0)>=4);){if(l=Ai(c)|0,t=u+n|0,e[f+(t<<2)>>2]=l,!l){c=18;break t}if(l=Ai(s)|0,e[(e[d>>2]|0)+(t<<2)>>2]=l,l)u=u+1|0;else{c=20;break t}}if(r=r+1|0,(r|0)>=(a|0)){M=E;break e}}(c|0)==18?(Ot(3,5472,B),Fe(1)):(c|0)==20&&(Ot(3,5472,H),Fe(1))}else M=E;while(!1);return S=le,M|0}function Fa(r){r=r|0;var a=0,c=0,s=0,n=0,t=0,u=0,l=0;if(!r)a=-1;else{if(a=r+4|0,c=r+8|0,s=r+12|0,n=r+20|0,(e[a>>2]|0)>0){t=0;do e[(e[c>>2]|0)+(t<<2)>>2]|0&&y0(r,t)|0,u=t<<2,Xi(e[(e[s>>2]|0)+(u<<2)>>2]|0),Xi(e[(e[n>>2]|0)+(u<<2)>>2]|0),l=1+u|0,Xi(e[(e[s>>2]|0)+(l<<2)>>2]|0),Xi(e[(e[n>>2]|0)+(l<<2)>>2]|0),l=2+u|0,Xi(e[(e[s>>2]|0)+(l<<2)>>2]|0),Xi(e[(e[n>>2]|0)+(l<<2)>>2]|0),u=3+u|0,Xi(e[(e[s>>2]|0)+(u<<2)>>2]|0),Xi(e[(e[n>>2]|0)+(u<<2)>>2]|0),t=t+1|0;while((t|0)<(e[a>>2]|0))}Xi(r),a=0}return a|0}function G1(r,a,c,s,n,t,u,l,d,f,A,E,M,B,H,le,ee,Y,q){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0,l=l|0,d=d|0,f=+f,A=A|0,E=E|0,M=M|0,B=B|0,H=H|0,le=le|0,ee=ee|0,Y=Y|0,q=q|0;var se=0,Ae=0,ce=0,$=0,X=0,Be=0,gt=0,xt=0,It=0,Nt=0,Et=0,gi=0,qt=0,ui=0;ui=S,S=S+12448|0,ce=ui+12440|0,Ae=ui+8|0,gi=ui,Et=ui+12312|0,qt=ui+24|0;do if((c+-2|0)>>>0<3){if((ee|0)!=2830){if(se=ee&255,(Ta(a,2,se,se*3|0,s,n,t,u,l,d,f,qt)|0)<0){e[B>>2]=-1,se=-6;break}if(se=so(qt,se,B,H,le,ee,Y)|0,!q)break;e[q>>2]=0,e[q+4>>2]=0;break}if((Ta(a,2,14,42,s,n,t,u,l,d,.875,qt)|0)<0){e[B>>2]=-1,se=-6;break}e[Ae>>2]=0,e[Ae+4>>2]=182,e[Ae+8>>2]=195,e[Ae+12>>2]=13,ee=U[qt+(e[Ae>>2]|0)>>0]|0,se=(ee&255)>0?ee:0,ee=(ee&255)<255?ee:-1,Nt=U[qt+(e[Ae+4>>2]|0)>>0]|0,se=(Nt&255)>(se&255)?Nt:se,ee=(Nt&255)<(ee&255)?Nt:ee,Nt=U[qt+(e[Ae+8>>2]|0)>>0]|0,se=(Nt&255)>(se&255)?Nt:se,ee=(Nt&255)<(ee&255)?Nt:ee,Nt=U[qt+(e[Ae+12>>2]|0)>>0]|0,se=((Nt&255)>(se&255)?Nt:se)&255,ee=((Nt&255)<(ee&255)?Nt:ee)&255;e:do if((se-ee|0)>=30){for(Nt=(se+ee|0)>>>1,U[ce>>0]=(me[qt+(e[Ae>>2]|0)>>0]|0)>>>0<Nt>>>0&1,U[ce+1>>0]=(me[qt+(e[Ae+4>>2]|0)>>0]|0)>>>0<Nt>>>0&1,U[ce+2>>0]=(me[qt+(e[Ae+8>>2]|0)>>0]|0)>>>0<Nt>>>0&1,U[ce+3>>0]=(me[qt+(e[Ae+12>>2]|0)>>0]|0)>>>0<Nt>>>0&1,ee=0;;){if(se=ee+1|0,(U[ce+ee>>0]|0)==1&&(U[ce+((se|0)%4|0)>>0]|0)==1&&!(U[ce+((ee+2|0)%4|0)>>0]|0)){It=ee;break}if((se|0)<4)ee=se;else{It=se;break}}switch(It|0){case 4:{e[H>>2]=0,p[le>>3]=-1,se=-3,ee=0,Ae=0;break e}case 0:{Ae=119,se=255,ee=0;do{Be=ee+-3|0,$=(ee&-2|0)==12,X=ee*14|0,ce=0;do(ce+-3|Be)>>>0>=8&&(xt=ce&-2,(ce|ee)>>>0>=2)&&!($&((xt|0)==0|(xt|0)==12))&&(gt=(me[qt+(ce+X)>>0]|0)-Nt|0,U[Et+Ae>>0]=gt>>>31,gt=(gt|0)>-1?gt:0-gt|0,Ae=Ae+-1|0,se=(gt|0)<(se|0)?gt:se),ce=ce+1|0;while((ce|0)!=14);ee=ee+1|0}while((ee|0)!=14);break}case 1:{Ae=119,se=255,ee=0;do{for(Be=ee+-3|0,X=ee&-2,$=(X|0)==0,X=(X|0)==12,ce=13;(ce+-3|Be)>>>0>=8&&(gt=(ce&-2|0)==12,!($&gt))&&!(X&(ce>>>0<2|gt))&&(xt=(me[qt+((ce*14|0)+ee)>>0]|0)-Nt|0,U[Et+Ae>>0]=xt>>>31,xt=(xt|0)>-1?xt:0-xt|0,Ae=Ae+-1|0,se=(xt|0)<(se|0)?xt:se),(ce|0)>0;)ce=ce+-1|0;ee=ee+1|0}while((ee|0)!=14);break}case 2:{for(ee=119,se=255,Be=13;;){for($=Be+-3|0,X=Be>>>0<2|(Be&-2|0)==12,ce=Be*14|0,Ae=13;(Ae+-3|$)>>>0>=8&&!((Ae|Be)>>>0<2|X&(Ae&-2|0)==12)&&(xt=(me[qt+(Ae+ce)>>0]|0)-Nt|0,U[Et+ee>>0]=xt>>>31,xt=(xt|0)>-1?xt:0-xt|0,ee=ee+-1|0,se=(xt|0)<(se|0)?xt:se),(Ae|0)>0;)Ae=Ae+-1|0;if((Be|0)>0)Be=Be+-1|0;else break}break}case 3:{for(ee=119,se=255,Be=13;;){X=Be+-3|0,$=Be&-2,ce=($|0)==12,$=($|0)==0,Ae=0;do(Ae+-3|X)>>>0>=8&&!(ce&Ae>>>0<2|(Ae|Be)>>>0<2)&&!($&(Ae&-2|0)==12)&&(xt=(me[qt+((Ae*14|0)+Be)>>0]|0)-Nt|0,U[Et+ee>>0]=xt>>>31,xt=(xt|0)>-1?xt:0-xt|0,ee=ee+-1|0,se=(xt|0)<(se|0)?xt:se),Ae=Ae+1|0;while((Ae|0)!=14);if((Be|0)>0)Be=Be+-1|0;else break}break}default:se=255}e[H>>2]=It,p[le>>3]=(se|0)>30?1:+(se|0)/30,se=E0(2830,0,0,Et,gi)|0,(se|0)<0?(se=-4,ee=0,Ae=0):(Y&&(e[Y>>2]=se),Ae=gi,se=0,ee=e[Ae>>2]|0,Ae=e[Ae+4>>2]|0)}else e[H>>2]=0,p[le>>3]=-1,se=-2,ee=0,Ae=0;while(!1);if((se|0)<0){e[B>>2]=-1;break}if((ee|0)==-1&(Ae|0)==-1){e[B>>2]=-1,se=-5;break}e[B>>2]=(ee&-32768|0)==0&!0?ee&32767:0,q&&(se=q,e[se>>2]=ee,e[se+4>>2]=Ae),se=0}else se=1;while(!1);e:do switch(c|0){case 0:case 1:case 3:case 4:{if(!r){e[A>>2]=-1,ee=-1;break e}switch(ee=r+28|0,Ae=e[ee>>2]|0,ce=Ae<<2,c|0){case 0:case 3:if((Ta(a,0,Ae,ce,s,n,t,u,l,d,f,qt)|0)<0){e[A>>2]=-1,ee=-6;break e}else{ee=rr(r,0,qt,e[ee>>2]|0,A,E,M)|0;break e}default:if((Ta(a,1,Ae,ce,s,n,t,u,l,d,f,qt)|0)<0){e[A>>2]=-1,ee=-6;break e}else{ee=rr(r,1,qt,e[ee>>2]|0,A,E,M)|0;break e}}}default:ee=1}while(!1);return(se|0)!=1?(ee|0)!=1&&(se=(ee&se|0)<0?ee:0):se=ee,S=ui,se|0}function ka(r){r=r|0;var a=0,c=0,s=0,n=0,t=0,u=0,l=0,d=0;d=S,S=S+16|0,a=d+8|0,u=d+4|0,c=d,e[u>>2]=r;do if(r>>>0>=212){t=(r>>>0)/210|0,s=t*210|0,e[c>>2]=r-s,a=(Fc(3712,3904,c,a)|0)-3712>>2,n=a,a=(e[3712+(a<<2)>>2]|0)+s|0;e:for(;;){for(s=5;;){if(s>>>0>=47){s=211,l=8;break}if(c=e[3520+(s<<2)>>2]|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=106;break e}if((a|0)==(je(r,c)|0))break;s=s+1|0}t:do if((l|0)==8)for(;;){if(l=0,c=(a>>>0)/(s>>>0)|0,c>>>0<s>>>0){l=105;break e}if((a|0)==(je(c,s)|0))break t;if(c=s+10|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+12|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+16|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+18|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+22|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+28|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+30|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+36|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+40|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+42|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+46|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+52|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+58|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+60|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+66|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+70|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+72|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+78|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+82|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+88|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+96|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+100|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+102|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+106|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+108|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+112|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+120|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+126|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+130|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+136|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+138|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+142|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+148|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+150|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+156|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+162|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+166|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+168|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+172|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+178|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+180|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+186|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+190|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+192|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+196|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+198|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break t;if(c=s+208|0,r=(a>>>0)/(c>>>0)|0,r>>>0<c>>>0){l=105;break e}if((a|0)==(je(r,c)|0))break;s=s+210|0,l=8}while(!1);s=n+1|0,a=(s|0)==48,s=a?0:s,a=(a&1)+t|0,n=s,t=a,a=(e[3712+(s<<2)>>2]|0)+(a*210|0)|0}if((l|0)==105){e[u>>2]=a;break}else if((l|0)==106){e[u>>2]=a;break}}else a=e[(Fc(3520,3712,u,a)|0)>>2]|0;while(!1);return S=d,a|0}function Fc(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0;n=e[c>>2]|0,s=r,c=a-r>>2;e:for(;;){for(;;){if(!c)break e;if(r=(c|0)/2|0,(e[s+(r<<2)>>2]|0)>>>0<n>>>0)break;c=r}s=s+(r+1<<2)|0,c=c+-1-r|0}return s|0}function Xu(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0;c>>>0>4294967279&&no(r),c>>>0<11?(U[r>>0]=c<<1,r=r+1|0):(n=c+16&-16,s=Wa(n)|0,e[r+8>>2]=s,e[r>>2]=n|1,e[r+4>>2]=c,r=s),Cs(r|0,a|0,c|0)|0,U[r+c>>0]=0}function Q1(r){r=r|0,U[r>>0]&1&&Gs(e[r+8>>2]|0)}function sl(){}function Go(r,a,c,s){return r=r|0,a=a|0,c=c|0,s=s|0,s=a-s-(c>>>0>r>>>0|0)>>>0,De=s,r-c>>>0|0|0}function Ht(r,a,c){r=r|0,a=a|0,c=c|0;var s=0,n=0,t=0,u=0;if(s=r+c|0,(c|0)>=20){if(a=a&255,t=r&3,u=a|a<<8|a<<16|a<<24,n=s&-4,t)for(t=r+4-t|0;(r|0)<(t|0);)U[r>>0]=a,r=r+1|0;for(;(r|0)<(n|0);)e[r>>2]=u,r=r+4|0}for(;(r|0)<(s|0);)U[r>>0]=a,r=r+1|0;return r-c|0}function rs(r,a,c){return r=r|0,a=a|0,c=c|0,(c|0)<32?(De=a<<c|(r&(1<<c)-1<<32-c)>>>32-c,r<<c):(De=r<<c-32,0)}function er(r,a,c,s){return r=r|0,a=a|0,c=c|0,s=s|0,c=r+c>>>0,De=a+s+(c>>>0<r>>>0|0)>>>0,c|0|0}function Na(r,a,c){return r=r|0,a=a|0,c=c|0,(c|0)<32?(De=a>>>c,r>>>c|(a&(1<<c)-1)<<32-c):(De=0,a>>>c-32|0)}function Cs(r,a,c){r=r|0,a=a|0,c=c|0;var s=0;if((c|0)>=4096)return si(r|0,a|0,c|0)|0;if(s=r|0,(r&3)==(a&3)){for(;r&3;){if(!c)return s|0;U[r>>0]=U[a>>0]|0,r=r+1|0,a=a+1|0,c=c-1|0}for(;(c|0)>=4;)e[r>>2]=e[a>>2],r=r+4|0,a=a+4|0,c=c-4|0}for(;(c|0)>0;)U[r>>0]=U[a>>0]|0,r=r+1|0,a=a+1|0,c=c-1|0;return s|0}function vf(r,a,c){return r=r|0,a=a|0,c=c|0,(c|0)<32?(De=a>>c,r>>>c|(a&(1<<c)-1)<<32-c):(De=(a|0)<0?-1:0,a>>c-32|0)}function Yu(r){r=r|0;var a=0;return a=U[Q+(r&255)>>0]|0,(a|0)<8?a|0:(a=U[Q+(r>>8&255)>>0]|0,(a|0)<8?a+8|0:(a=U[Q+(r>>16&255)>>0]|0,(a|0)<8?a+16|0:(U[Q+(r>>>24)>>0]|0)+24|0))}function V1(r,a){r=r|0,a=a|0;var c=0,s=0,n=0,t=0;return t=r&65535,n=a&65535,c=je(n,t)|0,s=r>>>16,r=(c>>>16)+(je(n,s)|0)|0,n=a>>>16,a=je(n,t)|0,De=(r>>>16)+(je(n,s)|0)+(((r&65535)+a|0)>>>16)|0,r+a<<16|c&65535|0|0}function zd(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0;return f=a>>31|((a|0)<0?-1:0)<<1,d=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,t=s>>31|((s|0)<0?-1:0)<<1,n=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,l=Go(f^r,d^a,f,d)|0,u=De,r=t^f,a=n^d,Go((oa(l,u,Go(t^c,n^s,t,n)|0,De,0)|0)^r,De^a,r,a)|0}function Wd(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0,u=0,l=0,d=0,f=0;return n=S,S=S+16|0,l=n|0,u=a>>31|((a|0)<0?-1:0)<<1,t=((a|0)<0?-1:0)>>31|((a|0)<0?-1:0)<<1,f=s>>31|((s|0)<0?-1:0)<<1,d=((s|0)<0?-1:0)>>31|((s|0)<0?-1:0)<<1,r=Go(u^r,t^a,u,t)|0,a=De,oa(r,a,Go(f^c,d^s,f,d)|0,De,l)|0,s=Go(e[l>>2]^u,e[l+4>>2]^t,u,t)|0,c=De,S=n,De=c,s|0}function t0(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0;return n=r,t=c,c=V1(n,t)|0,r=De,De=(je(a,t)|0)+(je(s,n)|0)+r|r&0,c|0|0|0}function wl(r,a,c,s){return r=r|0,a=a|0,c=c|0,s=s|0,oa(r,a,c,s,0)|0}function qu(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0;var n=0,t=0;return t=S,S=S+16|0,n=t|0,oa(r,a,c,s,n)|0,S=t,De=e[n+4>>2]|0,e[n>>2]|0|0}function oa(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0;var t=0,u=0,l=0,d=0,f=0,A=0,E=0,M=0,B=0,H=0;if(A=r,d=a,f=d,u=c,M=s,l=M,!f)return t=(n|0)!=0,l?t?(e[n>>2]=r|0,e[n+4>>2]=a&0,M=0,n=0,De=M,n|0):(M=0,n=0,De=M,n|0):(t&&(e[n>>2]=(A>>>0)%(u>>>0),e[n+4>>2]=0),M=0,n=(A>>>0)/(u>>>0)>>>0,De=M,n|0);t=(l|0)==0;do if(u){if(!t){if(t=(mr(l|0)|0)-(mr(f|0)|0)|0,t>>>0<=31){E=t+1|0,l=31-t|0,a=t-31>>31,u=E,r=A>>>(E>>>0)&a|f<<l,a=f>>>(E>>>0)&a,t=0,l=A<<l;break}return n?(e[n>>2]=r|0,e[n+4>>2]=d|a&0,M=0,n=0,De=M,n|0):(M=0,n=0,De=M,n|0)}if(t=u-1|0,t&u){l=(mr(u|0)|0)+33-(mr(f|0)|0)|0,H=64-l|0,E=32-l|0,d=E>>31,B=l-32|0,a=B>>31,u=l,r=E-1>>31&f>>>(B>>>0)|(f<<E|A>>>(l>>>0))&a,a=a&f>>>(l>>>0),t=A<<H&d,l=(f<<H|A>>>(B>>>0))&d|A<<E&l-33>>31;break}return n&&(e[n>>2]=t&A,e[n+4>>2]=0),(u|0)==1?(B=d|a&0,H=r|0|0,De=B,H|0):(H=Yu(u|0)|0,B=f>>>(H>>>0)|0,H=f<<32-H|A>>>(H>>>0)|0,De=B,H|0)}else{if(t)return n&&(e[n>>2]=(f>>>0)%(u>>>0),e[n+4>>2]=0),B=0,H=(f>>>0)/(u>>>0)>>>0,De=B,H|0;if(!A)return n&&(e[n>>2]=0,e[n+4>>2]=(f>>>0)%(l>>>0)),B=0,H=(f>>>0)/(l>>>0)>>>0,De=B,H|0;if(t=l-1|0,!(t&l))return n&&(e[n>>2]=r|0,e[n+4>>2]=t&f|a&0),B=0,H=f>>>((Yu(l|0)|0)>>>0),De=B,H|0;if(t=(mr(l|0)|0)-(mr(f|0)|0)|0,t>>>0<=30){a=t+1|0,l=31-t|0,u=a,r=f<<l|A>>>(a>>>0),a=f>>>(a>>>0),t=0,l=A<<l;break}return n?(e[n>>2]=r|0,e[n+4>>2]=d|a&0,B=0,H=0,De=B,H|0):(B=0,H=0,De=B,H|0)}while(!1);if(!u)f=l,d=0,l=0;else{E=c|0|0,A=M|s&0,f=er(E|0,A|0,-1,-1)|0,c=De,d=l,l=0;do s=d,d=t>>>31|d<<1,t=l|t<<1,s=r<<1|s>>>31|0,M=r>>>31|a<<1|0,Go(f,c,s,M)|0,H=De,B=H>>31|((H|0)<0?-1:0)<<1,l=B&1,r=Go(s,M,B&E,(((H|0)<0?-1:0)>>31|((H|0)<0?-1:0)<<1)&A)|0,a=De,u=u-1|0;while(u|0);f=d,d=0}return u=0,n&&(e[n>>2]=r,e[n+4>>2]=a),B=(t|0)>>>31|(f|u)<<1|(u<<1|t>>>31)&0|d,H=(t<<1|0)&-2|l,De=B,H|0}function kc(r,a,c,s){return r=r|0,a=a|0,c=c|0,s=s|0,ze[r&15](a|0,c|0,s|0)|0}function Vl(r,a,c,s,n,t){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,pt[r&3](a|0,c|0,s|0,n|0,t|0)}function Nc(r,a,c){return r=r|0,a=a|0,c=c|0,+bt[r&1](a|0,c|0)}function Ju(r,a,c){r=r|0,a=a|0,c=+c,Zt[r&3](a|0,+c)}function Zu(r,a){return r=r|0,a=a|0,+Bi[r&3](a|0)}function Kd(r){return r=r|0,Fi[r&1]()|0}function z1(r,a){r=r|0,a=a|0,_i[r&15](a|0)}function pd(r,a,c){r=r|0,a=a|0,c=c|0,cn[r&7](a|0,c|0)}function $u(r,a){return r=r|0,a=a|0,mn[r&31](a|0)|0}function ju(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0,Sn[r&1](a|0,c|0,s|0)}function W1(r){r=r|0,Ws[r&0]()}function K1(r,a,c,s){r=r|0,a=a|0,c=c|0,s=+s,Wt[r&3](a|0,c|0,+s)}function eh(r,a,c,s,n){return r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,Bt[r&1](a|0,c|0,s|0,n|0)|0}function Uc(r,a,c,s,n,t,u){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,u=u|0,Xt[r&3](a|0,c|0,s|0,n|0,t|0,u|0)}function th(r,a,c){return r=r|0,a=a|0,c=c|0,Pi[r&15](a|0,c|0)|0}function Hc(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,Mn[r&3](a|0,c|0,s|0,n|0)}function X1(r,a,c){return r=r|0,a=a|0,c=c|0,Wn(0),0}function Cl(r,a,c,s,n){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,Wn(1)}function zs(r,a){return r=r|0,a=a|0,Wn(2),0}function lo(r,a){r=r|0,a=+a,Wn(3)}function Gc(r){return r=r|0,Wn(4),0}function Qc(){return Wn(5),0}function Ad(r){r=r|0,Wn(6)}function Y1(r,a){r=r|0,a=a|0,Wn(7)}function i0(r){return r=r|0,Wn(8),0}function Vc(r,a,c){r=r|0,a=a|0,c=c|0,Wn(9)}function g(){Wn(10)}function y(r,a,c){r=r|0,a=a|0,c=+c,Wn(11)}function I(r,a,c,s){return r=r|0,a=a|0,c=c|0,s=s|0,Wn(12),0}function j(r,a,c,s,n,t){r=r|0,a=a|0,c=c|0,s=s|0,n=n|0,t=t|0,Wn(13)}function he(r,a){return r=r|0,a=a|0,Wn(14),0}function be(r,a,c,s){r=r|0,a=a|0,c=c|0,s=s|0,Wn(15)}var ze=[X1,cs,zr,n1,q0,dl,ko,Kh,Gh,Uh,Hh,zh,ku,Bc,Td,t1],pt=[Cl,_r,jn,nt],bt=[zs,En],Zt=[lo,Rd,Id,Oh],Bi=[Gc,Lh,Bd,Sc],Fi=[Qc,Cu],_i=[Ad,Ka,$l,wa,Rl,K0,Xa,Es,Il,I1,Mh,Zh,k1,yu,to,Ad],cn=[Y1,Fh,Mu,Dh,Ld,Pd,bu,$h],mn=[i0,Ea,gu,Sh,Bh,bh,C0,u0,c1,Su,kh,bc,Ph,Dd,ia,Tu,Fu,i0,i0,i0,i0,i0,i0,i0,i0,i0,i0,i0,i0,i0,i0,i0],Sn=[Vc,Hd],Ws=[g],Wt=[y,d1,$o,y],Bt=[I,ed],Xt=[j,o0,g0,ho],Pi=[he,Eh,xu,Rh,Ih,Qh,Od,Vh,Wh,Nh,jh,Gd,he,he,he,he],Mn=[be,js,hl,ar];return{_i64Subtract:Go,_fflush:Yr,_i64Add:er,_memset:Ht,_malloc:Ai,_memcpy:Cs,___getTypeName:ur,_bitshift64Lshr:Na,_free:Xi,___errno_location:Zn,_bitshift64Shl:rs,__GLOBAL__sub_I_ARToolKitJS_cpp:Jh,__GLOBAL__sub_I_bind_cpp:vi,runPostSets:sl,stackAlloc:E1,stackSave:Ml,stackRestore:$c,establishStackSpace:y1,setThrew:w1,setTempRet0:ec,getTempRet0:jc,dynCall_iiii:kc,dynCall_viiiii:Vl,dynCall_dii:Nc,dynCall_vid:Ju,dynCall_di:Zu,dynCall_i:Kd,dynCall_vi:z1,dynCall_vii:pd,dynCall_ii:$u,dynCall_viii:ju,dynCall_v:W1,dynCall_viid:K1,dynCall_iiiii:eh,dynCall_viiiiii:Uc,dynCall_iii:th,dynCall_viiii:Hc}}(Module.asmGlobalArg,Module.asmLibraryArg,buffer),_i64Subtract=Module._i64Subtract=asm._i64Subtract,__GLOBAL__sub_I_bind_cpp=Module.__GLOBAL__sub_I_bind_cpp=asm.__GLOBAL__sub_I_bind_cpp;Module._fflush=asm._fflush;var __GLOBAL__sub_I_ARToolKitJS_cpp=Module.__GLOBAL__sub_I_ARToolKitJS_cpp=asm.__GLOBAL__sub_I_ARToolKitJS_cpp,_i64Add=Module._i64Add=asm._i64Add,_memset=Module._memset=asm._memset;Module.runPostSets=asm.runPostSets;var _malloc=Module._malloc=asm._malloc,_memcpy=Module._memcpy=asm._memcpy,___getTypeName=Module.___getTypeName=asm.___getTypeName,_bitshift64Lshr=Module._bitshift64Lshr=asm._bitshift64Lshr,_free=Module._free=asm._free;Module.___errno_location=asm.___errno_location;var _bitshift64Shl=Module._bitshift64Shl=asm._bitshift64Shl;Module.dynCall_iiii=asm.dynCall_iiii,Module.dynCall_viiiii=asm.dynCall_viiiii,Module.dynCall_dii=asm.dynCall_dii,Module.dynCall_vid=asm.dynCall_vid,Module.dynCall_di=asm.dynCall_di,Module.dynCall_i=asm.dynCall_i,Module.dynCall_vi=asm.dynCall_vi,Module.dynCall_vii=asm.dynCall_vii,Module.dynCall_ii=asm.dynCall_ii,Module.dynCall_viii=asm.dynCall_viii,Module.dynCall_v=asm.dynCall_v,Module.dynCall_viid=asm.dynCall_viid,Module.dynCall_iiiii=asm.dynCall_iiiii,Module.dynCall_viiiiii=asm.dynCall_viiiiii,Module.dynCall_iii=asm.dynCall_iii,Module.dynCall_viiii=asm.dynCall_viiii,Runtime.stackAlloc=asm.stackAlloc,Runtime.stackSave=asm.stackSave,Runtime.stackRestore=asm.stackRestore,Runtime.establishStackSpace=asm.establishStackSpace,Runtime.setTempRet0=asm.setTempRet0,Runtime.getTempRet0=asm.getTempRet0;function ExitStatus(_){this.name="ExitStatus",this.message="Program terminated with exit("+_+")",this.status=_}ExitStatus.prototype=new Error,ExitStatus.prototype.constructor=ExitStatus;var initialStackTop;dependenciesFulfilled=function _(){Module.calledRun||run(),Module.calledRun||(dependenciesFulfilled=_)},Module.callMain=Module.callMain=function _(R){assert(runDependencies==0,"cannot call main when async dependencies remain! (listen on __ATMAIN__)"),assert(__ATPRERUN__.length==0,"cannot call main when preRun functions remain to be called"),R=R||[],ensureInitRuntime();var O=R.length+1;function U(){for(var ie=0;ie<3;ie++)w.push(0)}var w=[allocate(intArrayFromString(Module.thisProgram),"i8",ALLOC_NORMAL)];U();for(var e=0;e<O-1;e=e+1)w.push(allocate(intArrayFromString(R[e]),"i8",ALLOC_NORMAL)),U();w.push(0),w=allocate(w,"i32",ALLOC_NORMAL);try{var me=Module._main(O,w,0);exit(me,!0)}catch(ie){if(ie instanceof ExitStatus)return;if(ie=="SimulateInfiniteLoop"){Module.noExitRuntime=!0;return}else throw ie&&typeof ie=="object"&&ie.stack&&Module.printErr("exception thrown: "+[ie,ie.stack]),ie}finally{}};function run(_){if(_=_||Module.arguments,runDependencies>0||(preRun(),runDependencies>0)||Module.calledRun)return;function R(){Module.calledRun||(Module.calledRun=!0,!ABORT&&(ensureInitRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),Module._main&&shouldRunNow&&Module.callMain(_),postRun()))}Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),R()},1)):R()}Module.run=Module.run=run;function exit(_,R){if(!(R&&Module.noExitRuntime))throw Module.noExitRuntime||(ABORT=!0,STACKTOP=initialStackTop,exitRuntime(),Module.onExit&&Module.onExit(_)),ENVIRONMENT_IS_NODE?(process.stdout.once("drain",function(){process.exit(_)}),console.log(" "),setTimeout(function(){process.exit(_)},500)):ENVIRONMENT_IS_SHELL&&typeof quit=="function"&&quit(_),new ExitStatus(_)}Module.exit=Module.exit=exit;var abortDecorators=[];function abort(_){_!==void 0?(Module.print(_),Module.printErr(_),_=JSON.stringify(_)):_="",ABORT=!0;var R=`
If this abort() is unexpected, build with -s ASSERTIONS=1 which can give more information.`,O="abort("+_+") at "+stackTrace()+R;throw abortDecorators.forEach(function(U){O=U(O,_)}),O}if(Module.abort=Module.abort=abort,Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run(),function(){var _=function(T,F,N){var k=T,G=F;if(this.orientation="landscape",this.listeners={},typeof T!="number"){var Z=T;N=F,k=Z.videoWidth||Z.width,G=Z.videoHeight||Z.height,this.image=Z}if(this.defaultMarkerWidth=1,this.patternMarkers={},this.barcodeMarkers={},this.transform_mat=new Float32Array(16),this.canvas=document.createElement("canvas"),this.canvas.width=k,this.canvas.height=G,this.ctx=this.canvas.getContext("2d"),this.videoWidth=k,this.videoHeight=G,typeof N=="string"){var ne=this;this.cameraParam=new R(N,function(){ne._initialize()},function(te){console.error("ARController: Failed to load ARCameraParam",te)})}else this.cameraParam=N,this._initialize()};_.prototype.dispose=function(){O.teardown(this.id);for(var T in this)this[T]=null},_.prototype.process=function(T){this.detectMarker(T);var F=this.getMarkerNum(),N,k;for(N in this.patternMarkers)k=this.patternMarkers[N],k.inPrevious=k.inCurrent,k.inCurrent=!1;for(N in this.barcodeMarkers)k=this.barcodeMarkers[N],k.inPrevious=k.inCurrent,k.inCurrent=!1;for(var G=0;G<F;G++){var Z=this.getMarker(G),ne=O.UNKNOWN_MARKER,te=this.trackPatternMarkerId(-1);Z.idPatt>-1&&(Z.id===Z.idPatt||Z.idMatrix===-1)?(te=this.trackPatternMarkerId(Z.idPatt),ne=O.PATTERN_MARKER,Z.dir!==Z.dirPatt&&this.setMarkerInfoDir(G,Z.dirPatt)):Z.idMatrix>-1&&(te=this.trackBarcodeMarkerId(Z.idMatrix),ne=O.BARCODE_MARKER,Z.dir!==Z.dirMatrix&&this.setMarkerInfoDir(G,Z.dirMatrix)),ne!==O.UNKNOWN_MARKER&&te.inPrevious?this.getTransMatSquareCont(G,te.markerWidth,te.matrix,te.matrix):this.getTransMatSquare(G,te.markerWidth,te.matrix),te.inCurrent=!0,this.transMatToGLMat(te.matrix,this.transform_mat),this.dispatchEvent({name:"getMarker",target:this,data:{index:G,type:ne,marker:Z,matrix:this.transform_mat}})}for(var de=this.getMultiMarkerCount(),G=0;G<de;G++){var oe=this.getMultiMarkerPatternCount(G),te=!1;O.getTransMatMultiSquareRobust(this.id,G),this.transMatToGLMat(this.marker_transform_mat,this.transform_mat);for(var ye=0;ye<oe;ye++){var Me=this.getMultiEachMarker(G,ye);if(Me.visible>=0){te=!0,this.dispatchEvent({name:"getMultiMarker",target:this,data:{multiMarkerId:G,matrix:this.transform_mat}});break}}if(te)for(var ye=0;ye<oe;ye++){var Me=this.getMultiEachMarker(G,ye);this.transMatToGLMat(this.marker_transform_mat,this.transform_mat),this.dispatchEvent({name:"getMultiMarkerSub",target:this,data:{multiMarkerId:G,markerIndex:ye,marker:Me,matrix:this.transform_mat}})}}this._bwpointer&&this.debugDraw()},_.prototype.trackPatternMarkerId=function(T,F){var N=this.patternMarkers[T];return N||(this.patternMarkers[T]=N={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:F||this.defaultMarkerWidth}),F&&(N.markerWidth=F),N},_.prototype.trackBarcodeMarkerId=function(T,F){var N=this.barcodeMarkers[T];return N||(this.barcodeMarkers[T]=N={inPrevious:!1,inCurrent:!1,matrix:new Float32Array(12),markerWidth:F||this.defaultMarkerWidth}),F&&(N.markerWidth=F),N},_.prototype.getMultiMarkerCount=function(){return O.getMultiMarkerCount(this.id)},_.prototype.getMultiMarkerPatternCount=function(T){return O.getMultiMarkerNum(this.id,T)},_.prototype.addEventListener=function(T,F){this.listeners[T]||(this.listeners[T]=[]),this.listeners[T].push(F)},_.prototype.removeEventListener=function(T,F){if(this.listeners[T]){var N=this.listeners[T].indexOf(F);N>-1&&this.listeners[T].splice(N,1)}},_.prototype.dispatchEvent=function(T){var F=this.listeners[T.name];if(F)for(var N=0;N<F.length;N++)F[N].call(this,T)},_.prototype.debugSetup=function(){document.body.appendChild(this.canvas),this.setDebugMode(1),this._bwpointer=this.getProcessingImage()},_.prototype.loadMarker=function(T,F,N){return O.addMarker(this.id,T,F,N)},_.prototype.loadMultiMarker=function(T,F,N){return O.addMultiMarker(this.id,T,F,N)},_.prototype.getTransMatSquare=function(T,F,N){return O.getTransMatSquare(this.id,T,F),N.set(this.marker_transform_mat),N},_.prototype.getTransMatSquareCont=function(T,F,N,k){return this.marker_transform_mat.set(N),O.getTransMatSquareCont(this.id,T,F),k.set(this.marker_transform_mat),k},_.prototype.getTransMatMultiSquare=function(T,F){return O.getTransMatMultiSquare(this.id,T),F.set(this.marker_transform_mat),F},_.prototype.getTransMatMultiSquareRobust=function(T,F){return O.getTransMatMultiSquare(this.id,T),F.set(this.marker_transform_mat),F},_.prototype.transMatToGLMat=function(T,F,N){return F[0+0*4]=T[0],F[0+1*4]=T[1],F[0+2*4]=T[2],F[0+3*4]=T[3],F[1+0*4]=T[4],F[1+1*4]=T[5],F[1+2*4]=T[6],F[1+3*4]=T[7],F[2+0*4]=T[8],F[2+1*4]=T[9],F[2+2*4]=T[10],F[2+3*4]=T[11],F[3+0*4]=0,F[3+1*4]=0,F[3+2*4]=0,F[3+3*4]=1,N!=null&&N!==0&&(F[12]*=N,F[13]*=N,F[14]*=N),F},_.prototype.detectMarker=function(T){return this._copyImageToHeap(T)?O.detectMarker(this.id):-99},_.prototype.getMarkerNum=function(){return O.getMarkerNum(this.id)},_.prototype.getMarker=function(T){if(O.getMarker(this.id,T)===0)return O.markerInfo},_.prototype.setMarkerInfoVertex=function(T,F){for(var N=0;N<F.length;N++)this.marker_transform_mat[N*2+0]=F[N][0],this.marker_transform_mat[N*2+1]=F[N][1];return O.setMarkerInfoVertex(this.id,T)},_.prototype.cloneMarkerInfo=function(T){return JSON.parse(JSON.stringify(T))},_.prototype.getMultiEachMarker=function(T,F){if(O.getMultiEachMarker(this.id,T,F)===0)return O.multiEachMarkerInfo},_.prototype.getTransformationMatrix=function(){return this.transform_mat},_.prototype.getCameraMatrix=function(){return this.camera_mat},_.prototype.getMarkerTransformationMatrix=function(){return this.marker_transform_mat},_.prototype.setDebugMode=function(T){return O.setDebugMode(this.id,T)},_.prototype.getDebugMode=function(){return O.getDebugMode(this.id)},_.prototype.getProcessingImage=function(){return O.getProcessingImage(this.id)},_.prototype.setLogLevel=function(T){return O.setLogLevel(T)},_.prototype.getLogLevel=function(){return O.getLogLevel()},_.prototype.setMarkerInfoDir=function(T,F){return O.setMarkerInfoDir(this.id,T,F)},_.prototype.setProjectionNearPlane=function(T){return O.setProjectionNearPlane(this.id,T)},_.prototype.getProjectionNearPlane=function(){return O.getProjectionNearPlane(this.id)},_.prototype.setProjectionFarPlane=function(T){return O.setProjectionFarPlane(this.id,T)},_.prototype.getProjectionFarPlane=function(){return O.getProjectionFarPlane(this.id)},_.prototype.setThresholdMode=function(T){return O.setThresholdMode(this.id,T)},_.prototype.getThresholdMode=function(){return O.getThresholdMode(this.id)},_.prototype.setThreshold=function(T){return O.setThreshold(this.id,T)},_.prototype.getThreshold=function(){return O.getThreshold(this.id)},_.prototype.setPatternDetectionMode=function(T){return O.setPatternDetectionMode(this.id,T)},_.prototype.getPatternDetectionMode=function(){return O.getPatternDetectionMode(this.id)},_.prototype.setMatrixCodeType=function(T){return O.setMatrixCodeType(this.id,T)},_.prototype.getMatrixCodeType=function(){return O.getMatrixCodeType(this.id)},_.prototype.setLabelingMode=function(T){return O.setLabelingMode(this.id,T)},_.prototype.getLabelingMode=function(){return O.getLabelingMode(this.id)},_.prototype.setPattRatio=function(T){return O.setPattRatio(this.id,T)},_.prototype.getPattRatio=function(){return O.getPattRatio(this.id)},_.prototype.setImageProcMode=function(T){return O.setImageProcMode(this.id,T)},_.prototype.getImageProcMode=function(){return O.getImageProcMode(this.id)},_.prototype.debugDraw=function(){var T=new Uint8ClampedArray(Module.HEAPU8.buffer,this._bwpointer,this.framesize),F=new ImageData(T,this.canvas.width,this.canvas.height);this.ctx.putImageData(F,0,0);for(var N=this.getMarkerNum(),k=0;k<N;k++)this._debugMarker(this.getMarker(k))},_.prototype._initialize=function(){this.id=O.setup(this.canvas.width,this.canvas.height,this.cameraParam.id);var T=O.frameMalloc;this.framepointer=T.framepointer,this.framesize=T.framesize,this.dataHeap=new Uint8Array(Module.HEAPU8.buffer,this.framepointer,this.framesize),this.camera_mat=new Float64Array(Module.HEAPU8.buffer,T.camera,16),this.marker_transform_mat=new Float64Array(Module.HEAPU8.buffer,T.transform,12),this.setProjectionNearPlane(.1),this.setProjectionFarPlane(1e3);var F=this;setTimeout(function(){F.onload&&F.onload(),F.dispatchEvent({name:"load",target:F})},1)},_.prototype._copyImageToHeap=function(T){if(T||(T=this.image),T.nodeName==="IMG"&&T.width>T.height||T.nodeName==="VIDEO"&&T.videoWidth>T.videoHeight)this.ctx.drawImage(T,0,0,this.canvas.width,this.canvas.height);else{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);var F=this.canvas.height/this.canvas.width,N=this.canvas.width*F,k=this.canvas.height*F,G=(this.canvas.width-k)/2;this.ctx.drawImage(T,G,0,k,N)}var Z=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),ne=Z.data;return this.dataHeap?(this.dataHeap.set(ne),!0):!1},_.prototype._debugMarker=function(T){var F,N;F=T.vertex;var k=this.ctx;k.strokeStyle="red",k.beginPath(),k.moveTo(F[0][0],F[0][1]),k.lineTo(F[1][0],F[1][1]),k.stroke(),k.beginPath(),k.moveTo(F[2][0],F[2][1]),k.lineTo(F[3][0],F[3][1]),k.stroke(),k.strokeStyle="green",k.beginPath(),k.lineTo(F[1][0],F[1][1]),k.lineTo(F[2][0],F[2][1]),k.stroke(),k.beginPath(),k.moveTo(F[3][0],F[3][1]),k.lineTo(F[0][0],F[0][1]),k.stroke(),N=T.pos,k.beginPath(),k.arc(N[0],N[1],8,0,Math.PI*2),k.fillStyle="red",k.fill()},_.getUserMedia=function(T){T.facingMode;var F=T.onSuccess,N=T.onError||function(Me){console.error("ARController.getUserMedia",Me)},k=document.createElement("video"),G=function(){this.videoWidth!==0&&F(k)},Z=!1,ne=["touchstart","touchend","touchmove","touchcancel","click","mousedown","mouseup","mousemove","keydown","keyup","keypress","scroll"],te=function(Me){Z&&(k.play(),k.paused||ne.forEach(function(Ne){window.removeEventListener(Ne,te,!0)}))};ne.forEach(function(Me){window.addEventListener(Me,te,!0)});var de=function(Me){k.addEventListener("loadedmetadata",G,!1),k.src=window.URL.createObjectURL(Me),Z=!0,te()},oe={};T.width&&(T.width,typeof T.width=="object"?(T.width.max&&(oe.maxWidth=T.width.max),T.width.min&&(oe.minWidth=T.width.max)):oe.maxWidth=T.width),T.height&&(T.height,typeof T.height=="object"?(T.height.max&&(oe.maxHeight=T.height.max),T.height.min&&(oe.minHeight=T.height.max)):oe.maxHeight=T.height),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var ye={audio:!1,video:{mandatory:oe}};return navigator.getUserMedia?navigator.getUserMedia(ye,de,N):N("navigator.getUserMedia is not supported on your browser"),k},_.getUserMediaARController=function(T){var F={};for(var N in T)F[N]=T[N];var k=T.onSuccess,G=T.cameraParam;F.onSuccess=function(){new R(G,function(){var ne=this,te=T.maxARVideoSize||Math.max(Z.videoWidth,Z.videoHeight),de=te/Math.max(Z.videoWidth,Z.videoHeight),oe=de*Z.videoWidth,ye=de*Z.videoHeight;if(Z.videoWidth<Z.videoHeight){var Me=oe;oe=ye,ye=Me}var Ne=new _(oe,ye,ne);Ne.image=Z,Z.videoWidth<Z.videoHeight?(Ne.orientation="portrait",Ne.videoWidth=Z.videoHeight,Ne.videoHeight=Z.videoWidth):(Ne.orientation="landscape",Ne.videoWidth=Z.videoWidth,Ne.videoHeight=Z.videoHeight),k(Ne,ne)},function(ne){console.error("ARController: Failed to load ARCameraParam",ne)})};var Z=this.getUserMedia(F);return Z};var R=function(T,F,N){this.id=-1,this._src="",this.complete=!1,this.onload=F,this.onerror=N,T&&this.load(T)};R.prototype.load=function(T){if(this._src!=="")throw"ARCameraParam: Trying to load camera parameters twice.";if(this._src=T,T){var F=this;O.loadCamera(T,function(N){F.id=N,F.complete=!0,F.onload()},function(N){F.onerror(N)})}},Object.defineProperty(R.prototype,"src",{set:function(T){this.load(T)},get:function(){return this._src}}),R.prototype.dispose=function(){this.id!==-1&&O.deleteCamera(this.id),this.id=-1,this._src="",this.complete=!1};var O={UNKNOWN_MARKER:-1,PATTERN_MARKER:0,BARCODE_MARKER:1,loadCamera:z,addMarker:me,addMultiMarker:p},U=["setup","teardown","setLogLevel","getLogLevel","setDebugMode","getDebugMode","getProcessingImage","setMarkerInfoDir","setMarkerInfoVertex","getTransMatSquare","getTransMatSquareCont","getTransMatMultiSquare","getTransMatMultiSquareRobust","getMultiMarkerNum","getMultiMarkerCount","detectMarker","getMarkerNum","getMarker","getMultiEachMarker","setProjectionNearPlane","getProjectionNearPlane","setProjectionFarPlane","getProjectionFarPlane","setThresholdMode","getThresholdMode","setThreshold","getThreshold","setPatternDetectionMode","getPatternDetectionMode","setMatrixCodeType","getMatrixCodeType","setLabelingMode","getLabelingMode","setPattRatio","getPattRatio","setImageProcMode","getImageProcMode"];function w(){U.forEach(function(F){O[F]=Module[F]});for(var T in Module)T.match(/^AR/)&&(O[T]=Module[T])}var e=0;function me(T,F,N){var k="/marker_"+e++;Q(F,k,function(){var G=Module._addMarker(T,k);N&&N(G)})}function ie(T){return String.fromCharCode.apply(String,T)}function we(T){var F=ie(T),N=F.split(`
`),k=[],G=0;return N.forEach(function(Z){if(Z=Z.trim(),!(!Z||Z.startsWith("#")))switch(G){case 0:G=1;return;case 1:Z.match(/^\d+$/)||k.push(Z);case 2:case 3:case 4:G++;return;case 5:G=1;return}}),k}var P=0;function p(T,F,N){var k="/multi_marker_"+P++;Q(F,k,function(G){var Z=we(G);function ne(){var de=Module._addMultiMarker(T,k),oe=Module.getMultiMarkerNum(T,de);N&&N(de,oe)}if(!Z.length)return ne();var te=F.split("/").slice(0,-1).join("/");Z=Z.map(function(de){return de==="patt.hiro"||de==="patt.kanji"||de==="patt2.hiro"||de==="patt2.kanji"?["http://127.0.0.1:8080/data/data/"+de,de]:[te+"/"+de,de]}),V(Z,ne)})}var S=0;function z(T,F){var N="/camera_param_"+S++,k=function(){var G=Module._loadCamera(N);F&&F(G)};typeof T=="object"?D(N,T,k):T.indexOf(`
`)>-1?K(N,T,k):Q(T,N,k)}function K(T,F,N){for(var k=new Uint8Array(F.length),G=0;G<k.length;G++)k[G]=F.charCodeAt(G)&255;D(T,k,N)}function D(T,F,N){FS.writeFile(T,F,{encoding:"binary"}),N(F)}function Q(T,F,N){var k=new XMLHttpRequest;k.open("GET",T,!0),k.responseType="arraybuffer",k.onload=function(G){var Z=k.response,ne=new Uint8Array(Z);D(F,ne,N)},k.send()}function V(T,F){var N=T.pop();N?Q(N[0],N[1],function(){V(T,F)}):F()}window.artoolkit=O,window.ARController=_,window.ARCameraParam=R,window.Module?w():window.Module={onRuntimeInitialized:function(){w()}}}();var THREEx=THREEx||{};THREEx.ArBaseControls=function(_){this.id=THREEx.ArBaseControls.id++,this.object3d=_,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1},THREEx.ArBaseControls.id=0,Object.assign(THREEx.ArBaseControls.prototype,THREE.EventDispatcher.prototype),THREEx.ArBaseControls.prototype.update=function(){console.assert(!1,"you need to implement your own update")},THREEx.ArBaseControls.prototype.name=function(){return console.assert(!1,"you need to implement your own .name()"),"Not yet implemented - name()"};var THREEx=THREEx||{};THREEx.ARClickability=function(_){this._sourceElement=_;var R=parseInt(_.style.width),O=parseInt(_.style.height);this._cameraPicking=new THREE.PerspectiveCamera(42,R/O,.1,100),console.warn("THREEx.ARClickability works only in modelViewMatrix"),console.warn("OBSOLETE OBSOLETE! instead use THREEx.HitTestingPlane or THREEx.HitTestingTango")},THREEx.ARClickability.prototype.onResize=function(){var _=this._sourceElement,R=this._cameraPicking,O=parseInt(_.style.width),U=parseInt(_.style.height);R.aspect=O/U,R.updateProjectionMatrix()},THREEx.ARClickability.prototype.computeIntersects=function(_,R){var O=this._sourceElement,U=this._cameraPicking,w=new THREE.Vector3;w.x=_.layerX/parseInt(O.style.width)*2-1,w.y=-(_.layerY/parseInt(O.style.height))*2+1;var e=new THREE.Raycaster;e.setFromCamera(w,U);var me=e.intersectObjects(R);return me},THREEx.ARClickability.prototype.update=function(){};var THREEx=THREEx||{};THREEx.ArMarkerCloak=function(_){var S=new THREE.PlaneGeometry(1.55,2.1,1,8).translate(0,-.3,0),p=new THREE.ShaderMaterial({vertexShader:THREEx.ArMarkerCloak.vertexShader,fragmentShader:THREEx.ArMarkerCloak.fragmentShader,transparent:!0,uniforms:{texture:{value:_},opacity:{value:.5}},defines:{updateInShaderEnabled:1}}),R=new THREE.Mesh(S,p);R.rotation.x=-Math.PI/2,this.object3d=R;for(var O=-.65,U=.65,w=.65+.1,e=.95+.1,me=[[]],ie=0;ie<R.geometry.faces.length;ie++)me[0][ie]=[],me[0][ie][0]=new THREE.Vector2,me[0][ie][1]=new THREE.Vector2,me[0][ie][2]=new THREE.Vector2;for(var we=0;we<R.geometry.parameters.heightSegments/2;we++)me[0][we*4+0][0].set(O/2+.5,e/2+.5),me[0][we*4+0][1].set(O/2+.5,w/2+.5),me[0][we*4+0][2].set(U/2+.5,e/2+.5),me[0][we*4+1][0].set(O/2+.5,w/2+.5),me[0][we*4+1][1].set(U/2+.5,w/2+.5),me[0][we*4+1][2].set(U/2+.5,e/2+.5),me[0][we*4+2][0].set(O/2+.5,w/2+.5),me[0][we*4+2][1].set(O/2+.5,e/2+.5),me[0][we*4+2][2].set(U/2+.5,w/2+.5),me[0][we*4+3][0].set(O/2+.5,e/2+.5),me[0][we*4+3][1].set(U/2+.5,e/2+.5),me[0][we*4+3][2].set(U/2+.5,w/2+.5);R.geometry.faceVertexUvs=me,R.geometry.uvsNeedUpdate=!0;var P=[];P.push(new THREE.Vector3(O,e,0)),P.push(new THREE.Vector3(U,e,0)),P.push(new THREE.Vector3(O,w,0)),P.push(new THREE.Vector3(U,w,0));var p=new THREE.MeshNormalMaterial({transparent:!0,opacity:.5,side:THREE.DoubleSide}),S=new THREE.PlaneGeometry(1,1),z=new THREE.Mesh(S,p);this.orthoMesh=z,this.update=function(D,Q){K(D,Q)};return;function K(D,Q){var V=[];P.forEach(function(F,N){var k=F.clone();k.applyMatrix4(D),k.applyMatrix4(Q),k.x/=k.z,k.y/=k.z,V.push(k)});for(var T=0;T<V.length;T++)z.geometry.vertices[T].copy(V[T]);z.geometry.computeBoundingSphere(),z.geometry.verticesNeedUpdate=!0}},THREEx.ArMarkerCloak.markerSpaceShaderFunction=`
        vec2 transformUvToMarkerSpace(vec2 originalUv){
                vec3 transformedUv;
                // set transformedUv - from UV coord to clip coord
                transformedUv.x = originalUv.x * 2.0 - 1.0;
                transformedUv.y = originalUv.y * 2.0 - 1.0;
                transformedUv.z = 0.0;

		// apply modelViewMatrix and projectionMatrix
                transformedUv = (projectionMatrix * modelViewMatrix * vec4( transformedUv, 1.0 ) ).xyz;

		// apply perspective
		transformedUv.x /= transformedUv.z;
		transformedUv.y /= transformedUv.z;

                // set back from clip coord to Uv coord
                transformedUv.x = transformedUv.x / 2.0 + 0.5;
                transformedUv.y = transformedUv.y / 2.0 + 0.5;

                // return the result
                return transformedUv.xy;
        }`,THREEx.ArMarkerCloak.vertexShader=THREEx.ArMarkerCloak.markerSpaceShaderFunction+`	varying vec2 vUv;

	void main(){
                // pass the UV to the fragment
                #if (updateInShaderEnabled == 1)
		        vUv = transformUvToMarkerSpace(uv);
                #else
		        vUv = uv;
                #endif

                // compute gl_Position
		vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );
		gl_Position = projectionMatrix * mvPosition;
	}`,THREEx.ArMarkerCloak.fragmentShader=`
	varying vec2 vUv;
	uniform sampler2D texture;
	uniform float opacity;

	void main(void){
		vec3 color = texture2D( texture, vUv ).rgb;

		gl_FragColor = vec4( color, opacity);
	}`;var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkerControls=THREEx.ArMarkerControls=function(_,R,O){var U=this;THREEx.ArBaseControls.call(this,R),this.context=_,this.parameters={size:1,type:"unknown",patternUrl:null,barcodeValue:null,changeMatrixMode:"modelViewMatrix",minConfidence:.6,smooth:!1,smoothCount:5,smoothTolerance:.01,smoothThreshold:2};var w=["pattern","barcode","unknown"];console.assert(w.indexOf(this.parameters.type)!==-1,"illegal value",this.parameters.type);var w=["modelViewMatrix","cameraTransformMatrix"];console.assert(w.indexOf(this.parameters.changeMatrixMode)!==-1,"illegal value",this.parameters.changeMatrixMode),this.object3d=R,this.object3d.matrixAutoUpdate=!1,this.object3d.visible=!1,e(O);function e(me){if(me!==void 0)for(var ie in me){var we=me[ie];if(we===void 0){console.warn("THREEx.ArMarkerControls: '"+ie+"' parameter is undefined.");continue}var P=U.parameters[ie];if(P===void 0){console.warn("THREEx.ArMarkerControls: '"+ie+"' is not a property of this material.");continue}U.parameters[ie]=we}}this.parameters.smooth&&(this.smoothMatrices=[]),_.addMarker(this),U.context.parameters.trackingBackend==="artoolkit"?this._initArtoolkit():U.context.parameters.trackingBackend==="aruco"?this._arucoPosit=new POS.Posit(this.parameters.size,U.context.arucoContext.canvas.width):U.context.parameters.trackingBackend==="tango"?this._initTango():console.assert(!1)},ARjs.MarkerControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkerControls.prototype.constructor=THREEx.ArMarkerControls,ARjs.MarkerControls.prototype.dispose=function(){this.context.removeMarker(this)},ARjs.MarkerControls.prototype.updateWithModelViewMatrix=function(_){var R=this.object3d;if(R.visible=!0,this.context.parameters.trackingBackend==="artoolkit"){var O=new THREE.Matrix4().copy(this.context._artoolkitProjectionAxisTransformMatrix);O.multiply(_),_.copy(O)}else this.context.parameters.trackingBackend==="aruco"||this.context.parameters.trackingBackend==="tango"||console.assert(!1);if(this.context.parameters.trackingBackend!=="tango"){var U=new THREE.Matrix4().makeRotationX(Math.PI/2);_.multiply(U)}var w=!1;if(this.parameters.changeMatrixMode==="modelViewMatrix")if(this.parameters.smooth){var e,me,ie,we,P=0;if(this.smoothMatrices.push(_.elements.slice()),this.smoothMatrices.length<this.parameters.smoothCount+1)R.matrix.copy(_);else{this.smoothMatrices.shift(),we=[];for(me in _.elements){e=0;for(ie in this.smoothMatrices)e+=this.smoothMatrices[ie][me];we[me]=e/this.parameters.smoothCount,Math.abs(we[me]-_.elements[me])>=this.parameters.smoothTolerance&&P++}if(P>=this.parameters.smoothThreshold){for(me in _.elements)_.elements[me]=we[me];R.matrix.copy(_),w=!0}}}else R.matrix.copy(_);else this.parameters.changeMatrixMode==="cameraTransformMatrix"?R.matrix.getInverse(_):console.assert(!1);return R.matrix.decompose(R.position,R.quaternion,R.scale),this.dispatchEvent({type:"markerFound"}),w},ARjs.MarkerControls.prototype.name=function(){var _="";if(_+=this.parameters.type,this.parameters.type==="pattern"){var R=this.parameters.patternUrl,O=R.replace(/^.*\//g,"");_+=" - "+O}else this.parameters.type==="barcode"?_+=" - "+this.parameters.barcodeValue:console.assert(!1,"no .name() implemented for this marker controls");return _},ARjs.MarkerControls.prototype._initArtoolkit=function(){var _=this,R=null,O=setInterval(function(){var e=_.context.arController;e!==null&&(clearInterval(O),O=null,U())},1e3/50);return;function U(){var e=_.context.arController;console.assert(e!==null),_.parameters.type==="pattern"?e.loadMarker(_.parameters.patternUrl,function(me){R=me,e.trackPatternMarkerId(R,_.parameters.size)}):_.parameters.type==="barcode"?(R=_.parameters.barcodeValue,e.trackBarcodeMarkerId(R,_.parameters.size)):_.parameters.type==="unknown"?R=null:console.log(!1,"invalid marker type",_.parameters.type),e.addEventListener("getMarker",function(me){if(me.data.type===artoolkit.PATTERN_MARKER&&_.parameters.type==="pattern"){if(R===null)return;me.data.marker.idPatt===R&&w(me)}else if(me.data.type===artoolkit.BARCODE_MARKER&&_.parameters.type==="barcode"){if(R===null)return;me.data.marker.idMatrix===R&&w(me)}else me.data.type===artoolkit.UNKNOWN_MARKER&&_.parameters.type==="unknown"&&w(me)})}function w(e){if(!(e.data.type===artoolkit.PATTERN_MARKER&&e.data.marker.cfPatt<_.parameters.minConfidence)&&!(e.data.type===artoolkit.BARCODE_MARKER&&e.data.marker.cfMatt<_.parameters.minConfidence)){var me=new THREE.Matrix4().fromArray(e.data.matrix);_.updateWithModelViewMatrix(me)}}},ARjs.MarkerControls.prototype._initAruco=function(){this._arucoPosit=new POS.Posit(this.parameters.size,_this.context.arucoContext.canvas.width)},ARjs.MarkerControls.prototype._initTango=function(){console.log("init tango ArMarkerControls")};var THREEx=THREEx||{};THREEx.ArMarkerHelper=function(_){this.object3d=new THREE.Group;var ie=new THREE.AxesHelper;this.object3d.add(ie);var R=_.id,O=document.createElement("canvas");O.width=64,O.height=64;var U=O.getContext("2d"),w=new THREE.CanvasTexture(O);U.font="48px monospace",U.fillStyle="rgba(192,192,255, 0.5)",U.fillRect(0,0,O.width,O.height),U.fillStyle="darkblue",U.fillText(R,O.width/4,3*O.height/4),w.needsUpdate=!0;var e=new THREE.PlaneGeometry(1,1),me=new THREE.MeshBasicMaterial({map:w,transparent:!0}),ie=new THREE.Mesh(e,me);ie.rotation.x=-Math.PI/2,this.object3d.add(ie)};var THREEx=THREEx||{};THREEx.ArSmoothedControls=function(_,R){var O=this;THREEx.ArBaseControls.call(this,_),this.object3d.visible=!1,this._lastLerpStepAt=null,this._visibleStartedAt=null,this._unvisibleStartedAt=null,R=R||{},this.parameters={lerpPosition:.8,lerpQuaternion:.2,lerpScale:.7,lerpStepDelay:1/60,minVisibleDelay:0,minUnvisibleDelay:.2},U(R);function U(w){if(w!==void 0)for(var e in w){var me=w[e];if(me===void 0){console.warn("THREEx.ArSmoothedControls: '"+e+"' parameter is undefined.");continue}var ie=O.parameters[e];if(ie===void 0){console.warn("THREEx.ArSmoothedControls: '"+e+"' is not a property of this material.");continue}O.parameters[e]=me}}},THREEx.ArSmoothedControls.prototype=Object.create(THREEx.ArBaseControls.prototype),THREEx.ArSmoothedControls.prototype.constructor=THREEx.ArSmoothedControls,THREEx.ArSmoothedControls.prototype.update=function(_){var R=this.object3d,O=this.parameters,U=R.visible,w=performance.now()/1e3;if(_.visible===!1&&(this._visibleStartedAt=null),_.visible===!0&&(this._unvisibleStartedAt=null),_.visible===!0&&this._visibleStartedAt===null&&(this._visibleStartedAt=w),_.visible===!1&&this._unvisibleStartedAt===null&&(this._unvisibleStartedAt=w),U===!1&&_.visible===!0){var e=w-this._visibleStartedAt;e>=this.parameters.minVisibleDelay&&(R.visible=!0,P())}if(U===!0&&_.visible===!1){var me=w-this._unvisibleStartedAt;me>=this.parameters.minUnvisibleDelay&&(R.visible=!1)}if(this._lastLerpStepAt===null)p(),this._lastLerpStepAt=w;else for(var ie=Math.floor((w-this._lastLerpStepAt)/this.parameters.lerpStepDelay),we=0;we<ie;we++)p(),this._lastLerpStepAt+=this.parameters.lerpStepDelay;this.object3d.updateMatrix(),U===!1&&R.visible===!0&&this.dispatchEvent({type:"becameVisible"}),U===!0&&R.visible===!1&&this.dispatchEvent({type:"becameUnVisible"});return;function P(){R.position.copy(_.position),R.quaternion.copy(_.quaternion),R.scale.copy(_.scale)}function p(){R.position.lerp(_.position,O.lerpPosition),R.quaternion.slerp(_.quaternion,O.lerpQuaternion),R.scale.lerp(_.scale,O.lerpScale)}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Context=THREEx.ArToolkitContext=function(_){var R=this;R._updatedAt=null,this.parameters={trackingBackend:"artoolkit",debug:!1,detectionMode:"mono",matrixCodeType:"3x3",cameraParametersUrl:ARjs.Context.baseURL+"parameters/camera_para.dat",maxDetectionRate:60,canvasWidth:640,canvasHeight:480,patternRatio:.5,labelingMode:"black_region",imageSmoothingEnabled:!1},console.assert(["artoolkit","aruco"].indexOf(this.parameters.trackingBackend)!==-1,"invalid parameter trackingBackend",this.parameters.trackingBackend),console.assert(["color","color_and_matrix","mono","mono_and_matrix"].indexOf(this.parameters.detectionMode)!==-1,"invalid parameter detectionMode",this.parameters.detectionMode),console.assert(["black_region","white_region"].indexOf(this.parameters.labelingMode)!==-1,"invalid parameter labelingMode",this.parameters.labelingMode),this.arController=null,this.arucoContext=null,R.initialized=!1,this._arMarkersControls=[],O(_);function O(U){if(U!==void 0)for(var w in U){var e=U[w];if(e===void 0){console.warn("THREEx.ArToolkitContext: '"+w+"' parameter is undefined.");continue}var me=R.parameters[w];if(me===void 0){console.warn("THREEx.ArToolkitContext: '"+w+"' is not a property of this material.");continue}R.parameters[w]=e}}},Object.assign(ARjs.Context.prototype,THREE.EventDispatcher.prototype),ARjs.Context.baseURL="https://jeromeetienne.github.io/AR.js/three.js/",ARjs.Context.REVISION="2.2.2",ARjs.Context.createDefaultCamera=function(_){if(console.assert(!1,"use ARjs.Utils.createDefaultCamera instead"),_==="artoolkit")var R=new THREE.Camera;else if(_==="aruco")var R=new THREE.PerspectiveCamera(42,renderer.domElement.width/renderer.domElement.height,.01,100);else console.assert(!1);return R},ARjs.Context.prototype.init=function(_){var R=this;this.parameters.trackingBackend==="artoolkit"?this._initArtoolkit(O):this.parameters.trackingBackend==="aruco"?this._initAruco(O):console.assert(!1);return;function O(){R.dispatchEvent({type:"initialized"}),R.initialized=!0,_&&_()}},ARjs.Context.prototype.update=function(_){if(this.parameters.trackingBackend==="artoolkit"&&this.arController===null)return!1;var R=performance.now();return this._updatedAt!==null&&R-this._updatedAt<1e3/this.parameters.maxDetectionRate?!1:(this._updatedAt=R,this._arMarkersControls.forEach(function(O){O.object3d.visible=!1}),this.parameters.trackingBackend==="artoolkit"?this._updateArtoolkit(_):this.parameters.trackingBackend==="aruco"?this._updateAruco(_):console.assert(!1),this.dispatchEvent({type:"sourceProcessed"}),!0)},ARjs.Context.prototype.addMarker=function(_){console.assert(_ instanceof THREEx.ArMarkerControls),this._arMarkersControls.push(_)},ARjs.Context.prototype.removeMarker=function(_){console.assert(_ instanceof THREEx.ArMarkerControls);var R=this.arMarkerControlss.indexOf(artoolkitMarker);console.assert(R!==R),this._arMarkersControls.splice(R,1)},ARjs.Context.prototype._initArtoolkit=function(_){var R=this;this._artoolkitProjectionAxisTransformMatrix=new THREE.Matrix4,this._artoolkitProjectionAxisTransformMatrix.multiply(new THREE.Matrix4().makeRotationY(Math.PI)),this._artoolkitProjectionAxisTransformMatrix.multiply(new THREE.Matrix4().makeRotationZ(Math.PI));var O=new ARCameraParam(R.parameters.cameraParametersUrl,function(){var U=new ARController(R.parameters.canvasWidth,R.parameters.canvasHeight,O);R.arController=U,U.ctx.mozImageSmoothingEnabled=R.parameters.imageSmoothingEnabled,U.ctx.webkitImageSmoothingEnabled=R.parameters.imageSmoothingEnabled,U.ctx.msImageSmoothingEnabled=R.parameters.imageSmoothingEnabled,U.ctx.imageSmoothingEnabled=R.parameters.imageSmoothingEnabled,R.parameters.debug===!0&&(U.debugSetup(),U.canvas.style.position="absolute",U.canvas.style.top="0px",U.canvas.style.opacity="0.6",U.canvas.style.pointerEvents="none",U.canvas.style.zIndex="-1");var w={color:artoolkit.AR_TEMPLATE_MATCHING_COLOR,color_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_COLOR_AND_MATRIX,mono:artoolkit.AR_TEMPLATE_MATCHING_MONO,mono_and_matrix:artoolkit.AR_TEMPLATE_MATCHING_MONO_AND_MATRIX},e=w[R.parameters.detectionMode];console.assert(e!==void 0),U.setPatternDetectionMode(e);var me={"3x3":artoolkit.AR_MATRIX_CODE_3x3,"3x3_HAMMING63":artoolkit.AR_MATRIX_CODE_3x3_HAMMING63,"3x3_PARITY65":artoolkit.AR_MATRIX_CODE_3x3_PARITY65,"4x4":artoolkit.AR_MATRIX_CODE_4x4,"4x4_BCH_13_9_3":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_9_3,"4x4_BCH_13_5_5":artoolkit.AR_MATRIX_CODE_4x4_BCH_13_5_5},ie=me[R.parameters.matrixCodeType];console.assert(ie!==void 0),U.setMatrixCodeType(ie),U.setPattRatio(R.parameters.patternRatio);var we={black_region:artoolkit.AR_LABELING_BLACK_REGION,white_region:artoolkit.AR_LABELING_WHITE_REGION},P=we[R.parameters.labelingMode];console.assert(P!==void 0),U.setLabelingMode(P),_()});return this},ARjs.Context.prototype.getProjectionMatrix=function(_){console.assert(this.parameters.trackingBackend==="artoolkit"),console.assert(this.arController,"arController MUST be initialized to call this function");var R=this.arController.getCameraMatrix(),O=new THREE.Matrix4().fromArray(R);return O.multiply(this._artoolkitProjectionAxisTransformMatrix),O},ARjs.Context.prototype._updateArtoolkit=function(_){this.arController.process(_)},ARjs.Context.prototype._initAruco=function(_){this.arucoContext=new THREEx.ArucoContext,this.arucoContext.canvas.width=this.parameters.canvasWidth,this.arucoContext.canvas.height=this.parameters.canvasHeight;var R=this.arucoContext.canvas.getContext("2d");R.webkitImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,R.msImageSmoothingEnabled=this.parameters.imageSmoothingEnabled,R.imageSmoothingEnabled=this.parameters.imageSmoothingEnabled,setTimeout(function(){_()},0)},ARjs.Context.prototype._updateAruco=function(_){var R=this,O=this._arMarkersControls,U=this.arucoContext.detect(_);U.forEach(function(w){for(var e=null,me=0;me<O.length;me++)if(console.assert(O[me].parameters.type==="barcode"),O[me].parameters.barcodeValue===w.id){e=O[me];break}if(e!==null){var ie=new THREE.Object3D;R.arucoContext.updateObject3D(ie,e._arucoPosit,e.parameters.size,w),ie.updateMatrix(),e.updateWithModelViewMatrix(ie.matrix)}})};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Profile=THREEx.ArToolkitProfile=function(){this.reset(),this.performance("default")},ARjs.Profile.prototype._guessPerformanceLabel=function(){var _=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i));return _===!0?"phone-normal":"desktop-normal"},ARjs.Profile.prototype.reset=function(){return this.sourceParameters={sourceType:"webcam"},this.contextParameters={cameraParametersUrl:THREEx.ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono",labelingMode:"black_region"},this.defaultMarkerParameters={type:"pattern",patternUrl:THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",changeMatrixMode:"modelViewMatrix"},this},ARjs.Profile.prototype.performance=function(_){return _==="default"&&(_=this._guessPerformanceLabel()),_==="desktop-fast"?(this.contextParameters.canvasWidth=640*3,this.contextParameters.canvasHeight=480*3,this.contextParameters.maxDetectionRate=30):_==="desktop-normal"?(this.contextParameters.canvasWidth=640,this.contextParameters.canvasHeight=480,this.contextParameters.maxDetectionRate=60):_==="phone-normal"?(this.contextParameters.canvasWidth=80*4,this.contextParameters.canvasHeight=60*4,this.contextParameters.maxDetectionRate=30):_==="phone-slow"?(this.contextParameters.canvasWidth=80*3,this.contextParameters.canvasHeight=60*3,this.contextParameters.maxDetectionRate=30):console.assert(!1,"unknonwn label "+_),this},ARjs.Profile.prototype.defaultMarker=function(_){return _=_||this.contextParameters.trackingBackend,_==="artoolkit"?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="pattern",this.defaultMarkerParameters.patternUrl=THREEx.ArToolkitContext.baseURL+"../data/data/patt.hiro",this.contextParameters.labelingMode="black_region"):_==="aruco"?(this.contextParameters.detectionMode="mono",this.defaultMarkerParameters.type="barcode",this.defaultMarkerParameters.barcodeValue=1001,this.contextParameters.labelingMode="black_region"):console.assert(!1),this},ARjs.Profile.prototype.sourceWebcam=function(){return this.sourceParameters.sourceType="webcam",delete this.sourceParameters.sourceUrl,this},ARjs.Profile.prototype.sourceVideo=function(_){return this.sourceParameters.sourceType="video",this.sourceParameters.sourceUrl=_,this},ARjs.Profile.prototype.sourceImage=function(_){return this.sourceParameters.sourceType="image",this.sourceParameters.sourceUrl=_,this},ARjs.Profile.prototype.trackingBackend=function(_){return console.warn("stop profile.trackingBackend() obsolete function. use .trackingMethod instead"),this.contextParameters.trackingBackend=_,this},ARjs.Profile.prototype.changeMatrixMode=function(_){return this.defaultMarkerParameters.changeMatrixMode=_,this},ARjs.Profile.prototype.trackingMethod=function(_){var R=ARjs.Utils.parseTrackingMethod(_);return this.defaultMarkerParameters.markersAreaEnabled=R.markersAreaEnabled,this.contextParameters.trackingBackend=R.trackingBackend,this},ARjs.Profile.prototype.checkIfValid=function(){return this};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.Source=THREEx.ArToolkitSource=function(_){var R=this;this.ready=!1,this.domElement=null,this.parameters={sourceType:"webcam",sourceUrl:null,deviceId:null,sourceWidth:640,sourceHeight:480,displayWidth:640,displayHeight:480},O(_);function O(U){if(U!==void 0)for(var w in U){var e=U[w];if(e===void 0){console.warn("THREEx.ArToolkitSource: '"+w+"' parameter is undefined.");continue}var me=R.parameters[w];if(me===void 0){console.warn("THREEx.ArToolkitSource: '"+w+"' is not a property of this material.");continue}R.parameters[w]=e}}},ARjs.Source.prototype.init=function(_,R){var O=this;if(this.parameters.sourceType==="image")var U=this._initSourceImage(w,R);else if(this.parameters.sourceType==="video")var U=this._initSourceVideo(w,R);else if(this.parameters.sourceType==="webcam")var U=this._initSourceWebcam(w,R);else console.assert(!1);return this.domElement=U,this.domElement.style.position="absolute",this.domElement.style.top="0px",this.domElement.style.left="0px",this.domElement.style.zIndex="-2",this.domElement.setAttribute("id","arjs-video"),this;function w(){document.body.appendChild(O.domElement),window.dispatchEvent(new CustomEvent("arjs-video-loaded",{detail:{component:document.querySelector("#arjs-video")}})),O.ready=!0,_&&_()}},ARjs.Source.prototype._initSourceImage=function(_){var R=document.createElement("img");return R.src=this.parameters.sourceUrl,R.width=this.parameters.sourceWidth,R.height=this.parameters.sourceHeight,R.style.width=this.parameters.displayWidth+"px",R.style.height=this.parameters.displayHeight+"px",R.onload=_,R},ARjs.Source.prototype._initSourceVideo=function(_){var R=document.createElement("video");return R.src=this.parameters.sourceUrl,R.style.objectFit="initial",R.autoplay=!0,R.webkitPlaysinline=!0,R.controls=!1,R.loop=!0,R.muted=!0,document.body.addEventListener("click",function O(){document.body.removeEventListener("click",O),R.play()}),R.width=this.parameters.sourceWidth,R.height=this.parameters.sourceHeight,R.style.width=this.parameters.displayWidth+"px",R.style.height=this.parameters.displayHeight+"px",R.onloadeddata=_,R},ARjs.Source.prototype._initSourceWebcam=function(_,R){var O=this;R=R||function(e){alert(`Webcam Error
Name: `+e.name+`
Message: `+e.message);var me=new CustomEvent("camera-error",{error:e});window.dispatchEvent(me)};var U=document.createElement("video");if(U.setAttribute("autoplay",""),U.setAttribute("muted",""),U.setAttribute("playsinline",""),U.style.width=this.parameters.displayWidth+"px",U.style.height=this.parameters.displayHeight+"px",navigator.mediaDevices===void 0||navigator.mediaDevices.enumerateDevices===void 0||navigator.mediaDevices.getUserMedia===void 0){if(navigator.mediaDevices===void 0)var w="navigator.mediaDevices";else if(navigator.mediaDevices.enumerateDevices===void 0)var w="navigator.mediaDevices.enumerateDevices";else if(navigator.mediaDevices.getUserMedia===void 0)var w="navigator.mediaDevices.getUserMedia";else console.assert(!1);return R({name:"",message:"WebRTC issue-! "+w+" not present in your browser"}),null}return navigator.mediaDevices.enumerateDevices().then(function(e){var me={audio:!1,video:{facingMode:"environment",width:{ideal:O.parameters.sourceWidth},height:{ideal:O.parameters.sourceHeight}}};O.parameters.deviceId!==null&&(me.video.deviceId={exact:O.parameters.deviceId}),navigator.mediaDevices.getUserMedia(me).then(function(we){U.srcObject=we;var P=new CustomEvent("camera-init",{stream:we});window.dispatchEvent(P),document.body.addEventListener("click",function(){U.play()}),_()}).catch(function(ie){R({name:ie.name,message:ie.message})})}).catch(function(e){R({message:e.message})}),U},ARjs.Source.prototype.hasMobileTorch=function(){var _=arToolkitSource.domElement.srcObject;if(!(_ instanceof MediaStream))return!1;this._currentTorchStatus===void 0&&(this._currentTorchStatus=!1);var R=_.getVideoTracks()[0];if(R.getCapabilities===void 0)return!1;var O=R.getCapabilities();return!!O.torch},ARjs.Source.prototype.toggleMobileTorch=function(){console.assert(this.hasMobileTorch()===!0);var _=arToolkitSource.domElement.srcObject;if(!(_ instanceof MediaStream)){alert("enabling mobile torch is available only on webcam");return}this._currentTorchStatus===void 0&&(this._currentTorchStatus=!1);var R=_.getVideoTracks()[0],O=R.getCapabilities();if(!O.torch){alert("no mobile torch is available on your camera");return}this._currentTorchStatus=this._currentTorchStatus===!1,R.applyConstraints({advanced:[{torch:this._currentTorchStatus}]}).catch(function(U){console.log(U)})},ARjs.Source.prototype.domElementWidth=function(){return parseInt(this.domElement.style.width)},ARjs.Source.prototype.domElementHeight=function(){return parseInt(this.domElement.style.height)},ARjs.Source.prototype.onResizeElement=function(){var _=window.innerWidth,R=window.innerHeight;if(console.assert(arguments.length===0),this.domElement.nodeName==="IMG")var O=this.domElement.naturalWidth,U=this.domElement.naturalHeight;else if(this.domElement.nodeName==="VIDEO")var O=this.domElement.videoWidth,U=this.domElement.videoHeight;else console.assert(!1);var w=O/U,e=_/R;if(e<w){var me=w*R;this.domElement.style.width=me+"px",this.domElement.style.marginLeft=-(me-_)/2+"px",this.domElement.style.height=R+"px",this.domElement.style.marginTop="0px"}else{var ie=1/(w/_);this.domElement.style.height=ie+"px",this.domElement.style.marginTop=-(ie-R)/2+"px",this.domElement.style.width=_+"px",this.domElement.style.marginLeft="0px"}},ARjs.Source.prototype.copyElementSizeTo=function(_){window.innerWidth>window.innerHeight?(_.style.width=this.domElement.style.width,_.style.height=this.domElement.style.height,_.style.marginLeft=this.domElement.style.marginLeft,_.style.marginTop=this.domElement.style.marginTop):(_.style.height=this.domElement.style.height,_.style.width=parseInt(_.style.height)*4/3+"px",_.style.marginLeft=(window.innerWidth-parseInt(_.style.width))/2+"px",_.style.marginTop=0)},ARjs.Source.prototype.copySizeTo=function(){console.warn("obsolete function arToolkitSource.copySizeTo. Use arToolkitSource.copyElementSizeTo"),this.copyElementSizeTo.apply(this,arguments)},ARjs.Source.prototype.onResize=function(_,R,O){if(arguments.length!==3)return console.warn("obsolete function arToolkitSource.onResize. Use arToolkitSource.onResizeElement"),this.onResizeElement.apply(this,arguments);var U=_.parameters.trackingBackend;if(U==="artoolkit"){this.onResizeElement();var w=!!R.domElement.dataset.aframeCanvas;w===!1&&this.copyElementSizeTo(R.domElement),_.arController!==null&&this.copyElementSizeTo(_.arController.canvas)}else U==="aruco"?(this.onResizeElement(),this.copyElementSizeTo(R.domElement),this.copyElementSizeTo(_.arucoContext.canvas)):console.assert(!1,"unhandled trackingBackend "+U);U==="artoolkit"?_.arController!==null&&O.projectionMatrix.copy(_.getProjectionMatrix()):U==="aruco"?(O.aspect=R.domElement.width/R.domElement.height,O.updateProjectionMatrix()):console.assert(!1,"unhandled trackingBackend "+U)};var THREEx=THREEx||{};THREEx.ArVideoInWebgl=function(_){var R=new THREE.PlaneGeometry(2,2),O=new THREE.MeshBasicMaterial({map:_}),U=new THREE.Mesh(R,O);this.object3d=U,this.update=function(w){w.updateMatrixWorld(!0);var e=new THREE.Vector3(-0,0,-20),e=new THREE.Vector3(-0,0,-20);U.position.copy(e),w.localToWorld(U.position),w.matrixWorld.decompose(w.position,w.quaternion,w.scale),U.quaternion.copy(w.quaternion);var me=THREE.Math.radToDeg(Math.atan(1/w.projectionMatrix.elements[5]))*2,ie=parseFloat(arToolkitSource.domElement.style.width.replace(/px$/,""),10),we=parseFloat(arToolkitSource.domElement.style.height.replace(/px$/,""),10),P=ie/we;U.scale.y=Math.tan(THREE.Math.DEG2RAD*me/2)*e.length(),U.scale.x=U.scale.y*P}};var THREEx=THREEx||{};THREEx.HitTestingPlane=function(_){this._sourceElement=_,this._pickingScene=new THREE.Scene;var R=new THREE.PlaneGeometry(20,20,19,19).rotateX(-Math.PI/2),O=new THREE.MeshBasicMaterial({wireframe:!0});this._pickingPlane=new THREE.Mesh(R,O),this._pickingScene.add(this._pickingPlane);var U=parseInt(_.style.width),w=parseInt(_.style.height);this._pickingCamera=new THREE.PerspectiveCamera(42,U/w,.1,30)},THREEx.HitTestingPlane.prototype.update=function(_,R,O){if(this.onResize(),O==="modelViewMatrix"){var U=this._pickingPlane;R.parent.updateMatrixWorld(),U.matrix.copy(R.parent.matrixWorld),U.matrix.decompose(U.position,U.quaternion,U.scale)}else if(O==="cameraTransformMatrix"){var w=this._pickingCamera;_.updateMatrixWorld(),w.matrix.copy(_.matrixWorld),w.matrix.decompose(w.position,w.quaternion,w.scale)}else console.assert(!1)},THREEx.HitTestingPlane.prototype.onResize=function(){var _=this._sourceElement,R=this._pickingCamera,O=parseInt(_.style.width),U=parseInt(_.style.height);R.aspect=O/U,R.updateProjectionMatrix()},THREEx.HitTestingPlane.prototype.test=function(_,R){_=(_-.5)*2,R=-(R-.5)*2,this._pickingScene.updateMatrixWorld(!0);var O=new THREE.Raycaster,U=new THREE.Vector3(_,R,1);O.setFromCamera(U,this._pickingCamera);var w=O.intersectObjects([this._pickingPlane]);if(w.length===0)return null;var e=this._pickingPlane.worldToLocal(w[0].point.clone()),me=new THREE.Quaternion,ie=new THREE.Vector3(1,1,1);return{position:e,quaternion:me,scale:ie}},THREEx.HitTestingPlane.prototype.renderDebug=function(_){_.render(this._pickingScene,this._pickingCamera)};var ARjs=ARjs||{};ARjs.Anchor=function(_,R){var O=this,U=_.arContext,w=_.parameters.scene,e=_.parameters.camera;this.arSession=_,this.parameters=R,console.log("ARjs.Anchor -","changeMatrixMode:",this.parameters.changeMatrixMode,"/ markersAreaEnabled:",R.markersAreaEnabled);var me=new THREE.Group;if(w.add(me),R.changeMatrixMode==="modelViewMatrix")var ie=me;else if(R.changeMatrixMode==="cameraTransformMatrix")var ie=e;else console.assert(!1);if(R.markersAreaEnabled===!1){var we=new THREEx.ArMarkerControls(U,ie,R);this.controls=we}else{if(console.assert(U.parameters.trackingBackend==="artoolkit"||U.parameters.trackingBackend==="aruco"),location.hash.substring(1).startsWith("markers-page-resolution=")===!0){var P=location.hash.substring(1),p=P.match(/markers-page-resolution=(\d+)x(\d+)/);console.assert(p.length===3);var S=parseInt(p[1]),z=parseInt(p[2]),U=_.arContext;ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution(U.parameters.trackingBackend,S,z)}localStorage.getItem("ARjsMultiMarkerFile")===null&&ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(U.parameters.trackingBackend),console.assert(localStorage.getItem("ARjsMultiMarkerFile")!==null);var K=localStorage.getItem("ARjsMultiMarkerFile");if(R.changeMatrixMode==="modelViewMatrix")var D=w;else if(R.changeMatrixMode==="cameraTransformMatrix")var D=e;else console.assert(!1);var Q=ARjs.MarkersAreaControls.fromJSON(U,D,ie,K);this.controls=Q,Q.parameters.changeMatrixMode=R.changeMatrixMode;var V=[];Q.subMarkersControls.forEach(function(N){var k=new THREEx.ArMarkerHelper(N);k.object3d.visible=!1,N.object3d.add(k.object3d),V.push(k)}),this.markersArea={},this.markersArea.setSubMarkersVisibility=function(N){V.forEach(function(k){k.object3d.visible=N})}}this.object3d=new THREE.Group;{var T=new THREE.Group;w.add(T);var F=new THREEx.ArSmoothedControls(T);T.add(this.object3d)}this.update=function(){O.object3d.visible=O.object3d.parent.visible,F!==void 0&&(Q!==void 0&&Q.updateSmoothedControls(F),F.update(me))}};var ARjs=ARjs||{};ARjs.SessionDebugUI=function(_){var R=_.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="block",this.domElement.style.padding="0.5em",this.domElement.style.position="fixed",this.domElement.style.left="5px",this.domElement.style.bottom="10px",this.domElement.style.textAlign="right";var O=document.createElement("span");O.style.display="block",O.innerHTML="<b>trackingBackend</b> : "+R,this.domElement.appendChild(O)},ARjs.SessionDebugUI.AugmentedWebsiteURL="https://webxr.io/augmented-website",ARjs.AnchorDebugUI=function(_){var R=_.arSession,O=R.arContext.parameters.trackingBackend;this.domElement=document.createElement("div"),this.domElement.style.color="rgba(0,0,0,0.9)",this.domElement.style.backgroundColor="rgba(127,127,127,0.5)",this.domElement.style.display="inline-block",this.domElement.style.padding="0.5em",this.domElement.style.margin="0.5em",this.domElement.style.textAlign="left";var U=document.createElement("span");if(U.style.display="block",U.style.padding="0.5em",U.style.color="rgba(0,0,0,0.9)",U.style.backgroundColor="rgba(127,127,127,0.5)",U.style.position="fixed",U.style.left="5px",U.style.bottom="40px",this.domElement.appendChild(U),U.innerHTML="<b>markersAreaEnabled</b> :"+_.parameters.markersAreaEnabled,_.parameters.markersAreaEnabled){var U=document.createElement("button");U.style.display="block",this.domElement.style.padding="0.5em",this.domElement.style.position="fixed",this.domElement.style.textAlign="left",this.domElement.appendChild(U),U.id="buttonToggleMarkerHelpers",U.innerHTML="toggle-marker-helper",U.href="javascript:void(0)";var w=!1;U.addEventListener("click",function(){w=!w,_.markersArea.setSubMarkersVisibility(w)})}if(_.parameters.markersAreaEnabled){var U=document.createElement("button");U.style.display="block",this.domElement.appendChild(U),U.id="buttonMarkersAreaLearner",U.innerHTML="Learn-new-marker-area",U.href="javascript:void(0)",U.addEventListener("click",function(){if(ARjs.AnchorDebugUI.MarkersAreaLearnerURL!==null)var me=ARjs.AnchorDebugUI.MarkersAreaLearnerURL;else var me=ARjs.Context.baseURL+"examples/multi-markers/examples/learner.html";ARjs.MarkersAreaUtils.navigateToLearnerPage(me,O)})}if(_.parameters.markersAreaEnabled){var U=document.createElement("button");U.style.display="block",this.domElement.appendChild(U),U.id="buttonMarkersAreaReset",U.innerHTML="Reset-marker-area",U.href="javascript:void(0)",U.addEventListener("click",function(){ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile(O),location.reload()})}},ARjs.AnchorDebugUI.MarkersAreaLearnerURL=null;var ARjs=ARjs||{};ARjs.HitTesting=function(_){var R=this,O=_.arContext;O.parameters.trackingBackend,this.enabled=!0,this._arSession=_,this._hitTestingPlane=null,R._hitTestingPlane=new THREEx.HitTestingPlane(_.arSource.domElement)},ARjs.HitTesting.prototype.update=function(_,R,O){this.enabled!==!1&&(this._hitTestingPlane!==null?this._hitTestingPlane.update(_,R,O):console.assert(!1))},ARjs.HitTesting.prototype.testDomEvent=function(_){this._arSession.arContext.parameters.trackingBackend;var R=this._arSession.arSource;if(this.enabled===!1)return[];var O=_.clientX/R.domElementWidth(),U=_.clientY/R.domElementHeight();return this.test(O,U)},ARjs.HitTesting.prototype.test=function(_,R){var O=this._arSession.arContext;O.parameters.trackingBackend;var U=[];if(this.enabled===!1)return[];var w=this._hitTestingPlane.test(_,R);if(w===null)return U;var e=new ARjs.HitTesting.Result(w.position,w.quaternion,w.scale);return U.push(e),U},ARjs.HitTesting.Result=function(_,R,O){this.position=_,this.quaternion=R,this.scale=O},ARjs.HitTesting.Result.prototype.apply=function(_){_.position.copy(this.position),_.quaternion.copy(this.quaternion),_.scale.copy(this.scale),_.updateMatrix()},ARjs.HitTesting.Result.prototype.applyPosition=function(_){return _.position.copy(this.position),_.updateMatrix(),this},ARjs.HitTesting.Result.prototype.applyQuaternion=function(_){return _.quaternion.copy(this.quaternion),_.updateMatrix(),this};var ARjs=ARjs||{};ARjs.Session=function(_){var R=this;this.parameters={renderer:null,camera:null,scene:null,sourceParameters:{},contextParameters:{}},O(_);function O(e){if(e!==void 0)for(var me in e){var ie=e[me];if(ie===void 0){console.warn("THREEx.Session: '"+me+"' parameter is undefined.");continue}var we=R.parameters[me];if(we===void 0){console.warn("THREEx.Session: '"+me+"' is not a property of this material.");continue}R.parameters[me]=ie}}console.assert(this.parameters.renderer instanceof THREE.WebGLRenderer),console.assert(this.parameters.camera instanceof THREE.Camera),console.assert(this.parameters.scene instanceof THREE.Scene),Object.defineProperty(this,"renderer",{get:function(){return console.warn("use .parameters.renderer renderer"),this.parameters.renderer}}),Object.defineProperty(this,"camera",{get:function(){return console.warn("use .parameters.camera instead"),this.parameters.camera}}),Object.defineProperty(this,"scene",{get:function(){return console.warn("use .parameters.scene instead"),this.parameters.scene}}),console.log("AR.js",ARjs.Context.REVISION,"- trackingBackend:",_.contextParameters.trackingBackend);var U=R.arSource=new ARjs.Source(_.sourceParameters);U.init(function(){U.onResize(w,R.parameters.renderer,R.parameters.camera)}),window.addEventListener("resize",function(){U.onResize(w,R.parameters.renderer,R.parameters.camera)});var w=R.arContext=new ARjs.Context(_.contextParameters);R.arContext.init(),w.addEventListener("initialized",function(e){U.onResize(w,R.parameters.renderer,R.parameters.camera)}),this.update=function(){U.ready!==!1&&w.update(U.domElement)}},ARjs.Session.prototype.onResize=function(){this.arSource.onResize(this.arContext,this.parameters.renderer,this.parameters.camera)};var ARjs=ARjs||{};ARjs.Utils={},ARjs.Utils.createDefaultCamera=function(_){var R=this.parseTrackingMethod(_).trackingBackend;if(R==="artoolkit")var O=new THREE.Camera;else if(R==="aruco")var O=new THREE.PerspectiveCamera(42,window.innerWidth/window.innerHeight,.01,100);else console.assert(!1,"unknown trackingBackend: "+R);return O},ARjs.Utils.parseTrackingMethod=function(_){return _==="best"&&(_="area-artoolkit"),_.startsWith("area-")?{trackingBackend:_.replace("area-",""),markersAreaEnabled:!0}:{trackingBackend:_,markersAreaEnabled:!1}};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaControls=THREEx.ArMultiMarkerControls=function(_,R,O){var U=this;THREEx.ArBaseControls.call(this,R),arguments.length>3&&console.assert("wrong api for",THREEx.ArMultiMarkerControls),this.parameters={subMarkersControls:O.subMarkersControls,subMarkerPoses:O.subMarkerPoses,changeMatrixMode:O.changeMatrixMode!==void 0?O.changeMatrixMode:"modelViewMatrix"},this.object3d.visible=!1,this.subMarkersControls=this.parameters.subMarkersControls,this.subMarkerPoses=this.parameters.subMarkerPoses,_.addEventListener("sourceProcessed",function(){U._onSourceProcessed()})},ARjs.MarkersAreaControls.prototype=Object.create(THREEx.ArBaseControls.prototype),ARjs.MarkersAreaControls.prototype.constructor=ARjs.MarkersAreaControls,ARjs.MarkersAreaControls.prototype._onSourceProcessed=function(){var _=this,R={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},O=_.parameters.subMarkersControls[0].object3d.quaternion;if(this.parameters.subMarkersControls.forEach(function(w,e){var me=w.object3d;if(me.visible!==!1){var ie=me.matrix.clone(),we=_.parameters.subMarkerPoses[e];ie.multiply(new THREE.Matrix4().getInverse(we));var P=new THREE.Vector3,p=new THREE.Quaternion,S=new THREE.Vector3;ie.decompose(P,p,S),R.count++,ARjs.MarkersAreaControls.averageVector3(R.position.sum,P,R.count,R.position.average),ARjs.MarkersAreaControls.averageQuaternion(R.quaternion.sum,p,O,R.count,R.quaternion.average),ARjs.MarkersAreaControls.averageVector3(R.scale.sum,S,R.count,R.scale.average)}}),R.count>0?_.object3d.visible=!0:_.object3d.visible=!1,R.count>0){var U=new THREE.Matrix4;U.compose(R.position.average,R.quaternion.average,R.scale.average),this.parameters.changeMatrixMode==="modelViewMatrix"?_.object3d.matrix.copy(U):this.parameters.changeMatrixMode==="cameraTransformMatrix"?_.object3d.matrix.getInverse(U):console.assert(!1),_.object3d.matrix.decompose(_.object3d.position,_.object3d.quaternion,_.object3d.scale)}},ARjs.MarkersAreaControls.averageQuaternion=function(_,R,O,U,w){return w=w||new THREE.Quaternion,console.assert(O instanceof THREE.Quaternion),R.dot(O)>0&&(R=new THREE.Quaternion(-R.x,-R.y,-R.z,-R.w)),_.x+=R.x,_.y+=R.y,_.z+=R.z,_.w+=R.w,w.x=_.x/U,w.y=_.y/U,w.z=_.z/U,w.w=_.w/U,w.normalize(),w},ARjs.MarkersAreaControls.averageVector3=function(_,R,O,U){return U=U||new THREE.Vector3,_.x+=R.x,_.y+=R.y,_.z+=R.z,U.x=_.x/O,U.y=_.y/O,U.z=_.z/O,U},ARjs.MarkersAreaControls.computeCenter=function(_){var R=JSON.parse(_),O={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}},U=new THREE.Quaternion;R.subMarkersControls.forEach(function(e){var me=new THREE.Matrix4().fromArray(e.poseMatrix),ie=new THREE.Vector3,we=new THREE.Quaternion,P=new THREE.Vector3;me.decompose(ie,we,P),O.count++,ARjs.MarkersAreaControls.averageVector3(O.position.sum,ie,O.count,O.position.average),ARjs.MarkersAreaControls.averageQuaternion(O.quaternion.sum,we,U,O.count,O.quaternion.average),ARjs.MarkersAreaControls.averageVector3(O.scale.sum,P,O.count,O.scale.average)});var w=new THREE.Matrix4;return w.compose(O.position.average,O.quaternion.average,O.scale.average),w},ARjs.MarkersAreaControls.computeBoundingBox=function(_){var R=JSON.parse(_),O=new THREE.Box3;return R.subMarkersControls.forEach(function(U){var w=new THREE.Matrix4().fromArray(U.poseMatrix),e=new THREE.Vector3,me=new THREE.Quaternion,ie=new THREE.Vector3;w.decompose(e,me,ie),O.expandByPoint(e)}),O},ARjs.MarkersAreaControls.prototype.updateSmoothedControls=function(_,R){R===void 0&&(R=[[.3+.1,.1,.3],[.4+.1,.1,.4],[.4+.1,.2,.5],[.5+.1,.2,.7],[.5+.1,.2,.7]]);var O=0;if(this.parameters.subMarkersControls.forEach(function(w,e){var me=w.object3d;me.visible===!0&&O++}),R[O-1]!==void 0)var U=R[O-1];else var U=R[R.length-1];_.parameters.lerpPosition=U[0],_.parameters.lerpQuaternion=U[1],_.parameters.lerpScale=U[2]},ARjs.MarkersAreaControls.fromJSON=function(_,R,O,U,w){var e=JSON.parse(U),me=[],ie=[];w=w||{},e.subMarkersControls.forEach(function(P){var p=new THREE.Object3D;R.add(p);var S=new THREEx.ArMarkerControls(_,p,P.parameters);me.push(S),ie.push(new THREE.Matrix4().fromArray(P.poseMatrix))}),w.subMarkersControls=me,w.subMarkerPoses=ie;var we=new THREEx.ArMultiMarkerControls(_,O,w);return we};var ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaLearning=THREEx.ArMultiMakersLearning=function(_,R){var O=this;this._arToolkitContext=_,this.subMarkersControls=R,this.enabled=!0,_.addEventListener("sourceProcessed",function(){O._onSourceProcessed()})},ARjs.MarkersAreaLearning.prototype._onSourceProcessed=function(){var _=this.subMarkersControls[0].object3d.quaternion;if(this.enabled!==!1)for(var R=this.subMarkersControls.filter(function(K){return K.object3d.visible===!0}),O=Object.keys(R).length,U=new THREE.Vector3,w=new THREE.Quaternion,e=new THREE.Vector3,me=new THREE.Matrix4,ie=0;ie<O;ie++)for(var we=R[ie],P=0;P<O;P++){var p=R[P];if(ie!==P){we.object3d.userData.seenCouples===void 0&&(we.object3d.userData.seenCouples={});var S=we.object3d.userData.seenCouples;S[p.id]===void 0&&(S[p.id]={count:0,position:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)},quaternion:{sum:new THREE.Quaternion(0,0,0,0),average:new THREE.Quaternion(0,0,0,0)},scale:{sum:new THREE.Vector3(0,0,0),average:new THREE.Vector3(0,0,0)}}),me.getInverse(we.object3d.matrix),me.multiply(p.object3d.matrix),me.decompose(U,w,e);var z=S[p.id];z.count++,THREEx.ArMultiMarkerControls.averageVector3(z.position.sum,U,z.count,z.position.average),THREEx.ArMultiMarkerControls.averageQuaternion(z.quaternion.sum,w,_,z.count,z.quaternion.average),THREEx.ArMultiMarkerControls.averageVector3(z.scale.sum,e,z.count,z.scale.average)}}},ARjs.MarkersAreaLearning.prototype.computeResult=function(){var _=this,R=this.subMarkersControls[0];this.deleteResult(),R.object3d.userData.result={averageMatrix:new THREE.Matrix4,confidenceFactor:1};do{var O=!1;this.subMarkersControls.forEach(function(U){var w=U.object3d.userData.result,e=w!==void 0&&w.confidenceFactor>=1;if(e!==!0){var me=_._getLearnedCoupleStats(U);if(me!==null){var ie=_._getSubMarkerControlsByID(me),we=U.object3d.userData.seenCouples[me],P=new THREE.Matrix4;P.compose(we.position.average,we.quaternion.average,we.scale.average);var p=ie.object3d.userData.result.averageMatrix,S=new THREE.Matrix4().getInverse(p).multiply(P);S=new THREE.Matrix4().getInverse(S),console.assert(U.object3d.userData.result===void 0),U.object3d.userData.result={averageMatrix:S,confidenceFactor:1},O=!0}}})}while(O===!0)},ARjs.MarkersAreaLearning.prototype._getLearnedCoupleStats=function(_){if(_.object3d.userData.seenCouples===void 0)return null;for(var R=_.object3d.userData.seenCouples,O=Object.keys(R).map(Number),U=0;U<O.length;U++){var w=O[U],e=this._getSubMarkerControlsByID(w),me=e.object3d.userData.result,ie=me!==void 0&&me.confidenceFactor>=1;if(ie!==!1)return w}return null},ARjs.MarkersAreaLearning.prototype._getSubMarkerControlsByID=function(_){for(var R=0;R<this.subMarkersControls.length;R++){var O=this.subMarkersControls[R];if(O.id===_)return O}return null},ARjs.MarkersAreaLearning.prototype.toJSON=function(){this.computeResult();var _={meta:{createdBy:"Area Learning - AR.js "+THREEx.ArToolkitContext.REVISION,createdAt:new Date().toJSON()},trackingBackend:this._arToolkitContext.parameters.trackingBackend,subMarkersControls:[]},R=this.subMarkersControls[0];new THREE.Matrix4().getInverse(R.object3d.matrix),this.subMarkersControls.forEach(function(U,w){if(U.object3d.userData.result!==void 0){var e=U.object3d.userData.result.averageMatrix;console.assert(e instanceof THREE.Matrix4);var me={parameters:{},poseMatrix:e.toArray()};U.parameters.type==="pattern"?(me.parameters.type=U.parameters.type,me.parameters.patternUrl=U.parameters.patternUrl):U.parameters.type==="barcode"?(me.parameters.type=U.parameters.type,me.parameters.barcodeValue=U.parameters.barcodeValue):console.assert(!1),_.subMarkersControls.push(me)}});var O=JSON.stringify(_,null,"	");return O},ARjs.MarkersAreaLearning.prototype.resetStats=function(){this.deleteResult(),this.subMarkersControls.forEach(function(_){delete _.object3d.userData.seenCouples})},ARjs.MarkersAreaLearning.prototype.deleteResult=function(){this.subMarkersControls.forEach(function(_){delete _.object3d.userData.result})};var THREEx=THREEx||{},ARjs=ARjs||{},THREEx=THREEx||{};ARjs.MarkersAreaUtils=THREEx.ArMultiMarkerUtils={},ARjs.MarkersAreaUtils.navigateToLearnerPage=function(_,R){var O={backURL:location.href,trackingBackend:R,markersControlsParameters:ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters(R)};location.href=_+"?"+encodeURIComponent(JSON.stringify(O))},ARjs.MarkersAreaUtils.storeDefaultMultiMarkerFile=function(_){var R=ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile(_);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(R))},ARjs.MarkersAreaUtils.createDefaultMultiMarkerFile=function(_){if(console.assert(_),_===void 0)debugger;var R=document.createElement("a");R.href=ARjs.Context.baseURL;var O=R.href,U={meta:{createdBy:"AR.js "+ARjs.Context.REVISION+" - Default Marker",createdAt:new Date().toJSON()},trackingBackend:_,subMarkersControls:[]};return U.subMarkersControls[0]={parameters:{},poseMatrix:new THREE.Matrix4().makeTranslation(0,0,0).toArray()},_==="artoolkit"?(U.subMarkersControls[0].parameters.type="pattern",U.subMarkersControls[0].parameters.patternUrl=O+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"):_==="aruco"?(U.subMarkersControls[0].parameters.type="barcode",U.subMarkersControls[0].parameters.barcodeValue=1001):console.assert(!1),U},ARjs.MarkersAreaUtils.createDefaultMarkersControlsParameters=function(_){var R=document.createElement("a");R.href=ARjs.Context.baseURL;var O=R.href;if(_==="artoolkit")var U=[{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-kanji.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"},{type:"pattern",patternUrl:O+"examples/marker-training/examples/pattern-files/pattern-letterF.patt"}];else if(_==="aruco")var U=[{type:"barcode",barcodeValue:1001},{type:"barcode",barcodeValue:1002},{type:"barcode",barcodeValue:1003},{type:"barcode",barcodeValue:1004},{type:"barcode",barcodeValue:1005},{type:"barcode",barcodeValue:1006}];else console.assert(!1);return U},ARjs.MarkersAreaUtils.storeMarkersAreaFileFromResolution=function(_,R,O){var U=this.buildMarkersAreaFileFromResolution(_,R,O);localStorage.setItem("ARjsMultiMarkerFile",JSON.stringify(U))},ARjs.MarkersAreaUtils.buildMarkersAreaFileFromResolution=function(_,R,O){var U={meta:{createdBy:"AR.js - Augmented Website",createdAt:new Date().toJSON()},trackingBackend:_,subMarkersControls:[]},w=.1;if(R>O)var e=.4*O;else if(R<O)var e=.4*R;else if(R===O)var e=.33*R;else console.assert(!1);var me=e*(1-2*w),ie=(R-e)/2/me,we=(O-e)/2/me,P=p("center",0,0);U.subMarkersControls.push(P);var P=p("topleft",-ie,-we);U.subMarkersControls.push(P);var P=p("topright",+ie,-we);U.subMarkersControls.push(P);var P=p("bottomleft",-ie,+we);U.subMarkersControls.push(P);var P=p("bottomright",+ie,+we);return U.subMarkersControls.push(P),U;function p(K,D,Q){console.log("buildSubMarkerControls",K,D,Q);var V={parameters:{},poseMatrix:new THREE.Matrix4().makeTranslation(D,0,Q).toArray()};return _==="artoolkit"?S(V.parameters,K):_==="aruco"?z(V.parameters,K):console.assert(!1),V}function S(K,D){var Q=document.createElement("a");Q.href=ARjs.Context.baseURL;var V=Q.href,T={center:F(V+"examples/marker-training/examples/pattern-files/pattern-hiro.patt"),topleft:F(V+"examples/marker-training/examples/pattern-files/pattern-letterA.patt"),topright:F(V+"examples/marker-training/examples/pattern-files/pattern-letterB.patt"),bottomleft:F(V+"examples/marker-training/examples/pattern-files/pattern-letterC.patt"),bottomright:F(V+"examples/marker-training/examples/pattern-files/pattern-letterF.patt")};console.assert(T[D]!==void 0),K.type="pattern",K.patternUrl=T[D];return;function F(N){var k=document.createElement("a");return k.href=N,k.href}}function z(K,D){var Q={center:1001,topleft:1002,topright:1003,bottomleft:1004,bottomright:1005};console.assert(Q[D]),K.type="barcode",K.barcodeValue=Q[D]}},AFRAME.registerComponent("arjs-anchor",{dependencies:["arjs","artoolkit"],schema:{preset:{type:"string"},markerhelpers:{type:"boolean",default:!1},size:{type:"number",default:1},type:{type:"string"},patternUrl:{type:"string"},barcodeValue:{type:"number"},changeMatrixMode:{type:"string",default:"modelViewMatrix"},minConfidence:{type:"number",default:.6},smooth:{type:"boolean",default:!1},smoothCount:{type:"number",default:5},smoothTolerance:{type:"number",default:.01},smoothThreshold:{type:"number",default:2}},init:function(){var _=this,R=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit;_.isReady=!1,_._arAnchor=null,_.data.changeMatrixMode==="modelViewMatrix"?_.el.object3D.visible=!1:_.data.changeMatrixMode==="cameraTransformMatrix"?_.el.sceneEl.object3D.visible=!1:console.assert(!1);var O=setInterval(function(){if(R.isReady!==!1){clearInterval(O);var U=R._arProfile;U.changeMatrixMode(_.data.changeMatrixMode);var w=Object.assign({},U.defaultMarkerParameters);_.data.preset==="hiro"?(w.type="pattern",w.patternUrl=THREEx.ArToolkitContext.baseURL+"examples/marker-training/examples/pattern-files/pattern-hiro.patt",w.markersAreaEnabled=!1):_.data.preset==="kanji"?(w.type="pattern",w.patternUrl=THREEx.ArToolkitContext.baseURL+"examples/marker-training/examples/pattern-files/pattern-kanji.patt",w.markersAreaEnabled=!1):_.data.preset==="area"?(w.type="barcode",w.barcodeValue=1001,w.markersAreaEnabled=!0):_.data.type==="barcode"?w={type:_.data.type,changeMatrixMode:"modelViewMatrix",barcodeValue:_.data.barcodeValue,markersAreaEnabled:!1}:_.data.type==="pattern"&&(w.type=_.data.type,w.patternUrl=_.data.patternUrl,w.markersAreaEnabled=!1),w.smooth=_.data.smooth,w.smoothCount=_.data.smoothCount,w.smoothTolerance=_.data.smoothTolerance,w.smoothThreshold=_.data.smoothThreshold;var e=R._arSession,me=_._arAnchor=new ARjs.Anchor(e,w);if(_.isReady=!0,R.data.debugUIEnabled){var ie=document.querySelector("#arjsDebugUIContainer");ie===null&&(ie=document.createElement("div"),ie.id="arjsDebugUIContainer",ie.setAttribute("style","position: fixed; bottom: 10px; width:100%; text-align: center; z-index: 1; color: grey;"),document.body.appendChild(ie));var we=new ARjs.AnchorDebugUI(me);ie.appendChild(we.domElement)}}},1e3/60)},remove:function(){},update:function(){},tick:function(){var _=this;if(this.isReady!==!1){this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit,this._arAnchor.update();var R=this._arAnchor.object3d;if(R.updateMatrixWorld(!0),R.matrixWorld.decompose(this.el.object3D.position,this.el.object3D.quaternion,this.el.object3D.scale),_._arAnchor.parameters.changeMatrixMode==="modelViewMatrix"){var O=_.el.object3D.visible;_.el.object3D.visible=this._arAnchor.object3d.visible}else if(_._arAnchor.parameters.changeMatrixMode==="cameraTransformMatrix"){var O=_.el.sceneEl.object3D.visible;_.el.sceneEl.object3D.visible=this._arAnchor.object3d.visible}else console.assert(!1);_._arAnchor.object3d.visible===!0&&O===!1?_.el.emit("markerFound"):_._arAnchor.object3d.visible===!1&&O===!0&&_.el.emit("markerLost")}}}),AFRAME.registerPrimitive("a-anchor",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{},"arjs-hit-testing":{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers",smooth:"arjs-anchor.smooth","smooth-count":"arjs-anchor.smoothCount","smooth-tolerance":"arjs-anchor.smoothTolerance","smooth-threshold":"arjs-anchor.smoothThreshold","hit-testing-render-debug":"arjs-hit-testing.renderDebug","hit-testing-enabled":"arjs-hit-testing.enabled"}})),AFRAME.registerPrimitive("a-camera-static",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{camera:{}},mappings:{}})),AFRAME.registerPrimitive("a-marker",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{},"arjs-hit-testing":{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers",smooth:"arjs-anchor.smooth","smooth-count":"arjs-anchor.smoothCount","smooth-tolerance":"arjs-anchor.smoothTolerance","smooth-threshold":"arjs-anchor.smoothThreshold","hit-testing-render-debug":"arjs-hit-testing.renderDebug","hit-testing-enabled":"arjs-hit-testing.enabled"}})),AFRAME.registerPrimitive("a-marker-camera",AFRAME.utils.extendDeep({},AFRAME.primitives.getMeshMixin(),{defaultComponents:{"arjs-anchor":{changeMatrixMode:"cameraTransformMatrix"},camera:{}},mappings:{type:"arjs-anchor.type",size:"arjs-anchor.size",url:"arjs-anchor.patternUrl",value:"arjs-anchor.barcodeValue",preset:"arjs-anchor.preset","min-confidence":"arjs-anchor.minConfidence","marker-helpers":"arjs-anchor.markerhelpers"}})),AFRAME.registerComponent("arjs-hit-testing",{dependencies:["arjs","artoolkit"],schema:{enabled:{type:"boolean",default:!1},renderDebug:{type:"boolean",default:!1}},init:function(){var _=this,R=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit;_.isReady=!1,_._arAnchor=null,_._arHitTesting=null;var O=setInterval(function(){var U=_.el,w=U.components["arjs-anchor"];if(!(w===void 0||w.isReady===!1)){clearInterval(O),w._arAnchor;var e=R._arSession;e.parameters.renderer;var me=_._arHitTesting=new ARjs.HitTesting(e);me.enabled=_.data.enabled,_.isReady=!0}},1e3/60)},remove:function(){},update:function(){},tick:function(){var _=this;if(this.isReady!==!1){var R=this.el.sceneEl.systems.arjs||this.el.sceneEl.systems.artoolkit,O=R._arSession,U=_.el,w=U.components["arjs-anchor"],e=w._arAnchor,me=this._arHitTesting,ie=O.parameters.camera;me.update(ie,e.object3d,e.parameters.changeMatrixMode)}}}),AFRAME.registerComponent("gps-camera-debug",{init:function(){this.current_coords_latitude,this.current_coords_longitude,this.origin_coords_latitude,this.origin_coords_longitude,this.camera_p_x,this.camera_p_z,this.entities=0,this._buildCameraDebugUI(document.body),this.current_coords_latitude=document.querySelector("#current_coords_latitude"),this.current_coords_longitude=document.querySelector("#current_coords_longitude"),this.origin_coords_latitude=document.querySelector("#origin_coords_latitude"),this.origin_coords_longitude=document.querySelector("#origin_coords_longitude"),this.camera_p_x=document.querySelector("#camera_p_x"),this.camera_p_z=document.querySelector("#camera_p_z"),this.placesLoadedEventHandler=function(){this.entities++;var _=document.querySelectorAll("[gps-entity-place]")&&document.querySelectorAll("[gps-entity-place]").length||0;_===this.entities&&(this._buildDistancesDebugUI(),window.removeEventListener("gps-entity-place-loaded",this.placesLoadedEventHandler.bind(this)),window.dispatchEvent(new CustomEvent("debug-ui-added")))},window.addEventListener("gps-entity-place-loaded",this.placesLoadedEventHandler.bind(this))},tick:function(){var _=document.querySelector("[gps-camera]"),R=_.getAttribute("position");this.camera_p_x.innerText=R.x.toFixed(6),this.camera_p_z.innerText=R.z.toFixed(6);var O=_.components["gps-camera"];O&&(O.currentCoords&&(this.current_coords_longitude.innerText=O.currentCoords.longitude.toFixed(6),this.current_coords_latitude.innerText=O.currentCoords.latitude.toFixed(6)),O.originCoords&&(this.origin_coords_longitude.innerText=O.originCoords.longitude.toFixed(6),this.origin_coords_latitude.innerText=O.originCoords.latitude.toFixed(6)))},_buildCameraDebugUI:function(_){var R=document.createElement("div");R.classList.add("debug");var O=document.createElement("div");O.innerText="current lng/lat coords: ";var U=document.createElement("span");U.id="current_coords_longitude";var w=document.createElement("span");w.id="current_coords_latitude",O.appendChild(U),O.appendChild(w),R.appendChild(O);var e=document.createElement("div");e.innerText="origin lng/lat coords: ";var me=document.createElement("span");me.id="origin_coords_longitude";var ie=document.createElement("span");ie.id="origin_coords_latitude",e.appendChild(me),e.appendChild(ie),R.appendChild(e);var we=document.createElement("div");we.innerText="camera 3d position: ";var P=document.createElement("span");P.id="camera_p_x";var p=document.createElement("span");p.id="camera_p_z",we.appendChild(P),we.appendChild(p),R.appendChild(we),_.appendChild(R)},_buildDistancesDebugUI:function(){var _=document.querySelector(".debug");document.querySelectorAll("[gps-entity-place]").forEach(function(R){var O=document.createElement("div");O.classList.add("debug-distance"),O.innerHTML=R.getAttribute("value"),console.log(R.getAttribute("value")),O.setAttribute("value",R.getAttribute("value")),_.appendChild(O)})}}),AFRAME.registerComponent("gps-camera",{_watchPositionId:null,originCoords:null,currentCoords:null,lookControls:null,heading:null,schema:{simulateLatitude:{type:"number",default:0},simulateLongitude:{type:"number",default:0},simulateAltitude:{type:"number",default:0},positionMinAccuracy:{type:"int",default:100},alert:{type:"boolean",default:!1},minDistance:{type:"int",default:0}},init:function(){if(this.el.components["look-controls"]){this.loader=document.createElement("DIV"),this.loader.classList.add("arjs-loader"),document.body.appendChild(this.loader),window.addEventListener("gps-entity-place-added",(function(){this.originCoords&&(window.dispatchEvent(new CustomEvent("gps-camera-origin-coord-set")),console.debug("gps-camera-origin-coord-set")),this.loader&&this.loader.parentElement&&document.body.removeChild(this.loader)}).bind(this)),this.lookControls=this.el.components["look-controls"];var _=this._getDeviceOrientationEventName();if(this._onDeviceOrientation=this._onDeviceOrientation.bind(this),navigator.userAgent.match(/Version\/[\d.]+.*Safari/))if(typeof DeviceOrientationEvent.requestPermission=="function"){var R=function(){console.log("Requesting device orientation permissions..."),DeviceOrientationEvent.requestPermission(),document.removeEventListener("touchend",R)};document.addEventListener("touchend",function(){R()},!1),alert("After camera permission prompt, please tap the screen to activate geolocation.")}else{var O=setTimeout(function(){alert("Please enable device orientation in Settings > Safari > Motion & Orientation Access.")},750);window.addEventListener(_,function(){clearTimeout(O)})}window.addEventListener(_,this._onDeviceOrientation,!1),this._watchPositionId=this._initWatchGPS((function(U){this.data.simulateLatitude!==0&&this.data.simulateLongitude!==0?(localPosition=Object.assign({},U.coords),localPosition.longitude=this.data.simulateLongitude,localPosition.latitude=this.data.simulateLatitude,localPosition.altitude=this.data.simulateAltitude,this.currentCoords=localPosition):this.currentCoords=U.coords,this._updatePosition()}).bind(this))}},tick:function(){this.heading!==null&&this._updateRotation()},remove:function(){this._watchPositionId&&navigator.geolocation.clearWatch(this._watchPositionId),this._watchPositionId=null;var _=this._getDeviceOrientationEventName();window.removeEventListener(_,this._onDeviceOrientation,!1)},_getDeviceOrientationEventName:function(){if("ondeviceorientationabsolute"in window)var _="deviceorientationabsolute";else if("ondeviceorientation"in window)var _="deviceorientation";else{var _="";console.error("Compass not supported")}return _},_initWatchGPS:function(_,R){return R||(R=function(O){if(console.warn("ERROR("+O.code+"): "+O.message),O.code===1){alert("Please activate Geolocation and refresh the page. If it is already active, please check permissions for this website.");return}if(O.code===3){alert("Cannot retrieve GPS position. Signal is absent.");return}}),"geolocation"in navigator?navigator.geolocation.watchPosition(_,R,{enableHighAccuracy:!0,maximumAge:0,timeout:27e3}):(R({code:0,message:"Geolocation is not supported by your browser"}),Promise.resolve())},_updatePosition:function(){if(this.currentCoords.accuracy>this.data.positionMinAccuracy){if(this.data.alert&&!document.getElementById("alert-popup")){var _=document.createElement("div");_.innerHTML="GPS signal is very poor. Try move outdoor or to an area with a better signal.",_.setAttribute("id","alert-popup"),document.body.appendChild(_)}return}var R=document.getElementById("alert-popup");if(this.currentCoords.accuracy<=this.data.positionMinAccuracy&&R&&document.body.removeChild(R),this.originCoords)this._setPosition();else{this.originCoords=this.currentCoords,this._setPosition();var O=document.querySelector(".arjs-loader");O&&document.body.removeChild(O),window.dispatchEvent(new CustomEvent("gps-camera-origin-coord-set")),console.debug("gps-camera-origin-coord-set")}},_setPosition:function(){var _=this.el.getAttribute("position"),R={longitude:this.currentCoords.longitude,latitude:this.originCoords.latitude};_.x=this.computeDistanceMeters(this.originCoords,R),_.x*=this.currentCoords.longitude>this.originCoords.longitude?1:-1;var R={longitude:this.originCoords.longitude,latitude:this.currentCoords.latitude};_.z=this.computeDistanceMeters(this.originCoords,R),_.z*=this.currentCoords.latitude>this.originCoords.latitude?-1:1,this.el.setAttribute("position",_),window.dispatchEvent(new CustomEvent("gps-camera-update-position",{detail:{position:this.currentCoords,origin:this.originCoords}}))},computeDistanceMeters:function(_,R,O){var U=THREE.Math.degToRad(R.longitude-_.longitude),w=THREE.Math.degToRad(R.latitude-_.latitude),e=Math.sin(w/2)*Math.sin(w/2)+Math.cos(THREE.Math.degToRad(_.latitude))*Math.cos(THREE.Math.degToRad(R.latitude))*(Math.sin(U/2)*Math.sin(U/2)),me=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e)),ie=me*6378160;return O&&this.data.minDistance&&this.data.minDistance>0&&ie<this.data.minDistance?Number.MAX_SAFE_INTEGER:ie},_computeCompassHeading:function(_,R,O){var U=_*(Math.PI/180),w=R*(Math.PI/180),e=O*(Math.PI/180),me=Math.cos(U),ie=Math.sin(U),we=Math.sin(w),P=Math.cos(e),p=Math.sin(e),S=-me*p-ie*we*P,z=-ie*p+me*we*P,K=Math.atan(S/z);return z<0?K+=Math.PI:S<0&&(K+=2*Math.PI),K*=180/Math.PI,K},_onDeviceOrientation:function(_){_.webkitCompassHeading!==void 0?_.webkitCompassAccuracy<50?this.heading=_.webkitCompassHeading:console.warn("webkitCompassAccuracy is event.webkitCompassAccuracy"):_.alpha!==null?_.absolute===!0||_.absolute===void 0?this.heading=this._computeCompassHeading(_.alpha,_.beta,_.gamma):console.warn("event.absolute === false"):console.warn("event.alpha === null")},_updateRotation:function(){var _=360-this.heading,R=this.el.getAttribute("rotation").y,O=THREE.Math.radToDeg(this.lookControls.yawObject.rotation.y),U=(_-(R-O))%360;this.lookControls.yawObject.rotation.y=THREE.Math.degToRad(U)}}),AFRAME.registerComponent("gps-entity-place",{_cameraGps:null,schema:{longitude:{type:"number",default:0},latitude:{type:"number",default:0}},init:function(){window.addEventListener("gps-camera-origin-coord-set",(function(){if(!this._cameraGps){var _=document.querySelector("[gps-camera]");if(!_.components["gps-camera"]){console.error("gps-camera not initialized");return}this._cameraGps=_.components["gps-camera"]}this._updatePosition()}).bind(this)),window.addEventListener("gps-camera-update-position",(function(_){if(!(!this.data||!this._cameraGps)){var R={longitude:this.data.longitude,latitude:this.data.latitude},O=this._cameraGps.computeDistanceMeters(_.detail.position,R);this.el.setAttribute("distance",O),this.el.setAttribute("distanceMsg",formatDistance(O)),this.el.dispatchEvent(new CustomEvent("gps-entity-place-update-positon",{detail:{distance:O}}))}}).bind(this)),this._positionXDebug=0,window.dispatchEvent(new CustomEvent("gps-entity-place-added")),console.debug("gps-entity-place-added"),this.debugUIAddedHandler=function(){this.setDebugData(this.el),window.removeEventListener("debug-ui-added",this.debugUIAddedHandler.bind(this))},window.addEventListener("debug-ui-added",this.debugUIAddedHandler.bind(this))},_updatePosition:function(){var _={x:0,y:this.el.getAttribute("position").y||0,z:0},R=!1,O={longitude:this.data.longitude,latitude:this._cameraGps.originCoords.latitude};_.x=this._cameraGps.computeDistanceMeters(this._cameraGps.originCoords,O,!0),_.x===Number.MAX_SAFE_INTEGER&&(R=!0),this._positionXDebug=_.x,_.x*=this.data.longitude>this._cameraGps.originCoords.longitude?1:-1;var O={longitude:this._cameraGps.originCoords.longitude,latitude:this.data.latitude};_.z=this._cameraGps.computeDistanceMeters(this._cameraGps.originCoords,O,!0),_.z===Number.MAX_SAFE_INTEGER&&(R=!0),_.z*=this.data.latitude>this._cameraGps.originCoords.latitude?-1:1,_.y!==0&&(_.y=_.y-this._cameraGps.originCoords.altitude),R?this.el.setAttribute("visible",!1):this.el.setAttribute("visible",!0),this.el.setAttribute("position",_)},setDebugData:function(_){var R=document.querySelectorAll(".debug-distance");R.forEach(function(O){var U=formatDistance(this._positionXDebug);_.getAttribute("value")==O.getAttribute("value")&&(O.innerHTML=O.getAttribute("value")+": "+U+"far")})}});function formatDistance(_){return _=_.toFixed(0),_>=1e3?_/1e3+" kilometers":_+" meters"}AFRAME.registerSystem("arjs",{schema:{trackingMethod:{type:"string",default:"best"},debugUIEnabled:{type:"boolean",default:!0},areaLearningButton:{type:"boolean",default:!0},performanceProfile:{type:"string",default:"default"},debug:{type:"boolean",default:!1},detectionMode:{type:"string",default:""},matrixCodeType:{type:"string",default:""},patternRatio:{type:"number",default:-1},labelingMode:{type:"string",default:""},cameraParametersUrl:{type:"string",default:""},maxDetectionRate:{type:"number",default:-1},sourceType:{type:"string",default:""},sourceUrl:{type:"string",default:""},sourceWidth:{type:"number",default:-1},sourceHeight:{type:"number",default:-1},deviceId:{type:"string",default:""},displayWidth:{type:"number",default:-1},displayHeight:{type:"number",default:-1},canvasWidth:{type:"number",default:-1},canvasHeight:{type:"number",default:-1}},init:function(){var _=this,R=this._arProfile=new ARjs.Profile().trackingMethod(this.data.trackingMethod).performance(this.data.performanceProfile).defaultMarker();this.data.debug!==!1&&(R.contextParameters.debug=this.data.debug),this.data.detectionMode!==""&&(R.contextParameters.detectionMode=this.data.detectionMode),this.data.matrixCodeType!==""&&(R.contextParameters.matrixCodeType=this.data.matrixCodeType),this.data.patternRatio!==-1&&(R.contextParameters.patternRatio=this.data.patternRatio),this.data.labelingMode!==""&&(R.contextParameters.labelingMode=this.data.labelingMode),this.data.cameraParametersUrl!==""&&(R.contextParameters.cameraParametersUrl=this.data.cameraParametersUrl),this.data.maxDetectionRate!==-1&&(R.contextParameters.maxDetectionRate=this.data.maxDetectionRate),this.data.canvasWidth!==-1&&(R.contextParameters.canvasWidth=this.data.canvasWidth),this.data.canvasHeight!==-1&&(R.contextParameters.canvasHeight=this.data.canvasHeight),this.data.sourceType!==""&&(R.sourceParameters.sourceType=this.data.sourceType),this.data.sourceUrl!==""&&(R.sourceParameters.sourceUrl=this.data.sourceUrl),this.data.sourceWidth!==-1&&(R.sourceParameters.sourceWidth=this.data.sourceWidth),this.data.sourceHeight!==-1&&(R.sourceParameters.sourceHeight=this.data.sourceHeight),this.data.deviceId!==""&&(R.sourceParameters.deviceId=this.data.deviceId),this.data.displayWidth!==-1&&(R.sourceParameters.displayWidth=this.data.displayWidth),this.data.displayHeight!==-1&&(R.sourceParameters.displayHeight=this.data.displayHeight),R.checkIfValid(),this._arSession=null,_.isReady=!1,_.needsOverride=!0,this.el.sceneEl.addEventListener("renderstart",function(){var w=_.el.sceneEl.object3D,e=_.el.sceneEl.camera,me=_.el.sceneEl.renderer,ie=_._arSession=new ARjs.Session({scene:w,renderer:me,camera:e,sourceParameters:R.sourceParameters,contextParameters:R.contextParameters});_.isReady=!0,window.addEventListener("resize",we);function we(){var p=_._arSession.arSource;R.contextParameters.trackingBackend!=="tango"&&p.copyElementSizeTo(document.body);var S=document.querySelector(".a-enter-vr");S&&(S.style.position="fixed")}_.data.debugUIEnabled&&P();function P(){var p=document.querySelector("#arjsDebugUIContainer");p===null&&(p=document.createElement("div"),p.id="arjsDebugUIContainer",p.setAttribute("style","position: fixed; bottom: 10px; width:100%; text-align: center; z-index: 1;color: grey;"),document.body.appendChild(p));var S=new ARjs.SessionDebugUI(ie);p.appendChild(S.domElement)}});var O=Date.now(),U=setInterval(function(){if(Date.now()-O>1e4*1e3){clearInterval(U);return}window.dispatchEvent(new Event("resize"))},1e3/30)},tick:function(_,R){this.isReady!==!1&&(this._arSession,this._arSession.update(),this._arSession.onResize())}})}(aframeAr_min)),aframeAr_min.exports}requireAframeAr_min();const ARScene=({modelPath:_="/public/model/sofa/wooden_sofa.glb"})=>(reactExports.useEffect(()=>{typeof window<"u"&&window.AFRAME&&console.log("A-Frame and AR.js loaded")},[]),jsxRuntimeExports.jsx("div",{className:"sketchfab-embed-wrapper size-full",children:jsxRuntimeExports.jsxs("a-scene",{embedded:!0,arjs:"sourceType: webcam;",children:[jsxRuntimeExports.jsx("a-marker",{preset:"hiro",children:jsxRuntimeExports.jsx("a-entity",{"gltf-model":"https://hossein-ghanimati.github.io/webxr/model/sofa/wooden_sofa.glb",scale:"0.5 0.5 0.5",rotation:"-90 0 0",onLoad:()=>console.log("Model loaded successfully!"),onError:()=>console.error("Error loading model")})}),jsxRuntimeExports.jsx("a-entity",{camera:!0})]})}));function App(){return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(ARScene,{})})})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(reactExports.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
